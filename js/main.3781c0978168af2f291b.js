!function(e){function t(t){for(var r,g,o=t[0],I=t[1],l=t[2],s=t[3]||[],C=0,A=[];C<o.length;C++)g=o[C],c[g]&&A.push(c[g][0]),c[g]=0;for(r in I)Object.prototype.hasOwnProperty.call(I,r)&&(e[r]=I[r]);for(u&&u(t),i.push.apply(i,s);A.length;)A.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,g=1;g<n.length;g++){var l=n[g];0!==c[l]&&(r=!1)}r&&(a.splice(t--,1),e=I(I.s=n[0]))}return 0===a.length&&(i.forEach(function(e){if(void 0===c[e]){c[e]=null;var t=document.createElement("link");I.nc&&t.setAttribute("nonce",I.nc),t.rel="prefetch",t.as="script",t.href=o(e),document.head.appendChild(t)}}),i.length=0),e}var r={},g={main:0},c={main:0},a=[],i=[];function o(e){return I.p+"js/"+({404:"404","account-info":"account-info",contract:"contract",modals:"modals","notification-messages":"notification-messages","push-notification":"push-notification","screen-small":"screen-small","settings-chart":"settings-chart","settings-language":"settings-language","settings-theme":"settings-theme","toggle-menu-drawer":"toggle-menu-drawer","vendors~digits~info-b~897959f6":"vendors~digits~info-b~897959f6",digits:"digits","info-box":"info-box",reports:"reports","vendors~open_position~7c650be5":"vendors~open_position~7c650be5","default~open_position~1833eefb":"default~open_position~1833eefb",open_positions:"open_positions",profit_table:"profit_table",statement:"statement","vendors~smart_chart":"vendors~smart_chart",smart_chart:"smart_chart","work-in-progress":"work-in-progress","vendors~AccountSignupModal":"vendors~AccountSignupModal",AccountSignupModal:"AccountSignupModal","two-month-picker":"two-month-picker"}[e]||e)+".3781c0978168af2f291b.js"}function I(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,I),n.l=!0,n.exports}I.e=function(e){var t=[];g[e]?t.push(g[e]):0!==g[e]&&{modals:1,"notification-messages":1,"screen-small":1,digits:1,reports:1,"default~open_position~1833eefb":1,"work-in-progress":1,AccountSignupModal:1}[e]&&t.push(g[e]=new Promise(function(t,n){for(var r="css/"+e+".css",c=I.p+r,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var o=(s=a[i]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(o===r||o===c))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){var s;if((o=(s=l[i]).getAttribute("data-href"))===r||o===c)return t()}var C=document.createElement("link");C.rel="stylesheet",C.type="text/css",C.onload=t,C.onerror=function(t){var r=t&&t.target&&t.target.src||c,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete g[e],C.parentNode.removeChild(C),n(a)},C.href=c,document.getElementsByTagName("head")[0].appendChild(C)}).then(function(){g[e]=0}));var n=c[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(t,r){n=c[e]=[t,r]});t.push(n[2]=r);var a,i=document.createElement("script");i.charset="utf-8",i.timeout=120,I.nc&&i.setAttribute("nonce",I.nc),i.src=o(e);var l=new Error;a=function(t){i.onerror=i.onload=null,clearTimeout(s);var n=c[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),g=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+g+")",l.name="ChunkLoadError",l.type=r,l.request=g,n[1](l)}c[e]=void 0}};var s=setTimeout(function(){a({type:"timeout",target:i})},12e4);i.onerror=i.onload=a,document.head.appendChild(i)}var C={contract:["vendors~smart_chart","smart_chart"],"toggle-menu-drawer":["vendors~smart_chart","smart_chart"]}[e];return C&&C.forEach(function(e){if(void 0===c[e]){c[e]=null;var t=document.createElement("link");t.charset="utf-8",I.nc&&t.setAttribute("nonce",I.nc),t.rel="preload",t.as="script",t.href=o(e),document.head.appendChild(t)}}),Promise.all(t)},I.m=e,I.c=r,I.d=function(e,t,n){I.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},I.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},I.t=function(e,t){if(1&t&&(e=I(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(I.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)I.d(n,r,function(t){return e[t]}.bind(null,r));return n},I.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return I.d(t,"a",t),t},I.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},I.p="/",I.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var C=0;C<l.length;C++)t(l[C]);var u=s,A=(a.push([518,"vendors~main"]),n());t([[],{},0,["notification-messages","vendors~digits~info-b~897959f6","info-box","modals","settings-chart","settings-language","settings-theme"]])}({10:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g,c,a,i,o,I,l,s,C,u,A,b,d,B,p,m,y,Q,G,Z,h=n(120).website_name,F=n(26),X=n(100),V=n(41).get,f=n(21).State,v=n(7).cloneObject,W=n(7).getPropertyValue,U=n(7).isEmptyObject,N=n(7).PromiseClass,_=n(70).getAppId,H=n(70).getSocketURL,x=(c={},a=[],i=0,o=0,I=!0,l=!1,s=!1,C="".concat(H(),"?app_id=").concat(_(),"&l=").concat(V(),"&brand=").concat(h.toLowerCase()),u={},A={},b=["authorize","get_settings","residence_list","landing_company","payout_currencies","asset_index","active_symbols"],d={items:[],clear:function(){d.items=[]},has:function(e){return d.items.indexOf(e)>=0},add:function(e){d.has(e)||d.items.push(e)},remove:function(e){d.has(e)&&d.items.splice(d.items.indexOf(e,1))}},B={items:{},add:function(e,t){B.items[e]||(B.items[e]=[]),B.items[e].push(t)},resolve:function(e){var t=e.msg_type,n=B.items[t];n&&n.length&&(n.forEach(function(n){B.another_exists(n,t)||n.resolve(e)}),B.items[t]=[])},another_exists:function(e,t){return Object.keys(B.items).some(function(n){return n!==t&&-1!==B.items[n].indexOf(e)})}},m=function(){return y(1)},Q=function(){for(;a.length>0&&I;){var e=a.shift();Z(e.request,e.options)}},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.promise||new N,r="function"==typeof t.callback;if(!e||U(e))return n.promise;var o=t.msg_type||b.find(function(t){return t in e});if(!t.forced){var s=X.get(e,o);if(s){if(f.set(["response",o],v(s)),m()&&I&&!t.skip_cache_update&&!r?g.send(JSON.stringify(e),{forced:!0}):1!=+e.time&&a.push({request:e,options:Object.assign(t,{promise:n,forced:!0})}),n.resolve(s),!r)return n.promise;t.callback(s)}}if(!t.forced&&o&&-1!==b.indexOf(o)){var C=f.get(["response",o]);if(C)return n.resolve(C),n.promise;if(d.has(o))return G(o).then(function(e){return n.resolve(e),n.promise})}return e.req_id||(e.req_id=++i),A[e.req_id]={callback:function(e){r?t.callback(e):n.resolve(e)},subscribe:!!e.subscribe},m()&&I&&c.isOnline()?(l=!1,W(e,"passthrough")||W(e,"verify_email")||(e.passthrough={}),g.send(JSON.stringify(e)),c.wsEvent("send"),o&&!d.has(o)&&d.add(o)):1!=+e.time&&a.push({request:e,options:Object.assign(t,{promise:n})}),n.promise},{init:function(e){o!==_()&&("object"===r(e)&&c!==e&&(c=e,a=[]),p(),c.wsEvent("init"),g&&!y(2,3)||(g=new WebSocket(C),f.set("response",{})),g.onopen=function(){c.wsEvent("open"),F.isLoggedIn()?Z({authorize:F.get("token")},{forced:!0}):Q(),"function"==typeof c.onOpen&&c.onOpen(m()),"function"==typeof c.onReconnect&&s&&c.onReconnect(),s||(s=!0)},g.onmessage=function(e){c.wsEvent("message");var t=e.data?JSON.parse(e.data):void 0;if(t){X.set(t);var n=t.msg_type;W(t,["echo_req","subscribe"])&&!/balance|website_status/.test(n)||f.set(["response",n],v(t));var r=t.req_id,g=r?A[r]:null;g&&"function"==typeof g.callback&&(g.callback(t),g.subscribe||delete A[r]),B.resolve(t),"InvalidAppID"===W(t,["error","code"])&&(o=_()),"function"==typeof c.onMessage&&c.onMessage(t)}},g.onclose=function(){d.clear(),p(),c.wsEvent("close"),o===_()||"function"!=typeof c.onDisconnect||l||(c.onDisconnect(),l=!0)})},wait:G=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new N,g=!0;return t.forEach(function(e){var n=f.get(["response",e]);!n||"get_settings"!==e&&"get_account_status"!==e?n?1===t.length&&r.resolve(n):("authorize"!==e||F.isLoggedIn())&&(B.add(e,r),g=!1):(B.add(e,r),g=!1)}),g&&r.resolve(),r.promise},send:Z,clear:function(e){a=[],e&&(f.set(["response",e],void 0),d.remove(e))},clearTimeouts:p=function(){Object.keys(u).forEach(function(e){clearTimeout(u[e]),delete u[e]})},availability:function(e){return void 0!==e&&(I=!!e),I},hasReadyState:y=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g&&t.some(function(e){return g.readyState===e})},sendBuffered:Q,get:function(){return g},setOnDisconnect:function(e){c.onDisconnect=e},setOnReconnect:function(e){c.onReconnect=e},removeOnReconnect:function(){delete c.onReconnect},removeOnDisconnect:function(){delete c.onDisconnect}});e.exports=x},100:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g,c,a,i,o,I,l,s,C=n(16),u=n(41).get,A=n(21).LocalStore,b=n(7).getPropertyValue,d=n(7).getStaticHash,B=n(7).isEmptyObject,p=(g={payout_currencies:{expire:120},proposal_open_contract:{expire:10,map_to:["contract_id"]},active_symbols:{expire:10,map_to:["product_type","landing_company",u]},contracts_for:{expire:10,map_to:["contracts_for","product_type","currency"]},exchange_rates:{expire:60,map_to:["base_currency"]},ticks_history:{expire:10,map_to:["ticks_history","granularity","start","end","style"]},trading_times:{expire:120,map_to:["trading_times"]}},c={},a={history:"ticks_history",candles:"ticks_history"},i=function(e){var t=!1;return Array.isArray(e)?e.length||(t=!0):"object"===("undefined"==typeof response_data?"undefined":r(response_data))&&(Object.keys(e).length||(t=!0)),t},o=function(e,t){var n;if(!B(c)||(c=A.getObject("ws_cache"),!B(c))){c.static_hash!==d()&&s();var r=I(e,t),g=b(c,r)||{};return C().isBefore(g.expires)?n=g.value:l(r),n}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t||Object.keys(e).find(function(e){return g[e]});return n&&!B(e)&&((g[n]||{}).map_to||[]).forEach(function(t){var r="function"==typeof t?t():e[t];n+=t?"_".concat(r||""):""}),n},{set:function(e){var t=a[e.msg_type]||e.msg_type,n=JSON.parse(localStorage.getItem("ws_cache")),r=document.cookie.replace(/(?:(?:^|.*;\s*)language\s*=\s*([^;]*).*$)|^.*$/,"$1"),l=r?"active_symbols___".concat(r):null;if((B(n)||"ticks_history"!==t||B(n[l])||!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return!!e.length&&!!e.filter(function(e){return e.symbol===t})[0]&&!e.filter(function(e){return e.symbol===t})[0].exchange_is_open}(n[l].value.active_symbols,e.echo_req.ticks_history))&&!e.subscription&&"latest"!==e.echo_req.end&&g[t]){var u=o(e.echo_req)||{},b=u[t],p=e[t],m=e.error,y=b&&i(b)&&!i(p),Q=b&&i(p)&&!i(b),G=!i(u)&&!u.error;if((m||y||Q)&&G)s();else{var Z=I(e.echo_req,t),h=C().add(g[t].expire,"m").valueOf();c.static_hash||(c.static_hash=d()),c[Z]={value:e,expires:h},A.setObject("ws_cache",c)}}},get:o,remove:l=function(e,t){t?Object.keys(c).forEach(function(t){-1!==t.indexOf(e)&&delete c[t]}):e in c&&delete c[e],A.setObject("ws_cache",c)},clear:s=function(){A.remove("ws_cache"),c={}}});e.exports=p},101:function(e,t,n){"use strict";n.d(t,"a",function(){return g}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return a});var r=n(29),g=function(e){var t={category:"",underlying:""},n=new RegExp("^([A-Z]+)_((OTC_[A-Z0-9]+)|R_[\\d]{2,3}|[A-Z]+)_").exec(e);return null!==n&&(t.category=n[1].toLowerCase(),t.underlying=n[2]),t},c=function(e){return e?Object(r.b)()[e.toUpperCase()]:null},a=function(e){return e?Object(r.a)()[e.toUpperCase()].name:null}},106:function(e,t,n){"use strict";n.d(t,"a",function(){return I});var r=n(26),g=n.n(r),c=n(100),a=n.n(c),i=n(21),o=n(46),I=function(){return o.a.logout().then(l)},l=function(e){1===e.logout&&(Object(i.removeCookies)("affiliate_token","affiliate_tracking"),g.a.clearAllAccounts(),g.a.set("loginid",""),a.a.clear())}},107:function(e,t,n){var r=n(7).createElement;e.exports={isVisible:function(e){return!(!e||0===e.offsetWidth&&0===e.offsetHeight)},getElementById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return t.getElementById(e)||r("div")}}},108:function(e,t){var n=function(e,t,n){var r=String(e||"");return r.length>=t?r:"".concat(Array(t-r.length+1).join(n)).concat(r)},r=function(e){return"number"==typeof e?String(e):e};e.exports={toTitleCase:function(e){return(e||"").replace(/\w[^\s\/\\]*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},padLeft:n,numberToString:r,compareBigUnsignedInt:function(e,t){var g=r(e),c=r(t);if(!g||!c)return"";var a=Math.max(g.length,c.length),i=0;return(g=n(g,a,"0"))!==(c=n(c,a,"0"))&&(i=g>c?1:-1),i}}},109:function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i});var r=n(3);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){return{payout:Object(r.localize)("Payout"),stake:Object(r.localize)("Stake"),multiplier:Object(r.localize)("Multiplier")}},a=function(){return{rise_fall:{title:Object(r.localize)("Rise/Fall"),trade_types:["CALL","PUT"],basis:["stake","payout"],components:["start_date"],barrier_count:0},rise_fall_equal:{title:Object(r.localize)("Rise/Fall"),trade_types:["CALLE","PUTE"],basis:["stake","payout"],components:["start_date"],barrier_count:0},high_low:{title:Object(r.localize)("Higher/Lower"),trade_types:["CALL","PUT"],basis:["stake","payout"],components:["barrier"],barrier_count:1},touch:{title:Object(r.localize)("Touch/No Touch"),trade_types:["ONETOUCH","NOTOUCH"],basis:["stake","payout"],components:["barrier"]},end:{title:Object(r.localize)("Ends Between/Ends Outside"),trade_types:["EXPIRYMISS","EXPIRYRANGE"],basis:["stake","payout"],components:["barrier"]},stay:{title:Object(r.localize)("Stays Between/Goes Outside"),trade_types:["RANGE","UPORDOWN"],basis:["stake","payout"],components:["barrier"]},asian:{title:Object(r.localize)("Asians"),trade_types:["ASIANU","ASIAND"],basis:["stake","payout"],components:[]},match_diff:{title:Object(r.localize)("Matches/Differs"),trade_types:["DIGITMATCH","DIGITDIFF"],basis:["stake","payout"],components:["last_digit"]},even_odd:{title:Object(r.localize)("Even/Odd"),trade_types:["DIGITODD","DIGITEVEN"],basis:["stake","payout"],components:[]},over_under:{title:Object(r.localize)("Over/Under"),trade_types:["DIGITOVER","DIGITUNDER"],basis:["stake","payout"],components:["last_digit"]},lb_call:{title:Object(r.localize)("Close-Low"),trade_types:["LBFLOATCALL"],basis:["multiplier"],components:[]},lb_put:{title:Object(r.localize)("High-Close"),trade_types:["LBFLOATPUT"],basis:["multiplier"],components:[]},lb_high_low:{title:Object(r.localize)("High-Low"),trade_types:["LBHIGHLOW"],basis:["multiplier"],components:[]}}},i=function(){var e;return g(e={},Object(r.localize)("Up/Down"),["rise_fall","rise_fall_equal","high_low"]),g(e,Object(r.localize)("Touch/No Touch"),["touch"]),g(e,Object(r.localize)("In/Out"),["end","stay"]),g(e,Object(r.localize)("Asians"),["asian"]),g(e,Object(r.localize)("Digits"),["match_diff","even_odd","over_under"]),e}},11:function(e,t,n){"use strict";n.d(t,"a",function(){return y}),n.d(t,"b",function(){return Q});var r=n(13),g=n(1),c=n.n(g),a=n(0),i=n.n(a);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function l(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};I(n,!0).forEach(function(t){s(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):I(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function b(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m={children:!0,key:!0,ref:!0},y=function(e){function t(){return C(this,t),b(this,d(t).apply(this,arguments))}return B(t,r["Provider"]),A(t,[{key:"getChildContext",value:function(){var e={},t=this.context.mobxStores;if(t)for(var n in t)e[n]=t[n];for(var r in this.props.store)m[r]||(e[r]=this.props.store[r]);return l({mobxStores:e},e)}}]),t}();y.childContextTypes={mobxStores:c.a.object,client:c.a.object,common:c.a.object,gtm:c.a.object,modules:c.a.object,ui:c.a.object};var Q=function(e,t){return function(n){if(!t)return function(e){return function(t){return Object(r.inject)(e)(Object(r.observer)(t))}}(e)(n);var g=Object(r.observer)(n),a=function(t){function r(){var t,n;C(this,r);for(var g=arguments.length,a=new Array(g),i=0;i<g;i++)a[i]=arguments[i];return(n=b(this,(t=d(r)).call.apply(t,[this].concat(a)))).store=new e,n.propTypes={children:c.a.object},n}return B(r,n),A(r,[{key:"render",value:function(){return i.a.createElement(g,l({},this.props,{store:this.store}),this.props.children)}}]),r}(),o=n.displayName||n.name||n.constructor&&n.constructor.name||"Unknown";return a.displayName="store-".concat(o),Object(r.inject)(t)(a)}}},110:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"d",function(){return I}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return s});var r=n(3),g=n(7),c=n(4),a=n(63),i=function(e){var t=Object(g.unique)(e.tick_stream,"epoch"),n=Object(a.b)(e.contract_type)?t.length:t.length-1;return!n||n<0?0:n},o=function(e){return e%1!=0},I=function(e){var t={d:{name_plural:Object(r.localize)("days"),name_singular:Object(r.localize)("day")},h:{name_plural:Object(r.localize)("hours"),name_singular:Object(r.localize)("hour")},m:{name_plural:Object(r.localize)("minutes"),name_singular:Object(r.localize)("minute")},s:{name:Object(r.localize)("seconds")}},n=e.asMilliseconds()/1e3;if(n){if(n>=864e5)return n/864e5<=2?t.d.name_singular:t.d.name_plural;if(n>=36e5&&n<864e5)return o(n/36e5)?"":36e5===n?t.h.name_singular:t.h.name_plural;if(n>=6e4&&n<36e5)return o(n/6e4)?"":6e4===n?t.m.name_singular:t.m.name_plural;if(n>=1e3&&n<6e4)return t.s.name}return t.s.name},l=function(e){return Object(c.k)(Object(c.g)(e.purchase_time||e.date_start),Object(c.g)(e.date_expiry))},s=function(e){return e.tick_count?e.tick_count:function(e){var t=e.asMilliseconds()/1e3;if(t>=864e5){var n=t/864e5;return Math.floor(n)}if(t>=36e5&&t<864e5){var r=o(t/36e5),g=o(t/6e4)?"HH[h] mm[m] ss[s]":"HH[h] mm[m]";return r?Object(c.j)(t,g):Math.floor(t/36e5)}return t>=6e4&&t<36e5?o(t/6e4)?Object(c.j)(t,"mm[m] ss[s]"):Math.floor(t/6e4):Math.floor(t/1e3)}(l(e))}},112:function(e,t,n){},118:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return g});var r=767,g=1024},12:function(e,t,n){var r,g=n(41).get,c=n(3).localize,a=n(7).getPropertyValue,i={},o=function(e){return'<span class="symbols '.concat((e||"").toLowerCase(),'"></span>')},I=function(e,t,n){var r=String(e||0).replace(/,/g,"");return void 0!==t&&(r=(+r).toFixed(t)),n&&(r=parseFloat(+r)),r.toString().replace(/(^|[^\w.])(\d{4,})/g,function(e,t,n){return t+n.replace(/\d(?=(?:\d\d\d)+(?!\d))/g,"$&,")})},l=function(e){return i[e]?a(i,[e,"fractional_digits"]):function(e){return s(e)?8:2}(e)},s=function(e){return/crypto/i.test(a(i,[e,"type"]))||e in C.get()},C={get:function(){return r||(r={BTC:{name:c("Bitcoin"),min_withdrawal:.002,pa_max_withdrawal:5,pa_min_withdrawal:.002},BCH:{name:c("Bitcoin Cash"),min_withdrawal:.002,pa_max_withdrawal:5,pa_min_withdrawal:.002},ETH:{name:c("Ether"),min_withdrawal:.002,pa_max_withdrawal:5,pa_min_withdrawal:.002},ETC:{name:c("Ether Classic"),min_withdrawal:.002,pa_max_withdrawal:5,pa_min_withdrawal:.002},LTC:{name:c("Litecoin"),min_withdrawal:.002,pa_max_withdrawal:5,pa_min_withdrawal:.002},UST:{name:c("Tether"),min_withdrawal:.02,pa_max_withdrawal:2e3,pa_min_withdrawal:10},USB:{name:c("Binary Coin"),min_withdrawal:.02,pa_max_withdrawal:2e3,pa_min_withdrawal:10}}),r}},u=function(e){return s(e)?a(C.get(),[e,"min_withdrawal"])||.002:1};e.exports={formatMoney:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=t;a&&(a=String(a).replace(/,/g,""));var i=a&&Number(a)<0?"-":"",s=r||l(e);if(a=isNaN(a)?0:Math.abs(a),"undefined"!=typeof Intl){var C={minimumFractionDigits:c||s,maximumFractionDigits:s};a=new Intl.NumberFormat(g().toLowerCase().replace("_","-"),C).format(a)}else a=I(a,s);return i+(n?"":o(e))+a},formatCurrency:o,addComma:I,getDecimalPlaces:l,setCurrencies:function(e){i=e.currencies_config},isCryptocurrency:s,getCurrencyName:function(e){return a(C.get(),[e,"name"])||""},getMinWithdrawal:u,getTransferLimits:function(e,t){var n=a(i,[e,"transfer_between_accounts","limits"])||u(e),r=l(e);return"max"===t?n.max?n.max.toFixed(r):void 0:n.min?n.min.toFixed(r):void 0},getTransferFee:function(e,t){var n=a(i,[e,"transfer_between_accounts","fees",t]);return"".concat(void 0===n?"1":n,"%")},getMinimumTransferFee:function(e){var t=l(e);return"".concat(e," ").concat((1/Math.pow(10,t)).toFixed(t))},getTextFormat:function(e,t){return"".concat(t," ").concat(I(e,l(t),s(t)))},getMinPayout:function(e){return a(i,[e,"stake_default"])},getPaWithdrawalLimit:function(e,t){return s(e)?a(C.get(),[e,"pa_".concat(t,"_withdrawal")]):"max"===t?2e3:10},getCurrencies:function(){return i}}},120:function(e,t,n){"use strict";n.r(t),n.d(t,"website_domain",function(){return r}),n.d(t,"website_name",function(){return g}),n.d(t,"default_title",function(){return c});var r="Deriv.app",g="Deriv",c=g},135:function(e,t,n){"use strict";var r=n(5),g=n.n(r),c=n(1),a=n.n(c),i=n(0),o=n.n(i),I=n(36),l=function(e){var t=e.children,n=e.className,r=e.to,c=e.onClick;return o.a.createElement(I.b,{className:g()("btn btn--link",n,"effect"),to:r,onClick:c},t)};l.propTypes={children:a.a.object,className:a.a.string,onClick:a.a.func,to:a.a.string},t.a=l},137:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(5),g=n.n(r),c=n(0),a=n.n(c),i=n(31),o=n(8),I=n(45);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,u(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e,t,n,r=this.props,c=r.action_bar,l=r.action_bar_classname,s=r.id,C=r.is_routed,u=r.items,A=r.selected,b=u.find(function(e){return e.label===A.label}),d=b.value;return a.a.createElement("div",{className:"vertical-tab__content"},c&&a.a.createElement("div",{className:g()("vertical-tab__action-bar",(e={},t=l,n=!!l,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e))},c.map(function(e){var t=e.component,n=e.icon,r=e.onClick,g=e.title,c=t;return t?a.a.createElement(c,{key:g}):a.a.createElement("div",{id:"dt_".concat(s,"_close_icon"),className:"vertical-tab__action-bar-wrapper",key:g,onClick:r},a.a.createElement(o.a,{className:"vertical-tab__action-bar--icon",icon:n}))})),C?a.a.createElement(i.d,null,a.a.createElement(i.a,{exact:!0,from:I.a.reports,to:I.a.positions}),u.map(function(e){var t=e.value,n=e.path,r=e.icon,g=t;return a.a.createElement(i.b,{key:n,path:n,render:function(){return a.a.createElement(g,{component_icon:r})}})})):a.a.createElement(d,{key:b.label,className:"item-id"}))}}])&&s(n.prototype,r),c&&s(n,c),t}()},138:function(e,t,n){"use strict";n.d(t,"a",function(){return A});var r=n(5),g=n.n(r),c=n(0),a=n.n(c),i=n(36),o=n(8);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,C(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"vertical-tab__tab"},this.props.header_title&&a.a.createElement("div",{className:"vertical-tab__header-title"},a.a.createElement("p",null,this.props.header_title)),this.props.items.map(function(t){var n=t.label.charAt(0).toUpperCase()+t.label.slice(1).toLowerCase();return e.props.is_routed?a.a.createElement(i.c,{id:"dt_".concat(n,"_link"),key:t.path,to:t.path,onClick:function(){return e.props.onChange(t)},className:"vertical-tab__header",activeClassName:g()({"vertical-tab__header--active":e.props.selected.label===t.label})},a.a.createElement(o.a,{icon:t.icon,className:g()("vertical-tab__header__icon",{"vertical-tab__header__icon--active":e.props.selected.label===t.label})}),a.a.createElement("span",{className:"vertical-tab__header__link"},n)):a.a.createElement("div",{id:"dt_".concat(n,"_link"),className:g()("vertical-tab__header",{"vertical-tab__header--active":e.props.selected.label===t.label}),key:t.label,onClick:function(){return e.props.onChange(t)}},a.a.createElement(o.a,{icon:t.icon,className:g()("vertical-tab__header__icon",{"vertical-tab__header__icon--active":e.props.selected.label===t.label})}),a.a.createElement("a",{key:t.label,className:"vertical-tab__header__link"},n))}))}}])&&l(n.prototype,r),c&&l(n,c),t}()},139:function(e,t,n){"use strict";var r=n(5),g=n.n(r),c=n(1),a=n.n(c),i=n(0),o=n.n(i),I=n(8),l=function(e){var t=e.title,n=e.visible,r=e.children,c=e.wrapperClassName;return e.visible?(document.body.classList.add("no-scroll"),document.getElementById("deriv_app").classList.add("no-scroll")):(document.body.classList.remove("no-scroll"),document.getElementById("deriv_app").classList.remove("no-scroll")),o.a.createElement("div",{className:g()("fullscreen-dialog",{"fullscreen-dialog--open":n}),onClick:function(e){if("INPUT"===e.target.tagName&&"number"===e.target.type){var t=function(e,t){var n=t.getBoundingClientRect();if(n.top+t.clientHeight+20>window.innerHeight){var r=(window.innerHeight-t.clientHeight)/2;e.scrollTop+=n.top-r}}(e.currentTarget,e.target);window.addEventListener("resize",t,!1),window.setTimeout(function(){window.removeEventListener("resize",t,!1)},2e3)}}},o.a.createElement("div",{className:"fullscreen-dialog__header"},o.a.createElement("h2",{className:"fullscreen-dialog__title"},t),o.a.createElement("div",{className:"icons btn-close fullscreen-dialog__close-btn",onClick:e.onClose},o.a.createElement(I.a,{icon:"IconClose",className:"fullscreen-dialog__close-btn-icon"}))),o.a.createElement("div",{className:"fullscreen-dialog__header-shadow-cover"}),o.a.createElement("div",{className:"fullscreen-dialog__header-shadow"}),o.a.createElement("div",{className:"fullscreen-dialog__content"},o.a.createElement("div",{className:"fullscreen-dialog__".concat(c||"contracts-modal-list")},r)))};l.propTypes={children:a.a.any,onClose:a.a.func,title:a.a.string,visible:a.a.bool,wrapperClassName:a.a.string},t.a=l},140:function(e,t,n){"use strict";var r,g,c,a,i,o,I,l,s,C,u=n(2),A=n(62),b=n.n(A),d=n(33),B=n.n(d),p=n(10),m=n.n(p),y=n(21),Q=n(7),G=n(3),Z=n(106),h=n(46),F=(a=function(){g.setIsSocketOpened(!1)},i=function(e){if(e){if(!b.a.isLoginPages()){if(!r.is_valid_login)return void Object(Z.a)();h.a.subscribeWebsiteStatus(V.websiteStatus)}B.a.init(Object(u.action)("setTime",function(){g.server_time=B.a.get()})),g.setIsSocketOpened(!0)}},o=function(e){switch(s(e),e.msg_type){case"authorize":if(e.error){var t="1"===sessionStorage.getItem("active_tab");"SelfExclusion"===Object(Q.getPropertyValue)(e,["error","code"])&&t&&sessionStorage.removeItem("active_tab"),Object(Z.a)()}else b.a.isLoginPages()||/authorize/.test(y.State.get("skip_response"))||(e.authorize.loginid===r.loginid||r.is_populating_account_list?e.authorize.loginid===r.loginid&&C(e):Object(Z.a)());break;case"landing_company":case"get_self_exclusion":break;case"get_settings":e.get_settings&&(I(e.get_settings.country_code),r.setEmail(e.get_settings.email),r.setAccountSettings(e.get_settings),c.eventHandler(e.get_settings));break;case"get_account_status":r.setAccountStatus(e.get_account_status);break;case"payout_currencies":r.responsePayoutCurrencies(e.payout_currencies);break;case"transaction":c.pushTransactionData(e)}},I=function(e){e&&(r.setResidence(e),h.a.landingCompany(e))},l=Object(u.flow)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.wait("website_status");case 2:r.setBalance(t);case 3:case"end":return e.stop()}},e)})),s=function(e){var t=e.msg_type;switch(Object(Q.getPropertyValue)(e,["error","code"])){case"WrongResponse":case"InternalServerError":case"OutputValidationFailed":"mt5_login_list"!==t&&g.setError(!0,{message:e.error.message});break;case"RateLimit":"cashier_password"!==t&&g.setError(!0,{message:Object(G.localize)("You have reached the rate limit of requests per second. Please try later.")});break;case"InvalidAppID":case"DisabledClient":g.setError(!0,{message:e.error.message})}},{init:function(e){return r=e.client,g=e.common,c=e.gtm,{onDisconnect:a,onOpen:i,onMessage:o}},setBalance:l,authorizeAccount:C=function(e){r.responseAuthorize(e),h.a.subscribeBalance(V.balance,!0),h.a.getSettings({forced:!0}),h.a.getAccountStatus(),h.a.payoutCurrencies(),h.a.mt5LoginList(),I(e.authorize.country||r.accounts[r.loginid].residence),r.is_virtual||h.a.getSelfExclusion(),m.a.sendBuffered(),/bch/i.test(e.authorize.currency)&&r.accounts[r.loginid].accepted_bch}});t.a=F;var X,V=(X=!1,{websiteStatus:function(e){if(e.website_status){if((X=/^up$/i.test(e.website_status.site_status))&&!m.a.availability())return void window.location.reload();e.website_status.message,m.a.availability(X),r.setWebsiteStatus(e)}},balance:function(e){e.error||F.setBalance(e.balance.balance)}})},141:function(e,t,n){"use strict";var r=n(1),g=n.n(r),c=n(0),a=n.n(c),i=n(36),o=n(93),I=n(31),l=n(11),s=n(45),C=function(e){var t=e.history,n=e.setCashierActiveTab,r=e.setDeviceData,g=e.setVerificationCode,c=e.toggleAccountSignupModal,a=e.toggleCashierModal,i=new URLSearchParams(window.location.search);switch(g(i.get("code")),i.get("action")){case"signup":r({affiliate_token:i.get("affiliate_token")||"",date_first_contact:i.get("date_first_contact")||"",gclid_url:i.get("gclid_url")||"",signup_device:i.get("signup_device")||"",utm_campaign:i.get("utm_campaign")||"",utm_medium:i.get("utm_medium")||"",utm_source:i.get("utm_source")||""}),c(!0);break;case"payment_withdraw":n("withdraw"),a()}return window.history.replaceState({},document.title,"/"),t.push(s.a.root),null};C.propTypes={history:g.a.object,setDeviceData:g.a.func,setVerificationCode:g.a.func,toggleAccountSignupModal:g.a.func,toggleCashierModal:g.a.func};var u=Object(I.g)(Object(l.b)(function(e){var t=e.client,n=e.ui;return{setCashierActiveTab:n.setCashierActiveTab,setDeviceData:t.setDeviceData,setVerificationCode:t.setVerificationCode,toggleAccountSignupModal:n.toggleAccountSignupModal,toggleCashierModal:n.toggleCashierModal}})(C)),A=n(3),b=n(29),d=n(181),B=n(5),p=n.n(B),m=n(13),y=n(37),Q=n(99),G=n(8),Z=function(e){var t=e.error;return a.a.createElement("div",{className:"portfolio-empty"},a.a.createElement("div",{className:"portfolio-empty__wrapper"},t?a.a.createElement("span",{className:"portfolio-empty__text"},t):a.a.createElement(a.a.Fragment,null,a.a.createElement(G.a,{icon:"IconPositions",className:"portfolio-empty__icon"}),a.a.createElement("span",{className:"portfolio-empty__text"},Object(A.localize)("No open positions")))))},h=n(28),F=n.n(h),X=(n(65),function(e){var t=e.contract_id,n=e.children,r=e.className,g=e.openContract;return a.a.createElement("a",{className:r,onClick:function(){return g(t,!0)}},n)});X.propTypes={children:g.a.node,className:g.a.string,contract_id:g.a.number,onMount:g.a.func};var V=Object(l.b)(function(e){return{openContract:e.modules.contract_trade.onMount}})(X),f=n(185),v=n.n(f),W=n(12),U=n(75),N=n(188),_=n(142),H=n(234),x=n(235);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e,t){if(null==e)return{};var n,r,g=function(e,t){if(null==e)return{};var n,r,g={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(g[n]=e[n]);return g}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(g[n]=e[n])}return g}var O=function(e){e.styles;var t=Y(e,["styles"]);return a.a.createElement("svg",R({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},t),a.a.createElement("g",{fill:"none",fillRule:"evenodd"},a.a.createElement("circle",{cx:"8",cy:"8",r:"8",fill:"#4BBFAB"}),a.a.createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M6.5 10.8l5.65-5.65a.5.5 0 0 1 .7.7l-6 6a.5.5 0 0 1-.7 0l-3-3a.5.5 0 1 1 .7-.7l2.65 2.64z"})))};function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function S(e,t){if(null==e)return{};var n,r,g=function(e,t){if(null==e)return{};var n,r,g={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(g[n]=e[n]);return g}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(g[n]=e[n])}return g}var J=function(e){e.styles;var t=S(e,["styles"]);return a.a.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},t),a.a.createElement("g",{fill:"none",fillRule:"evenodd"},a.a.createElement("circle",{cx:"8",cy:"8",r:"8",fill:"#E31C4B",fillRule:"nonzero"}),a.a.createElement("path",{stroke:"#FFF",strokeLinecap:"round",d:"M10.5 5.5l-5 5m5 0l-5-5"})))};function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,g=new Array(r),c=0;c<r;c++)g[c]=arguments[c];return(n=w(this,(e=k(t)).call.apply(e,[this].concat(g)))).handleClick=function(e){n.props.is_unsupported&&(e.preventDefault(),n.props.onClick())},n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.contract_id,n=e.is_visible,r=e.onClickRemove,g="won"===e.result;return a.a.createElement(a.a.Fragment,null,a.a.createElement(y.CSSTransition,{in:n,timeout:250,classNames:{enter:"positions-drawer-card__result--enter",enterDone:"positions-drawer-card__result--enter-done",exit:"positions-drawer-card__result--exit"},unmountOnExit:!0},a.a.createElement("div",{id:"dt_drawer_".concat(t,"_result"),className:p()("positions-drawer-card__result",{"positions-drawer-card__result--won":g,"positions-drawer-card__result--lost":!g})},a.a.createElement("span",{id:"dt_drawer_".concat(t,"_result_close_icon"),className:"result__close-btn",onClick:function(){return r(t)}}),a.a.createElement(i.c,{className:"result__caption-wrapper",to:Object(o.b)(t),onClick:this.handleClick},a.a.createElement("span",{className:p()("result__caption",{"result__caption--won":g,"result__caption--lost":!g})},g?a.a.createElement(a.a.Fragment,null,Object(A.localize)("won"),a.a.createElement(O,{className:"result__icon"})):a.a.createElement(a.a.Fragment,null,Object(A.localize)("lost"),a.a.createElement(J,{className:"result__icon"})))))))}}])&&D(n.prototype,r),g&&D(n,g),t}();j.propTypes={contract_id:g.a.oneOfType([g.a.number,g.a.string]),has_same_contract_mounted:g.a.bool,is_unsupported:g.a.bool,is_visible:g.a.bool,onClick:g.a.func,onClickRemove:g.a.func,result:g.a.string};var L=j,P=function(e){var t=e.active_position,n=e.className,r=e.contract_info,g=e.currency,c=e.current_tick,i=e.indicative,o=e.id,I=e.is_dark_theme,l=e.is_loading,s=e.is_sell_requested,C=e.is_unsupported,u=e.is_valid_to_sell,b=e.profit_loss,d=e.onClickSell,B=e.onClickRemove,m=e.result,Q=e.sell_price,Z=e.status,h=e.toggleUnsupportedContractModal,X=e.type,f=a.a.createElement("div",{className:"positions-drawer-card__content-loader"},a.a.createElement(_.a,{is_dark_theme:I,speed:2})),R=b<0?"lost":"won",Y=a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:p()("positions-drawer-card__grid","positions-drawer-card__grid-underlying-trade")},a.a.createElement("div",{className:"positions-drawer-card__underlying-name"},a.a.createElement(N.a,{market:r.underlying}),a.a.createElement("span",{className:"positions-drawer-card__symbol"},r.display_name)),a.a.createElement("div",{className:"positions-drawer-card__type"},a.a.createElement(H.a,{type:X,is_high_low:v.a.isHighLow({shortcode:r.shortcode})}))),m||r.is_sold?a.a.createElement("div",{className:"progress-slider--completed"}):a.a.createElement(x.a,{is_loading:l,start_time:r.date_start,expiry_time:r.date_expiry,current_tick:c,ticks_count:r.tick_count}),a.a.createElement("div",{className:p()("positions-drawer-card__grid","positions-drawer-card__grid-profit-payout")},a.a.createElement("div",{className:p()("positions-drawer-card__profit-loss","positions-drawer-card__profit-loss-label")},m?Object(A.localize)("Profit/Loss:"):Object(A.localize)("Potential profit/loss:")),a.a.createElement("div",{className:p()("positions-drawer-card__indicative","positions-drawer-card__indicative-label")},m?Object(A.localize)("Payout:"):Object(A.localize)("Indicative price:")),a.a.createElement("div",{className:p()("positions-drawer-card__profit-loss",{"positions-drawer-card__profit-loss--is-crypto":Object(W.isCryptocurrency)(g),"positions-drawer-card__profit-loss--negative":b<0,"positions-drawer-card__profit-loss--positive":b>0})},a.a.createElement(U.a,{amount:Math.abs(b),currency:g}),a.a.createElement("div",{className:p()("positions-drawer-card__indicative--movement",{"positions-drawer-card__indicative--movement-complete":!!m})},a.a.createElement(G.a,{icon:"IconPriceMove",type:"complete"!==Z?Z:null}))),a.a.createElement("div",{className:"positions-drawer-card__indicative"},a.a.createElement(U.a,{amount:Q||i,currency:g}),a.a.createElement("div",{className:p()("positions-drawer-card__indicative--movement",{"positions-drawer-card__indicative--movement-complete":!!m})},a.a.createElement(G.a,{icon:"IconPriceMove",type:"complete"!==Z?Z:null})))),a.a.createElement("div",{className:p()("positions-drawer-card__grid","positions-drawer-card__grid-price-payout")},a.a.createElement("div",{className:"positions-drawer-card__purchase-price"},a.a.createElement("span",{className:"positions-drawer-card__purchase-label"},Object(A.localize)("Purchase price:")),a.a.createElement("span",{className:"positions-drawer-card__purchase-value"},a.a.createElement(U.a,{amount:r.buy_price,currency:g}))),a.a.createElement("div",{className:"positions-drawer-card__payout-price"},a.a.createElement("span",{className:"positions-drawer-card__payout-label"},Object(A.localize)("Potential payout:")),a.a.createElement("span",{className:"positions-drawer-card__payout-value"},r.payout?a.a.createElement(U.a,{amount:r.payout,currency:g}):a.a.createElement("strong",null,"-")))));return a.a.createElement("div",{id:"dt_drawer_card_".concat(o),className:p()("positions-drawer-card__wrapper",{"positions-drawer-card__wrapper--active":parseInt(t)===o},n)},a.a.createElement(L,{contract_id:o,is_unsupported:C,is_visible:!!r.is_sold,has_same_contract_mounted:o===parseInt(t),onClickRemove:B,onClick:function(){return h(!0)},result:m||R}),C?a.a.createElement("div",{className:p()("positions-drawer-card",{"positions-drawer-card--active":parseInt(t)===o,"positions-drawer-card--green":b>0&&!m,"positions-drawer-card--red":b<0&&!m}),onClick:function(){return h(!0)}},r.underlying?Y:f):a.a.createElement(V,{className:p()("positions-drawer-card",{"positions-drawer-card--active":parseInt(t)===o,"positions-drawer-card--green":b>0&&!m,"positions-drawer-card--red":b<0&&!m}),contract_id:o},r.underlying?Y:f),a.a.createElement(y.CSSTransition,{in:!!u,timeout:250,classNames:{enter:"positions-drawer-card__sell-button--enter",enterDone:"positions-drawer-card__sell-button--enter-done",exit:"positions-drawer-card__sell-button--exit"},unmountOnExit:!0},a.a.createElement("div",{className:"positions-drawer-card__sell-button"},a.a.createElement(F.a,{id:"dt_drawer_card_".concat(o,"_button"),className:p()("btn--primary","btn--primary--green","btn--sell",{"btn--loading":s}),is_disabled:!u||s,text:Object(A.localize)("Sell contract"),onClick:function(){return d(o)}}))))};P.propTypes={active_position:g.a.oneOfType([g.a.number,g.a.string]),className:g.a.string,contract_info:g.a.object,currency:g.a.string,current_tick:g.a.number,duration:g.a.oneOfType([g.a.number,g.a.string]),duration_unit:g.a.string,exit_spot:g.a.oneOfType([g.a.number,g.a.string]),id:g.a.number,indicative:g.a.number,is_dark_theme:g.a.bool,is_loading:g.a.bool,is_sell_requested:g.a.bool,is_unsupported:g.a.bool,is_valid_to_sell:g.a.oneOfType([g.a.number,g.a.bool]),onClickRemove:g.a.func,onClickSell:g.a.func,profit_loss:g.a.number,result:g.a.string,sell_time:g.a.number,status:g.a.string,toggleUnsupportedContractModal:g.a.func,type:g.a.string};var K=P;function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var re=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ee(this,te(t).apply(this,arguments))}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"render",value:function(){var e=this.props,t=e.all_positions,n=e.active_contract_id,r=e.error,g=e.currency,c=e.is_contract_mode,o=e.is_dark_theme,I=e.is_empty,l=e.is_positions_drawer_on,C=e.onClickSell,u=e.onClickRemove,b=e.openContract,d=e.toggleDrawer,B=e.toggleUnsupportedContractModal,m=a.a.createElement(a.a.Fragment,null,a.a.createElement(y.TransitionGroup,{component:"div"},t.slice(0,5).map(function(e){return a.a.createElement(y.CSSTransition,{appear:!0,key:e.id,in:!0,timeout:150,classNames:{appear:"positions-drawer-card__wrapper--enter",enter:"positions-drawer-card__wrapper--enter",enterDone:"positions-drawer-card__wrapper--enter-done",exit:"positions-drawer-card__wrapper--exit"},unmountOnExit:!0},a.a.createElement(K,q({active_position:n,is_dark_theme:o,onClickSell:C,onClickRemove:u,openContract:b,key:e.id,currency:g,toggleUnsupportedContractModal:B},e)))})));return a.a.createElement("div",{id:"dt_positions_drawer",className:p()("positions-drawer",{"positions-drawer--open":l,"positions-drawer--contract-mode":c})},a.a.createElement("div",{className:"positions-drawer__header"},a.a.createElement("span",{className:"positions-drawer__title"},Object(A.localize)("Recent Positions")),a.a.createElement("div",{id:"dt_positions_drawer_close_icon",className:"positions-drawer__icon-close",onClick:d},a.a.createElement(G.a,{icon:"IconMinimize"}))),a.a.createElement("div",{className:"positions-drawer__body"},a.a.createElement(Q.Scrollbars,{style:{width:"100%",height:"100%"},autoHide:!0},I||r?a.a.createElement(Z,{error:r}):m)),a.a.createElement("div",{className:"positions-drawer__footer"},a.a.createElement(i.c,{id:"dt_positions_drawer_report_button",className:"btn btn--link btn--alternate",to:s.a.reports},a.a.createElement("span",{className:"btn__text"},Object(A.localize)("Go to Reports")))))}}])&&$(n.prototype,r),g&&$(n,g),t}();re.propTypes={active_contract_id:g.a.number,all_positions:m.PropTypes.arrayOrObservableArray,children:g.a.any,currency:g.a.string,error:g.a.string,is_contract_mode:g.a.bool,is_dark_theme:g.a.bool,is_empty:g.a.bool,is_loading:g.a.bool,is_positions_drawer_on:g.a.bool,onClickRemove:g.a.func,onClickSell:g.a.func,onMount:g.a.func,onUnmount:g.a.func,openContract:g.a.func,toggleDrawer:g.a.func};var ge=Object(l.b)(function(e){var t=e.modules,n=e.client,r=e.ui;return{currency:n.currency,active_contract_id:t.contract_trade.contract_id,all_positions:t.portfolio.all_positions,error:t.portfolio.error,is_contract_mode:t.smart_chart.is_contract_mode,is_empty:t.portfolio.is_empty,is_loading:t.portfolio.is_loading,onClickSell:t.portfolio.onClickSell,onClickRemove:t.portfolio.removePositionById,openContract:t.contract_trade.onMount,onMount:t.portfolio.onMount,onUnmount:t.portfolio.onUnmount,is_dark_theme:r.is_dark_mode_on,is_positions_drawer_on:r.is_positions_drawer_on,toggleDrawer:r.togglePositionsDrawer,toggleUnsupportedContractModal:r.toggleUnsupportedContractModal}})(re),ce=n(19),ae=function(e){var t=getComputedStyle(e.firstElementChild).getPropertyValue("background-color"),n=t.startsWith("rgba")?t:"rgba(".concat(t.replace("rgb(","").replace(")","").split(", ").join(","),",1)");e.querySelectorAll("div").forEach(function(e){e.style.backgroundColor="transparent"}),e.style.backgroundColor=n;requestAnimationFrame(function e(t){var n=t.node,r=t.opacity,g=t.direction,c=t.color,a=-1===g&&r>.1?-1:1,i=.05;r<.3&&r>.1&&(i=.01);var o=parseFloat(Number(r+a*i).toFixed(2));n.style.backgroundColor=c.replace("".concat(r,")"),"".concat(Number(o).toFixed(2),")"));var I=requestAnimationFrame(e.bind(void 0,{node:n,opacity:o,direction:a,color:n.style.backgroundColor}));o>=1&&(cancelAnimationFrame(I),n.querySelectorAll("div").forEach(function(e){e.style.backgroundColor=""}),n.style.backgroundColor="")}.bind(void 0,{node:e,opacity:1,direction:-1,color:n}))},ie=function(){if(!document.querySelector(".cq-menu-dropdown").classList.contains("open")){document.querySelector(".cq-symbol-select-btn").click(),document.querySelector(".cq-filter-panel").querySelector(".ic-volidx").parentNode.click();var e=document.querySelector(".category-volidx").querySelector(".category-content");setTimeout(ae.bind(void 0,e),600)}},oe=function(){return a.a.createElement("div",{className:"market-is-closed-overlay"},a.a.createElement("p",null,a.a.createElement(ce.a,{i18n_default_text:"Market is closed."})),a.a.createElement("p",null,a.a.createElement(ce.a,{i18n_default_text:"Try Volatility Indices which simulate real-world market volatility and are open 24/7."})),a.a.createElement(F.a,{className:"market-is-closed-overlay__button",classNameSpan:"market-is-closed-overlay__button--span",onClick:ie,text:Object(A.localize)("Try Volatility Indices")}))},Ie=n(38),le=n(2);function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,g=!1,c=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){g=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(g)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Be=function(e){function t(){var e,n,r,g;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return r=this,g=(e=Ae(t)).call.apply(e,[this].concat(a)),(n=!g||"object"!==se(g)&&"function"!=typeof g?be(r):g).state={is_visible:!1},n.setVisibility=n.stateVisibility.bind(be(n)),n.styles={container:{fontSize:"10px",lineHeight:"15px",position:"absolute",zIndex:1,background:"rgba(0, 0, 0, 0.8)",color:"#ccc",padding:"10px",marginTop:"-10px",display:"none",overflowY:"auto",height:"100%"},prop_name:{color:"yellowgreen"}},n.componentDidMount=function(){document.addEventListener("keyup",n.setVisibility,!1)},n.componentWillUnmount=function(){document.removeEventListener("keyup",n.setVisibility)},n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,a.a.Component),n=t,(r=[{key:"stateVisibility",value:function(e){e.ctrlKey&&83===e.keyCode&&this.setState({is_visible:!this.state.is_visible})}},{key:"render",value:function(){var e=this;return a.a.createElement("code",{id:"state_info",style:Object.assign({},this.styles.container,{display:this.state.is_visible?"block":"none"})},this.props.entries.sort().map(function(t){var n=Ce(t,2),r=n[0],g=n[1];return"root_store"!==r&&"function"!=typeof g&&a.a.createElement("div",{key:r},a.a.createElement("span",{style:e.styles.prop_name},r,":")," ",g&&"object"===se(g)?JSON.stringify(Object(le.toJS)(g),null,1):g)}))}}])&&ue(n.prototype,r),g&&ue(n,g),t}();Be.propTypes={entries:g.a.array};var pe=Object(l.b)(function(e){var t=e.modules;return{entries:Object.entries(t.trade)}})(Be),me=n(52),ye=n(240),Qe=n(243),Ge=n(239),Ze=function(e){var t=e.is_contract_visible,n=e.is_dark_theme,r=e.is_market_closed,g=e.is_trade_enabled;return a.a.createElement("div",{className:p()("sidebar__items",{"sidebar__items--is-disabled":t,"sidebar__items--market-closed":r})},g||t?a.a.createElement(a.a.Fragment,null,a.a.createElement(me.a,{className:"trade-container__fieldset trade-types"},a.a.createElement(ye.a,null)),a.a.createElement(Ge.a,null),a.a.createElement("div",{className:"purchase-container"},a.a.createElement(Qe.a,null))):a.a.createElement(_.b,{is_dark_theme:n,speed:2}))};Ze.propTypes={is_contract_visible:g.a.bool,is_dark_theme:g.a.bool,is_market_closed:g.a.bool,is_trade_enabled:g.a.bool};var he=Ze,Fe=function(e){var t=e.is_contract_visible,r=e.is_dark_theme,g=e.is_market_closed,c=e.is_mobile,i=e.is_trade_enabled;return c?a.a.createElement(Ie.a,{ctor:function(){return n.e("screen-small").then(n.bind(null,655))},should_load:c,is_trade_enabled:i}):a.a.createElement(he,{is_contract_visible:t,is_dark_theme:r,is_trade_enabled:i,is_market_closed:g})};Fe.propTypes={is_contract_visible:g.a.bool,is_dark_theme:g.a.bool,is_market_closed:g.a.bool,is_mobile:g.a.bool,is_trade_enabled:g.a.bool};var Xe=Fe,Ve=n(147);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _e=a.a.lazy(function(){return Promise.all([n.e("vendors~smart_chart"),n.e("smart_chart")]).then(n.bind(null,648))}),He=function(){return n.e("notification-messages").then(n.bind(null,641))},xe=a.a.lazy(function(){return Promise.all([n.e("vendors~digits~info-b~897959f6"),n.e("digits")]).then(n.bind(null,647))}),Re=a.a.lazy(function(){return Promise.all([n.e("vendors~digits~info-b~897959f6"),n.e("info-box")]).then(n.bind(null,649))}),Ye=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),We(this,Ue(t).apply(this,arguments))}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.props.showPositions(),this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.hidePositions(),this.props.is_contract_mode&&this.props.onCloseContract(),this.props.onUnmount()}},{key:"render",value:function(){var e=this,t=this.props.is_mobile?"mobile-wrapper":"sidebar__container desktop-only",n=this.props.is_digit_contract&&this.props.is_contract_mode,r=Object(Ve.a)(this.props.contract_type)&&!this.props.is_contract_mode,g=this.props.is_chart_loading||!this.props.is_chart_ready;return a.a.createElement("div",{id:"trade_container",className:"trade-container"},a.a.createElement(ge,null),a.a.createElement("div",{className:"chart-container"},a.a.createElement(Ie.a,{ctor:He,has_progress:!1,should_load:!0}),a.a.createElement(a.a.Suspense,{fallback:a.a.createElement(d.a,{is_dark:this.props.is_dark_theme,is_visible:!this.props.symbol})},a.a.createElement(d.a,{is_dark:this.props.is_dark_theme,is_visible:g}),a.a.createElement(_e,{chart_id:this.props.chart_id,chart_type:this.props.chart_type,Digits:a.a.createElement(xe,{is_trade_page:!0,contract_info:this.props.contract_info,digits_info:this.props.digits_info,display_status:this.props.display_status,is_digit_contract:this.props.is_digit_contract,is_ended:this.props.is_ended}),InfoBox:a.a.createElement(Re,{is_trade_page:!0,contract_info:this.props.contract_info,error_message:this.props.error_message,is_contract_mode:this.props.is_contract_mode,removeError:this.props.removeError,onClose:this.props.onCloseContract}),end_epoch:this.props.end_epoch,granularity:this.props.granularity,is_trade_page:!0,is_static_chart:this.props.is_static_chart,onSymbolChange:this.props.onSymbolChange,scroll_to_epoch:this.props.scroll_to_epoch,start_epoch:this.props.start_epoch,should_show_bottom_widgets:n,should_show_last_digit_stats:r,symbol:this.props.symbol})),a.a.createElement(pe,null)),a.a.createElement("div",{className:t,onClick:this.props.is_contract_mode?function(){e.props.onCloseContract()}:null,style:{cursor:this.props.is_contract_mode?"pointer":"initial"}},this.props.is_market_closed&&a.a.createElement(oe,null),a.a.createElement(Xe,{is_dark_theme:this.props.is_dark_theme,is_contract_visible:this.props.is_contract_mode,is_market_closed:this.props.is_market_closed,is_mobile:this.props.is_mobile,is_trade_enabled:this.props.is_trade_enabled})))}}])&&ve(n.prototype,r),g&&ve(n,g),t}();Ye.propTypes={chart_id:g.a.string,chart_type:g.a.string,contract_info:g.a.object,contract_type:g.a.string,digits_info:g.a.object,display_status:g.a.string,end_epoch:g.a.number,granularity:g.a.number,hidePositions:g.a.func,is_chart_loading:g.a.bool,is_chart_ready:g.a.bool,is_contract_mode:g.a.bool,is_dark_theme:g.a.bool,is_digit_contract:g.a.bool,is_ended:g.a.bool,is_market_closed:g.a.bool,is_mobile:g.a.bool,is_static_chart:g.a.bool,is_trade_enabled:g.a.bool,onCloseContract:g.a.func,onMount:g.a.func,onSymbolChange:g.a.func,onUnmount:g.a.func,purchase_info:g.a.object,scroll_to_epoch:g.a.number,showPositions:g.a.func,start_epoch:g.a.number,symbol:g.a.string};var Oe,Te=Object(l.b)(function(e){var t=e.modules,n=e.ui;return{contract_info:t.contract_trade.contract_info,digits_info:t.contract_trade.digits_info,display_status:t.contract_trade.display_status,error_message:t.contract_trade.error_message,is_ended:t.contract_trade.is_ended,is_digit_contract:t.contract_trade.is_digit_contract,onCloseContract:t.contract_trade.onCloseContract,removeError:t.contract_trade.clearError,chart_id:t.smart_chart.chart_id,chart_type:t.smart_chart.chart_type,scroll_to_epoch:t.smart_chart.scroll_to_left_epoch,granularity:t.smart_chart.granularity,end_epoch:t.smart_chart.end_epoch,start_epoch:t.smart_chart.start_epoch,is_chart_loading:t.smart_chart.is_chart_loading,is_chart_ready:t.smart_chart.is_chart_ready,is_contract_mode:t.smart_chart.is_contract_mode,is_static_chart:t.smart_chart.is_static_chart,contract_type:t.trade.contract_type,is_market_closed:t.trade.is_market_closed,is_trade_enabled:t.trade.is_trade_enabled,onMount:t.trade.onMount,onSymbolChange:t.trade.onChange,onUnmount:t.trade.onUnmount,purchase_info:t.trade.purchase_info,symbol:t.trade.symbol,hidePositions:n.hidePositionsFooterToggle,showPositions:n.showPositionsFooterToggle,has_only_forward_starting_contracts:n.has_only_forward_starting_contracts,is_dark_theme:n.is_dark_mode_on,is_mobile:n.is_mobile,setHasOnlyForwardingContracts:n.setHasOnlyForwardingContracts}})(Ye),Se=Object(c.lazy)(function(){return n.e("contract").then(n.bind(null,643))}),Je=Object(c.lazy)(function(){return Promise.all([n.e("vendors~digits~info-b~897959f6"),n.e("reports")]).then(n.bind(null,651))}),Ee=Object(c.lazy)(function(){return Promise.all([n.e("vendors~open_position~7c650be5"),n.e("default~open_position~1833eefb"),n.e("open_positions")]).then(n.bind(null,639))}),De=Object(c.lazy)(function(){return Promise.all([n.e("vendors~open_position~7c650be5"),n.e("default~open_position~1833eefb"),n.e("profit_table")]).then(n.bind(null,654))}),we=Object(c.lazy)(function(){return Promise.all([n.e("vendors~open_position~7c650be5"),n.e("default~open_position~1833eefb"),n.e("statement")]).then(n.bind(null,640))}),ke=Object(c.lazy)(function(){return n.e("404").then(n.bind(null,653))}),ze={component:ke,title:Object(A.localize)("Error 404")},je=function(){return Oe||(Oe=[{path:b.e.contract,component:Se,title:Object(A.localize)("Contract Details"),is_authenticated:!0},{path:b.e.index,component:I.a,title:"",to:b.e.trade},{path:b.e.reports,component:Je,is_authenticated:!0,title:Object(A.localize)("Reports"),routes:[{path:b.e.positions,component:Ee,title:Object(A.localize)("Open Positions"),icon_component:"IconOpenPositions",default:!0},{path:b.e.profit,component:De,title:Object(A.localize)("Profit Table"),icon_component:"IconProfitTable"},{path:b.e.statement,component:we,title:Object(A.localize)("Statement"),icon_component:"IconStatement"}]},{path:b.e.trade,component:Te,title:Object(A.localize)("Trade"),exact:!0},{path:b.e.error404,component:ke,title:Object(A.localize)("Error 404")},{path:b.e.redirect,component:u,title:Object(A.localize)("Redirect")}]),Oe.push(ze),Oe};function Le(){return(Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pe(e,t){if(null==e)return{};var n,r,g=function(e,t){if(null==e)return{};var n,r,g={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(g[n]=e[n]);return g}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(g[n]=e[n])}return g}var Ke=function(e){var t=e.active_class,n=e.to,r=e.children,g=Pe(e,["active_class","to","children"]),c=Object(o.c)(n),I=Object(o.a)(c,je());if(!I)throw new Error("Route not found: ".concat(n));return n?a.a.createElement(i.c,Le({to:c,activeClassName:t||"active",exact:I.exact},g),r):a.a.createElement("a",g,r)};Ke.propTypes={active_class:g.a.string,children:g.a.object,to:g.a.string};var Me=Ke,qe=(n(135),n(62)),$e=n(10),et=n.n($e),tt=n(41),nt=n.n(tt),rt=n(32),gt=n(143),ct=function(e){var t=e.onLogin,n=e.onSignup,r=e.page_title;return a.a.createElement(gt.a,{header:a.a.createElement(ce.a,{i18n_default_text:"{{page_title}} page is only<0 />available for existing clients.",values:{page_title:r||"This"},components:[a.a.createElement("br",{key:0})]}),messages:[a.a.createElement(ce.a,{key:0,i18n_default_text:"If you have an active account, please <0>Log in</0> for full access. Otherwise, please <1>Sign up</1> to start trading.",components:[a.a.createElement("a",{key:0,className:"link",onClick:t}),a.a.createElement("a",{key:1,className:"link",onClick:n})]})]})};ct.propTypes={onLogin:g.a.func,onSignup:g.a.func,page_title:g.a.string},ct.defaultProps={onSignup:function(){window.open(Object(rt.urlFor)("new-account",void 0,void 0,!0))}};var at=ct,it=n(120);function ot(){return(ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var It=Object(l.b)(function(e){return{pushDataLayer:e.gtm.pushDataLayer}})(function(e){return a.a.createElement(I.b,{exact:e.exact,path:e.path,render:function(t){var n=null;if(e.component===I.a){var r=e.to;e.path===s.a.index&&(r=t.location.pathname.toLowerCase().replace(e.path,"")),n=a.a.createElement(I.a,{to:r})}else n=e.is_authenticated&&!e.is_logged_in?a.a.createElement(at,{onLogin:qe.redirectToLogin,page_title:e.title}):a.a.createElement(e.component,ot({},t,{routes:e.routes}));nt.a.setCookie();var g=e.title?"".concat(e.title," | "):"";return document.title="".concat(g).concat(it.default_title),et.a.wait("website_status").then(function(){e.pushDataLayer({event:"page_load"})}),n}})});function lt(){return(lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var st=function(e){return a.a.createElement(a.a.Suspense,{fallback:a.a.createElement("div",null)},a.a.createElement(I.d,null,je().map(function(t,n){return a.a.createElement(It,lt({key:n},t,e))})))};n.d(t,"a",function(){return Me}),n.d(t,"b",function(){return st})},142:function(e,t,n){"use strict";var r=n(145),g=n(0),c=n.n(g),a=n(1),i=n.n(a),o=function(e){var t=e.is_dark_theme,n=e.speed;return c.a.createElement(r.a,{height:173,width:218,speed:n,primaryColor:t?"rgba(127, 131, 151, 0.16)":"#f4f4f6",secondaryColor:t?"#303342":"#eaeaec"},c.a.createElement("rect",{x:"43",y:"19",rx:"0",ry:"0",width:"56",height:"8"}),c.a.createElement("rect",{x:"147",y:"19",rx:"0",ry:"0",width:"56",height:"8"}),c.a.createElement("rect",{x:"12",y:"50",rx:"0",ry:"0",width:"44",height:"8"}),c.a.createElement("rect",{x:"13",y:"68",rx:"0",ry:"0",width:"192",height:"8"}),c.a.createElement("rect",{x:"5",y:"89",rx:"0",ry:"0",width:"208",height:"1"}),c.a.createElement("rect",{x:"12",y:"104",rx:"0",ry:"0",width:"44",height:"8"}),c.a.createElement("rect",{x:"12",y:"9",rx:"0",ry:"0",width:"24",height:"24"}),c.a.createElement("rect",{x:"116",y:"11",rx:"0",ry:"0",width:"24",height:"24"}),c.a.createElement("rect",{x:"12",y:"118",rx:"0",ry:"0",width:"88",height:"8"}),c.a.createElement("rect",{x:"116",y:"104",rx:"0",ry:"0",width:"44",height:"8"}),c.a.createElement("rect",{x:"116",y:"118",rx:"0",ry:"0",width:"88",height:"8"}),c.a.createElement("rect",{x:"12",y:"139",rx:"0",ry:"0",width:"44",height:"8"}),c.a.createElement("rect",{x:"12",y:"153",rx:"0",ry:"0",width:"88",height:"8"}),c.a.createElement("rect",{x:"116",y:"139",rx:"0",ry:"0",width:"44",height:"8"}),c.a.createElement("rect",{x:"116",y:"153",rx:"0",ry:"0",width:"88",height:"8"}))};o.propTypes={is_dark_theme:i.a.bool,speed:i.a.number};var I=function(e){var t=e.is_dark_theme,n=e.speed;return c.a.createElement(r.a,{height:548,width:240,speed:n,primaryColor:t?"#191c31":"#f4f4f6",secondaryColor:t?"#202641":"#eaeaec"},c.a.createElement("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"240",height:"76"}),c.a.createElement("rect",{x:"0",y:"84",rx:"4",ry:"4",width:"240",height:"132"}),c.a.createElement("rect",{x:"0",y:"224",rx:"4",ry:"4",width:"240",height:"120"}),c.a.createElement("rect",{x:"0",y:"352",rx:"4",ry:"4",width:"240",height:"194"}))};I.propTypes={is_dark_theme:i.a.bool,speed:i.a.number},n.d(t,"a",function(){return o}),n.d(t,"b",function(){return I})},143:function(e,t,n){"use strict";var r=n(1),g=n.n(r),c=n(0),a=n.n(c),i=n(135),o=n(19),I=function(e){var t=e.buttonOnClick,n=e.error_code,r=e.messages,g=e.header,c=e.redirect_label,I=e.redirect_url;return a.a.createElement("div",{className:"page-error__container"},a.a.createElement("div",{className:"page-error__box"},a.a.createElement("h3",{className:"page-error__header"},g),a.a.createElement("div",{className:"page-error__message-wrapper"},a.a.createElement("span",{className:"page-error__message"},r.map(function(e,t){return e.has_html?a.a.createElement("p",{key:t,dangerouslySetInnerHTML:{__html:e.message}}):a.a.createElement("p",{key:t},e)}),n&&a.a.createElement(a.a.Fragment,null,a.a.createElement("br",null),a.a.createElement("p",{className:"page-error__code"},a.a.createElement(o.a,{i18n_default_text:"Error Code: {{error_code}}",values:{error_code:n}}))))),c&&a.a.createElement(i.a,{className:"page-error__btn btn--primary btn--primary--orange",to:I,onClick:t},a.a.createElement("span",{className:"page-error__btn-text btn__text"},c))))};I.propTypes={buttonOnClick:g.a.func,error_code:g.a.number,header:g.a.oneOfType([g.a.string,g.a.node]),messages:g.a.array,redirect_label:g.a.oneOfType([g.a.string,g.a.node]),redirect_url:g.a.string};var l=I;n.d(t,"a",function(){return l})},144:function(e,t,n){"use strict";var r=n(5),g=n.n(r),c=n(1),a=n.n(c),i=n(0),o=n.n(i),I=function(e){var t=e.className,n=e.classNameBlock,r=g()(n,"block-ui"),c=g()("block-ui__loading",t);return o.a.createElement("div",{className:r},o.a.createElement("div",{className:c},o.a.createElement("div",{className:"block-ui__loading-spinner"},o.a.createElement("svg",{className:"block-ui__loading-spinner-circular",viewBox:"25 25 50 50"},o.a.createElement("circle",{className:"block-ui__loading-spinner-path",cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"4",strokeMiterlimit:"10"})))))};I.propTypes={className:a.a.string,classNameBlock:a.a.string},t.a=I},146:function(module,exports,__webpack_require__){var I;window,I=function(__WEBPACK_EXTERNAL_MODULE__0__,__WEBPACK_EXTERNAL_MODULE__6__){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var g=t[r]={i:r,l:!1,exports:{}};return e[r].call(g.exports,g,g.exports,n),g.l=!0,g.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var g in e)n.d(r,g,function(t){return e[t]}.bind(null,g));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=43)}([function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__0__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vZXh0ZXJuYWwge1wicm9vdFwiOlwiUmVhY3RcIixcImNvbW1vbmpzXCI6XCJyZWFjdFwiLFwiY29tbW9uanMyXCI6XCJyZWFjdFwifT82MWRlIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fOyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")},function(module,exports,__webpack_require__){eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (false) { var throwOnDirectAccess, ReactIs; } else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = __webpack_require__(4)();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qcz9kN2JjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdmFyIFJlYWN0SXMgPSByZXF1aXJlKCdyZWFjdC1pcycpO1xuXG4gIC8vIEJ5IGV4cGxpY2l0bHkgdXNpbmcgYHByb3AtdHlwZXNgIHlvdSBhcmUgb3B0aW5nIGludG8gbmV3IGRldmVsb3BtZW50IGJlaGF2aW9yLlxuICAvLyBodHRwOi8vZmIubWUvcHJvcC10eXBlcy1pbi1wcm9kXG4gIHZhciB0aHJvd09uRGlyZWN0QWNjZXNzID0gdHJ1ZTtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2ZhY3RvcnlXaXRoVHlwZUNoZWNrZXJzJykoUmVhY3RJcy5pc0VsZW1lbnQsIHRocm93T25EaXJlY3RBY2Nlc3MpO1xufSBlbHNlIHtcbiAgLy8gQnkgZXhwbGljaXRseSB1c2luZyBgcHJvcC10eXBlc2AgeW91IGFyZSBvcHRpbmcgaW50byBuZXcgcHJvZHVjdGlvbiBiZWhhdmlvci5cbiAgLy8gaHR0cDovL2ZiLm1lL3Byb3AtdHlwZXMtaW4tcHJvZFxuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vZmFjdG9yeVdpdGhUaHJvd2luZ1NoaW1zJykoKTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n")},function(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif ( true && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (true) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n\t\t\treturn classNames;\n\t\t}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else {}\n}());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcz80ZDI2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTcgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykgJiYgYXJnLmxlbmd0aCkge1xuXHRcdFx0XHR2YXIgaW5uZXIgPSBjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZyk7XG5cdFx0XHRcdGlmIChpbm5lcikge1xuXHRcdFx0XHRcdGNsYXNzZXMucHVzaChpbm5lcik7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdGNsYXNzTmFtZXMuZGVmYXVsdCA9IGNsYXNzTmFtZXM7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQSxVQUVBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n")},,function(module,exports,__webpack_require__){"use strict";eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = __webpack_require__(5);\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9mYWN0b3J5V2l0aFRocm93aW5nU2hpbXMuanM/ZDdhMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gcmVxdWlyZSgnLi9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQnKTtcblxuZnVuY3Rpb24gZW1wdHlGdW5jdGlvbigpIHt9XG5mdW5jdGlvbiBlbXB0eUZ1bmN0aW9uV2l0aFJlc2V0KCkge31cbmVtcHR5RnVuY3Rpb25XaXRoUmVzZXQucmVzZXRXYXJuaW5nQ2FjaGUgPSBlbXB0eUZ1bmN0aW9uO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBzaGltKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwgc2VjcmV0KSB7XG4gICAgaWYgKHNlY3JldCA9PT0gUmVhY3RQcm9wVHlwZXNTZWNyZXQpIHtcbiAgICAgIC8vIEl0IGlzIHN0aWxsIHNhZmUgd2hlbiBjYWxsZWQgZnJvbSBSZWFjdC5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcihcbiAgICAgICdDYWxsaW5nIFByb3BUeXBlcyB2YWxpZGF0b3JzIGRpcmVjdGx5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGBwcm9wLXR5cGVzYCBwYWNrYWdlLiAnICtcbiAgICAgICdVc2UgUHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzKCkgdG8gY2FsbCB0aGVtLiAnICtcbiAgICAgICdSZWFkIG1vcmUgYXQgaHR0cDovL2ZiLm1lL3VzZS1jaGVjay1wcm9wLXR5cGVzJ1xuICAgICk7XG4gICAgZXJyLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7XG4gICAgdGhyb3cgZXJyO1xuICB9O1xuICBzaGltLmlzUmVxdWlyZWQgPSBzaGltO1xuICBmdW5jdGlvbiBnZXRTaGltKCkge1xuICAgIHJldHVybiBzaGltO1xuICB9O1xuICAvLyBJbXBvcnRhbnQhXG4gIC8vIEtlZXAgdGhpcyBsaXN0IGluIHN5bmMgd2l0aCBwcm9kdWN0aW9uIHZlcnNpb24gaW4gYC4vZmFjdG9yeVdpdGhUeXBlQ2hlY2tlcnMuanNgLlxuICB2YXIgUmVhY3RQcm9wVHlwZXMgPSB7XG4gICAgYXJyYXk6IHNoaW0sXG4gICAgYm9vbDogc2hpbSxcbiAgICBmdW5jOiBzaGltLFxuICAgIG51bWJlcjogc2hpbSxcbiAgICBvYmplY3Q6IHNoaW0sXG4gICAgc3RyaW5nOiBzaGltLFxuICAgIHN5bWJvbDogc2hpbSxcblxuICAgIGFueTogc2hpbSxcbiAgICBhcnJheU9mOiBnZXRTaGltLFxuICAgIGVsZW1lbnQ6IHNoaW0sXG4gICAgZWxlbWVudFR5cGU6IHNoaW0sXG4gICAgaW5zdGFuY2VPZjogZ2V0U2hpbSxcbiAgICBub2RlOiBzaGltLFxuICAgIG9iamVjdE9mOiBnZXRTaGltLFxuICAgIG9uZU9mOiBnZXRTaGltLFxuICAgIG9uZU9mVHlwZTogZ2V0U2hpbSxcbiAgICBzaGFwZTogZ2V0U2hpbSxcbiAgICBleGFjdDogZ2V0U2hpbSxcblxuICAgIGNoZWNrUHJvcFR5cGVzOiBlbXB0eUZ1bmN0aW9uV2l0aFJlc2V0LFxuICAgIHJlc2V0V2FybmluZ0NhY2hlOiBlbXB0eUZ1bmN0aW9uXG4gIH07XG5cbiAgUmVhY3RQcm9wVHlwZXMuUHJvcFR5cGVzID0gUmVhY3RQcm9wVHlwZXM7XG5cbiAgcmV0dXJuIFJlYWN0UHJvcFR5cGVzO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n")},function(module,exports,__webpack_require__){"use strict";eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQuanM/NTliMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJztcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFByb3BUeXBlc1NlY3JldDtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__6__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcInJlYWN0LWRvbVwiLFwiY29tbW9uanMyXCI6XCJyZWFjdC1kb21cIixcInJvb3RcIjpcIlJlYWN0RE9NXCJ9PzJjYTEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX182X187Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.Scrollbars = undefined;\n\nvar _Scrollbars = __webpack_require__(11);\n\nvar _Scrollbars2 = _interopRequireDefault(_Scrollbars);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }\n\nexports["default"] = _Scrollbars2["default"];\nexports.Scrollbars = _Scrollbars2["default"];//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvdHQtcmVhY3QtY3VzdG9tLXNjcm9sbGJhcnMvbGliL2luZGV4LmpzP2I3ODciXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5TY3JvbGxiYXJzID0gdW5kZWZpbmVkO1xuXG52YXIgX1Njcm9sbGJhcnMgPSByZXF1aXJlKCcuL1Njcm9sbGJhcnMnKTtcblxudmFyIF9TY3JvbGxiYXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Njcm9sbGJhcnMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBfU2Nyb2xsYmFyczJbXCJkZWZhdWx0XCJdO1xuZXhwb3J0cy5TY3JvbGxiYXJzID0gX1Njcm9sbGJhcnMyW1wiZGVmYXVsdFwiXTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./src/components/popover/popover.scss\nvar popover = __webpack_require__(29);\n\n// EXTERNAL MODULE: ./node_modules/classnames/index.js\nvar classnames = __webpack_require__(2);\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// EXTERNAL MODULE: ./node_modules/prop-types/index.js\nvar prop_types = __webpack_require__(1);\nvar prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);\n\n// EXTERNAL MODULE: external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\"}\nvar external_root_React_commonjs_react_commonjs2_react_ = __webpack_require__(0);\nvar external_root_React_commonjs_react_commonjs2_react_default = /*#__PURE__*/__webpack_require__.n(external_root_React_commonjs_react_commonjs2_react_);\n\n// EXTERNAL MODULE: external {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"root\":\"ReactDOM\"}\nvar external_commonjs_react_dom_commonjs2_react_dom_root_ReactDOM_ = __webpack_require__(6);\nvar external_commonjs_react_dom_commonjs2_react_dom_root_ReactDOM_default = /*#__PURE__*/__webpack_require__.n(external_commonjs_react_dom_commonjs2_react_dom_root_ReactDOM_);\n\n// CONCATENATED MODULE: ./node_modules/tslib/tslib.es6.js\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nfunction __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nfunction __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nfunction __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nfunction __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nfunction __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nfunction __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nfunction __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\n// CONCATENATED MODULE: ./node_modules/style-value-types/dist/style-value-types.es.js\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar style_value_types_es_assign = function() {\r\n    style_value_types_es_assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return style_value_types_es_assign.apply(this, arguments);\r\n};\n\nvar style_value_types_es_clamp = function (min, max) { return function (v) {\r\n    return Math.max(Math.min(v, max), min);\r\n}; };\r\nvar sanitize = function (v) { return (v % 1 ? Number(v.toFixed(5)) : v); };\r\nvar floatRegex = /(-)?(\\d[\\d\\.]*)/g;\r\nvar colorRegex = /(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))/gi;\r\nvar singleColorRegex = /^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))$/i;\n\nvar number = {\r\n    test: function (v) { return typeof v === 'number'; },\r\n    parse: parseFloat,\r\n    transform: function (v) { return v; }\r\n};\r\nvar alpha = style_value_types_es_assign({}, number, { transform: style_value_types_es_clamp(0, 1) });\r\nvar style_value_types_es_scale = style_value_types_es_assign({}, number, { default: 1 });\n\nvar createUnitType = function (unit) { return ({\r\n    test: function (v) {\r\n        return typeof v === 'string' && v.endsWith(unit) && v.split(' ').length === 1;\r\n    },\r\n    parse: parseFloat,\r\n    transform: function (v) { return \"\" + v + unit; }\r\n}); };\r\nvar degrees = createUnitType('deg');\r\nvar percent = createUnitType('%');\r\nvar px = createUnitType('px');\r\nvar vh = createUnitType('vh');\r\nvar vw = createUnitType('vw');\r\nvar progressPercentage = style_value_types_es_assign({}, percent, { parse: function (v) { return percent.parse(v) / 100; }, transform: function (v) { return percent.transform(v * 100); } });\n\nvar getValueFromFunctionString = function (value) {\r\n    return value.substring(value.indexOf('(') + 1, value.lastIndexOf(')'));\r\n};\r\nvar clampRgbUnit = style_value_types_es_clamp(0, 255);\r\nvar isRgba = function (v) { return v.red !== undefined; };\r\nvar isHsla = function (v) { return v.hue !== undefined; };\r\nvar splitColorValues = function (terms) {\r\n    return function (v) {\r\n        if (typeof v !== 'string')\r\n            return v;\r\n        var values = {};\r\n        var valuesArray = getValueFromFunctionString(v).split(/,\\s*/);\r\n        for (var i = 0; i < 4; i++) {\r\n            values[terms[i]] =\r\n                valuesArray[i] !== undefined ? parseFloat(valuesArray[i]) : 1;\r\n        }\r\n        return values;\r\n    };\r\n};\r\nvar rgbaTemplate = function (_a) {\r\n    var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n    return \"rgba(\" + red + \", \" + green + \", \" + blue + \", \" + alpha$$1 + \")\";\r\n};\r\nvar hslaTemplate = function (_a) {\r\n    var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n    return \"hsla(\" + hue + \", \" + saturation + \", \" + lightness + \", \" + alpha$$1 + \")\";\r\n};\r\nvar rgbUnit = style_value_types_es_assign({}, number, { transform: function (v) { return Math.round(clampRgbUnit(v)); } });\r\nfunction isColorString(color, colorType) {\r\n    return color.startsWith(colorType) && singleColorRegex.test(color);\r\n}\r\nvar rgba = {\r\n    test: function (v) { return (typeof v === 'string' ? isColorString(v, 'rgb') : isRgba(v)); },\r\n    parse: splitColorValues(['red', 'green', 'blue', 'alpha']),\r\n    transform: function (_a) {\r\n        var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n        return rgbaTemplate({\r\n            red: rgbUnit.transform(red),\r\n            green: rgbUnit.transform(green),\r\n            blue: rgbUnit.transform(blue),\r\n            alpha: sanitize(alpha.transform(alpha$$1))\r\n        });\r\n    }\r\n};\r\nvar hsla = {\r\n    test: function (v) { return (typeof v === 'string' ? isColorString(v, 'hsl') : isHsla(v)); },\r\n    parse: splitColorValues(['hue', 'saturation', 'lightness', 'alpha']),\r\n    transform: function (_a) {\r\n        var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n        return hslaTemplate({\r\n            hue: Math.round(hue),\r\n            saturation: percent.transform(sanitize(saturation)),\r\n            lightness: percent.transform(sanitize(lightness)),\r\n            alpha: sanitize(alpha.transform(alpha$$1))\r\n        });\r\n    }\r\n};\r\nvar hex = style_value_types_es_assign({}, rgba, { test: function (v) { return typeof v === 'string' && isColorString(v, '#'); }, parse: function (v) {\r\n        var r = '';\r\n        var g = '';\r\n        var b = '';\r\n        if (v.length > 4) {\r\n            r = v.substr(1, 2);\r\n            g = v.substr(3, 2);\r\n            b = v.substr(5, 2);\r\n        }\r\n        else {\r\n            r = v.substr(1, 1);\r\n            g = v.substr(2, 1);\r\n            b = v.substr(3, 1);\r\n            r += r;\r\n            g += g;\r\n            b += b;\r\n        }\r\n        return {\r\n            red: parseInt(r, 16),\r\n            green: parseInt(g, 16),\r\n            blue: parseInt(b, 16),\r\n            alpha: 1\r\n        };\r\n    } });\r\nvar color = {\r\n    test: function (v) {\r\n        return (typeof v === 'string' && singleColorRegex.test(v)) ||\r\n            isRgba(v) ||\r\n            isHsla(v);\r\n    },\r\n    parse: function (v) {\r\n        if (rgba.test(v)) {\r\n            return rgba.parse(v);\r\n        }\r\n        else if (hsla.test(v)) {\r\n            return hsla.parse(v);\r\n        }\r\n        else if (hex.test(v)) {\r\n            return hex.parse(v);\r\n        }\r\n        return v;\r\n    },\r\n    transform: function (v) {\r\n        if (isRgba(v)) {\r\n            return rgba.transform(v);\r\n        }\r\n        else if (isHsla(v)) {\r\n            return hsla.transform(v);\r\n        }\r\n        return v;\r\n    }\r\n};\n\nvar COLOR_TOKEN = '${c}';\r\nvar NUMBER_TOKEN = '${n}';\r\nvar convertNumbersToZero = function (v) {\r\n    return typeof v === 'number' ? 0 : v;\r\n};\r\nvar complex = {\r\n    test: function (v) {\r\n        if (typeof v !== 'string' || !isNaN(v))\r\n            return false;\r\n        var numValues = 0;\r\n        var foundNumbers = v.match(floatRegex);\r\n        var foundColors = v.match(colorRegex);\r\n        if (foundNumbers)\r\n            numValues += foundNumbers.length;\r\n        if (foundColors)\r\n            numValues += foundColors.length;\r\n        return numValues > 0;\r\n    },\r\n    parse: function (v) {\r\n        var input = v;\r\n        var parsed = [];\r\n        var foundColors = input.match(colorRegex);\r\n        if (foundColors) {\r\n            input = input.replace(colorRegex, COLOR_TOKEN);\r\n            parsed.push.apply(parsed, foundColors.map(color.parse));\r\n        }\r\n        var foundNumbers = input.match(floatRegex);\r\n        if (foundNumbers) {\r\n            parsed.push.apply(parsed, foundNumbers.map(number.parse));\r\n        }\r\n        return parsed;\r\n    },\r\n    createTransformer: function (prop) {\r\n        var template = prop;\r\n        var token = 0;\r\n        var foundColors = prop.match(colorRegex);\r\n        var numColors = foundColors ? foundColors.length : 0;\r\n        if (foundColors) {\r\n            for (var i = 0; i < numColors; i++) {\r\n                template = template.replace(foundColors[i], COLOR_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        var foundNumbers = template.match(floatRegex);\r\n        var numNumbers = foundNumbers ? foundNumbers.length : 0;\r\n        if (foundNumbers) {\r\n            for (var i = 0; i < numNumbers; i++) {\r\n                template = template.replace(foundNumbers[i], NUMBER_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        return function (v) {\r\n            var output = template;\r\n            for (var i = 0; i < token; i++) {\r\n                output = output.replace(i < numColors ? COLOR_TOKEN : NUMBER_TOKEN, i < numColors ? color.transform(v[i]) : sanitize(v[i]));\r\n            }\r\n            return output;\r\n        };\r\n    },\r\n    getAnimatableNone: function (target) {\r\n        var parsedTarget = complex.parse(target);\r\n        var targetTransformer = complex.createTransformer(target);\r\n        return targetTransformer(parsedTarget.map(convertNumbersToZero));\r\n    }\r\n};\n\n\n\n// CONCATENATED MODULE: ./node_modules/hey-listen/dist/hey-listen.es.js\nvar warning = function () { };\r\nvar invariant = function () { };\r\nif (false) {}\n\n\n\n// CONCATENATED MODULE: ./node_modules/framesync/dist/framesync.es.js\n\n\nvar prevTime = 0;\r\nvar onNextFrame = typeof window !== 'undefined' && window.requestAnimationFrame !== undefined\r\n    ? function (callback) { return window.requestAnimationFrame(callback); }\r\n    : function (callback) {\r\n        var timestamp = Date.now();\r\n        var timeToCall = Math.max(0, 16.7 - (timestamp - prevTime));\r\n        prevTime = timestamp + timeToCall;\r\n        setTimeout(function () { return callback(prevTime); }, timeToCall);\r\n    };\n\nvar createStep = (function (setRunNextFrame) {\r\n    var processToRun = [];\r\n    var processToRunNextFrame = [];\r\n    var numThisFrame = 0;\r\n    var isProcessing = false;\r\n    var i = 0;\r\n    var cancelled = new WeakSet();\r\n    var toKeepAlive = new WeakSet();\r\n    var renderStep = {\r\n        cancel: function (process) {\r\n            var indexOfCallback = processToRunNextFrame.indexOf(process);\r\n            cancelled.add(process);\r\n            if (indexOfCallback !== -1) {\r\n                processToRunNextFrame.splice(indexOfCallback, 1);\r\n            }\r\n        },\r\n        process: function (frame) {\r\n            var _a;\r\n            isProcessing = true;\r\n            _a = [\r\n                processToRunNextFrame,\r\n                processToRun\r\n            ], processToRun = _a[0], processToRunNextFrame = _a[1];\r\n            processToRunNextFrame.length = 0;\r\n            numThisFrame = processToRun.length;\r\n            if (numThisFrame) {\r\n                var process_1;\r\n                for (i = 0; i < numThisFrame; i++) {\r\n                    process_1 = processToRun[i];\r\n                    process_1(frame);\r\n                    if (toKeepAlive.has(process_1) === true && !cancelled.has(process_1)) {\r\n                        renderStep.schedule(process_1);\r\n                        setRunNextFrame(true);\r\n                    }\r\n                }\r\n            }\r\n            isProcessing = false;\r\n        },\r\n        schedule: function (process, keepAlive, immediate) {\r\n            if (keepAlive === void 0) { keepAlive = false; }\r\n            if (immediate === void 0) { immediate = false; }\r\n            invariant(typeof process === 'function', 'Argument must be a function');\r\n            var addToCurrentBuffer = immediate && isProcessing;\r\n            var buffer = addToCurrentBuffer ? processToRun : processToRunNextFrame;\r\n            cancelled.delete(process);\r\n            if (keepAlive)\r\n                toKeepAlive.add(process);\r\n            if (buffer.indexOf(process) === -1) {\r\n                buffer.push(process);\r\n                if (addToCurrentBuffer)\r\n                    numThisFrame = processToRun.length;\r\n            }\r\n        }\r\n    };\r\n    return renderStep;\r\n});\n\nvar StepId;\r\n(function (StepId) {\r\n    StepId[\"Read\"] = \"read\";\r\n    StepId[\"Update\"] = \"update\";\r\n    StepId[\"Render\"] = \"render\";\r\n    StepId[\"PostRender\"] = \"postRender\";\r\n    StepId[\"FixedUpdate\"] = \"fixedUpdate\";\r\n})(StepId || (StepId = {}));\n\nvar maxElapsed = 40;\r\nvar defaultElapsed = (1 / 60) * 1000;\r\nvar useDefaultElapsed = true;\r\nvar willRunNextFrame = false;\r\nvar framesync_es_isProcessing = false;\r\nvar framesync_es_frame = {\r\n    delta: 0,\r\n    timestamp: 0\r\n};\r\nvar stepsOrder = [\r\n    StepId.Read,\r\n    StepId.Update,\r\n    StepId.Render,\r\n    StepId.PostRender\r\n];\r\nvar setWillRunNextFrame = function (willRun) { return (willRunNextFrame = willRun); };\r\nvar framesync_es_a = stepsOrder.reduce(function (acc, key) {\r\n    var step = createStep(setWillRunNextFrame);\r\n    acc.sync[key] = function (process, keepAlive, immediate) {\r\n        if (keepAlive === void 0) { keepAlive = false; }\r\n        if (immediate === void 0) { immediate = false; }\r\n        if (!willRunNextFrame)\r\n            startLoop();\r\n        step.schedule(process, keepAlive, immediate);\r\n        return process;\r\n    };\r\n    acc.cancelSync[key] = function (process) { return step.cancel(process); };\r\n    acc.steps[key] = step;\r\n    return acc;\r\n}, {\r\n    steps: {},\r\n    sync: {},\r\n    cancelSync: {}\r\n}), steps = framesync_es_a.steps, sync = framesync_es_a.sync, cancelSync = framesync_es_a.cancelSync;\r\nvar processStep = function (stepId) { return steps[stepId].process(framesync_es_frame); };\r\nvar processFrame = function (timestamp) {\r\n    willRunNextFrame = false;\r\n    framesync_es_frame.delta = useDefaultElapsed\r\n        ? defaultElapsed\r\n        : Math.max(Math.min(timestamp - framesync_es_frame.timestamp, maxElapsed), 1);\r\n    if (!useDefaultElapsed)\r\n        defaultElapsed = framesync_es_frame.delta;\r\n    framesync_es_frame.timestamp = timestamp;\r\n    framesync_es_isProcessing = true;\r\n    stepsOrder.forEach(processStep);\r\n    framesync_es_isProcessing = false;\r\n    if (willRunNextFrame) {\r\n        useDefaultElapsed = false;\r\n        onNextFrame(processFrame);\r\n    }\r\n};\r\nvar startLoop = function () {\r\n    willRunNextFrame = true;\r\n    useDefaultElapsed = true;\r\n    if (!framesync_es_isProcessing)\r\n        onNextFrame(processFrame);\r\n};\r\nvar getFrameData = function () { return framesync_es_frame; };\n\n/* harmony default export */ var framesync_es = (sync);\n\n\n// CONCATENATED MODULE: ./node_modules/@popmotion/easing/dist/easing.es.js\nvar DEFAULT_OVERSHOOT_STRENGTH = 1.525;\nvar reversed = function (easing) {\n    return function (p) {\n        return 1 - easing(1 - p);\n    };\n};\nvar mirrored = function (easing) {\n    return function (p) {\n        return p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\n    };\n};\nvar createReversedEasing = reversed;\nvar createMirroredEasing = mirrored;\nvar createExpoIn = function (power) {\n    return function (p) {\n        return Math.pow(p, power);\n    };\n};\nvar createBackIn = function (power) {\n    return function (p) {\n        return p * p * ((power + 1) * p - power);\n    };\n};\nvar createAnticipateEasing = function (power) {\n    var backEasing = createBackIn(power);\n    return function (p) {\n        return (p *= 2) < 1 ? 0.5 * backEasing(p) : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\n    };\n};\nvar linear = function (p) {\n    return p;\n};\nvar easeIn = /*#__PURE__*/createExpoIn(2);\nvar easeOut = /*#__PURE__*/reversed(easeIn);\nvar easeInOut = /*#__PURE__*/mirrored(easeIn);\nvar circIn = function (p) {\n    return 1 - Math.sin(Math.acos(p));\n};\nvar circOut = /*#__PURE__*/reversed(circIn);\nvar circInOut = /*#__PURE__*/mirrored(circOut);\nvar backIn = /*#__PURE__*/createBackIn(DEFAULT_OVERSHOOT_STRENGTH);\nvar backOut = /*#__PURE__*/reversed(backIn);\nvar backInOut = /*#__PURE__*/mirrored(backIn);\nvar anticipate = /*#__PURE__*/createAnticipateEasing(DEFAULT_OVERSHOOT_STRENGTH);\nvar BOUNCE_FIRST_THRESHOLD = 4.0 / 11.0;\nvar BOUNCE_SECOND_THRESHOLD = 8.0 / 11.0;\nvar BOUNCE_THIRD_THRESHOLD = 9.0 / 10.0;\nvar ca = 4356.0 / 361.0;\nvar cb = 35442.0 / 1805.0;\nvar cc = 16061.0 / 1805.0;\nvar bounceOut = function (p) {\n    var p2 = p * p;\n    return p < BOUNCE_FIRST_THRESHOLD ? 7.5625 * p2 : p < BOUNCE_SECOND_THRESHOLD ? 9.075 * p2 - 9.9 * p + 3.4 : p < BOUNCE_THIRD_THRESHOLD ? ca * p2 - cb * p + cc : 10.8 * p * p - 20.52 * p + 10.72;\n};\nvar bounceIn = function (p) {\n    return 1.0 - bounceOut(1.0 - p);\n};\nvar bounceInOut = function (p) {\n    return p < 0.5 ? 0.5 * (1.0 - bounceOut(1.0 - p * 2.0)) : 0.5 * bounceOut(p * 2.0 - 1.0) + 0.5;\n};\nvar NEWTON_ITERATIONS = 8;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\nvar K_SPLINE_TABLE_SIZE = 11;\nvar K_SAMPLE_STEP_SIZE = 1.0 / (K_SPLINE_TABLE_SIZE - 1.0);\nvar FLOAT_32_SUPPORTED = typeof Float32Array !== 'undefined';\nvar easing_es_a = function (a1, a2) {\n    return 1.0 - 3.0 * a2 + 3.0 * a1;\n};\nvar easing_es_b = function (a1, a2) {\n    return 3.0 * a2 - 6.0 * a1;\n};\nvar c = function (a1) {\n    return 3.0 * a1;\n};\nvar getSlope = function (t, a1, a2) {\n    return 3.0 * easing_es_a(a1, a2) * t * t + 2.0 * easing_es_b(a1, a2) * t + c(a1);\n};\nvar calcBezier = function (t, a1, a2) {\n    return ((easing_es_a(a1, a2) * t + easing_es_b(a1, a2)) * t + c(a1)) * t;\n};\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\n    var sampleValues = FLOAT_32_SUPPORTED ? new Float32Array(K_SPLINE_TABLE_SIZE) : new Array(K_SPLINE_TABLE_SIZE);\n    var binarySubdivide = function (aX, aA, aB) {\n        var i = 0;\n        var currentX;\n        var currentT;\n        do {\n            currentT = aA + (aB - aA) / 2.0;\n            currentX = calcBezier(currentT, mX1, mX2) - aX;\n            if (currentX > 0.0) {\n                aB = currentT;\n            } else {\n                aA = currentT;\n            }\n        } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n        return currentT;\n    };\n    var newtonRaphsonIterate = function (aX, aGuessT) {\n        var i = 0;\n        var currentSlope = 0;\n        var currentX;\n        for (; i < NEWTON_ITERATIONS; ++i) {\n            currentSlope = getSlope(aGuessT, mX1, mX2);\n            if (currentSlope === 0.0) {\n                return aGuessT;\n            }\n            currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n            aGuessT -= currentX / currentSlope;\n        }\n        return aGuessT;\n    };\n    var calcSampleValues = function () {\n        for (var i = 0; i < K_SPLINE_TABLE_SIZE; ++i) {\n            sampleValues[i] = calcBezier(i * K_SAMPLE_STEP_SIZE, mX1, mX2);\n        }\n    };\n    var getTForX = function (aX) {\n        var intervalStart = 0.0;\n        var currentSample = 1;\n        var lastSample = K_SPLINE_TABLE_SIZE - 1;\n        var dist = 0.0;\n        var guessForT = 0.0;\n        var initialSlope = 0.0;\n        for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n            intervalStart += K_SAMPLE_STEP_SIZE;\n        }\n        --currentSample;\n        dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n        guessForT = intervalStart + dist * K_SAMPLE_STEP_SIZE;\n        initialSlope = getSlope(guessForT, mX1, mX2);\n        if (initialSlope >= NEWTON_MIN_SLOPE) {\n            return newtonRaphsonIterate(aX, guessForT);\n        } else if (initialSlope === 0.0) {\n            return guessForT;\n        } else {\n            return binarySubdivide(aX, intervalStart, intervalStart + K_SAMPLE_STEP_SIZE);\n        }\n    };\n    calcSampleValues();\n    var resolver = function (aX) {\n        var returnValue;\n        if (mX1 === mY1 && mX2 === mY2) {\n            returnValue = aX;\n        } else if (aX === 0) {\n            returnValue = 0;\n        } else if (aX === 1) {\n            returnValue = 1;\n        } else {\n            returnValue = calcBezier(getTForX(aX), mY1, mY2);\n        }\n        return returnValue;\n    };\n    return resolver;\n}\n\n\n\n// CONCATENATED MODULE: ./node_modules/@popmotion/popcorn/dist/popcorn.es.js\n\n\n\n\n\n\nvar zeroPoint = {\r\n    x: 0,\r\n    y: 0,\r\n    z: 0\r\n};\r\nvar isNum = function (v) { return typeof v === 'number'; };\n\nvar radiansToDegrees = (function (radians) { return (radians * 180) / Math.PI; });\n\nvar angle = (function (a, b) {\r\n    if (b === void 0) { b = zeroPoint; }\r\n    return radiansToDegrees(Math.atan2(b.y - a.y, b.x - a.x));\r\n});\n\nvar applyOffset = (function (from, to) {\r\n    var hasReceivedFrom = true;\r\n    if (to === undefined) {\r\n        to = from;\r\n        hasReceivedFrom = false;\r\n    }\r\n    return function (v) {\r\n        if (hasReceivedFrom) {\r\n            return v - from + to;\r\n        }\r\n        else {\r\n            from = v;\r\n            hasReceivedFrom = true;\r\n            return to;\r\n        }\r\n    };\r\n});\n\nvar curryRange = (function (func) { return function (min, max, v) { return (v !== undefined ? func(min, max, v) : function (cv) { return func(min, max, cv); }); }; });\n\nvar popcorn_es_clamp = function (min, max, v) {\r\n    return Math.min(Math.max(v, min), max);\r\n};\r\nvar clamp$1 = curryRange(popcorn_es_clamp);\n\nvar conditional = (function (check, apply) { return function (v) {\r\n    return check(v) ? apply(v) : v;\r\n}; });\n\nvar degreesToRadians = (function (degrees) { return (degrees * Math.PI) / 180; });\n\nvar isPoint = (function (point) {\r\n    return point.hasOwnProperty('x') && point.hasOwnProperty('y');\r\n});\n\nvar isPoint3D = (function (point) {\r\n    return isPoint(point) && point.hasOwnProperty('z');\r\n});\n\nvar distance1D = function (a, b) { return Math.abs(a - b); };\r\nvar distance = (function (a, b) {\r\n    if (b === void 0) { b = zeroPoint; }\r\n    if (isNum(a) && isNum(b)) {\r\n        return distance1D(a, b);\r\n    }\r\n    else if (isPoint(a) && isPoint(b)) {\r\n        var xDelta = distance1D(a.x, b.x);\r\n        var yDelta = distance1D(a.y, b.y);\r\n        var zDelta = isPoint3D(a) && isPoint3D(b) ? distance1D(a.z, b.z) : 0;\r\n        return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2) + Math.pow(zDelta, 2));\r\n    }\r\n    return 0;\r\n});\n\nvar progress = (function (from, to, value) {\r\n    var toFromDifference = to - from;\r\n    return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\r\n});\n\nvar mix = (function (from, to, progress) {\r\n    return -progress * from + progress * to + from;\r\n});\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar popcorn_es_assign = function() {\r\n    popcorn_es_assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return popcorn_es_assign.apply(this, arguments);\r\n};\n\nvar mixLinearColor = function (from, to, v) {\r\n    var fromExpo = from * from;\r\n    var toExpo = to * to;\r\n    return Math.sqrt(Math.max(0, v * (toExpo - fromExpo) + fromExpo));\r\n};\r\nvar colorTypes = [hex, rgba, hsla];\r\nvar getColorType = function (v) {\r\n    return colorTypes.find(function (type) { return type.test(v); });\r\n};\r\nvar notAnimatable = function (color$$1) {\r\n    return \"'\" + color$$1 + \"' is not an animatable color. Use the equivalent color code instead.\";\r\n};\r\nvar mixColor = (function (from, to) {\r\n    var fromColorType = getColorType(from);\r\n    var toColorType = getColorType(to);\r\n    invariant(!!fromColorType, notAnimatable(from));\r\n    invariant(!!toColorType, notAnimatable(to));\r\n    invariant(fromColorType.transform === toColorType.transform, 'Both colors must be hex/RGBA, OR both must be HSLA.');\r\n    var fromColor = fromColorType.parse(from);\r\n    var toColor = toColorType.parse(to);\r\n    var blended = popcorn_es_assign({}, fromColor);\r\n    var mixFunc = fromColorType === hsla ? mix : mixLinearColor;\r\n    return function (v) {\r\n        for (var key in blended) {\r\n            if (key !== 'alpha') {\r\n                blended[key] = mixFunc(fromColor[key], toColor[key], v);\r\n            }\r\n        }\r\n        blended.alpha = mix(fromColor.alpha, toColor.alpha, v);\r\n        return fromColorType.transform(blended);\r\n    };\r\n});\n\nvar combineFunctions = function (a, b) { return function (v) { return b(a(v)); }; };\r\nvar pipe = (function () {\r\n    var transformers = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        transformers[_i] = arguments[_i];\r\n    }\r\n    return transformers.reduce(combineFunctions);\r\n});\n\nfunction getMixer(origin, target) {\r\n    if (isNum(origin)) {\r\n        return function (v) { return mix(origin, target, v); };\r\n    }\r\n    else if (color.test(origin)) {\r\n        return mixColor(origin, target);\r\n    }\r\n    else {\r\n        return mixComplex(origin, target);\r\n    }\r\n}\r\nvar mixArray = function (from, to) {\r\n    var output = from.slice();\r\n    var numValues = output.length;\r\n    var blendValue = from.map(function (fromThis, i) { return getMixer(fromThis, to[i]); });\r\n    return function (v) {\r\n        for (var i = 0; i < numValues; i++) {\r\n            output[i] = blendValue[i](v);\r\n        }\r\n        return output;\r\n    };\r\n};\r\nvar mixObject = function (origin, target) {\r\n    var output = popcorn_es_assign({}, origin, target);\r\n    var blendValue = {};\r\n    for (var key in output) {\r\n        if (origin[key] !== undefined && target[key] !== undefined) {\r\n            blendValue[key] = getMixer(origin[key], target[key]);\r\n        }\r\n    }\r\n    return function (v) {\r\n        for (var key in blendValue) {\r\n            output[key] = blendValue[key](v);\r\n        }\r\n        return output;\r\n    };\r\n};\r\nfunction analyse(value) {\r\n    var parsed = complex.parse(value);\r\n    var numValues = parsed.length;\r\n    var numNumbers = 0;\r\n    var numRGB = 0;\r\n    var numHSL = 0;\r\n    for (var i = 0; i < numValues; i++) {\r\n        if (numNumbers || typeof parsed[i] === 'number') {\r\n            numNumbers++;\r\n        }\r\n        else {\r\n            if (parsed[i].hue !== undefined) {\r\n                numHSL++;\r\n            }\r\n            else {\r\n                numRGB++;\r\n            }\r\n        }\r\n    }\r\n    return { parsed: parsed, numNumbers: numNumbers, numRGB: numRGB, numHSL: numHSL };\r\n}\r\nvar mixComplex = function (origin, target) {\r\n    var template = complex.createTransformer(target);\r\n    var originStats = analyse(origin);\r\n    var targetStats = analyse(target);\r\n    invariant(originStats.numHSL === targetStats.numHSL &&\r\n        originStats.numRGB === targetStats.numRGB &&\r\n        originStats.numNumbers >= targetStats.numNumbers, \"Complex values '\" + origin + \"' and '\" + target + \"' too different to mix. Ensure all colors are of the same type.\");\r\n    return pipe(mixArray(originStats.parsed, targetStats.parsed), template);\r\n};\n\nvar mixNumber = function (from, to) { return function (p) { return mix(from, to, p); }; };\r\nfunction detectMixerFactory(v) {\r\n    if (typeof v === 'number') {\r\n        return mixNumber;\r\n    }\r\n    else if (typeof v === 'string') {\r\n        if (color.test(v)) {\r\n            return mixColor;\r\n        }\r\n        else {\r\n            return mixComplex;\r\n        }\r\n    }\r\n    else if (Array.isArray(v)) {\r\n        return mixArray;\r\n    }\r\n    else if (typeof v === 'object') {\r\n        return mixObject;\r\n    }\r\n}\r\nfunction createMixers(output, ease, customMixer) {\r\n    var mixers = [];\r\n    var mixerFactory = customMixer || detectMixerFactory(output[0]);\r\n    var numMixers = output.length - 1;\r\n    for (var i = 0; i < numMixers; i++) {\r\n        var mixer = mixerFactory(output[i], output[i + 1]);\r\n        if (ease) {\r\n            var easingFunction = Array.isArray(ease) ? ease[i] : ease;\r\n            mixer = pipe(easingFunction, mixer);\r\n        }\r\n        mixers.push(mixer);\r\n    }\r\n    return mixers;\r\n}\r\nfunction fastInterpolate(_a, _b) {\r\n    var from = _a[0], to = _a[1];\r\n    var mixer = _b[0];\r\n    return function (v) { return mixer(progress(from, to, v)); };\r\n}\r\nfunction slowInterpolate(input, mixers) {\r\n    var inputLength = input.length;\r\n    var lastInputIndex = inputLength - 1;\r\n    return function (v) {\r\n        var mixerIndex = 0;\r\n        var foundMixerIndex = false;\r\n        if (v <= input[0]) {\r\n            foundMixerIndex = true;\r\n        }\r\n        else if (v >= input[lastInputIndex]) {\r\n            mixerIndex = lastInputIndex - 1;\r\n            foundMixerIndex = true;\r\n        }\r\n        if (!foundMixerIndex) {\r\n            var i = 1;\r\n            for (; i < inputLength; i++) {\r\n                if (input[i] > v || i === lastInputIndex) {\r\n                    break;\r\n                }\r\n            }\r\n            mixerIndex = i - 1;\r\n        }\r\n        var progressInRange = progress(input[mixerIndex], input[mixerIndex + 1], v);\r\n        return mixers[mixerIndex](progressInRange);\r\n    };\r\n}\r\nfunction interpolate(input, output, _a) {\r\n    var _b = _a === void 0 ? {} : _a, _c = _b.clamp, clamp = _c === void 0 ? true : _c, ease = _b.ease, mixer = _b.mixer;\r\n    var inputLength = input.length;\r\n    invariant(inputLength === output.length, 'Both input and output ranges must be the same length');\r\n    invariant(!ease || !Array.isArray(ease) || ease.length === inputLength - 1, 'Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values.');\r\n    if (input[0] > input[inputLength - 1]) {\r\n        input = [].concat(input);\r\n        output = [].concat(output);\r\n        input.reverse();\r\n        output.reverse();\r\n    }\r\n    var mixers = createMixers(output, ease, mixer);\r\n    var interpolator = inputLength === 2\r\n        ? fastInterpolate(input, mixers)\r\n        : slowInterpolate(input, mixers);\r\n    return clamp\r\n        ? pipe(clamp$1(input[0], input[inputLength - 1]), interpolator)\r\n        : interpolator;\r\n}\n\nvar pointFromVector = (function (origin, angle, distance) {\r\n    angle = degreesToRadians(angle);\r\n    return {\r\n        x: distance * Math.cos(angle) + origin.x,\r\n        y: distance * Math.sin(angle) + origin.y\r\n    };\r\n});\n\nvar toDecimal = (function (num, precision) {\r\n    if (precision === void 0) { precision = 2; }\r\n    precision = Math.pow(10, precision);\r\n    return Math.round(num * precision) / precision;\r\n});\n\nvar smoothFrame = (function (prevValue, nextValue, duration, smoothing) {\r\n    if (smoothing === void 0) { smoothing = 0; }\r\n    return toDecimal(prevValue +\r\n        (duration * (nextValue - prevValue)) / Math.max(smoothing, duration));\r\n});\n\nvar smooth = (function (strength) {\r\n    if (strength === void 0) { strength = 50; }\r\n    var previousValue = 0;\r\n    var lastUpdated = 0;\r\n    return function (v) {\r\n        var currentFramestamp = getFrameData().timestamp;\r\n        var timeDelta = currentFramestamp !== lastUpdated ? currentFramestamp - lastUpdated : 0;\r\n        var newValue = timeDelta\r\n            ? smoothFrame(previousValue, v, timeDelta, strength)\r\n            : previousValue;\r\n        lastUpdated = currentFramestamp;\r\n        previousValue = newValue;\r\n        return newValue;\r\n    };\r\n});\n\nvar snap = (function (points) {\r\n    if (typeof points === 'number') {\r\n        return function (v) { return Math.round(v / points) * points; };\r\n    }\r\n    else {\r\n        var i_1 = 0;\r\n        var numPoints_1 = points.length;\r\n        return function (v) {\r\n            var lastDistance = Math.abs(points[0] - v);\r\n            for (i_1 = 1; i_1 < numPoints_1; i_1++) {\r\n                var point = points[i_1];\r\n                var distance = Math.abs(point - v);\r\n                if (distance === 0)\r\n                    return point;\r\n                if (distance > lastDistance)\r\n                    return points[i_1 - 1];\r\n                if (i_1 === numPoints_1 - 1)\r\n                    return point;\r\n                lastDistance = distance;\r\n            }\r\n        };\r\n    }\r\n});\n\nvar identity = function (v) { return v; };\r\nvar springForce = function (alterDisplacement) {\r\n    if (alterDisplacement === void 0) { alterDisplacement = identity; }\r\n    return curryRange(function (constant, origin, v) {\r\n        var displacement = origin - v;\r\n        var springModifiedDisplacement = -(0 - constant + 1) * (0 - alterDisplacement(Math.abs(displacement)));\r\n        return displacement <= 0\r\n            ? origin + springModifiedDisplacement\r\n            : origin - springModifiedDisplacement;\r\n    });\r\n};\r\nvar springForceLinear = springForce();\r\nvar springForceExpo = springForce(Math.sqrt);\n\nvar velocityPerFrame = (function (xps, frameDuration) {\r\n    return isNum(xps) ? xps / (1000 / frameDuration) : 0;\r\n});\n\nvar velocityPerSecond = (function (velocity, frameDuration) {\r\n    return frameDuration ? velocity * (1000 / frameDuration) : 0;\r\n});\n\nvar wrap = function (min, max, v) {\r\n    var rangeSize = max - min;\r\n    return ((((v - min) % rangeSize) + rangeSize) % rangeSize) + min;\r\n};\r\nvar wrap$1 = curryRange(wrap);\n\nvar clampProgress = clamp$1(0, 1);\r\nvar popcorn_es_steps = (function (steps, direction) {\r\n    if (direction === void 0) { direction = 'end'; }\r\n    return function (progress) {\r\n        progress =\r\n            direction === 'end' ? Math.min(progress, 0.999) : Math.max(progress, 0.001);\r\n        var expanded = progress * steps;\r\n        var rounded = direction === 'end' ? Math.floor(expanded) : Math.ceil(expanded);\r\n        return clampProgress(rounded / steps);\r\n    };\r\n});\n\n\n\n// CONCATENATED MODULE: ./node_modules/stylefire/dist/stylefire.es.js\n\n\n\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nvar stylefire_es_assign = function () {\n    stylefire_es_assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return stylefire_es_assign.apply(this, arguments);\n};\n\nfunction stylefire_es_rest(s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    return t;\n}\n\nvar createStyler = function (_a) {\n    var onRead = _a.onRead,\n        onRender = _a.onRender,\n        _b = _a.uncachedValues,\n        uncachedValues = _b === void 0 ? new Set() : _b,\n        _c = _a.useCache,\n        useCache = _c === void 0 ? true : _c;\n    return function (_a) {\n        if (_a === void 0) {\n            _a = {};\n        }\n        var props = stylefire_es_rest(_a, []);\n        var state = {};\n        var changedValues = [];\n        var hasChanged = false;\n        function setValue(key, value) {\n            if (key.startsWith('--')) {\n                props.hasCSSVariable = true;\n            }\n            var currentValue = state[key];\n            state[key] = value;\n            if (state[key] === currentValue) return;\n            if (changedValues.indexOf(key) === -1) {\n                changedValues.push(key);\n            }\n            if (!hasChanged) {\n                hasChanged = true;\n                framesync_es.render(styler.render);\n            }\n        }\n        var styler = {\n            get: function (key, forceRead) {\n                if (forceRead === void 0) {\n                    forceRead = false;\n                }\n                var useCached = !forceRead && useCache && !uncachedValues.has(key) && state[key] !== undefined;\n                return useCached ? state[key] : onRead(key, props);\n            },\n            set: function (values, value) {\n                if (typeof values === 'string') {\n                    setValue(values, value);\n                } else {\n                    for (var key in values) {\n                        setValue(key, values[key]);\n                    }\n                }\n                return this;\n            },\n            render: function (forceRender) {\n                if (forceRender === void 0) {\n                    forceRender = false;\n                }\n                if (hasChanged || forceRender === true) {\n                    onRender(state, props, changedValues);\n                    hasChanged = false;\n                    changedValues.length = 0;\n                }\n                return this;\n            }\n        };\n        return styler;\n    };\n};\n\nvar CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = '$1-$2';\nvar camelToDash = function (str) {\n    return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\nvar setDomAttrs = function (element, attrs) {\n    for (var key in attrs) {\n        if (attrs.hasOwnProperty(key)) {\n            element.setAttribute(key, attrs[key]);\n        }\n    }\n};\n\nvar camelCache = /*#__PURE__*/new Map();\nvar dashCache = /*#__PURE__*/new Map();\nvar prefixes = ['Webkit', 'Moz', 'O', 'ms', ''];\nvar numPrefixes = prefixes.length;\nvar isBrowser = typeof document !== 'undefined';\nvar testElement;\nvar setDashPrefix = function (key, prefixed) {\n    return dashCache.set(key, camelToDash(prefixed));\n};\nvar testPrefix = function (key) {\n    testElement = testElement || document.createElement('div');\n    for (var i = 0; i < numPrefixes; i++) {\n        var prefix = prefixes[i];\n        var noPrefix = prefix === '';\n        var prefixedPropertyName = noPrefix ? key : prefix + key.charAt(0).toUpperCase() + key.slice(1);\n        if (prefixedPropertyName in testElement.style || noPrefix) {\n            camelCache.set(key, prefixedPropertyName);\n            setDashPrefix(key, \"\" + (noPrefix ? '' : '-') + camelToDash(prefixedPropertyName));\n        }\n    }\n};\nvar setServerProperty = function (key) {\n    return setDashPrefix(key, key);\n};\nvar prefixer = function (key, asDashCase) {\n    if (asDashCase === void 0) {\n        asDashCase = false;\n    }\n    var cache = asDashCase ? dashCache : camelCache;\n    if (!cache.has(key)) isBrowser ? testPrefix(key) : setServerProperty(key);\n    return cache.get(key) || key;\n};\n\nvar axes = ['', 'X', 'Y', 'Z'];\nvar order = ['scale', 'rotate', 'skew', 'transformPerspective'];\nvar transformProps = /*#__PURE__*/order.reduce(function (acc, key) {\n    return axes.reduce(function (axesAcc, axesKey) {\n        axesAcc.push(key + axesKey);\n        return axesAcc;\n    }, acc);\n}, ['x', 'y', 'z']);\nvar transformPropDictionary = /*#__PURE__*/transformProps.reduce(function (dict, key) {\n    dict[key] = true;\n    return dict;\n}, {});\nfunction isTransformProp(key) {\n    return transformPropDictionary[key] === true;\n}\nfunction sortTransformProps(a, b) {\n    return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\nvar transformOriginProps = /*#__PURE__*/new Set(['originX', 'originY', 'originZ']);\nfunction isTransformOriginProp(key) {\n    return transformOriginProps.has(key);\n}\n\nvar rounded = /*#__PURE__*/stylefire_es_assign({}, number, { transform: Math.round });\nvar valueTypes = {\n    color: color,\n    backgroundColor: color,\n    outlineColor: color,\n    fill: color,\n    stroke: color,\n    borderColor: color,\n    borderTopColor: color,\n    borderRightColor: color,\n    borderBottomColor: color,\n    borderLeftColor: color,\n    borderWidth: px,\n    borderTopWidth: px,\n    borderRightWidth: px,\n    borderBottomWidth: px,\n    borderLeftWidth: px,\n    borderRadius: px,\n    radius: px,\n    borderTopLeftRadius: px,\n    borderTopRightRadius: px,\n    borderBottomRightRadius: px,\n    borderBottomLeftRadius: px,\n    width: px,\n    maxWidth: px,\n    height: px,\n    maxHeight: px,\n    size: px,\n    top: px,\n    right: px,\n    bottom: px,\n    left: px,\n    padding: px,\n    paddingTop: px,\n    paddingRight: px,\n    paddingBottom: px,\n    paddingLeft: px,\n    margin: px,\n    marginTop: px,\n    marginRight: px,\n    marginBottom: px,\n    marginLeft: px,\n    rotate: degrees,\n    rotateX: degrees,\n    rotateY: degrees,\n    rotateZ: degrees,\n    scale: style_value_types_es_scale,\n    scaleX: style_value_types_es_scale,\n    scaleY: style_value_types_es_scale,\n    scaleZ: style_value_types_es_scale,\n    skew: degrees,\n    skewX: degrees,\n    skewY: degrees,\n    distance: px,\n    x: px,\n    y: px,\n    z: px,\n    perspective: px,\n    opacity: alpha,\n    originX: progressPercentage,\n    originY: progressPercentage,\n    originZ: px,\n    zIndex: rounded\n};\nvar getValueType = function (key) {\n    return valueTypes[key];\n};\nvar getValueAsType = function (value, type) {\n    return type && typeof value === 'number' ? type.transform(value) : value;\n};\n\nvar SCROLL_LEFT = 'scrollLeft';\nvar SCROLL_TOP = 'scrollTop';\nvar scrollKeys = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP]);\n\nvar blacklist = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP, 'transform']);\nvar translateAlias = {\n    x: 'translateX',\n    y: 'translateY',\n    z: 'translateZ'\n};\nfunction isCustomTemplate(v) {\n    return typeof v === 'function';\n}\nfunction buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration) {\n    var transformString = '';\n    var transformHasZ = false;\n    transformKeys.sort(sortTransformProps);\n    var numTransformKeys = transformKeys.length;\n    for (var i = 0; i < numTransformKeys; i++) {\n        var key = transformKeys[i];\n        transformString += (translateAlias[key] || key) + \"(\" + transform[key] + \") \";\n        transformHasZ = key === 'z' ? true : transformHasZ;\n    }\n    if (!transformHasZ && enableHardwareAcceleration) {\n        transformString += 'translateZ(0)';\n    } else {\n        transformString = transformString.trim();\n    }\n    if (isCustomTemplate(state.transform)) {\n        transformString = state.transform(transform, transformString);\n    } else if (transformIsDefault) {\n        transformString = 'none';\n    }\n    return transformString;\n}\nfunction buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, isDashCase) {\n    if (enableHardwareAcceleration === void 0) {\n        enableHardwareAcceleration = true;\n    }\n    if (styles === void 0) {\n        styles = {};\n    }\n    if (transform === void 0) {\n        transform = {};\n    }\n    if (transformOrigin === void 0) {\n        transformOrigin = {};\n    }\n    if (transformKeys === void 0) {\n        transformKeys = [];\n    }\n    if (isDashCase === void 0) {\n        isDashCase = false;\n    }\n    var transformIsDefault = true;\n    var hasTransform = false;\n    var hasTransformOrigin = false;\n    for (var key in state) {\n        var value = state[key];\n        var valueType = getValueType(key);\n        var valueAsType = getValueAsType(value, valueType);\n        if (isTransformProp(key)) {\n            hasTransform = true;\n            transform[key] = valueAsType;\n            transformKeys.push(key);\n            if (transformIsDefault) {\n                if (valueType.default && value !== valueType.default || !valueType.default && value !== 0) {\n                    transformIsDefault = false;\n                }\n            }\n        } else if (isTransformOriginProp(key)) {\n            transformOrigin[key] = valueAsType;\n            hasTransformOrigin = true;\n        } else if (!blacklist.has(key) || !isCustomTemplate(valueAsType)) {\n            styles[prefixer(key, isDashCase)] = valueAsType;\n        }\n    }\n    if (hasTransform || typeof state.transform === 'function') {\n        styles.transform = buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration);\n    }\n    if (hasTransformOrigin) {\n        styles.transformOrigin = (transformOrigin.originX || 0) + \" \" + (transformOrigin.originY || 0) + \" \" + (transformOrigin.originZ || 0);\n    }\n    return styles;\n}\nfunction createStyleBuilder(enableHardwareAcceleration) {\n    if (enableHardwareAcceleration === void 0) {\n        enableHardwareAcceleration = true;\n    }\n    var styles = {};\n    var transform = {};\n    var transformOrigin = {};\n    var transformKeys = [];\n    return function (state) {\n        transformKeys.length = 0;\n        buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, true);\n        return styles;\n    };\n}\n\nfunction stylefire_es_onRead(key, options) {\n    var element = options.element,\n        preparseOutput = options.preparseOutput;\n    var defaultValueType = getValueType(key);\n    if (isTransformProp(key)) {\n        return defaultValueType ? defaultValueType.default || 0 : 0;\n    } else if (scrollKeys.has(key)) {\n        return element[key];\n    } else {\n        var domValue = window.getComputedStyle(element, null).getPropertyValue(prefixer(key, true)) || 0;\n        return preparseOutput && defaultValueType && defaultValueType.test(domValue) && defaultValueType.parse ? defaultValueType.parse(domValue) : domValue;\n    }\n}\nfunction stylefire_es_onRender(state, _a, changedValues) {\n    var element = _a.element,\n        buildStyles = _a.buildStyles,\n        hasCSSVariable = _a.hasCSSVariable;\n    Object.assign(element.style, buildStyles(state));\n    if (hasCSSVariable) {\n        var numChangedValues = changedValues.length;\n        for (var i = 0; i < numChangedValues; i++) {\n            var key = changedValues[i];\n            if (key.startsWith('--')) {\n                element.style.setProperty(key, state[key]);\n            }\n        }\n    }\n    if (changedValues.indexOf(SCROLL_LEFT) !== -1) {\n        element[SCROLL_LEFT] = state[SCROLL_LEFT];\n    }\n    if (changedValues.indexOf(SCROLL_TOP) !== -1) {\n        element[SCROLL_TOP] = state[SCROLL_TOP];\n    }\n}\nvar cssStyler = /*#__PURE__*/createStyler({\n    onRead: stylefire_es_onRead,\n    onRender: stylefire_es_onRender,\n    uncachedValues: scrollKeys\n});\nfunction createCssStyler(element, _a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var enableHardwareAcceleration = _a.enableHardwareAcceleration,\n        props = stylefire_es_rest(_a, [\"enableHardwareAcceleration\"]);\n    return cssStyler(stylefire_es_assign({ element: element, buildStyles: createStyleBuilder(enableHardwareAcceleration), preparseOutput: true }, props));\n}\n\nvar camelCaseAttributes = /*#__PURE__*/new Set(['baseFrequency', 'diffuseConstant', 'kernelMatrix', 'kernelUnitLength', 'keySplines', 'keyTimes', 'limitingConeAngle', 'markerHeight', 'markerWidth', 'numOctaves', 'targetX', 'targetY', 'surfaceScale', 'specularConstant', 'specularExponent', 'stdDeviation', 'tableValues']);\n\nvar ZERO_NOT_ZERO = 0.0000001;\nvar progressToPixels = function (progress, length) {\n    return progress * length + 'px';\n};\nvar build = function (state, dimensions, isPath, pathLength) {\n    var hasTransform = false;\n    var hasDashArray = false;\n    var props = {};\n    var dashArrayStyles = isPath ? {\n        pathLength: '0',\n        pathSpacing: \"\" + pathLength\n    } : undefined;\n    var scale$$1 = state.scale !== undefined ? state.scale || ZERO_NOT_ZERO : state.scaleX || 1;\n    var scaleY = state.scaleY !== undefined ? state.scaleY || ZERO_NOT_ZERO : scale$$1 || 1;\n    var transformOriginX = dimensions.width * (state.originX || 50) + dimensions.x;\n    var transformOriginY = dimensions.height * (state.originY || 50) + dimensions.y;\n    var scaleTransformX = -transformOriginX * (scale$$1 * 1);\n    var scaleTransformY = -transformOriginY * (scaleY * 1);\n    var scaleReplaceX = transformOriginX / scale$$1;\n    var scaleReplaceY = transformOriginY / scaleY;\n    var transform = {\n        translate: \"translate(\" + state.x + \", \" + state.y + \") \",\n        scale: \"translate(\" + scaleTransformX + \", \" + scaleTransformY + \") scale(\" + scale$$1 + \", \" + scaleY + \") translate(\" + scaleReplaceX + \", \" + scaleReplaceY + \") \",\n        rotate: \"rotate(\" + state.rotate + \", \" + transformOriginX + \", \" + transformOriginY + \") \",\n        skewX: \"skewX(\" + state.skewX + \") \",\n        skewY: \"skewY(\" + state.skewY + \") \"\n    };\n    for (var key in state) {\n        if (state.hasOwnProperty(key)) {\n            var value = state[key];\n            if (isTransformProp(key)) {\n                hasTransform = true;\n            } else if (isPath && (key === 'pathLength' || key === 'pathSpacing') && typeof value === 'number') {\n                hasDashArray = true;\n                dashArrayStyles[key] = progressToPixels(value, pathLength);\n            } else if (isPath && key === 'pathOffset') {\n                props['stroke-dashoffset'] = progressToPixels(-value, pathLength);\n            } else {\n                var attrKey = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n                props[attrKey] = value;\n            }\n        }\n    }\n    if (hasDashArray) {\n        props['stroke-dasharray'] = dashArrayStyles.pathLength + ' ' + dashArrayStyles.pathSpacing;\n    }\n    if (hasTransform) {\n        props.transform = '';\n        for (var key in transform) {\n            if (transform.hasOwnProperty(key)) {\n                var defaultValue = key === 'scale' ? '1' : '0';\n                props.transform += transform[key].replace(/undefined/g, defaultValue);\n            }\n        }\n    }\n    return props;\n};\n\nvar stylefire_es_int = /*#__PURE__*/stylefire_es_assign({}, number, { transform: Math.round });\nvar valueTypes$1 = {\n    fill: color,\n    stroke: color,\n    scale: style_value_types_es_scale,\n    scaleX: style_value_types_es_scale,\n    scaleY: style_value_types_es_scale,\n    opacity: alpha,\n    fillOpacity: alpha,\n    strokeOpacity: alpha,\n    numOctaves: stylefire_es_int\n};\nvar getValueType$1 = function (key) {\n    return valueTypes$1[key];\n};\n\nvar getDimensions = function (element) {\n    return typeof element.getBBox === 'function' ? element.getBBox() : element.getBoundingClientRect();\n};\nvar getSVGElementDimensions = function (element) {\n    try {\n        return getDimensions(element);\n    } catch (e) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n};\n\nvar svgStyler = /*#__PURE__*/createStyler({\n    onRead: function (key, _a) {\n        var element = _a.element;\n        if (!isTransformProp(key)) {\n            return element.getAttribute(key);\n        } else {\n            var valueType = getValueType$1(key);\n            return valueType ? valueType.default : 0;\n        }\n    },\n    onRender: function (state, _a) {\n        var dimensions = _a.dimensions,\n            element = _a.element,\n            isPath = _a.isPath,\n            pathLength = _a.pathLength;\n        setDomAttrs(element, build(state, dimensions, isPath, pathLength));\n    }\n});\nvar svg = function (element) {\n    var dimensions = getSVGElementDimensions(element);\n    var props = {\n        element: element,\n        dimensions: dimensions,\n        isPath: false\n    };\n    if (element.tagName === 'path') {\n        props.isPath = true;\n        props.pathLength = element.getTotalLength();\n    }\n    return svgStyler(props);\n};\n\nvar viewport = /*#__PURE__*/createStyler({\n    useCache: false,\n    onRead: function (key) {\n        return key === 'scrollTop' ? window.pageYOffset : window.pageXOffset;\n    },\n    onRender: function (_a) {\n        var _b = _a.scrollTop,\n            scrollTop = _b === void 0 ? 0 : _b,\n            _c = _a.scrollLeft,\n            scrollLeft = _c === void 0 ? 0 : _c;\n        return window.scrollTo(scrollLeft, scrollTop);\n    }\n});\n\nvar cache = /*#__PURE__*/new WeakMap();\nvar createDOMStyler = function (node, props) {\n    var styler;\n    if (node instanceof HTMLElement) {\n        styler = createCssStyler(node, props);\n    } else if (node instanceof SVGElement) {\n        styler = svg(node);\n    } else if (node === window) {\n        styler = viewport(node);\n    }\n    invariant(styler !== undefined, 'No valid node provided. Node must be HTMLElement, SVGElement or window.');\n    cache.set(node, styler);\n    return styler;\n};\nvar getStyler = function (node, props) {\n    return cache.has(node) ? cache.get(node) : createDOMStyler(node, props);\n};\nfunction index(nodeOrSelector, props) {\n    var node = typeof nodeOrSelector === 'string' ? document.querySelector(nodeOrSelector) : nodeOrSelector;\n    return getStyler(node, props);\n}\n\n/* harmony default export */ var stylefire_es = (index);\n\n\n// CONCATENATED MODULE: ./node_modules/popmotion/dist/popmotion.es.js\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar popmotion_es_Chainable = /*#__PURE__*/function () {\n    function Chainable(props) {\n        if (props === void 0) {\n            props = {};\n        }\n        this.props = props;\n    }\n    Chainable.prototype.applyMiddleware = function (middleware) {\n        return this.create(__assign({}, this.props, { middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware] }));\n    };\n    Chainable.prototype.pipe = function () {\n        var funcs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            funcs[_i] = arguments[_i];\n        }\n        var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return update(pipedUpdate(v));\n            };\n        });\n    };\n    Chainable.prototype.while = function (predicate) {\n        return this.applyMiddleware(function (update, complete) {\n            return function (v) {\n                return predicate(v) ? update(v) : complete();\n            };\n        });\n    };\n    Chainable.prototype.filter = function (predicate) {\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return predicate(v) && update(v);\n            };\n        });\n    };\n    return Chainable;\n}();\n\nvar Observer = /*#__PURE__*/function () {\n    function Observer(_a, observer) {\n        var middleware = _a.middleware,\n            onComplete = _a.onComplete;\n        var _this = this;\n        this.isActive = true;\n        this.update = function (v) {\n            if (_this.observer.update) _this.updateObserver(v);\n        };\n        this.complete = function () {\n            if (_this.observer.complete && _this.isActive) _this.observer.complete();\n            if (_this.onComplete) _this.onComplete();\n            _this.isActive = false;\n        };\n        this.error = function (err) {\n            if (_this.observer.error && _this.isActive) _this.observer.error(err);\n            _this.isActive = false;\n        };\n        this.observer = observer;\n        this.updateObserver = function (v) {\n            return observer.update(v);\n        };\n        this.onComplete = onComplete;\n        if (observer.update && middleware && middleware.length) {\n            middleware.forEach(function (m) {\n                return _this.updateObserver = m(_this.updateObserver, _this.complete);\n            });\n        }\n    }\n    return Observer;\n}();\nvar createObserver = function (observerCandidate, _a, onComplete) {\n    var middleware = _a.middleware;\n    if (typeof observerCandidate === 'function') {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, { update: observerCandidate });\n    } else {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, observerCandidate);\n    }\n};\n\nvar popmotion_es_Action = /*#__PURE__*/function (_super) {\n    __extends(Action, _super);\n    function Action() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Action.prototype.create = function (props) {\n        return new Action(props);\n    };\n    Action.prototype.start = function (observerCandidate) {\n        if (observerCandidate === void 0) {\n            observerCandidate = {};\n        }\n        var isComplete = false;\n        var subscription = {\n            stop: function () {\n                return undefined;\n            }\n        };\n        var _a = this.props,\n            init = _a.init,\n            observerProps = __rest(_a, [\"init\"]);\n        var observer = createObserver(observerCandidate, observerProps, function () {\n            isComplete = true;\n            subscription.stop();\n        });\n        var api = init(observer);\n        subscription = api ? __assign({}, subscription, api) : subscription;\n        if (observerCandidate.registerParent) {\n            observerCandidate.registerParent(subscription);\n        }\n        if (isComplete) subscription.stop();\n        return subscription;\n    };\n    return Action;\n}(popmotion_es_Chainable);\nvar popmotion_es_action = function (init) {\n    return new popmotion_es_Action({ init: init });\n};\n\nvar popmotion_es_BaseMulticast = /*#__PURE__*/function (_super) {\n    __extends(BaseMulticast, _super);\n    function BaseMulticast() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.subscribers = [];\n        return _this;\n    }\n    BaseMulticast.prototype.complete = function () {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.complete();\n        });\n    };\n    BaseMulticast.prototype.error = function (err) {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.error(err);\n        });\n    };\n    BaseMulticast.prototype.update = function (v) {\n        for (var i = 0; i < this.subscribers.length; i++) {\n            this.subscribers[i].update(v);\n        }\n    };\n    BaseMulticast.prototype.subscribe = function (observerCandidate) {\n        var _this = this;\n        var observer = createObserver(observerCandidate, this.props);\n        this.subscribers.push(observer);\n        var subscription = {\n            unsubscribe: function () {\n                var index = _this.subscribers.indexOf(observer);\n                if (index !== -1) _this.subscribers.splice(index, 1);\n            }\n        };\n        return subscription;\n    };\n    BaseMulticast.prototype.stop = function () {\n        if (this.parent) this.parent.stop();\n    };\n    BaseMulticast.prototype.registerParent = function (subscription) {\n        this.stop();\n        this.parent = subscription;\n    };\n    return BaseMulticast;\n}(popmotion_es_Chainable);\n\nvar popmotion_es_Multicast = /*#__PURE__*/function (_super) {\n    __extends(Multicast, _super);\n    function Multicast() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Multicast.prototype.create = function (props) {\n        return new Multicast(props);\n    };\n    return Multicast;\n}(popmotion_es_BaseMulticast);\nvar multicast = function () {\n    return new popmotion_es_Multicast();\n};\n\nvar stepProgress = function (steps, progress$$1) {\n    var segment = 1 / (steps - 1);\n    var subsegment = 1 / (2 * (steps - 1));\n    var percentProgressOfTarget = Math.min(progress$$1, 1);\n    var subsegmentProgressOfTarget = percentProgressOfTarget / subsegment;\n    var segmentProgressOfTarget = Math.floor((subsegmentProgressOfTarget + 1) / 2);\n    return segmentProgressOfTarget * segment;\n};\n\nvar calc = /*#__PURE__*/Object.freeze({\n    angle: angle,\n    degreesToRadians: degreesToRadians,\n    distance: distance,\n    isPoint3D: isPoint3D,\n    isPoint: isPoint,\n    dilate: mix,\n    getValueFromProgress: mix,\n    pointFromAngleAndDistance: pointFromVector,\n    getProgressFromValue: progress,\n    radiansToDegrees: radiansToDegrees,\n    smooth: smoothFrame,\n    speedPerFrame: velocityPerFrame,\n    speedPerSecond: velocityPerSecond,\n    stepProgress: stepProgress\n});\n\nvar isValueList = function (v) {\n    return Array.isArray(v);\n};\nvar isSingleValue = function (v) {\n    var typeOfV = typeof v;\n    return typeOfV === 'string' || typeOfV === 'number';\n};\nvar popmotion_es_ValueReaction = /*#__PURE__*/function (_super) {\n    __extends(ValueReaction, _super);\n    function ValueReaction(props) {\n        var _this = _super.call(this, props) || this;\n        _this.scheduleVelocityCheck = function () {\n            return framesync_es.postRender(_this.velocityCheck);\n        };\n        _this.velocityCheck = function (_a) {\n            var timestamp = _a.timestamp;\n            if (timestamp !== _this.lastUpdated) {\n                _this.prev = _this.current;\n            }\n        };\n        _this.prev = _this.current = props.value || 0;\n        if (isSingleValue(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = v;\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getSingleVelocity(_this.current, _this.prev);\n            };\n        } else if (isValueList(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = v.slice();\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getListVelocity();\n            };\n        } else {\n            _this.updateCurrent = function (v) {\n                _this.current = {};\n                for (var key in v) {\n                    if (v.hasOwnProperty(key)) {\n                        _this.current[key] = v[key];\n                    }\n                }\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getMapVelocity();\n            };\n        }\n        if (props.initialSubscription) _this.subscribe(props.initialSubscription);\n        return _this;\n    }\n    ValueReaction.prototype.create = function (props) {\n        return new ValueReaction(props);\n    };\n    ValueReaction.prototype.get = function () {\n        return this.current;\n    };\n    ValueReaction.prototype.getVelocity = function () {\n        return this.getVelocityOfCurrent();\n    };\n    ValueReaction.prototype.update = function (v) {\n        _super.prototype.update.call(this, v);\n        this.prev = this.current;\n        this.updateCurrent(v);\n        var _a = getFrameData(),\n            delta = _a.delta,\n            timestamp = _a.timestamp;\n        this.timeDelta = delta;\n        this.lastUpdated = timestamp;\n        framesync_es.postRender(this.scheduleVelocityCheck);\n    };\n    ValueReaction.prototype.subscribe = function (observerCandidate) {\n        var sub = _super.prototype.subscribe.call(this, observerCandidate);\n        this.subscribers[this.subscribers.length - 1].update(this.current);\n        return sub;\n    };\n    ValueReaction.prototype.getSingleVelocity = function (current, prev) {\n        return typeof current === 'number' && typeof prev === 'number' ? velocityPerSecond(current - prev, this.timeDelta) : velocityPerSecond(parseFloat(current) - parseFloat(prev), this.timeDelta) || 0;\n    };\n    ValueReaction.prototype.getListVelocity = function () {\n        var _this = this;\n        return this.current.map(function (c, i) {\n            return _this.getSingleVelocity(c, _this.prev[i]);\n        });\n    };\n    ValueReaction.prototype.getMapVelocity = function () {\n        var velocity = {};\n        for (var key in this.current) {\n            if (this.current.hasOwnProperty(key)) {\n                velocity[key] = this.getSingleVelocity(this.current[key], this.prev[key]);\n            }\n        }\n        return velocity;\n    };\n    return ValueReaction;\n}(popmotion_es_BaseMulticast);\nvar popmotion_es_value = function (value, initialSubscription) {\n    return new popmotion_es_ValueReaction({ value: value, initialSubscription: initialSubscription });\n};\n\nvar multi = function (_a) {\n    var getCount = _a.getCount,\n        getFirst = _a.getFirst,\n        getOutput = _a.getOutput,\n        mapApi = _a.mapApi,\n        setProp = _a.setProp,\n        startActions = _a.startActions;\n    return function (actions) {\n        return popmotion_es_action(function (_a) {\n            var update = _a.update,\n                complete = _a.complete,\n                error = _a.error;\n            var numActions = getCount(actions);\n            var output = getOutput();\n            var updateOutput = function () {\n                return update(output);\n            };\n            var numCompletedActions = 0;\n            var subs = startActions(actions, function (a, name) {\n                var hasCompleted = false;\n                return a.start({\n                    complete: function () {\n                        if (!hasCompleted) {\n                            hasCompleted = true;\n                            numCompletedActions++;\n                            if (numCompletedActions === numActions) framesync_es.update(complete);\n                        }\n                    },\n                    error: error,\n                    update: function (v) {\n                        setProp(output, name, v);\n                        framesync_es.update(updateOutput, false, true);\n                    }\n                });\n            });\n            return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n                api[methodName] = mapApi(subs, methodName);\n                return api;\n            }, {});\n        });\n    };\n};\n\nvar composite = /*#__PURE__*/multi({\n    getOutput: function () {\n        return {};\n    },\n    getCount: function (subs) {\n        return Object.keys(subs).length;\n    },\n    getFirst: function (subs) {\n        return subs[Object.keys(subs)[0]];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return Object.keys(subs).reduce(function (output, propKey) {\n                var _a;\n                if (subs[propKey][methodName]) {\n                    args[0] && args[0][propKey] !== undefined ? output[propKey] = subs[propKey][methodName](args[0][propKey]) : output[propKey] = (_a = subs[propKey])[methodName].apply(_a, args);\n                }\n                return output;\n            }, {});\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return Object.keys(actions).reduce(function (subs, key) {\n            subs[key] = starter(actions[key], key);\n            return subs;\n        }, {});\n    }\n});\n\nvar parallel = /*#__PURE__*/multi({\n    getOutput: function () {\n        return [];\n    },\n    getCount: function (subs) {\n        return subs.length;\n    },\n    getFirst: function (subs) {\n        return subs[0];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return subs.map(function (sub, i) {\n                if (sub[methodName]) {\n                    return Array.isArray(args[0]) ? sub[methodName](args[0][i]) : sub[methodName].apply(sub, args);\n                }\n            });\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return actions.map(function (action, i) {\n            return starter(action, i);\n        });\n    }\n});\nvar parallel$1 = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return parallel(actions);\n};\n\nvar createVectorTests = function (typeTests) {\n    var testNames = Object.keys(typeTests);\n    var isVectorProp = function (prop, key) {\n        return prop !== undefined && !typeTests[key](prop);\n    };\n    var getVectorKeys = function (props) {\n        return testNames.reduce(function (vectorKeys, key) {\n            if (isVectorProp(props[key], key)) vectorKeys.push(key);\n            return vectorKeys;\n        }, []);\n    };\n    var testVectorProps = function (props) {\n        return props && testNames.some(function (key) {\n            return isVectorProp(props[key], key);\n        });\n    };\n    return { getVectorKeys: getVectorKeys, testVectorProps: testVectorProps };\n};\nvar unitTypes = [px, percent, degrees, vh, vw];\nvar findUnitType = function (prop) {\n    return unitTypes.find(function (type) {\n        return type.test(prop);\n    });\n};\nvar isUnitProp = function (prop) {\n    return Boolean(findUnitType(prop));\n};\nvar createAction = function (action, props) {\n    return action(props);\n};\nvar reduceArrayValue = function (i) {\n    return function (props, key) {\n        props[key] = props[key][i];\n        return props;\n    };\n};\nvar createArrayAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionList = props[firstVectorKey].map(function (v, i) {\n        var childActionProps = vectorKeys.reduce(reduceArrayValue(i), __assign({}, props));\n        return getActionCreator(v)(action, childActionProps);\n    });\n    return parallel$1.apply(void 0, actionList);\n};\nvar reduceObjectValue = function (key) {\n    return function (props, propKey) {\n        props[propKey] = props[propKey][key];\n        return props;\n    };\n};\nvar createObjectAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionMap = Object.keys(props[firstVectorKey]).reduce(function (map, key) {\n        var childActionProps = vectorKeys.reduce(reduceObjectValue(key), __assign({}, props));\n        map[key] = getActionCreator(props[firstVectorKey][key])(action, childActionProps);\n        return map;\n    }, {});\n    return composite(actionMap);\n};\nvar createUnitAction = function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n    var unitType = findUnitType(from) || findUnitType(to);\n    var transform = unitType.transform,\n        parse = unitType.parse;\n    return action(__assign({}, props, { from: typeof from === 'string' ? parse(from) : from, to: typeof to === 'string' ? parse(to) : to })).pipe(transform);\n};\nvar createMixerAction = function (mixer) {\n    return function (action, _a) {\n        var from = _a.from,\n            to = _a.to,\n            props = __rest(_a, [\"from\", \"to\"]);\n        return action(__assign({}, props, { from: 0, to: 1 })).pipe(mixer(from, to));\n    };\n};\nvar createColorAction = /*#__PURE__*/createMixerAction(mixColor);\nvar createComplexAction = /*#__PURE__*/createMixerAction(mixComplex);\nvar createVectorAction = function (action, typeTests) {\n    var _a = createVectorTests(typeTests),\n        testVectorProps = _a.testVectorProps,\n        getVectorKeys = _a.getVectorKeys;\n    var vectorAction = function (props) {\n        var isVector = testVectorProps(props);\n        if (!isVector) return action(props);\n        var vectorKeys = getVectorKeys(props);\n        var testKey = vectorKeys[0];\n        var testProp = props[testKey];\n        return getActionCreator(testProp)(action, props, vectorKeys);\n    };\n    return vectorAction;\n};\nvar getActionCreator = function (prop) {\n    if (typeof prop === 'number') {\n        return createAction;\n    } else if (Array.isArray(prop)) {\n        return createArrayAction;\n    } else if (isUnitProp(prop)) {\n        return createUnitAction;\n    } else if (color.test(prop)) {\n        return createColorAction;\n    } else if (complex.test(prop)) {\n        return createComplexAction;\n    } else if (typeof prop === 'object') {\n        return createObjectAction;\n    } else {\n        return createAction;\n    }\n};\n\nvar decay = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return popmotion_es_action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0 : _b,\n            _c = props.from,\n            from = _c === void 0 ? 0 : _c,\n            _d = props.power,\n            power = _d === void 0 ? 0.8 : _d,\n            _e = props.timeConstant,\n            timeConstant = _e === void 0 ? 350 : _e,\n            _f = props.restDelta,\n            restDelta = _f === void 0 ? 0.5 : _f,\n            modifyTarget = props.modifyTarget;\n        var elapsed = 0;\n        var amplitude = power * velocity;\n        var idealTarget = Math.round(from + amplitude);\n        var target = typeof modifyTarget === 'undefined' ? idealTarget : modifyTarget(idealTarget);\n        var process = framesync_es.update(function (_a) {\n            var frameDelta = _a.delta;\n            elapsed += frameDelta;\n            var delta = -amplitude * Math.exp(-elapsed / timeConstant);\n            var isMoving = delta > restDelta || delta < -restDelta;\n            var current = isMoving ? target + delta : target;\n            update(current);\n            if (!isMoving) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorDecay = /*#__PURE__*/createVectorAction(decay, {\n    from: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    },\n    velocity: number.test\n});\n\nvar spring = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return popmotion_es_action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0.0 : _b;\n        var _c = props.from,\n            from = _c === void 0 ? 0.0 : _c,\n            _d = props.to,\n            to = _d === void 0 ? 0.0 : _d,\n            _e = props.stiffness,\n            stiffness = _e === void 0 ? 100 : _e,\n            _f = props.damping,\n            damping = _f === void 0 ? 10 : _f,\n            _g = props.mass,\n            mass = _g === void 0 ? 1.0 : _g,\n            _h = props.restSpeed,\n            restSpeed = _h === void 0 ? 0.01 : _h,\n            _j = props.restDelta,\n            restDelta = _j === void 0 ? 0.01 : _j;\n        var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n        var t = 0;\n        var delta = to - from;\n        var position = from;\n        var prevPosition = position;\n        var process = framesync_es.update(function (_a) {\n            var timeDelta = _a.delta;\n            t += timeDelta;\n            var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n            var angularFreq = Math.sqrt(stiffness / mass) / 1000;\n            prevPosition = position;\n            if (dampingRatio < 1) {\n                var envelope = Math.exp(-dampingRatio * angularFreq * t);\n                var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n                position = to - envelope * ((initialVelocity + dampingRatio * angularFreq * delta) / expoDecay * Math.sin(expoDecay * t) + delta * Math.cos(expoDecay * t));\n            } else {\n                var envelope = Math.exp(-angularFreq * t);\n                position = to - envelope * (delta + (initialVelocity + angularFreq * delta) * t);\n            }\n            velocity = velocityPerSecond(position - prevPosition, timeDelta);\n            var isBelowVelocityThreshold = Math.abs(velocity) <= restSpeed;\n            var isBelowDisplacementThreshold = Math.abs(to - position) <= restDelta;\n            if (isBelowVelocityThreshold && isBelowDisplacementThreshold) {\n                position = to;\n                update(position);\n                cancelSync.update(process);\n                complete();\n            } else {\n                update(position);\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorSpring = /*#__PURE__*/createVectorAction(spring, {\n    from: number.test,\n    to: number.test,\n    stiffness: number.test,\n    damping: number.test,\n    mass: number.test,\n    velocity: number.test\n});\n\nvar inertia = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.velocity,\n        velocity = _c === void 0 ? 0 : _c,\n        min = _a.min,\n        max = _a.max,\n        _d = _a.power,\n        power = _d === void 0 ? 0.8 : _d,\n        _e = _a.timeConstant,\n        timeConstant = _e === void 0 ? 700 : _e,\n        _f = _a.bounceStiffness,\n        bounceStiffness = _f === void 0 ? 500 : _f,\n        _g = _a.bounceDamping,\n        bounceDamping = _g === void 0 ? 10 : _g,\n        _h = _a.restDelta,\n        restDelta = _h === void 0 ? 1 : _h,\n        modifyTarget = _a.modifyTarget;\n    return popmotion_es_action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var current = popmotion_es_value(from);\n        var activeAnimation;\n        var isSpring = false;\n        var isLessThanMin = function (v) {\n            return min !== undefined && v <= min;\n        };\n        var isMoreThanMax = function (v) {\n            return max !== undefined && v >= max;\n        };\n        var isOutOfBounds = function (v) {\n            return isLessThanMin(v) || isMoreThanMax(v);\n        };\n        var isTravellingAwayFromBounds = function (v, currentVelocity) {\n            return isLessThanMin(v) && currentVelocity < 0 || isMoreThanMax(v) && currentVelocity > 0;\n        };\n        var startAnimation = function (animation, next) {\n            activeAnimation && activeAnimation.stop();\n            activeAnimation = animation.start({\n                update: function (v) {\n                    return current.update(v);\n                },\n                complete: function () {\n                    if (next) {\n                        next();\n                        return;\n                    }\n                    complete();\n                }\n            });\n        };\n        var startSpring = function (props) {\n            isSpring = true;\n            startAnimation(vectorSpring(__assign({}, props, { to: isLessThanMin(props.from) ? min : max, stiffness: bounceStiffness, damping: bounceDamping, restDelta: restDelta })));\n        };\n        current.subscribe(function (v) {\n            update(v);\n            var currentVelocity = current.getVelocity();\n            if (activeAnimation && !isSpring && isTravellingAwayFromBounds(v, currentVelocity)) {\n                startSpring({ from: v, velocity: currentVelocity });\n            }\n        });\n        if (isOutOfBounds(from)) {\n            startSpring({ from: from, velocity: velocity });\n        } else if (velocity !== 0) {\n            var animation = vectorDecay({\n                from: from,\n                velocity: velocity,\n                timeConstant: timeConstant,\n                power: power,\n                restDelta: isOutOfBounds(from) ? 20 : restDelta,\n                modifyTarget: modifyTarget\n            });\n            startAnimation(animation, function () {\n                var v = current.get();\n                if (isOutOfBounds(v)) {\n                    startSpring({ from: v, velocity: current.getVelocity() });\n                } else {\n                    complete();\n                }\n            });\n        } else {\n            complete();\n        }\n        return {\n            stop: function () {\n                return activeAnimation && activeAnimation.stop();\n            }\n        };\n    });\n};\nvar popmotion_es_index = /*#__PURE__*/createVectorAction(inertia, {\n    from: number.test,\n    velocity: number.test,\n    min: number.test,\n    max: number.test,\n    damping: number.test,\n    stiffness: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    }\n});\n\nvar popmotion_es_frame = function () {\n    return popmotion_es_action(function (_a) {\n        var update = _a.update;\n        var initialTime = 0;\n        var process = framesync_es.update(function (_a) {\n            var timestamp = _a.timestamp;\n            if (!initialTime) initialTime = timestamp;\n            update(timestamp - initialTime);\n        }, true, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\n\nvar scrubber = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.to,\n        to = _c === void 0 ? 1 : _c,\n        _d = _a.ease,\n        ease = _d === void 0 ? linear : _d,\n        _e = _a.reverseEase,\n        reverseEase = _e === void 0 ? false : _e;\n    if (reverseEase) {\n        ease = createReversedEasing(ease);\n    }\n    return popmotion_es_action(function (_a) {\n        var update = _a.update;\n        return {\n            seek: function (progress$$1) {\n                return update(progress$$1);\n            }\n        };\n    }).pipe(ease, function (v) {\n        return mix(from, to, v);\n    });\n};\nvar vectorScrubber = /*#__PURE__*/createVectorAction(scrubber, {\n    ease: function (func) {\n        return typeof func === 'function';\n    },\n    from: number.test,\n    to: number.test\n});\n\nvar popmotion_es_clampProgress = /*#__PURE__*/clamp$1(0, 1);\nvar tween = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return popmotion_es_action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.duration,\n            duration = _b === void 0 ? 300 : _b,\n            _c = props.ease,\n            ease = _c === void 0 ? easeOut : _c,\n            _d = props.flip,\n            flip = _d === void 0 ? 0 : _d,\n            _e = props.loop,\n            loop = _e === void 0 ? 0 : _e,\n            _f = props.yoyo,\n            yoyo = _f === void 0 ? 0 : _f,\n            _g = props.repeatDelay,\n            repeatDelay = _g === void 0 ? 0 : _g;\n        var _h = props.from,\n            from = _h === void 0 ? 0 : _h,\n            _j = props.to,\n            to = _j === void 0 ? 1 : _j,\n            _k = props.elapsed,\n            elapsed = _k === void 0 ? 0 : _k,\n            _l = props.flipCount,\n            flipCount = _l === void 0 ? 0 : _l,\n            _m = props.yoyoCount,\n            yoyoCount = _m === void 0 ? 0 : _m,\n            _o = props.loopCount,\n            loopCount = _o === void 0 ? 0 : _o;\n        var playhead = vectorScrubber({ from: from, to: to, ease: ease }).start(update);\n        var currentProgress = 0;\n        var process;\n        var isActive = false;\n        var reverseAnimation = function (reverseEase) {\n            if (reverseEase === void 0) {\n                reverseEase = false;\n            }\n            var _a;\n            _a = [to, from], from = _a[0], to = _a[1];\n            playhead = vectorScrubber({ from: from, to: to, ease: ease, reverseEase: reverseEase }).start(update);\n        };\n        var isTweenComplete = function () {\n            var isComplete = isActive && elapsed > duration + repeatDelay;\n            if (!isComplete) return false;\n            if (isComplete && !loop && !flip && !yoyo) return true;\n            elapsed = duration - (elapsed - repeatDelay);\n            if (loop && loopCount < loop) {\n                loopCount++;\n                return false;\n            } else if (flip && flipCount < flip) {\n                flipCount++;\n                reverseAnimation();\n                return false;\n            } else if (yoyo && yoyoCount < yoyo) {\n                yoyoCount++;\n                reverseAnimation(yoyoCount % 2 !== 0);\n                return false;\n            }\n            return true;\n        };\n        var updateTween = function () {\n            currentProgress = popmotion_es_clampProgress(progress(0, duration, elapsed));\n            playhead.seek(currentProgress);\n        };\n        var startTimer = function () {\n            isActive = true;\n            process = framesync_es.update(function (_a) {\n                var delta = _a.delta;\n                elapsed += delta;\n                updateTween();\n                if (isTweenComplete()) {\n                    cancelSync.update(process);\n                    complete && framesync_es.update(complete, false, true);\n                }\n            }, true);\n        };\n        var stopTimer = function () {\n            isActive = false;\n            if (process) cancelSync.update(process);\n        };\n        startTimer();\n        return {\n            isActive: function () {\n                return isActive;\n            },\n            getElapsed: function () {\n                return clamp$1(0, duration, elapsed);\n            },\n            getProgress: function () {\n                return currentProgress;\n            },\n            stop: function () {\n                stopTimer();\n            },\n            pause: function () {\n                stopTimer();\n                return this;\n            },\n            resume: function () {\n                if (!isActive) startTimer();\n                return this;\n            },\n            seek: function (newProgress) {\n                elapsed = mix(0, duration, newProgress);\n                framesync_es.update(updateTween, false, true);\n                return this;\n            },\n            reverse: function () {\n                reverseAnimation();\n                return this;\n            }\n        };\n    });\n};\n\nvar clampProgress$1 = /*#__PURE__*/clamp$1(0, 1);\nvar defaultEasings = function (values, easing$$1) {\n    return values.map(function () {\n        return easing$$1 || easeOut;\n    }).splice(0, values.length - 1);\n};\nvar defaultTimings = function (values) {\n    var numValues = values.length;\n    return values.map(function (value, i) {\n        return i !== 0 ? i / (numValues - 1) : 0;\n    });\n};\nvar interpolateScrubbers = function (input, scrubbers, update) {\n    var rangeLength = input.length;\n    var finalInputIndex = rangeLength - 1;\n    var finalScrubberIndex = finalInputIndex - 1;\n    var subs = scrubbers.map(function (scrub) {\n        return scrub.start(update);\n    });\n    return function (v) {\n        if (v <= input[0]) {\n            subs[0].seek(0);\n        }\n        if (v >= input[finalInputIndex]) {\n            subs[finalScrubberIndex].seek(1);\n        }\n        var i = 1;\n        for (; i < rangeLength; i++) {\n            if (input[i] > v || i === finalInputIndex) break;\n        }\n        var progressInRange = progress(input[i - 1], input[i], v);\n        subs[i - 1].seek(clampProgress$1(progressInRange));\n    };\n};\nvar keyframes = function (_a) {\n    var easings = _a.easings,\n        _b = _a.ease,\n        ease = _b === void 0 ? linear : _b,\n        times = _a.times,\n        values = _a.values,\n        tweenProps = __rest(_a, [\"easings\", \"ease\", \"times\", \"values\"]);\n    easings = Array.isArray(easings) ? easings : defaultEasings(values, easings);\n    times = times || defaultTimings(values);\n    var scrubbers = easings.map(function (easing$$1, i) {\n        return vectorScrubber({\n            from: values[i],\n            to: values[i + 1],\n            ease: easing$$1\n        });\n    });\n    return tween(__assign({}, tweenProps, { ease: ease })).applyMiddleware(function (update) {\n        return interpolateScrubbers(times, scrubbers, update);\n    });\n};\n\nvar physics = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return popmotion_es_action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.acceleration,\n            acceleration = _b === void 0 ? 0 : _b,\n            _c = props.friction,\n            friction = _c === void 0 ? 0 : _c,\n            _d = props.velocity,\n            velocity = _d === void 0 ? 0 : _d,\n            springStrength = props.springStrength,\n            to = props.to;\n        var _e = props.restSpeed,\n            restSpeed = _e === void 0 ? 0.001 : _e,\n            _f = props.from,\n            from = _f === void 0 ? 0 : _f;\n        var current = from;\n        var process = framesync_es.update(function (_a) {\n            var delta = _a.delta;\n            var elapsed = Math.max(delta, 16);\n            if (acceleration) velocity += velocityPerFrame(acceleration, elapsed);\n            if (friction) velocity *= Math.pow(1 - friction, elapsed / 100);\n            if (springStrength !== undefined && to !== undefined) {\n                var distanceToTarget = to - current;\n                velocity += distanceToTarget * velocityPerFrame(springStrength, elapsed);\n            }\n            current += velocityPerFrame(velocity, elapsed);\n            update(current);\n            var isComplete = restSpeed !== false && (!velocity || Math.abs(velocity) <= restSpeed);\n            if (isComplete) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            set: function (v) {\n                current = v;\n                return this;\n            },\n            setAcceleration: function (v) {\n                acceleration = v;\n                return this;\n            },\n            setFriction: function (v) {\n                friction = v;\n                return this;\n            },\n            setSpringStrength: function (v) {\n                springStrength = v;\n                return this;\n            },\n            setSpringTarget: function (v) {\n                to = v;\n                return this;\n            },\n            setVelocity: function (v) {\n                velocity = v;\n                return this;\n            },\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorPhysics = /*#__PURE__*/createVectorAction(physics, {\n    acceleration: number.test,\n    friction: number.test,\n    velocity: number.test,\n    from: number.test,\n    to: number.test,\n    springStrength: number.test\n});\n\nvar DEFAULT_DURATION = 300;\nvar flattenTimings = function (instructions) {\n    var flatInstructions = [];\n    var lastArg = instructions[instructions.length - 1];\n    var isStaggered = typeof lastArg === 'number';\n    var staggerDelay = isStaggered ? lastArg : 0;\n    var segments = isStaggered ? instructions.slice(0, -1) : instructions;\n    var numSegments = segments.length;\n    var offset = 0;\n    segments.forEach(function (item, i) {\n        flatInstructions.push(item);\n        if (i !== numSegments - 1) {\n            var duration = item.duration || DEFAULT_DURATION;\n            offset += staggerDelay;\n            flatInstructions.push(\"-\" + (duration - offset));\n        }\n    });\n    return flatInstructions;\n};\nvar flattenArrayInstructions = function (instructions, instruction) {\n    Array.isArray(instruction) ? instructions.push.apply(instructions, flattenTimings(instruction)) : instructions.push(instruction);\n    return instructions;\n};\nvar convertDefToProps = function (props, def, i) {\n    var duration = props.duration,\n        easings = props.easings,\n        times = props.times,\n        values = props.values;\n    var numValues = values.length;\n    var prevTimeTo = times[numValues - 1];\n    var timeFrom = def.at === 0 ? 0 : def.at / duration;\n    var timeTo = (def.at + def.duration) / duration;\n    if (i === 0) {\n        values.push(def.from);\n        times.push(timeFrom);\n    } else {\n        if (prevTimeTo !== timeFrom) {\n            if (def.from !== undefined) {\n                values.push(values[numValues - 1]);\n                times.push(timeFrom);\n                easings.push(linear);\n            }\n            var from = def.from !== undefined ? def.from : values[numValues - 1];\n            values.push(from);\n            times.push(timeFrom);\n            easings.push(linear);\n        } else if (def.from !== undefined) {\n            values.push(def.from);\n            times.push(timeFrom);\n            easings.push(linear);\n        }\n    }\n    values.push(def.to);\n    times.push(timeTo);\n    easings.push(def.ease || easeInOut);\n    return props;\n};\nvar timeline = function (instructions, _a) {\n    var _b = _a === void 0 ? {} : _a,\n        duration = _b.duration,\n        elapsed = _b.elapsed,\n        ease = _b.ease,\n        loop = _b.loop,\n        flip = _b.flip,\n        yoyo = _b.yoyo;\n    var playhead = 0;\n    var calculatedDuration = 0;\n    var flatInstructions = instructions.reduce(flattenArrayInstructions, []);\n    var animationDefs = [];\n    flatInstructions.forEach(function (instruction) {\n        if (typeof instruction === 'string') {\n            playhead += parseFloat(instruction);\n        } else if (typeof instruction === 'number') {\n            playhead = instruction;\n        } else {\n            var def = __assign({}, instruction, { at: playhead });\n            def.duration = def.duration === undefined ? DEFAULT_DURATION : def.duration;\n            animationDefs.push(def);\n            playhead += def.duration;\n            calculatedDuration = Math.max(calculatedDuration, def.at + def.duration);\n        }\n    });\n    var tracks = {};\n    var numDefs = animationDefs.length;\n    for (var i = 0; i < numDefs; i++) {\n        var def = animationDefs[i];\n        var track = def.track;\n        if (track === undefined) {\n            throw new Error('No track defined');\n        }\n        if (!tracks.hasOwnProperty(track)) tracks[track] = [];\n        tracks[track].push(def);\n    }\n    var trackKeyframes = {};\n    for (var key in tracks) {\n        if (tracks.hasOwnProperty(key)) {\n            var keyframeProps = tracks[key].reduce(convertDefToProps, {\n                duration: calculatedDuration,\n                easings: [],\n                times: [],\n                values: []\n            });\n            trackKeyframes[key] = keyframes(__assign({}, keyframeProps, { duration: duration || calculatedDuration, ease: ease,\n                elapsed: elapsed,\n                loop: loop,\n                yoyo: yoyo,\n                flip: flip }));\n        }\n    }\n    return composite(trackKeyframes);\n};\n\nvar listen = function (element, events, options) {\n    return popmotion_es_action(function (_a) {\n        var update = _a.update;\n        var eventNames = events.split(' ').map(function (eventName) {\n            element.addEventListener(eventName, update, options);\n            return eventName;\n        });\n        return {\n            stop: function () {\n                return eventNames.forEach(function (eventName) {\n                    return element.removeEventListener(eventName, update, options);\n                });\n            }\n        };\n    });\n};\n\nvar defaultPointerPos = function () {\n    return {\n        clientX: 0,\n        clientY: 0,\n        pageX: 0,\n        pageY: 0,\n        x: 0,\n        y: 0\n    };\n};\nvar eventToPoint = function (e, point) {\n    if (point === void 0) {\n        point = defaultPointerPos();\n    }\n    point.clientX = point.x = e.clientX;\n    point.clientY = point.y = e.clientY;\n    point.pageX = e.pageX;\n    point.pageY = e.pageY;\n    return point;\n};\n\nvar points = [/*#__PURE__*/defaultPointerPos()];\nvar isTouchDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointsLocation = function (_a) {\n        var touches = _a.touches;\n        isTouchDevice = true;\n        var numTouches = touches.length;\n        points.length = 0;\n        for (var i = 0; i < numTouches; i++) {\n            var thisTouch = touches[i];\n            points.push(eventToPoint(thisTouch));\n        }\n    };\n    listen(document, 'touchstart touchmove', {\n        passive: true,\n        capture: true\n    }).start(updatePointsLocation);\n}\nvar multitouch = function (_a) {\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.preventDefault,\n        preventDefault = _c === void 0 ? true : _c,\n        _d = _b.scale,\n        scale = _d === void 0 ? 1.0 : _d,\n        _e = _b.rotate,\n        rotate = _e === void 0 ? 0.0 : _e;\n    return popmotion_es_action(function (_a) {\n        var update = _a.update;\n        var output = {\n            touches: points,\n            scale: scale,\n            rotate: rotate\n        };\n        var initialDistance = 0.0;\n        var initialRotation = 0.0;\n        var isGesture = points.length > 1;\n        if (isGesture) {\n            var firstTouch = points[0],\n                secondTouch = points[1];\n            initialDistance = distance(firstTouch, secondTouch);\n            initialRotation = angle(firstTouch, secondTouch);\n        }\n        var updatePoint = function () {\n            if (isGesture) {\n                var firstTouch = points[0],\n                    secondTouch = points[1];\n                var newDistance = distance(firstTouch, secondTouch);\n                var newRotation = angle(firstTouch, secondTouch);\n                output.scale = scale * (newDistance / initialDistance);\n                output.rotate = rotate + (newRotation - initialRotation);\n            }\n            update(output);\n        };\n        var onMove = function (e) {\n            if (preventDefault || e.touches.length > 1) e.preventDefault();\n            framesync_es.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'touchmove', {\n            passive: !preventDefault\n        }).start(onMove);\n        if (isTouchDevice) framesync_es.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\nvar getIsTouchDevice = function () {\n    return isTouchDevice;\n};\n\nvar point = /*#__PURE__*/defaultPointerPos();\nvar isMouseDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointLocation = function (e) {\n        isMouseDevice = true;\n        eventToPoint(e, point);\n    };\n    listen(document, 'mousedown mousemove', true).start(updatePointLocation);\n}\nvar mouse = function (_a) {\n    var _b = (_a === void 0 ? {} : _a).preventDefault,\n        preventDefault = _b === void 0 ? true : _b;\n    return popmotion_es_action(function (_a) {\n        var update = _a.update;\n        var updatePoint = function () {\n            return update(point);\n        };\n        var onMove = function (e) {\n            if (preventDefault) e.preventDefault();\n            framesync_es.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'mousemove').start(onMove);\n        if (isMouseDevice) framesync_es.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\n\nvar getFirstTouch = function (_a) {\n    var firstTouch = _a[0];\n    return firstTouch;\n};\nvar pointer = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return getIsTouchDevice() ? multitouch(props).pipe(function (_a) {\n        var touches = _a.touches;\n        return touches;\n    }, getFirstTouch) : mouse(props);\n};\nvar index$1 = function (_a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var x = _a.x,\n        y = _a.y,\n        props = __rest(_a, [\"x\", \"y\"]);\n    if (x !== undefined || y !== undefined) {\n        var applyXOffset_1 = applyOffset(x || 0);\n        var applyYOffset_1 = applyOffset(y || 0);\n        var delta_1 = { x: 0, y: 0 };\n        return pointer(props).pipe(function (point) {\n            delta_1.x = applyXOffset_1(point.x);\n            delta_1.y = applyYOffset_1(point.y);\n            return delta_1;\n        });\n    } else {\n        return pointer(props);\n    }\n};\n\nvar chain = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return popmotion_es_action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var i = 0;\n        var current;\n        var playCurrent = function () {\n            current = actions[i].start({\n                complete: function () {\n                    i++;\n                    i >= actions.length ? complete() : playCurrent();\n                },\n                update: update\n            });\n        };\n        playCurrent();\n        return {\n            stop: function () {\n                return current && current.stop();\n            }\n        };\n    });\n};\n\nvar crossfade = function (a, b) {\n    return popmotion_es_action(function (observer) {\n        var balance = 0;\n        var fadable = parallel$1(a, b).start(__assign({}, observer, { update: function (_a) {\n                var va = _a[0],\n                    vb = _a[1];\n                observer.update(mix(va, vb, balance));\n            } }));\n        return {\n            setBalance: function (v) {\n                return balance = v;\n            },\n            stop: function () {\n                return fadable.stop();\n            }\n        };\n    });\n};\n\nvar popmotion_es_delay = function (timeToDelay) {\n    return popmotion_es_action(function (_a) {\n        var complete = _a.complete;\n        var timeout = setTimeout(complete, timeToDelay);\n        return {\n            stop: function () {\n                return clearTimeout(timeout);\n            }\n        };\n    });\n};\n\nvar merge = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return popmotion_es_action(function (observer) {\n        var subs = actions.map(function (thisAction) {\n            return thisAction.start(observer);\n        });\n        return {\n            stop: function () {\n                return subs.forEach(function (sub) {\n                    return sub.stop();\n                });\n            }\n        };\n    });\n};\n\nvar schedule = function (scheduler, schedulee) {\n    return popmotion_es_action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var latest;\n        var schedulerSub = scheduler.start({\n            update: function () {\n                return latest !== undefined && update(latest);\n            },\n            complete: complete\n        });\n        var scheduleeSub = schedulee.start({\n            update: function (v) {\n                return latest = v;\n            },\n            complete: complete\n        });\n        return {\n            stop: function () {\n                schedulerSub.stop();\n                scheduleeSub.stop();\n            }\n        };\n    });\n};\n\nvar stagger = function (actions, interval) {\n    var intervalIsNumber = typeof interval === 'number';\n    var actionsWithDelay = actions.map(function (a, i) {\n        var timeToDelay = intervalIsNumber ? interval * i : interval(i);\n        return chain(popmotion_es_delay(timeToDelay), a);\n    });\n    return parallel$1.apply(void 0, actionsWithDelay);\n};\n\nvar appendUnit = function (unit) {\n    return function (v) {\n        return \"\" + v + unit;\n    };\n};\nvar popmotion_es_steps = function (st, min, max) {\n    if (min === void 0) {\n        min = 0;\n    }\n    if (max === void 0) {\n        max = 1;\n    }\n    return function (v) {\n        var current = progress(min, max, v);\n        return mix(min, max, stepProgress(st, current));\n    };\n};\nvar transformMap = function (childTransformers) {\n    return function (v) {\n        var output = __assign({}, v);\n        for (var key in childTransformers) {\n            if (childTransformers.hasOwnProperty(key)) {\n                var childTransformer = childTransformers[key];\n                output[key] = childTransformer(v[key]);\n            }\n        }\n        return output;\n    };\n};\n\nvar transformers = /*#__PURE__*/Object.freeze({\n    applyOffset: applyOffset,\n    clamp: clamp$1,\n    conditional: conditional,\n    interpolate: interpolate,\n    blendArray: mixArray,\n    blendColor: mixColor,\n    pipe: pipe,\n    smooth: smooth,\n    snap: snap,\n    generateStaticSpring: springForce,\n    nonlinearSpring: springForceExpo,\n    linearSpring: springForceLinear,\n    wrap: wrap$1,\n    appendUnit: appendUnit,\n    steps: popmotion_es_steps,\n    transformMap: transformMap\n});\n\nvar css = function (element, props) {\n    warning(false, 'css() is deprecated, use styler instead');\n    return stylefire_es(element, props);\n};\nvar popmotion_es_svg = function (element, props) {\n    warning(false, 'svg() is deprecated, use styler instead');\n    return stylefire_es(element, props);\n};\n\n\n\n// CONCATENATED MODULE: ./node_modules/pose-core/dist/pose-core.es.js\n\n\n\nvar getPoseValues = function (_a) {\n    var transition = _a.transition,\n        flip = _a.flip,\n        delay = _a.delay,\n        delayChildren = _a.delayChildren,\n        staggerChildren = _a.staggerChildren,\n        staggerDirection = _a.staggerDirection,\n        afterChildren = _a.afterChildren,\n        beforeChildren = _a.beforeChildren,\n        preTransition = _a.preTransition,\n        applyAtStart = _a.applyAtStart,\n        applyAtEnd = _a.applyAtEnd,\n        props = __rest(_a, [\"transition\", \"flip\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"afterChildren\", \"beforeChildren\", \"preTransition\", \"applyAtStart\", \"applyAtEnd\"]);\n    return props;\n};\nvar selectPoses = function (_a) {\n    var label = _a.label,\n        props = _a.props,\n        values = _a.values,\n        parentValues = _a.parentValues,\n        ancestorValues = _a.ancestorValues,\n        onChange = _a.onChange,\n        passive = _a.passive,\n        initialPose = _a.initialPose,\n        poses = __rest(_a, [\"label\", \"props\", \"values\", \"parentValues\", \"ancestorValues\", \"onChange\", \"passive\", \"initialPose\"]);\n    return poses;\n};\nvar selectAllValues = function (values, selectValue) {\n    var allValues = {};\n    values.forEach(function (value, key) {\n        return allValues[key] = selectValue(value);\n    });\n    return allValues;\n};\n\nvar resolveProp = function (target, props) {\n    return typeof target === 'function' ? target(props) : target;\n};\nvar poseDefault = function (pose, prop, defaultValue, resolveProps) {\n    return pose && pose[prop] !== undefined ? resolveProp(pose[prop], resolveProps) : defaultValue;\n};\nvar startChildAnimations = function (children, next, pose, props) {\n    var animations = [];\n    var delay = poseDefault(pose, 'delayChildren', 0, props);\n    var stagger = poseDefault(pose, 'staggerChildren', 0, props);\n    var staggerDirection = poseDefault(pose, 'staggerDirection', 1, props);\n    var maxStaggerDuration = (children.size - 1) * stagger;\n    var generateStaggerDuration = staggerDirection === 1 ? function (i) {\n        return i * stagger;\n    } : function (i) {\n        return maxStaggerDuration - i * stagger;\n    };\n    Array.from(children).forEach(function (child, i) {\n        animations.push(child.set(next, {\n            delay: delay + generateStaggerDuration(i)\n        }));\n    });\n    return animations;\n};\nvar resolveTransition = function (transition, key, value, props, convertTransitionDefinition, getInstantTransition) {\n    var resolvedTransition;\n    if (typeof transition === 'function') {\n        var resolvedTransitionMap = transition(props);\n        resolvedTransition = resolveTransition(resolvedTransitionMap, key, value, props, convertTransitionDefinition, getInstantTransition);\n    } else if (transition[key] || transition.default) {\n        var keyTransition = transition[key] || transition.default;\n        if (typeof keyTransition === 'function') {\n            resolvedTransition = keyTransition(props);\n        } else {\n            resolvedTransition = keyTransition;\n        }\n    } else {\n        resolvedTransition = transition;\n    }\n    return resolvedTransition === false ? getInstantTransition(value, props) : convertTransitionDefinition(value, resolvedTransition, props);\n};\nvar findInsertionIndex = function (poseList, priorityList, priorityIndex) {\n    var insertionIndex = 0;\n    for (var i = priorityIndex - 1; i >= 0; i--) {\n        var nextHighestPriorityIndex = poseList.indexOf(priorityList[i]);\n        if (nextHighestPriorityIndex !== -1) {\n            insertionIndex = nextHighestPriorityIndex + 1;\n            break;\n        }\n    }\n    return insertionIndex;\n};\nvar applyValues = function (toApply, values, props, setValue, setValueNative) {\n    invariant(typeof toApply === 'object', 'applyAtStart and applyAtEnd must be of type object');\n    return Object.keys(toApply).forEach(function (key) {\n        var valueToSet = resolveProp(toApply[key], props);\n        values.has(key) ? setValue(values.get(key), valueToSet) : setValueNative(key, valueToSet, props);\n    });\n};\nvar createPoseSetter = function (setterProps) {\n    var state = setterProps.state,\n        poses = setterProps.poses,\n        startAction = setterProps.startAction,\n        stopAction = setterProps.stopAction,\n        getInstantTransition = setterProps.getInstantTransition,\n        addActionDelay = setterProps.addActionDelay,\n        getTransitionProps = setterProps.getTransitionProps,\n        resolveTarget = setterProps.resolveTarget,\n        transformPose = setterProps.transformPose,\n        posePriority = setterProps.posePriority,\n        convertTransitionDefinition = setterProps.convertTransitionDefinition,\n        setValue = setterProps.setValue,\n        setValueNative = setterProps.setValueNative,\n        forceRender = setterProps.forceRender;\n    return function (next, nextProps, propagate) {\n        if (nextProps === void 0) {\n            nextProps = {};\n        }\n        if (propagate === void 0) {\n            propagate = true;\n        }\n        var children = state.children,\n            values = state.values,\n            props = state.props,\n            activeActions = state.activeActions,\n            activePoses = state.activePoses;\n        var _a = nextProps.delay,\n            delay = _a === void 0 ? 0 : _a;\n        var hasChildren = children.size;\n        var baseTransitionProps = __assign({}, props, nextProps);\n        var nextPose = poses[next];\n        var getChildAnimations = function () {\n            return hasChildren && propagate ? startChildAnimations(children, next, nextPose, baseTransitionProps) : [];\n        };\n        var getParentAnimations = function () {\n            if (!nextPose) return [];\n            var applyAtStart = nextPose.applyAtStart;\n            if (applyAtStart) {\n                applyValues(applyAtStart, values, baseTransitionProps, setValue, setValueNative);\n                if (forceRender) forceRender(baseTransitionProps);\n            }\n            if (transformPose) nextPose = transformPose(nextPose, next, state);\n            var preTransition = nextPose.preTransition,\n                getTransition = nextPose.transition,\n                applyAtEnd = nextPose.applyAtEnd;\n            if (preTransition) preTransition(baseTransitionProps);\n            var animations = Object.keys(getPoseValues(nextPose)).map(function (key) {\n                var valuePoses = activePoses.has(key) ? activePoses.get(key) : (activePoses.set(key, []), activePoses.get(key));\n                var existingIndex = valuePoses.indexOf(next);\n                if (existingIndex !== -1) valuePoses.splice(existingIndex, 1);\n                var priority = posePriority ? posePriority.indexOf(next) : 0;\n                var insertionIndex = priority <= 0 ? 0 : findInsertionIndex(valuePoses, posePriority, priority);\n                valuePoses.splice(insertionIndex, 0, next);\n                return insertionIndex === 0 ? new Promise(function (complete) {\n                    var value = values.get(key);\n                    var transitionProps = __assign({}, baseTransitionProps, { key: key,\n                        value: value });\n                    var target = resolveTarget(value, resolveProp(nextPose[key], transitionProps));\n                    if (activeActions.has(key)) stopAction(activeActions.get(key));\n                    var resolveTransitionProps = __assign({ to: target }, transitionProps, getTransitionProps(value, target, transitionProps));\n                    var transition = resolveTransition(getTransition, key, value, resolveTransitionProps, convertTransitionDefinition, getInstantTransition);\n                    var poseDelay = delay || resolveProp(nextPose.delay, transitionProps);\n                    if (poseDelay) {\n                        transition = addActionDelay(poseDelay, transition);\n                    }\n                    activeActions.set(key, startAction(value, transition, complete));\n                }) : Promise.resolve();\n            });\n            return applyAtEnd ? [Promise.all(animations).then(function () {\n                applyValues(applyAtEnd, values, baseTransitionProps, setValue, setValueNative);\n            })] : animations;\n        };\n        if (nextPose && hasChildren) {\n            if (resolveProp(nextPose.beforeChildren, baseTransitionProps)) {\n                return Promise.all(getParentAnimations()).then(function () {\n                    return Promise.all(getChildAnimations());\n                });\n            } else if (resolveProp(nextPose.afterChildren, baseTransitionProps)) {\n                return Promise.all(getChildAnimations()).then(function () {\n                    return Promise.all(getParentAnimations());\n                });\n            }\n        }\n        return Promise.all(getParentAnimations().concat(getChildAnimations()));\n    };\n};\n\nvar DEFAULT_INITIAL_POSE = 'init';\nvar isScale = function (key) {\n    return key.includes('scale');\n};\nvar defaultReadValueFromSource = function (key) {\n    return isScale(key) ? 1 : 0;\n};\nvar readValueFromPose = function (pose, key, props) {\n    var valueToResolve = pose.applyAtEnd && pose.applyAtEnd[key] !== undefined ? pose.applyAtEnd[key] : pose[key] !== undefined ? pose[key] : pose.applyAtStart && pose.applyAtStart[key] !== undefined ? pose.applyAtStart[key] : 0;\n    return resolveProp(valueToResolve, props);\n};\nvar getPosesToSearch = function (pose) {\n    var posesToSearch = Array.isArray(pose) ? pose : [pose];\n    posesToSearch.push(DEFAULT_INITIAL_POSE);\n    return posesToSearch;\n};\nvar getInitialValue = function (poses, key, initialPose, props, readValueFromSource, activePoses) {\n    if (readValueFromSource === void 0) {\n        readValueFromSource = defaultReadValueFromSource;\n    }\n    var posesToSearch = getPosesToSearch(initialPose);\n    var pose = posesToSearch.filter(Boolean).find(function (name) {\n        var thisPose = poses[name];\n        return thisPose && (thisPose[key] !== undefined || thisPose.applyAtStart && thisPose.applyAtStart[key] !== undefined || thisPose.applyAtEnd && thisPose.applyAtEnd[key] !== undefined);\n    });\n    activePoses.set(key, [pose || DEFAULT_INITIAL_POSE]);\n    return pose ? readValueFromPose(poses[pose], key, props) : readValueFromSource(key, props);\n};\nvar createValues = function (values, _a) {\n    var userSetValues = _a.userSetValues,\n        createValue = _a.createValue,\n        convertValue = _a.convertValue,\n        readValueFromSource = _a.readValueFromSource,\n        initialPose = _a.initialPose,\n        poses = _a.poses,\n        activePoses = _a.activePoses,\n        props = _a.props;\n    return function (key) {\n        if (values.has(key)) return;\n        var value;\n        if (userSetValues && userSetValues[key] !== undefined) {\n            value = convertValue(userSetValues[key], key, props);\n        } else {\n            var initValue = getInitialValue(poses, key, initialPose, props, readValueFromSource, activePoses);\n            value = createValue(initValue, key, props);\n        }\n        values.set(key, value);\n    };\n};\nvar scrapeValuesFromPose = function (values, props) {\n    return function (key) {\n        var pose = props.poses[key];\n        Object.keys(getPoseValues(pose)).forEach(createValues(values, props));\n    };\n};\nvar getAncestorValue = function (key, fromParent, ancestors) {\n    if (fromParent === true) {\n        return ancestors[0] && ancestors[0].values.get(key);\n    } else {\n        var foundAncestor = ancestors.find(function (_a) {\n            var label = _a.label;\n            return label === fromParent;\n        });\n        return foundAncestor && foundAncestor.values.get(key);\n    }\n};\nvar bindPassiveValues = function (values, _a) {\n    var passive = _a.passive,\n        ancestorValues = _a.ancestorValues,\n        createValue = _a.createValue,\n        readValue = _a.readValue,\n        props = _a.props;\n    return function (key) {\n        var _a = passive[key],\n            valueKey = _a[0],\n            passiveProps = _a[1],\n            fromParent = _a[2];\n        var valueToBind = fromParent && ancestorValues.length ? getAncestorValue(valueKey, fromParent, ancestorValues) : values.has(valueKey) ? values.get(valueKey) : false;\n        if (!valueToBind) return;\n        var newValue = createValue(readValue(valueToBind), key, props, {\n            passiveParentKey: valueKey,\n            passiveParent: valueToBind,\n            passiveProps: passiveProps\n        });\n        values.set(key, newValue);\n    };\n};\nvar setNativeValues = function (_a) {\n    var setValueNative = _a.setValueNative,\n        initialPose = _a.initialPose,\n        props = _a.props,\n        poses = _a.poses;\n    var valuesHaveSet = new Set();\n    var setValues = function (pose, propKey) {\n        if (pose[propKey]) {\n            for (var key in pose[propKey]) {\n                if (!valuesHaveSet.has(key)) {\n                    valuesHaveSet.add(key);\n                    setValueNative(key, resolveProp(pose[propKey][key], props), props);\n                }\n            }\n        }\n    };\n    getPosesToSearch(initialPose).forEach(function (poseKey) {\n        var pose = poses[poseKey];\n        if (pose) {\n            setValues(pose, 'applyAtEnd');\n            setValues(pose, 'applyAtStart');\n        }\n    });\n};\nvar createValueMap = function (props) {\n    var poses = props.poses,\n        passive = props.passive;\n    var values = new Map();\n    Object.keys(poses).forEach(scrapeValuesFromPose(values, props));\n    setNativeValues(props);\n    if (passive) Object.keys(passive).forEach(bindPassiveValues(values, props));\n    return values;\n};\n\nvar applyDefaultTransition = function (pose, key, defaultTransitions) {\n    return __assign({}, pose, { transition: defaultTransitions.has(key) ? defaultTransitions.get(key) : defaultTransitions.get('default') });\n};\nvar generateTransitions = function (poses, defaultTransitions) {\n    Object.keys(poses).forEach(function (key) {\n        var pose = poses[key];\n        invariant(typeof pose === 'object', \"Pose '\" + key + \"' is of invalid type. All poses should be objects.\");\n        poses[key] = pose.transition !== undefined ? pose : applyDefaultTransition(pose, key, defaultTransitions);\n    });\n    return poses;\n};\n\nvar sortByReversePriority = function (priorityOrder) {\n    return function (a, b) {\n        var aP = priorityOrder.indexOf(a);\n        var bP = priorityOrder.indexOf(b);\n        if (aP === -1 && bP !== -1) return -1;\n        if (aP !== -1 && bP === -1) return 1;\n        return aP - bP;\n    };\n};\n\nvar poseFactory = function (_a) {\n    var getDefaultProps = _a.getDefaultProps,\n        defaultTransitions = _a.defaultTransitions,\n        bindOnChange = _a.bindOnChange,\n        startAction = _a.startAction,\n        stopAction = _a.stopAction,\n        readValue = _a.readValue,\n        readValueFromSource = _a.readValueFromSource,\n        resolveTarget = _a.resolveTarget,\n        setValue = _a.setValue,\n        setValueNative = _a.setValueNative,\n        createValue = _a.createValue,\n        convertValue = _a.convertValue,\n        getInstantTransition = _a.getInstantTransition,\n        getTransitionProps = _a.getTransitionProps,\n        addActionDelay = _a.addActionDelay,\n        selectValueToRead = _a.selectValueToRead,\n        convertTransitionDefinition = _a.convertTransitionDefinition,\n        transformPose = _a.transformPose,\n        posePriority = _a.posePriority,\n        forceRender = _a.forceRender,\n        extendAPI = _a.extendAPI;\n    return function (config) {\n        var parentValues = config.parentValues,\n            _a = config.ancestorValues,\n            ancestorValues = _a === void 0 ? [] : _a;\n        if (parentValues) ancestorValues.unshift({ values: parentValues });\n        var activeActions = new Map();\n        var activePoses = new Map();\n        var children = new Set();\n        var poses = generateTransitions(selectPoses(config), defaultTransitions);\n        var _b = config.props,\n            props = _b === void 0 ? {} : _b;\n        if (getDefaultProps) props = __assign({}, getDefaultProps(config), props);\n        var passive = config.passive,\n            userSetValues = config.values,\n            _c = config.initialPose,\n            initialPose = _c === void 0 ? DEFAULT_INITIAL_POSE : _c;\n        var values = createValueMap({\n            poses: poses,\n            passive: passive,\n            ancestorValues: ancestorValues,\n            readValue: readValue,\n            setValueNative: setValueNative,\n            createValue: createValue,\n            convertValue: convertValue,\n            readValueFromSource: readValueFromSource,\n            userSetValues: userSetValues,\n            initialPose: initialPose,\n            activePoses: activePoses,\n            props: props\n        });\n        var state = {\n            activeActions: activeActions,\n            activePoses: activePoses,\n            children: children,\n            props: props,\n            values: values\n        };\n        var onChange = config.onChange;\n        if (onChange) Object.keys(onChange).forEach(bindOnChange(values, onChange));\n        var set = createPoseSetter({\n            state: state,\n            poses: poses,\n            getInstantTransition: getInstantTransition,\n            getTransitionProps: getTransitionProps,\n            convertTransitionDefinition: convertTransitionDefinition,\n            setValue: setValue,\n            setValueNative: setValueNative,\n            startAction: startAction,\n            stopAction: stopAction,\n            resolveTarget: resolveTarget,\n            addActionDelay: addActionDelay,\n            transformPose: transformPose,\n            posePriority: posePriority,\n            forceRender: forceRender\n        });\n        var has = function (poseName) {\n            return !!poses[poseName];\n        };\n        var api = {\n            set: set,\n            unset: function (poseName, poseProps) {\n                var posesToSet = [];\n                activePoses.forEach(function (valuePoses) {\n                    var poseIndex = valuePoses.indexOf(poseName);\n                    if (poseIndex === -1) return;\n                    var currentPose = valuePoses[0];\n                    valuePoses.splice(poseIndex, 1);\n                    var nextPose = valuePoses[0];\n                    if (nextPose === currentPose) return;\n                    if (posesToSet.indexOf(nextPose) === -1) {\n                        posesToSet.push(nextPose);\n                    }\n                });\n                var animationsToResolve = posesToSet.sort(sortByReversePriority(posePriority)).map(function (poseToSet) {\n                    return set(poseToSet, poseProps, false);\n                });\n                children.forEach(function (child) {\n                    return animationsToResolve.push(child.unset(poseName));\n                });\n                return Promise.all(animationsToResolve);\n            },\n            get: function (valueName) {\n                return valueName ? selectValueToRead(values.get(valueName)) : selectAllValues(values, selectValueToRead);\n            },\n            has: has,\n            setProps: function (newProps) {\n                return state.props = __assign({}, state.props, newProps);\n            },\n            _addChild: function (childConfig, factory) {\n                var child = factory(__assign({ initialPose: initialPose }, childConfig, { ancestorValues: [{ label: config.label, values: values }].concat(ancestorValues) }));\n                children.add(child);\n                return child;\n            },\n            removeChild: function (child) {\n                return children.delete(child);\n            },\n            clearChildren: function () {\n                children.forEach(function (child) {\n                    return child.destroy();\n                });\n                children.clear();\n            },\n            destroy: function () {\n                activeActions.forEach(stopAction);\n                children.forEach(function (child) {\n                    return child.destroy();\n                });\n            }\n        };\n        return extendAPI(api, state, config);\n    };\n};\n\n/* harmony default export */ var pose_core_es = (poseFactory);\n\n// CONCATENATED MODULE: ./node_modules/popmotion-pose/dist/popmotion-pose.es.js\n\n\n\n\n\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nvar popmotion_pose_es_assign = function () {\n    popmotion_pose_es_assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return popmotion_pose_es_assign.apply(this, arguments);\n};\n\nfunction popmotion_pose_es_rest(s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    return t;\n}\n\nvar BoundingBoxDimension;\n(function (BoundingBoxDimension) {\n    BoundingBoxDimension[\"width\"] = \"width\";\n    BoundingBoxDimension[\"height\"] = \"height\";\n    BoundingBoxDimension[\"left\"] = \"left\";\n    BoundingBoxDimension[\"right\"] = \"right\";\n    BoundingBoxDimension[\"top\"] = \"top\";\n    BoundingBoxDimension[\"bottom\"] = \"bottom\";\n})(BoundingBoxDimension || (BoundingBoxDimension = {}));\n\nvar measureWithoutTransform = function (element) {\n    var transform$$1 = element.style.transform;\n    element.style.transform = '';\n    var bbox = element.getBoundingClientRect();\n    element.style.transform = transform$$1;\n    return bbox;\n};\nvar popmotion_pose_es_resolveProp = function (target, props) {\n    return typeof target === 'function' ? target(props) : target;\n};\n\nvar popmotion_pose_es_interpolate = transformers.interpolate;\nvar singleAxisPointer = function (axis) {\n    return function (from) {\n        var _a;\n        return index$1((_a = {}, _a[axis] = typeof from === 'string' ? parseFloat(from) : from, _a)).pipe(function (v) {\n            return v[axis];\n        });\n    };\n};\nvar pointerX = /*#__PURE__*/singleAxisPointer('x');\nvar pointerY = /*#__PURE__*/singleAxisPointer('y');\nvar createPointer = function (axisPointerCreator, min, max, measurement) {\n    return function (transitionProps) {\n        var from = transitionProps.from,\n            type = transitionProps.type,\n            dimensions = transitionProps.dimensions,\n            dragBounds = transitionProps.dragBounds;\n        var axisPointer = axisPointerCreator(dimensions.measurementAsPixels(measurement, from, type));\n        var transformQueue = [];\n        if (dragBounds) {\n            var resolvedDragBounds_1 = popmotion_pose_es_resolveProp(dragBounds, transitionProps);\n            if (resolvedDragBounds_1[min] !== undefined) {\n                transformQueue.push(function (v) {\n                    return Math.max(v, dimensions.measurementAsPixels(measurement, resolvedDragBounds_1[min], type));\n                });\n            }\n            if (resolvedDragBounds_1[max] !== undefined) {\n                transformQueue.push(function (v) {\n                    return Math.min(v, dimensions.measurementAsPixels(measurement, resolvedDragBounds_1[max], type));\n                });\n            }\n        }\n        if (type === percent) {\n            transformQueue.push(popmotion_pose_es_interpolate([0, dimensions.get(measurement)], [0, 100], { clamp: false }), function (v) {\n                return v + '%';\n            });\n        }\n        return transformQueue.length ? axisPointer.pipe.apply(axisPointer, transformQueue) : axisPointer;\n    };\n};\nvar just = function (from) {\n    return popmotion_es_action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        update(from);\n        complete();\n    });\n};\nvar underDampedSpring = function (_a) {\n    var from = _a.from,\n        velocity = _a.velocity,\n        to = _a.to;\n    return vectorSpring({\n        from: from,\n        to: to,\n        velocity: velocity,\n        stiffness: 500,\n        damping: 25,\n        restDelta: 0.5,\n        restSpeed: 10\n    });\n};\nvar overDampedSpring = function (_a) {\n    var from = _a.from,\n        velocity = _a.velocity,\n        to = _a.to;\n    return vectorSpring({ from: from, to: to, velocity: velocity, stiffness: 700, damping: to === 0 ? 100 : 35 });\n};\nvar linearTween = function (_a) {\n    var from = _a.from,\n        to = _a.to;\n    return tween({ from: from, to: to, ease: linear });\n};\nvar intelligentTransition = {\n    x: underDampedSpring,\n    y: underDampedSpring,\n    z: underDampedSpring,\n    rotate: underDampedSpring,\n    rotateX: underDampedSpring,\n    rotateY: underDampedSpring,\n    rotateZ: underDampedSpring,\n    scaleX: overDampedSpring,\n    scaleY: overDampedSpring,\n    scale: overDampedSpring,\n    opacity: linearTween,\n    default: tween\n};\nvar dragAction = /*#__PURE__*/popmotion_pose_es_assign({}, intelligentTransition, { x: /*#__PURE__*/createPointer(pointerX, 'left', 'right', BoundingBoxDimension.width), y: /*#__PURE__*/createPointer(pointerY, 'top', 'bottom', BoundingBoxDimension.height) });\nvar justAxis = function (_a) {\n    var from = _a.from;\n    return just(from);\n};\nvar intelligentDragEnd = /*#__PURE__*/popmotion_pose_es_assign({}, intelligentTransition, { x: justAxis, y: justAxis });\nvar popmotion_pose_es_defaultTransitions = /*#__PURE__*/new Map([['default', intelligentTransition], ['drag', dragAction], ['dragEnd', intelligentDragEnd]]);\n\nvar animationLookup = {\n    tween: tween,\n    spring: vectorSpring,\n    decay: vectorDecay,\n    keyframes: keyframes,\n    physics: vectorPhysics\n};\nvar easingLookup = {\n    linear: linear,\n    easeIn: easeIn,\n    easeOut: easeOut,\n    easeInOut: easeInOut,\n    circIn: circIn,\n    circOut: circOut,\n    circInOut: circInOut,\n    backIn: backIn,\n    backOut: backOut,\n    backInOut: backInOut,\n    anticipate: anticipate\n};\n\nvar auto = {\n    test: function (v) {\n        return v === 'auto';\n    },\n    parse: function (v) {\n        return v;\n    }\n};\nvar valueTypeTests = [number, degrees, percent, px, vw, vh, auto];\nvar testValueType = function (v) {\n    return function (type) {\n        return type.test(v);\n    };\n};\nvar popmotion_pose_es_getValueType = function (v) {\n    return valueTypeTests.find(testValueType(v));\n};\n\nvar createPassiveValue = function (init, parent, transform$$1) {\n    var raw = popmotion_es_value(transform$$1(init));\n    parent.raw.subscribe(function (v) {\n        return raw.update(transform$$1(v));\n    });\n    return { raw: raw };\n};\nvar popmotion_pose_es_createValue = function (init) {\n    var type = popmotion_pose_es_getValueType(init);\n    var raw = popmotion_es_value(init);\n    return { raw: raw, type: type };\n};\nvar popmotion_pose_es_addActionDelay = function (delay$$1, transition) {\n    if (delay$$1 === void 0) {\n        delay$$1 = 0;\n    }\n    return chain(popmotion_es_delay(delay$$1), transition);\n};\nvar isCubicBezierArgs = function (args) {\n    return typeof args[0] === 'number';\n};\nvar getAction = function (v, _a, _b) {\n    var from = _b.from,\n        to = _b.to,\n        velocity = _b.velocity;\n    var _c = _a.type,\n        type = _c === void 0 ? 'tween' : _c,\n        definedEase = _a.ease,\n        def = popmotion_pose_es_rest(_a, [\"type\", \"ease\"]);\n    invariant(animationLookup[type] !== undefined, \"Invalid transition type '\" + type + \"'. Valid transition types are: tween, spring, decay, physics and keyframes.\");\n    var ease;\n    if (type === 'tween') {\n        if (typeof definedEase !== 'function') {\n            if (typeof definedEase === 'string') {\n                invariant(easingLookup[definedEase] !== undefined, \"Invalid easing type '\" + definedEase + \"'. popmotion.io/pose/api/config\");\n                ease = easingLookup[definedEase];\n            } else if (Array.isArray(definedEase) && isCubicBezierArgs(definedEase)) {\n                invariant(definedEase.length === 4, \"Cubic bezier arrays must contain four numerical values.\");\n                var x1 = definedEase[0],\n                    y1 = definedEase[1],\n                    x2 = definedEase[2],\n                    y2 = definedEase[3];\n                ease = cubicBezier(x1, y1, x2, y2);\n            }\n        }\n    }\n    ease = ease || definedEase;\n    var baseProps = type !== 'keyframes' ? {\n        from: from,\n        to: to,\n        velocity: velocity,\n        ease: ease\n    } : { ease: ease };\n    return animationLookup[type](popmotion_pose_es_assign({}, baseProps, def));\n};\nvar isAction = function (action$$1) {\n    return typeof action$$1.start !== 'undefined';\n};\nvar popmotion_pose_es_pose = function (_a) {\n    var transformPose = _a.transformPose,\n        addListenerToValue = _a.addListenerToValue,\n        extendAPI = _a.extendAPI,\n        readValueFromSource = _a.readValueFromSource,\n        posePriority = _a.posePriority,\n        setValueNative = _a.setValueNative;\n    return pose_core_es({\n        bindOnChange: function (values, onChange) {\n            return function (key) {\n                if (!values.has(key)) return;\n                var raw = values.get(key).raw;\n                raw.subscribe(onChange[key]);\n            };\n        },\n        readValue: function (_a) {\n            var raw = _a.raw;\n            return raw.get();\n        },\n        setValue: function (_a, to) {\n            var raw = _a.raw;\n            return raw.update(to);\n        },\n        createValue: function (init, key, _a, _b) {\n            var elementStyler = _a.elementStyler;\n            var _c = _b === void 0 ? {} : _b,\n                passiveParent = _c.passiveParent,\n                passiveProps = _c.passiveProps;\n            var val = passiveParent ? createPassiveValue(init, passiveParent, passiveProps) : popmotion_pose_es_createValue(init);\n            val.raw.subscribe(addListenerToValue(key, elementStyler));\n            return val;\n        },\n        convertValue: function (raw, key, _a) {\n            var elementStyler = _a.elementStyler;\n            raw.subscribe(addListenerToValue(key, elementStyler));\n            return {\n                raw: raw,\n                type: popmotion_pose_es_getValueType(raw.get())\n            };\n        },\n        getTransitionProps: function (_a, to) {\n            var raw = _a.raw,\n                type = _a.type;\n            return {\n                from: raw.get(),\n                velocity: raw.getVelocity(),\n                to: to,\n                type: type\n            };\n        },\n        resolveTarget: function (_, to) {\n            return to;\n        },\n        selectValueToRead: function (_a) {\n            var raw = _a.raw;\n            return raw;\n        },\n        startAction: function (_a, action$$1, complete) {\n            var raw = _a.raw;\n            var reaction = {\n                update: function (v) {\n                    return raw.update(v);\n                },\n                complete: complete\n            };\n            return action$$1.start(reaction);\n        },\n        stopAction: function (action$$1) {\n            return action$$1.stop();\n        },\n        getInstantTransition: function (_, _a) {\n            var to = _a.to;\n            return just(to);\n        },\n        convertTransitionDefinition: function (val, def, props) {\n            if (isAction(def)) return def;\n            var delay$$1 = def.delay,\n                min = def.min,\n                max = def.max,\n                round = def.round,\n                remainingDef = popmotion_pose_es_rest(def, [\"delay\", \"min\", \"max\", \"round\"]);\n            var action$$1 = getAction(val, remainingDef, props);\n            var outputPipe = [];\n            if (delay$$1) action$$1 = popmotion_pose_es_addActionDelay(delay$$1, action$$1);\n            if (min !== undefined) outputPipe.push(function (v) {\n                return Math.max(v, min);\n            });\n            if (max !== undefined) outputPipe.push(function (v) {\n                return Math.min(v, max);\n            });\n            if (round) outputPipe.push(Math.round);\n            return outputPipe.length ? action$$1.pipe.apply(action$$1, outputPipe) : action$$1;\n        },\n        setValueNative: setValueNative,\n        addActionDelay: popmotion_pose_es_addActionDelay,\n        defaultTransitions: popmotion_pose_es_defaultTransitions,\n        transformPose: transformPose,\n        readValueFromSource: readValueFromSource,\n        posePriority: posePriority,\n        extendAPI: extendAPI\n    });\n};\n\nvar createDimensions = function (element) {\n    var hasMeasured = false;\n    var current = {\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0,\n        bottom: 0,\n        right: 0\n    };\n    return {\n        get: function (measurement) {\n            return measurement ? current[measurement] : current;\n        },\n        measure: function () {\n            current = element.getBoundingClientRect();\n            hasMeasured = true;\n            return current;\n        },\n        measurementAsPixels: function (measurement, value$$1, type) {\n            return type === percent ? (typeof value$$1 === 'string' ? parseFloat(value$$1) : value$$1) / 100 * current[measurement] : value$$1;\n        },\n        has: function () {\n            return hasMeasured;\n        }\n    };\n};\n\nvar makeUIEventApplicator = function (_a) {\n    var startEvents = _a.startEvents,\n        endEvents = _a.endEvents,\n        startPose = _a.startPose,\n        endPose = _a.endPose,\n        startCallback = _a.startCallback,\n        endCallback = _a.endCallback,\n        useDocumentToEnd = _a.useDocumentToEnd,\n        preventScroll = _a.preventScroll;\n    return function (element, activeActions, poser, config) {\n        var startListener = startPose + 'Start';\n        var endListener = startPose + 'End';\n        var moveListener = startPose + 'Move';\n        if (preventScroll) {\n            var touchMoveListener = listen(element, 'touchmove', {\n                passive: false\n            }).start(function (e) {\n                e.preventDefault();\n            });\n            activeActions.set(moveListener, touchMoveListener);\n        }\n        var eventStartListener = listen(element, startEvents).start(function (startEvent) {\n            poser.unset(endPose);\n            poser.set(startPose);\n            if (startCallback && config[startCallback]) config[startCallback](startEvent);\n            var eventEndListener = listen(useDocumentToEnd ? document.documentElement : element, endEvents + (useDocumentToEnd ? ' mouseenter' : '')).start(function (endEvent) {\n                if (useDocumentToEnd && endEvent.type === 'mouseenter' && endEvent.buttons === 1) {\n                    return;\n                }\n                activeActions.get(endListener).stop();\n                poser.unset(startPose);\n                poser.set(endPose);\n                if (endCallback && config[endCallback]) config[endCallback](endEvent);\n            });\n            activeActions.set(endListener, eventEndListener);\n        });\n        activeActions.set(startListener, eventStartListener);\n    };\n};\nvar events = {\n    draggable: /*#__PURE__*/makeUIEventApplicator({\n        startEvents: 'mousedown touchstart',\n        endEvents: 'mouseup touchend',\n        startPose: 'drag',\n        endPose: 'dragEnd',\n        startCallback: 'onDragStart',\n        endCallback: 'onDragEnd',\n        useDocumentToEnd: true,\n        preventScroll: true\n    }),\n    hoverable: /*#__PURE__*/makeUIEventApplicator({\n        startEvents: 'mouseenter',\n        endEvents: 'mouseleave',\n        startPose: 'hover',\n        endPose: 'hoverEnd'\n    }),\n    focusable: /*#__PURE__*/makeUIEventApplicator({\n        startEvents: 'focus',\n        endEvents: 'blur',\n        startPose: 'focus',\n        endPose: 'blur'\n    }),\n    pressable: /*#__PURE__*/makeUIEventApplicator({\n        startEvents: 'mousedown touchstart',\n        endEvents: 'mouseup touchend',\n        startPose: 'press',\n        endPose: 'pressEnd',\n        startCallback: 'onPressStart',\n        endCallback: 'onPressEnd',\n        useDocumentToEnd: true\n    })\n};\nvar eventKeys = /*#__PURE__*/Object.keys(events);\nvar appendEventListeners = function (element, activeActions, poser, _a) {\n    var props = _a.props;\n    return eventKeys.forEach(function (key) {\n        if (props[key]) events[key](element, activeActions, poser, props);\n    });\n};\n\nvar ORIGIN_START = 0;\nvar ORIGIN_CENTER = '50%';\nvar ORIGIN_END = '100%';\nvar findCenter = function (_a) {\n    var top = _a.top,\n        right = _a.right,\n        bottom = _a.bottom,\n        left = _a.left;\n    return {\n        x: (left + right) / 2,\n        y: (top + bottom) / 2\n    };\n};\nvar positionalProps = ['width', 'height', 'top', 'left', 'bottom', 'right'];\nvar positionalPropsDict = /*#__PURE__*/new Set(positionalProps);\nvar checkPositionalProp = function (key) {\n    return positionalPropsDict.has(key);\n};\nvar hasPositionalProps = function (pose) {\n    return Object.keys(pose).some(checkPositionalProp);\n};\nvar isFlipPose = function (flip, key, state) {\n    return state.props.element instanceof HTMLElement && (flip === true || key === 'flip');\n};\nvar popmotion_pose_es_setValue = function (_a, key, to) {\n    var values = _a.values,\n        props = _a.props;\n    if (values.has(key)) {\n        var raw = values.get(key).raw;\n        raw.update(to);\n        raw.update(to);\n    } else {\n        values.set(key, {\n            raw: popmotion_es_value(to, function (v) {\n                return props.elementStyler.set(key, v);\n            })\n        });\n    }\n};\nvar explicitlyFlipPose = function (state, nextPose) {\n    var _a = state.props,\n        dimensions = _a.dimensions,\n        elementStyler = _a.elementStyler;\n    dimensions.measure();\n    var width = nextPose.width,\n        height = nextPose.height,\n        top = nextPose.top,\n        left = nextPose.left,\n        bottom = nextPose.bottom,\n        right = nextPose.right,\n        position = nextPose.position,\n        remainingPose = popmotion_pose_es_rest(nextPose, [\"width\", \"height\", \"top\", \"left\", \"bottom\", \"right\", \"position\"]);\n    var propsToSet = positionalProps.concat('position').reduce(function (acc, key) {\n        if (nextPose[key] !== undefined) {\n            acc[key] = popmotion_pose_es_resolveProp(nextPose[key], state.props);\n        }\n        return acc;\n    }, {});\n    elementStyler.set(propsToSet).render();\n    return implicitlyFlipPose(state, remainingPose);\n};\nvar implicitlyFlipPose = function (state, nextPose) {\n    var _a = state.props,\n        dimensions = _a.dimensions,\n        element = _a.element,\n        elementStyler = _a.elementStyler;\n    if (!dimensions.has()) return {};\n    var prev = dimensions.get();\n    var next = measureWithoutTransform(element);\n    var originX = prev.left === next.left ? ORIGIN_START : prev.right === next.right ? ORIGIN_END : ORIGIN_CENTER;\n    var originY = prev.top === next.top ? ORIGIN_START : prev.bottom === next.bottom ? ORIGIN_END : ORIGIN_CENTER;\n    elementStyler.set({ originX: originX, originY: originY });\n    if (prev.width !== next.width) {\n        popmotion_pose_es_setValue(state, 'scaleX', prev.width / next.width);\n        nextPose.scaleX = 1;\n    }\n    if (prev.height !== next.height) {\n        popmotion_pose_es_setValue(state, 'scaleY', prev.height / next.height);\n        nextPose.scaleY = 1;\n    }\n    var prevCenter = findCenter(prev);\n    var nextCenter = findCenter(next);\n    if (originX === ORIGIN_CENTER) {\n        popmotion_pose_es_setValue(state, 'x', prevCenter.x - nextCenter.x);\n        nextPose.x = 0;\n    }\n    if (originY === ORIGIN_CENTER) {\n        popmotion_pose_es_setValue(state, 'y', prevCenter.y - nextCenter.y);\n        nextPose.y = 0;\n    }\n    elementStyler.render();\n    return nextPose;\n};\nvar flipPose = function (props, nextPose) {\n    return hasPositionalProps(nextPose) ? explicitlyFlipPose(props, nextPose) : implicitlyFlipPose(props, nextPose);\n};\n\nvar getPosFromMatrix = function (matrix, pos) {\n    return parseFloat(matrix.split(', ')[pos]);\n};\nvar getTranslateFromMatrix = function (pos2, pos3) {\n    return function (element, bbox, _a) {\n        var transform$$1 = _a.transform;\n        if (transform$$1 === 'none') return 0;\n        var matrix3d = transform$$1.match(/^matrix3d\\((.+)\\)$/);\n        if (matrix3d) return getPosFromMatrix(matrix3d[1], pos3);\n        return getPosFromMatrix(transform$$1.match(/^matrix\\((.+)\\)$/)[1], pos2);\n    };\n};\nvar positionalValues = {\n    width: function (element, _a) {\n        var width = _a.width;\n        return width;\n    },\n    height: function (element, _a) {\n        var height = _a.height;\n        return height;\n    },\n    top: function (element, bbox, _a) {\n        var top = _a.top;\n        return parseFloat(top);\n    },\n    left: function (element, bbox, _a) {\n        var left = _a.left;\n        return parseFloat(left);\n    },\n    bottom: function (element, _a, _b) {\n        var height = _a.height;\n        var top = _b.top;\n        return parseFloat(top) + height;\n    },\n    right: function (element, _a, _b) {\n        var width = _a.width;\n        var left = _b.left;\n        return parseFloat(left) + width;\n    },\n    x: /*#__PURE__*/getTranslateFromMatrix(4, 13),\n    y: /*#__PURE__*/getTranslateFromMatrix(5, 14)\n};\nvar isPositionalKey = function (v) {\n    return positionalValues[v] !== undefined;\n};\nvar isPositional = function (pose) {\n    return Object.keys(pose).some(isPositionalKey);\n};\nvar convertPositionalUnits = function (state, nextPose) {\n    var values = state.values,\n        props = state.props;\n    var element = props.element,\n        elementStyler = props.elementStyler;\n    var positionalPoseKeys = Object.keys(nextPose).filter(isPositionalKey);\n    var changedPositionalKeys = [];\n    var elementComputedStyle = getComputedStyle(element);\n    var applyAtEndHasBeenCopied = false;\n    positionalPoseKeys.forEach(function (key) {\n        var value$$1 = values.get(key);\n        var fromValueType = popmotion_pose_es_getValueType(value$$1.raw.get());\n        var to = popmotion_pose_es_resolveProp(nextPose[key], props);\n        var toValueType = popmotion_pose_es_getValueType(to);\n        if (fromValueType !== toValueType) {\n            changedPositionalKeys.push(key);\n            if (!applyAtEndHasBeenCopied) {\n                applyAtEndHasBeenCopied = true;\n                nextPose.applyAtEnd = nextPose.applyAtEnd ? popmotion_pose_es_assign({}, nextPose.applyAtEnd) : {};\n            }\n            nextPose.applyAtEnd[key] = nextPose.applyAtEnd[key] || nextPose[key];\n            popmotion_pose_es_setValue(state, key, to);\n        }\n    });\n    if (!changedPositionalKeys.length) return nextPose;\n    var originBbox = element.getBoundingClientRect();\n    var top = elementComputedStyle.top,\n        left = elementComputedStyle.left,\n        bottom = elementComputedStyle.bottom,\n        right = elementComputedStyle.right,\n        transform$$1 = elementComputedStyle.transform;\n    var originComputedStyle = { top: top, left: left, bottom: bottom, right: right, transform: transform$$1 };\n    elementStyler.render();\n    var targetBbox = element.getBoundingClientRect();\n    changedPositionalKeys.forEach(function (key) {\n        popmotion_pose_es_setValue(state, key, positionalValues[key](element, originBbox, originComputedStyle));\n        nextPose[key] = positionalValues[key](element, targetBbox, elementComputedStyle);\n    });\n    elementStyler.render();\n    return nextPose;\n};\n\nvar getCurrent = function (prop) {\n    return function (_a) {\n        var elementStyler = _a.elementStyler;\n        return elementStyler.get(prop);\n    };\n};\nvar dragPoses = function (draggable) {\n    var drag = {\n        preTransition: function (_a) {\n            var dimensions = _a.dimensions;\n            return dimensions.measure();\n        }\n    };\n    var dragEnd = {};\n    if (draggable === true || draggable === 'x') {\n        drag.x = dragEnd.x = getCurrent('x');\n    }\n    if (draggable === true || draggable === 'y') {\n        drag.y = dragEnd.y = getCurrent('y');\n    }\n    return { drag: drag, dragEnd: dragEnd };\n};\nvar createPoseConfig = function (element, _a) {\n    var onDragStart = _a.onDragStart,\n        onDragEnd = _a.onDragEnd,\n        onPressStart = _a.onPressStart,\n        onPressEnd = _a.onPressEnd,\n        draggable = _a.draggable,\n        hoverable = _a.hoverable,\n        focusable = _a.focusable,\n        pressable = _a.pressable,\n        dragBounds = _a.dragBounds,\n        config = popmotion_pose_es_rest(_a, [\"onDragStart\", \"onDragEnd\", \"onPressStart\", \"onPressEnd\", \"draggable\", \"hoverable\", \"focusable\", \"pressable\", \"dragBounds\"]);\n    var poseConfig = popmotion_pose_es_assign({ flip: {} }, config, { props: popmotion_pose_es_assign({}, config.props, { onDragStart: onDragStart,\n            onDragEnd: onDragEnd,\n            onPressStart: onPressStart,\n            onPressEnd: onPressEnd,\n            dragBounds: dragBounds,\n            draggable: draggable,\n            hoverable: hoverable,\n            focusable: focusable,\n            pressable: pressable,\n            element: element, elementStyler: stylefire_es(element, { preparseOutput: false }), dimensions: createDimensions(element) }) });\n    if (draggable) {\n        var _b = dragPoses(draggable),\n            drag = _b.drag,\n            dragEnd = _b.dragEnd;\n        poseConfig.drag = popmotion_pose_es_assign({}, drag, poseConfig.drag);\n        poseConfig.dragEnd = popmotion_pose_es_assign({}, dragEnd, poseConfig.dragEnd);\n    }\n    return poseConfig;\n};\nvar domPose = /*#__PURE__*/popmotion_pose_es_pose({\n    posePriority: ['drag', 'press', 'focus', 'hover'],\n    transformPose: function (_a, name, state) {\n        var flip = _a.flip,\n            pose$$1 = popmotion_pose_es_rest(_a, [\"flip\"]);\n        if (isFlipPose(flip, name, state)) {\n            return flipPose(state, pose$$1);\n        } else if (isPositional(pose$$1)) {\n            return convertPositionalUnits(state, pose$$1);\n        }\n        return pose$$1;\n    },\n    forceRender: function (_a) {\n        var elementStyler = _a.elementStyler;\n        elementStyler.render();\n    },\n    addListenerToValue: function (key, elementStyler) {\n        return function (v) {\n            return elementStyler.set(key, v);\n        };\n    },\n    readValueFromSource: function (key, _a) {\n        var elementStyler = _a.elementStyler,\n            dragBounds = _a.dragBounds;\n        var value$$1 = elementStyler.get(key);\n        if (dragBounds && (key === 'x' || key === 'y')) {\n            var bound = key === 'x' ? dragBounds.left || dragBounds.right : dragBounds.top || dragBounds.bottom;\n            if (bound) {\n                var boundType = popmotion_pose_es_getValueType(bound);\n                value$$1 = boundType.transform(value$$1);\n            }\n        }\n        return isNaN(value$$1) ? value$$1 : parseFloat(value$$1);\n    },\n    setValueNative: function (key, to, _a) {\n        var elementStyler = _a.elementStyler;\n        return elementStyler.set(key, to);\n    },\n    extendAPI: function (api, _a, config) {\n        var props = _a.props,\n            activeActions = _a.activeActions;\n        var measure = props.dimensions.measure;\n        var poserApi = popmotion_pose_es_assign({}, api, { addChild: function (element, childConfig) {\n                return api._addChild(createPoseConfig(element, childConfig), domPose);\n            }, measure: measure, flip: function (op) {\n                if (op) {\n                    measure();\n                    op();\n                }\n                return api.set('flip');\n            } });\n        props.elementStyler.render();\n        appendEventListeners(props.element, activeActions, poserApi, config);\n        return poserApi;\n    }\n});\nvar domPose$1 = function (element, config) {\n    return domPose(createPoseConfig(element, config));\n};\n\n/* harmony default export */ var popmotion_pose_es = (domPose$1);\n\n// CONCATENATED MODULE: ./node_modules/react-pose/node_modules/@emotion/memoize/dist/memoize.browser.esm.js\nfunction memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\n/* harmony default export */ var memoize_browser_esm = (memoize);\n\n// CONCATENATED MODULE: ./node_modules/react-pose/node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js\n\n\nvar reactPropsRegex = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/; // https://esbench.com/bench/5bfee68a4cd7e6009ef61d23\n\nvar is_prop_valid_browser_esm_index = memoize_browser_esm(function (prop) {\n  return reactPropsRegex.test(prop) || prop.charCodeAt(0) === 111\n  /* o */\n  && prop.charCodeAt(1) === 110\n  /* n */\n  && prop.charCodeAt(2) < 91;\n}\n/* Z+1 */\n);\n\n/* harmony default export */ var is_prop_valid_browser_esm = (is_prop_valid_browser_esm_index);\n\n// CONCATENATED MODULE: ./node_modules/react-pose/dist/react-pose.es.js\n\n\n\n\n\n\nvar react_pose_es_hasChanged = function (prev, next) {\r\n    if (prev === next)\r\n        return false;\r\n    var prevIsArray = Array.isArray(prev);\r\n    var nextIsArray = Array.isArray(next);\r\n    if (prevIsArray !== nextIsArray || (!prevIsArray && !nextIsArray)) {\r\n        return true;\r\n    }\r\n    else if (prevIsArray && nextIsArray) {\r\n        var numPrev = prev.length;\r\n        var numNext = next.length;\r\n        if (numPrev !== numNext)\r\n            return true;\r\n        for (var i = 0; i < numPrev; i++) {\r\n            if (prev[i] !== next[i])\r\n                return true;\r\n        }\r\n    }\r\n    return false;\r\n};\n\nvar pickAssign = function (shouldPick, sources) {\r\n    return sources.reduce(function (picked, source) {\r\n        for (var key in source) {\r\n            if (shouldPick(key)) {\r\n                picked[key] = source[key];\r\n            }\r\n        }\r\n        return picked;\r\n    }, {});\r\n};\n\nvar react_pose_es_a = Object(external_root_React_commonjs_react_commonjs2_react_[\"createContext\"])({}), PoseParentConsumer = react_pose_es_a.Consumer, PoseParentProvider = react_pose_es_a.Provider;\r\nvar calcPopFromFlowStyle = function (el) {\r\n    var offsetTop = el.offsetTop, offsetLeft = el.offsetLeft, offsetWidth = el.offsetWidth, offsetHeight = el.offsetHeight;\r\n    return {\r\n        position: 'absolute',\r\n        top: offsetTop,\r\n        left: offsetLeft,\r\n        width: offsetWidth,\r\n        height: offsetHeight\r\n    };\r\n};\r\nvar hasPose = function (pose, key) {\r\n    return Array.isArray(pose) ? pose.indexOf(key) !== -1 : pose === key;\r\n};\r\nvar objectToMap = function (obj) {\r\n    return Object.keys(obj).reduce(function (map, key) {\r\n        map.set(key, { raw: obj[key] });\r\n        return map;\r\n    }, new Map());\r\n};\r\nvar testAlwaysTrue = function () { return true; };\r\nvar filterProps = function (_a) {\r\n    var elementType = _a.elementType, poseConfig = _a.poseConfig, onValueChange = _a.onValueChange, innerRef = _a.innerRef, _pose = _a._pose, pose = _a.pose, initialPose = _a.initialPose, poseKey = _a.poseKey, onPoseComplete = _a.onPoseComplete, getParentPoseConfig = _a.getParentPoseConfig, registerChild = _a.registerChild, onUnmount = _a.onUnmount, getInitialPoseFromParent = _a.getInitialPoseFromParent, popFromFlow = _a.popFromFlow, values = _a.values, parentValues = _a.parentValues, onDragStart = _a.onDragStart, onDragEnd = _a.onDragEnd, onPressStart = _a.onPressStart, onPressEnd = _a.onPressEnd, props = __rest(_a, [\"elementType\", \"poseConfig\", \"onValueChange\", \"innerRef\", \"_pose\", \"pose\", \"initialPose\", \"poseKey\", \"onPoseComplete\", \"getParentPoseConfig\", \"registerChild\", \"onUnmount\", \"getInitialPoseFromParent\", \"popFromFlow\", \"values\", \"parentValues\", \"onDragStart\", \"onDragEnd\", \"onPressStart\", \"onPressEnd\"]);\r\n    return props;\r\n};\r\nvar react_pose_es_PoseElement = (function (_super) {\r\n    __extends(PoseElement, _super);\r\n    function PoseElement(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.children = new Set();\r\n        _this.childrenHandlers = {\r\n            registerChild: function (props) {\r\n                _this.children.add(props);\r\n                if (_this.poser)\r\n                    _this.flushChildren();\r\n            },\r\n            onUnmount: function (child) { return _this.poser.removeChild(child); },\r\n            getParentPoseConfig: function () { return _this.poseConfig; },\r\n            getInitialPoseFromParent: function () { return _this.getInitialPose(); }\r\n        };\r\n        _this.setRef = function (ref) {\r\n            warning(ref === null || (ref instanceof Element && _this.ref === undefined), 'ref must be provided to the same DOM component for the entire lifecycle of a posed component.');\r\n            _this.ref = ref;\r\n            var innerRef = _this.props.innerRef;\r\n            if (!innerRef)\r\n                return;\r\n            if (typeof innerRef === 'function') {\r\n                innerRef(ref);\r\n            }\r\n            else {\r\n                innerRef.current = ref;\r\n            }\r\n        };\r\n        _this.shouldForwardProp =\r\n            typeof _this.props.elementType === 'string' ? is_prop_valid_browser_esm : testAlwaysTrue;\r\n        var poseConfig = _this.props.poseConfig;\r\n        _this.poseConfig =\r\n            typeof poseConfig === 'function'\r\n                ? poseConfig(filterProps(props))\r\n                : poseConfig;\r\n        return _this;\r\n    }\r\n    PoseElement.prototype.getInitialPose = function () {\r\n        var _a = this.props, getInitialPoseFromParent = _a.getInitialPoseFromParent, pose = _a.pose, _pose = _a._pose, initialPose = _a.initialPose;\r\n        if (initialPose) {\r\n            return initialPose;\r\n        }\r\n        else {\r\n            var parentPose = getInitialPoseFromParent && getInitialPoseFromParent();\r\n            var initialPoses = (Array.isArray(parentPose)\r\n                ? parentPose\r\n                : [parentPose])\r\n                .concat(pose, _pose)\r\n                .filter(Boolean);\r\n            return initialPoses.length > 0 ? initialPoses : undefined;\r\n        }\r\n    };\r\n    PoseElement.prototype.getFirstPose = function () {\r\n        var _a = this.props, initialPose = _a.initialPose, pose = _a.pose, _pose = _a._pose;\r\n        if (!initialPose)\r\n            return;\r\n        var firstPose = (Array.isArray(pose) ? pose : [pose])\r\n            .concat(_pose)\r\n            .filter(Boolean);\r\n        return firstPose.length === 1 ? firstPose[0] : firstPose;\r\n    };\r\n    PoseElement.prototype.getSetProps = function () {\r\n        var props = filterProps(this.props);\r\n        if (this.props.popFromFlow && this.ref && this.ref instanceof HTMLElement) {\r\n            if (!this.popStyle) {\r\n                props.style = __assign({}, props.style, calcPopFromFlowStyle(this.ref));\r\n                this.popStyle = props.style;\r\n            }\r\n            else {\r\n                props.style = this.popStyle;\r\n            }\r\n        }\r\n        else {\r\n            this.popStyle = null;\r\n        }\r\n        return props;\r\n    };\r\n    PoseElement.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        invariant(this.ref instanceof Element, \"No valid DOM ref found. If you're converting an existing component via posed(Component), you must ensure you're passing the ref to the host DOM node via the React.forwardRef function.\");\r\n        var _a = this.props, onValueChange = _a.onValueChange, registerChild = _a.registerChild, values = _a.values, parentValues = _a.parentValues, onDragStart = _a.onDragStart, onDragEnd = _a.onDragEnd, onPressStart = _a.onPressStart, onPressEnd = _a.onPressEnd;\r\n        var config = __assign({}, this.poseConfig, { initialPose: this.getInitialPose(), values: values || this.poseConfig.values, parentValues: parentValues ? objectToMap(parentValues) : undefined, props: this.getSetProps(), onDragStart: onDragStart,\r\n            onDragEnd: onDragEnd,\r\n            onPressStart: onPressStart,\r\n            onPressEnd: onPressEnd, onChange: onValueChange });\r\n        if (!registerChild) {\r\n            this.initPoser(popmotion_pose_es(this.ref, config));\r\n        }\r\n        else {\r\n            registerChild({\r\n                element: this.ref,\r\n                poseConfig: config,\r\n                onRegistered: function (poser) { return _this.initPoser(poser); }\r\n            });\r\n        }\r\n    };\r\n    PoseElement.prototype.getSnapshotBeforeUpdate = function () {\r\n        var _a = this.props, pose = _a.pose, _pose = _a._pose;\r\n        if (hasPose(pose, 'flip') || hasPose(_pose, 'flip'))\r\n            this.poser.measure();\r\n        return null;\r\n    };\r\n    PoseElement.prototype.componentDidUpdate = function (prevProps) {\r\n        var _a = this.props, pose = _a.pose, _pose = _a._pose, poseKey = _a.poseKey;\r\n        this.poser.setProps(this.getSetProps());\r\n        if (poseKey !== prevProps.poseKey ||\r\n            react_pose_es_hasChanged(prevProps.pose, pose) ||\r\n            pose === 'flip') {\r\n            this.setPose(pose);\r\n        }\r\n        if (_pose !== prevProps._pose || _pose === 'flip')\r\n            this.setPose(_pose);\r\n    };\r\n    PoseElement.prototype.componentWillUnmount = function () {\r\n        if (!this.poser)\r\n            return;\r\n        var onUnmount = this.props.onUnmount;\r\n        if (onUnmount)\r\n            onUnmount(this.poser);\r\n        this.poser.destroy();\r\n    };\r\n    PoseElement.prototype.initPoser = function (poser) {\r\n        this.poser = poser;\r\n        this.flushChildren();\r\n        var firstPose = this.getFirstPose();\r\n        if (firstPose)\r\n            this.setPose(firstPose);\r\n    };\r\n    PoseElement.prototype.setPose = function (pose) {\r\n        var _this = this;\r\n        var onPoseComplete = this.props.onPoseComplete;\r\n        var poseList = Array.isArray(pose) ? pose : [pose];\r\n        Promise.all(poseList.map(function (key) { return key && _this.poser.set(key); })).then(function () { return onPoseComplete && onPoseComplete(pose); });\r\n    };\r\n    PoseElement.prototype.flushChildren = function () {\r\n        var _this = this;\r\n        this.children.forEach(function (_a) {\r\n            var element = _a.element, poseConfig = _a.poseConfig, onRegistered = _a.onRegistered;\r\n            return onRegistered(_this.poser.addChild(element, poseConfig));\r\n        });\r\n        this.children.clear();\r\n    };\r\n    PoseElement.prototype.render = function () {\r\n        var elementType = this.props.elementType;\r\n        return (external_root_React_commonjs_react_commonjs2_react_default.a.createElement(PoseParentProvider, { value: this.childrenHandlers }, Object(external_root_React_commonjs_react_commonjs2_react_[\"createElement\"])(elementType, pickAssign(this.shouldForwardProp, [\r\n            this.getSetProps(),\r\n            { ref: this.setRef }\r\n        ]))));\r\n    };\r\n    return PoseElement;\r\n}(external_root_React_commonjs_react_commonjs2_react_[\"PureComponent\"]));\n\nvar supportedElements = [\r\n    'a',\r\n    'article',\r\n    'aside',\r\n    'audio',\r\n    'b',\r\n    'blockquote',\r\n    'body',\r\n    'br',\r\n    'button',\r\n    'canvas',\r\n    'caption',\r\n    'cite',\r\n    'code',\r\n    'col',\r\n    'colgroup',\r\n    'data',\r\n    'datalist',\r\n    'dialog',\r\n    'div',\r\n    'em',\r\n    'embed',\r\n    'fieldset',\r\n    'figcaption',\r\n    'figure',\r\n    'footer',\r\n    'form',\r\n    'h1',\r\n    'h2',\r\n    'h3',\r\n    'h4',\r\n    'h5',\r\n    'h6',\r\n    'head',\r\n    'header',\r\n    'hgroup',\r\n    'hr',\r\n    'i',\r\n    'iframe',\r\n    'img',\r\n    'input',\r\n    'label',\r\n    'legend',\r\n    'li',\r\n    'nav',\r\n    'object',\r\n    'ol',\r\n    'option',\r\n    'p',\r\n    'param',\r\n    'picture',\r\n    'pre',\r\n    'progress',\r\n    'q',\r\n    'section',\r\n    'select',\r\n    'span',\r\n    'strong',\r\n    'table',\r\n    'tbody',\r\n    'td',\r\n    'textarea',\r\n    'tfoot',\r\n    'th',\r\n    'thead',\r\n    'time',\r\n    'title',\r\n    'tr',\r\n    'ul',\r\n    'video',\r\n    'circle',\r\n    'clipPath',\r\n    'defs',\r\n    'ellipse',\r\n    'g',\r\n    'image',\r\n    'line',\r\n    'linearGradient',\r\n    'mask',\r\n    'path',\r\n    'pattern',\r\n    'polygon',\r\n    'polyline',\r\n    'radialGradient',\r\n    'rect',\r\n    'stop',\r\n    'svg',\r\n    'text',\r\n    'tspan'\r\n];\n\nvar componentCache = new Map();\r\nvar createComponentFactory = function (key) {\r\n    var componentFactory = function (poseConfig) {\r\n        if (poseConfig === void 0) { poseConfig = {}; }\r\n        return Object(external_root_React_commonjs_react_commonjs2_react_[\"forwardRef\"])(function (_a, ref) {\r\n            var _b = _a.withParent, withParent = _b === void 0 ? true : _b, props = __rest(_a, [\"withParent\"]);\r\n            warning(props.innerRef === undefined, 'innerRef is deprecated. Please use ref instead.');\r\n            return !withParent || props.parentValues ? (external_root_React_commonjs_react_commonjs2_react_default.a.createElement(react_pose_es_PoseElement, __assign({ poseConfig: poseConfig, innerRef: ref, elementType: key }, props))) : (external_root_React_commonjs_react_commonjs2_react_default.a.createElement(PoseParentConsumer, null, function (parentCtx) { return (external_root_React_commonjs_react_commonjs2_react_default.a.createElement(react_pose_es_PoseElement, __assign({ poseConfig: poseConfig, elementType: key, innerRef: ref }, props, parentCtx))); }));\r\n        });\r\n    };\r\n    componentCache.set(key, componentFactory);\r\n    return componentFactory;\r\n};\r\nvar getComponentFactory = function (key) {\r\n    return componentCache.has(key)\r\n        ? componentCache.get(key)\r\n        : createComponentFactory(key);\r\n};\r\nvar posed = (function (component) {\r\n    return getComponentFactory(component);\r\n});\r\nsupportedElements.reduce(function (acc, key) {\r\n    acc[key] = createComponentFactory(key);\r\n    return acc;\r\n}, posed);\n\nvar getKey = function (child) {\r\n    invariant(child && child.key !== null, 'Every child of Transition must be given a unique key');\r\n    var childKey = typeof child.key === 'number' ? child.key.toString() : child.key;\r\n    return childKey.replace('.$', '');\r\n};\r\nvar prependProps = function (element, props) {\r\n    return Object(external_root_React_commonjs_react_commonjs2_react_[\"createElement\"])(element.type, __assign({ key: element.key, ref: element.ref }, props, element.props));\r\n};\r\nvar handleTransition = function (_a, _b) {\r\n    var displayedChildren = _b.displayedChildren, finishedLeaving = _b.finishedLeaving, hasInitialized = _b.hasInitialized, indexedChildren = _b.indexedChildren, scheduleChildRemoval = _b.scheduleChildRemoval;\r\n    var incomingChildren = _a.children, preEnterPose = _a.preEnterPose, enterPose = _a.enterPose, exitPose = _a.exitPose, animateOnMount = _a.animateOnMount, enterAfterExit = _a.enterAfterExit, flipMove = _a.flipMove, onRest = _a.onRest, propsForChildren = __rest(_a, [\"children\", \"preEnterPose\", \"enterPose\", \"exitPose\", \"animateOnMount\", \"enterAfterExit\", \"flipMove\", \"onRest\"]);\r\n    var targetChildren = makeChildList(incomingChildren);\r\n    var nextState = {\r\n        displayedChildren: []\r\n    };\r\n    if (false) {}\r\n    var prevKeys = displayedChildren.map(getKey);\r\n    var nextKeys = targetChildren.map(getKey);\r\n    var hasPropsForChildren = Object.keys(propsForChildren).length !== 0;\r\n    var entering = new Set(nextKeys.filter(function (key) { return finishedLeaving.hasOwnProperty(key) || prevKeys.indexOf(key) === -1; }));\r\n    entering.forEach(function (key) { return delete finishedLeaving[key]; });\r\n    var leaving = [];\r\n    var newlyLeaving = {};\r\n    prevKeys.forEach(function (key) {\r\n        if (entering.has(key)) {\r\n            return;\r\n        }\r\n        var isLeaving = finishedLeaving.hasOwnProperty(key);\r\n        if (!isLeaving && nextKeys.indexOf(key) !== -1) {\r\n            return;\r\n        }\r\n        leaving.push(key);\r\n        if (!isLeaving) {\r\n            finishedLeaving[key] = false;\r\n            newlyLeaving[key] = true;\r\n        }\r\n    });\r\n    var moving = new Set(prevKeys.filter(function (key, i) {\r\n        return !entering.has(key) || leaving.indexOf(key) === -1;\r\n    }));\r\n    targetChildren.forEach(function (child) {\r\n        var newChildProps = {};\r\n        if (entering.has(child.key)) {\r\n            if (hasInitialized || animateOnMount) {\r\n                newChildProps.initialPose = preEnterPose;\r\n            }\r\n            newChildProps._pose = enterPose;\r\n        }\r\n        else if (moving.has(child.key) && flipMove) {\r\n            newChildProps._pose = [enterPose, 'flip'];\r\n        }\r\n        else {\r\n            newChildProps._pose = enterPose;\r\n        }\r\n        var newChild = Object(external_root_React_commonjs_react_commonjs2_react_[\"cloneElement\"])(child, newChildProps);\r\n        indexedChildren[child.key] = newChild;\r\n        nextState.displayedChildren.push(hasPropsForChildren ? prependProps(newChild, propsForChildren) : newChild);\r\n    });\r\n    leaving.forEach(function (key) {\r\n        var child = indexedChildren[key];\r\n        var newChild = newlyLeaving[key]\r\n            ? Object(external_root_React_commonjs_react_commonjs2_react_[\"cloneElement\"])(child, {\r\n                _pose: exitPose,\r\n                onPoseComplete: function (pose) {\r\n                    if (pose === exitPose)\r\n                        scheduleChildRemoval(key);\r\n                    var onPoseComplete = child.props.onPoseComplete;\r\n                    if (onPoseComplete)\r\n                        onPoseComplete(pose);\r\n                },\r\n                popFromFlow: flipMove\r\n            })\r\n            : child;\r\n        var insertionIndex = prevKeys.indexOf(key);\r\n        indexedChildren[child.key] = newChild;\r\n        nextState.displayedChildren.splice(insertionIndex, 0, hasPropsForChildren ? prependProps(newChild, propsForChildren) : newChild);\r\n    });\r\n    return nextState;\r\n};\r\nvar handleChildrenTransitions = (function (props, state) {\r\n    var newState = handleTransition(props, state);\r\n    newState.hasInitialized = true;\r\n    return newState;\r\n});\r\nvar makeChildList = function (children) {\r\n    var list = [];\r\n    external_root_React_commonjs_react_commonjs2_react_[\"Children\"].forEach(children, function (child) { return child && list.push(child); });\r\n    return list;\r\n};\n\nvar react_pose_es_Transition = (function (_super) {\r\n    __extends(Transition, _super);\r\n    function Transition() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            displayedChildren: [],\r\n            finishedLeaving: {},\r\n            hasInitialized: false,\r\n            indexedChildren: {},\r\n            scheduleChildRemoval: function (key) { return _this.removeChild(key); }\r\n        };\r\n        return _this;\r\n    }\r\n    Transition.prototype.removeChild = function (key) {\r\n        var _a = this.state, displayedChildren = _a.displayedChildren, finishedLeaving = _a.finishedLeaving;\r\n        var _b = this.props, enterAfterExit = _b.enterAfterExit, onRest = _b.onRest;\r\n        if (!finishedLeaving.hasOwnProperty(key))\r\n            return;\r\n        finishedLeaving[key] = true;\r\n        if (!Object.keys(finishedLeaving).every(function (leavingKey) { return finishedLeaving[leavingKey]; })) {\r\n            return;\r\n        }\r\n        var targetChildren = displayedChildren.filter(function (child) { return !finishedLeaving.hasOwnProperty(child.key); });\r\n        var newState = enterAfterExit\r\n            ? __assign({ finishedLeaving: {} }, handleChildrenTransitions(__assign({}, this.props, { enterAfterExit: false }), __assign({}, this.state, { displayedChildren: targetChildren }))) : {\r\n            finishedLeaving: {},\r\n            displayedChildren: targetChildren\r\n        };\r\n        this.setState(newState, onRest);\r\n    };\r\n    Transition.prototype.shouldComponentUpdate = function (nextProps, nextState) {\r\n        return this.state !== nextState;\r\n    };\r\n    Transition.prototype.render = function () {\r\n        return this.state.displayedChildren;\r\n    };\r\n    Transition.defaultProps = {\r\n        flipMove: false,\r\n        enterAfterExit: false,\r\n        preEnterPose: 'exit',\r\n        enterPose: 'enter',\r\n        exitPose: 'exit'\r\n    };\r\n    Transition.getDerivedStateFromProps = handleChildrenTransitions;\r\n    return Transition;\r\n}(external_root_React_commonjs_react_commonjs2_react_[\"Component\"]));\n\nvar react_pose_es_PoseGroup = (function (_super) {\r\n    __extends(PoseGroup, _super);\r\n    function PoseGroup() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    PoseGroup.prototype.render = function () {\r\n        return Object(external_root_React_commonjs_react_commonjs2_react_[\"createElement\"])(react_pose_es_Transition, __assign({}, this.props));\r\n    };\r\n    PoseGroup.defaultProps = {\r\n        flipMove: true\r\n    };\r\n    return PoseGroup;\r\n}(external_root_React_commonjs_react_commonjs2_react_[\"Component\"]));\n\n/* harmony default export */ var react_pose_es = (posed);\n\n\n// CONCATENATED MODULE: ./src/components/icon-info-blue.jsx\n\n // TODO remove this file entirely when icon component is ready.\n\nvar icon_info_blue_IconInfoBlue = function IconInfoBlue(_ref) {\n  var className = _ref.className;\n  return external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"svg\", {\n    className: className,\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 16 16\"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"g\", {\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"circle\", {\n    cx: \"8\",\n    cy: \"8\",\n    r: \"8\",\n    fill: \"#2196F3\"\n  }), external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"g\", {\n    fill: \"#FFF\",\n    transform: \"translate(6.5 4)\"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"circle\", {\n    cx: \"1.5\",\n    cy: \"1\",\n    r: \"1\"\n  }), external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"rect\", {\n    width: \"2\",\n    height: \"5\",\n    x: \".5\",\n    y: \"3\",\n    rx: \"1\"\n  }))));\n};\n\nicon_info_blue_IconInfoBlue.propTypes = {\n  className: prop_types_default.a.string\n};\n/* harmony default export */ var icon_info_blue = (icon_info_blue_IconInfoBlue);\n// CONCATENATED MODULE: ./src/components/popover/popover-bubble.jsx\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\nvar FadeIn = react_pose_es.span({\n  enter: {\n    opacity: 1,\n    transition: {\n      duration: 150\n    }\n  },\n  exit: {\n    opacity: 0,\n    transition: {\n      duration: 150\n    }\n  }\n});\n\nvar popover_bubble_PopoverBubble =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(PopoverBubble, _React$PureComponent);\n\n  function PopoverBubble() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PopoverBubble);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PopoverBubble)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.calculatePosition = function () {\n      var _this$props = _this.props,\n          alignment = _this$props.alignment,\n          target_rectangle = _this$props.target_rectangle,\n          _this$props$margin = _this$props.margin,\n          margin = _this$props$margin === void 0 ? 0 : _this$props$margin;\n\n      switch (alignment) {\n        case 'top':\n          return {\n            left: target_rectangle.width / 2 + target_rectangle.left,\n            bottom: window.innerHeight - target_rectangle.top + margin,\n            transform: 'translateX(-50%)'\n          };\n\n        case 'bottom':\n          return {\n            left: target_rectangle.width / 2 + target_rectangle.left,\n            top: target_rectangle.bottom + margin,\n            transform: 'translateX(-50%)'\n          };\n\n        case 'left':\n          return {\n            right: window.innerWidth - target_rectangle.left + margin,\n            top: target_rectangle.height / 2 + target_rectangle.top,\n            transform: 'translateY(-50%)'\n          };\n\n        case 'right':\n          return {\n            left: target_rectangle.right + margin,\n            top: target_rectangle.height / 2 + target_rectangle.top,\n            transform: 'translateY(-50%)'\n          };\n\n        default:\n          return {\n            left: target_rectangle.left,\n            top: target_rectangle.top\n          };\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(PopoverBubble, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          alignment = _this$props2.alignment,\n          className = _this$props2.className,\n          has_error = _this$props2.has_error,\n          icon = _this$props2.icon,\n          id = _this$props2.id,\n          is_open = _this$props2.is_open,\n          message = _this$props2.message,\n          target_rectangle = _this$props2.target_rectangle,\n          portal_container = _this$props2.portal_container;\n      if (!target_rectangle) return null;\n      var popover_bubble = external_root_React_commonjs_react_commonjs2_react_default.a.createElement(react_pose_es_PoseGroup, null, is_open && external_root_React_commonjs_react_commonjs2_react_default.a.createElement(FadeIn, {\n        key: \"fade_in\",\n        initialPose: \"exit\",\n        style: {\n          position: 'fixed',\n          zIndex: 999\n        }\n      }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"span\", {\n        style: target_rectangle ? this.calculatePosition() : {},\n        \"data-popover-pos\": alignment,\n        className: classnames_default()(className, 'dc-popover__bubble', {\n          'dc-popover__bubble--error': has_error\n        }),\n        id: id\n      }, icon === 'info' && external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"i\", {\n        className: \"dc-popover__bubble__icon\"\n      }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(icon_info_blue, null)), external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"span\", {\n        className: \"dc-popover__bubble__text\"\n      }, message), external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"span\", {\n        className: \"dc-popover__bubble__arrow\"\n      }))));\n      return external_commonjs_react_dom_commonjs2_react_dom_root_ReactDOM_default.a.createPortal(popover_bubble, document.getElementById(portal_container));\n    }\n  }]);\n\n  return PopoverBubble;\n}(external_root_React_commonjs_react_commonjs2_react_default.a.PureComponent);\n\npopover_bubble_PopoverBubble.propTypes = {\n  alignment: prop_types_default.a.string,\n  children: prop_types_default.a.node,\n  className: prop_types_default.a.string,\n  has_error: prop_types_default.a.bool,\n  icon: prop_types_default.a.string,\n  id: prop_types_default.a.string,\n  is_open: prop_types_default.a.bool,\n  margin: prop_types_default.a.number,\n  message: prop_types_default.a.string.isRequired,\n  target_rectangle: prop_types_default.a.object\n};\n/* harmony default export */ var popover_popover_bubble = (popover_bubble_PopoverBubble);\n// CONCATENATED MODULE: ./src/components/icon-info-outline.jsx\n\n\n // TODO remove this file entirely when icon component is ready.\n\nvar icon_info_outline_IconInfoOutline = function IconInfoOutline(_ref) {\n  var className = _ref.className,\n      onMouseEnter = _ref.onMouseEnter,\n      onMouseLeave = _ref.onMouseLeave;\n  return external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"svg\", {\n    className: classnames_default()('inline-icon', className),\n    height: \"16\",\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave,\n    viewBox: \"0 0 16 16\",\n    width: \"16\"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"path\", {\n    className: \"color1-fill\",\n    fill: \"rgba(0, 0, 0, 0.16)\",\n    fillRule: \"evenodd\",\n    d: \"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16zM8 6a.75.75 0 1 0 0-1.5A.75.75 0 0 0 8 6zm0 1a.5.5 0 0 0-.5.5v4a.5.5 0 1 0 1 0v-4A.5.5 0 0 0 8 7z\"\n  }));\n};\n\nicon_info_outline_IconInfoOutline.propTypes = {\n  className: prop_types_default.a.string\n};\n/* harmony default export */ var icon_info_outline = (icon_info_outline_IconInfoOutline);\n// CONCATENATED MODULE: ./src/components/icon-question.jsx\n\n // TODO remove this file entirely when icon component is ready.\n\nvar icon_question_IconQuestion = function IconQuestion(_ref) {\n  var className = _ref.className;\n  return external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"svg\", {\n    className: className,\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 16 16\"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"g\", {\n    fill: \"#FFF\",\n    fillRule: \"evenodd\"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"path\", {\n    d: \"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zm0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14z\",\n    fillRule: \"nonzero\"\n  }), external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"path\", {\n    d: \"M7.39 9.518c.007-.373.052-.668.134-.885.082-.216.25-.456.503-.72l.646-.636c.276-.298.415-.618.415-.96 0-.33-.09-.588-.272-.774-.18-.187-.444-.28-.789-.28-.335 0-.605.084-.809.254a.842.842 0 0 0-.306.682H6c.007-.508.196-.918.57-1.23.373-.313.859-.469 1.457-.469.622 0 1.106.16 1.453.478.347.318.52.755.52 1.31 0 .55-.266 1.091-.799 1.625l-.538.508c-.24.255-.36.62-.36 1.097h-.912zm-.039 1.492a.5.5 0 0 1 .136-.355c.09-.096.224-.144.402-.144.178 0 .312.048.404.144a.493.493 0 0 1 .139.355.477.477 0 0 1-.139.351c-.092.093-.226.139-.404.139-.178 0-.312-.046-.402-.139a.481.481 0 0 1-.136-.35z\"\n  })));\n};\n\nicon_question_IconQuestion.propTypes = {\n  className: prop_types_default.a.string\n};\n/* harmony default export */ var icon_question = (icon_question_IconQuestion);\n// CONCATENATED MODULE: ./src/components/icon-red-dot.jsx\n\n // TODO remove this file entirely when icon component is ready.\n\nvar icon_red_dot_IconRedDot = function IconRedDot(_ref) {\n  var className = _ref.className;\n  return external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"svg\", {\n    className: className,\n    width: \"4\",\n    height: \"4\"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"circle\", {\n    cx: \"1163\",\n    cy: \"626\",\n    r: \"2\",\n    transform: \"translate(-1161 -624)\",\n    fill: \"#E31C4B\",\n    fillRule: \"nonzero\"\n  }));\n};\n\nicon_red_dot_IconRedDot.propTypes = {\n  className: prop_types_default.a.string\n};\n/* harmony default export */ var icon_red_dot = (icon_red_dot_IconRedDot);\n// CONCATENATED MODULE: ./src/components/popover/popover.jsx\nfunction popover_typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { popover_typeof = function _typeof(obj) { return typeof obj; }; } else { popover_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return popover_typeof(obj); }\n\nfunction popover_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction popover_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction popover_createClass(Constructor, protoProps, staticProps) { if (protoProps) popover_defineProperties(Constructor.prototype, protoProps); if (staticProps) popover_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction popover_possibleConstructorReturn(self, call) { if (call && (popover_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return popover_assertThisInitialized(self); }\n\nfunction popover_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction popover_getPrototypeOf(o) { popover_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return popover_getPrototypeOf(o); }\n\nfunction popover_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) popover_setPrototypeOf(subClass, superClass); }\n\nfunction popover_setPrototypeOf(o, p) { popover_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return popover_setPrototypeOf(o, p); }\n\n\n\n\n\n\n\n\n\nvar popover_Popover =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  popover_inherits(Popover, _React$PureComponent);\n\n  function Popover(props) {\n    var _this;\n\n    popover_classCallCheck(this, Popover);\n\n    _this = popover_possibleConstructorReturn(this, popover_getPrototypeOf(Popover).call(this, props));\n\n    _this.toggleOpen = function () {\n      _this.setState({\n        is_open: Boolean(_this.props.message),\n        target_rectangle: _this.target_reference.current.getBoundingClientRect()\n      });\n    };\n\n    _this.toggleClose = function () {\n      return _this.setState({\n        is_open: false\n      });\n    };\n\n    _this.state = {\n      is_open: false,\n      target_rectangle: null\n    };\n    _this.target_reference = external_root_React_commonjs_react_commonjs2_react_default.a.createRef();\n    return _this;\n  }\n\n  popover_createClass(Popover, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        is_open: this.props.has_error,\n        target_rectangle: this.target_reference.current.getBoundingClientRect()\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          alignment = _this$props.alignment,\n          children = _this$props.children,\n          classNameBubble = _this$props.classNameBubble,\n          classNameTarget = _this$props.classNameTarget,\n          classNameTargetIcon = _this$props.classNameTargetIcon,\n          disable_target_icon = _this$props.disable_target_icon,\n          has_error = _this$props.has_error,\n          icon = _this$props.icon,\n          id = _this$props.id,\n          margin = _this$props.margin,\n          message = _this$props.message;\n      var icon_class_name = classnames_default()(classNameTargetIcon, icon);\n      return external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"div\", {\n        className: \"dc-popover\",\n        id: id,\n        onMouseEnter: this.toggleOpen,\n        onMouseLeave: this.toggleClose\n      }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"div\", {\n        className: classnames_default()(classNameTarget, 'dc-popover__target'),\n        ref: this.target_reference\n      }, !disable_target_icon && external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"i\", {\n        className: message ? 'dc-popover__target__icon' : 'dc-popover__target__icon--disabled'\n      }, icon === 'info' && external_root_React_commonjs_react_commonjs2_react_default.a.createElement(icon_info_outline, {\n        className: icon_class_name\n      }), icon === 'question' && external_root_React_commonjs_react_commonjs2_react_default.a.createElement(icon_question, {\n        className: icon_class_name\n      }), icon === 'dot' && external_root_React_commonjs_react_commonjs2_react_default.a.createElement(icon_red_dot, {\n        className: icon_class_name\n      })), children), external_root_React_commonjs_react_commonjs2_react_default.a.createElement(popover_popover_bubble, {\n        alignment: alignment,\n        className: classNameBubble,\n        has_error: has_error,\n        icon: icon,\n        id: \"\".concat(id, \"_bubble\"),\n        is_open: this.state.is_open,\n        target_rectangle: this.state.target_rectangle,\n        margin: margin,\n        message: message,\n        portal_container: this.props.portal_container\n      }));\n    }\n  }]);\n\n  return Popover;\n}(external_root_React_commonjs_react_commonjs2_react_default.a.PureComponent);\n\npopover_Popover.defaultProps = {\n  portal_container: 'deriv_app'\n};\npopover_Popover.propTypes = {\n  alignment: prop_types_default.a.string,\n  children: prop_types_default.a.node,\n  classNameBubble: prop_types_default.a.string,\n  classNameTarget: prop_types_default.a.string,\n  classNameTargetIcon: prop_types_default.a.string,\n  disable_target_icon: prop_types_default.a.bool,\n  has_error: prop_types_default.a.bool,\n  icon: prop_types_default.a.string,\n  id: prop_types_default.a.string,\n  margin: prop_types_default.a.number,\n  message: prop_types_default.a.string,\n  portal_container: prop_types_default.a.string\n};\n/* harmony default export */ var popover_popover = (popover_Popover);\n// CONCATENATED MODULE: ./src/components/popover/index.js\n/* concated harmony reexport default */__webpack_require__.d(__webpack_exports__, \"default\", function() { return popover_popover; });\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzPzlhYjQiLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL25vZGVfbW9kdWxlcy9zdHlsZS12YWx1ZS10eXBlcy9kaXN0L3N0eWxlLXZhbHVlLXR5cGVzLmVzLmpzPzIxYjciLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL25vZGVfbW9kdWxlcy9oZXktbGlzdGVuL2Rpc3QvaGV5LWxpc3Rlbi5lcy5qcz9mMzY4Iiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvZnJhbWVzeW5jL2Rpc3QvZnJhbWVzeW5jLmVzLmpzPzc5NGIiLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL25vZGVfbW9kdWxlcy9AcG9wbW90aW9uL2Vhc2luZy9kaXN0L2Vhc2luZy5lcy5qcz85NzIxIiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvQHBvcG1vdGlvbi9wb3Bjb3JuL2Rpc3QvcG9wY29ybi5lcy5qcz9iNGE0Iiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvc3R5bGVmaXJlL2Rpc3Qvc3R5bGVmaXJlLmVzLmpzP2Q4MzciLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL25vZGVfbW9kdWxlcy9wb3Btb3Rpb24vZGlzdC9wb3Btb3Rpb24uZXMuanM/MzVlYiIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3Bvc2UtY29yZS9kaXN0L3Bvc2UtY29yZS5lcy5qcz9lODhmIiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcG9wbW90aW9uLXBvc2UvZGlzdC9wb3Btb3Rpb24tcG9zZS5lcy5qcz9hYzJmIiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcmVhY3QtcG9zZS9ub2RlX21vZHVsZXMvQGVtb3Rpb24vbWVtb2l6ZS9kaXN0L21lbW9pemUuYnJvd3Nlci5lc20uanM/NzM0OCIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3JlYWN0LXBvc2Uvbm9kZV9tb2R1bGVzL0BlbW90aW9uL2lzLXByb3AtdmFsaWQvZGlzdC9pcy1wcm9wLXZhbGlkLmJyb3dzZXIuZXNtLmpzPzkxMTgiLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL25vZGVfbW9kdWxlcy9yZWFjdC1wb3NlL2Rpc3QvcmVhY3QtcG9zZS5lcy5qcz8xMWZjIiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9pY29uLWluZm8tYmx1ZS5qc3g/ZjAxNSIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvcG9wb3Zlci9wb3BvdmVyLWJ1YmJsZS5qc3g/MDdkNSIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvaWNvbi1pbmZvLW91dGxpbmUuanN4P2E5MjkiLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL3NyYy9jb21wb25lbnRzL2ljb24tcXVlc3Rpb24uanN4PzYzNGYiLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL3NyYy9jb21wb25lbnRzL2ljb24tcmVkLWRvdC5qc3g/MjQ5YyIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvcG9wb3Zlci9wb3BvdmVyLmpzeD8zNTkxIiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9wb3BvdmVyL2luZGV4LmpzP2I2NjciXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuXHJcbnZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XG5cbnZhciBjbGFtcCA9IGZ1bmN0aW9uIChtaW4sIG1heCkgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHtcclxuICAgIHJldHVybiBNYXRoLm1heChNYXRoLm1pbih2LCBtYXgpLCBtaW4pO1xyXG59OyB9O1xyXG52YXIgc2FuaXRpemUgPSBmdW5jdGlvbiAodikgeyByZXR1cm4gKHYgJSAxID8gTnVtYmVyKHYudG9GaXhlZCg1KSkgOiB2KTsgfTtcclxudmFyIGZsb2F0UmVnZXggPSAvKC0pPyhcXGRbXFxkXFwuXSopL2c7XHJcbnZhciBjb2xvclJlZ2V4ID0gLygjWzAtOWEtZl17Nn18I1swLTlhLWZdezN9fCMoPzpbMC05YS1mXXsyfSl7Miw0fXwocmdifGhzbClhP1xcKCgtP1xcZCslP1ssXFxzXSspezIsM31cXHMqW1xcZFxcLl0rJT9cXCkpL2dpO1xyXG52YXIgc2luZ2xlQ29sb3JSZWdleCA9IC9eKCNbMC05YS1mXXszfXwjKD86WzAtOWEtZl17Mn0pezIsNH18KHJnYnxoc2wpYT9cXCgoLT9cXGQrJT9bLFxcc10rKXsyLDN9XFxzKltcXGRcXC5dKyU/XFwpKSQvaTtcblxudmFyIG51bWJlciA9IHtcclxuICAgIHRlc3Q6IGZ1bmN0aW9uICh2KSB7IHJldHVybiB0eXBlb2YgdiA9PT0gJ251bWJlcic7IH0sXHJcbiAgICBwYXJzZTogcGFyc2VGbG9hdCxcclxuICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHY7IH1cclxufTtcclxudmFyIGFscGhhID0gX19hc3NpZ24oe30sIG51bWJlciwgeyB0cmFuc2Zvcm06IGNsYW1wKDAsIDEpIH0pO1xyXG52YXIgc2NhbGUgPSBfX2Fzc2lnbih7fSwgbnVtYmVyLCB7IGRlZmF1bHQ6IDEgfSk7XG5cbnZhciBjcmVhdGVVbml0VHlwZSA9IGZ1bmN0aW9uICh1bml0KSB7IHJldHVybiAoe1xyXG4gICAgdGVzdDogZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHYgPT09ICdzdHJpbmcnICYmIHYuZW5kc1dpdGgodW5pdCkgJiYgdi5zcGxpdCgnICcpLmxlbmd0aCA9PT0gMTtcclxuICAgIH0sXHJcbiAgICBwYXJzZTogcGFyc2VGbG9hdCxcclxuICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gKHYpIHsgcmV0dXJuIFwiXCIgKyB2ICsgdW5pdDsgfVxyXG59KTsgfTtcclxudmFyIGRlZ3JlZXMgPSBjcmVhdGVVbml0VHlwZSgnZGVnJyk7XHJcbnZhciBwZXJjZW50ID0gY3JlYXRlVW5pdFR5cGUoJyUnKTtcclxudmFyIHB4ID0gY3JlYXRlVW5pdFR5cGUoJ3B4Jyk7XHJcbnZhciB2aCA9IGNyZWF0ZVVuaXRUeXBlKCd2aCcpO1xyXG52YXIgdncgPSBjcmVhdGVVbml0VHlwZSgndncnKTtcclxudmFyIHByb2dyZXNzUGVyY2VudGFnZSA9IF9fYXNzaWduKHt9LCBwZXJjZW50LCB7IHBhcnNlOiBmdW5jdGlvbiAodikgeyByZXR1cm4gcGVyY2VudC5wYXJzZSh2KSAvIDEwMDsgfSwgdHJhbnNmb3JtOiBmdW5jdGlvbiAodikgeyByZXR1cm4gcGVyY2VudC50cmFuc2Zvcm0odiAqIDEwMCk7IH0gfSk7XG5cbnZhciBnZXRWYWx1ZUZyb21GdW5jdGlvblN0cmluZyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlLnN1YnN0cmluZyh2YWx1ZS5pbmRleE9mKCcoJykgKyAxLCB2YWx1ZS5sYXN0SW5kZXhPZignKScpKTtcclxufTtcclxudmFyIGNsYW1wUmdiVW5pdCA9IGNsYW1wKDAsIDI1NSk7XHJcbnZhciBpc1JnYmEgPSBmdW5jdGlvbiAodikgeyByZXR1cm4gdi5yZWQgIT09IHVuZGVmaW5lZDsgfTtcclxudmFyIGlzSHNsYSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiB2Lmh1ZSAhPT0gdW5kZWZpbmVkOyB9O1xyXG52YXIgc3BsaXRDb2xvclZhbHVlcyA9IGZ1bmN0aW9uICh0ZXJtcykge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJylcclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgdmFyIHZhbHVlcyA9IHt9O1xyXG4gICAgICAgIHZhciB2YWx1ZXNBcnJheSA9IGdldFZhbHVlRnJvbUZ1bmN0aW9uU3RyaW5nKHYpLnNwbGl0KC8sXFxzKi8pO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhbHVlc1t0ZXJtc1tpXV0gPVxyXG4gICAgICAgICAgICAgICAgdmFsdWVzQXJyYXlbaV0gIT09IHVuZGVmaW5lZCA/IHBhcnNlRmxvYXQodmFsdWVzQXJyYXlbaV0pIDogMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlcztcclxuICAgIH07XHJcbn07XHJcbnZhciByZ2JhVGVtcGxhdGUgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciByZWQgPSBfYS5yZWQsIGdyZWVuID0gX2EuZ3JlZW4sIGJsdWUgPSBfYS5ibHVlLCBfYiA9IF9hLmFscGhhLCBhbHBoYSQkMSA9IF9iID09PSB2b2lkIDAgPyAxIDogX2I7XHJcbiAgICByZXR1cm4gXCJyZ2JhKFwiICsgcmVkICsgXCIsIFwiICsgZ3JlZW4gKyBcIiwgXCIgKyBibHVlICsgXCIsIFwiICsgYWxwaGEkJDEgKyBcIilcIjtcclxufTtcclxudmFyIGhzbGFUZW1wbGF0ZSA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgdmFyIGh1ZSA9IF9hLmh1ZSwgc2F0dXJhdGlvbiA9IF9hLnNhdHVyYXRpb24sIGxpZ2h0bmVzcyA9IF9hLmxpZ2h0bmVzcywgX2IgPSBfYS5hbHBoYSwgYWxwaGEkJDEgPSBfYiA9PT0gdm9pZCAwID8gMSA6IF9iO1xyXG4gICAgcmV0dXJuIFwiaHNsYShcIiArIGh1ZSArIFwiLCBcIiArIHNhdHVyYXRpb24gKyBcIiwgXCIgKyBsaWdodG5lc3MgKyBcIiwgXCIgKyBhbHBoYSQkMSArIFwiKVwiO1xyXG59O1xyXG52YXIgcmdiVW5pdCA9IF9fYXNzaWduKHt9LCBudW1iZXIsIHsgdHJhbnNmb3JtOiBmdW5jdGlvbiAodikgeyByZXR1cm4gTWF0aC5yb3VuZChjbGFtcFJnYlVuaXQodikpOyB9IH0pO1xyXG5mdW5jdGlvbiBpc0NvbG9yU3RyaW5nKGNvbG9yLCBjb2xvclR5cGUpIHtcclxuICAgIHJldHVybiBjb2xvci5zdGFydHNXaXRoKGNvbG9yVHlwZSkgJiYgc2luZ2xlQ29sb3JSZWdleC50ZXN0KGNvbG9yKTtcclxufVxyXG52YXIgcmdiYSA9IHtcclxuICAgIHRlc3Q6IGZ1bmN0aW9uICh2KSB7IHJldHVybiAodHlwZW9mIHYgPT09ICdzdHJpbmcnID8gaXNDb2xvclN0cmluZyh2LCAncmdiJykgOiBpc1JnYmEodikpOyB9LFxyXG4gICAgcGFyc2U6IHNwbGl0Q29sb3JWYWx1ZXMoWydyZWQnLCAnZ3JlZW4nLCAnYmx1ZScsICdhbHBoYSddKSxcclxuICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgdmFyIHJlZCA9IF9hLnJlZCwgZ3JlZW4gPSBfYS5ncmVlbiwgYmx1ZSA9IF9hLmJsdWUsIF9iID0gX2EuYWxwaGEsIGFscGhhJCQxID0gX2IgPT09IHZvaWQgMCA/IDEgOiBfYjtcclxuICAgICAgICByZXR1cm4gcmdiYVRlbXBsYXRlKHtcclxuICAgICAgICAgICAgcmVkOiByZ2JVbml0LnRyYW5zZm9ybShyZWQpLFxyXG4gICAgICAgICAgICBncmVlbjogcmdiVW5pdC50cmFuc2Zvcm0oZ3JlZW4pLFxyXG4gICAgICAgICAgICBibHVlOiByZ2JVbml0LnRyYW5zZm9ybShibHVlKSxcclxuICAgICAgICAgICAgYWxwaGE6IHNhbml0aXplKGFscGhhLnRyYW5zZm9ybShhbHBoYSQkMSkpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcbnZhciBoc2xhID0ge1xyXG4gICAgdGVzdDogZnVuY3Rpb24gKHYpIHsgcmV0dXJuICh0eXBlb2YgdiA9PT0gJ3N0cmluZycgPyBpc0NvbG9yU3RyaW5nKHYsICdoc2wnKSA6IGlzSHNsYSh2KSk7IH0sXHJcbiAgICBwYXJzZTogc3BsaXRDb2xvclZhbHVlcyhbJ2h1ZScsICdzYXR1cmF0aW9uJywgJ2xpZ2h0bmVzcycsICdhbHBoYSddKSxcclxuICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgdmFyIGh1ZSA9IF9hLmh1ZSwgc2F0dXJhdGlvbiA9IF9hLnNhdHVyYXRpb24sIGxpZ2h0bmVzcyA9IF9hLmxpZ2h0bmVzcywgX2IgPSBfYS5hbHBoYSwgYWxwaGEkJDEgPSBfYiA9PT0gdm9pZCAwID8gMSA6IF9iO1xyXG4gICAgICAgIHJldHVybiBoc2xhVGVtcGxhdGUoe1xyXG4gICAgICAgICAgICBodWU6IE1hdGgucm91bmQoaHVlKSxcclxuICAgICAgICAgICAgc2F0dXJhdGlvbjogcGVyY2VudC50cmFuc2Zvcm0oc2FuaXRpemUoc2F0dXJhdGlvbikpLFxyXG4gICAgICAgICAgICBsaWdodG5lc3M6IHBlcmNlbnQudHJhbnNmb3JtKHNhbml0aXplKGxpZ2h0bmVzcykpLFxyXG4gICAgICAgICAgICBhbHBoYTogc2FuaXRpemUoYWxwaGEudHJhbnNmb3JtKGFscGhhJCQxKSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxudmFyIGhleCA9IF9fYXNzaWduKHt9LCByZ2JhLCB7IHRlc3Q6IGZ1bmN0aW9uICh2KSB7IHJldHVybiB0eXBlb2YgdiA9PT0gJ3N0cmluZycgJiYgaXNDb2xvclN0cmluZyh2LCAnIycpOyB9LCBwYXJzZTogZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICB2YXIgciA9ICcnO1xyXG4gICAgICAgIHZhciBnID0gJyc7XHJcbiAgICAgICAgdmFyIGIgPSAnJztcclxuICAgICAgICBpZiAodi5sZW5ndGggPiA0KSB7XHJcbiAgICAgICAgICAgIHIgPSB2LnN1YnN0cigxLCAyKTtcclxuICAgICAgICAgICAgZyA9IHYuc3Vic3RyKDMsIDIpO1xyXG4gICAgICAgICAgICBiID0gdi5zdWJzdHIoNSwgMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByID0gdi5zdWJzdHIoMSwgMSk7XHJcbiAgICAgICAgICAgIGcgPSB2LnN1YnN0cigyLCAxKTtcclxuICAgICAgICAgICAgYiA9IHYuc3Vic3RyKDMsIDEpO1xyXG4gICAgICAgICAgICByICs9IHI7XHJcbiAgICAgICAgICAgIGcgKz0gZztcclxuICAgICAgICAgICAgYiArPSBiO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZWQ6IHBhcnNlSW50KHIsIDE2KSxcclxuICAgICAgICAgICAgZ3JlZW46IHBhcnNlSW50KGcsIDE2KSxcclxuICAgICAgICAgICAgYmx1ZTogcGFyc2VJbnQoYiwgMTYpLFxyXG4gICAgICAgICAgICBhbHBoYTogMVxyXG4gICAgICAgIH07XHJcbiAgICB9IH0pO1xyXG52YXIgY29sb3IgPSB7XHJcbiAgICB0ZXN0OiBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIHJldHVybiAodHlwZW9mIHYgPT09ICdzdHJpbmcnICYmIHNpbmdsZUNvbG9yUmVnZXgudGVzdCh2KSkgfHxcclxuICAgICAgICAgICAgaXNSZ2JhKHYpIHx8XHJcbiAgICAgICAgICAgIGlzSHNsYSh2KTtcclxuICAgIH0sXHJcbiAgICBwYXJzZTogZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICBpZiAocmdiYS50ZXN0KHYpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZ2JhLnBhcnNlKHYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChoc2xhLnRlc3QodikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhzbGEucGFyc2Uodik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGhleC50ZXN0KHYpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoZXgucGFyc2Uodik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2O1xyXG4gICAgfSxcclxuICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICBpZiAoaXNSZ2JhKHYpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZ2JhLnRyYW5zZm9ybSh2KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaXNIc2xhKHYpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoc2xhLnRyYW5zZm9ybSh2KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHY7XHJcbiAgICB9XHJcbn07XG5cbnZhciBDT0xPUl9UT0tFTiA9ICcke2N9JztcclxudmFyIE5VTUJFUl9UT0tFTiA9ICcke259JztcclxudmFyIGNvbnZlcnROdW1iZXJzVG9aZXJvID0gZnVuY3Rpb24gKHYpIHtcclxuICAgIHJldHVybiB0eXBlb2YgdiA9PT0gJ251bWJlcicgPyAwIDogdjtcclxufTtcclxudmFyIGNvbXBsZXggPSB7XHJcbiAgICB0ZXN0OiBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycgfHwgIWlzTmFOKHYpKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgdmFyIG51bVZhbHVlcyA9IDA7XHJcbiAgICAgICAgdmFyIGZvdW5kTnVtYmVycyA9IHYubWF0Y2goZmxvYXRSZWdleCk7XHJcbiAgICAgICAgdmFyIGZvdW5kQ29sb3JzID0gdi5tYXRjaChjb2xvclJlZ2V4KTtcclxuICAgICAgICBpZiAoZm91bmROdW1iZXJzKVxyXG4gICAgICAgICAgICBudW1WYWx1ZXMgKz0gZm91bmROdW1iZXJzLmxlbmd0aDtcclxuICAgICAgICBpZiAoZm91bmRDb2xvcnMpXHJcbiAgICAgICAgICAgIG51bVZhbHVlcyArPSBmb3VuZENvbG9ycy5sZW5ndGg7XHJcbiAgICAgICAgcmV0dXJuIG51bVZhbHVlcyA+IDA7XHJcbiAgICB9LFxyXG4gICAgcGFyc2U6IGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gdjtcclxuICAgICAgICB2YXIgcGFyc2VkID0gW107XHJcbiAgICAgICAgdmFyIGZvdW5kQ29sb3JzID0gaW5wdXQubWF0Y2goY29sb3JSZWdleCk7XHJcbiAgICAgICAgaWYgKGZvdW5kQ29sb3JzKSB7XHJcbiAgICAgICAgICAgIGlucHV0ID0gaW5wdXQucmVwbGFjZShjb2xvclJlZ2V4LCBDT0xPUl9UT0tFTik7XHJcbiAgICAgICAgICAgIHBhcnNlZC5wdXNoLmFwcGx5KHBhcnNlZCwgZm91bmRDb2xvcnMubWFwKGNvbG9yLnBhcnNlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmb3VuZE51bWJlcnMgPSBpbnB1dC5tYXRjaChmbG9hdFJlZ2V4KTtcclxuICAgICAgICBpZiAoZm91bmROdW1iZXJzKSB7XHJcbiAgICAgICAgICAgIHBhcnNlZC5wdXNoLmFwcGx5KHBhcnNlZCwgZm91bmROdW1iZXJzLm1hcChudW1iZXIucGFyc2UpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZDtcclxuICAgIH0sXHJcbiAgICBjcmVhdGVUcmFuc2Zvcm1lcjogZnVuY3Rpb24gKHByb3ApIHtcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSBwcm9wO1xyXG4gICAgICAgIHZhciB0b2tlbiA9IDA7XHJcbiAgICAgICAgdmFyIGZvdW5kQ29sb3JzID0gcHJvcC5tYXRjaChjb2xvclJlZ2V4KTtcclxuICAgICAgICB2YXIgbnVtQ29sb3JzID0gZm91bmRDb2xvcnMgPyBmb3VuZENvbG9ycy5sZW5ndGggOiAwO1xyXG4gICAgICAgIGlmIChmb3VuZENvbG9ycykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUNvbG9yczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UoZm91bmRDb2xvcnNbaV0sIENPTE9SX1RPS0VOKTtcclxuICAgICAgICAgICAgICAgIHRva2VuKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZvdW5kTnVtYmVycyA9IHRlbXBsYXRlLm1hdGNoKGZsb2F0UmVnZXgpO1xyXG4gICAgICAgIHZhciBudW1OdW1iZXJzID0gZm91bmROdW1iZXJzID8gZm91bmROdW1iZXJzLmxlbmd0aCA6IDA7XHJcbiAgICAgICAgaWYgKGZvdW5kTnVtYmVycykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bU51bWJlcnM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKGZvdW5kTnVtYmVyc1tpXSwgTlVNQkVSX1RPS0VOKTtcclxuICAgICAgICAgICAgICAgIHRva2VuKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSB0ZW1wbGF0ZTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQucmVwbGFjZShpIDwgbnVtQ29sb3JzID8gQ09MT1JfVE9LRU4gOiBOVU1CRVJfVE9LRU4sIGkgPCBudW1Db2xvcnMgPyBjb2xvci50cmFuc2Zvcm0odltpXSkgOiBzYW5pdGl6ZSh2W2ldKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuICAgIGdldEFuaW1hdGFibGVOb25lOiBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIHBhcnNlZFRhcmdldCA9IGNvbXBsZXgucGFyc2UodGFyZ2V0KTtcclxuICAgICAgICB2YXIgdGFyZ2V0VHJhbnNmb3JtZXIgPSBjb21wbGV4LmNyZWF0ZVRyYW5zZm9ybWVyKHRhcmdldCk7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldFRyYW5zZm9ybWVyKHBhcnNlZFRhcmdldC5tYXAoY29udmVydE51bWJlcnNUb1plcm8pKTtcclxuICAgIH1cclxufTtcblxuZXhwb3J0IHsgbnVtYmVyLCBzY2FsZSwgYWxwaGEsIGRlZ3JlZXMsIHBlcmNlbnQsIHByb2dyZXNzUGVyY2VudGFnZSwgcHgsIHZ3LCB2aCwgcmdiYSwgcmdiVW5pdCwgaHNsYSwgaGV4LCBjb2xvciwgY29tcGxleCB9O1xuIiwidmFyIHdhcm5pbmcgPSBmdW5jdGlvbiAoKSB7IH07XHJcbnZhciBpbnZhcmlhbnQgPSBmdW5jdGlvbiAoKSB7IH07XHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICB3YXJuaW5nID0gZnVuY3Rpb24gKGNoZWNrLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgaWYgKCFjaGVjayAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBpbnZhcmlhbnQgPSBmdW5jdGlvbiAoY2hlY2ssIG1lc3NhZ2UpIHtcclxuICAgICAgICBpZiAoIWNoZWNrKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XG5cbmV4cG9ydCB7IGludmFyaWFudCwgd2FybmluZyB9O1xuIiwiaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnaGV5LWxpc3Rlbic7XG5cbnZhciBwcmV2VGltZSA9IDA7XHJcbnZhciBvbk5leHRGcmFtZSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgIT09IHVuZGVmaW5lZFxyXG4gICAgPyBmdW5jdGlvbiAoY2FsbGJhY2spIHsgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spOyB9XHJcbiAgICA6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHZhciB0aW1lVG9DYWxsID0gTWF0aC5tYXgoMCwgMTYuNyAtICh0aW1lc3RhbXAgLSBwcmV2VGltZSkpO1xyXG4gICAgICAgIHByZXZUaW1lID0gdGltZXN0YW1wICsgdGltZVRvQ2FsbDtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNhbGxiYWNrKHByZXZUaW1lKTsgfSwgdGltZVRvQ2FsbCk7XHJcbiAgICB9O1xuXG52YXIgY3JlYXRlU3RlcCA9IChmdW5jdGlvbiAoc2V0UnVuTmV4dEZyYW1lKSB7XHJcbiAgICB2YXIgcHJvY2Vzc1RvUnVuID0gW107XHJcbiAgICB2YXIgcHJvY2Vzc1RvUnVuTmV4dEZyYW1lID0gW107XHJcbiAgICB2YXIgbnVtVGhpc0ZyYW1lID0gMDtcclxuICAgIHZhciBpc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgIHZhciBpID0gMDtcclxuICAgIHZhciBjYW5jZWxsZWQgPSBuZXcgV2Vha1NldCgpO1xyXG4gICAgdmFyIHRvS2VlcEFsaXZlID0gbmV3IFdlYWtTZXQoKTtcclxuICAgIHZhciByZW5kZXJTdGVwID0ge1xyXG4gICAgICAgIGNhbmNlbDogZnVuY3Rpb24gKHByb2Nlc3MpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4T2ZDYWxsYmFjayA9IHByb2Nlc3NUb1J1bk5leHRGcmFtZS5pbmRleE9mKHByb2Nlc3MpO1xyXG4gICAgICAgICAgICBjYW5jZWxsZWQuYWRkKHByb2Nlc3MpO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXhPZkNhbGxiYWNrICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc1RvUnVuTmV4dEZyYW1lLnNwbGljZShpbmRleE9mQ2FsbGJhY2ssIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcm9jZXNzOiBmdW5jdGlvbiAoZnJhbWUpIHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBpc1Byb2Nlc3NpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICBfYSA9IFtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NUb1J1bk5leHRGcmFtZSxcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NUb1J1blxyXG4gICAgICAgICAgICBdLCBwcm9jZXNzVG9SdW4gPSBfYVswXSwgcHJvY2Vzc1RvUnVuTmV4dEZyYW1lID0gX2FbMV07XHJcbiAgICAgICAgICAgIHByb2Nlc3NUb1J1bk5leHRGcmFtZS5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICBudW1UaGlzRnJhbWUgPSBwcm9jZXNzVG9SdW4ubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAobnVtVGhpc0ZyYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvY2Vzc18xO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG51bVRoaXNGcmFtZTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc18xID0gcHJvY2Vzc1RvUnVuW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NfMShmcmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvS2VlcEFsaXZlLmhhcyhwcm9jZXNzXzEpID09PSB0cnVlICYmICFjYW5jZWxsZWQuaGFzKHByb2Nlc3NfMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyU3RlcC5zY2hlZHVsZShwcm9jZXNzXzEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSdW5OZXh0RnJhbWUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlzUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2NoZWR1bGU6IGZ1bmN0aW9uIChwcm9jZXNzLCBrZWVwQWxpdmUsIGltbWVkaWF0ZSkge1xyXG4gICAgICAgICAgICBpZiAoa2VlcEFsaXZlID09PSB2b2lkIDApIHsga2VlcEFsaXZlID0gZmFsc2U7IH1cclxuICAgICAgICAgICAgaWYgKGltbWVkaWF0ZSA9PT0gdm9pZCAwKSB7IGltbWVkaWF0ZSA9IGZhbHNlOyB9XHJcbiAgICAgICAgICAgIGludmFyaWFudCh0eXBlb2YgcHJvY2VzcyA9PT0gJ2Z1bmN0aW9uJywgJ0FyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICAgICAgICB2YXIgYWRkVG9DdXJyZW50QnVmZmVyID0gaW1tZWRpYXRlICYmIGlzUHJvY2Vzc2luZztcclxuICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGFkZFRvQ3VycmVudEJ1ZmZlciA/IHByb2Nlc3NUb1J1biA6IHByb2Nlc3NUb1J1bk5leHRGcmFtZTtcclxuICAgICAgICAgICAgY2FuY2VsbGVkLmRlbGV0ZShwcm9jZXNzKTtcclxuICAgICAgICAgICAgaWYgKGtlZXBBbGl2ZSlcclxuICAgICAgICAgICAgICAgIHRvS2VlcEFsaXZlLmFkZChwcm9jZXNzKTtcclxuICAgICAgICAgICAgaWYgKGJ1ZmZlci5pbmRleE9mKHByb2Nlc3MpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyLnB1c2gocHJvY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWRkVG9DdXJyZW50QnVmZmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIG51bVRoaXNGcmFtZSA9IHByb2Nlc3NUb1J1bi5sZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHJlbmRlclN0ZXA7XHJcbn0pO1xuXG52YXIgU3RlcElkO1xyXG4oZnVuY3Rpb24gKFN0ZXBJZCkge1xyXG4gICAgU3RlcElkW1wiUmVhZFwiXSA9IFwicmVhZFwiO1xyXG4gICAgU3RlcElkW1wiVXBkYXRlXCJdID0gXCJ1cGRhdGVcIjtcclxuICAgIFN0ZXBJZFtcIlJlbmRlclwiXSA9IFwicmVuZGVyXCI7XHJcbiAgICBTdGVwSWRbXCJQb3N0UmVuZGVyXCJdID0gXCJwb3N0UmVuZGVyXCI7XHJcbiAgICBTdGVwSWRbXCJGaXhlZFVwZGF0ZVwiXSA9IFwiZml4ZWRVcGRhdGVcIjtcclxufSkoU3RlcElkIHx8IChTdGVwSWQgPSB7fSkpO1xuXG52YXIgbWF4RWxhcHNlZCA9IDQwO1xyXG52YXIgZGVmYXVsdEVsYXBzZWQgPSAoMSAvIDYwKSAqIDEwMDA7XHJcbnZhciB1c2VEZWZhdWx0RWxhcHNlZCA9IHRydWU7XHJcbnZhciB3aWxsUnVuTmV4dEZyYW1lID0gZmFsc2U7XHJcbnZhciBpc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxudmFyIGZyYW1lID0ge1xyXG4gICAgZGVsdGE6IDAsXHJcbiAgICB0aW1lc3RhbXA6IDBcclxufTtcclxudmFyIHN0ZXBzT3JkZXIgPSBbXHJcbiAgICBTdGVwSWQuUmVhZCxcclxuICAgIFN0ZXBJZC5VcGRhdGUsXHJcbiAgICBTdGVwSWQuUmVuZGVyLFxyXG4gICAgU3RlcElkLlBvc3RSZW5kZXJcclxuXTtcclxudmFyIHNldFdpbGxSdW5OZXh0RnJhbWUgPSBmdW5jdGlvbiAod2lsbFJ1bikgeyByZXR1cm4gKHdpbGxSdW5OZXh0RnJhbWUgPSB3aWxsUnVuKTsgfTtcclxudmFyIF9hID0gc3RlcHNPcmRlci5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7XHJcbiAgICB2YXIgc3RlcCA9IGNyZWF0ZVN0ZXAoc2V0V2lsbFJ1bk5leHRGcmFtZSk7XHJcbiAgICBhY2Muc3luY1trZXldID0gZnVuY3Rpb24gKHByb2Nlc3MsIGtlZXBBbGl2ZSwgaW1tZWRpYXRlKSB7XHJcbiAgICAgICAgaWYgKGtlZXBBbGl2ZSA9PT0gdm9pZCAwKSB7IGtlZXBBbGl2ZSA9IGZhbHNlOyB9XHJcbiAgICAgICAgaWYgKGltbWVkaWF0ZSA9PT0gdm9pZCAwKSB7IGltbWVkaWF0ZSA9IGZhbHNlOyB9XHJcbiAgICAgICAgaWYgKCF3aWxsUnVuTmV4dEZyYW1lKVxyXG4gICAgICAgICAgICBzdGFydExvb3AoKTtcclxuICAgICAgICBzdGVwLnNjaGVkdWxlKHByb2Nlc3MsIGtlZXBBbGl2ZSwgaW1tZWRpYXRlKTtcclxuICAgICAgICByZXR1cm4gcHJvY2VzcztcclxuICAgIH07XHJcbiAgICBhY2MuY2FuY2VsU3luY1trZXldID0gZnVuY3Rpb24gKHByb2Nlc3MpIHsgcmV0dXJuIHN0ZXAuY2FuY2VsKHByb2Nlc3MpOyB9O1xyXG4gICAgYWNjLnN0ZXBzW2tleV0gPSBzdGVwO1xyXG4gICAgcmV0dXJuIGFjYztcclxufSwge1xyXG4gICAgc3RlcHM6IHt9LFxyXG4gICAgc3luYzoge30sXHJcbiAgICBjYW5jZWxTeW5jOiB7fVxyXG59KSwgc3RlcHMgPSBfYS5zdGVwcywgc3luYyA9IF9hLnN5bmMsIGNhbmNlbFN5bmMgPSBfYS5jYW5jZWxTeW5jO1xyXG52YXIgcHJvY2Vzc1N0ZXAgPSBmdW5jdGlvbiAoc3RlcElkKSB7IHJldHVybiBzdGVwc1tzdGVwSWRdLnByb2Nlc3MoZnJhbWUpOyB9O1xyXG52YXIgcHJvY2Vzc0ZyYW1lID0gZnVuY3Rpb24gKHRpbWVzdGFtcCkge1xyXG4gICAgd2lsbFJ1bk5leHRGcmFtZSA9IGZhbHNlO1xyXG4gICAgZnJhbWUuZGVsdGEgPSB1c2VEZWZhdWx0RWxhcHNlZFxyXG4gICAgICAgID8gZGVmYXVsdEVsYXBzZWRcclxuICAgICAgICA6IE1hdGgubWF4KE1hdGgubWluKHRpbWVzdGFtcCAtIGZyYW1lLnRpbWVzdGFtcCwgbWF4RWxhcHNlZCksIDEpO1xyXG4gICAgaWYgKCF1c2VEZWZhdWx0RWxhcHNlZClcclxuICAgICAgICBkZWZhdWx0RWxhcHNlZCA9IGZyYW1lLmRlbHRhO1xyXG4gICAgZnJhbWUudGltZXN0YW1wID0gdGltZXN0YW1wO1xyXG4gICAgaXNQcm9jZXNzaW5nID0gdHJ1ZTtcclxuICAgIHN0ZXBzT3JkZXIuZm9yRWFjaChwcm9jZXNzU3RlcCk7XHJcbiAgICBpc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgIGlmICh3aWxsUnVuTmV4dEZyYW1lKSB7XHJcbiAgICAgICAgdXNlRGVmYXVsdEVsYXBzZWQgPSBmYWxzZTtcclxuICAgICAgICBvbk5leHRGcmFtZShwcm9jZXNzRnJhbWUpO1xyXG4gICAgfVxyXG59O1xyXG52YXIgc3RhcnRMb29wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgd2lsbFJ1bk5leHRGcmFtZSA9IHRydWU7XHJcbiAgICB1c2VEZWZhdWx0RWxhcHNlZCA9IHRydWU7XHJcbiAgICBpZiAoIWlzUHJvY2Vzc2luZylcclxuICAgICAgICBvbk5leHRGcmFtZShwcm9jZXNzRnJhbWUpO1xyXG59O1xyXG52YXIgZ2V0RnJhbWVEYXRhID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZnJhbWU7IH07XG5cbmV4cG9ydCBkZWZhdWx0IHN5bmM7XG5leHBvcnQgeyBjYW5jZWxTeW5jLCBnZXRGcmFtZURhdGEgfTtcbiIsInZhciBERUZBVUxUX09WRVJTSE9PVF9TVFJFTkdUSCA9IDEuNTI1O1xudmFyIHJldmVyc2VkID0gZnVuY3Rpb24gKGVhc2luZykge1xuICAgIHJldHVybiBmdW5jdGlvbiAocCkge1xuICAgICAgICByZXR1cm4gMSAtIGVhc2luZygxIC0gcCk7XG4gICAgfTtcbn07XG52YXIgbWlycm9yZWQgPSBmdW5jdGlvbiAoZWFzaW5nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwKSB7XG4gICAgICAgIHJldHVybiBwIDw9IDAuNSA/IGVhc2luZygyICogcCkgLyAyIDogKDIgLSBlYXNpbmcoMiAqICgxIC0gcCkpKSAvIDI7XG4gICAgfTtcbn07XG52YXIgY3JlYXRlUmV2ZXJzZWRFYXNpbmcgPSByZXZlcnNlZDtcbnZhciBjcmVhdGVNaXJyb3JlZEVhc2luZyA9IG1pcnJvcmVkO1xudmFyIGNyZWF0ZUV4cG9JbiA9IGZ1bmN0aW9uIChwb3dlcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocCkge1xuICAgICAgICByZXR1cm4gTWF0aC5wb3cocCwgcG93ZXIpO1xuICAgIH07XG59O1xudmFyIGNyZWF0ZUJhY2tJbiA9IGZ1bmN0aW9uIChwb3dlcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocCkge1xuICAgICAgICByZXR1cm4gcCAqIHAgKiAoKHBvd2VyICsgMSkgKiBwIC0gcG93ZXIpO1xuICAgIH07XG59O1xudmFyIGNyZWF0ZUFudGljaXBhdGVFYXNpbmcgPSBmdW5jdGlvbiAocG93ZXIpIHtcbiAgICB2YXIgYmFja0Vhc2luZyA9IGNyZWF0ZUJhY2tJbihwb3dlcik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwKSB7XG4gICAgICAgIHJldHVybiAocCAqPSAyKSA8IDEgPyAwLjUgKiBiYWNrRWFzaW5nKHApIDogMC41ICogKDIgLSBNYXRoLnBvdygyLCAtMTAgKiAocCAtIDEpKSk7XG4gICAgfTtcbn07XG52YXIgbGluZWFyID0gZnVuY3Rpb24gKHApIHtcbiAgICByZXR1cm4gcDtcbn07XG52YXIgZWFzZUluID0gLyojX19QVVJFX18qL2NyZWF0ZUV4cG9JbigyKTtcbnZhciBlYXNlT3V0ID0gLyojX19QVVJFX18qL3JldmVyc2VkKGVhc2VJbik7XG52YXIgZWFzZUluT3V0ID0gLyojX19QVVJFX18qL21pcnJvcmVkKGVhc2VJbik7XG52YXIgY2lyY0luID0gZnVuY3Rpb24gKHApIHtcbiAgICByZXR1cm4gMSAtIE1hdGguc2luKE1hdGguYWNvcyhwKSk7XG59O1xudmFyIGNpcmNPdXQgPSAvKiNfX1BVUkVfXyovcmV2ZXJzZWQoY2lyY0luKTtcbnZhciBjaXJjSW5PdXQgPSAvKiNfX1BVUkVfXyovbWlycm9yZWQoY2lyY091dCk7XG52YXIgYmFja0luID0gLyojX19QVVJFX18qL2NyZWF0ZUJhY2tJbihERUZBVUxUX09WRVJTSE9PVF9TVFJFTkdUSCk7XG52YXIgYmFja091dCA9IC8qI19fUFVSRV9fKi9yZXZlcnNlZChiYWNrSW4pO1xudmFyIGJhY2tJbk91dCA9IC8qI19fUFVSRV9fKi9taXJyb3JlZChiYWNrSW4pO1xudmFyIGFudGljaXBhdGUgPSAvKiNfX1BVUkVfXyovY3JlYXRlQW50aWNpcGF0ZUVhc2luZyhERUZBVUxUX09WRVJTSE9PVF9TVFJFTkdUSCk7XG52YXIgQk9VTkNFX0ZJUlNUX1RIUkVTSE9MRCA9IDQuMCAvIDExLjA7XG52YXIgQk9VTkNFX1NFQ09ORF9USFJFU0hPTEQgPSA4LjAgLyAxMS4wO1xudmFyIEJPVU5DRV9USElSRF9USFJFU0hPTEQgPSA5LjAgLyAxMC4wO1xudmFyIGNhID0gNDM1Ni4wIC8gMzYxLjA7XG52YXIgY2IgPSAzNTQ0Mi4wIC8gMTgwNS4wO1xudmFyIGNjID0gMTYwNjEuMCAvIDE4MDUuMDtcbnZhciBib3VuY2VPdXQgPSBmdW5jdGlvbiAocCkge1xuICAgIHZhciBwMiA9IHAgKiBwO1xuICAgIHJldHVybiBwIDwgQk9VTkNFX0ZJUlNUX1RIUkVTSE9MRCA/IDcuNTYyNSAqIHAyIDogcCA8IEJPVU5DRV9TRUNPTkRfVEhSRVNIT0xEID8gOS4wNzUgKiBwMiAtIDkuOSAqIHAgKyAzLjQgOiBwIDwgQk9VTkNFX1RISVJEX1RIUkVTSE9MRCA/IGNhICogcDIgLSBjYiAqIHAgKyBjYyA6IDEwLjggKiBwICogcCAtIDIwLjUyICogcCArIDEwLjcyO1xufTtcbnZhciBib3VuY2VJbiA9IGZ1bmN0aW9uIChwKSB7XG4gICAgcmV0dXJuIDEuMCAtIGJvdW5jZU91dCgxLjAgLSBwKTtcbn07XG52YXIgYm91bmNlSW5PdXQgPSBmdW5jdGlvbiAocCkge1xuICAgIHJldHVybiBwIDwgMC41ID8gMC41ICogKDEuMCAtIGJvdW5jZU91dCgxLjAgLSBwICogMi4wKSkgOiAwLjUgKiBib3VuY2VPdXQocCAqIDIuMCAtIDEuMCkgKyAwLjU7XG59O1xudmFyIE5FV1RPTl9JVEVSQVRJT05TID0gODtcbnZhciBORVdUT05fTUlOX1NMT1BFID0gMC4wMDE7XG52YXIgU1VCRElWSVNJT05fUFJFQ0lTSU9OID0gMC4wMDAwMDAxO1xudmFyIFNVQkRJVklTSU9OX01BWF9JVEVSQVRJT05TID0gMTA7XG52YXIgS19TUExJTkVfVEFCTEVfU0laRSA9IDExO1xudmFyIEtfU0FNUExFX1NURVBfU0laRSA9IDEuMCAvIChLX1NQTElORV9UQUJMRV9TSVpFIC0gMS4wKTtcbnZhciBGTE9BVF8zMl9TVVBQT1JURUQgPSB0eXBlb2YgRmxvYXQzMkFycmF5ICE9PSAndW5kZWZpbmVkJztcbnZhciBhID0gZnVuY3Rpb24gKGExLCBhMikge1xuICAgIHJldHVybiAxLjAgLSAzLjAgKiBhMiArIDMuMCAqIGExO1xufTtcbnZhciBiID0gZnVuY3Rpb24gKGExLCBhMikge1xuICAgIHJldHVybiAzLjAgKiBhMiAtIDYuMCAqIGExO1xufTtcbnZhciBjID0gZnVuY3Rpb24gKGExKSB7XG4gICAgcmV0dXJuIDMuMCAqIGExO1xufTtcbnZhciBnZXRTbG9wZSA9IGZ1bmN0aW9uICh0LCBhMSwgYTIpIHtcbiAgICByZXR1cm4gMy4wICogYShhMSwgYTIpICogdCAqIHQgKyAyLjAgKiBiKGExLCBhMikgKiB0ICsgYyhhMSk7XG59O1xudmFyIGNhbGNCZXppZXIgPSBmdW5jdGlvbiAodCwgYTEsIGEyKSB7XG4gICAgcmV0dXJuICgoYShhMSwgYTIpICogdCArIGIoYTEsIGEyKSkgKiB0ICsgYyhhMSkpICogdDtcbn07XG5mdW5jdGlvbiBjdWJpY0JlemllcihtWDEsIG1ZMSwgbVgyLCBtWTIpIHtcbiAgICB2YXIgc2FtcGxlVmFsdWVzID0gRkxPQVRfMzJfU1VQUE9SVEVEID8gbmV3IEZsb2F0MzJBcnJheShLX1NQTElORV9UQUJMRV9TSVpFKSA6IG5ldyBBcnJheShLX1NQTElORV9UQUJMRV9TSVpFKTtcbiAgICB2YXIgYmluYXJ5U3ViZGl2aWRlID0gZnVuY3Rpb24gKGFYLCBhQSwgYUIpIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB2YXIgY3VycmVudFg7XG4gICAgICAgIHZhciBjdXJyZW50VDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgY3VycmVudFQgPSBhQSArIChhQiAtIGFBKSAvIDIuMDtcbiAgICAgICAgICAgIGN1cnJlbnRYID0gY2FsY0JlemllcihjdXJyZW50VCwgbVgxLCBtWDIpIC0gYVg7XG4gICAgICAgICAgICBpZiAoY3VycmVudFggPiAwLjApIHtcbiAgICAgICAgICAgICAgICBhQiA9IGN1cnJlbnRUO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhQSA9IGN1cnJlbnRUO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChNYXRoLmFicyhjdXJyZW50WCkgPiBTVUJESVZJU0lPTl9QUkVDSVNJT04gJiYgKytpIDwgU1VCRElWSVNJT05fTUFYX0lURVJBVElPTlMpO1xuICAgICAgICByZXR1cm4gY3VycmVudFQ7XG4gICAgfTtcbiAgICB2YXIgbmV3dG9uUmFwaHNvbkl0ZXJhdGUgPSBmdW5jdGlvbiAoYVgsIGFHdWVzc1QpIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB2YXIgY3VycmVudFNsb3BlID0gMDtcbiAgICAgICAgdmFyIGN1cnJlbnRYO1xuICAgICAgICBmb3IgKDsgaSA8IE5FV1RPTl9JVEVSQVRJT05TOyArK2kpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTbG9wZSA9IGdldFNsb3BlKGFHdWVzc1QsIG1YMSwgbVgyKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50U2xvcGUgPT09IDAuMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhR3Vlc3NUO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudFggPSBjYWxjQmV6aWVyKGFHdWVzc1QsIG1YMSwgbVgyKSAtIGFYO1xuICAgICAgICAgICAgYUd1ZXNzVCAtPSBjdXJyZW50WCAvIGN1cnJlbnRTbG9wZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYUd1ZXNzVDtcbiAgICB9O1xuICAgIHZhciBjYWxjU2FtcGxlVmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEtfU1BMSU5FX1RBQkxFX1NJWkU7ICsraSkge1xuICAgICAgICAgICAgc2FtcGxlVmFsdWVzW2ldID0gY2FsY0JlemllcihpICogS19TQU1QTEVfU1RFUF9TSVpFLCBtWDEsIG1YMik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciBnZXRURm9yWCA9IGZ1bmN0aW9uIChhWCkge1xuICAgICAgICB2YXIgaW50ZXJ2YWxTdGFydCA9IDAuMDtcbiAgICAgICAgdmFyIGN1cnJlbnRTYW1wbGUgPSAxO1xuICAgICAgICB2YXIgbGFzdFNhbXBsZSA9IEtfU1BMSU5FX1RBQkxFX1NJWkUgLSAxO1xuICAgICAgICB2YXIgZGlzdCA9IDAuMDtcbiAgICAgICAgdmFyIGd1ZXNzRm9yVCA9IDAuMDtcbiAgICAgICAgdmFyIGluaXRpYWxTbG9wZSA9IDAuMDtcbiAgICAgICAgZm9yICg7IGN1cnJlbnRTYW1wbGUgIT09IGxhc3RTYW1wbGUgJiYgc2FtcGxlVmFsdWVzW2N1cnJlbnRTYW1wbGVdIDw9IGFYOyArK2N1cnJlbnRTYW1wbGUpIHtcbiAgICAgICAgICAgIGludGVydmFsU3RhcnQgKz0gS19TQU1QTEVfU1RFUF9TSVpFO1xuICAgICAgICB9XG4gICAgICAgIC0tY3VycmVudFNhbXBsZTtcbiAgICAgICAgZGlzdCA9IChhWCAtIHNhbXBsZVZhbHVlc1tjdXJyZW50U2FtcGxlXSkgLyAoc2FtcGxlVmFsdWVzW2N1cnJlbnRTYW1wbGUgKyAxXSAtIHNhbXBsZVZhbHVlc1tjdXJyZW50U2FtcGxlXSk7XG4gICAgICAgIGd1ZXNzRm9yVCA9IGludGVydmFsU3RhcnQgKyBkaXN0ICogS19TQU1QTEVfU1RFUF9TSVpFO1xuICAgICAgICBpbml0aWFsU2xvcGUgPSBnZXRTbG9wZShndWVzc0ZvclQsIG1YMSwgbVgyKTtcbiAgICAgICAgaWYgKGluaXRpYWxTbG9wZSA+PSBORVdUT05fTUlOX1NMT1BFKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3dG9uUmFwaHNvbkl0ZXJhdGUoYVgsIGd1ZXNzRm9yVCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5pdGlhbFNsb3BlID09PSAwLjApIHtcbiAgICAgICAgICAgIHJldHVybiBndWVzc0ZvclQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYmluYXJ5U3ViZGl2aWRlKGFYLCBpbnRlcnZhbFN0YXJ0LCBpbnRlcnZhbFN0YXJ0ICsgS19TQU1QTEVfU1RFUF9TSVpFKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY2FsY1NhbXBsZVZhbHVlcygpO1xuICAgIHZhciByZXNvbHZlciA9IGZ1bmN0aW9uIChhWCkge1xuICAgICAgICB2YXIgcmV0dXJuVmFsdWU7XG4gICAgICAgIGlmIChtWDEgPT09IG1ZMSAmJiBtWDIgPT09IG1ZMikge1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBhWDtcbiAgICAgICAgfSBlbHNlIGlmIChhWCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGFYID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IGNhbGNCZXppZXIoZ2V0VEZvclgoYVgpLCBtWTEsIG1ZMik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgIH07XG4gICAgcmV0dXJuIHJlc29sdmVyO1xufVxuXG5leHBvcnQgeyByZXZlcnNlZCwgbWlycm9yZWQsIGNyZWF0ZVJldmVyc2VkRWFzaW5nLCBjcmVhdGVNaXJyb3JlZEVhc2luZywgY3JlYXRlRXhwb0luLCBjcmVhdGVCYWNrSW4sIGNyZWF0ZUFudGljaXBhdGVFYXNpbmcsIGxpbmVhciwgZWFzZUluLCBlYXNlT3V0LCBlYXNlSW5PdXQsIGNpcmNJbiwgY2lyY091dCwgY2lyY0luT3V0LCBiYWNrSW4sIGJhY2tPdXQsIGJhY2tJbk91dCwgYW50aWNpcGF0ZSwgYm91bmNlT3V0LCBib3VuY2VJbiwgYm91bmNlSW5PdXQsIGN1YmljQmV6aWVyIH07XG4iLCJpbXBvcnQgeyBoc2xhLCByZ2JhLCBoZXgsIGNvbG9yLCBjb21wbGV4IH0gZnJvbSAnc3R5bGUtdmFsdWUtdHlwZXMnO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnaGV5LWxpc3Rlbic7XG5pbXBvcnQgeyBnZXRGcmFtZURhdGEgfSBmcm9tICdmcmFtZXN5bmMnO1xuaW1wb3J0IHsgY3JlYXRlQW50aWNpcGF0ZUVhc2luZywgY3JlYXRlQmFja0luLCBjcmVhdGVFeHBvSW4sIGN1YmljQmV6aWVyLCBsaW5lYXIsIGVhc2VJbiwgZWFzZU91dCwgZWFzZUluT3V0LCBjaXJjSW4sIGNpcmNPdXQsIGNpcmNJbk91dCwgYmFja0luLCBiYWNrT3V0LCBiYWNrSW5PdXQsIGFudGljaXBhdGUsIHJldmVyc2VkLCBtaXJyb3JlZCB9IGZyb20gJ0Bwb3Btb3Rpb24vZWFzaW5nJztcbmV4cG9ydCB7IGNyZWF0ZUFudGljaXBhdGVFYXNpbmcsIGNyZWF0ZUJhY2tJbiwgY3JlYXRlRXhwb0luLCBjdWJpY0JlemllciwgbGluZWFyLCBlYXNlSW4sIGVhc2VPdXQsIGVhc2VJbk91dCwgY2lyY0luLCBjaXJjT3V0LCBjaXJjSW5PdXQsIGJhY2tJbiwgYmFja091dCwgYmFja0luT3V0LCBhbnRpY2lwYXRlLCByZXZlcnNlZCwgbWlycm9yZWQgfSBmcm9tICdAcG9wbW90aW9uL2Vhc2luZyc7XG5cbnZhciB6ZXJvUG9pbnQgPSB7XHJcbiAgICB4OiAwLFxyXG4gICAgeTogMCxcclxuICAgIHo6IDBcclxufTtcclxudmFyIGlzTnVtID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHR5cGVvZiB2ID09PSAnbnVtYmVyJzsgfTtcblxudmFyIHJhZGlhbnNUb0RlZ3JlZXMgPSAoZnVuY3Rpb24gKHJhZGlhbnMpIHsgcmV0dXJuIChyYWRpYW5zICogMTgwKSAvIE1hdGguUEk7IH0pO1xuXG52YXIgYW5nbGUgPSAoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgIGlmIChiID09PSB2b2lkIDApIHsgYiA9IHplcm9Qb2ludDsgfVxyXG4gICAgcmV0dXJuIHJhZGlhbnNUb0RlZ3JlZXMoTWF0aC5hdGFuMihiLnkgLSBhLnksIGIueCAtIGEueCkpO1xyXG59KTtcblxudmFyIGFwcGx5T2Zmc2V0ID0gKGZ1bmN0aW9uIChmcm9tLCB0bykge1xyXG4gICAgdmFyIGhhc1JlY2VpdmVkRnJvbSA9IHRydWU7XHJcbiAgICBpZiAodG8gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRvID0gZnJvbTtcclxuICAgICAgICBoYXNSZWNlaXZlZEZyb20gPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIGlmIChoYXNSZWNlaXZlZEZyb20pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHYgLSBmcm9tICsgdG87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmcm9tID0gdjtcclxuICAgICAgICAgICAgaGFzUmVjZWl2ZWRGcm9tID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRvO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pO1xuXG52YXIgY3VycnlSYW5nZSA9IChmdW5jdGlvbiAoZnVuYykgeyByZXR1cm4gZnVuY3Rpb24gKG1pbiwgbWF4LCB2KSB7IHJldHVybiAodiAhPT0gdW5kZWZpbmVkID8gZnVuYyhtaW4sIG1heCwgdikgOiBmdW5jdGlvbiAoY3YpIHsgcmV0dXJuIGZ1bmMobWluLCBtYXgsIGN2KTsgfSk7IH07IH0pO1xuXG52YXIgY2xhbXAgPSBmdW5jdGlvbiAobWluLCBtYXgsIHYpIHtcclxuICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh2LCBtaW4pLCBtYXgpO1xyXG59O1xyXG52YXIgY2xhbXAkMSA9IGN1cnJ5UmFuZ2UoY2xhbXApO1xuXG52YXIgY29uZGl0aW9uYWwgPSAoZnVuY3Rpb24gKGNoZWNrLCBhcHBseSkgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHtcclxuICAgIHJldHVybiBjaGVjayh2KSA/IGFwcGx5KHYpIDogdjtcclxufTsgfSk7XG5cbnZhciBkZWdyZWVzVG9SYWRpYW5zID0gKGZ1bmN0aW9uIChkZWdyZWVzKSB7IHJldHVybiAoZGVncmVlcyAqIE1hdGguUEkpIC8gMTgwOyB9KTtcblxudmFyIGlzUG9pbnQgPSAoZnVuY3Rpb24gKHBvaW50KSB7XHJcbiAgICByZXR1cm4gcG9pbnQuaGFzT3duUHJvcGVydHkoJ3gnKSAmJiBwb2ludC5oYXNPd25Qcm9wZXJ0eSgneScpO1xyXG59KTtcblxudmFyIGlzUG9pbnQzRCA9IChmdW5jdGlvbiAocG9pbnQpIHtcclxuICAgIHJldHVybiBpc1BvaW50KHBvaW50KSAmJiBwb2ludC5oYXNPd25Qcm9wZXJ0eSgneicpO1xyXG59KTtcblxudmFyIGRpc3RhbmNlMUQgPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gTWF0aC5hYnMoYSAtIGIpOyB9O1xyXG52YXIgZGlzdGFuY2UgPSAoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgIGlmIChiID09PSB2b2lkIDApIHsgYiA9IHplcm9Qb2ludDsgfVxyXG4gICAgaWYgKGlzTnVtKGEpICYmIGlzTnVtKGIpKSB7XHJcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlMUQoYSwgYik7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc1BvaW50KGEpICYmIGlzUG9pbnQoYikpIHtcclxuICAgICAgICB2YXIgeERlbHRhID0gZGlzdGFuY2UxRChhLngsIGIueCk7XHJcbiAgICAgICAgdmFyIHlEZWx0YSA9IGRpc3RhbmNlMUQoYS55LCBiLnkpO1xyXG4gICAgICAgIHZhciB6RGVsdGEgPSBpc1BvaW50M0QoYSkgJiYgaXNQb2ludDNEKGIpID8gZGlzdGFuY2UxRChhLnosIGIueikgOiAwO1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coeERlbHRhLCAyKSArIE1hdGgucG93KHlEZWx0YSwgMikgKyBNYXRoLnBvdyh6RGVsdGEsIDIpKTtcclxuICAgIH1cclxuICAgIHJldHVybiAwO1xyXG59KTtcblxudmFyIHByb2dyZXNzID0gKGZ1bmN0aW9uIChmcm9tLCB0bywgdmFsdWUpIHtcclxuICAgIHZhciB0b0Zyb21EaWZmZXJlbmNlID0gdG8gLSBmcm9tO1xyXG4gICAgcmV0dXJuIHRvRnJvbURpZmZlcmVuY2UgPT09IDAgPyAxIDogKHZhbHVlIC0gZnJvbSkgLyB0b0Zyb21EaWZmZXJlbmNlO1xyXG59KTtcblxudmFyIG1peCA9IChmdW5jdGlvbiAoZnJvbSwgdG8sIHByb2dyZXNzKSB7XHJcbiAgICByZXR1cm4gLXByb2dyZXNzICogZnJvbSArIHByb2dyZXNzICogdG8gKyBmcm9tO1xyXG59KTtcblxuLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuXHJcbnZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XG5cbnZhciBtaXhMaW5lYXJDb2xvciA9IGZ1bmN0aW9uIChmcm9tLCB0bywgdikge1xyXG4gICAgdmFyIGZyb21FeHBvID0gZnJvbSAqIGZyb207XHJcbiAgICB2YXIgdG9FeHBvID0gdG8gKiB0bztcclxuICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5tYXgoMCwgdiAqICh0b0V4cG8gLSBmcm9tRXhwbykgKyBmcm9tRXhwbykpO1xyXG59O1xyXG52YXIgY29sb3JUeXBlcyA9IFtoZXgsIHJnYmEsIGhzbGFdO1xyXG52YXIgZ2V0Q29sb3JUeXBlID0gZnVuY3Rpb24gKHYpIHtcclxuICAgIHJldHVybiBjb2xvclR5cGVzLmZpbmQoZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIHR5cGUudGVzdCh2KTsgfSk7XHJcbn07XHJcbnZhciBub3RBbmltYXRhYmxlID0gZnVuY3Rpb24gKGNvbG9yJCQxKSB7XHJcbiAgICByZXR1cm4gXCInXCIgKyBjb2xvciQkMSArIFwiJyBpcyBub3QgYW4gYW5pbWF0YWJsZSBjb2xvci4gVXNlIHRoZSBlcXVpdmFsZW50IGNvbG9yIGNvZGUgaW5zdGVhZC5cIjtcclxufTtcclxudmFyIG1peENvbG9yID0gKGZ1bmN0aW9uIChmcm9tLCB0bykge1xyXG4gICAgdmFyIGZyb21Db2xvclR5cGUgPSBnZXRDb2xvclR5cGUoZnJvbSk7XHJcbiAgICB2YXIgdG9Db2xvclR5cGUgPSBnZXRDb2xvclR5cGUodG8pO1xyXG4gICAgaW52YXJpYW50KCEhZnJvbUNvbG9yVHlwZSwgbm90QW5pbWF0YWJsZShmcm9tKSk7XHJcbiAgICBpbnZhcmlhbnQoISF0b0NvbG9yVHlwZSwgbm90QW5pbWF0YWJsZSh0bykpO1xyXG4gICAgaW52YXJpYW50KGZyb21Db2xvclR5cGUudHJhbnNmb3JtID09PSB0b0NvbG9yVHlwZS50cmFuc2Zvcm0sICdCb3RoIGNvbG9ycyBtdXN0IGJlIGhleC9SR0JBLCBPUiBib3RoIG11c3QgYmUgSFNMQS4nKTtcclxuICAgIHZhciBmcm9tQ29sb3IgPSBmcm9tQ29sb3JUeXBlLnBhcnNlKGZyb20pO1xyXG4gICAgdmFyIHRvQ29sb3IgPSB0b0NvbG9yVHlwZS5wYXJzZSh0byk7XHJcbiAgICB2YXIgYmxlbmRlZCA9IF9fYXNzaWduKHt9LCBmcm9tQ29sb3IpO1xyXG4gICAgdmFyIG1peEZ1bmMgPSBmcm9tQ29sb3JUeXBlID09PSBoc2xhID8gbWl4IDogbWl4TGluZWFyQ29sb3I7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gYmxlbmRlZCkge1xyXG4gICAgICAgICAgICBpZiAoa2V5ICE9PSAnYWxwaGEnKSB7XHJcbiAgICAgICAgICAgICAgICBibGVuZGVkW2tleV0gPSBtaXhGdW5jKGZyb21Db2xvcltrZXldLCB0b0NvbG9yW2tleV0sIHYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJsZW5kZWQuYWxwaGEgPSBtaXgoZnJvbUNvbG9yLmFscGhhLCB0b0NvbG9yLmFscGhhLCB2KTtcclxuICAgICAgICByZXR1cm4gZnJvbUNvbG9yVHlwZS50cmFuc2Zvcm0oYmxlbmRlZCk7XHJcbiAgICB9O1xyXG59KTtcblxudmFyIGNvbWJpbmVGdW5jdGlvbnMgPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIGIoYSh2KSk7IH07IH07XHJcbnZhciBwaXBlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB0cmFuc2Zvcm1lcnMgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdHJhbnNmb3JtZXJzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJhbnNmb3JtZXJzLnJlZHVjZShjb21iaW5lRnVuY3Rpb25zKTtcclxufSk7XG5cbmZ1bmN0aW9uIGdldE1peGVyKG9yaWdpbiwgdGFyZ2V0KSB7XHJcbiAgICBpZiAoaXNOdW0ob3JpZ2luKSkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gbWl4KG9yaWdpbiwgdGFyZ2V0LCB2KTsgfTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGNvbG9yLnRlc3Qob3JpZ2luKSkge1xyXG4gICAgICAgIHJldHVybiBtaXhDb2xvcihvcmlnaW4sIHRhcmdldCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbWl4Q29tcGxleChvcmlnaW4sIHRhcmdldCk7XHJcbiAgICB9XHJcbn1cclxudmFyIG1peEFycmF5ID0gZnVuY3Rpb24gKGZyb20sIHRvKSB7XHJcbiAgICB2YXIgb3V0cHV0ID0gZnJvbS5zbGljZSgpO1xyXG4gICAgdmFyIG51bVZhbHVlcyA9IG91dHB1dC5sZW5ndGg7XHJcbiAgICB2YXIgYmxlbmRWYWx1ZSA9IGZyb20ubWFwKGZ1bmN0aW9uIChmcm9tVGhpcywgaSkgeyByZXR1cm4gZ2V0TWl4ZXIoZnJvbVRoaXMsIHRvW2ldKTsgfSk7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bVZhbHVlczsgaSsrKSB7XHJcbiAgICAgICAgICAgIG91dHB1dFtpXSA9IGJsZW5kVmFsdWVbaV0odik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG59O1xyXG52YXIgbWl4T2JqZWN0ID0gZnVuY3Rpb24gKG9yaWdpbiwgdGFyZ2V0KSB7XHJcbiAgICB2YXIgb3V0cHV0ID0gX19hc3NpZ24oe30sIG9yaWdpbiwgdGFyZ2V0KTtcclxuICAgIHZhciBibGVuZFZhbHVlID0ge307XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb3V0cHV0KSB7XHJcbiAgICAgICAgaWYgKG9yaWdpbltrZXldICE9PSB1bmRlZmluZWQgJiYgdGFyZ2V0W2tleV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBibGVuZFZhbHVlW2tleV0gPSBnZXRNaXhlcihvcmlnaW5ba2V5XSwgdGFyZ2V0W2tleV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBibGVuZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIG91dHB1dFtrZXldID0gYmxlbmRWYWx1ZVtrZXldKHYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxufTtcclxuZnVuY3Rpb24gYW5hbHlzZSh2YWx1ZSkge1xyXG4gICAgdmFyIHBhcnNlZCA9IGNvbXBsZXgucGFyc2UodmFsdWUpO1xyXG4gICAgdmFyIG51bVZhbHVlcyA9IHBhcnNlZC5sZW5ndGg7XHJcbiAgICB2YXIgbnVtTnVtYmVycyA9IDA7XHJcbiAgICB2YXIgbnVtUkdCID0gMDtcclxuICAgIHZhciBudW1IU0wgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1WYWx1ZXM7IGkrKykge1xyXG4gICAgICAgIGlmIChudW1OdW1iZXJzIHx8IHR5cGVvZiBwYXJzZWRbaV0gPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgIG51bU51bWJlcnMrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChwYXJzZWRbaV0uaHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG51bUhTTCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbnVtUkdCKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4geyBwYXJzZWQ6IHBhcnNlZCwgbnVtTnVtYmVyczogbnVtTnVtYmVycywgbnVtUkdCOiBudW1SR0IsIG51bUhTTDogbnVtSFNMIH07XHJcbn1cclxudmFyIG1peENvbXBsZXggPSBmdW5jdGlvbiAob3JpZ2luLCB0YXJnZXQpIHtcclxuICAgIHZhciB0ZW1wbGF0ZSA9IGNvbXBsZXguY3JlYXRlVHJhbnNmb3JtZXIodGFyZ2V0KTtcclxuICAgIHZhciBvcmlnaW5TdGF0cyA9IGFuYWx5c2Uob3JpZ2luKTtcclxuICAgIHZhciB0YXJnZXRTdGF0cyA9IGFuYWx5c2UodGFyZ2V0KTtcclxuICAgIGludmFyaWFudChvcmlnaW5TdGF0cy5udW1IU0wgPT09IHRhcmdldFN0YXRzLm51bUhTTCAmJlxyXG4gICAgICAgIG9yaWdpblN0YXRzLm51bVJHQiA9PT0gdGFyZ2V0U3RhdHMubnVtUkdCICYmXHJcbiAgICAgICAgb3JpZ2luU3RhdHMubnVtTnVtYmVycyA+PSB0YXJnZXRTdGF0cy5udW1OdW1iZXJzLCBcIkNvbXBsZXggdmFsdWVzICdcIiArIG9yaWdpbiArIFwiJyBhbmQgJ1wiICsgdGFyZ2V0ICsgXCInIHRvbyBkaWZmZXJlbnQgdG8gbWl4LiBFbnN1cmUgYWxsIGNvbG9ycyBhcmUgb2YgdGhlIHNhbWUgdHlwZS5cIik7XHJcbiAgICByZXR1cm4gcGlwZShtaXhBcnJheShvcmlnaW5TdGF0cy5wYXJzZWQsIHRhcmdldFN0YXRzLnBhcnNlZCksIHRlbXBsYXRlKTtcclxufTtcblxudmFyIG1peE51bWJlciA9IGZ1bmN0aW9uIChmcm9tLCB0bykgeyByZXR1cm4gZnVuY3Rpb24gKHApIHsgcmV0dXJuIG1peChmcm9tLCB0bywgcCk7IH07IH07XHJcbmZ1bmN0aW9uIGRldGVjdE1peGVyRmFjdG9yeSh2KSB7XHJcbiAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgcmV0dXJuIG1peE51bWJlcjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiB2ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGlmIChjb2xvci50ZXN0KHYpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtaXhDb2xvcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtaXhDb21wbGV4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodikpIHtcclxuICAgICAgICByZXR1cm4gbWl4QXJyYXk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgdiA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICByZXR1cm4gbWl4T2JqZWN0O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZU1peGVycyhvdXRwdXQsIGVhc2UsIGN1c3RvbU1peGVyKSB7XHJcbiAgICB2YXIgbWl4ZXJzID0gW107XHJcbiAgICB2YXIgbWl4ZXJGYWN0b3J5ID0gY3VzdG9tTWl4ZXIgfHwgZGV0ZWN0TWl4ZXJGYWN0b3J5KG91dHB1dFswXSk7XHJcbiAgICB2YXIgbnVtTWl4ZXJzID0gb3V0cHV0Lmxlbmd0aCAtIDE7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bU1peGVyczsgaSsrKSB7XHJcbiAgICAgICAgdmFyIG1peGVyID0gbWl4ZXJGYWN0b3J5KG91dHB1dFtpXSwgb3V0cHV0W2kgKyAxXSk7XHJcbiAgICAgICAgaWYgKGVhc2UpIHtcclxuICAgICAgICAgICAgdmFyIGVhc2luZ0Z1bmN0aW9uID0gQXJyYXkuaXNBcnJheShlYXNlKSA/IGVhc2VbaV0gOiBlYXNlO1xyXG4gICAgICAgICAgICBtaXhlciA9IHBpcGUoZWFzaW5nRnVuY3Rpb24sIG1peGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWl4ZXJzLnB1c2gobWl4ZXIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1peGVycztcclxufVxyXG5mdW5jdGlvbiBmYXN0SW50ZXJwb2xhdGUoX2EsIF9iKSB7XHJcbiAgICB2YXIgZnJvbSA9IF9hWzBdLCB0byA9IF9hWzFdO1xyXG4gICAgdmFyIG1peGVyID0gX2JbMF07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG1peGVyKHByb2dyZXNzKGZyb20sIHRvLCB2KSk7IH07XHJcbn1cclxuZnVuY3Rpb24gc2xvd0ludGVycG9sYXRlKGlucHV0LCBtaXhlcnMpIHtcclxuICAgIHZhciBpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aDtcclxuICAgIHZhciBsYXN0SW5wdXRJbmRleCA9IGlucHV0TGVuZ3RoIC0gMTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIHZhciBtaXhlckluZGV4ID0gMDtcclxuICAgICAgICB2YXIgZm91bmRNaXhlckluZGV4ID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHYgPD0gaW5wdXRbMF0pIHtcclxuICAgICAgICAgICAgZm91bmRNaXhlckluZGV4ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodiA+PSBpbnB1dFtsYXN0SW5wdXRJbmRleF0pIHtcclxuICAgICAgICAgICAgbWl4ZXJJbmRleCA9IGxhc3RJbnB1dEluZGV4IC0gMTtcclxuICAgICAgICAgICAgZm91bmRNaXhlckluZGV4ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFmb3VuZE1peGVySW5kZXgpIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAxO1xyXG4gICAgICAgICAgICBmb3IgKDsgaSA8IGlucHV0TGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbnB1dFtpXSA+IHYgfHwgaSA9PT0gbGFzdElucHV0SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtaXhlckluZGV4ID0gaSAtIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwcm9ncmVzc0luUmFuZ2UgPSBwcm9ncmVzcyhpbnB1dFttaXhlckluZGV4XSwgaW5wdXRbbWl4ZXJJbmRleCArIDFdLCB2KTtcclxuICAgICAgICByZXR1cm4gbWl4ZXJzW21peGVySW5kZXhdKHByb2dyZXNzSW5SYW5nZSk7XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGludGVycG9sYXRlKGlucHV0LCBvdXRwdXQsIF9hKSB7XHJcbiAgICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSwgX2MgPSBfYi5jbGFtcCwgY2xhbXAgPSBfYyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9jLCBlYXNlID0gX2IuZWFzZSwgbWl4ZXIgPSBfYi5taXhlcjtcclxuICAgIHZhciBpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aDtcclxuICAgIGludmFyaWFudChpbnB1dExlbmd0aCA9PT0gb3V0cHV0Lmxlbmd0aCwgJ0JvdGggaW5wdXQgYW5kIG91dHB1dCByYW5nZXMgbXVzdCBiZSB0aGUgc2FtZSBsZW5ndGgnKTtcclxuICAgIGludmFyaWFudCghZWFzZSB8fCAhQXJyYXkuaXNBcnJheShlYXNlKSB8fCBlYXNlLmxlbmd0aCA9PT0gaW5wdXRMZW5ndGggLSAxLCAnQXJyYXkgb2YgZWFzaW5nIGZ1bmN0aW9ucyBtdXN0IGJlIG9mIGxlbmd0aCBgaW5wdXQubGVuZ3RoIC0gMWAsIGFzIGl0IGFwcGxpZXMgdG8gdGhlIHRyYW5zaXRpb25zICoqYmV0d2VlbioqIHRoZSBkZWZpbmVkIHZhbHVlcy4nKTtcclxuICAgIGlmIChpbnB1dFswXSA+IGlucHV0W2lucHV0TGVuZ3RoIC0gMV0pIHtcclxuICAgICAgICBpbnB1dCA9IFtdLmNvbmNhdChpbnB1dCk7XHJcbiAgICAgICAgb3V0cHV0ID0gW10uY29uY2F0KG91dHB1dCk7XHJcbiAgICAgICAgaW5wdXQucmV2ZXJzZSgpO1xyXG4gICAgICAgIG91dHB1dC5yZXZlcnNlKCk7XHJcbiAgICB9XHJcbiAgICB2YXIgbWl4ZXJzID0gY3JlYXRlTWl4ZXJzKG91dHB1dCwgZWFzZSwgbWl4ZXIpO1xyXG4gICAgdmFyIGludGVycG9sYXRvciA9IGlucHV0TGVuZ3RoID09PSAyXHJcbiAgICAgICAgPyBmYXN0SW50ZXJwb2xhdGUoaW5wdXQsIG1peGVycylcclxuICAgICAgICA6IHNsb3dJbnRlcnBvbGF0ZShpbnB1dCwgbWl4ZXJzKTtcclxuICAgIHJldHVybiBjbGFtcFxyXG4gICAgICAgID8gcGlwZShjbGFtcCQxKGlucHV0WzBdLCBpbnB1dFtpbnB1dExlbmd0aCAtIDFdKSwgaW50ZXJwb2xhdG9yKVxyXG4gICAgICAgIDogaW50ZXJwb2xhdG9yO1xyXG59XG5cbnZhciBwb2ludEZyb21WZWN0b3IgPSAoZnVuY3Rpb24gKG9yaWdpbiwgYW5nbGUsIGRpc3RhbmNlKSB7XHJcbiAgICBhbmdsZSA9IGRlZ3JlZXNUb1JhZGlhbnMoYW5nbGUpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB4OiBkaXN0YW5jZSAqIE1hdGguY29zKGFuZ2xlKSArIG9yaWdpbi54LFxyXG4gICAgICAgIHk6IGRpc3RhbmNlICogTWF0aC5zaW4oYW5nbGUpICsgb3JpZ2luLnlcclxuICAgIH07XHJcbn0pO1xuXG52YXIgdG9EZWNpbWFsID0gKGZ1bmN0aW9uIChudW0sIHByZWNpc2lvbikge1xyXG4gICAgaWYgKHByZWNpc2lvbiA9PT0gdm9pZCAwKSB7IHByZWNpc2lvbiA9IDI7IH1cclxuICAgIHByZWNpc2lvbiA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24pO1xyXG4gICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogcHJlY2lzaW9uKSAvIHByZWNpc2lvbjtcclxufSk7XG5cbnZhciBzbW9vdGhGcmFtZSA9IChmdW5jdGlvbiAocHJldlZhbHVlLCBuZXh0VmFsdWUsIGR1cmF0aW9uLCBzbW9vdGhpbmcpIHtcclxuICAgIGlmIChzbW9vdGhpbmcgPT09IHZvaWQgMCkgeyBzbW9vdGhpbmcgPSAwOyB9XHJcbiAgICByZXR1cm4gdG9EZWNpbWFsKHByZXZWYWx1ZSArXHJcbiAgICAgICAgKGR1cmF0aW9uICogKG5leHRWYWx1ZSAtIHByZXZWYWx1ZSkpIC8gTWF0aC5tYXgoc21vb3RoaW5nLCBkdXJhdGlvbikpO1xyXG59KTtcblxudmFyIHNtb290aCA9IChmdW5jdGlvbiAoc3RyZW5ndGgpIHtcclxuICAgIGlmIChzdHJlbmd0aCA9PT0gdm9pZCAwKSB7IHN0cmVuZ3RoID0gNTA7IH1cclxuICAgIHZhciBwcmV2aW91c1ZhbHVlID0gMDtcclxuICAgIHZhciBsYXN0VXBkYXRlZCA9IDA7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICB2YXIgY3VycmVudEZyYW1lc3RhbXAgPSBnZXRGcmFtZURhdGEoKS50aW1lc3RhbXA7XHJcbiAgICAgICAgdmFyIHRpbWVEZWx0YSA9IGN1cnJlbnRGcmFtZXN0YW1wICE9PSBsYXN0VXBkYXRlZCA/IGN1cnJlbnRGcmFtZXN0YW1wIC0gbGFzdFVwZGF0ZWQgOiAwO1xyXG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IHRpbWVEZWx0YVxyXG4gICAgICAgICAgICA/IHNtb290aEZyYW1lKHByZXZpb3VzVmFsdWUsIHYsIHRpbWVEZWx0YSwgc3RyZW5ndGgpXHJcbiAgICAgICAgICAgIDogcHJldmlvdXNWYWx1ZTtcclxuICAgICAgICBsYXN0VXBkYXRlZCA9IGN1cnJlbnRGcmFtZXN0YW1wO1xyXG4gICAgICAgIHByZXZpb3VzVmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICByZXR1cm4gbmV3VmFsdWU7XHJcbiAgICB9O1xyXG59KTtcblxudmFyIHNuYXAgPSAoZnVuY3Rpb24gKHBvaW50cykge1xyXG4gICAgaWYgKHR5cGVvZiBwb2ludHMgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBNYXRoLnJvdW5kKHYgLyBwb2ludHMpICogcG9pbnRzOyB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdmFyIGlfMSA9IDA7XHJcbiAgICAgICAgdmFyIG51bVBvaW50c18xID0gcG9pbnRzLmxlbmd0aDtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICAgICAgdmFyIGxhc3REaXN0YW5jZSA9IE1hdGguYWJzKHBvaW50c1swXSAtIHYpO1xyXG4gICAgICAgICAgICBmb3IgKGlfMSA9IDE7IGlfMSA8IG51bVBvaW50c18xOyBpXzErKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gcG9pbnRzW2lfMV07XHJcbiAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLmFicyhwb2ludCAtIHYpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlID09PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb2ludDtcclxuICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA+IGxhc3REaXN0YW5jZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9pbnRzW2lfMSAtIDFdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlfMSA9PT0gbnVtUG9pbnRzXzEgLSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb2ludDtcclxuICAgICAgICAgICAgICAgIGxhc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSk7XG5cbnZhciBpZGVudGl0eSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiB2OyB9O1xyXG52YXIgc3ByaW5nRm9yY2UgPSBmdW5jdGlvbiAoYWx0ZXJEaXNwbGFjZW1lbnQpIHtcclxuICAgIGlmIChhbHRlckRpc3BsYWNlbWVudCA9PT0gdm9pZCAwKSB7IGFsdGVyRGlzcGxhY2VtZW50ID0gaWRlbnRpdHk7IH1cclxuICAgIHJldHVybiBjdXJyeVJhbmdlKGZ1bmN0aW9uIChjb25zdGFudCwgb3JpZ2luLCB2KSB7XHJcbiAgICAgICAgdmFyIGRpc3BsYWNlbWVudCA9IG9yaWdpbiAtIHY7XHJcbiAgICAgICAgdmFyIHNwcmluZ01vZGlmaWVkRGlzcGxhY2VtZW50ID0gLSgwIC0gY29uc3RhbnQgKyAxKSAqICgwIC0gYWx0ZXJEaXNwbGFjZW1lbnQoTWF0aC5hYnMoZGlzcGxhY2VtZW50KSkpO1xyXG4gICAgICAgIHJldHVybiBkaXNwbGFjZW1lbnQgPD0gMFxyXG4gICAgICAgICAgICA/IG9yaWdpbiArIHNwcmluZ01vZGlmaWVkRGlzcGxhY2VtZW50XHJcbiAgICAgICAgICAgIDogb3JpZ2luIC0gc3ByaW5nTW9kaWZpZWREaXNwbGFjZW1lbnQ7XHJcbiAgICB9KTtcclxufTtcclxudmFyIHNwcmluZ0ZvcmNlTGluZWFyID0gc3ByaW5nRm9yY2UoKTtcclxudmFyIHNwcmluZ0ZvcmNlRXhwbyA9IHNwcmluZ0ZvcmNlKE1hdGguc3FydCk7XG5cbnZhciB2ZWxvY2l0eVBlckZyYW1lID0gKGZ1bmN0aW9uICh4cHMsIGZyYW1lRHVyYXRpb24pIHtcclxuICAgIHJldHVybiBpc051bSh4cHMpID8geHBzIC8gKDEwMDAgLyBmcmFtZUR1cmF0aW9uKSA6IDA7XHJcbn0pO1xuXG52YXIgdmVsb2NpdHlQZXJTZWNvbmQgPSAoZnVuY3Rpb24gKHZlbG9jaXR5LCBmcmFtZUR1cmF0aW9uKSB7XHJcbiAgICByZXR1cm4gZnJhbWVEdXJhdGlvbiA/IHZlbG9jaXR5ICogKDEwMDAgLyBmcmFtZUR1cmF0aW9uKSA6IDA7XHJcbn0pO1xuXG52YXIgd3JhcCA9IGZ1bmN0aW9uIChtaW4sIG1heCwgdikge1xyXG4gICAgdmFyIHJhbmdlU2l6ZSA9IG1heCAtIG1pbjtcclxuICAgIHJldHVybiAoKCgodiAtIG1pbikgJSByYW5nZVNpemUpICsgcmFuZ2VTaXplKSAlIHJhbmdlU2l6ZSkgKyBtaW47XHJcbn07XHJcbnZhciB3cmFwJDEgPSBjdXJyeVJhbmdlKHdyYXApO1xuXG52YXIgY2xhbXBQcm9ncmVzcyA9IGNsYW1wJDEoMCwgMSk7XHJcbnZhciBzdGVwcyA9IChmdW5jdGlvbiAoc3RlcHMsIGRpcmVjdGlvbikge1xyXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gdm9pZCAwKSB7IGRpcmVjdGlvbiA9ICdlbmQnOyB9XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHByb2dyZXNzKSB7XHJcbiAgICAgICAgcHJvZ3Jlc3MgPVxyXG4gICAgICAgICAgICBkaXJlY3Rpb24gPT09ICdlbmQnID8gTWF0aC5taW4ocHJvZ3Jlc3MsIDAuOTk5KSA6IE1hdGgubWF4KHByb2dyZXNzLCAwLjAwMSk7XHJcbiAgICAgICAgdmFyIGV4cGFuZGVkID0gcHJvZ3Jlc3MgKiBzdGVwcztcclxuICAgICAgICB2YXIgcm91bmRlZCA9IGRpcmVjdGlvbiA9PT0gJ2VuZCcgPyBNYXRoLmZsb29yKGV4cGFuZGVkKSA6IE1hdGguY2VpbChleHBhbmRlZCk7XHJcbiAgICAgICAgcmV0dXJuIGNsYW1wUHJvZ3Jlc3Mocm91bmRlZCAvIHN0ZXBzKTtcclxuICAgIH07XHJcbn0pO1xuXG5leHBvcnQgeyBhbmdsZSwgYXBwbHlPZmZzZXQsIGNsYW1wJDEgYXMgY2xhbXAsIGNvbmRpdGlvbmFsLCBkZWdyZWVzVG9SYWRpYW5zLCBkaXN0YW5jZSwgaW50ZXJwb2xhdGUsIGlzUG9pbnQsIGlzUG9pbnQzRCwgbWl4LCBtaXhBcnJheSwgbWl4Q29sb3IsIG1peENvbXBsZXgsIG1peE9iamVjdCwgcGlwZSwgcG9pbnRGcm9tVmVjdG9yLCBwcm9ncmVzcywgcmFkaWFuc1RvRGVncmVlcywgc21vb3RoLCBzbW9vdGhGcmFtZSwgc25hcCwgc3ByaW5nRm9yY2UsIHNwcmluZ0ZvcmNlRXhwbywgc3ByaW5nRm9yY2VMaW5lYXIsIHN0ZXBzLCB0b0RlY2ltYWwsIHZlbG9jaXR5UGVyRnJhbWUsIHZlbG9jaXR5UGVyU2Vjb25kLCB3cmFwJDEgYXMgd3JhcCB9O1xuIiwiaW1wb3J0IHN5bmMgZnJvbSAnZnJhbWVzeW5jJztcbmltcG9ydCB7IGFscGhhLCBjb2xvciwgZGVncmVlcywgc2NhbGUsIHB4LCBwcm9ncmVzc1BlcmNlbnRhZ2UsIG51bWJlciB9IGZyb20gJ3N0eWxlLXZhbHVlLXR5cGVzJztcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gJ2hleS1saXN0ZW4nO1xuXG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG52YXIgX19hc3NpZ24gPSBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcblxuZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKSB0W3BdID0gc1twXTtcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKSB0W3BbaV1dID0gc1twW2ldXTtcbiAgICByZXR1cm4gdDtcbn1cblxudmFyIGNyZWF0ZVN0eWxlciA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBvblJlYWQgPSBfYS5vblJlYWQsXG4gICAgICAgIG9uUmVuZGVyID0gX2Eub25SZW5kZXIsXG4gICAgICAgIF9iID0gX2EudW5jYWNoZWRWYWx1ZXMsXG4gICAgICAgIHVuY2FjaGVkVmFsdWVzID0gX2IgPT09IHZvaWQgMCA/IG5ldyBTZXQoKSA6IF9iLFxuICAgICAgICBfYyA9IF9hLnVzZUNhY2hlLFxuICAgICAgICB1c2VDYWNoZSA9IF9jID09PSB2b2lkIDAgPyB0cnVlIDogX2M7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICBpZiAoX2EgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgX2EgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJvcHMgPSBfX3Jlc3QoX2EsIFtdKTtcbiAgICAgICAgdmFyIHN0YXRlID0ge307XG4gICAgICAgIHZhciBjaGFuZ2VkVmFsdWVzID0gW107XG4gICAgICAgIHZhciBoYXNDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgIGZ1bmN0aW9uIHNldFZhbHVlKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnLS0nKSkge1xuICAgICAgICAgICAgICAgIHByb3BzLmhhc0NTU1ZhcmlhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSBzdGF0ZVtrZXldO1xuICAgICAgICAgICAgc3RhdGVba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKHN0YXRlW2tleV0gPT09IGN1cnJlbnRWYWx1ZSkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGNoYW5nZWRWYWx1ZXMuaW5kZXhPZihrZXkpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGNoYW5nZWRWYWx1ZXMucHVzaChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFoYXNDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc3luYy5yZW5kZXIoc3R5bGVyLnJlbmRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0eWxlciA9IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKGtleSwgZm9yY2VSZWFkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvcmNlUmVhZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmNlUmVhZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdXNlQ2FjaGVkID0gIWZvcmNlUmVhZCAmJiB1c2VDYWNoZSAmJiAhdW5jYWNoZWRWYWx1ZXMuaGFzKGtleSkgJiYgc3RhdGVba2V5XSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VDYWNoZWQgPyBzdGF0ZVtrZXldIDogb25SZWFkKGtleSwgcHJvcHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlcywgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWUodmFsdWVzLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWUoa2V5LCB2YWx1ZXNba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoZm9yY2VSZW5kZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm9yY2VSZW5kZXIgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JjZVJlbmRlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaGFzQ2hhbmdlZCB8fCBmb3JjZVJlbmRlciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBvblJlbmRlcihzdGF0ZSwgcHJvcHMsIGNoYW5nZWRWYWx1ZXMpO1xuICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWRWYWx1ZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBzdHlsZXI7XG4gICAgfTtcbn07XG5cbnZhciBDQU1FTF9DQVNFX1BBVFRFUk4gPSAvKFthLXpdKShbQS1aXSkvZztcbnZhciBSRVBMQUNFX1RFTVBMQVRFID0gJyQxLSQyJztcbnZhciBjYW1lbFRvRGFzaCA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoQ0FNRUxfQ0FTRV9QQVRURVJOLCBSRVBMQUNFX1RFTVBMQVRFKS50b0xvd2VyQ2FzZSgpO1xufTtcbnZhciBzZXREb21BdHRycyA9IGZ1bmN0aW9uIChlbGVtZW50LCBhdHRycykge1xuICAgIGZvciAodmFyIGtleSBpbiBhdHRycykge1xuICAgICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyc1trZXldKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbnZhciBjYW1lbENhY2hlID0gLyojX19QVVJFX18qL25ldyBNYXAoKTtcbnZhciBkYXNoQ2FjaGUgPSAvKiNfX1BVUkVfXyovbmV3IE1hcCgpO1xudmFyIHByZWZpeGVzID0gWydXZWJraXQnLCAnTW96JywgJ08nLCAnbXMnLCAnJ107XG52YXIgbnVtUHJlZml4ZXMgPSBwcmVmaXhlcy5sZW5ndGg7XG52YXIgaXNCcm93c2VyID0gdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJztcbnZhciB0ZXN0RWxlbWVudDtcbnZhciBzZXREYXNoUHJlZml4ID0gZnVuY3Rpb24gKGtleSwgcHJlZml4ZWQpIHtcbiAgICByZXR1cm4gZGFzaENhY2hlLnNldChrZXksIGNhbWVsVG9EYXNoKHByZWZpeGVkKSk7XG59O1xudmFyIHRlc3RQcmVmaXggPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgdGVzdEVsZW1lbnQgPSB0ZXN0RWxlbWVudCB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bVByZWZpeGVzOyBpKyspIHtcbiAgICAgICAgdmFyIHByZWZpeCA9IHByZWZpeGVzW2ldO1xuICAgICAgICB2YXIgbm9QcmVmaXggPSBwcmVmaXggPT09ICcnO1xuICAgICAgICB2YXIgcHJlZml4ZWRQcm9wZXJ0eU5hbWUgPSBub1ByZWZpeCA/IGtleSA6IHByZWZpeCArIGtleS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGtleS5zbGljZSgxKTtcbiAgICAgICAgaWYgKHByZWZpeGVkUHJvcGVydHlOYW1lIGluIHRlc3RFbGVtZW50LnN0eWxlIHx8IG5vUHJlZml4KSB7XG4gICAgICAgICAgICBjYW1lbENhY2hlLnNldChrZXksIHByZWZpeGVkUHJvcGVydHlOYW1lKTtcbiAgICAgICAgICAgIHNldERhc2hQcmVmaXgoa2V5LCBcIlwiICsgKG5vUHJlZml4ID8gJycgOiAnLScpICsgY2FtZWxUb0Rhc2gocHJlZml4ZWRQcm9wZXJ0eU5hbWUpKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG52YXIgc2V0U2VydmVyUHJvcGVydHkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHNldERhc2hQcmVmaXgoa2V5LCBrZXkpO1xufTtcbnZhciBwcmVmaXhlciA9IGZ1bmN0aW9uIChrZXksIGFzRGFzaENhc2UpIHtcbiAgICBpZiAoYXNEYXNoQ2FzZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGFzRGFzaENhc2UgPSBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGNhY2hlID0gYXNEYXNoQ2FzZSA/IGRhc2hDYWNoZSA6IGNhbWVsQ2FjaGU7XG4gICAgaWYgKCFjYWNoZS5oYXMoa2V5KSkgaXNCcm93c2VyID8gdGVzdFByZWZpeChrZXkpIDogc2V0U2VydmVyUHJvcGVydHkoa2V5KTtcbiAgICByZXR1cm4gY2FjaGUuZ2V0KGtleSkgfHwga2V5O1xufTtcblxudmFyIGF4ZXMgPSBbJycsICdYJywgJ1knLCAnWiddO1xudmFyIG9yZGVyID0gWydzY2FsZScsICdyb3RhdGUnLCAnc2tldycsICd0cmFuc2Zvcm1QZXJzcGVjdGl2ZSddO1xudmFyIHRyYW5zZm9ybVByb3BzID0gLyojX19QVVJFX18qL29yZGVyLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBrZXkpIHtcbiAgICByZXR1cm4gYXhlcy5yZWR1Y2UoZnVuY3Rpb24gKGF4ZXNBY2MsIGF4ZXNLZXkpIHtcbiAgICAgICAgYXhlc0FjYy5wdXNoKGtleSArIGF4ZXNLZXkpO1xuICAgICAgICByZXR1cm4gYXhlc0FjYztcbiAgICB9LCBhY2MpO1xufSwgWyd4JywgJ3knLCAneiddKTtcbnZhciB0cmFuc2Zvcm1Qcm9wRGljdGlvbmFyeSA9IC8qI19fUFVSRV9fKi90cmFuc2Zvcm1Qcm9wcy5yZWR1Y2UoZnVuY3Rpb24gKGRpY3QsIGtleSkge1xuICAgIGRpY3Rba2V5XSA9IHRydWU7XG4gICAgcmV0dXJuIGRpY3Q7XG59LCB7fSk7XG5mdW5jdGlvbiBpc1RyYW5zZm9ybVByb3Aoa2V5KSB7XG4gICAgcmV0dXJuIHRyYW5zZm9ybVByb3BEaWN0aW9uYXJ5W2tleV0gPT09IHRydWU7XG59XG5mdW5jdGlvbiBzb3J0VHJhbnNmb3JtUHJvcHMoYSwgYikge1xuICAgIHJldHVybiB0cmFuc2Zvcm1Qcm9wcy5pbmRleE9mKGEpIC0gdHJhbnNmb3JtUHJvcHMuaW5kZXhPZihiKTtcbn1cbnZhciB0cmFuc2Zvcm1PcmlnaW5Qcm9wcyA9IC8qI19fUFVSRV9fKi9uZXcgU2V0KFsnb3JpZ2luWCcsICdvcmlnaW5ZJywgJ29yaWdpblonXSk7XG5mdW5jdGlvbiBpc1RyYW5zZm9ybU9yaWdpblByb3Aoa2V5KSB7XG4gICAgcmV0dXJuIHRyYW5zZm9ybU9yaWdpblByb3BzLmhhcyhrZXkpO1xufVxuXG52YXIgcm91bmRlZCA9IC8qI19fUFVSRV9fKi9fX2Fzc2lnbih7fSwgbnVtYmVyLCB7IHRyYW5zZm9ybTogTWF0aC5yb3VuZCB9KTtcbnZhciB2YWx1ZVR5cGVzID0ge1xuICAgIGNvbG9yOiBjb2xvcixcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yLFxuICAgIG91dGxpbmVDb2xvcjogY29sb3IsXG4gICAgZmlsbDogY29sb3IsXG4gICAgc3Ryb2tlOiBjb2xvcixcbiAgICBib3JkZXJDb2xvcjogY29sb3IsXG4gICAgYm9yZGVyVG9wQ29sb3I6IGNvbG9yLFxuICAgIGJvcmRlclJpZ2h0Q29sb3I6IGNvbG9yLFxuICAgIGJvcmRlckJvdHRvbUNvbG9yOiBjb2xvcixcbiAgICBib3JkZXJMZWZ0Q29sb3I6IGNvbG9yLFxuICAgIGJvcmRlcldpZHRoOiBweCxcbiAgICBib3JkZXJUb3BXaWR0aDogcHgsXG4gICAgYm9yZGVyUmlnaHRXaWR0aDogcHgsXG4gICAgYm9yZGVyQm90dG9tV2lkdGg6IHB4LFxuICAgIGJvcmRlckxlZnRXaWR0aDogcHgsXG4gICAgYm9yZGVyUmFkaXVzOiBweCxcbiAgICByYWRpdXM6IHB4LFxuICAgIGJvcmRlclRvcExlZnRSYWRpdXM6IHB4LFxuICAgIGJvcmRlclRvcFJpZ2h0UmFkaXVzOiBweCxcbiAgICBib3JkZXJCb3R0b21SaWdodFJhZGl1czogcHgsXG4gICAgYm9yZGVyQm90dG9tTGVmdFJhZGl1czogcHgsXG4gICAgd2lkdGg6IHB4LFxuICAgIG1heFdpZHRoOiBweCxcbiAgICBoZWlnaHQ6IHB4LFxuICAgIG1heEhlaWdodDogcHgsXG4gICAgc2l6ZTogcHgsXG4gICAgdG9wOiBweCxcbiAgICByaWdodDogcHgsXG4gICAgYm90dG9tOiBweCxcbiAgICBsZWZ0OiBweCxcbiAgICBwYWRkaW5nOiBweCxcbiAgICBwYWRkaW5nVG9wOiBweCxcbiAgICBwYWRkaW5nUmlnaHQ6IHB4LFxuICAgIHBhZGRpbmdCb3R0b206IHB4LFxuICAgIHBhZGRpbmdMZWZ0OiBweCxcbiAgICBtYXJnaW46IHB4LFxuICAgIG1hcmdpblRvcDogcHgsXG4gICAgbWFyZ2luUmlnaHQ6IHB4LFxuICAgIG1hcmdpbkJvdHRvbTogcHgsXG4gICAgbWFyZ2luTGVmdDogcHgsXG4gICAgcm90YXRlOiBkZWdyZWVzLFxuICAgIHJvdGF0ZVg6IGRlZ3JlZXMsXG4gICAgcm90YXRlWTogZGVncmVlcyxcbiAgICByb3RhdGVaOiBkZWdyZWVzLFxuICAgIHNjYWxlOiBzY2FsZSxcbiAgICBzY2FsZVg6IHNjYWxlLFxuICAgIHNjYWxlWTogc2NhbGUsXG4gICAgc2NhbGVaOiBzY2FsZSxcbiAgICBza2V3OiBkZWdyZWVzLFxuICAgIHNrZXdYOiBkZWdyZWVzLFxuICAgIHNrZXdZOiBkZWdyZWVzLFxuICAgIGRpc3RhbmNlOiBweCxcbiAgICB4OiBweCxcbiAgICB5OiBweCxcbiAgICB6OiBweCxcbiAgICBwZXJzcGVjdGl2ZTogcHgsXG4gICAgb3BhY2l0eTogYWxwaGEsXG4gICAgb3JpZ2luWDogcHJvZ3Jlc3NQZXJjZW50YWdlLFxuICAgIG9yaWdpblk6IHByb2dyZXNzUGVyY2VudGFnZSxcbiAgICBvcmlnaW5aOiBweCxcbiAgICB6SW5kZXg6IHJvdW5kZWRcbn07XG52YXIgZ2V0VmFsdWVUeXBlID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiB2YWx1ZVR5cGVzW2tleV07XG59O1xudmFyIGdldFZhbHVlQXNUeXBlID0gZnVuY3Rpb24gKHZhbHVlLCB0eXBlKSB7XG4gICAgcmV0dXJuIHR5cGUgJiYgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyA/IHR5cGUudHJhbnNmb3JtKHZhbHVlKSA6IHZhbHVlO1xufTtcblxudmFyIFNDUk9MTF9MRUZUID0gJ3Njcm9sbExlZnQnO1xudmFyIFNDUk9MTF9UT1AgPSAnc2Nyb2xsVG9wJztcbnZhciBzY3JvbGxLZXlzID0gLyojX19QVVJFX18qL25ldyBTZXQoW1NDUk9MTF9MRUZULCBTQ1JPTExfVE9QXSk7XG5cbnZhciBibGFja2xpc3QgPSAvKiNfX1BVUkVfXyovbmV3IFNldChbU0NST0xMX0xFRlQsIFNDUk9MTF9UT1AsICd0cmFuc2Zvcm0nXSk7XG52YXIgdHJhbnNsYXRlQWxpYXMgPSB7XG4gICAgeDogJ3RyYW5zbGF0ZVgnLFxuICAgIHk6ICd0cmFuc2xhdGVZJyxcbiAgICB6OiAndHJhbnNsYXRlWidcbn07XG5mdW5jdGlvbiBpc0N1c3RvbVRlbXBsYXRlKHYpIHtcbiAgICByZXR1cm4gdHlwZW9mIHYgPT09ICdmdW5jdGlvbic7XG59XG5mdW5jdGlvbiBidWlsZFRyYW5zZm9ybShzdGF0ZSwgdHJhbnNmb3JtLCB0cmFuc2Zvcm1LZXlzLCB0cmFuc2Zvcm1Jc0RlZmF1bHQsIGVuYWJsZUhhcmR3YXJlQWNjZWxlcmF0aW9uKSB7XG4gICAgdmFyIHRyYW5zZm9ybVN0cmluZyA9ICcnO1xuICAgIHZhciB0cmFuc2Zvcm1IYXNaID0gZmFsc2U7XG4gICAgdHJhbnNmb3JtS2V5cy5zb3J0KHNvcnRUcmFuc2Zvcm1Qcm9wcyk7XG4gICAgdmFyIG51bVRyYW5zZm9ybUtleXMgPSB0cmFuc2Zvcm1LZXlzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bVRyYW5zZm9ybUtleXM7IGkrKykge1xuICAgICAgICB2YXIga2V5ID0gdHJhbnNmb3JtS2V5c1tpXTtcbiAgICAgICAgdHJhbnNmb3JtU3RyaW5nICs9ICh0cmFuc2xhdGVBbGlhc1trZXldIHx8IGtleSkgKyBcIihcIiArIHRyYW5zZm9ybVtrZXldICsgXCIpIFwiO1xuICAgICAgICB0cmFuc2Zvcm1IYXNaID0ga2V5ID09PSAneicgPyB0cnVlIDogdHJhbnNmb3JtSGFzWjtcbiAgICB9XG4gICAgaWYgKCF0cmFuc2Zvcm1IYXNaICYmIGVuYWJsZUhhcmR3YXJlQWNjZWxlcmF0aW9uKSB7XG4gICAgICAgIHRyYW5zZm9ybVN0cmluZyArPSAndHJhbnNsYXRlWigwKSc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdHJhbnNmb3JtU3RyaW5nID0gdHJhbnNmb3JtU3RyaW5nLnRyaW0oKTtcbiAgICB9XG4gICAgaWYgKGlzQ3VzdG9tVGVtcGxhdGUoc3RhdGUudHJhbnNmb3JtKSkge1xuICAgICAgICB0cmFuc2Zvcm1TdHJpbmcgPSBzdGF0ZS50cmFuc2Zvcm0odHJhbnNmb3JtLCB0cmFuc2Zvcm1TdHJpbmcpO1xuICAgIH0gZWxzZSBpZiAodHJhbnNmb3JtSXNEZWZhdWx0KSB7XG4gICAgICAgIHRyYW5zZm9ybVN0cmluZyA9ICdub25lJztcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybVN0cmluZztcbn1cbmZ1bmN0aW9uIGJ1aWxkU3R5bGVQcm9wZXJ0eShzdGF0ZSwgZW5hYmxlSGFyZHdhcmVBY2NlbGVyYXRpb24sIHN0eWxlcywgdHJhbnNmb3JtLCB0cmFuc2Zvcm1PcmlnaW4sIHRyYW5zZm9ybUtleXMsIGlzRGFzaENhc2UpIHtcbiAgICBpZiAoZW5hYmxlSGFyZHdhcmVBY2NlbGVyYXRpb24gPT09IHZvaWQgMCkge1xuICAgICAgICBlbmFibGVIYXJkd2FyZUFjY2VsZXJhdGlvbiA9IHRydWU7XG4gICAgfVxuICAgIGlmIChzdHlsZXMgPT09IHZvaWQgMCkge1xuICAgICAgICBzdHlsZXMgPSB7fTtcbiAgICB9XG4gICAgaWYgKHRyYW5zZm9ybSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRyYW5zZm9ybSA9IHt9O1xuICAgIH1cbiAgICBpZiAodHJhbnNmb3JtT3JpZ2luID09PSB2b2lkIDApIHtcbiAgICAgICAgdHJhbnNmb3JtT3JpZ2luID0ge307XG4gICAgfVxuICAgIGlmICh0cmFuc2Zvcm1LZXlzID09PSB2b2lkIDApIHtcbiAgICAgICAgdHJhbnNmb3JtS2V5cyA9IFtdO1xuICAgIH1cbiAgICBpZiAoaXNEYXNoQ2FzZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGlzRGFzaENhc2UgPSBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHRyYW5zZm9ybUlzRGVmYXVsdCA9IHRydWU7XG4gICAgdmFyIGhhc1RyYW5zZm9ybSA9IGZhbHNlO1xuICAgIHZhciBoYXNUcmFuc2Zvcm1PcmlnaW4gPSBmYWxzZTtcbiAgICBmb3IgKHZhciBrZXkgaW4gc3RhdGUpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gc3RhdGVba2V5XTtcbiAgICAgICAgdmFyIHZhbHVlVHlwZSA9IGdldFZhbHVlVHlwZShrZXkpO1xuICAgICAgICB2YXIgdmFsdWVBc1R5cGUgPSBnZXRWYWx1ZUFzVHlwZSh2YWx1ZSwgdmFsdWVUeXBlKTtcbiAgICAgICAgaWYgKGlzVHJhbnNmb3JtUHJvcChrZXkpKSB7XG4gICAgICAgICAgICBoYXNUcmFuc2Zvcm0gPSB0cnVlO1xuICAgICAgICAgICAgdHJhbnNmb3JtW2tleV0gPSB2YWx1ZUFzVHlwZTtcbiAgICAgICAgICAgIHRyYW5zZm9ybUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgaWYgKHRyYW5zZm9ybUlzRGVmYXVsdCkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZVR5cGUuZGVmYXVsdCAmJiB2YWx1ZSAhPT0gdmFsdWVUeXBlLmRlZmF1bHQgfHwgIXZhbHVlVHlwZS5kZWZhdWx0ICYmIHZhbHVlICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybUlzRGVmYXVsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpc1RyYW5zZm9ybU9yaWdpblByb3Aoa2V5KSkge1xuICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luW2tleV0gPSB2YWx1ZUFzVHlwZTtcbiAgICAgICAgICAgIGhhc1RyYW5zZm9ybU9yaWdpbiA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoIWJsYWNrbGlzdC5oYXMoa2V5KSB8fCAhaXNDdXN0b21UZW1wbGF0ZSh2YWx1ZUFzVHlwZSkpIHtcbiAgICAgICAgICAgIHN0eWxlc1twcmVmaXhlcihrZXksIGlzRGFzaENhc2UpXSA9IHZhbHVlQXNUeXBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChoYXNUcmFuc2Zvcm0gfHwgdHlwZW9mIHN0YXRlLnRyYW5zZm9ybSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBzdHlsZXMudHJhbnNmb3JtID0gYnVpbGRUcmFuc2Zvcm0oc3RhdGUsIHRyYW5zZm9ybSwgdHJhbnNmb3JtS2V5cywgdHJhbnNmb3JtSXNEZWZhdWx0LCBlbmFibGVIYXJkd2FyZUFjY2VsZXJhdGlvbik7XG4gICAgfVxuICAgIGlmIChoYXNUcmFuc2Zvcm1PcmlnaW4pIHtcbiAgICAgICAgc3R5bGVzLnRyYW5zZm9ybU9yaWdpbiA9ICh0cmFuc2Zvcm1PcmlnaW4ub3JpZ2luWCB8fCAwKSArIFwiIFwiICsgKHRyYW5zZm9ybU9yaWdpbi5vcmlnaW5ZIHx8IDApICsgXCIgXCIgKyAodHJhbnNmb3JtT3JpZ2luLm9yaWdpblogfHwgMCk7XG4gICAgfVxuICAgIHJldHVybiBzdHlsZXM7XG59XG5mdW5jdGlvbiBjcmVhdGVTdHlsZUJ1aWxkZXIoZW5hYmxlSGFyZHdhcmVBY2NlbGVyYXRpb24pIHtcbiAgICBpZiAoZW5hYmxlSGFyZHdhcmVBY2NlbGVyYXRpb24gPT09IHZvaWQgMCkge1xuICAgICAgICBlbmFibGVIYXJkd2FyZUFjY2VsZXJhdGlvbiA9IHRydWU7XG4gICAgfVxuICAgIHZhciBzdHlsZXMgPSB7fTtcbiAgICB2YXIgdHJhbnNmb3JtID0ge307XG4gICAgdmFyIHRyYW5zZm9ybU9yaWdpbiA9IHt9O1xuICAgIHZhciB0cmFuc2Zvcm1LZXlzID0gW107XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB0cmFuc2Zvcm1LZXlzLmxlbmd0aCA9IDA7XG4gICAgICAgIGJ1aWxkU3R5bGVQcm9wZXJ0eShzdGF0ZSwgZW5hYmxlSGFyZHdhcmVBY2NlbGVyYXRpb24sIHN0eWxlcywgdHJhbnNmb3JtLCB0cmFuc2Zvcm1PcmlnaW4sIHRyYW5zZm9ybUtleXMsIHRydWUpO1xuICAgICAgICByZXR1cm4gc3R5bGVzO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIG9uUmVhZChrZXksIG9wdGlvbnMpIHtcbiAgICB2YXIgZWxlbWVudCA9IG9wdGlvbnMuZWxlbWVudCxcbiAgICAgICAgcHJlcGFyc2VPdXRwdXQgPSBvcHRpb25zLnByZXBhcnNlT3V0cHV0O1xuICAgIHZhciBkZWZhdWx0VmFsdWVUeXBlID0gZ2V0VmFsdWVUeXBlKGtleSk7XG4gICAgaWYgKGlzVHJhbnNmb3JtUHJvcChrZXkpKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWVUeXBlID8gZGVmYXVsdFZhbHVlVHlwZS5kZWZhdWx0IHx8IDAgOiAwO1xuICAgIH0gZWxzZSBpZiAoc2Nyb2xsS2V5cy5oYXMoa2V5KSkge1xuICAgICAgICByZXR1cm4gZWxlbWVudFtrZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBkb21WYWx1ZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQsIG51bGwpLmdldFByb3BlcnR5VmFsdWUocHJlZml4ZXIoa2V5LCB0cnVlKSkgfHwgMDtcbiAgICAgICAgcmV0dXJuIHByZXBhcnNlT3V0cHV0ICYmIGRlZmF1bHRWYWx1ZVR5cGUgJiYgZGVmYXVsdFZhbHVlVHlwZS50ZXN0KGRvbVZhbHVlKSAmJiBkZWZhdWx0VmFsdWVUeXBlLnBhcnNlID8gZGVmYXVsdFZhbHVlVHlwZS5wYXJzZShkb21WYWx1ZSkgOiBkb21WYWx1ZTtcbiAgICB9XG59XG5mdW5jdGlvbiBvblJlbmRlcihzdGF0ZSwgX2EsIGNoYW5nZWRWYWx1ZXMpIHtcbiAgICB2YXIgZWxlbWVudCA9IF9hLmVsZW1lbnQsXG4gICAgICAgIGJ1aWxkU3R5bGVzID0gX2EuYnVpbGRTdHlsZXMsXG4gICAgICAgIGhhc0NTU1ZhcmlhYmxlID0gX2EuaGFzQ1NTVmFyaWFibGU7XG4gICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBidWlsZFN0eWxlcyhzdGF0ZSkpO1xuICAgIGlmIChoYXNDU1NWYXJpYWJsZSkge1xuICAgICAgICB2YXIgbnVtQ2hhbmdlZFZhbHVlcyA9IGNoYW5nZWRWYWx1ZXMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUNoYW5nZWRWYWx1ZXM7IGkrKykge1xuICAgICAgICAgICAgdmFyIGtleSA9IGNoYW5nZWRWYWx1ZXNbaV07XG4gICAgICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJy0tJykpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGtleSwgc3RhdGVba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoYW5nZWRWYWx1ZXMuaW5kZXhPZihTQ1JPTExfTEVGVCkgIT09IC0xKSB7XG4gICAgICAgIGVsZW1lbnRbU0NST0xMX0xFRlRdID0gc3RhdGVbU0NST0xMX0xFRlRdO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlZFZhbHVlcy5pbmRleE9mKFNDUk9MTF9UT1ApICE9PSAtMSkge1xuICAgICAgICBlbGVtZW50W1NDUk9MTF9UT1BdID0gc3RhdGVbU0NST0xMX1RPUF07XG4gICAgfVxufVxudmFyIGNzc1N0eWxlciA9IC8qI19fUFVSRV9fKi9jcmVhdGVTdHlsZXIoe1xuICAgIG9uUmVhZDogb25SZWFkLFxuICAgIG9uUmVuZGVyOiBvblJlbmRlcixcbiAgICB1bmNhY2hlZFZhbHVlczogc2Nyb2xsS2V5c1xufSk7XG5mdW5jdGlvbiBjcmVhdGVDc3NTdHlsZXIoZWxlbWVudCwgX2EpIHtcbiAgICBpZiAoX2EgPT09IHZvaWQgMCkge1xuICAgICAgICBfYSA9IHt9O1xuICAgIH1cbiAgICB2YXIgZW5hYmxlSGFyZHdhcmVBY2NlbGVyYXRpb24gPSBfYS5lbmFibGVIYXJkd2FyZUFjY2VsZXJhdGlvbixcbiAgICAgICAgcHJvcHMgPSBfX3Jlc3QoX2EsIFtcImVuYWJsZUhhcmR3YXJlQWNjZWxlcmF0aW9uXCJdKTtcbiAgICByZXR1cm4gY3NzU3R5bGVyKF9fYXNzaWduKHsgZWxlbWVudDogZWxlbWVudCwgYnVpbGRTdHlsZXM6IGNyZWF0ZVN0eWxlQnVpbGRlcihlbmFibGVIYXJkd2FyZUFjY2VsZXJhdGlvbiksIHByZXBhcnNlT3V0cHV0OiB0cnVlIH0sIHByb3BzKSk7XG59XG5cbnZhciBjYW1lbENhc2VBdHRyaWJ1dGVzID0gLyojX19QVVJFX18qL25ldyBTZXQoWydiYXNlRnJlcXVlbmN5JywgJ2RpZmZ1c2VDb25zdGFudCcsICdrZXJuZWxNYXRyaXgnLCAna2VybmVsVW5pdExlbmd0aCcsICdrZXlTcGxpbmVzJywgJ2tleVRpbWVzJywgJ2xpbWl0aW5nQ29uZUFuZ2xlJywgJ21hcmtlckhlaWdodCcsICdtYXJrZXJXaWR0aCcsICdudW1PY3RhdmVzJywgJ3RhcmdldFgnLCAndGFyZ2V0WScsICdzdXJmYWNlU2NhbGUnLCAnc3BlY3VsYXJDb25zdGFudCcsICdzcGVjdWxhckV4cG9uZW50JywgJ3N0ZERldmlhdGlvbicsICd0YWJsZVZhbHVlcyddKTtcblxudmFyIFpFUk9fTk9UX1pFUk8gPSAwLjAwMDAwMDE7XG52YXIgcHJvZ3Jlc3NUb1BpeGVscyA9IGZ1bmN0aW9uIChwcm9ncmVzcywgbGVuZ3RoKSB7XG4gICAgcmV0dXJuIHByb2dyZXNzICogbGVuZ3RoICsgJ3B4Jztcbn07XG52YXIgYnVpbGQgPSBmdW5jdGlvbiAoc3RhdGUsIGRpbWVuc2lvbnMsIGlzUGF0aCwgcGF0aExlbmd0aCkge1xuICAgIHZhciBoYXNUcmFuc2Zvcm0gPSBmYWxzZTtcbiAgICB2YXIgaGFzRGFzaEFycmF5ID0gZmFsc2U7XG4gICAgdmFyIHByb3BzID0ge307XG4gICAgdmFyIGRhc2hBcnJheVN0eWxlcyA9IGlzUGF0aCA/IHtcbiAgICAgICAgcGF0aExlbmd0aDogJzAnLFxuICAgICAgICBwYXRoU3BhY2luZzogXCJcIiArIHBhdGhMZW5ndGhcbiAgICB9IDogdW5kZWZpbmVkO1xuICAgIHZhciBzY2FsZSQkMSA9IHN0YXRlLnNjYWxlICE9PSB1bmRlZmluZWQgPyBzdGF0ZS5zY2FsZSB8fCBaRVJPX05PVF9aRVJPIDogc3RhdGUuc2NhbGVYIHx8IDE7XG4gICAgdmFyIHNjYWxlWSA9IHN0YXRlLnNjYWxlWSAhPT0gdW5kZWZpbmVkID8gc3RhdGUuc2NhbGVZIHx8IFpFUk9fTk9UX1pFUk8gOiBzY2FsZSQkMSB8fCAxO1xuICAgIHZhciB0cmFuc2Zvcm1PcmlnaW5YID0gZGltZW5zaW9ucy53aWR0aCAqIChzdGF0ZS5vcmlnaW5YIHx8IDUwKSArIGRpbWVuc2lvbnMueDtcbiAgICB2YXIgdHJhbnNmb3JtT3JpZ2luWSA9IGRpbWVuc2lvbnMuaGVpZ2h0ICogKHN0YXRlLm9yaWdpblkgfHwgNTApICsgZGltZW5zaW9ucy55O1xuICAgIHZhciBzY2FsZVRyYW5zZm9ybVggPSAtdHJhbnNmb3JtT3JpZ2luWCAqIChzY2FsZSQkMSAqIDEpO1xuICAgIHZhciBzY2FsZVRyYW5zZm9ybVkgPSAtdHJhbnNmb3JtT3JpZ2luWSAqIChzY2FsZVkgKiAxKTtcbiAgICB2YXIgc2NhbGVSZXBsYWNlWCA9IHRyYW5zZm9ybU9yaWdpblggLyBzY2FsZSQkMTtcbiAgICB2YXIgc2NhbGVSZXBsYWNlWSA9IHRyYW5zZm9ybU9yaWdpblkgLyBzY2FsZVk7XG4gICAgdmFyIHRyYW5zZm9ybSA9IHtcbiAgICAgICAgdHJhbnNsYXRlOiBcInRyYW5zbGF0ZShcIiArIHN0YXRlLnggKyBcIiwgXCIgKyBzdGF0ZS55ICsgXCIpIFwiLFxuICAgICAgICBzY2FsZTogXCJ0cmFuc2xhdGUoXCIgKyBzY2FsZVRyYW5zZm9ybVggKyBcIiwgXCIgKyBzY2FsZVRyYW5zZm9ybVkgKyBcIikgc2NhbGUoXCIgKyBzY2FsZSQkMSArIFwiLCBcIiArIHNjYWxlWSArIFwiKSB0cmFuc2xhdGUoXCIgKyBzY2FsZVJlcGxhY2VYICsgXCIsIFwiICsgc2NhbGVSZXBsYWNlWSArIFwiKSBcIixcbiAgICAgICAgcm90YXRlOiBcInJvdGF0ZShcIiArIHN0YXRlLnJvdGF0ZSArIFwiLCBcIiArIHRyYW5zZm9ybU9yaWdpblggKyBcIiwgXCIgKyB0cmFuc2Zvcm1PcmlnaW5ZICsgXCIpIFwiLFxuICAgICAgICBza2V3WDogXCJza2V3WChcIiArIHN0YXRlLnNrZXdYICsgXCIpIFwiLFxuICAgICAgICBza2V3WTogXCJza2V3WShcIiArIHN0YXRlLnNrZXdZICsgXCIpIFwiXG4gICAgfTtcbiAgICBmb3IgKHZhciBrZXkgaW4gc3RhdGUpIHtcbiAgICAgICAgaWYgKHN0YXRlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHN0YXRlW2tleV07XG4gICAgICAgICAgICBpZiAoaXNUcmFuc2Zvcm1Qcm9wKGtleSkpIHtcbiAgICAgICAgICAgICAgICBoYXNUcmFuc2Zvcm0gPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1BhdGggJiYgKGtleSA9PT0gJ3BhdGhMZW5ndGgnIHx8IGtleSA9PT0gJ3BhdGhTcGFjaW5nJykgJiYgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIGhhc0Rhc2hBcnJheSA9IHRydWU7XG4gICAgICAgICAgICAgICAgZGFzaEFycmF5U3R5bGVzW2tleV0gPSBwcm9ncmVzc1RvUGl4ZWxzKHZhbHVlLCBwYXRoTGVuZ3RoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNQYXRoICYmIGtleSA9PT0gJ3BhdGhPZmZzZXQnKSB7XG4gICAgICAgICAgICAgICAgcHJvcHNbJ3N0cm9rZS1kYXNob2Zmc2V0J10gPSBwcm9ncmVzc1RvUGl4ZWxzKC12YWx1ZSwgcGF0aExlbmd0aCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBhdHRyS2V5ID0gIWNhbWVsQ2FzZUF0dHJpYnV0ZXMuaGFzKGtleSkgPyBjYW1lbFRvRGFzaChrZXkpIDoga2V5O1xuICAgICAgICAgICAgICAgIHByb3BzW2F0dHJLZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGhhc0Rhc2hBcnJheSkge1xuICAgICAgICBwcm9wc1snc3Ryb2tlLWRhc2hhcnJheSddID0gZGFzaEFycmF5U3R5bGVzLnBhdGhMZW5ndGggKyAnICcgKyBkYXNoQXJyYXlTdHlsZXMucGF0aFNwYWNpbmc7XG4gICAgfVxuICAgIGlmIChoYXNUcmFuc2Zvcm0pIHtcbiAgICAgICAgcHJvcHMudHJhbnNmb3JtID0gJyc7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiB0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0VmFsdWUgPSBrZXkgPT09ICdzY2FsZScgPyAnMScgOiAnMCc7XG4gICAgICAgICAgICAgICAgcHJvcHMudHJhbnNmb3JtICs9IHRyYW5zZm9ybVtrZXldLnJlcGxhY2UoL3VuZGVmaW5lZC9nLCBkZWZhdWx0VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcm9wcztcbn07XG5cbnZhciBpbnQgPSAvKiNfX1BVUkVfXyovX19hc3NpZ24oe30sIG51bWJlciwgeyB0cmFuc2Zvcm06IE1hdGgucm91bmQgfSk7XG52YXIgdmFsdWVUeXBlcyQxID0ge1xuICAgIGZpbGw6IGNvbG9yLFxuICAgIHN0cm9rZTogY29sb3IsXG4gICAgc2NhbGU6IHNjYWxlLFxuICAgIHNjYWxlWDogc2NhbGUsXG4gICAgc2NhbGVZOiBzY2FsZSxcbiAgICBvcGFjaXR5OiBhbHBoYSxcbiAgICBmaWxsT3BhY2l0eTogYWxwaGEsXG4gICAgc3Ryb2tlT3BhY2l0eTogYWxwaGEsXG4gICAgbnVtT2N0YXZlczogaW50XG59O1xudmFyIGdldFZhbHVlVHlwZSQxID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiB2YWx1ZVR5cGVzJDFba2V5XTtcbn07XG5cbnZhciBnZXREaW1lbnNpb25zID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gdHlwZW9mIGVsZW1lbnQuZ2V0QkJveCA9PT0gJ2Z1bmN0aW9uJyA/IGVsZW1lbnQuZ2V0QkJveCgpIDogZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbn07XG52YXIgZ2V0U1ZHRWxlbWVudERpbWVuc2lvbnMgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBnZXREaW1lbnNpb25zKGVsZW1lbnQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHsgeDogMCwgeTogMCwgd2lkdGg6IDAsIGhlaWdodDogMCB9O1xuICAgIH1cbn07XG5cbnZhciBzdmdTdHlsZXIgPSAvKiNfX1BVUkVfXyovY3JlYXRlU3R5bGVyKHtcbiAgICBvblJlYWQ6IGZ1bmN0aW9uIChrZXksIF9hKSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gX2EuZWxlbWVudDtcbiAgICAgICAgaWYgKCFpc1RyYW5zZm9ybVByb3Aoa2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKGtleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVUeXBlID0gZ2V0VmFsdWVUeXBlJDEoa2V5KTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZVR5cGUgPyB2YWx1ZVR5cGUuZGVmYXVsdCA6IDA7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uUmVuZGVyOiBmdW5jdGlvbiAoc3RhdGUsIF9hKSB7XG4gICAgICAgIHZhciBkaW1lbnNpb25zID0gX2EuZGltZW5zaW9ucyxcbiAgICAgICAgICAgIGVsZW1lbnQgPSBfYS5lbGVtZW50LFxuICAgICAgICAgICAgaXNQYXRoID0gX2EuaXNQYXRoLFxuICAgICAgICAgICAgcGF0aExlbmd0aCA9IF9hLnBhdGhMZW5ndGg7XG4gICAgICAgIHNldERvbUF0dHJzKGVsZW1lbnQsIGJ1aWxkKHN0YXRlLCBkaW1lbnNpb25zLCBpc1BhdGgsIHBhdGhMZW5ndGgpKTtcbiAgICB9XG59KTtcbnZhciBzdmcgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHZhciBkaW1lbnNpb25zID0gZ2V0U1ZHRWxlbWVudERpbWVuc2lvbnMoZWxlbWVudCk7XG4gICAgdmFyIHByb3BzID0ge1xuICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICBkaW1lbnNpb25zOiBkaW1lbnNpb25zLFxuICAgICAgICBpc1BhdGg6IGZhbHNlXG4gICAgfTtcbiAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAncGF0aCcpIHtcbiAgICAgICAgcHJvcHMuaXNQYXRoID0gdHJ1ZTtcbiAgICAgICAgcHJvcHMucGF0aExlbmd0aCA9IGVsZW1lbnQuZ2V0VG90YWxMZW5ndGgoKTtcbiAgICB9XG4gICAgcmV0dXJuIHN2Z1N0eWxlcihwcm9wcyk7XG59O1xuXG52YXIgdmlld3BvcnQgPSAvKiNfX1BVUkVfXyovY3JlYXRlU3R5bGVyKHtcbiAgICB1c2VDYWNoZTogZmFsc2UsXG4gICAgb25SZWFkOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBrZXkgPT09ICdzY3JvbGxUb3AnID8gd2luZG93LnBhZ2VZT2Zmc2V0IDogd2luZG93LnBhZ2VYT2Zmc2V0O1xuICAgIH0sXG4gICAgb25SZW5kZXI6IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgX2IgPSBfYS5zY3JvbGxUb3AsXG4gICAgICAgICAgICBzY3JvbGxUb3AgPSBfYiA9PT0gdm9pZCAwID8gMCA6IF9iLFxuICAgICAgICAgICAgX2MgPSBfYS5zY3JvbGxMZWZ0LFxuICAgICAgICAgICAgc2Nyb2xsTGVmdCA9IF9jID09PSB2b2lkIDAgPyAwIDogX2M7XG4gICAgICAgIHJldHVybiB3aW5kb3cuc2Nyb2xsVG8oc2Nyb2xsTGVmdCwgc2Nyb2xsVG9wKTtcbiAgICB9XG59KTtcblxudmFyIGNhY2hlID0gLyojX19QVVJFX18qL25ldyBXZWFrTWFwKCk7XG52YXIgY3JlYXRlRE9NU3R5bGVyID0gZnVuY3Rpb24gKG5vZGUsIHByb3BzKSB7XG4gICAgdmFyIHN0eWxlcjtcbiAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHN0eWxlciA9IGNyZWF0ZUNzc1N0eWxlcihub2RlLCBwcm9wcyk7XG4gICAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgU1ZHRWxlbWVudCkge1xuICAgICAgICBzdHlsZXIgPSBzdmcobm9kZSk7XG4gICAgfSBlbHNlIGlmIChub2RlID09PSB3aW5kb3cpIHtcbiAgICAgICAgc3R5bGVyID0gdmlld3BvcnQobm9kZSk7XG4gICAgfVxuICAgIGludmFyaWFudChzdHlsZXIgIT09IHVuZGVmaW5lZCwgJ05vIHZhbGlkIG5vZGUgcHJvdmlkZWQuIE5vZGUgbXVzdCBiZSBIVE1MRWxlbWVudCwgU1ZHRWxlbWVudCBvciB3aW5kb3cuJyk7XG4gICAgY2FjaGUuc2V0KG5vZGUsIHN0eWxlcik7XG4gICAgcmV0dXJuIHN0eWxlcjtcbn07XG52YXIgZ2V0U3R5bGVyID0gZnVuY3Rpb24gKG5vZGUsIHByb3BzKSB7XG4gICAgcmV0dXJuIGNhY2hlLmhhcyhub2RlKSA/IGNhY2hlLmdldChub2RlKSA6IGNyZWF0ZURPTVN0eWxlcihub2RlLCBwcm9wcyk7XG59O1xuZnVuY3Rpb24gaW5kZXgobm9kZU9yU2VsZWN0b3IsIHByb3BzKSB7XG4gICAgdmFyIG5vZGUgPSB0eXBlb2Ygbm9kZU9yU2VsZWN0b3IgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihub2RlT3JTZWxlY3RvcikgOiBub2RlT3JTZWxlY3RvcjtcbiAgICByZXR1cm4gZ2V0U3R5bGVyKG5vZGUsIHByb3BzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgaW5kZXg7XG5leHBvcnQgeyBjcmVhdGVTdHlsZXIgYXMgY3JlYXRlU3R5bGVyRmFjdG9yeSwgYnVpbGRTdHlsZVByb3BlcnR5LCBpc1RyYW5zZm9ybVByb3AgfTtcbiIsImltcG9ydCB7IF9fcmVzdCwgX19leHRlbmRzLCBfX2Fzc2lnbiB9IGZyb20gJ3RzbGliJztcbmltcG9ydCB7IHBpcGUsIGFuZ2xlLCBkZWdyZWVzVG9SYWRpYW5zLCBkaXN0YW5jZSwgaXNQb2ludDNELCBpc1BvaW50LCBtaXgsIHBvaW50RnJvbVZlY3RvciwgcHJvZ3Jlc3MsIHJhZGlhbnNUb0RlZ3JlZXMsIHNtb290aEZyYW1lLCB2ZWxvY2l0eVBlckZyYW1lLCB2ZWxvY2l0eVBlclNlY29uZCwgbWl4Q29sb3IsIG1peENvbXBsZXgsIGNsYW1wLCBhcHBseU9mZnNldCwgY29uZGl0aW9uYWwsIGludGVycG9sYXRlLCBtaXhBcnJheSwgc21vb3RoLCBzbmFwLCBzcHJpbmdGb3JjZSwgc3ByaW5nRm9yY2VFeHBvLCBzcHJpbmdGb3JjZUxpbmVhciwgd3JhcCB9IGZyb20gJ0Bwb3Btb3Rpb24vcG9wY29ybic7XG5pbXBvcnQgc3luYywgeyBnZXRGcmFtZURhdGEsIGNhbmNlbFN5bmMgfSBmcm9tICdmcmFtZXN5bmMnO1xuaW1wb3J0ICogYXMgc3R5bGVWYWx1ZVR5cGVzIGZyb20gJ3N0eWxlLXZhbHVlLXR5cGVzJztcbmltcG9ydCB7IGNvbG9yLCBjb21wbGV4LCBwZXJjZW50LCBkZWdyZWVzLCB2aCwgdncsIHB4LCBudW1iZXIgfSBmcm9tICdzdHlsZS12YWx1ZS10eXBlcyc7XG5leHBvcnQgeyBzdHlsZVZhbHVlVHlwZXMgYXMgdmFsdWVUeXBlcyB9O1xuaW1wb3J0ICogYXMgZWFzaW5nIGZyb20gJ0Bwb3Btb3Rpb24vZWFzaW5nJztcbmltcG9ydCB7IGxpbmVhciwgY3JlYXRlUmV2ZXJzZWRFYXNpbmcsIGVhc2VPdXQsIGVhc2VJbk91dCB9IGZyb20gJ0Bwb3Btb3Rpb24vZWFzaW5nJztcbmV4cG9ydCB7IGVhc2luZyB9O1xuaW1wb3J0IHN0eWxlciBmcm9tICdzdHlsZWZpcmUnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBzdHlsZXIgfSBmcm9tICdzdHlsZWZpcmUnO1xuaW1wb3J0IHsgd2FybmluZyB9IGZyb20gJ2hleS1saXN0ZW4nO1xuXG52YXIgQ2hhaW5hYmxlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDaGFpbmFibGUocHJvcHMpIHtcbiAgICAgICAgaWYgKHByb3BzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHByb3BzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgIH1cbiAgICBDaGFpbmFibGUucHJvdG90eXBlLmFwcGx5TWlkZGxld2FyZSA9IGZ1bmN0aW9uIChtaWRkbGV3YXJlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZShfX2Fzc2lnbih7fSwgdGhpcy5wcm9wcywgeyBtaWRkbGV3YXJlOiB0aGlzLnByb3BzLm1pZGRsZXdhcmUgPyBbbWlkZGxld2FyZV0uY29uY2F0KHRoaXMucHJvcHMubWlkZGxld2FyZSkgOiBbbWlkZGxld2FyZV0gfSkpO1xuICAgIH07XG4gICAgQ2hhaW5hYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZnVuY3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGZ1bmNzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBpcGVkVXBkYXRlID0gZnVuY3MubGVuZ3RoID09PSAxID8gZnVuY3NbMF0gOiBwaXBlLmFwcGx5KHZvaWQgMCwgZnVuY3MpO1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBseU1pZGRsZXdhcmUoZnVuY3Rpb24gKHVwZGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZShwaXBlZFVwZGF0ZSh2KSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENoYWluYWJsZS5wcm90b3R5cGUud2hpbGUgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5TWlkZGxld2FyZShmdW5jdGlvbiAodXBkYXRlLCBjb21wbGV0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZWRpY2F0ZSh2KSA/IHVwZGF0ZSh2KSA6IGNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENoYWluYWJsZS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBseU1pZGRsZXdhcmUoZnVuY3Rpb24gKHVwZGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZWRpY2F0ZSh2KSAmJiB1cGRhdGUodik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDaGFpbmFibGU7XG59KCk7XG5cbnZhciBPYnNlcnZlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JzZXJ2ZXIoX2EsIG9ic2VydmVyKSB7XG4gICAgICAgIHZhciBtaWRkbGV3YXJlID0gX2EubWlkZGxld2FyZSxcbiAgICAgICAgICAgIG9uQ29tcGxldGUgPSBfYS5vbkNvbXBsZXRlO1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgaWYgKF90aGlzLm9ic2VydmVyLnVwZGF0ZSkgX3RoaXMudXBkYXRlT2JzZXJ2ZXIodik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMub2JzZXJ2ZXIuY29tcGxldGUgJiYgX3RoaXMuaXNBY3RpdmUpIF90aGlzLm9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICBpZiAoX3RoaXMub25Db21wbGV0ZSkgX3RoaXMub25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgX3RoaXMuaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5vYnNlcnZlci5lcnJvciAmJiBfdGhpcy5pc0FjdGl2ZSkgX3RoaXMub2JzZXJ2ZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIF90aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICAgICAgdGhpcy51cGRhdGVPYnNlcnZlciA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIudXBkYXRlKHYpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uQ29tcGxldGUgPSBvbkNvbXBsZXRlO1xuICAgICAgICBpZiAob2JzZXJ2ZXIudXBkYXRlICYmIG1pZGRsZXdhcmUgJiYgbWlkZGxld2FyZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIG1pZGRsZXdhcmUuZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy51cGRhdGVPYnNlcnZlciA9IG0oX3RoaXMudXBkYXRlT2JzZXJ2ZXIsIF90aGlzLmNvbXBsZXRlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBPYnNlcnZlcjtcbn0oKTtcbnZhciBjcmVhdGVPYnNlcnZlciA9IGZ1bmN0aW9uIChvYnNlcnZlckNhbmRpZGF0ZSwgX2EsIG9uQ29tcGxldGUpIHtcbiAgICB2YXIgbWlkZGxld2FyZSA9IF9hLm1pZGRsZXdhcmU7XG4gICAgaWYgKHR5cGVvZiBvYnNlcnZlckNhbmRpZGF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmVyKHsgbWlkZGxld2FyZTogbWlkZGxld2FyZSwgb25Db21wbGV0ZTogb25Db21wbGV0ZSB9LCB7IHVwZGF0ZTogb2JzZXJ2ZXJDYW5kaWRhdGUgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZlcih7IG1pZGRsZXdhcmU6IG1pZGRsZXdhcmUsIG9uQ29tcGxldGU6IG9uQ29tcGxldGUgfSwgb2JzZXJ2ZXJDYW5kaWRhdGUpO1xuICAgIH1cbn07XG5cbnZhciBBY3Rpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBY3Rpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIEFjdGlvbi5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWN0aW9uKHByb3BzKTtcbiAgICB9O1xuICAgIEFjdGlvbi5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAob2JzZXJ2ZXJDYW5kaWRhdGUpIHtcbiAgICAgICAgaWYgKG9ic2VydmVyQ2FuZGlkYXRlID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIG9ic2VydmVyQ2FuZGlkYXRlID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlzQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHtcbiAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgaW5pdCA9IF9hLmluaXQsXG4gICAgICAgICAgICBvYnNlcnZlclByb3BzID0gX19yZXN0KF9hLCBbXCJpbml0XCJdKTtcbiAgICAgICAgdmFyIG9ic2VydmVyID0gY3JlYXRlT2JzZXJ2ZXIob2JzZXJ2ZXJDYW5kaWRhdGUsIG9ic2VydmVyUHJvcHMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlzQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnN0b3AoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBhcGkgPSBpbml0KG9ic2VydmVyKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uID0gYXBpID8gX19hc3NpZ24oe30sIHN1YnNjcmlwdGlvbiwgYXBpKSA6IHN1YnNjcmlwdGlvbjtcbiAgICAgICAgaWYgKG9ic2VydmVyQ2FuZGlkYXRlLnJlZ2lzdGVyUGFyZW50KSB7XG4gICAgICAgICAgICBvYnNlcnZlckNhbmRpZGF0ZS5yZWdpc3RlclBhcmVudChzdWJzY3JpcHRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0NvbXBsZXRlKSBzdWJzY3JpcHRpb24uc3RvcCgpO1xuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgIH07XG4gICAgcmV0dXJuIEFjdGlvbjtcbn0oQ2hhaW5hYmxlKTtcbnZhciBhY3Rpb24gPSBmdW5jdGlvbiAoaW5pdCkge1xuICAgIHJldHVybiBuZXcgQWN0aW9uKHsgaW5pdDogaW5pdCB9KTtcbn07XG5cbnZhciBCYXNlTXVsdGljYXN0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQmFzZU11bHRpY2FzdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCYXNlTXVsdGljYXN0KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc3Vic2NyaWJlcnMgPSBbXTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBCYXNlTXVsdGljYXN0LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEJhc2VNdWx0aWNhc3QucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpYmVyLmVycm9yKGVycik7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQmFzZU11bHRpY2FzdC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnNjcmliZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliZXJzW2ldLnVwZGF0ZSh2KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQmFzZU11bHRpY2FzdC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG9ic2VydmVyQ2FuZGlkYXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvYnNlcnZlciA9IGNyZWF0ZU9ic2VydmVyKG9ic2VydmVyQ2FuZGlkYXRlLCB0aGlzLnByb3BzKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVycy5wdXNoKG9ic2VydmVyKTtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gX3RoaXMuc3Vic2NyaWJlcnMuaW5kZXhPZihvYnNlcnZlcik7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkgX3RoaXMuc3Vic2NyaWJlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICB9O1xuICAgIEJhc2VNdWx0aWNhc3QucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudCkgdGhpcy5wYXJlbnQuc3RvcCgpO1xuICAgIH07XG4gICAgQmFzZU11bHRpY2FzdC5wcm90b3R5cGUucmVnaXN0ZXJQYXJlbnQgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHN1YnNjcmlwdGlvbjtcbiAgICB9O1xuICAgIHJldHVybiBCYXNlTXVsdGljYXN0O1xufShDaGFpbmFibGUpO1xuXG52YXIgTXVsdGljYXN0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTXVsdGljYXN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE11bHRpY2FzdCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBNdWx0aWNhc3QucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgICAgICByZXR1cm4gbmV3IE11bHRpY2FzdChwcm9wcyk7XG4gICAgfTtcbiAgICByZXR1cm4gTXVsdGljYXN0O1xufShCYXNlTXVsdGljYXN0KTtcbnZhciBtdWx0aWNhc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBNdWx0aWNhc3QoKTtcbn07XG5cbnZhciBzdGVwUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoc3RlcHMsIHByb2dyZXNzJCQxKSB7XG4gICAgdmFyIHNlZ21lbnQgPSAxIC8gKHN0ZXBzIC0gMSk7XG4gICAgdmFyIHN1YnNlZ21lbnQgPSAxIC8gKDIgKiAoc3RlcHMgLSAxKSk7XG4gICAgdmFyIHBlcmNlbnRQcm9ncmVzc09mVGFyZ2V0ID0gTWF0aC5taW4ocHJvZ3Jlc3MkJDEsIDEpO1xuICAgIHZhciBzdWJzZWdtZW50UHJvZ3Jlc3NPZlRhcmdldCA9IHBlcmNlbnRQcm9ncmVzc09mVGFyZ2V0IC8gc3Vic2VnbWVudDtcbiAgICB2YXIgc2VnbWVudFByb2dyZXNzT2ZUYXJnZXQgPSBNYXRoLmZsb29yKChzdWJzZWdtZW50UHJvZ3Jlc3NPZlRhcmdldCArIDEpIC8gMik7XG4gICAgcmV0dXJuIHNlZ21lbnRQcm9ncmVzc09mVGFyZ2V0ICogc2VnbWVudDtcbn07XG5cbnZhciBjYWxjID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICAgIGFuZ2xlOiBhbmdsZSxcbiAgICBkZWdyZWVzVG9SYWRpYW5zOiBkZWdyZWVzVG9SYWRpYW5zLFxuICAgIGRpc3RhbmNlOiBkaXN0YW5jZSxcbiAgICBpc1BvaW50M0Q6IGlzUG9pbnQzRCxcbiAgICBpc1BvaW50OiBpc1BvaW50LFxuICAgIGRpbGF0ZTogbWl4LFxuICAgIGdldFZhbHVlRnJvbVByb2dyZXNzOiBtaXgsXG4gICAgcG9pbnRGcm9tQW5nbGVBbmREaXN0YW5jZTogcG9pbnRGcm9tVmVjdG9yLFxuICAgIGdldFByb2dyZXNzRnJvbVZhbHVlOiBwcm9ncmVzcyxcbiAgICByYWRpYW5zVG9EZWdyZWVzOiByYWRpYW5zVG9EZWdyZWVzLFxuICAgIHNtb290aDogc21vb3RoRnJhbWUsXG4gICAgc3BlZWRQZXJGcmFtZTogdmVsb2NpdHlQZXJGcmFtZSxcbiAgICBzcGVlZFBlclNlY29uZDogdmVsb2NpdHlQZXJTZWNvbmQsXG4gICAgc3RlcFByb2dyZXNzOiBzdGVwUHJvZ3Jlc3Ncbn0pO1xuXG52YXIgaXNWYWx1ZUxpc3QgPSBmdW5jdGlvbiAodikge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHYpO1xufTtcbnZhciBpc1NpbmdsZVZhbHVlID0gZnVuY3Rpb24gKHYpIHtcbiAgICB2YXIgdHlwZU9mViA9IHR5cGVvZiB2O1xuICAgIHJldHVybiB0eXBlT2ZWID09PSAnc3RyaW5nJyB8fCB0eXBlT2ZWID09PSAnbnVtYmVyJztcbn07XG52YXIgVmFsdWVSZWFjdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFZhbHVlUmVhY3Rpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVmFsdWVSZWFjdGlvbihwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc2NoZWR1bGVWZWxvY2l0eUNoZWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHN5bmMucG9zdFJlbmRlcihfdGhpcy52ZWxvY2l0eUNoZWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMudmVsb2NpdHlDaGVjayA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IF9hLnRpbWVzdGFtcDtcbiAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgIT09IF90aGlzLmxhc3RVcGRhdGVkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJldiA9IF90aGlzLmN1cnJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLnByZXYgPSBfdGhpcy5jdXJyZW50ID0gcHJvcHMudmFsdWUgfHwgMDtcbiAgICAgICAgaWYgKGlzU2luZ2xlVmFsdWUoX3RoaXMuY3VycmVudCkpIHtcbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZUN1cnJlbnQgPSBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jdXJyZW50ID0gdjtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5nZXRWZWxvY2l0eU9mQ3VycmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0U2luZ2xlVmVsb2NpdHkoX3RoaXMuY3VycmVudCwgX3RoaXMucHJldik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKGlzVmFsdWVMaXN0KF90aGlzLmN1cnJlbnQpKSB7XG4gICAgICAgICAgICBfdGhpcy51cGRhdGVDdXJyZW50ID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY3VycmVudCA9IHYuc2xpY2UoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5nZXRWZWxvY2l0eU9mQ3VycmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0TGlzdFZlbG9jaXR5KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMudXBkYXRlQ3VycmVudCA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY3VycmVudCA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB2KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmN1cnJlbnRba2V5XSA9IHZba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5nZXRWZWxvY2l0eU9mQ3VycmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0TWFwVmVsb2NpdHkoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BzLmluaXRpYWxTdWJzY3JpcHRpb24pIF90aGlzLnN1YnNjcmliZShwcm9wcy5pbml0aWFsU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBWYWx1ZVJlYWN0aW9uLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZVJlYWN0aW9uKHByb3BzKTtcbiAgICB9O1xuICAgIFZhbHVlUmVhY3Rpb24ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudDtcbiAgICB9O1xuICAgIFZhbHVlUmVhY3Rpb24ucHJvdG90eXBlLmdldFZlbG9jaXR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRWZWxvY2l0eU9mQ3VycmVudCgpO1xuICAgIH07XG4gICAgVmFsdWVSZWFjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzLCB2KTtcbiAgICAgICAgdGhpcy5wcmV2ID0gdGhpcy5jdXJyZW50O1xuICAgICAgICB0aGlzLnVwZGF0ZUN1cnJlbnQodik7XG4gICAgICAgIHZhciBfYSA9IGdldEZyYW1lRGF0YSgpLFxuICAgICAgICAgICAgZGVsdGEgPSBfYS5kZWx0YSxcbiAgICAgICAgICAgIHRpbWVzdGFtcCA9IF9hLnRpbWVzdGFtcDtcbiAgICAgICAgdGhpcy50aW1lRGVsdGEgPSBkZWx0YTtcbiAgICAgICAgdGhpcy5sYXN0VXBkYXRlZCA9IHRpbWVzdGFtcDtcbiAgICAgICAgc3luYy5wb3N0UmVuZGVyKHRoaXMuc2NoZWR1bGVWZWxvY2l0eUNoZWNrKTtcbiAgICB9O1xuICAgIFZhbHVlUmVhY3Rpb24ucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChvYnNlcnZlckNhbmRpZGF0ZSkge1xuICAgICAgICB2YXIgc3ViID0gX3N1cGVyLnByb3RvdHlwZS5zdWJzY3JpYmUuY2FsbCh0aGlzLCBvYnNlcnZlckNhbmRpZGF0ZSk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcnNbdGhpcy5zdWJzY3JpYmVycy5sZW5ndGggLSAxXS51cGRhdGUodGhpcy5jdXJyZW50KTtcbiAgICAgICAgcmV0dXJuIHN1YjtcbiAgICB9O1xuICAgIFZhbHVlUmVhY3Rpb24ucHJvdG90eXBlLmdldFNpbmdsZVZlbG9jaXR5ID0gZnVuY3Rpb24gKGN1cnJlbnQsIHByZXYpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBjdXJyZW50ID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgcHJldiA9PT0gJ251bWJlcicgPyB2ZWxvY2l0eVBlclNlY29uZChjdXJyZW50IC0gcHJldiwgdGhpcy50aW1lRGVsdGEpIDogdmVsb2NpdHlQZXJTZWNvbmQocGFyc2VGbG9hdChjdXJyZW50KSAtIHBhcnNlRmxvYXQocHJldiksIHRoaXMudGltZURlbHRhKSB8fCAwO1xuICAgIH07XG4gICAgVmFsdWVSZWFjdGlvbi5wcm90b3R5cGUuZ2V0TGlzdFZlbG9jaXR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50Lm1hcChmdW5jdGlvbiAoYywgaSkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldFNpbmdsZVZlbG9jaXR5KGMsIF90aGlzLnByZXZbaV0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFZhbHVlUmVhY3Rpb24ucHJvdG90eXBlLmdldE1hcFZlbG9jaXR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmVsb2NpdHkgPSB7fTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuY3VycmVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgdmVsb2NpdHlba2V5XSA9IHRoaXMuZ2V0U2luZ2xlVmVsb2NpdHkodGhpcy5jdXJyZW50W2tleV0sIHRoaXMucHJldltrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmVsb2NpdHk7XG4gICAgfTtcbiAgICByZXR1cm4gVmFsdWVSZWFjdGlvbjtcbn0oQmFzZU11bHRpY2FzdCk7XG52YXIgdmFsdWUgPSBmdW5jdGlvbiAodmFsdWUsIGluaXRpYWxTdWJzY3JpcHRpb24pIHtcbiAgICByZXR1cm4gbmV3IFZhbHVlUmVhY3Rpb24oeyB2YWx1ZTogdmFsdWUsIGluaXRpYWxTdWJzY3JpcHRpb246IGluaXRpYWxTdWJzY3JpcHRpb24gfSk7XG59O1xuXG52YXIgbXVsdGkgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgZ2V0Q291bnQgPSBfYS5nZXRDb3VudCxcbiAgICAgICAgZ2V0Rmlyc3QgPSBfYS5nZXRGaXJzdCxcbiAgICAgICAgZ2V0T3V0cHV0ID0gX2EuZ2V0T3V0cHV0LFxuICAgICAgICBtYXBBcGkgPSBfYS5tYXBBcGksXG4gICAgICAgIHNldFByb3AgPSBfYS5zZXRQcm9wLFxuICAgICAgICBzdGFydEFjdGlvbnMgPSBfYS5zdGFydEFjdGlvbnM7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb25zKSB7XG4gICAgICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgdXBkYXRlID0gX2EudXBkYXRlLFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlID0gX2EuY29tcGxldGUsXG4gICAgICAgICAgICAgICAgZXJyb3IgPSBfYS5lcnJvcjtcbiAgICAgICAgICAgIHZhciBudW1BY3Rpb25zID0gZ2V0Q291bnQoYWN0aW9ucyk7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gZ2V0T3V0cHV0KCk7XG4gICAgICAgICAgICB2YXIgdXBkYXRlT3V0cHV0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGUob3V0cHV0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgbnVtQ29tcGxldGVkQWN0aW9ucyA9IDA7XG4gICAgICAgICAgICB2YXIgc3VicyA9IHN0YXJ0QWN0aW9ucyhhY3Rpb25zLCBmdW5jdGlvbiAoYSwgbmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciBoYXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5zdGFydCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtQ29tcGxldGVkQWN0aW9ucysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW1Db21wbGV0ZWRBY3Rpb25zID09PSBudW1BY3Rpb25zKSBzeW5jLnVwZGF0ZShjb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvcChvdXRwdXQsIG5hbWUsIHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3luYy51cGRhdGUodXBkYXRlT3V0cHV0LCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGdldEZpcnN0KHN1YnMpKS5yZWR1Y2UoZnVuY3Rpb24gKGFwaSwgbWV0aG9kTmFtZSkge1xuICAgICAgICAgICAgICAgIGFwaVttZXRob2ROYW1lXSA9IG1hcEFwaShzdWJzLCBtZXRob2ROYW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBpO1xuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICB9KTtcbiAgICB9O1xufTtcblxudmFyIGNvbXBvc2l0ZSA9IC8qI19fUFVSRV9fKi9tdWx0aSh7XG4gICAgZ2V0T3V0cHV0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9LFxuICAgIGdldENvdW50OiBmdW5jdGlvbiAoc3Vicykge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoc3VicykubGVuZ3RoO1xuICAgIH0sXG4gICAgZ2V0Rmlyc3Q6IGZ1bmN0aW9uIChzdWJzKSB7XG4gICAgICAgIHJldHVybiBzdWJzW09iamVjdC5rZXlzKHN1YnMpWzBdXTtcbiAgICB9LFxuICAgIG1hcEFwaTogZnVuY3Rpb24gKHN1YnMsIG1ldGhvZE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhzdWJzKS5yZWR1Y2UoZnVuY3Rpb24gKG91dHB1dCwgcHJvcEtleSkge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICBpZiAoc3Vic1twcm9wS2V5XVttZXRob2ROYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICBhcmdzWzBdICYmIGFyZ3NbMF1bcHJvcEtleV0gIT09IHVuZGVmaW5lZCA/IG91dHB1dFtwcm9wS2V5XSA9IHN1YnNbcHJvcEtleV1bbWV0aG9kTmFtZV0oYXJnc1swXVtwcm9wS2V5XSkgOiBvdXRwdXRbcHJvcEtleV0gPSAoX2EgPSBzdWJzW3Byb3BLZXldKVttZXRob2ROYW1lXS5hcHBseShfYSwgYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgIH07XG4gICAgfSxcbiAgICBzZXRQcm9wOiBmdW5jdGlvbiAob3V0cHV0LCBuYW1lLCB2KSB7XG4gICAgICAgIHJldHVybiBvdXRwdXRbbmFtZV0gPSB2O1xuICAgIH0sXG4gICAgc3RhcnRBY3Rpb25zOiBmdW5jdGlvbiAoYWN0aW9ucywgc3RhcnRlcikge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoYWN0aW9ucykucmVkdWNlKGZ1bmN0aW9uIChzdWJzLCBrZXkpIHtcbiAgICAgICAgICAgIHN1YnNba2V5XSA9IHN0YXJ0ZXIoYWN0aW9uc1trZXldLCBrZXkpO1xuICAgICAgICAgICAgcmV0dXJuIHN1YnM7XG4gICAgICAgIH0sIHt9KTtcbiAgICB9XG59KTtcblxudmFyIHBhcmFsbGVsID0gLyojX19QVVJFX18qL211bHRpKHtcbiAgICBnZXRPdXRwdXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH0sXG4gICAgZ2V0Q291bnQ6IGZ1bmN0aW9uIChzdWJzKSB7XG4gICAgICAgIHJldHVybiBzdWJzLmxlbmd0aDtcbiAgICB9LFxuICAgIGdldEZpcnN0OiBmdW5jdGlvbiAoc3Vicykge1xuICAgICAgICByZXR1cm4gc3Vic1swXTtcbiAgICB9LFxuICAgIG1hcEFwaTogZnVuY3Rpb24gKHN1YnMsIG1ldGhvZE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdWJzLm1hcChmdW5jdGlvbiAoc3ViLCBpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1YlttZXRob2ROYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcmdzWzBdKSA/IHN1YlttZXRob2ROYW1lXShhcmdzWzBdW2ldKSA6IHN1YlttZXRob2ROYW1lXS5hcHBseShzdWIsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgc2V0UHJvcDogZnVuY3Rpb24gKG91dHB1dCwgbmFtZSwgdikge1xuICAgICAgICByZXR1cm4gb3V0cHV0W25hbWVdID0gdjtcbiAgICB9LFxuICAgIHN0YXJ0QWN0aW9uczogZnVuY3Rpb24gKGFjdGlvbnMsIHN0YXJ0ZXIpIHtcbiAgICAgICAgcmV0dXJuIGFjdGlvbnMubWFwKGZ1bmN0aW9uIChhY3Rpb24sIGkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGFydGVyKGFjdGlvbiwgaSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xudmFyIHBhcmFsbGVsJDEgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFjdGlvbnMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhY3Rpb25zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBwYXJhbGxlbChhY3Rpb25zKTtcbn07XG5cbnZhciBjcmVhdGVWZWN0b3JUZXN0cyA9IGZ1bmN0aW9uICh0eXBlVGVzdHMpIHtcbiAgICB2YXIgdGVzdE5hbWVzID0gT2JqZWN0LmtleXModHlwZVRlc3RzKTtcbiAgICB2YXIgaXNWZWN0b3JQcm9wID0gZnVuY3Rpb24gKHByb3AsIGtleSkge1xuICAgICAgICByZXR1cm4gcHJvcCAhPT0gdW5kZWZpbmVkICYmICF0eXBlVGVzdHNba2V5XShwcm9wKTtcbiAgICB9O1xuICAgIHZhciBnZXRWZWN0b3JLZXlzID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgICAgIHJldHVybiB0ZXN0TmFtZXMucmVkdWNlKGZ1bmN0aW9uICh2ZWN0b3JLZXlzLCBrZXkpIHtcbiAgICAgICAgICAgIGlmIChpc1ZlY3RvclByb3AocHJvcHNba2V5XSwga2V5KSkgdmVjdG9yS2V5cy5wdXNoKGtleSk7XG4gICAgICAgICAgICByZXR1cm4gdmVjdG9yS2V5cztcbiAgICAgICAgfSwgW10pO1xuICAgIH07XG4gICAgdmFyIHRlc3RWZWN0b3JQcm9wcyA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgICAgICByZXR1cm4gcHJvcHMgJiYgdGVzdE5hbWVzLnNvbWUoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGlzVmVjdG9yUHJvcChwcm9wc1trZXldLCBrZXkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiB7IGdldFZlY3RvcktleXM6IGdldFZlY3RvcktleXMsIHRlc3RWZWN0b3JQcm9wczogdGVzdFZlY3RvclByb3BzIH07XG59O1xudmFyIHVuaXRUeXBlcyA9IFtweCwgcGVyY2VudCwgZGVncmVlcywgdmgsIHZ3XTtcbnZhciBmaW5kVW5pdFR5cGUgPSBmdW5jdGlvbiAocHJvcCkge1xuICAgIHJldHVybiB1bml0VHlwZXMuZmluZChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICByZXR1cm4gdHlwZS50ZXN0KHByb3ApO1xuICAgIH0pO1xufTtcbnZhciBpc1VuaXRQcm9wID0gZnVuY3Rpb24gKHByb3ApIHtcbiAgICByZXR1cm4gQm9vbGVhbihmaW5kVW5pdFR5cGUocHJvcCkpO1xufTtcbnZhciBjcmVhdGVBY3Rpb24gPSBmdW5jdGlvbiAoYWN0aW9uLCBwcm9wcykge1xuICAgIHJldHVybiBhY3Rpb24ocHJvcHMpO1xufTtcbnZhciByZWR1Y2VBcnJheVZhbHVlID0gZnVuY3Rpb24gKGkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHByb3BzLCBrZXkpIHtcbiAgICAgICAgcHJvcHNba2V5XSA9IHByb3BzW2tleV1baV07XG4gICAgICAgIHJldHVybiBwcm9wcztcbiAgICB9O1xufTtcbnZhciBjcmVhdGVBcnJheUFjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24sIHByb3BzLCB2ZWN0b3JLZXlzKSB7XG4gICAgdmFyIGZpcnN0VmVjdG9yS2V5ID0gdmVjdG9yS2V5c1swXTtcbiAgICB2YXIgYWN0aW9uTGlzdCA9IHByb3BzW2ZpcnN0VmVjdG9yS2V5XS5tYXAoZnVuY3Rpb24gKHYsIGkpIHtcbiAgICAgICAgdmFyIGNoaWxkQWN0aW9uUHJvcHMgPSB2ZWN0b3JLZXlzLnJlZHVjZShyZWR1Y2VBcnJheVZhbHVlKGkpLCBfX2Fzc2lnbih7fSwgcHJvcHMpKTtcbiAgICAgICAgcmV0dXJuIGdldEFjdGlvbkNyZWF0b3IodikoYWN0aW9uLCBjaGlsZEFjdGlvblByb3BzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcGFyYWxsZWwkMS5hcHBseSh2b2lkIDAsIGFjdGlvbkxpc3QpO1xufTtcbnZhciByZWR1Y2VPYmplY3RWYWx1ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHByb3BzLCBwcm9wS2V5KSB7XG4gICAgICAgIHByb3BzW3Byb3BLZXldID0gcHJvcHNbcHJvcEtleV1ba2V5XTtcbiAgICAgICAgcmV0dXJuIHByb3BzO1xuICAgIH07XG59O1xudmFyIGNyZWF0ZU9iamVjdEFjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24sIHByb3BzLCB2ZWN0b3JLZXlzKSB7XG4gICAgdmFyIGZpcnN0VmVjdG9yS2V5ID0gdmVjdG9yS2V5c1swXTtcbiAgICB2YXIgYWN0aW9uTWFwID0gT2JqZWN0LmtleXMocHJvcHNbZmlyc3RWZWN0b3JLZXldKS5yZWR1Y2UoZnVuY3Rpb24gKG1hcCwga2V5KSB7XG4gICAgICAgIHZhciBjaGlsZEFjdGlvblByb3BzID0gdmVjdG9yS2V5cy5yZWR1Y2UocmVkdWNlT2JqZWN0VmFsdWUoa2V5KSwgX19hc3NpZ24oe30sIHByb3BzKSk7XG4gICAgICAgIG1hcFtrZXldID0gZ2V0QWN0aW9uQ3JlYXRvcihwcm9wc1tmaXJzdFZlY3RvcktleV1ba2V5XSkoYWN0aW9uLCBjaGlsZEFjdGlvblByb3BzKTtcbiAgICAgICAgcmV0dXJuIG1hcDtcbiAgICB9LCB7fSk7XG4gICAgcmV0dXJuIGNvbXBvc2l0ZShhY3Rpb25NYXApO1xufTtcbnZhciBjcmVhdGVVbml0QWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbiwgX2EpIHtcbiAgICB2YXIgZnJvbSA9IF9hLmZyb20sXG4gICAgICAgIHRvID0gX2EudG8sXG4gICAgICAgIHByb3BzID0gX19yZXN0KF9hLCBbXCJmcm9tXCIsIFwidG9cIl0pO1xuICAgIHZhciB1bml0VHlwZSA9IGZpbmRVbml0VHlwZShmcm9tKSB8fCBmaW5kVW5pdFR5cGUodG8pO1xuICAgIHZhciB0cmFuc2Zvcm0gPSB1bml0VHlwZS50cmFuc2Zvcm0sXG4gICAgICAgIHBhcnNlID0gdW5pdFR5cGUucGFyc2U7XG4gICAgcmV0dXJuIGFjdGlvbihfX2Fzc2lnbih7fSwgcHJvcHMsIHsgZnJvbTogdHlwZW9mIGZyb20gPT09ICdzdHJpbmcnID8gcGFyc2UoZnJvbSkgOiBmcm9tLCB0bzogdHlwZW9mIHRvID09PSAnc3RyaW5nJyA/IHBhcnNlKHRvKSA6IHRvIH0pKS5waXBlKHRyYW5zZm9ybSk7XG59O1xudmFyIGNyZWF0ZU1peGVyQWN0aW9uID0gZnVuY3Rpb24gKG1peGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24sIF9hKSB7XG4gICAgICAgIHZhciBmcm9tID0gX2EuZnJvbSxcbiAgICAgICAgICAgIHRvID0gX2EudG8sXG4gICAgICAgICAgICBwcm9wcyA9IF9fcmVzdChfYSwgW1wiZnJvbVwiLCBcInRvXCJdKTtcbiAgICAgICAgcmV0dXJuIGFjdGlvbihfX2Fzc2lnbih7fSwgcHJvcHMsIHsgZnJvbTogMCwgdG86IDEgfSkpLnBpcGUobWl4ZXIoZnJvbSwgdG8pKTtcbiAgICB9O1xufTtcbnZhciBjcmVhdGVDb2xvckFjdGlvbiA9IC8qI19fUFVSRV9fKi9jcmVhdGVNaXhlckFjdGlvbihtaXhDb2xvcik7XG52YXIgY3JlYXRlQ29tcGxleEFjdGlvbiA9IC8qI19fUFVSRV9fKi9jcmVhdGVNaXhlckFjdGlvbihtaXhDb21wbGV4KTtcbnZhciBjcmVhdGVWZWN0b3JBY3Rpb24gPSBmdW5jdGlvbiAoYWN0aW9uLCB0eXBlVGVzdHMpIHtcbiAgICB2YXIgX2EgPSBjcmVhdGVWZWN0b3JUZXN0cyh0eXBlVGVzdHMpLFxuICAgICAgICB0ZXN0VmVjdG9yUHJvcHMgPSBfYS50ZXN0VmVjdG9yUHJvcHMsXG4gICAgICAgIGdldFZlY3RvcktleXMgPSBfYS5nZXRWZWN0b3JLZXlzO1xuICAgIHZhciB2ZWN0b3JBY3Rpb24gPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICAgICAgdmFyIGlzVmVjdG9yID0gdGVzdFZlY3RvclByb3BzKHByb3BzKTtcbiAgICAgICAgaWYgKCFpc1ZlY3RvcikgcmV0dXJuIGFjdGlvbihwcm9wcyk7XG4gICAgICAgIHZhciB2ZWN0b3JLZXlzID0gZ2V0VmVjdG9yS2V5cyhwcm9wcyk7XG4gICAgICAgIHZhciB0ZXN0S2V5ID0gdmVjdG9yS2V5c1swXTtcbiAgICAgICAgdmFyIHRlc3RQcm9wID0gcHJvcHNbdGVzdEtleV07XG4gICAgICAgIHJldHVybiBnZXRBY3Rpb25DcmVhdG9yKHRlc3RQcm9wKShhY3Rpb24sIHByb3BzLCB2ZWN0b3JLZXlzKTtcbiAgICB9O1xuICAgIHJldHVybiB2ZWN0b3JBY3Rpb247XG59O1xudmFyIGdldEFjdGlvbkNyZWF0b3IgPSBmdW5jdGlvbiAocHJvcCkge1xuICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUFjdGlvbjtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocHJvcCkpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUFycmF5QWN0aW9uO1xuICAgIH0gZWxzZSBpZiAoaXNVbml0UHJvcChwcm9wKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlVW5pdEFjdGlvbjtcbiAgICB9IGVsc2UgaWYgKGNvbG9yLnRlc3QocHJvcCkpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUNvbG9yQWN0aW9uO1xuICAgIH0gZWxzZSBpZiAoY29tcGxleC50ZXN0KHByb3ApKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVDb21wbGV4QWN0aW9uO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHByb3AgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVPYmplY3RBY3Rpb247XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUFjdGlvbjtcbiAgICB9XG59O1xuXG52YXIgZGVjYXkgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkge1xuICAgICAgICBwcm9wcyA9IHt9O1xuICAgIH1cbiAgICByZXR1cm4gYWN0aW9uKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgY29tcGxldGUgPSBfYS5jb21wbGV0ZSxcbiAgICAgICAgICAgIHVwZGF0ZSA9IF9hLnVwZGF0ZTtcbiAgICAgICAgdmFyIF9iID0gcHJvcHMudmVsb2NpdHksXG4gICAgICAgICAgICB2ZWxvY2l0eSA9IF9iID09PSB2b2lkIDAgPyAwIDogX2IsXG4gICAgICAgICAgICBfYyA9IHByb3BzLmZyb20sXG4gICAgICAgICAgICBmcm9tID0gX2MgPT09IHZvaWQgMCA/IDAgOiBfYyxcbiAgICAgICAgICAgIF9kID0gcHJvcHMucG93ZXIsXG4gICAgICAgICAgICBwb3dlciA9IF9kID09PSB2b2lkIDAgPyAwLjggOiBfZCxcbiAgICAgICAgICAgIF9lID0gcHJvcHMudGltZUNvbnN0YW50LFxuICAgICAgICAgICAgdGltZUNvbnN0YW50ID0gX2UgPT09IHZvaWQgMCA/IDM1MCA6IF9lLFxuICAgICAgICAgICAgX2YgPSBwcm9wcy5yZXN0RGVsdGEsXG4gICAgICAgICAgICByZXN0RGVsdGEgPSBfZiA9PT0gdm9pZCAwID8gMC41IDogX2YsXG4gICAgICAgICAgICBtb2RpZnlUYXJnZXQgPSBwcm9wcy5tb2RpZnlUYXJnZXQ7XG4gICAgICAgIHZhciBlbGFwc2VkID0gMDtcbiAgICAgICAgdmFyIGFtcGxpdHVkZSA9IHBvd2VyICogdmVsb2NpdHk7XG4gICAgICAgIHZhciBpZGVhbFRhcmdldCA9IE1hdGgucm91bmQoZnJvbSArIGFtcGxpdHVkZSk7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0eXBlb2YgbW9kaWZ5VGFyZ2V0ID09PSAndW5kZWZpbmVkJyA/IGlkZWFsVGFyZ2V0IDogbW9kaWZ5VGFyZ2V0KGlkZWFsVGFyZ2V0KTtcbiAgICAgICAgdmFyIHByb2Nlc3MgPSBzeW5jLnVwZGF0ZShmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBmcmFtZURlbHRhID0gX2EuZGVsdGE7XG4gICAgICAgICAgICBlbGFwc2VkICs9IGZyYW1lRGVsdGE7XG4gICAgICAgICAgICB2YXIgZGVsdGEgPSAtYW1wbGl0dWRlICogTWF0aC5leHAoLWVsYXBzZWQgLyB0aW1lQ29uc3RhbnQpO1xuICAgICAgICAgICAgdmFyIGlzTW92aW5nID0gZGVsdGEgPiByZXN0RGVsdGEgfHwgZGVsdGEgPCAtcmVzdERlbHRhO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBpc01vdmluZyA/IHRhcmdldCArIGRlbHRhIDogdGFyZ2V0O1xuICAgICAgICAgICAgdXBkYXRlKGN1cnJlbnQpO1xuICAgICAgICAgICAgaWYgKCFpc01vdmluZykge1xuICAgICAgICAgICAgICAgIGNhbmNlbFN5bmMudXBkYXRlKHByb2Nlc3MpO1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRydWUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYW5jZWxTeW5jLnVwZGF0ZShwcm9jZXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbn07XG52YXIgdmVjdG9yRGVjYXkgPSAvKiNfX1BVUkVfXyovY3JlYXRlVmVjdG9yQWN0aW9uKGRlY2F5LCB7XG4gICAgZnJvbTogbnVtYmVyLnRlc3QsXG4gICAgbW9kaWZ5VGFyZ2V0OiBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGZ1bmMgPT09ICdmdW5jdGlvbic7XG4gICAgfSxcbiAgICB2ZWxvY2l0eTogbnVtYmVyLnRlc3Rcbn0pO1xuXG52YXIgc3ByaW5nID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgaWYgKHByb3BzID09PSB2b2lkIDApIHtcbiAgICAgICAgcHJvcHMgPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIGFjdGlvbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHVwZGF0ZSA9IF9hLnVwZGF0ZSxcbiAgICAgICAgICAgIGNvbXBsZXRlID0gX2EuY29tcGxldGU7XG4gICAgICAgIHZhciBfYiA9IHByb3BzLnZlbG9jaXR5LFxuICAgICAgICAgICAgdmVsb2NpdHkgPSBfYiA9PT0gdm9pZCAwID8gMC4wIDogX2I7XG4gICAgICAgIHZhciBfYyA9IHByb3BzLmZyb20sXG4gICAgICAgICAgICBmcm9tID0gX2MgPT09IHZvaWQgMCA/IDAuMCA6IF9jLFxuICAgICAgICAgICAgX2QgPSBwcm9wcy50byxcbiAgICAgICAgICAgIHRvID0gX2QgPT09IHZvaWQgMCA/IDAuMCA6IF9kLFxuICAgICAgICAgICAgX2UgPSBwcm9wcy5zdGlmZm5lc3MsXG4gICAgICAgICAgICBzdGlmZm5lc3MgPSBfZSA9PT0gdm9pZCAwID8gMTAwIDogX2UsXG4gICAgICAgICAgICBfZiA9IHByb3BzLmRhbXBpbmcsXG4gICAgICAgICAgICBkYW1waW5nID0gX2YgPT09IHZvaWQgMCA/IDEwIDogX2YsXG4gICAgICAgICAgICBfZyA9IHByb3BzLm1hc3MsXG4gICAgICAgICAgICBtYXNzID0gX2cgPT09IHZvaWQgMCA/IDEuMCA6IF9nLFxuICAgICAgICAgICAgX2ggPSBwcm9wcy5yZXN0U3BlZWQsXG4gICAgICAgICAgICByZXN0U3BlZWQgPSBfaCA9PT0gdm9pZCAwID8gMC4wMSA6IF9oLFxuICAgICAgICAgICAgX2ogPSBwcm9wcy5yZXN0RGVsdGEsXG4gICAgICAgICAgICByZXN0RGVsdGEgPSBfaiA9PT0gdm9pZCAwID8gMC4wMSA6IF9qO1xuICAgICAgICB2YXIgaW5pdGlhbFZlbG9jaXR5ID0gdmVsb2NpdHkgPyAtKHZlbG9jaXR5IC8gMTAwMCkgOiAwLjA7XG4gICAgICAgIHZhciB0ID0gMDtcbiAgICAgICAgdmFyIGRlbHRhID0gdG8gLSBmcm9tO1xuICAgICAgICB2YXIgcG9zaXRpb24gPSBmcm9tO1xuICAgICAgICB2YXIgcHJldlBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIHZhciBwcm9jZXNzID0gc3luYy51cGRhdGUoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgdGltZURlbHRhID0gX2EuZGVsdGE7XG4gICAgICAgICAgICB0ICs9IHRpbWVEZWx0YTtcbiAgICAgICAgICAgIHZhciBkYW1waW5nUmF0aW8gPSBkYW1waW5nIC8gKDIgKiBNYXRoLnNxcnQoc3RpZmZuZXNzICogbWFzcykpO1xuICAgICAgICAgICAgdmFyIGFuZ3VsYXJGcmVxID0gTWF0aC5zcXJ0KHN0aWZmbmVzcyAvIG1hc3MpIC8gMTAwMDtcbiAgICAgICAgICAgIHByZXZQb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICAgICAgaWYgKGRhbXBpbmdSYXRpbyA8IDEpIHtcbiAgICAgICAgICAgICAgICB2YXIgZW52ZWxvcGUgPSBNYXRoLmV4cCgtZGFtcGluZ1JhdGlvICogYW5ndWxhckZyZXEgKiB0KTtcbiAgICAgICAgICAgICAgICB2YXIgZXhwb0RlY2F5ID0gYW5ndWxhckZyZXEgKiBNYXRoLnNxcnQoMS4wIC0gZGFtcGluZ1JhdGlvICogZGFtcGluZ1JhdGlvKTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHRvIC0gZW52ZWxvcGUgKiAoKGluaXRpYWxWZWxvY2l0eSArIGRhbXBpbmdSYXRpbyAqIGFuZ3VsYXJGcmVxICogZGVsdGEpIC8gZXhwb0RlY2F5ICogTWF0aC5zaW4oZXhwb0RlY2F5ICogdCkgKyBkZWx0YSAqIE1hdGguY29zKGV4cG9EZWNheSAqIHQpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGVudmVsb3BlID0gTWF0aC5leHAoLWFuZ3VsYXJGcmVxICogdCk7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSB0byAtIGVudmVsb3BlICogKGRlbHRhICsgKGluaXRpYWxWZWxvY2l0eSArIGFuZ3VsYXJGcmVxICogZGVsdGEpICogdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2ZWxvY2l0eSA9IHZlbG9jaXR5UGVyU2Vjb25kKHBvc2l0aW9uIC0gcHJldlBvc2l0aW9uLCB0aW1lRGVsdGEpO1xuICAgICAgICAgICAgdmFyIGlzQmVsb3dWZWxvY2l0eVRocmVzaG9sZCA9IE1hdGguYWJzKHZlbG9jaXR5KSA8PSByZXN0U3BlZWQ7XG4gICAgICAgICAgICB2YXIgaXNCZWxvd0Rpc3BsYWNlbWVudFRocmVzaG9sZCA9IE1hdGguYWJzKHRvIC0gcG9zaXRpb24pIDw9IHJlc3REZWx0YTtcbiAgICAgICAgICAgIGlmIChpc0JlbG93VmVsb2NpdHlUaHJlc2hvbGQgJiYgaXNCZWxvd0Rpc3BsYWNlbWVudFRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gdG87XG4gICAgICAgICAgICAgICAgdXBkYXRlKHBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICBjYW5jZWxTeW5jLnVwZGF0ZShwcm9jZXNzKTtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1cGRhdGUocG9zaXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FuY2VsU3luYy51cGRhdGUocHJvY2Vzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59O1xudmFyIHZlY3RvclNwcmluZyA9IC8qI19fUFVSRV9fKi9jcmVhdGVWZWN0b3JBY3Rpb24oc3ByaW5nLCB7XG4gICAgZnJvbTogbnVtYmVyLnRlc3QsXG4gICAgdG86IG51bWJlci50ZXN0LFxuICAgIHN0aWZmbmVzczogbnVtYmVyLnRlc3QsXG4gICAgZGFtcGluZzogbnVtYmVyLnRlc3QsXG4gICAgbWFzczogbnVtYmVyLnRlc3QsXG4gICAgdmVsb2NpdHk6IG51bWJlci50ZXN0XG59KTtcblxudmFyIGluZXJ0aWEgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgX2IgPSBfYS5mcm9tLFxuICAgICAgICBmcm9tID0gX2IgPT09IHZvaWQgMCA/IDAgOiBfYixcbiAgICAgICAgX2MgPSBfYS52ZWxvY2l0eSxcbiAgICAgICAgdmVsb2NpdHkgPSBfYyA9PT0gdm9pZCAwID8gMCA6IF9jLFxuICAgICAgICBtaW4gPSBfYS5taW4sXG4gICAgICAgIG1heCA9IF9hLm1heCxcbiAgICAgICAgX2QgPSBfYS5wb3dlcixcbiAgICAgICAgcG93ZXIgPSBfZCA9PT0gdm9pZCAwID8gMC44IDogX2QsXG4gICAgICAgIF9lID0gX2EudGltZUNvbnN0YW50LFxuICAgICAgICB0aW1lQ29uc3RhbnQgPSBfZSA9PT0gdm9pZCAwID8gNzAwIDogX2UsXG4gICAgICAgIF9mID0gX2EuYm91bmNlU3RpZmZuZXNzLFxuICAgICAgICBib3VuY2VTdGlmZm5lc3MgPSBfZiA9PT0gdm9pZCAwID8gNTAwIDogX2YsXG4gICAgICAgIF9nID0gX2EuYm91bmNlRGFtcGluZyxcbiAgICAgICAgYm91bmNlRGFtcGluZyA9IF9nID09PSB2b2lkIDAgPyAxMCA6IF9nLFxuICAgICAgICBfaCA9IF9hLnJlc3REZWx0YSxcbiAgICAgICAgcmVzdERlbHRhID0gX2ggPT09IHZvaWQgMCA/IDEgOiBfaCxcbiAgICAgICAgbW9kaWZ5VGFyZ2V0ID0gX2EubW9kaWZ5VGFyZ2V0O1xuICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB1cGRhdGUgPSBfYS51cGRhdGUsXG4gICAgICAgICAgICBjb21wbGV0ZSA9IF9hLmNvbXBsZXRlO1xuICAgICAgICB2YXIgY3VycmVudCA9IHZhbHVlKGZyb20pO1xuICAgICAgICB2YXIgYWN0aXZlQW5pbWF0aW9uO1xuICAgICAgICB2YXIgaXNTcHJpbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIGlzTGVzc1RoYW5NaW4gPSBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgcmV0dXJuIG1pbiAhPT0gdW5kZWZpbmVkICYmIHYgPD0gbWluO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgaXNNb3JlVGhhbk1heCA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICByZXR1cm4gbWF4ICE9PSB1bmRlZmluZWQgJiYgdiA+PSBtYXg7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBpc091dE9mQm91bmRzID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0xlc3NUaGFuTWluKHYpIHx8IGlzTW9yZVRoYW5NYXgodik7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBpc1RyYXZlbGxpbmdBd2F5RnJvbUJvdW5kcyA9IGZ1bmN0aW9uICh2LCBjdXJyZW50VmVsb2NpdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0xlc3NUaGFuTWluKHYpICYmIGN1cnJlbnRWZWxvY2l0eSA8IDAgfHwgaXNNb3JlVGhhbk1heCh2KSAmJiBjdXJyZW50VmVsb2NpdHkgPiAwO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgc3RhcnRBbmltYXRpb24gPSBmdW5jdGlvbiAoYW5pbWF0aW9uLCBuZXh0KSB7XG4gICAgICAgICAgICBhY3RpdmVBbmltYXRpb24gJiYgYWN0aXZlQW5pbWF0aW9uLnN0b3AoKTtcbiAgICAgICAgICAgIGFjdGl2ZUFuaW1hdGlvbiA9IGFuaW1hdGlvbi5zdGFydCh7XG4gICAgICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudC51cGRhdGUodik7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBzdGFydFNwcmluZyA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgICAgICAgICAgaXNTcHJpbmcgPSB0cnVlO1xuICAgICAgICAgICAgc3RhcnRBbmltYXRpb24odmVjdG9yU3ByaW5nKF9fYXNzaWduKHt9LCBwcm9wcywgeyB0bzogaXNMZXNzVGhhbk1pbihwcm9wcy5mcm9tKSA/IG1pbiA6IG1heCwgc3RpZmZuZXNzOiBib3VuY2VTdGlmZm5lc3MsIGRhbXBpbmc6IGJvdW5jZURhbXBpbmcsIHJlc3REZWx0YTogcmVzdERlbHRhIH0pKSk7XG4gICAgICAgIH07XG4gICAgICAgIGN1cnJlbnQuc3Vic2NyaWJlKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICB1cGRhdGUodik7XG4gICAgICAgICAgICB2YXIgY3VycmVudFZlbG9jaXR5ID0gY3VycmVudC5nZXRWZWxvY2l0eSgpO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZUFuaW1hdGlvbiAmJiAhaXNTcHJpbmcgJiYgaXNUcmF2ZWxsaW5nQXdheUZyb21Cb3VuZHModiwgY3VycmVudFZlbG9jaXR5KSkge1xuICAgICAgICAgICAgICAgIHN0YXJ0U3ByaW5nKHsgZnJvbTogdiwgdmVsb2NpdHk6IGN1cnJlbnRWZWxvY2l0eSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpc091dE9mQm91bmRzKGZyb20pKSB7XG4gICAgICAgICAgICBzdGFydFNwcmluZyh7IGZyb206IGZyb20sIHZlbG9jaXR5OiB2ZWxvY2l0eSB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh2ZWxvY2l0eSAhPT0gMCkge1xuICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IHZlY3RvckRlY2F5KHtcbiAgICAgICAgICAgICAgICBmcm9tOiBmcm9tLFxuICAgICAgICAgICAgICAgIHZlbG9jaXR5OiB2ZWxvY2l0eSxcbiAgICAgICAgICAgICAgICB0aW1lQ29uc3RhbnQ6IHRpbWVDb25zdGFudCxcbiAgICAgICAgICAgICAgICBwb3dlcjogcG93ZXIsXG4gICAgICAgICAgICAgICAgcmVzdERlbHRhOiBpc091dE9mQm91bmRzKGZyb20pID8gMjAgOiByZXN0RGVsdGEsXG4gICAgICAgICAgICAgICAgbW9kaWZ5VGFyZ2V0OiBtb2RpZnlUYXJnZXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhcnRBbmltYXRpb24oYW5pbWF0aW9uLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHYgPSBjdXJyZW50LmdldCgpO1xuICAgICAgICAgICAgICAgIGlmIChpc091dE9mQm91bmRzKHYpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0U3ByaW5nKHsgZnJvbTogdiwgdmVsb2NpdHk6IGN1cnJlbnQuZ2V0VmVsb2NpdHkoKSB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhY3RpdmVBbmltYXRpb24gJiYgYWN0aXZlQW5pbWF0aW9uLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbn07XG52YXIgaW5kZXggPSAvKiNfX1BVUkVfXyovY3JlYXRlVmVjdG9yQWN0aW9uKGluZXJ0aWEsIHtcbiAgICBmcm9tOiBudW1iZXIudGVzdCxcbiAgICB2ZWxvY2l0eTogbnVtYmVyLnRlc3QsXG4gICAgbWluOiBudW1iZXIudGVzdCxcbiAgICBtYXg6IG51bWJlci50ZXN0LFxuICAgIGRhbXBpbmc6IG51bWJlci50ZXN0LFxuICAgIHN0aWZmbmVzczogbnVtYmVyLnRlc3QsXG4gICAgbW9kaWZ5VGFyZ2V0OiBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGZ1bmMgPT09ICdmdW5jdGlvbic7XG4gICAgfVxufSk7XG5cbnZhciBmcmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYWN0aW9uKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgdXBkYXRlID0gX2EudXBkYXRlO1xuICAgICAgICB2YXIgaW5pdGlhbFRpbWUgPSAwO1xuICAgICAgICB2YXIgcHJvY2VzcyA9IHN5bmMudXBkYXRlKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IF9hLnRpbWVzdGFtcDtcbiAgICAgICAgICAgIGlmICghaW5pdGlhbFRpbWUpIGluaXRpYWxUaW1lID0gdGltZXN0YW1wO1xuICAgICAgICAgICAgdXBkYXRlKHRpbWVzdGFtcCAtIGluaXRpYWxUaW1lKTtcbiAgICAgICAgfSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbmNlbFN5bmMudXBkYXRlKHByb2Nlc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xufTtcblxudmFyIHNjcnViYmVyID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIF9iID0gX2EuZnJvbSxcbiAgICAgICAgZnJvbSA9IF9iID09PSB2b2lkIDAgPyAwIDogX2IsXG4gICAgICAgIF9jID0gX2EudG8sXG4gICAgICAgIHRvID0gX2MgPT09IHZvaWQgMCA/IDEgOiBfYyxcbiAgICAgICAgX2QgPSBfYS5lYXNlLFxuICAgICAgICBlYXNlID0gX2QgPT09IHZvaWQgMCA/IGxpbmVhciA6IF9kLFxuICAgICAgICBfZSA9IF9hLnJldmVyc2VFYXNlLFxuICAgICAgICByZXZlcnNlRWFzZSA9IF9lID09PSB2b2lkIDAgPyBmYWxzZSA6IF9lO1xuICAgIGlmIChyZXZlcnNlRWFzZSkge1xuICAgICAgICBlYXNlID0gY3JlYXRlUmV2ZXJzZWRFYXNpbmcoZWFzZSk7XG4gICAgfVxuICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB1cGRhdGUgPSBfYS51cGRhdGU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWVrOiBmdW5jdGlvbiAocHJvZ3Jlc3MkJDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlKHByb2dyZXNzJCQxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KS5waXBlKGVhc2UsIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiBtaXgoZnJvbSwgdG8sIHYpO1xuICAgIH0pO1xufTtcbnZhciB2ZWN0b3JTY3J1YmJlciA9IC8qI19fUFVSRV9fKi9jcmVhdGVWZWN0b3JBY3Rpb24oc2NydWJiZXIsIHtcbiAgICBlYXNlOiBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGZ1bmMgPT09ICdmdW5jdGlvbic7XG4gICAgfSxcbiAgICBmcm9tOiBudW1iZXIudGVzdCxcbiAgICB0bzogbnVtYmVyLnRlc3Rcbn0pO1xuXG52YXIgY2xhbXBQcm9ncmVzcyA9IC8qI19fUFVSRV9fKi9jbGFtcCgwLCAxKTtcbnZhciB0d2VlbiA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgIGlmIChwcm9wcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHByb3BzID0ge307XG4gICAgfVxuICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB1cGRhdGUgPSBfYS51cGRhdGUsXG4gICAgICAgICAgICBjb21wbGV0ZSA9IF9hLmNvbXBsZXRlO1xuICAgICAgICB2YXIgX2IgPSBwcm9wcy5kdXJhdGlvbixcbiAgICAgICAgICAgIGR1cmF0aW9uID0gX2IgPT09IHZvaWQgMCA/IDMwMCA6IF9iLFxuICAgICAgICAgICAgX2MgPSBwcm9wcy5lYXNlLFxuICAgICAgICAgICAgZWFzZSA9IF9jID09PSB2b2lkIDAgPyBlYXNlT3V0IDogX2MsXG4gICAgICAgICAgICBfZCA9IHByb3BzLmZsaXAsXG4gICAgICAgICAgICBmbGlwID0gX2QgPT09IHZvaWQgMCA/IDAgOiBfZCxcbiAgICAgICAgICAgIF9lID0gcHJvcHMubG9vcCxcbiAgICAgICAgICAgIGxvb3AgPSBfZSA9PT0gdm9pZCAwID8gMCA6IF9lLFxuICAgICAgICAgICAgX2YgPSBwcm9wcy55b3lvLFxuICAgICAgICAgICAgeW95byA9IF9mID09PSB2b2lkIDAgPyAwIDogX2YsXG4gICAgICAgICAgICBfZyA9IHByb3BzLnJlcGVhdERlbGF5LFxuICAgICAgICAgICAgcmVwZWF0RGVsYXkgPSBfZyA9PT0gdm9pZCAwID8gMCA6IF9nO1xuICAgICAgICB2YXIgX2ggPSBwcm9wcy5mcm9tLFxuICAgICAgICAgICAgZnJvbSA9IF9oID09PSB2b2lkIDAgPyAwIDogX2gsXG4gICAgICAgICAgICBfaiA9IHByb3BzLnRvLFxuICAgICAgICAgICAgdG8gPSBfaiA9PT0gdm9pZCAwID8gMSA6IF9qLFxuICAgICAgICAgICAgX2sgPSBwcm9wcy5lbGFwc2VkLFxuICAgICAgICAgICAgZWxhcHNlZCA9IF9rID09PSB2b2lkIDAgPyAwIDogX2ssXG4gICAgICAgICAgICBfbCA9IHByb3BzLmZsaXBDb3VudCxcbiAgICAgICAgICAgIGZsaXBDb3VudCA9IF9sID09PSB2b2lkIDAgPyAwIDogX2wsXG4gICAgICAgICAgICBfbSA9IHByb3BzLnlveW9Db3VudCxcbiAgICAgICAgICAgIHlveW9Db3VudCA9IF9tID09PSB2b2lkIDAgPyAwIDogX20sXG4gICAgICAgICAgICBfbyA9IHByb3BzLmxvb3BDb3VudCxcbiAgICAgICAgICAgIGxvb3BDb3VudCA9IF9vID09PSB2b2lkIDAgPyAwIDogX287XG4gICAgICAgIHZhciBwbGF5aGVhZCA9IHZlY3RvclNjcnViYmVyKHsgZnJvbTogZnJvbSwgdG86IHRvLCBlYXNlOiBlYXNlIH0pLnN0YXJ0KHVwZGF0ZSk7XG4gICAgICAgIHZhciBjdXJyZW50UHJvZ3Jlc3MgPSAwO1xuICAgICAgICB2YXIgcHJvY2VzcztcbiAgICAgICAgdmFyIGlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHZhciByZXZlcnNlQW5pbWF0aW9uID0gZnVuY3Rpb24gKHJldmVyc2VFYXNlKSB7XG4gICAgICAgICAgICBpZiAocmV2ZXJzZUVhc2UgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHJldmVyc2VFYXNlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBfYSA9IFt0bywgZnJvbV0sIGZyb20gPSBfYVswXSwgdG8gPSBfYVsxXTtcbiAgICAgICAgICAgIHBsYXloZWFkID0gdmVjdG9yU2NydWJiZXIoeyBmcm9tOiBmcm9tLCB0bzogdG8sIGVhc2U6IGVhc2UsIHJldmVyc2VFYXNlOiByZXZlcnNlRWFzZSB9KS5zdGFydCh1cGRhdGUpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgaXNUd2VlbkNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlzQ29tcGxldGUgPSBpc0FjdGl2ZSAmJiBlbGFwc2VkID4gZHVyYXRpb24gKyByZXBlYXREZWxheTtcbiAgICAgICAgICAgIGlmICghaXNDb21wbGV0ZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYgKGlzQ29tcGxldGUgJiYgIWxvb3AgJiYgIWZsaXAgJiYgIXlveW8pIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgZWxhcHNlZCA9IGR1cmF0aW9uIC0gKGVsYXBzZWQgLSByZXBlYXREZWxheSk7XG4gICAgICAgICAgICBpZiAobG9vcCAmJiBsb29wQ291bnQgPCBsb29wKSB7XG4gICAgICAgICAgICAgICAgbG9vcENvdW50Kys7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChmbGlwICYmIGZsaXBDb3VudCA8IGZsaXApIHtcbiAgICAgICAgICAgICAgICBmbGlwQ291bnQrKztcbiAgICAgICAgICAgICAgICByZXZlcnNlQW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh5b3lvICYmIHlveW9Db3VudCA8IHlveW8pIHtcbiAgICAgICAgICAgICAgICB5b3lvQ291bnQrKztcbiAgICAgICAgICAgICAgICByZXZlcnNlQW5pbWF0aW9uKHlveW9Db3VudCAlIDIgIT09IDApO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgdXBkYXRlVHdlZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjdXJyZW50UHJvZ3Jlc3MgPSBjbGFtcFByb2dyZXNzKHByb2dyZXNzKDAsIGR1cmF0aW9uLCBlbGFwc2VkKSk7XG4gICAgICAgICAgICBwbGF5aGVhZC5zZWVrKGN1cnJlbnRQcm9ncmVzcyk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBzdGFydFRpbWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgcHJvY2VzcyA9IHN5bmMudXBkYXRlKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IF9hLmRlbHRhO1xuICAgICAgICAgICAgICAgIGVsYXBzZWQgKz0gZGVsdGE7XG4gICAgICAgICAgICAgICAgdXBkYXRlVHdlZW4oKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNUd2VlbkNvbXBsZXRlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsU3luYy51cGRhdGUocHJvY2Vzcyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlICYmIHN5bmMudXBkYXRlKGNvbXBsZXRlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBzdG9wVGltZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHByb2Nlc3MpIGNhbmNlbFN5bmMudXBkYXRlKHByb2Nlc3MpO1xuICAgICAgICB9O1xuICAgICAgICBzdGFydFRpbWVyKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc0FjdGl2ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc0FjdGl2ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRFbGFwc2VkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wKDAsIGR1cmF0aW9uLCBlbGFwc2VkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRQcm9ncmVzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50UHJvZ3Jlc3M7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHN0b3BUaW1lcigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdXNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc3RvcFRpbWVyKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVzdW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FjdGl2ZSkgc3RhcnRUaW1lcigpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlZWs6IGZ1bmN0aW9uIChuZXdQcm9ncmVzcykge1xuICAgICAgICAgICAgICAgIGVsYXBzZWQgPSBtaXgoMCwgZHVyYXRpb24sIG5ld1Byb2dyZXNzKTtcbiAgICAgICAgICAgICAgICBzeW5jLnVwZGF0ZSh1cGRhdGVUd2VlbiwgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJldmVyc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXZlcnNlQW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59O1xuXG52YXIgY2xhbXBQcm9ncmVzcyQxID0gLyojX19QVVJFX18qL2NsYW1wKDAsIDEpO1xudmFyIGRlZmF1bHRFYXNpbmdzID0gZnVuY3Rpb24gKHZhbHVlcywgZWFzaW5nJCQxKSB7XG4gICAgcmV0dXJuIHZhbHVlcy5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZWFzaW5nJCQxIHx8IGVhc2VPdXQ7XG4gICAgfSkuc3BsaWNlKDAsIHZhbHVlcy5sZW5ndGggLSAxKTtcbn07XG52YXIgZGVmYXVsdFRpbWluZ3MgPSBmdW5jdGlvbiAodmFsdWVzKSB7XG4gICAgdmFyIG51bVZhbHVlcyA9IHZhbHVlcy5sZW5ndGg7XG4gICAgcmV0dXJuIHZhbHVlcy5tYXAoZnVuY3Rpb24gKHZhbHVlLCBpKSB7XG4gICAgICAgIHJldHVybiBpICE9PSAwID8gaSAvIChudW1WYWx1ZXMgLSAxKSA6IDA7XG4gICAgfSk7XG59O1xudmFyIGludGVycG9sYXRlU2NydWJiZXJzID0gZnVuY3Rpb24gKGlucHV0LCBzY3J1YmJlcnMsIHVwZGF0ZSkge1xuICAgIHZhciByYW5nZUxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICB2YXIgZmluYWxJbnB1dEluZGV4ID0gcmFuZ2VMZW5ndGggLSAxO1xuICAgIHZhciBmaW5hbFNjcnViYmVySW5kZXggPSBmaW5hbElucHV0SW5kZXggLSAxO1xuICAgIHZhciBzdWJzID0gc2NydWJiZXJzLm1hcChmdW5jdGlvbiAoc2NydWIpIHtcbiAgICAgICAgcmV0dXJuIHNjcnViLnN0YXJ0KHVwZGF0ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIGlmICh2IDw9IGlucHV0WzBdKSB7XG4gICAgICAgICAgICBzdWJzWzBdLnNlZWsoMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHYgPj0gaW5wdXRbZmluYWxJbnB1dEluZGV4XSkge1xuICAgICAgICAgICAgc3Vic1tmaW5hbFNjcnViYmVySW5kZXhdLnNlZWsoMSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGkgPSAxO1xuICAgICAgICBmb3IgKDsgaSA8IHJhbmdlTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpbnB1dFtpXSA+IHYgfHwgaSA9PT0gZmluYWxJbnB1dEluZGV4KSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJvZ3Jlc3NJblJhbmdlID0gcHJvZ3Jlc3MoaW5wdXRbaSAtIDFdLCBpbnB1dFtpXSwgdik7XG4gICAgICAgIHN1YnNbaSAtIDFdLnNlZWsoY2xhbXBQcm9ncmVzcyQxKHByb2dyZXNzSW5SYW5nZSkpO1xuICAgIH07XG59O1xudmFyIGtleWZyYW1lcyA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBlYXNpbmdzID0gX2EuZWFzaW5ncyxcbiAgICAgICAgX2IgPSBfYS5lYXNlLFxuICAgICAgICBlYXNlID0gX2IgPT09IHZvaWQgMCA/IGxpbmVhciA6IF9iLFxuICAgICAgICB0aW1lcyA9IF9hLnRpbWVzLFxuICAgICAgICB2YWx1ZXMgPSBfYS52YWx1ZXMsXG4gICAgICAgIHR3ZWVuUHJvcHMgPSBfX3Jlc3QoX2EsIFtcImVhc2luZ3NcIiwgXCJlYXNlXCIsIFwidGltZXNcIiwgXCJ2YWx1ZXNcIl0pO1xuICAgIGVhc2luZ3MgPSBBcnJheS5pc0FycmF5KGVhc2luZ3MpID8gZWFzaW5ncyA6IGRlZmF1bHRFYXNpbmdzKHZhbHVlcywgZWFzaW5ncyk7XG4gICAgdGltZXMgPSB0aW1lcyB8fCBkZWZhdWx0VGltaW5ncyh2YWx1ZXMpO1xuICAgIHZhciBzY3J1YmJlcnMgPSBlYXNpbmdzLm1hcChmdW5jdGlvbiAoZWFzaW5nJCQxLCBpKSB7XG4gICAgICAgIHJldHVybiB2ZWN0b3JTY3J1YmJlcih7XG4gICAgICAgICAgICBmcm9tOiB2YWx1ZXNbaV0sXG4gICAgICAgICAgICB0bzogdmFsdWVzW2kgKyAxXSxcbiAgICAgICAgICAgIGVhc2U6IGVhc2luZyQkMVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gdHdlZW4oX19hc3NpZ24oe30sIHR3ZWVuUHJvcHMsIHsgZWFzZTogZWFzZSB9KSkuYXBwbHlNaWRkbGV3YXJlKGZ1bmN0aW9uICh1cGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGludGVycG9sYXRlU2NydWJiZXJzKHRpbWVzLCBzY3J1YmJlcnMsIHVwZGF0ZSk7XG4gICAgfSk7XG59O1xuXG52YXIgcGh5c2ljcyA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgIGlmIChwcm9wcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHByb3BzID0ge307XG4gICAgfVxuICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBjb21wbGV0ZSA9IF9hLmNvbXBsZXRlLFxuICAgICAgICAgICAgdXBkYXRlID0gX2EudXBkYXRlO1xuICAgICAgICB2YXIgX2IgPSBwcm9wcy5hY2NlbGVyYXRpb24sXG4gICAgICAgICAgICBhY2NlbGVyYXRpb24gPSBfYiA9PT0gdm9pZCAwID8gMCA6IF9iLFxuICAgICAgICAgICAgX2MgPSBwcm9wcy5mcmljdGlvbixcbiAgICAgICAgICAgIGZyaWN0aW9uID0gX2MgPT09IHZvaWQgMCA/IDAgOiBfYyxcbiAgICAgICAgICAgIF9kID0gcHJvcHMudmVsb2NpdHksXG4gICAgICAgICAgICB2ZWxvY2l0eSA9IF9kID09PSB2b2lkIDAgPyAwIDogX2QsXG4gICAgICAgICAgICBzcHJpbmdTdHJlbmd0aCA9IHByb3BzLnNwcmluZ1N0cmVuZ3RoLFxuICAgICAgICAgICAgdG8gPSBwcm9wcy50bztcbiAgICAgICAgdmFyIF9lID0gcHJvcHMucmVzdFNwZWVkLFxuICAgICAgICAgICAgcmVzdFNwZWVkID0gX2UgPT09IHZvaWQgMCA/IDAuMDAxIDogX2UsXG4gICAgICAgICAgICBfZiA9IHByb3BzLmZyb20sXG4gICAgICAgICAgICBmcm9tID0gX2YgPT09IHZvaWQgMCA/IDAgOiBfZjtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSBmcm9tO1xuICAgICAgICB2YXIgcHJvY2VzcyA9IHN5bmMudXBkYXRlKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIGRlbHRhID0gX2EuZGVsdGE7XG4gICAgICAgICAgICB2YXIgZWxhcHNlZCA9IE1hdGgubWF4KGRlbHRhLCAxNik7XG4gICAgICAgICAgICBpZiAoYWNjZWxlcmF0aW9uKSB2ZWxvY2l0eSArPSB2ZWxvY2l0eVBlckZyYW1lKGFjY2VsZXJhdGlvbiwgZWxhcHNlZCk7XG4gICAgICAgICAgICBpZiAoZnJpY3Rpb24pIHZlbG9jaXR5ICo9IE1hdGgucG93KDEgLSBmcmljdGlvbiwgZWxhcHNlZCAvIDEwMCk7XG4gICAgICAgICAgICBpZiAoc3ByaW5nU3RyZW5ndGggIT09IHVuZGVmaW5lZCAmJiB0byAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9UYXJnZXQgPSB0byAtIGN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgdmVsb2NpdHkgKz0gZGlzdGFuY2VUb1RhcmdldCAqIHZlbG9jaXR5UGVyRnJhbWUoc3ByaW5nU3RyZW5ndGgsIGVsYXBzZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudCArPSB2ZWxvY2l0eVBlckZyYW1lKHZlbG9jaXR5LCBlbGFwc2VkKTtcbiAgICAgICAgICAgIHVwZGF0ZShjdXJyZW50KTtcbiAgICAgICAgICAgIHZhciBpc0NvbXBsZXRlID0gcmVzdFNwZWVkICE9PSBmYWxzZSAmJiAoIXZlbG9jaXR5IHx8IE1hdGguYWJzKHZlbG9jaXR5KSA8PSByZXN0U3BlZWQpO1xuICAgICAgICAgICAgaWYgKGlzQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICBjYW5jZWxTeW5jLnVwZGF0ZShwcm9jZXNzKTtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gdjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRBY2NlbGVyYXRpb246IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgYWNjZWxlcmF0aW9uID0gdjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRGcmljdGlvbjogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICBmcmljdGlvbiA9IHY7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0U3ByaW5nU3RyZW5ndGg6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgc3ByaW5nU3RyZW5ndGggPSB2O1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldFNwcmluZ1RhcmdldDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICB0byA9IHY7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0VmVsb2NpdHk6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgdmVsb2NpdHkgPSB2O1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FuY2VsU3luYy51cGRhdGUocHJvY2Vzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59O1xudmFyIHZlY3RvclBoeXNpY3MgPSAvKiNfX1BVUkVfXyovY3JlYXRlVmVjdG9yQWN0aW9uKHBoeXNpY3MsIHtcbiAgICBhY2NlbGVyYXRpb246IG51bWJlci50ZXN0LFxuICAgIGZyaWN0aW9uOiBudW1iZXIudGVzdCxcbiAgICB2ZWxvY2l0eTogbnVtYmVyLnRlc3QsXG4gICAgZnJvbTogbnVtYmVyLnRlc3QsXG4gICAgdG86IG51bWJlci50ZXN0LFxuICAgIHNwcmluZ1N0cmVuZ3RoOiBudW1iZXIudGVzdFxufSk7XG5cbnZhciBERUZBVUxUX0RVUkFUSU9OID0gMzAwO1xudmFyIGZsYXR0ZW5UaW1pbmdzID0gZnVuY3Rpb24gKGluc3RydWN0aW9ucykge1xuICAgIHZhciBmbGF0SW5zdHJ1Y3Rpb25zID0gW107XG4gICAgdmFyIGxhc3RBcmcgPSBpbnN0cnVjdGlvbnNbaW5zdHJ1Y3Rpb25zLmxlbmd0aCAtIDFdO1xuICAgIHZhciBpc1N0YWdnZXJlZCA9IHR5cGVvZiBsYXN0QXJnID09PSAnbnVtYmVyJztcbiAgICB2YXIgc3RhZ2dlckRlbGF5ID0gaXNTdGFnZ2VyZWQgPyBsYXN0QXJnIDogMDtcbiAgICB2YXIgc2VnbWVudHMgPSBpc1N0YWdnZXJlZCA/IGluc3RydWN0aW9ucy5zbGljZSgwLCAtMSkgOiBpbnN0cnVjdGlvbnM7XG4gICAgdmFyIG51bVNlZ21lbnRzID0gc2VnbWVudHMubGVuZ3RoO1xuICAgIHZhciBvZmZzZXQgPSAwO1xuICAgIHNlZ21lbnRzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHtcbiAgICAgICAgZmxhdEluc3RydWN0aW9ucy5wdXNoKGl0ZW0pO1xuICAgICAgICBpZiAoaSAhPT0gbnVtU2VnbWVudHMgLSAxKSB7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBpdGVtLmR1cmF0aW9uIHx8IERFRkFVTFRfRFVSQVRJT047XG4gICAgICAgICAgICBvZmZzZXQgKz0gc3RhZ2dlckRlbGF5O1xuICAgICAgICAgICAgZmxhdEluc3RydWN0aW9ucy5wdXNoKFwiLVwiICsgKGR1cmF0aW9uIC0gb2Zmc2V0KSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZmxhdEluc3RydWN0aW9ucztcbn07XG52YXIgZmxhdHRlbkFycmF5SW5zdHJ1Y3Rpb25zID0gZnVuY3Rpb24gKGluc3RydWN0aW9ucywgaW5zdHJ1Y3Rpb24pIHtcbiAgICBBcnJheS5pc0FycmF5KGluc3RydWN0aW9uKSA/IGluc3RydWN0aW9ucy5wdXNoLmFwcGx5KGluc3RydWN0aW9ucywgZmxhdHRlblRpbWluZ3MoaW5zdHJ1Y3Rpb24pKSA6IGluc3RydWN0aW9ucy5wdXNoKGluc3RydWN0aW9uKTtcbiAgICByZXR1cm4gaW5zdHJ1Y3Rpb25zO1xufTtcbnZhciBjb252ZXJ0RGVmVG9Qcm9wcyA9IGZ1bmN0aW9uIChwcm9wcywgZGVmLCBpKSB7XG4gICAgdmFyIGR1cmF0aW9uID0gcHJvcHMuZHVyYXRpb24sXG4gICAgICAgIGVhc2luZ3MgPSBwcm9wcy5lYXNpbmdzLFxuICAgICAgICB0aW1lcyA9IHByb3BzLnRpbWVzLFxuICAgICAgICB2YWx1ZXMgPSBwcm9wcy52YWx1ZXM7XG4gICAgdmFyIG51bVZhbHVlcyA9IHZhbHVlcy5sZW5ndGg7XG4gICAgdmFyIHByZXZUaW1lVG8gPSB0aW1lc1tudW1WYWx1ZXMgLSAxXTtcbiAgICB2YXIgdGltZUZyb20gPSBkZWYuYXQgPT09IDAgPyAwIDogZGVmLmF0IC8gZHVyYXRpb247XG4gICAgdmFyIHRpbWVUbyA9IChkZWYuYXQgKyBkZWYuZHVyYXRpb24pIC8gZHVyYXRpb247XG4gICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgdmFsdWVzLnB1c2goZGVmLmZyb20pO1xuICAgICAgICB0aW1lcy5wdXNoKHRpbWVGcm9tKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJldlRpbWVUbyAhPT0gdGltZUZyb20pIHtcbiAgICAgICAgICAgIGlmIChkZWYuZnJvbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzLnB1c2godmFsdWVzW251bVZhbHVlcyAtIDFdKTtcbiAgICAgICAgICAgICAgICB0aW1lcy5wdXNoKHRpbWVGcm9tKTtcbiAgICAgICAgICAgICAgICBlYXNpbmdzLnB1c2gobGluZWFyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmcm9tID0gZGVmLmZyb20gIT09IHVuZGVmaW5lZCA/IGRlZi5mcm9tIDogdmFsdWVzW251bVZhbHVlcyAtIDFdO1xuICAgICAgICAgICAgdmFsdWVzLnB1c2goZnJvbSk7XG4gICAgICAgICAgICB0aW1lcy5wdXNoKHRpbWVGcm9tKTtcbiAgICAgICAgICAgIGVhc2luZ3MucHVzaChsaW5lYXIpO1xuICAgICAgICB9IGVsc2UgaWYgKGRlZi5mcm9tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGRlZi5mcm9tKTtcbiAgICAgICAgICAgIHRpbWVzLnB1c2godGltZUZyb20pO1xuICAgICAgICAgICAgZWFzaW5ncy5wdXNoKGxpbmVhcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFsdWVzLnB1c2goZGVmLnRvKTtcbiAgICB0aW1lcy5wdXNoKHRpbWVUbyk7XG4gICAgZWFzaW5ncy5wdXNoKGRlZi5lYXNlIHx8IGVhc2VJbk91dCk7XG4gICAgcmV0dXJuIHByb3BzO1xufTtcbnZhciB0aW1lbGluZSA9IGZ1bmN0aW9uIChpbnN0cnVjdGlvbnMsIF9hKSB7XG4gICAgdmFyIF9iID0gX2EgPT09IHZvaWQgMCA/IHt9IDogX2EsXG4gICAgICAgIGR1cmF0aW9uID0gX2IuZHVyYXRpb24sXG4gICAgICAgIGVsYXBzZWQgPSBfYi5lbGFwc2VkLFxuICAgICAgICBlYXNlID0gX2IuZWFzZSxcbiAgICAgICAgbG9vcCA9IF9iLmxvb3AsXG4gICAgICAgIGZsaXAgPSBfYi5mbGlwLFxuICAgICAgICB5b3lvID0gX2IueW95bztcbiAgICB2YXIgcGxheWhlYWQgPSAwO1xuICAgIHZhciBjYWxjdWxhdGVkRHVyYXRpb24gPSAwO1xuICAgIHZhciBmbGF0SW5zdHJ1Y3Rpb25zID0gaW5zdHJ1Y3Rpb25zLnJlZHVjZShmbGF0dGVuQXJyYXlJbnN0cnVjdGlvbnMsIFtdKTtcbiAgICB2YXIgYW5pbWF0aW9uRGVmcyA9IFtdO1xuICAgIGZsYXRJbnN0cnVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnN0cnVjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHBsYXloZWFkICs9IHBhcnNlRmxvYXQoaW5zdHJ1Y3Rpb24pO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpbnN0cnVjdGlvbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHBsYXloZWFkID0gaW5zdHJ1Y3Rpb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZGVmID0gX19hc3NpZ24oe30sIGluc3RydWN0aW9uLCB7IGF0OiBwbGF5aGVhZCB9KTtcbiAgICAgICAgICAgIGRlZi5kdXJhdGlvbiA9IGRlZi5kdXJhdGlvbiA9PT0gdW5kZWZpbmVkID8gREVGQVVMVF9EVVJBVElPTiA6IGRlZi5kdXJhdGlvbjtcbiAgICAgICAgICAgIGFuaW1hdGlvbkRlZnMucHVzaChkZWYpO1xuICAgICAgICAgICAgcGxheWhlYWQgKz0gZGVmLmR1cmF0aW9uO1xuICAgICAgICAgICAgY2FsY3VsYXRlZER1cmF0aW9uID0gTWF0aC5tYXgoY2FsY3VsYXRlZER1cmF0aW9uLCBkZWYuYXQgKyBkZWYuZHVyYXRpb24pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgdmFyIHRyYWNrcyA9IHt9O1xuICAgIHZhciBudW1EZWZzID0gYW5pbWF0aW9uRGVmcy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EZWZzOyBpKyspIHtcbiAgICAgICAgdmFyIGRlZiA9IGFuaW1hdGlvbkRlZnNbaV07XG4gICAgICAgIHZhciB0cmFjayA9IGRlZi50cmFjaztcbiAgICAgICAgaWYgKHRyYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdHJhY2sgZGVmaW5lZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdHJhY2tzLmhhc093blByb3BlcnR5KHRyYWNrKSkgdHJhY2tzW3RyYWNrXSA9IFtdO1xuICAgICAgICB0cmFja3NbdHJhY2tdLnB1c2goZGVmKTtcbiAgICB9XG4gICAgdmFyIHRyYWNrS2V5ZnJhbWVzID0ge307XG4gICAgZm9yICh2YXIga2V5IGluIHRyYWNrcykge1xuICAgICAgICBpZiAodHJhY2tzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHZhciBrZXlmcmFtZVByb3BzID0gdHJhY2tzW2tleV0ucmVkdWNlKGNvbnZlcnREZWZUb1Byb3BzLCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IGNhbGN1bGF0ZWREdXJhdGlvbixcbiAgICAgICAgICAgICAgICBlYXNpbmdzOiBbXSxcbiAgICAgICAgICAgICAgICB0aW1lczogW10sXG4gICAgICAgICAgICAgICAgdmFsdWVzOiBbXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0cmFja0tleWZyYW1lc1trZXldID0ga2V5ZnJhbWVzKF9fYXNzaWduKHt9LCBrZXlmcmFtZVByb3BzLCB7IGR1cmF0aW9uOiBkdXJhdGlvbiB8fCBjYWxjdWxhdGVkRHVyYXRpb24sIGVhc2U6IGVhc2UsXG4gICAgICAgICAgICAgICAgZWxhcHNlZDogZWxhcHNlZCxcbiAgICAgICAgICAgICAgICBsb29wOiBsb29wLFxuICAgICAgICAgICAgICAgIHlveW86IHlveW8sXG4gICAgICAgICAgICAgICAgZmxpcDogZmxpcCB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbXBvc2l0ZSh0cmFja0tleWZyYW1lcyk7XG59O1xuXG52YXIgbGlzdGVuID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50cywgb3B0aW9ucykge1xuICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB1cGRhdGUgPSBfYS51cGRhdGU7XG4gICAgICAgIHZhciBldmVudE5hbWVzID0gZXZlbnRzLnNwbGl0KCcgJykubWFwKGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHVwZGF0ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gZXZlbnROYW1lO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnROYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHVwZGF0ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59O1xuXG52YXIgZGVmYXVsdFBvaW50ZXJQb3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2xpZW50WDogMCxcbiAgICAgICAgY2xpZW50WTogMCxcbiAgICAgICAgcGFnZVg6IDAsXG4gICAgICAgIHBhZ2VZOiAwLFxuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwXG4gICAgfTtcbn07XG52YXIgZXZlbnRUb1BvaW50ID0gZnVuY3Rpb24gKGUsIHBvaW50KSB7XG4gICAgaWYgKHBvaW50ID09PSB2b2lkIDApIHtcbiAgICAgICAgcG9pbnQgPSBkZWZhdWx0UG9pbnRlclBvcygpO1xuICAgIH1cbiAgICBwb2ludC5jbGllbnRYID0gcG9pbnQueCA9IGUuY2xpZW50WDtcbiAgICBwb2ludC5jbGllbnRZID0gcG9pbnQueSA9IGUuY2xpZW50WTtcbiAgICBwb2ludC5wYWdlWCA9IGUucGFnZVg7XG4gICAgcG9pbnQucGFnZVkgPSBlLnBhZ2VZO1xuICAgIHJldHVybiBwb2ludDtcbn07XG5cbnZhciBwb2ludHMgPSBbLyojX19QVVJFX18qL2RlZmF1bHRQb2ludGVyUG9zKCldO1xudmFyIGlzVG91Y2hEZXZpY2UgPSBmYWxzZTtcbmlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHVwZGF0ZVBvaW50c0xvY2F0aW9uID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB0b3VjaGVzID0gX2EudG91Y2hlcztcbiAgICAgICAgaXNUb3VjaERldmljZSA9IHRydWU7XG4gICAgICAgIHZhciBudW1Ub3VjaGVzID0gdG91Y2hlcy5sZW5ndGg7XG4gICAgICAgIHBvaW50cy5sZW5ndGggPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bVRvdWNoZXM7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRoaXNUb3VjaCA9IHRvdWNoZXNbaV07XG4gICAgICAgICAgICBwb2ludHMucHVzaChldmVudFRvUG9pbnQodGhpc1RvdWNoKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGxpc3Rlbihkb2N1bWVudCwgJ3RvdWNoc3RhcnQgdG91Y2htb3ZlJywge1xuICAgICAgICBwYXNzaXZlOiB0cnVlLFxuICAgICAgICBjYXB0dXJlOiB0cnVlXG4gICAgfSkuc3RhcnQodXBkYXRlUG9pbnRzTG9jYXRpb24pO1xufVxudmFyIG11bHRpdG91Y2ggPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSxcbiAgICAgICAgX2MgPSBfYi5wcmV2ZW50RGVmYXVsdCxcbiAgICAgICAgcHJldmVudERlZmF1bHQgPSBfYyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9jLFxuICAgICAgICBfZCA9IF9iLnNjYWxlLFxuICAgICAgICBzY2FsZSA9IF9kID09PSB2b2lkIDAgPyAxLjAgOiBfZCxcbiAgICAgICAgX2UgPSBfYi5yb3RhdGUsXG4gICAgICAgIHJvdGF0ZSA9IF9lID09PSB2b2lkIDAgPyAwLjAgOiBfZTtcbiAgICByZXR1cm4gYWN0aW9uKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgdXBkYXRlID0gX2EudXBkYXRlO1xuICAgICAgICB2YXIgb3V0cHV0ID0ge1xuICAgICAgICAgICAgdG91Y2hlczogcG9pbnRzLFxuICAgICAgICAgICAgc2NhbGU6IHNjYWxlLFxuICAgICAgICAgICAgcm90YXRlOiByb3RhdGVcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGluaXRpYWxEaXN0YW5jZSA9IDAuMDtcbiAgICAgICAgdmFyIGluaXRpYWxSb3RhdGlvbiA9IDAuMDtcbiAgICAgICAgdmFyIGlzR2VzdHVyZSA9IHBvaW50cy5sZW5ndGggPiAxO1xuICAgICAgICBpZiAoaXNHZXN0dXJlKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3RUb3VjaCA9IHBvaW50c1swXSxcbiAgICAgICAgICAgICAgICBzZWNvbmRUb3VjaCA9IHBvaW50c1sxXTtcbiAgICAgICAgICAgIGluaXRpYWxEaXN0YW5jZSA9IGRpc3RhbmNlKGZpcnN0VG91Y2gsIHNlY29uZFRvdWNoKTtcbiAgICAgICAgICAgIGluaXRpYWxSb3RhdGlvbiA9IGFuZ2xlKGZpcnN0VG91Y2gsIHNlY29uZFRvdWNoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXBkYXRlUG9pbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoaXNHZXN0dXJlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpcnN0VG91Y2ggPSBwb2ludHNbMF0sXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZFRvdWNoID0gcG9pbnRzWzFdO1xuICAgICAgICAgICAgICAgIHZhciBuZXdEaXN0YW5jZSA9IGRpc3RhbmNlKGZpcnN0VG91Y2gsIHNlY29uZFRvdWNoKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3Um90YXRpb24gPSBhbmdsZShmaXJzdFRvdWNoLCBzZWNvbmRUb3VjaCk7XG4gICAgICAgICAgICAgICAgb3V0cHV0LnNjYWxlID0gc2NhbGUgKiAobmV3RGlzdGFuY2UgLyBpbml0aWFsRGlzdGFuY2UpO1xuICAgICAgICAgICAgICAgIG91dHB1dC5yb3RhdGUgPSByb3RhdGUgKyAobmV3Um90YXRpb24gLSBpbml0aWFsUm90YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlKG91dHB1dCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBvbk1vdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHByZXZlbnREZWZhdWx0IHx8IGUudG91Y2hlcy5sZW5ndGggPiAxKSBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzeW5jLnVwZGF0ZSh1cGRhdGVQb2ludCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciB1cGRhdGVPbk1vdmUgPSBsaXN0ZW4oZG9jdW1lbnQsICd0b3VjaG1vdmUnLCB7XG4gICAgICAgICAgICBwYXNzaXZlOiAhcHJldmVudERlZmF1bHRcbiAgICAgICAgfSkuc3RhcnQob25Nb3ZlKTtcbiAgICAgICAgaWYgKGlzVG91Y2hEZXZpY2UpIHN5bmMudXBkYXRlKHVwZGF0ZVBvaW50KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjYW5jZWxTeW5jLnVwZGF0ZSh1cGRhdGVQb2ludCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlT25Nb3ZlLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbn07XG52YXIgZ2V0SXNUb3VjaERldmljZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gaXNUb3VjaERldmljZTtcbn07XG5cbnZhciBwb2ludCA9IC8qI19fUFVSRV9fKi9kZWZhdWx0UG9pbnRlclBvcygpO1xudmFyIGlzTW91c2VEZXZpY2UgPSBmYWxzZTtcbmlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHVwZGF0ZVBvaW50TG9jYXRpb24gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpc01vdXNlRGV2aWNlID0gdHJ1ZTtcbiAgICAgICAgZXZlbnRUb1BvaW50KGUsIHBvaW50KTtcbiAgICB9O1xuICAgIGxpc3Rlbihkb2N1bWVudCwgJ21vdXNlZG93biBtb3VzZW1vdmUnLCB0cnVlKS5zdGFydCh1cGRhdGVQb2ludExvY2F0aW9uKTtcbn1cbnZhciBtb3VzZSA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBfYiA9IChfYSA9PT0gdm9pZCAwID8ge30gOiBfYSkucHJldmVudERlZmF1bHQsXG4gICAgICAgIHByZXZlbnREZWZhdWx0ID0gX2IgPT09IHZvaWQgMCA/IHRydWUgOiBfYjtcbiAgICByZXR1cm4gYWN0aW9uKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgdXBkYXRlID0gX2EudXBkYXRlO1xuICAgICAgICB2YXIgdXBkYXRlUG9pbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlKHBvaW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG9uTW92ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAocHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHN5bmMudXBkYXRlKHVwZGF0ZVBvaW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHVwZGF0ZU9uTW92ZSA9IGxpc3Rlbihkb2N1bWVudCwgJ21vdXNlbW92ZScpLnN0YXJ0KG9uTW92ZSk7XG4gICAgICAgIGlmIChpc01vdXNlRGV2aWNlKSBzeW5jLnVwZGF0ZSh1cGRhdGVQb2ludCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsU3luYy51cGRhdGUodXBkYXRlUG9pbnQpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZU9uTW92ZS5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59O1xuXG52YXIgZ2V0Rmlyc3RUb3VjaCA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBmaXJzdFRvdWNoID0gX2FbMF07XG4gICAgcmV0dXJuIGZpcnN0VG91Y2g7XG59O1xudmFyIHBvaW50ZXIgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkge1xuICAgICAgICBwcm9wcyA9IHt9O1xuICAgIH1cbiAgICByZXR1cm4gZ2V0SXNUb3VjaERldmljZSgpID8gbXVsdGl0b3VjaChwcm9wcykucGlwZShmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHRvdWNoZXMgPSBfYS50b3VjaGVzO1xuICAgICAgICByZXR1cm4gdG91Y2hlcztcbiAgICB9LCBnZXRGaXJzdFRvdWNoKSA6IG1vdXNlKHByb3BzKTtcbn07XG52YXIgaW5kZXgkMSA9IGZ1bmN0aW9uIChfYSkge1xuICAgIGlmIChfYSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIF9hID0ge307XG4gICAgfVxuICAgIHZhciB4ID0gX2EueCxcbiAgICAgICAgeSA9IF9hLnksXG4gICAgICAgIHByb3BzID0gX19yZXN0KF9hLCBbXCJ4XCIsIFwieVwiXSk7XG4gICAgaWYgKHggIT09IHVuZGVmaW5lZCB8fCB5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIGFwcGx5WE9mZnNldF8xID0gYXBwbHlPZmZzZXQoeCB8fCAwKTtcbiAgICAgICAgdmFyIGFwcGx5WU9mZnNldF8xID0gYXBwbHlPZmZzZXQoeSB8fCAwKTtcbiAgICAgICAgdmFyIGRlbHRhXzEgPSB7IHg6IDAsIHk6IDAgfTtcbiAgICAgICAgcmV0dXJuIHBvaW50ZXIocHJvcHMpLnBpcGUoZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICAgICAgICBkZWx0YV8xLnggPSBhcHBseVhPZmZzZXRfMShwb2ludC54KTtcbiAgICAgICAgICAgIGRlbHRhXzEueSA9IGFwcGx5WU9mZnNldF8xKHBvaW50LnkpO1xuICAgICAgICAgICAgcmV0dXJuIGRlbHRhXzE7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwb2ludGVyKHByb3BzKTtcbiAgICB9XG59O1xuXG52YXIgY2hhaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFjdGlvbnMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhY3Rpb25zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB1cGRhdGUgPSBfYS51cGRhdGUsXG4gICAgICAgICAgICBjb21wbGV0ZSA9IF9hLmNvbXBsZXRlO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHZhciBjdXJyZW50O1xuICAgICAgICB2YXIgcGxheUN1cnJlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjdXJyZW50ID0gYWN0aW9uc1tpXS5zdGFydCh7XG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgICAgICBpID49IGFjdGlvbnMubGVuZ3RoID8gY29tcGxldGUoKSA6IHBsYXlDdXJyZW50KCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1cGRhdGU6IHVwZGF0ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHBsYXlDdXJyZW50KCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQgJiYgY3VycmVudC5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59O1xuXG52YXIgY3Jvc3NmYWRlID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYWN0aW9uKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICB2YXIgYmFsYW5jZSA9IDA7XG4gICAgICAgIHZhciBmYWRhYmxlID0gcGFyYWxsZWwkMShhLCBiKS5zdGFydChfX2Fzc2lnbih7fSwgb2JzZXJ2ZXIsIHsgdXBkYXRlOiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmEgPSBfYVswXSxcbiAgICAgICAgICAgICAgICAgICAgdmIgPSBfYVsxXTtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci51cGRhdGUobWl4KHZhLCB2YiwgYmFsYW5jZSkpO1xuICAgICAgICAgICAgfSB9KSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZXRCYWxhbmNlOiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgIHJldHVybiBiYWxhbmNlID0gdjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhZGFibGUuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xufTtcblxudmFyIGRlbGF5ID0gZnVuY3Rpb24gKHRpbWVUb0RlbGF5KSB7XG4gICAgcmV0dXJuIGFjdGlvbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGNvbXBsZXRlID0gX2EuY29tcGxldGU7XG4gICAgICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChjb21wbGV0ZSwgdGltZVRvRGVsYXkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59O1xuXG52YXIgbWVyZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFjdGlvbnMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhY3Rpb25zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIHZhciBzdWJzID0gYWN0aW9ucy5tYXAoZnVuY3Rpb24gKHRoaXNBY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzQWN0aW9uLnN0YXJ0KG9ic2VydmVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1YnMuZm9yRWFjaChmdW5jdGlvbiAoc3ViKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWIuc3RvcCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xufTtcblxudmFyIHNjaGVkdWxlID0gZnVuY3Rpb24gKHNjaGVkdWxlciwgc2NoZWR1bGVlKSB7XG4gICAgcmV0dXJuIGFjdGlvbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHVwZGF0ZSA9IF9hLnVwZGF0ZSxcbiAgICAgICAgICAgIGNvbXBsZXRlID0gX2EuY29tcGxldGU7XG4gICAgICAgIHZhciBsYXRlc3Q7XG4gICAgICAgIHZhciBzY2hlZHVsZXJTdWIgPSBzY2hlZHVsZXIuc3RhcnQoe1xuICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhdGVzdCAhPT0gdW5kZWZpbmVkICYmIHVwZGF0ZShsYXRlc3QpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBjb21wbGV0ZVxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHNjaGVkdWxlZVN1YiA9IHNjaGVkdWxlZS5zdGFydCh7XG4gICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhdGVzdCA9IHY7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29tcGxldGU6IGNvbXBsZXRlXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNjaGVkdWxlclN1Yi5zdG9wKCk7XG4gICAgICAgICAgICAgICAgc2NoZWR1bGVlU3ViLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbn07XG5cbnZhciBzdGFnZ2VyID0gZnVuY3Rpb24gKGFjdGlvbnMsIGludGVydmFsKSB7XG4gICAgdmFyIGludGVydmFsSXNOdW1iZXIgPSB0eXBlb2YgaW50ZXJ2YWwgPT09ICdudW1iZXInO1xuICAgIHZhciBhY3Rpb25zV2l0aERlbGF5ID0gYWN0aW9ucy5tYXAoZnVuY3Rpb24gKGEsIGkpIHtcbiAgICAgICAgdmFyIHRpbWVUb0RlbGF5ID0gaW50ZXJ2YWxJc051bWJlciA/IGludGVydmFsICogaSA6IGludGVydmFsKGkpO1xuICAgICAgICByZXR1cm4gY2hhaW4oZGVsYXkodGltZVRvRGVsYXkpLCBhKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcGFyYWxsZWwkMS5hcHBseSh2b2lkIDAsIGFjdGlvbnNXaXRoRGVsYXkpO1xufTtcblxudmFyIGFwcGVuZFVuaXQgPSBmdW5jdGlvbiAodW5pdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gXCJcIiArIHYgKyB1bml0O1xuICAgIH07XG59O1xudmFyIHN0ZXBzID0gZnVuY3Rpb24gKHN0LCBtaW4sIG1heCkge1xuICAgIGlmIChtaW4gPT09IHZvaWQgMCkge1xuICAgICAgICBtaW4gPSAwO1xuICAgIH1cbiAgICBpZiAobWF4ID09PSB2b2lkIDApIHtcbiAgICAgICAgbWF4ID0gMTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHZhciBjdXJyZW50ID0gcHJvZ3Jlc3MobWluLCBtYXgsIHYpO1xuICAgICAgICByZXR1cm4gbWl4KG1pbiwgbWF4LCBzdGVwUHJvZ3Jlc3Moc3QsIGN1cnJlbnQpKTtcbiAgICB9O1xufTtcbnZhciB0cmFuc2Zvcm1NYXAgPSBmdW5jdGlvbiAoY2hpbGRUcmFuc2Zvcm1lcnMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgdmFyIG91dHB1dCA9IF9fYXNzaWduKHt9LCB2KTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGNoaWxkVHJhbnNmb3JtZXJzKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGRUcmFuc2Zvcm1lcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZFRyYW5zZm9ybWVyID0gY2hpbGRUcmFuc2Zvcm1lcnNba2V5XTtcbiAgICAgICAgICAgICAgICBvdXRwdXRba2V5XSA9IGNoaWxkVHJhbnNmb3JtZXIodltrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH07XG59O1xuXG52YXIgdHJhbnNmb3JtZXJzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICAgIGFwcGx5T2Zmc2V0OiBhcHBseU9mZnNldCxcbiAgICBjbGFtcDogY2xhbXAsXG4gICAgY29uZGl0aW9uYWw6IGNvbmRpdGlvbmFsLFxuICAgIGludGVycG9sYXRlOiBpbnRlcnBvbGF0ZSxcbiAgICBibGVuZEFycmF5OiBtaXhBcnJheSxcbiAgICBibGVuZENvbG9yOiBtaXhDb2xvcixcbiAgICBwaXBlOiBwaXBlLFxuICAgIHNtb290aDogc21vb3RoLFxuICAgIHNuYXA6IHNuYXAsXG4gICAgZ2VuZXJhdGVTdGF0aWNTcHJpbmc6IHNwcmluZ0ZvcmNlLFxuICAgIG5vbmxpbmVhclNwcmluZzogc3ByaW5nRm9yY2VFeHBvLFxuICAgIGxpbmVhclNwcmluZzogc3ByaW5nRm9yY2VMaW5lYXIsXG4gICAgd3JhcDogd3JhcCxcbiAgICBhcHBlbmRVbml0OiBhcHBlbmRVbml0LFxuICAgIHN0ZXBzOiBzdGVwcyxcbiAgICB0cmFuc2Zvcm1NYXA6IHRyYW5zZm9ybU1hcFxufSk7XG5cbnZhciBjc3MgPSBmdW5jdGlvbiAoZWxlbWVudCwgcHJvcHMpIHtcbiAgICB3YXJuaW5nKGZhbHNlLCAnY3NzKCkgaXMgZGVwcmVjYXRlZCwgdXNlIHN0eWxlciBpbnN0ZWFkJyk7XG4gICAgcmV0dXJuIHN0eWxlcihlbGVtZW50LCBwcm9wcyk7XG59O1xudmFyIHN2ZyA9IGZ1bmN0aW9uIChlbGVtZW50LCBwcm9wcykge1xuICAgIHdhcm5pbmcoZmFsc2UsICdzdmcoKSBpcyBkZXByZWNhdGVkLCB1c2Ugc3R5bGVyIGluc3RlYWQnKTtcbiAgICByZXR1cm4gc3R5bGVyKGVsZW1lbnQsIHByb3BzKTtcbn07XG5cbmV4cG9ydCB7IGFjdGlvbiwgbXVsdGljYXN0LCB2YWx1ZSwgdmVjdG9yRGVjYXkgYXMgZGVjYXksIGluZGV4IGFzIGluZXJ0aWEsIGtleWZyYW1lcywgZnJhbWUgYXMgZXZlcnlGcmFtZSwgdmVjdG9yUGh5c2ljcyBhcyBwaHlzaWNzLCB2ZWN0b3JTcHJpbmcgYXMgc3ByaW5nLCB0aW1lbGluZSwgdHdlZW4sIGxpc3RlbiwgaW5kZXgkMSBhcyBwb2ludGVyLCBtb3VzZSwgbXVsdGl0b3VjaCwgY2hhaW4sIGNvbXBvc2l0ZSwgY3Jvc3NmYWRlLCBkZWxheSwgbWVyZ2UsIHBhcmFsbGVsJDEgYXMgcGFyYWxsZWwsIHNjaGVkdWxlLCBzdGFnZ2VyLCBjYWxjLCB0cmFuc2Zvcm1lcnMgYXMgdHJhbnNmb3JtLCBjc3MsIHN2ZywgQWN0aW9uLCBWYWx1ZVJlYWN0aW9uIH07XG4iLCJpbXBvcnQgeyBfX3Jlc3QsIF9fYXNzaWduIH0gZnJvbSAndHNsaWInO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnaGV5LWxpc3Rlbic7XG5cbnZhciBnZXRQb3NlVmFsdWVzID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIHRyYW5zaXRpb24gPSBfYS50cmFuc2l0aW9uLFxuICAgICAgICBmbGlwID0gX2EuZmxpcCxcbiAgICAgICAgZGVsYXkgPSBfYS5kZWxheSxcbiAgICAgICAgZGVsYXlDaGlsZHJlbiA9IF9hLmRlbGF5Q2hpbGRyZW4sXG4gICAgICAgIHN0YWdnZXJDaGlsZHJlbiA9IF9hLnN0YWdnZXJDaGlsZHJlbixcbiAgICAgICAgc3RhZ2dlckRpcmVjdGlvbiA9IF9hLnN0YWdnZXJEaXJlY3Rpb24sXG4gICAgICAgIGFmdGVyQ2hpbGRyZW4gPSBfYS5hZnRlckNoaWxkcmVuLFxuICAgICAgICBiZWZvcmVDaGlsZHJlbiA9IF9hLmJlZm9yZUNoaWxkcmVuLFxuICAgICAgICBwcmVUcmFuc2l0aW9uID0gX2EucHJlVHJhbnNpdGlvbixcbiAgICAgICAgYXBwbHlBdFN0YXJ0ID0gX2EuYXBwbHlBdFN0YXJ0LFxuICAgICAgICBhcHBseUF0RW5kID0gX2EuYXBwbHlBdEVuZCxcbiAgICAgICAgcHJvcHMgPSBfX3Jlc3QoX2EsIFtcInRyYW5zaXRpb25cIiwgXCJmbGlwXCIsIFwiZGVsYXlcIiwgXCJkZWxheUNoaWxkcmVuXCIsIFwic3RhZ2dlckNoaWxkcmVuXCIsIFwic3RhZ2dlckRpcmVjdGlvblwiLCBcImFmdGVyQ2hpbGRyZW5cIiwgXCJiZWZvcmVDaGlsZHJlblwiLCBcInByZVRyYW5zaXRpb25cIiwgXCJhcHBseUF0U3RhcnRcIiwgXCJhcHBseUF0RW5kXCJdKTtcbiAgICByZXR1cm4gcHJvcHM7XG59O1xudmFyIHNlbGVjdFBvc2VzID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIGxhYmVsID0gX2EubGFiZWwsXG4gICAgICAgIHByb3BzID0gX2EucHJvcHMsXG4gICAgICAgIHZhbHVlcyA9IF9hLnZhbHVlcyxcbiAgICAgICAgcGFyZW50VmFsdWVzID0gX2EucGFyZW50VmFsdWVzLFxuICAgICAgICBhbmNlc3RvclZhbHVlcyA9IF9hLmFuY2VzdG9yVmFsdWVzLFxuICAgICAgICBvbkNoYW5nZSA9IF9hLm9uQ2hhbmdlLFxuICAgICAgICBwYXNzaXZlID0gX2EucGFzc2l2ZSxcbiAgICAgICAgaW5pdGlhbFBvc2UgPSBfYS5pbml0aWFsUG9zZSxcbiAgICAgICAgcG9zZXMgPSBfX3Jlc3QoX2EsIFtcImxhYmVsXCIsIFwicHJvcHNcIiwgXCJ2YWx1ZXNcIiwgXCJwYXJlbnRWYWx1ZXNcIiwgXCJhbmNlc3RvclZhbHVlc1wiLCBcIm9uQ2hhbmdlXCIsIFwicGFzc2l2ZVwiLCBcImluaXRpYWxQb3NlXCJdKTtcbiAgICByZXR1cm4gcG9zZXM7XG59O1xudmFyIHNlbGVjdEFsbFZhbHVlcyA9IGZ1bmN0aW9uICh2YWx1ZXMsIHNlbGVjdFZhbHVlKSB7XG4gICAgdmFyIGFsbFZhbHVlcyA9IHt9O1xuICAgIHZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgIHJldHVybiBhbGxWYWx1ZXNba2V5XSA9IHNlbGVjdFZhbHVlKHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYWxsVmFsdWVzO1xufTtcblxudmFyIHJlc29sdmVQcm9wID0gZnVuY3Rpb24gKHRhcmdldCwgcHJvcHMpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJyA/IHRhcmdldChwcm9wcykgOiB0YXJnZXQ7XG59O1xudmFyIHBvc2VEZWZhdWx0ID0gZnVuY3Rpb24gKHBvc2UsIHByb3AsIGRlZmF1bHRWYWx1ZSwgcmVzb2x2ZVByb3BzKSB7XG4gICAgcmV0dXJuIHBvc2UgJiYgcG9zZVtwcm9wXSAhPT0gdW5kZWZpbmVkID8gcmVzb2x2ZVByb3AocG9zZVtwcm9wXSwgcmVzb2x2ZVByb3BzKSA6IGRlZmF1bHRWYWx1ZTtcbn07XG52YXIgc3RhcnRDaGlsZEFuaW1hdGlvbnMgPSBmdW5jdGlvbiAoY2hpbGRyZW4sIG5leHQsIHBvc2UsIHByb3BzKSB7XG4gICAgdmFyIGFuaW1hdGlvbnMgPSBbXTtcbiAgICB2YXIgZGVsYXkgPSBwb3NlRGVmYXVsdChwb3NlLCAnZGVsYXlDaGlsZHJlbicsIDAsIHByb3BzKTtcbiAgICB2YXIgc3RhZ2dlciA9IHBvc2VEZWZhdWx0KHBvc2UsICdzdGFnZ2VyQ2hpbGRyZW4nLCAwLCBwcm9wcyk7XG4gICAgdmFyIHN0YWdnZXJEaXJlY3Rpb24gPSBwb3NlRGVmYXVsdChwb3NlLCAnc3RhZ2dlckRpcmVjdGlvbicsIDEsIHByb3BzKTtcbiAgICB2YXIgbWF4U3RhZ2dlckR1cmF0aW9uID0gKGNoaWxkcmVuLnNpemUgLSAxKSAqIHN0YWdnZXI7XG4gICAgdmFyIGdlbmVyYXRlU3RhZ2dlckR1cmF0aW9uID0gc3RhZ2dlckRpcmVjdGlvbiA9PT0gMSA/IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIHJldHVybiBpICogc3RhZ2dlcjtcbiAgICB9IDogZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgcmV0dXJuIG1heFN0YWdnZXJEdXJhdGlvbiAtIGkgKiBzdGFnZ2VyO1xuICAgIH07XG4gICAgQXJyYXkuZnJvbShjaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIGkpIHtcbiAgICAgICAgYW5pbWF0aW9ucy5wdXNoKGNoaWxkLnNldChuZXh0LCB7XG4gICAgICAgICAgICBkZWxheTogZGVsYXkgKyBnZW5lcmF0ZVN0YWdnZXJEdXJhdGlvbihpKVxuICAgICAgICB9KSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFuaW1hdGlvbnM7XG59O1xudmFyIHJlc29sdmVUcmFuc2l0aW9uID0gZnVuY3Rpb24gKHRyYW5zaXRpb24sIGtleSwgdmFsdWUsIHByb3BzLCBjb252ZXJ0VHJhbnNpdGlvbkRlZmluaXRpb24sIGdldEluc3RhbnRUcmFuc2l0aW9uKSB7XG4gICAgdmFyIHJlc29sdmVkVHJhbnNpdGlvbjtcbiAgICBpZiAodHlwZW9mIHRyYW5zaXRpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIHJlc29sdmVkVHJhbnNpdGlvbk1hcCA9IHRyYW5zaXRpb24ocHJvcHMpO1xuICAgICAgICByZXNvbHZlZFRyYW5zaXRpb24gPSByZXNvbHZlVHJhbnNpdGlvbihyZXNvbHZlZFRyYW5zaXRpb25NYXAsIGtleSwgdmFsdWUsIHByb3BzLCBjb252ZXJ0VHJhbnNpdGlvbkRlZmluaXRpb24sIGdldEluc3RhbnRUcmFuc2l0aW9uKTtcbiAgICB9IGVsc2UgaWYgKHRyYW5zaXRpb25ba2V5XSB8fCB0cmFuc2l0aW9uLmRlZmF1bHQpIHtcbiAgICAgICAgdmFyIGtleVRyYW5zaXRpb24gPSB0cmFuc2l0aW9uW2tleV0gfHwgdHJhbnNpdGlvbi5kZWZhdWx0O1xuICAgICAgICBpZiAodHlwZW9mIGtleVRyYW5zaXRpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJlc29sdmVkVHJhbnNpdGlvbiA9IGtleVRyYW5zaXRpb24ocHJvcHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZWRUcmFuc2l0aW9uID0ga2V5VHJhbnNpdGlvbjtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmVkVHJhbnNpdGlvbiA9IHRyYW5zaXRpb247XG4gICAgfVxuICAgIHJldHVybiByZXNvbHZlZFRyYW5zaXRpb24gPT09IGZhbHNlID8gZ2V0SW5zdGFudFRyYW5zaXRpb24odmFsdWUsIHByb3BzKSA6IGNvbnZlcnRUcmFuc2l0aW9uRGVmaW5pdGlvbih2YWx1ZSwgcmVzb2x2ZWRUcmFuc2l0aW9uLCBwcm9wcyk7XG59O1xudmFyIGZpbmRJbnNlcnRpb25JbmRleCA9IGZ1bmN0aW9uIChwb3NlTGlzdCwgcHJpb3JpdHlMaXN0LCBwcmlvcml0eUluZGV4KSB7XG4gICAgdmFyIGluc2VydGlvbkluZGV4ID0gMDtcbiAgICBmb3IgKHZhciBpID0gcHJpb3JpdHlJbmRleCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIHZhciBuZXh0SGlnaGVzdFByaW9yaXR5SW5kZXggPSBwb3NlTGlzdC5pbmRleE9mKHByaW9yaXR5TGlzdFtpXSk7XG4gICAgICAgIGlmIChuZXh0SGlnaGVzdFByaW9yaXR5SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBpbnNlcnRpb25JbmRleCA9IG5leHRIaWdoZXN0UHJpb3JpdHlJbmRleCArIDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaW5zZXJ0aW9uSW5kZXg7XG59O1xudmFyIGFwcGx5VmFsdWVzID0gZnVuY3Rpb24gKHRvQXBwbHksIHZhbHVlcywgcHJvcHMsIHNldFZhbHVlLCBzZXRWYWx1ZU5hdGl2ZSkge1xuICAgIGludmFyaWFudCh0eXBlb2YgdG9BcHBseSA9PT0gJ29iamVjdCcsICdhcHBseUF0U3RhcnQgYW5kIGFwcGx5QXRFbmQgbXVzdCBiZSBvZiB0eXBlIG9iamVjdCcpO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0b0FwcGx5KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIHZhbHVlVG9TZXQgPSByZXNvbHZlUHJvcCh0b0FwcGx5W2tleV0sIHByb3BzKTtcbiAgICAgICAgdmFsdWVzLmhhcyhrZXkpID8gc2V0VmFsdWUodmFsdWVzLmdldChrZXkpLCB2YWx1ZVRvU2V0KSA6IHNldFZhbHVlTmF0aXZlKGtleSwgdmFsdWVUb1NldCwgcHJvcHMpO1xuICAgIH0pO1xufTtcbnZhciBjcmVhdGVQb3NlU2V0dGVyID0gZnVuY3Rpb24gKHNldHRlclByb3BzKSB7XG4gICAgdmFyIHN0YXRlID0gc2V0dGVyUHJvcHMuc3RhdGUsXG4gICAgICAgIHBvc2VzID0gc2V0dGVyUHJvcHMucG9zZXMsXG4gICAgICAgIHN0YXJ0QWN0aW9uID0gc2V0dGVyUHJvcHMuc3RhcnRBY3Rpb24sXG4gICAgICAgIHN0b3BBY3Rpb24gPSBzZXR0ZXJQcm9wcy5zdG9wQWN0aW9uLFxuICAgICAgICBnZXRJbnN0YW50VHJhbnNpdGlvbiA9IHNldHRlclByb3BzLmdldEluc3RhbnRUcmFuc2l0aW9uLFxuICAgICAgICBhZGRBY3Rpb25EZWxheSA9IHNldHRlclByb3BzLmFkZEFjdGlvbkRlbGF5LFxuICAgICAgICBnZXRUcmFuc2l0aW9uUHJvcHMgPSBzZXR0ZXJQcm9wcy5nZXRUcmFuc2l0aW9uUHJvcHMsXG4gICAgICAgIHJlc29sdmVUYXJnZXQgPSBzZXR0ZXJQcm9wcy5yZXNvbHZlVGFyZ2V0LFxuICAgICAgICB0cmFuc2Zvcm1Qb3NlID0gc2V0dGVyUHJvcHMudHJhbnNmb3JtUG9zZSxcbiAgICAgICAgcG9zZVByaW9yaXR5ID0gc2V0dGVyUHJvcHMucG9zZVByaW9yaXR5LFxuICAgICAgICBjb252ZXJ0VHJhbnNpdGlvbkRlZmluaXRpb24gPSBzZXR0ZXJQcm9wcy5jb252ZXJ0VHJhbnNpdGlvbkRlZmluaXRpb24sXG4gICAgICAgIHNldFZhbHVlID0gc2V0dGVyUHJvcHMuc2V0VmFsdWUsXG4gICAgICAgIHNldFZhbHVlTmF0aXZlID0gc2V0dGVyUHJvcHMuc2V0VmFsdWVOYXRpdmUsXG4gICAgICAgIGZvcmNlUmVuZGVyID0gc2V0dGVyUHJvcHMuZm9yY2VSZW5kZXI7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuZXh0LCBuZXh0UHJvcHMsIHByb3BhZ2F0ZSkge1xuICAgICAgICBpZiAobmV4dFByb3BzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIG5leHRQcm9wcyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wYWdhdGUgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcHJvcGFnYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2hpbGRyZW4gPSBzdGF0ZS5jaGlsZHJlbixcbiAgICAgICAgICAgIHZhbHVlcyA9IHN0YXRlLnZhbHVlcyxcbiAgICAgICAgICAgIHByb3BzID0gc3RhdGUucHJvcHMsXG4gICAgICAgICAgICBhY3RpdmVBY3Rpb25zID0gc3RhdGUuYWN0aXZlQWN0aW9ucyxcbiAgICAgICAgICAgIGFjdGl2ZVBvc2VzID0gc3RhdGUuYWN0aXZlUG9zZXM7XG4gICAgICAgIHZhciBfYSA9IG5leHRQcm9wcy5kZWxheSxcbiAgICAgICAgICAgIGRlbGF5ID0gX2EgPT09IHZvaWQgMCA/IDAgOiBfYTtcbiAgICAgICAgdmFyIGhhc0NoaWxkcmVuID0gY2hpbGRyZW4uc2l6ZTtcbiAgICAgICAgdmFyIGJhc2VUcmFuc2l0aW9uUHJvcHMgPSBfX2Fzc2lnbih7fSwgcHJvcHMsIG5leHRQcm9wcyk7XG4gICAgICAgIHZhciBuZXh0UG9zZSA9IHBvc2VzW25leHRdO1xuICAgICAgICB2YXIgZ2V0Q2hpbGRBbmltYXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhhc0NoaWxkcmVuICYmIHByb3BhZ2F0ZSA/IHN0YXJ0Q2hpbGRBbmltYXRpb25zKGNoaWxkcmVuLCBuZXh0LCBuZXh0UG9zZSwgYmFzZVRyYW5zaXRpb25Qcm9wcykgOiBbXTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGdldFBhcmVudEFuaW1hdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIW5leHRQb3NlKSByZXR1cm4gW107XG4gICAgICAgICAgICB2YXIgYXBwbHlBdFN0YXJ0ID0gbmV4dFBvc2UuYXBwbHlBdFN0YXJ0O1xuICAgICAgICAgICAgaWYgKGFwcGx5QXRTdGFydCkge1xuICAgICAgICAgICAgICAgIGFwcGx5VmFsdWVzKGFwcGx5QXRTdGFydCwgdmFsdWVzLCBiYXNlVHJhbnNpdGlvblByb3BzLCBzZXRWYWx1ZSwgc2V0VmFsdWVOYXRpdmUpO1xuICAgICAgICAgICAgICAgIGlmIChmb3JjZVJlbmRlcikgZm9yY2VSZW5kZXIoYmFzZVRyYW5zaXRpb25Qcm9wcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJhbnNmb3JtUG9zZSkgbmV4dFBvc2UgPSB0cmFuc2Zvcm1Qb3NlKG5leHRQb3NlLCBuZXh0LCBzdGF0ZSk7XG4gICAgICAgICAgICB2YXIgcHJlVHJhbnNpdGlvbiA9IG5leHRQb3NlLnByZVRyYW5zaXRpb24sXG4gICAgICAgICAgICAgICAgZ2V0VHJhbnNpdGlvbiA9IG5leHRQb3NlLnRyYW5zaXRpb24sXG4gICAgICAgICAgICAgICAgYXBwbHlBdEVuZCA9IG5leHRQb3NlLmFwcGx5QXRFbmQ7XG4gICAgICAgICAgICBpZiAocHJlVHJhbnNpdGlvbikgcHJlVHJhbnNpdGlvbihiYXNlVHJhbnNpdGlvblByb3BzKTtcbiAgICAgICAgICAgIHZhciBhbmltYXRpb25zID0gT2JqZWN0LmtleXMoZ2V0UG9zZVZhbHVlcyhuZXh0UG9zZSkpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlUG9zZXMgPSBhY3RpdmVQb3Nlcy5oYXMoa2V5KSA/IGFjdGl2ZVBvc2VzLmdldChrZXkpIDogKGFjdGl2ZVBvc2VzLnNldChrZXksIFtdKSwgYWN0aXZlUG9zZXMuZ2V0KGtleSkpO1xuICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ0luZGV4ID0gdmFsdWVQb3Nlcy5pbmRleE9mKG5leHQpO1xuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0luZGV4ICE9PSAtMSkgdmFsdWVQb3Nlcy5zcGxpY2UoZXhpc3RpbmdJbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgdmFyIHByaW9yaXR5ID0gcG9zZVByaW9yaXR5ID8gcG9zZVByaW9yaXR5LmluZGV4T2YobmV4dCkgOiAwO1xuICAgICAgICAgICAgICAgIHZhciBpbnNlcnRpb25JbmRleCA9IHByaW9yaXR5IDw9IDAgPyAwIDogZmluZEluc2VydGlvbkluZGV4KHZhbHVlUG9zZXMsIHBvc2VQcmlvcml0eSwgcHJpb3JpdHkpO1xuICAgICAgICAgICAgICAgIHZhbHVlUG9zZXMuc3BsaWNlKGluc2VydGlvbkluZGV4LCAwLCBuZXh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5zZXJ0aW9uSW5kZXggPT09IDAgPyBuZXcgUHJvbWlzZShmdW5jdGlvbiAoY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdmFsdWVzLmdldChrZXkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNpdGlvblByb3BzID0gX19hc3NpZ24oe30sIGJhc2VUcmFuc2l0aW9uUHJvcHMsIHsga2V5OiBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSByZXNvbHZlVGFyZ2V0KHZhbHVlLCByZXNvbHZlUHJvcChuZXh0UG9zZVtrZXldLCB0cmFuc2l0aW9uUHJvcHMpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUFjdGlvbnMuaGFzKGtleSkpIHN0b3BBY3Rpb24oYWN0aXZlQWN0aW9ucy5nZXQoa2V5KSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNvbHZlVHJhbnNpdGlvblByb3BzID0gX19hc3NpZ24oeyB0bzogdGFyZ2V0IH0sIHRyYW5zaXRpb25Qcm9wcywgZ2V0VHJhbnNpdGlvblByb3BzKHZhbHVlLCB0YXJnZXQsIHRyYW5zaXRpb25Qcm9wcykpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNpdGlvbiA9IHJlc29sdmVUcmFuc2l0aW9uKGdldFRyYW5zaXRpb24sIGtleSwgdmFsdWUsIHJlc29sdmVUcmFuc2l0aW9uUHJvcHMsIGNvbnZlcnRUcmFuc2l0aW9uRGVmaW5pdGlvbiwgZ2V0SW5zdGFudFRyYW5zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zZURlbGF5ID0gZGVsYXkgfHwgcmVzb2x2ZVByb3AobmV4dFBvc2UuZGVsYXksIHRyYW5zaXRpb25Qcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3NlRGVsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24gPSBhZGRBY3Rpb25EZWxheShwb3NlRGVsYXksIHRyYW5zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUFjdGlvbnMuc2V0KGtleSwgc3RhcnRBY3Rpb24odmFsdWUsIHRyYW5zaXRpb24sIGNvbXBsZXRlKSk7XG4gICAgICAgICAgICAgICAgfSkgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGFwcGx5QXRFbmQgPyBbUHJvbWlzZS5hbGwoYW5pbWF0aW9ucykudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYXBwbHlWYWx1ZXMoYXBwbHlBdEVuZCwgdmFsdWVzLCBiYXNlVHJhbnNpdGlvblByb3BzLCBzZXRWYWx1ZSwgc2V0VmFsdWVOYXRpdmUpO1xuICAgICAgICAgICAgfSldIDogYW5pbWF0aW9ucztcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG5leHRQb3NlICYmIGhhc0NoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAocmVzb2x2ZVByb3AobmV4dFBvc2UuYmVmb3JlQ2hpbGRyZW4sIGJhc2VUcmFuc2l0aW9uUHJvcHMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGdldFBhcmVudEFuaW1hdGlvbnMoKSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChnZXRDaGlsZEFuaW1hdGlvbnMoKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc29sdmVQcm9wKG5leHRQb3NlLmFmdGVyQ2hpbGRyZW4sIGJhc2VUcmFuc2l0aW9uUHJvcHMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGdldENoaWxkQW5pbWF0aW9ucygpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGdldFBhcmVudEFuaW1hdGlvbnMoKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGdldFBhcmVudEFuaW1hdGlvbnMoKS5jb25jYXQoZ2V0Q2hpbGRBbmltYXRpb25zKCkpKTtcbiAgICB9O1xufTtcblxudmFyIERFRkFVTFRfSU5JVElBTF9QT1NFID0gJ2luaXQnO1xudmFyIGlzU2NhbGUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIGtleS5pbmNsdWRlcygnc2NhbGUnKTtcbn07XG52YXIgZGVmYXVsdFJlYWRWYWx1ZUZyb21Tb3VyY2UgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIGlzU2NhbGUoa2V5KSA/IDEgOiAwO1xufTtcbnZhciByZWFkVmFsdWVGcm9tUG9zZSA9IGZ1bmN0aW9uIChwb3NlLCBrZXksIHByb3BzKSB7XG4gICAgdmFyIHZhbHVlVG9SZXNvbHZlID0gcG9zZS5hcHBseUF0RW5kICYmIHBvc2UuYXBwbHlBdEVuZFtrZXldICE9PSB1bmRlZmluZWQgPyBwb3NlLmFwcGx5QXRFbmRba2V5XSA6IHBvc2Vba2V5XSAhPT0gdW5kZWZpbmVkID8gcG9zZVtrZXldIDogcG9zZS5hcHBseUF0U3RhcnQgJiYgcG9zZS5hcHBseUF0U3RhcnRba2V5XSAhPT0gdW5kZWZpbmVkID8gcG9zZS5hcHBseUF0U3RhcnRba2V5XSA6IDA7XG4gICAgcmV0dXJuIHJlc29sdmVQcm9wKHZhbHVlVG9SZXNvbHZlLCBwcm9wcyk7XG59O1xudmFyIGdldFBvc2VzVG9TZWFyY2ggPSBmdW5jdGlvbiAocG9zZSkge1xuICAgIHZhciBwb3Nlc1RvU2VhcmNoID0gQXJyYXkuaXNBcnJheShwb3NlKSA/IHBvc2UgOiBbcG9zZV07XG4gICAgcG9zZXNUb1NlYXJjaC5wdXNoKERFRkFVTFRfSU5JVElBTF9QT1NFKTtcbiAgICByZXR1cm4gcG9zZXNUb1NlYXJjaDtcbn07XG52YXIgZ2V0SW5pdGlhbFZhbHVlID0gZnVuY3Rpb24gKHBvc2VzLCBrZXksIGluaXRpYWxQb3NlLCBwcm9wcywgcmVhZFZhbHVlRnJvbVNvdXJjZSwgYWN0aXZlUG9zZXMpIHtcbiAgICBpZiAocmVhZFZhbHVlRnJvbVNvdXJjZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHJlYWRWYWx1ZUZyb21Tb3VyY2UgPSBkZWZhdWx0UmVhZFZhbHVlRnJvbVNvdXJjZTtcbiAgICB9XG4gICAgdmFyIHBvc2VzVG9TZWFyY2ggPSBnZXRQb3Nlc1RvU2VhcmNoKGluaXRpYWxQb3NlKTtcbiAgICB2YXIgcG9zZSA9IHBvc2VzVG9TZWFyY2guZmlsdGVyKEJvb2xlYW4pLmZpbmQoZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIHRoaXNQb3NlID0gcG9zZXNbbmFtZV07XG4gICAgICAgIHJldHVybiB0aGlzUG9zZSAmJiAodGhpc1Bvc2Vba2V5XSAhPT0gdW5kZWZpbmVkIHx8IHRoaXNQb3NlLmFwcGx5QXRTdGFydCAmJiB0aGlzUG9zZS5hcHBseUF0U3RhcnRba2V5XSAhPT0gdW5kZWZpbmVkIHx8IHRoaXNQb3NlLmFwcGx5QXRFbmQgJiYgdGhpc1Bvc2UuYXBwbHlBdEVuZFtrZXldICE9PSB1bmRlZmluZWQpO1xuICAgIH0pO1xuICAgIGFjdGl2ZVBvc2VzLnNldChrZXksIFtwb3NlIHx8IERFRkFVTFRfSU5JVElBTF9QT1NFXSk7XG4gICAgcmV0dXJuIHBvc2UgPyByZWFkVmFsdWVGcm9tUG9zZShwb3Nlc1twb3NlXSwga2V5LCBwcm9wcykgOiByZWFkVmFsdWVGcm9tU291cmNlKGtleSwgcHJvcHMpO1xufTtcbnZhciBjcmVhdGVWYWx1ZXMgPSBmdW5jdGlvbiAodmFsdWVzLCBfYSkge1xuICAgIHZhciB1c2VyU2V0VmFsdWVzID0gX2EudXNlclNldFZhbHVlcyxcbiAgICAgICAgY3JlYXRlVmFsdWUgPSBfYS5jcmVhdGVWYWx1ZSxcbiAgICAgICAgY29udmVydFZhbHVlID0gX2EuY29udmVydFZhbHVlLFxuICAgICAgICByZWFkVmFsdWVGcm9tU291cmNlID0gX2EucmVhZFZhbHVlRnJvbVNvdXJjZSxcbiAgICAgICAgaW5pdGlhbFBvc2UgPSBfYS5pbml0aWFsUG9zZSxcbiAgICAgICAgcG9zZXMgPSBfYS5wb3NlcyxcbiAgICAgICAgYWN0aXZlUG9zZXMgPSBfYS5hY3RpdmVQb3NlcyxcbiAgICAgICAgcHJvcHMgPSBfYS5wcm9wcztcbiAgICByZXR1cm4gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAodmFsdWVzLmhhcyhrZXkpKSByZXR1cm47XG4gICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgaWYgKHVzZXJTZXRWYWx1ZXMgJiYgdXNlclNldFZhbHVlc1trZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhbHVlID0gY29udmVydFZhbHVlKHVzZXJTZXRWYWx1ZXNba2V5XSwga2V5LCBwcm9wcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgaW5pdFZhbHVlID0gZ2V0SW5pdGlhbFZhbHVlKHBvc2VzLCBrZXksIGluaXRpYWxQb3NlLCBwcm9wcywgcmVhZFZhbHVlRnJvbVNvdXJjZSwgYWN0aXZlUG9zZXMpO1xuICAgICAgICAgICAgdmFsdWUgPSBjcmVhdGVWYWx1ZShpbml0VmFsdWUsIGtleSwgcHJvcHMpO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlcy5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfTtcbn07XG52YXIgc2NyYXBlVmFsdWVzRnJvbVBvc2UgPSBmdW5jdGlvbiAodmFsdWVzLCBwcm9wcykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBwb3NlID0gcHJvcHMucG9zZXNba2V5XTtcbiAgICAgICAgT2JqZWN0LmtleXMoZ2V0UG9zZVZhbHVlcyhwb3NlKSkuZm9yRWFjaChjcmVhdGVWYWx1ZXModmFsdWVzLCBwcm9wcykpO1xuICAgIH07XG59O1xudmFyIGdldEFuY2VzdG9yVmFsdWUgPSBmdW5jdGlvbiAoa2V5LCBmcm9tUGFyZW50LCBhbmNlc3RvcnMpIHtcbiAgICBpZiAoZnJvbVBhcmVudCA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gYW5jZXN0b3JzWzBdICYmIGFuY2VzdG9yc1swXS52YWx1ZXMuZ2V0KGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGZvdW5kQW5jZXN0b3IgPSBhbmNlc3RvcnMuZmluZChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9IF9hLmxhYmVsO1xuICAgICAgICAgICAgcmV0dXJuIGxhYmVsID09PSBmcm9tUGFyZW50O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZvdW5kQW5jZXN0b3IgJiYgZm91bmRBbmNlc3Rvci52YWx1ZXMuZ2V0KGtleSk7XG4gICAgfVxufTtcbnZhciBiaW5kUGFzc2l2ZVZhbHVlcyA9IGZ1bmN0aW9uICh2YWx1ZXMsIF9hKSB7XG4gICAgdmFyIHBhc3NpdmUgPSBfYS5wYXNzaXZlLFxuICAgICAgICBhbmNlc3RvclZhbHVlcyA9IF9hLmFuY2VzdG9yVmFsdWVzLFxuICAgICAgICBjcmVhdGVWYWx1ZSA9IF9hLmNyZWF0ZVZhbHVlLFxuICAgICAgICByZWFkVmFsdWUgPSBfYS5yZWFkVmFsdWUsXG4gICAgICAgIHByb3BzID0gX2EucHJvcHM7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIF9hID0gcGFzc2l2ZVtrZXldLFxuICAgICAgICAgICAgdmFsdWVLZXkgPSBfYVswXSxcbiAgICAgICAgICAgIHBhc3NpdmVQcm9wcyA9IF9hWzFdLFxuICAgICAgICAgICAgZnJvbVBhcmVudCA9IF9hWzJdO1xuICAgICAgICB2YXIgdmFsdWVUb0JpbmQgPSBmcm9tUGFyZW50ICYmIGFuY2VzdG9yVmFsdWVzLmxlbmd0aCA/IGdldEFuY2VzdG9yVmFsdWUodmFsdWVLZXksIGZyb21QYXJlbnQsIGFuY2VzdG9yVmFsdWVzKSA6IHZhbHVlcy5oYXModmFsdWVLZXkpID8gdmFsdWVzLmdldCh2YWx1ZUtleSkgOiBmYWxzZTtcbiAgICAgICAgaWYgKCF2YWx1ZVRvQmluZCkgcmV0dXJuO1xuICAgICAgICB2YXIgbmV3VmFsdWUgPSBjcmVhdGVWYWx1ZShyZWFkVmFsdWUodmFsdWVUb0JpbmQpLCBrZXksIHByb3BzLCB7XG4gICAgICAgICAgICBwYXNzaXZlUGFyZW50S2V5OiB2YWx1ZUtleSxcbiAgICAgICAgICAgIHBhc3NpdmVQYXJlbnQ6IHZhbHVlVG9CaW5kLFxuICAgICAgICAgICAgcGFzc2l2ZVByb3BzOiBwYXNzaXZlUHJvcHNcbiAgICAgICAgfSk7XG4gICAgICAgIHZhbHVlcy5zZXQoa2V5LCBuZXdWYWx1ZSk7XG4gICAgfTtcbn07XG52YXIgc2V0TmF0aXZlVmFsdWVzID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIHNldFZhbHVlTmF0aXZlID0gX2Euc2V0VmFsdWVOYXRpdmUsXG4gICAgICAgIGluaXRpYWxQb3NlID0gX2EuaW5pdGlhbFBvc2UsXG4gICAgICAgIHByb3BzID0gX2EucHJvcHMsXG4gICAgICAgIHBvc2VzID0gX2EucG9zZXM7XG4gICAgdmFyIHZhbHVlc0hhdmVTZXQgPSBuZXcgU2V0KCk7XG4gICAgdmFyIHNldFZhbHVlcyA9IGZ1bmN0aW9uIChwb3NlLCBwcm9wS2V5KSB7XG4gICAgICAgIGlmIChwb3NlW3Byb3BLZXldKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcG9zZVtwcm9wS2V5XSkge1xuICAgICAgICAgICAgICAgIGlmICghdmFsdWVzSGF2ZVNldC5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNIYXZlU2V0LmFkZChrZXkpO1xuICAgICAgICAgICAgICAgICAgICBzZXRWYWx1ZU5hdGl2ZShrZXksIHJlc29sdmVQcm9wKHBvc2VbcHJvcEtleV1ba2V5XSwgcHJvcHMpLCBwcm9wcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBnZXRQb3Nlc1RvU2VhcmNoKGluaXRpYWxQb3NlKS5mb3JFYWNoKGZ1bmN0aW9uIChwb3NlS2V5KSB7XG4gICAgICAgIHZhciBwb3NlID0gcG9zZXNbcG9zZUtleV07XG4gICAgICAgIGlmIChwb3NlKSB7XG4gICAgICAgICAgICBzZXRWYWx1ZXMocG9zZSwgJ2FwcGx5QXRFbmQnKTtcbiAgICAgICAgICAgIHNldFZhbHVlcyhwb3NlLCAnYXBwbHlBdFN0YXJ0Jyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG52YXIgY3JlYXRlVmFsdWVNYXAgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICB2YXIgcG9zZXMgPSBwcm9wcy5wb3NlcyxcbiAgICAgICAgcGFzc2l2ZSA9IHByb3BzLnBhc3NpdmU7XG4gICAgdmFyIHZhbHVlcyA9IG5ldyBNYXAoKTtcbiAgICBPYmplY3Qua2V5cyhwb3NlcykuZm9yRWFjaChzY3JhcGVWYWx1ZXNGcm9tUG9zZSh2YWx1ZXMsIHByb3BzKSk7XG4gICAgc2V0TmF0aXZlVmFsdWVzKHByb3BzKTtcbiAgICBpZiAocGFzc2l2ZSkgT2JqZWN0LmtleXMocGFzc2l2ZSkuZm9yRWFjaChiaW5kUGFzc2l2ZVZhbHVlcyh2YWx1ZXMsIHByb3BzKSk7XG4gICAgcmV0dXJuIHZhbHVlcztcbn07XG5cbnZhciBhcHBseURlZmF1bHRUcmFuc2l0aW9uID0gZnVuY3Rpb24gKHBvc2UsIGtleSwgZGVmYXVsdFRyYW5zaXRpb25zKSB7XG4gICAgcmV0dXJuIF9fYXNzaWduKHt9LCBwb3NlLCB7IHRyYW5zaXRpb246IGRlZmF1bHRUcmFuc2l0aW9ucy5oYXMoa2V5KSA/IGRlZmF1bHRUcmFuc2l0aW9ucy5nZXQoa2V5KSA6IGRlZmF1bHRUcmFuc2l0aW9ucy5nZXQoJ2RlZmF1bHQnKSB9KTtcbn07XG52YXIgZ2VuZXJhdGVUcmFuc2l0aW9ucyA9IGZ1bmN0aW9uIChwb3NlcywgZGVmYXVsdFRyYW5zaXRpb25zKSB7XG4gICAgT2JqZWN0LmtleXMocG9zZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgcG9zZSA9IHBvc2VzW2tleV07XG4gICAgICAgIGludmFyaWFudCh0eXBlb2YgcG9zZSA9PT0gJ29iamVjdCcsIFwiUG9zZSAnXCIgKyBrZXkgKyBcIicgaXMgb2YgaW52YWxpZCB0eXBlLiBBbGwgcG9zZXMgc2hvdWxkIGJlIG9iamVjdHMuXCIpO1xuICAgICAgICBwb3Nlc1trZXldID0gcG9zZS50cmFuc2l0aW9uICE9PSB1bmRlZmluZWQgPyBwb3NlIDogYXBwbHlEZWZhdWx0VHJhbnNpdGlvbihwb3NlLCBrZXksIGRlZmF1bHRUcmFuc2l0aW9ucyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHBvc2VzO1xufTtcblxudmFyIHNvcnRCeVJldmVyc2VQcmlvcml0eSA9IGZ1bmN0aW9uIChwcmlvcml0eU9yZGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHZhciBhUCA9IHByaW9yaXR5T3JkZXIuaW5kZXhPZihhKTtcbiAgICAgICAgdmFyIGJQID0gcHJpb3JpdHlPcmRlci5pbmRleE9mKGIpO1xuICAgICAgICBpZiAoYVAgPT09IC0xICYmIGJQICE9PSAtMSkgcmV0dXJuIC0xO1xuICAgICAgICBpZiAoYVAgIT09IC0xICYmIGJQID09PSAtMSkgcmV0dXJuIDE7XG4gICAgICAgIHJldHVybiBhUCAtIGJQO1xuICAgIH07XG59O1xuXG52YXIgcG9zZUZhY3RvcnkgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgZ2V0RGVmYXVsdFByb3BzID0gX2EuZ2V0RGVmYXVsdFByb3BzLFxuICAgICAgICBkZWZhdWx0VHJhbnNpdGlvbnMgPSBfYS5kZWZhdWx0VHJhbnNpdGlvbnMsXG4gICAgICAgIGJpbmRPbkNoYW5nZSA9IF9hLmJpbmRPbkNoYW5nZSxcbiAgICAgICAgc3RhcnRBY3Rpb24gPSBfYS5zdGFydEFjdGlvbixcbiAgICAgICAgc3RvcEFjdGlvbiA9IF9hLnN0b3BBY3Rpb24sXG4gICAgICAgIHJlYWRWYWx1ZSA9IF9hLnJlYWRWYWx1ZSxcbiAgICAgICAgcmVhZFZhbHVlRnJvbVNvdXJjZSA9IF9hLnJlYWRWYWx1ZUZyb21Tb3VyY2UsXG4gICAgICAgIHJlc29sdmVUYXJnZXQgPSBfYS5yZXNvbHZlVGFyZ2V0LFxuICAgICAgICBzZXRWYWx1ZSA9IF9hLnNldFZhbHVlLFxuICAgICAgICBzZXRWYWx1ZU5hdGl2ZSA9IF9hLnNldFZhbHVlTmF0aXZlLFxuICAgICAgICBjcmVhdGVWYWx1ZSA9IF9hLmNyZWF0ZVZhbHVlLFxuICAgICAgICBjb252ZXJ0VmFsdWUgPSBfYS5jb252ZXJ0VmFsdWUsXG4gICAgICAgIGdldEluc3RhbnRUcmFuc2l0aW9uID0gX2EuZ2V0SW5zdGFudFRyYW5zaXRpb24sXG4gICAgICAgIGdldFRyYW5zaXRpb25Qcm9wcyA9IF9hLmdldFRyYW5zaXRpb25Qcm9wcyxcbiAgICAgICAgYWRkQWN0aW9uRGVsYXkgPSBfYS5hZGRBY3Rpb25EZWxheSxcbiAgICAgICAgc2VsZWN0VmFsdWVUb1JlYWQgPSBfYS5zZWxlY3RWYWx1ZVRvUmVhZCxcbiAgICAgICAgY29udmVydFRyYW5zaXRpb25EZWZpbml0aW9uID0gX2EuY29udmVydFRyYW5zaXRpb25EZWZpbml0aW9uLFxuICAgICAgICB0cmFuc2Zvcm1Qb3NlID0gX2EudHJhbnNmb3JtUG9zZSxcbiAgICAgICAgcG9zZVByaW9yaXR5ID0gX2EucG9zZVByaW9yaXR5LFxuICAgICAgICBmb3JjZVJlbmRlciA9IF9hLmZvcmNlUmVuZGVyLFxuICAgICAgICBleHRlbmRBUEkgPSBfYS5leHRlbmRBUEk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgdmFyIHBhcmVudFZhbHVlcyA9IGNvbmZpZy5wYXJlbnRWYWx1ZXMsXG4gICAgICAgICAgICBfYSA9IGNvbmZpZy5hbmNlc3RvclZhbHVlcyxcbiAgICAgICAgICAgIGFuY2VzdG9yVmFsdWVzID0gX2EgPT09IHZvaWQgMCA/IFtdIDogX2E7XG4gICAgICAgIGlmIChwYXJlbnRWYWx1ZXMpIGFuY2VzdG9yVmFsdWVzLnVuc2hpZnQoeyB2YWx1ZXM6IHBhcmVudFZhbHVlcyB9KTtcbiAgICAgICAgdmFyIGFjdGl2ZUFjdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHZhciBhY3RpdmVQb3NlcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gbmV3IFNldCgpO1xuICAgICAgICB2YXIgcG9zZXMgPSBnZW5lcmF0ZVRyYW5zaXRpb25zKHNlbGVjdFBvc2VzKGNvbmZpZyksIGRlZmF1bHRUcmFuc2l0aW9ucyk7XG4gICAgICAgIHZhciBfYiA9IGNvbmZpZy5wcm9wcyxcbiAgICAgICAgICAgIHByb3BzID0gX2IgPT09IHZvaWQgMCA/IHt9IDogX2I7XG4gICAgICAgIGlmIChnZXREZWZhdWx0UHJvcHMpIHByb3BzID0gX19hc3NpZ24oe30sIGdldERlZmF1bHRQcm9wcyhjb25maWcpLCBwcm9wcyk7XG4gICAgICAgIHZhciBwYXNzaXZlID0gY29uZmlnLnBhc3NpdmUsXG4gICAgICAgICAgICB1c2VyU2V0VmFsdWVzID0gY29uZmlnLnZhbHVlcyxcbiAgICAgICAgICAgIF9jID0gY29uZmlnLmluaXRpYWxQb3NlLFxuICAgICAgICAgICAgaW5pdGlhbFBvc2UgPSBfYyA9PT0gdm9pZCAwID8gREVGQVVMVF9JTklUSUFMX1BPU0UgOiBfYztcbiAgICAgICAgdmFyIHZhbHVlcyA9IGNyZWF0ZVZhbHVlTWFwKHtcbiAgICAgICAgICAgIHBvc2VzOiBwb3NlcyxcbiAgICAgICAgICAgIHBhc3NpdmU6IHBhc3NpdmUsXG4gICAgICAgICAgICBhbmNlc3RvclZhbHVlczogYW5jZXN0b3JWYWx1ZXMsXG4gICAgICAgICAgICByZWFkVmFsdWU6IHJlYWRWYWx1ZSxcbiAgICAgICAgICAgIHNldFZhbHVlTmF0aXZlOiBzZXRWYWx1ZU5hdGl2ZSxcbiAgICAgICAgICAgIGNyZWF0ZVZhbHVlOiBjcmVhdGVWYWx1ZSxcbiAgICAgICAgICAgIGNvbnZlcnRWYWx1ZTogY29udmVydFZhbHVlLFxuICAgICAgICAgICAgcmVhZFZhbHVlRnJvbVNvdXJjZTogcmVhZFZhbHVlRnJvbVNvdXJjZSxcbiAgICAgICAgICAgIHVzZXJTZXRWYWx1ZXM6IHVzZXJTZXRWYWx1ZXMsXG4gICAgICAgICAgICBpbml0aWFsUG9zZTogaW5pdGlhbFBvc2UsXG4gICAgICAgICAgICBhY3RpdmVQb3NlczogYWN0aXZlUG9zZXMsXG4gICAgICAgICAgICBwcm9wczogcHJvcHNcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgICAgIGFjdGl2ZUFjdGlvbnM6IGFjdGl2ZUFjdGlvbnMsXG4gICAgICAgICAgICBhY3RpdmVQb3NlczogYWN0aXZlUG9zZXMsXG4gICAgICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW4sXG4gICAgICAgICAgICBwcm9wczogcHJvcHMsXG4gICAgICAgICAgICB2YWx1ZXM6IHZhbHVlc1xuICAgICAgICB9O1xuICAgICAgICB2YXIgb25DaGFuZ2UgPSBjb25maWcub25DaGFuZ2U7XG4gICAgICAgIGlmIChvbkNoYW5nZSkgT2JqZWN0LmtleXMob25DaGFuZ2UpLmZvckVhY2goYmluZE9uQ2hhbmdlKHZhbHVlcywgb25DaGFuZ2UpKTtcbiAgICAgICAgdmFyIHNldCA9IGNyZWF0ZVBvc2VTZXR0ZXIoe1xuICAgICAgICAgICAgc3RhdGU6IHN0YXRlLFxuICAgICAgICAgICAgcG9zZXM6IHBvc2VzLFxuICAgICAgICAgICAgZ2V0SW5zdGFudFRyYW5zaXRpb246IGdldEluc3RhbnRUcmFuc2l0aW9uLFxuICAgICAgICAgICAgZ2V0VHJhbnNpdGlvblByb3BzOiBnZXRUcmFuc2l0aW9uUHJvcHMsXG4gICAgICAgICAgICBjb252ZXJ0VHJhbnNpdGlvbkRlZmluaXRpb246IGNvbnZlcnRUcmFuc2l0aW9uRGVmaW5pdGlvbixcbiAgICAgICAgICAgIHNldFZhbHVlOiBzZXRWYWx1ZSxcbiAgICAgICAgICAgIHNldFZhbHVlTmF0aXZlOiBzZXRWYWx1ZU5hdGl2ZSxcbiAgICAgICAgICAgIHN0YXJ0QWN0aW9uOiBzdGFydEFjdGlvbixcbiAgICAgICAgICAgIHN0b3BBY3Rpb246IHN0b3BBY3Rpb24sXG4gICAgICAgICAgICByZXNvbHZlVGFyZ2V0OiByZXNvbHZlVGFyZ2V0LFxuICAgICAgICAgICAgYWRkQWN0aW9uRGVsYXk6IGFkZEFjdGlvbkRlbGF5LFxuICAgICAgICAgICAgdHJhbnNmb3JtUG9zZTogdHJhbnNmb3JtUG9zZSxcbiAgICAgICAgICAgIHBvc2VQcmlvcml0eTogcG9zZVByaW9yaXR5LFxuICAgICAgICAgICAgZm9yY2VSZW5kZXI6IGZvcmNlUmVuZGVyXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgaGFzID0gZnVuY3Rpb24gKHBvc2VOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gISFwb3Nlc1twb3NlTmFtZV07XG4gICAgICAgIH07XG4gICAgICAgIHZhciBhcGkgPSB7XG4gICAgICAgICAgICBzZXQ6IHNldCxcbiAgICAgICAgICAgIHVuc2V0OiBmdW5jdGlvbiAocG9zZU5hbWUsIHBvc2VQcm9wcykge1xuICAgICAgICAgICAgICAgIHZhciBwb3Nlc1RvU2V0ID0gW107XG4gICAgICAgICAgICAgICAgYWN0aXZlUG9zZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWVQb3Nlcykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zZUluZGV4ID0gdmFsdWVQb3Nlcy5pbmRleE9mKHBvc2VOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc2VJbmRleCA9PT0gLTEpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRQb3NlID0gdmFsdWVQb3Nlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVQb3Nlcy5zcGxpY2UocG9zZUluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRQb3NlID0gdmFsdWVQb3Nlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRQb3NlID09PSBjdXJyZW50UG9zZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zZXNUb1NldC5pbmRleE9mKG5leHRQb3NlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2VzVG9TZXQucHVzaChuZXh0UG9zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uc1RvUmVzb2x2ZSA9IHBvc2VzVG9TZXQuc29ydChzb3J0QnlSZXZlcnNlUHJpb3JpdHkocG9zZVByaW9yaXR5KSkubWFwKGZ1bmN0aW9uIChwb3NlVG9TZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldChwb3NlVG9TZXQsIHBvc2VQcm9wcywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhbmltYXRpb25zVG9SZXNvbHZlLnB1c2goY2hpbGQudW5zZXQocG9zZU5hbWUpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoYW5pbWF0aW9uc1RvUmVzb2x2ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAodmFsdWVOYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlTmFtZSA/IHNlbGVjdFZhbHVlVG9SZWFkKHZhbHVlcy5nZXQodmFsdWVOYW1lKSkgOiBzZWxlY3RBbGxWYWx1ZXModmFsdWVzLCBzZWxlY3RWYWx1ZVRvUmVhZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGFzOiBoYXMsXG4gICAgICAgICAgICBzZXRQcm9wczogZnVuY3Rpb24gKG5ld1Byb3BzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnByb3BzID0gX19hc3NpZ24oe30sIHN0YXRlLnByb3BzLCBuZXdQcm9wcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZENoaWxkOiBmdW5jdGlvbiAoY2hpbGRDb25maWcsIGZhY3RvcnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBmYWN0b3J5KF9fYXNzaWduKHsgaW5pdGlhbFBvc2U6IGluaXRpYWxQb3NlIH0sIGNoaWxkQ29uZmlnLCB7IGFuY2VzdG9yVmFsdWVzOiBbeyBsYWJlbDogY29uZmlnLmxhYmVsLCB2YWx1ZXM6IHZhbHVlcyB9XS5jb25jYXQoYW5jZXN0b3JWYWx1ZXMpIH0pKTtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5hZGQoY2hpbGQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1vdmVDaGlsZDogZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkcmVuLmRlbGV0ZShjaGlsZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xlYXJDaGlsZHJlbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4uY2xlYXIoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlQWN0aW9ucy5mb3JFYWNoKHN0b3BBY3Rpb24pO1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBleHRlbmRBUEkoYXBpLCBzdGF0ZSwgY29uZmlnKTtcbiAgICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgcG9zZUZhY3Rvcnk7XG4iLCJpbXBvcnQgeyBzcHJpbmcsIHR3ZWVuLCBhY3Rpb24sIHBvaW50ZXIsIHRyYW5zZm9ybSwgZGVjYXksIGtleWZyYW1lcywgcGh5c2ljcywgdmFsdWUsIGNoYWluLCBkZWxheSwgbGlzdGVuLCBzdHlsZXIgfSBmcm9tICdwb3Btb3Rpb24nO1xuaW1wb3J0IHsgbGluZWFyLCBlYXNlSW4sIGVhc2VPdXQsIGVhc2VJbk91dCwgY2lyY0luLCBjaXJjT3V0LCBjaXJjSW5PdXQsIGJhY2tJbiwgYmFja091dCwgYmFja0luT3V0LCBhbnRpY2lwYXRlLCBjdWJpY0JlemllciB9IGZyb20gJ0Bwb3Btb3Rpb24vZWFzaW5nJztcbmltcG9ydCB7IHBlcmNlbnQsIG51bWJlciwgZGVncmVlcywgcHgsIHZ3LCB2aCB9IGZyb20gJ3N0eWxlLXZhbHVlLXR5cGVzJztcbmltcG9ydCBwb3NlRmFjdG9yeSBmcm9tICdwb3NlLWNvcmUnO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnaGV5LWxpc3Rlbic7XG5cbi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cbnZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuXG5mdW5jdGlvbiBfX3Jlc3QocywgZSkge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApIHRbcF0gPSBzW3BdO1xuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIikgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApIHRbcFtpXV0gPSBzW3BbaV1dO1xuICAgIHJldHVybiB0O1xufVxuXG52YXIgQm91bmRpbmdCb3hEaW1lbnNpb247XG4oZnVuY3Rpb24gKEJvdW5kaW5nQm94RGltZW5zaW9uKSB7XG4gICAgQm91bmRpbmdCb3hEaW1lbnNpb25bXCJ3aWR0aFwiXSA9IFwid2lkdGhcIjtcbiAgICBCb3VuZGluZ0JveERpbWVuc2lvbltcImhlaWdodFwiXSA9IFwiaGVpZ2h0XCI7XG4gICAgQm91bmRpbmdCb3hEaW1lbnNpb25bXCJsZWZ0XCJdID0gXCJsZWZ0XCI7XG4gICAgQm91bmRpbmdCb3hEaW1lbnNpb25bXCJyaWdodFwiXSA9IFwicmlnaHRcIjtcbiAgICBCb3VuZGluZ0JveERpbWVuc2lvbltcInRvcFwiXSA9IFwidG9wXCI7XG4gICAgQm91bmRpbmdCb3hEaW1lbnNpb25bXCJib3R0b21cIl0gPSBcImJvdHRvbVwiO1xufSkoQm91bmRpbmdCb3hEaW1lbnNpb24gfHwgKEJvdW5kaW5nQm94RGltZW5zaW9uID0ge30pKTtcblxudmFyIG1lYXN1cmVXaXRob3V0VHJhbnNmb3JtID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICB2YXIgdHJhbnNmb3JtJCQxID0gZWxlbWVudC5zdHlsZS50cmFuc2Zvcm07XG4gICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbiAgICB2YXIgYmJveCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm0kJDE7XG4gICAgcmV0dXJuIGJib3g7XG59O1xudmFyIHJlc29sdmVQcm9wID0gZnVuY3Rpb24gKHRhcmdldCwgcHJvcHMpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJyA/IHRhcmdldChwcm9wcykgOiB0YXJnZXQ7XG59O1xuXG52YXIgaW50ZXJwb2xhdGUgPSB0cmFuc2Zvcm0uaW50ZXJwb2xhdGU7XG52YXIgc2luZ2xlQXhpc1BvaW50ZXIgPSBmdW5jdGlvbiAoYXhpcykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZnJvbSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBwb2ludGVyKChfYSA9IHt9LCBfYVtheGlzXSA9IHR5cGVvZiBmcm9tID09PSAnc3RyaW5nJyA/IHBhcnNlRmxvYXQoZnJvbSkgOiBmcm9tLCBfYSkpLnBpcGUoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIHJldHVybiB2W2F4aXNdO1xuICAgICAgICB9KTtcbiAgICB9O1xufTtcbnZhciBwb2ludGVyWCA9IC8qI19fUFVSRV9fKi9zaW5nbGVBeGlzUG9pbnRlcigneCcpO1xudmFyIHBvaW50ZXJZID0gLyojX19QVVJFX18qL3NpbmdsZUF4aXNQb2ludGVyKCd5Jyk7XG52YXIgY3JlYXRlUG9pbnRlciA9IGZ1bmN0aW9uIChheGlzUG9pbnRlckNyZWF0b3IsIG1pbiwgbWF4LCBtZWFzdXJlbWVudCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodHJhbnNpdGlvblByb3BzKSB7XG4gICAgICAgIHZhciBmcm9tID0gdHJhbnNpdGlvblByb3BzLmZyb20sXG4gICAgICAgICAgICB0eXBlID0gdHJhbnNpdGlvblByb3BzLnR5cGUsXG4gICAgICAgICAgICBkaW1lbnNpb25zID0gdHJhbnNpdGlvblByb3BzLmRpbWVuc2lvbnMsXG4gICAgICAgICAgICBkcmFnQm91bmRzID0gdHJhbnNpdGlvblByb3BzLmRyYWdCb3VuZHM7XG4gICAgICAgIHZhciBheGlzUG9pbnRlciA9IGF4aXNQb2ludGVyQ3JlYXRvcihkaW1lbnNpb25zLm1lYXN1cmVtZW50QXNQaXhlbHMobWVhc3VyZW1lbnQsIGZyb20sIHR5cGUpKTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybVF1ZXVlID0gW107XG4gICAgICAgIGlmIChkcmFnQm91bmRzKSB7XG4gICAgICAgICAgICB2YXIgcmVzb2x2ZWREcmFnQm91bmRzXzEgPSByZXNvbHZlUHJvcChkcmFnQm91bmRzLCB0cmFuc2l0aW9uUHJvcHMpO1xuICAgICAgICAgICAgaWYgKHJlc29sdmVkRHJhZ0JvdW5kc18xW21pbl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybVF1ZXVlLnB1c2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KHYsIGRpbWVuc2lvbnMubWVhc3VyZW1lbnRBc1BpeGVscyhtZWFzdXJlbWVudCwgcmVzb2x2ZWREcmFnQm91bmRzXzFbbWluXSwgdHlwZSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc29sdmVkRHJhZ0JvdW5kc18xW21heF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybVF1ZXVlLnB1c2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKHYsIGRpbWVuc2lvbnMubWVhc3VyZW1lbnRBc1BpeGVscyhtZWFzdXJlbWVudCwgcmVzb2x2ZWREcmFnQm91bmRzXzFbbWF4XSwgdHlwZSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSBwZXJjZW50KSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm1RdWV1ZS5wdXNoKGludGVycG9sYXRlKFswLCBkaW1lbnNpb25zLmdldChtZWFzdXJlbWVudCldLCBbMCwgMTAwXSwgeyBjbGFtcDogZmFsc2UgfSksIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHYgKyAnJSc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtUXVldWUubGVuZ3RoID8gYXhpc1BvaW50ZXIucGlwZS5hcHBseShheGlzUG9pbnRlciwgdHJhbnNmb3JtUXVldWUpIDogYXhpc1BvaW50ZXI7XG4gICAgfTtcbn07XG52YXIganVzdCA9IGZ1bmN0aW9uIChmcm9tKSB7XG4gICAgcmV0dXJuIGFjdGlvbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHVwZGF0ZSA9IF9hLnVwZGF0ZSxcbiAgICAgICAgICAgIGNvbXBsZXRlID0gX2EuY29tcGxldGU7XG4gICAgICAgIHVwZGF0ZShmcm9tKTtcbiAgICAgICAgY29tcGxldGUoKTtcbiAgICB9KTtcbn07XG52YXIgdW5kZXJEYW1wZWRTcHJpbmcgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgZnJvbSA9IF9hLmZyb20sXG4gICAgICAgIHZlbG9jaXR5ID0gX2EudmVsb2NpdHksXG4gICAgICAgIHRvID0gX2EudG87XG4gICAgcmV0dXJuIHNwcmluZyh7XG4gICAgICAgIGZyb206IGZyb20sXG4gICAgICAgIHRvOiB0byxcbiAgICAgICAgdmVsb2NpdHk6IHZlbG9jaXR5LFxuICAgICAgICBzdGlmZm5lc3M6IDUwMCxcbiAgICAgICAgZGFtcGluZzogMjUsXG4gICAgICAgIHJlc3REZWx0YTogMC41LFxuICAgICAgICByZXN0U3BlZWQ6IDEwXG4gICAgfSk7XG59O1xudmFyIG92ZXJEYW1wZWRTcHJpbmcgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgZnJvbSA9IF9hLmZyb20sXG4gICAgICAgIHZlbG9jaXR5ID0gX2EudmVsb2NpdHksXG4gICAgICAgIHRvID0gX2EudG87XG4gICAgcmV0dXJuIHNwcmluZyh7IGZyb206IGZyb20sIHRvOiB0bywgdmVsb2NpdHk6IHZlbG9jaXR5LCBzdGlmZm5lc3M6IDcwMCwgZGFtcGluZzogdG8gPT09IDAgPyAxMDAgOiAzNSB9KTtcbn07XG52YXIgbGluZWFyVHdlZW4gPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgZnJvbSA9IF9hLmZyb20sXG4gICAgICAgIHRvID0gX2EudG87XG4gICAgcmV0dXJuIHR3ZWVuKHsgZnJvbTogZnJvbSwgdG86IHRvLCBlYXNlOiBsaW5lYXIgfSk7XG59O1xudmFyIGludGVsbGlnZW50VHJhbnNpdGlvbiA9IHtcbiAgICB4OiB1bmRlckRhbXBlZFNwcmluZyxcbiAgICB5OiB1bmRlckRhbXBlZFNwcmluZyxcbiAgICB6OiB1bmRlckRhbXBlZFNwcmluZyxcbiAgICByb3RhdGU6IHVuZGVyRGFtcGVkU3ByaW5nLFxuICAgIHJvdGF0ZVg6IHVuZGVyRGFtcGVkU3ByaW5nLFxuICAgIHJvdGF0ZVk6IHVuZGVyRGFtcGVkU3ByaW5nLFxuICAgIHJvdGF0ZVo6IHVuZGVyRGFtcGVkU3ByaW5nLFxuICAgIHNjYWxlWDogb3ZlckRhbXBlZFNwcmluZyxcbiAgICBzY2FsZVk6IG92ZXJEYW1wZWRTcHJpbmcsXG4gICAgc2NhbGU6IG92ZXJEYW1wZWRTcHJpbmcsXG4gICAgb3BhY2l0eTogbGluZWFyVHdlZW4sXG4gICAgZGVmYXVsdDogdHdlZW5cbn07XG52YXIgZHJhZ0FjdGlvbiA9IC8qI19fUFVSRV9fKi9fX2Fzc2lnbih7fSwgaW50ZWxsaWdlbnRUcmFuc2l0aW9uLCB7IHg6IC8qI19fUFVSRV9fKi9jcmVhdGVQb2ludGVyKHBvaW50ZXJYLCAnbGVmdCcsICdyaWdodCcsIEJvdW5kaW5nQm94RGltZW5zaW9uLndpZHRoKSwgeTogLyojX19QVVJFX18qL2NyZWF0ZVBvaW50ZXIocG9pbnRlclksICd0b3AnLCAnYm90dG9tJywgQm91bmRpbmdCb3hEaW1lbnNpb24uaGVpZ2h0KSB9KTtcbnZhciBqdXN0QXhpcyA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBmcm9tID0gX2EuZnJvbTtcbiAgICByZXR1cm4ganVzdChmcm9tKTtcbn07XG52YXIgaW50ZWxsaWdlbnREcmFnRW5kID0gLyojX19QVVJFX18qL19fYXNzaWduKHt9LCBpbnRlbGxpZ2VudFRyYW5zaXRpb24sIHsgeDoganVzdEF4aXMsIHk6IGp1c3RBeGlzIH0pO1xudmFyIGRlZmF1bHRUcmFuc2l0aW9ucyA9IC8qI19fUFVSRV9fKi9uZXcgTWFwKFtbJ2RlZmF1bHQnLCBpbnRlbGxpZ2VudFRyYW5zaXRpb25dLCBbJ2RyYWcnLCBkcmFnQWN0aW9uXSwgWydkcmFnRW5kJywgaW50ZWxsaWdlbnREcmFnRW5kXV0pO1xuXG52YXIgYW5pbWF0aW9uTG9va3VwID0ge1xuICAgIHR3ZWVuOiB0d2VlbixcbiAgICBzcHJpbmc6IHNwcmluZyxcbiAgICBkZWNheTogZGVjYXksXG4gICAga2V5ZnJhbWVzOiBrZXlmcmFtZXMsXG4gICAgcGh5c2ljczogcGh5c2ljc1xufTtcbnZhciBlYXNpbmdMb29rdXAgPSB7XG4gICAgbGluZWFyOiBsaW5lYXIsXG4gICAgZWFzZUluOiBlYXNlSW4sXG4gICAgZWFzZU91dDogZWFzZU91dCxcbiAgICBlYXNlSW5PdXQ6IGVhc2VJbk91dCxcbiAgICBjaXJjSW46IGNpcmNJbixcbiAgICBjaXJjT3V0OiBjaXJjT3V0LFxuICAgIGNpcmNJbk91dDogY2lyY0luT3V0LFxuICAgIGJhY2tJbjogYmFja0luLFxuICAgIGJhY2tPdXQ6IGJhY2tPdXQsXG4gICAgYmFja0luT3V0OiBiYWNrSW5PdXQsXG4gICAgYW50aWNpcGF0ZTogYW50aWNpcGF0ZVxufTtcblxudmFyIGF1dG8gPSB7XG4gICAgdGVzdDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIHYgPT09ICdhdXRvJztcbiAgICB9LFxuICAgIHBhcnNlOiBmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gdjtcbiAgICB9XG59O1xudmFyIHZhbHVlVHlwZVRlc3RzID0gW251bWJlciwgZGVncmVlcywgcGVyY2VudCwgcHgsIHZ3LCB2aCwgYXV0b107XG52YXIgdGVzdFZhbHVlVHlwZSA9IGZ1bmN0aW9uICh2KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgIHJldHVybiB0eXBlLnRlc3Qodik7XG4gICAgfTtcbn07XG52YXIgZ2V0VmFsdWVUeXBlID0gZnVuY3Rpb24gKHYpIHtcbiAgICByZXR1cm4gdmFsdWVUeXBlVGVzdHMuZmluZCh0ZXN0VmFsdWVUeXBlKHYpKTtcbn07XG5cbnZhciBjcmVhdGVQYXNzaXZlVmFsdWUgPSBmdW5jdGlvbiAoaW5pdCwgcGFyZW50LCB0cmFuc2Zvcm0kJDEpIHtcbiAgICB2YXIgcmF3ID0gdmFsdWUodHJhbnNmb3JtJCQxKGluaXQpKTtcbiAgICBwYXJlbnQucmF3LnN1YnNjcmliZShmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gcmF3LnVwZGF0ZSh0cmFuc2Zvcm0kJDEodikpO1xuICAgIH0pO1xuICAgIHJldHVybiB7IHJhdzogcmF3IH07XG59O1xudmFyIGNyZWF0ZVZhbHVlID0gZnVuY3Rpb24gKGluaXQpIHtcbiAgICB2YXIgdHlwZSA9IGdldFZhbHVlVHlwZShpbml0KTtcbiAgICB2YXIgcmF3ID0gdmFsdWUoaW5pdCk7XG4gICAgcmV0dXJuIHsgcmF3OiByYXcsIHR5cGU6IHR5cGUgfTtcbn07XG52YXIgYWRkQWN0aW9uRGVsYXkgPSBmdW5jdGlvbiAoZGVsYXkkJDEsIHRyYW5zaXRpb24pIHtcbiAgICBpZiAoZGVsYXkkJDEgPT09IHZvaWQgMCkge1xuICAgICAgICBkZWxheSQkMSA9IDA7XG4gICAgfVxuICAgIHJldHVybiBjaGFpbihkZWxheShkZWxheSQkMSksIHRyYW5zaXRpb24pO1xufTtcbnZhciBpc0N1YmljQmV6aWVyQXJncyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBhcmdzWzBdID09PSAnbnVtYmVyJztcbn07XG52YXIgZ2V0QWN0aW9uID0gZnVuY3Rpb24gKHYsIF9hLCBfYikge1xuICAgIHZhciBmcm9tID0gX2IuZnJvbSxcbiAgICAgICAgdG8gPSBfYi50byxcbiAgICAgICAgdmVsb2NpdHkgPSBfYi52ZWxvY2l0eTtcbiAgICB2YXIgX2MgPSBfYS50eXBlLFxuICAgICAgICB0eXBlID0gX2MgPT09IHZvaWQgMCA/ICd0d2VlbicgOiBfYyxcbiAgICAgICAgZGVmaW5lZEVhc2UgPSBfYS5lYXNlLFxuICAgICAgICBkZWYgPSBfX3Jlc3QoX2EsIFtcInR5cGVcIiwgXCJlYXNlXCJdKTtcbiAgICBpbnZhcmlhbnQoYW5pbWF0aW9uTG9va3VwW3R5cGVdICE9PSB1bmRlZmluZWQsIFwiSW52YWxpZCB0cmFuc2l0aW9uIHR5cGUgJ1wiICsgdHlwZSArIFwiJy4gVmFsaWQgdHJhbnNpdGlvbiB0eXBlcyBhcmU6IHR3ZWVuLCBzcHJpbmcsIGRlY2F5LCBwaHlzaWNzIGFuZCBrZXlmcmFtZXMuXCIpO1xuICAgIHZhciBlYXNlO1xuICAgIGlmICh0eXBlID09PSAndHdlZW4nKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZGVmaW5lZEVhc2UgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGVmaW5lZEVhc2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgaW52YXJpYW50KGVhc2luZ0xvb2t1cFtkZWZpbmVkRWFzZV0gIT09IHVuZGVmaW5lZCwgXCJJbnZhbGlkIGVhc2luZyB0eXBlICdcIiArIGRlZmluZWRFYXNlICsgXCInLiBwb3Btb3Rpb24uaW8vcG9zZS9hcGkvY29uZmlnXCIpO1xuICAgICAgICAgICAgICAgIGVhc2UgPSBlYXNpbmdMb29rdXBbZGVmaW5lZEVhc2VdO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGRlZmluZWRFYXNlKSAmJiBpc0N1YmljQmV6aWVyQXJncyhkZWZpbmVkRWFzZSkpIHtcbiAgICAgICAgICAgICAgICBpbnZhcmlhbnQoZGVmaW5lZEVhc2UubGVuZ3RoID09PSA0LCBcIkN1YmljIGJlemllciBhcnJheXMgbXVzdCBjb250YWluIGZvdXIgbnVtZXJpY2FsIHZhbHVlcy5cIik7XG4gICAgICAgICAgICAgICAgdmFyIHgxID0gZGVmaW5lZEVhc2VbMF0sXG4gICAgICAgICAgICAgICAgICAgIHkxID0gZGVmaW5lZEVhc2VbMV0sXG4gICAgICAgICAgICAgICAgICAgIHgyID0gZGVmaW5lZEVhc2VbMl0sXG4gICAgICAgICAgICAgICAgICAgIHkyID0gZGVmaW5lZEVhc2VbM107XG4gICAgICAgICAgICAgICAgZWFzZSA9IGN1YmljQmV6aWVyKHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlYXNlID0gZWFzZSB8fCBkZWZpbmVkRWFzZTtcbiAgICB2YXIgYmFzZVByb3BzID0gdHlwZSAhPT0gJ2tleWZyYW1lcycgPyB7XG4gICAgICAgIGZyb206IGZyb20sXG4gICAgICAgIHRvOiB0byxcbiAgICAgICAgdmVsb2NpdHk6IHZlbG9jaXR5LFxuICAgICAgICBlYXNlOiBlYXNlXG4gICAgfSA6IHsgZWFzZTogZWFzZSB9O1xuICAgIHJldHVybiBhbmltYXRpb25Mb29rdXBbdHlwZV0oX19hc3NpZ24oe30sIGJhc2VQcm9wcywgZGVmKSk7XG59O1xudmFyIGlzQWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbiQkMSkge1xuICAgIHJldHVybiB0eXBlb2YgYWN0aW9uJCQxLnN0YXJ0ICE9PSAndW5kZWZpbmVkJztcbn07XG52YXIgcG9zZSA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciB0cmFuc2Zvcm1Qb3NlID0gX2EudHJhbnNmb3JtUG9zZSxcbiAgICAgICAgYWRkTGlzdGVuZXJUb1ZhbHVlID0gX2EuYWRkTGlzdGVuZXJUb1ZhbHVlLFxuICAgICAgICBleHRlbmRBUEkgPSBfYS5leHRlbmRBUEksXG4gICAgICAgIHJlYWRWYWx1ZUZyb21Tb3VyY2UgPSBfYS5yZWFkVmFsdWVGcm9tU291cmNlLFxuICAgICAgICBwb3NlUHJpb3JpdHkgPSBfYS5wb3NlUHJpb3JpdHksXG4gICAgICAgIHNldFZhbHVlTmF0aXZlID0gX2Euc2V0VmFsdWVOYXRpdmU7XG4gICAgcmV0dXJuIHBvc2VGYWN0b3J5KHtcbiAgICAgICAgYmluZE9uQ2hhbmdlOiBmdW5jdGlvbiAodmFsdWVzLCBvbkNoYW5nZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlcy5oYXMoa2V5KSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHZhciByYXcgPSB2YWx1ZXMuZ2V0KGtleSkucmF3O1xuICAgICAgICAgICAgICAgIHJhdy5zdWJzY3JpYmUob25DaGFuZ2Vba2V5XSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICByZWFkVmFsdWU6IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHJhdyA9IF9hLnJhdztcbiAgICAgICAgICAgIHJldHVybiByYXcuZ2V0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFZhbHVlOiBmdW5jdGlvbiAoX2EsIHRvKSB7XG4gICAgICAgICAgICB2YXIgcmF3ID0gX2EucmF3O1xuICAgICAgICAgICAgcmV0dXJuIHJhdy51cGRhdGUodG8pO1xuICAgICAgICB9LFxuICAgICAgICBjcmVhdGVWYWx1ZTogZnVuY3Rpb24gKGluaXQsIGtleSwgX2EsIF9iKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudFN0eWxlciA9IF9hLmVsZW1lbnRTdHlsZXI7XG4gICAgICAgICAgICB2YXIgX2MgPSBfYiA9PT0gdm9pZCAwID8ge30gOiBfYixcbiAgICAgICAgICAgICAgICBwYXNzaXZlUGFyZW50ID0gX2MucGFzc2l2ZVBhcmVudCxcbiAgICAgICAgICAgICAgICBwYXNzaXZlUHJvcHMgPSBfYy5wYXNzaXZlUHJvcHM7XG4gICAgICAgICAgICB2YXIgdmFsID0gcGFzc2l2ZVBhcmVudCA/IGNyZWF0ZVBhc3NpdmVWYWx1ZShpbml0LCBwYXNzaXZlUGFyZW50LCBwYXNzaXZlUHJvcHMpIDogY3JlYXRlVmFsdWUoaW5pdCk7XG4gICAgICAgICAgICB2YWwucmF3LnN1YnNjcmliZShhZGRMaXN0ZW5lclRvVmFsdWUoa2V5LCBlbGVtZW50U3R5bGVyKSk7XG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9LFxuICAgICAgICBjb252ZXJ0VmFsdWU6IGZ1bmN0aW9uIChyYXcsIGtleSwgX2EpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50U3R5bGVyID0gX2EuZWxlbWVudFN0eWxlcjtcbiAgICAgICAgICAgIHJhdy5zdWJzY3JpYmUoYWRkTGlzdGVuZXJUb1ZhbHVlKGtleSwgZWxlbWVudFN0eWxlcikpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByYXc6IHJhdyxcbiAgICAgICAgICAgICAgICB0eXBlOiBnZXRWYWx1ZVR5cGUocmF3LmdldCgpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0VHJhbnNpdGlvblByb3BzOiBmdW5jdGlvbiAoX2EsIHRvKSB7XG4gICAgICAgICAgICB2YXIgcmF3ID0gX2EucmF3LFxuICAgICAgICAgICAgICAgIHR5cGUgPSBfYS50eXBlO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmcm9tOiByYXcuZ2V0KCksXG4gICAgICAgICAgICAgICAgdmVsb2NpdHk6IHJhdy5nZXRWZWxvY2l0eSgpLFxuICAgICAgICAgICAgICAgIHRvOiB0byxcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlVGFyZ2V0OiBmdW5jdGlvbiAoXywgdG8pIHtcbiAgICAgICAgICAgIHJldHVybiB0bztcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0VmFsdWVUb1JlYWQ6IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHJhdyA9IF9hLnJhdztcbiAgICAgICAgICAgIHJldHVybiByYXc7XG4gICAgICAgIH0sXG4gICAgICAgIHN0YXJ0QWN0aW9uOiBmdW5jdGlvbiAoX2EsIGFjdGlvbiQkMSwgY29tcGxldGUpIHtcbiAgICAgICAgICAgIHZhciByYXcgPSBfYS5yYXc7XG4gICAgICAgICAgICB2YXIgcmVhY3Rpb24gPSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmF3LnVwZGF0ZSh2KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBjb21wbGV0ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBhY3Rpb24kJDEuc3RhcnQocmVhY3Rpb24pO1xuICAgICAgICB9LFxuICAgICAgICBzdG9wQWN0aW9uOiBmdW5jdGlvbiAoYWN0aW9uJCQxKSB7XG4gICAgICAgICAgICByZXR1cm4gYWN0aW9uJCQxLnN0b3AoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0SW5zdGFudFRyYW5zaXRpb246IGZ1bmN0aW9uIChfLCBfYSkge1xuICAgICAgICAgICAgdmFyIHRvID0gX2EudG87XG4gICAgICAgICAgICByZXR1cm4ganVzdCh0byk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbnZlcnRUcmFuc2l0aW9uRGVmaW5pdGlvbjogZnVuY3Rpb24gKHZhbCwgZGVmLCBwcm9wcykge1xuICAgICAgICAgICAgaWYgKGlzQWN0aW9uKGRlZikpIHJldHVybiBkZWY7XG4gICAgICAgICAgICB2YXIgZGVsYXkkJDEgPSBkZWYuZGVsYXksXG4gICAgICAgICAgICAgICAgbWluID0gZGVmLm1pbixcbiAgICAgICAgICAgICAgICBtYXggPSBkZWYubWF4LFxuICAgICAgICAgICAgICAgIHJvdW5kID0gZGVmLnJvdW5kLFxuICAgICAgICAgICAgICAgIHJlbWFpbmluZ0RlZiA9IF9fcmVzdChkZWYsIFtcImRlbGF5XCIsIFwibWluXCIsIFwibWF4XCIsIFwicm91bmRcIl0pO1xuICAgICAgICAgICAgdmFyIGFjdGlvbiQkMSA9IGdldEFjdGlvbih2YWwsIHJlbWFpbmluZ0RlZiwgcHJvcHMpO1xuICAgICAgICAgICAgdmFyIG91dHB1dFBpcGUgPSBbXTtcbiAgICAgICAgICAgIGlmIChkZWxheSQkMSkgYWN0aW9uJCQxID0gYWRkQWN0aW9uRGVsYXkoZGVsYXkkJDEsIGFjdGlvbiQkMSk7XG4gICAgICAgICAgICBpZiAobWluICE9PSB1bmRlZmluZWQpIG91dHB1dFBpcGUucHVzaChmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCh2LCBtaW4pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAobWF4ICE9PSB1bmRlZmluZWQpIG91dHB1dFBpcGUucHVzaChmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbih2LCBtYXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocm91bmQpIG91dHB1dFBpcGUucHVzaChNYXRoLnJvdW5kKTtcbiAgICAgICAgICAgIHJldHVybiBvdXRwdXRQaXBlLmxlbmd0aCA/IGFjdGlvbiQkMS5waXBlLmFwcGx5KGFjdGlvbiQkMSwgb3V0cHV0UGlwZSkgOiBhY3Rpb24kJDE7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFZhbHVlTmF0aXZlOiBzZXRWYWx1ZU5hdGl2ZSxcbiAgICAgICAgYWRkQWN0aW9uRGVsYXk6IGFkZEFjdGlvbkRlbGF5LFxuICAgICAgICBkZWZhdWx0VHJhbnNpdGlvbnM6IGRlZmF1bHRUcmFuc2l0aW9ucyxcbiAgICAgICAgdHJhbnNmb3JtUG9zZTogdHJhbnNmb3JtUG9zZSxcbiAgICAgICAgcmVhZFZhbHVlRnJvbVNvdXJjZTogcmVhZFZhbHVlRnJvbVNvdXJjZSxcbiAgICAgICAgcG9zZVByaW9yaXR5OiBwb3NlUHJpb3JpdHksXG4gICAgICAgIGV4dGVuZEFQSTogZXh0ZW5kQVBJXG4gICAgfSk7XG59O1xuXG52YXIgY3JlYXRlRGltZW5zaW9ucyA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgdmFyIGhhc01lYXN1cmVkID0gZmFsc2U7XG4gICAgdmFyIGN1cnJlbnQgPSB7XG4gICAgICAgIHdpZHRoOiAwLFxuICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICByaWdodDogMFxuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAobWVhc3VyZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBtZWFzdXJlbWVudCA/IGN1cnJlbnRbbWVhc3VyZW1lbnRdIDogY3VycmVudDtcbiAgICAgICAgfSxcbiAgICAgICAgbWVhc3VyZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY3VycmVudCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBoYXNNZWFzdXJlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgICAgfSxcbiAgICAgICAgbWVhc3VyZW1lbnRBc1BpeGVsczogZnVuY3Rpb24gKG1lYXN1cmVtZW50LCB2YWx1ZSQkMSwgdHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGUgPT09IHBlcmNlbnQgPyAodHlwZW9mIHZhbHVlJCQxID09PSAnc3RyaW5nJyA/IHBhcnNlRmxvYXQodmFsdWUkJDEpIDogdmFsdWUkJDEpIC8gMTAwICogY3VycmVudFttZWFzdXJlbWVudF0gOiB2YWx1ZSQkMTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gaGFzTWVhc3VyZWQ7XG4gICAgICAgIH1cbiAgICB9O1xufTtcblxudmFyIG1ha2VVSUV2ZW50QXBwbGljYXRvciA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBzdGFydEV2ZW50cyA9IF9hLnN0YXJ0RXZlbnRzLFxuICAgICAgICBlbmRFdmVudHMgPSBfYS5lbmRFdmVudHMsXG4gICAgICAgIHN0YXJ0UG9zZSA9IF9hLnN0YXJ0UG9zZSxcbiAgICAgICAgZW5kUG9zZSA9IF9hLmVuZFBvc2UsXG4gICAgICAgIHN0YXJ0Q2FsbGJhY2sgPSBfYS5zdGFydENhbGxiYWNrLFxuICAgICAgICBlbmRDYWxsYmFjayA9IF9hLmVuZENhbGxiYWNrLFxuICAgICAgICB1c2VEb2N1bWVudFRvRW5kID0gX2EudXNlRG9jdW1lbnRUb0VuZCxcbiAgICAgICAgcHJldmVudFNjcm9sbCA9IF9hLnByZXZlbnRTY3JvbGw7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlbGVtZW50LCBhY3RpdmVBY3Rpb25zLCBwb3NlciwgY29uZmlnKSB7XG4gICAgICAgIHZhciBzdGFydExpc3RlbmVyID0gc3RhcnRQb3NlICsgJ1N0YXJ0JztcbiAgICAgICAgdmFyIGVuZExpc3RlbmVyID0gc3RhcnRQb3NlICsgJ0VuZCc7XG4gICAgICAgIHZhciBtb3ZlTGlzdGVuZXIgPSBzdGFydFBvc2UgKyAnTW92ZSc7XG4gICAgICAgIGlmIChwcmV2ZW50U2Nyb2xsKSB7XG4gICAgICAgICAgICB2YXIgdG91Y2hNb3ZlTGlzdGVuZXIgPSBsaXN0ZW4oZWxlbWVudCwgJ3RvdWNobW92ZScsIHtcbiAgICAgICAgICAgICAgICBwYXNzaXZlOiBmYWxzZVxuICAgICAgICAgICAgfSkuc3RhcnQoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFjdGl2ZUFjdGlvbnMuc2V0KG1vdmVMaXN0ZW5lciwgdG91Y2hNb3ZlTGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBldmVudFN0YXJ0TGlzdGVuZXIgPSBsaXN0ZW4oZWxlbWVudCwgc3RhcnRFdmVudHMpLnN0YXJ0KGZ1bmN0aW9uIChzdGFydEV2ZW50KSB7XG4gICAgICAgICAgICBwb3Nlci51bnNldChlbmRQb3NlKTtcbiAgICAgICAgICAgIHBvc2VyLnNldChzdGFydFBvc2UpO1xuICAgICAgICAgICAgaWYgKHN0YXJ0Q2FsbGJhY2sgJiYgY29uZmlnW3N0YXJ0Q2FsbGJhY2tdKSBjb25maWdbc3RhcnRDYWxsYmFja10oc3RhcnRFdmVudCk7XG4gICAgICAgICAgICB2YXIgZXZlbnRFbmRMaXN0ZW5lciA9IGxpc3Rlbih1c2VEb2N1bWVudFRvRW5kID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IDogZWxlbWVudCwgZW5kRXZlbnRzICsgKHVzZURvY3VtZW50VG9FbmQgPyAnIG1vdXNlZW50ZXInIDogJycpKS5zdGFydChmdW5jdGlvbiAoZW5kRXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAodXNlRG9jdW1lbnRUb0VuZCAmJiBlbmRFdmVudC50eXBlID09PSAnbW91c2VlbnRlcicgJiYgZW5kRXZlbnQuYnV0dG9ucyA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFjdGl2ZUFjdGlvbnMuZ2V0KGVuZExpc3RlbmVyKS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgcG9zZXIudW5zZXQoc3RhcnRQb3NlKTtcbiAgICAgICAgICAgICAgICBwb3Nlci5zZXQoZW5kUG9zZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVuZENhbGxiYWNrICYmIGNvbmZpZ1tlbmRDYWxsYmFja10pIGNvbmZpZ1tlbmRDYWxsYmFja10oZW5kRXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhY3RpdmVBY3Rpb25zLnNldChlbmRMaXN0ZW5lciwgZXZlbnRFbmRMaXN0ZW5lcik7XG4gICAgICAgIH0pO1xuICAgICAgICBhY3RpdmVBY3Rpb25zLnNldChzdGFydExpc3RlbmVyLCBldmVudFN0YXJ0TGlzdGVuZXIpO1xuICAgIH07XG59O1xudmFyIGV2ZW50cyA9IHtcbiAgICBkcmFnZ2FibGU6IC8qI19fUFVSRV9fKi9tYWtlVUlFdmVudEFwcGxpY2F0b3Ioe1xuICAgICAgICBzdGFydEV2ZW50czogJ21vdXNlZG93biB0b3VjaHN0YXJ0JyxcbiAgICAgICAgZW5kRXZlbnRzOiAnbW91c2V1cCB0b3VjaGVuZCcsXG4gICAgICAgIHN0YXJ0UG9zZTogJ2RyYWcnLFxuICAgICAgICBlbmRQb3NlOiAnZHJhZ0VuZCcsXG4gICAgICAgIHN0YXJ0Q2FsbGJhY2s6ICdvbkRyYWdTdGFydCcsXG4gICAgICAgIGVuZENhbGxiYWNrOiAnb25EcmFnRW5kJyxcbiAgICAgICAgdXNlRG9jdW1lbnRUb0VuZDogdHJ1ZSxcbiAgICAgICAgcHJldmVudFNjcm9sbDogdHJ1ZVxuICAgIH0pLFxuICAgIGhvdmVyYWJsZTogLyojX19QVVJFX18qL21ha2VVSUV2ZW50QXBwbGljYXRvcih7XG4gICAgICAgIHN0YXJ0RXZlbnRzOiAnbW91c2VlbnRlcicsXG4gICAgICAgIGVuZEV2ZW50czogJ21vdXNlbGVhdmUnLFxuICAgICAgICBzdGFydFBvc2U6ICdob3ZlcicsXG4gICAgICAgIGVuZFBvc2U6ICdob3ZlckVuZCdcbiAgICB9KSxcbiAgICBmb2N1c2FibGU6IC8qI19fUFVSRV9fKi9tYWtlVUlFdmVudEFwcGxpY2F0b3Ioe1xuICAgICAgICBzdGFydEV2ZW50czogJ2ZvY3VzJyxcbiAgICAgICAgZW5kRXZlbnRzOiAnYmx1cicsXG4gICAgICAgIHN0YXJ0UG9zZTogJ2ZvY3VzJyxcbiAgICAgICAgZW5kUG9zZTogJ2JsdXInXG4gICAgfSksXG4gICAgcHJlc3NhYmxlOiAvKiNfX1BVUkVfXyovbWFrZVVJRXZlbnRBcHBsaWNhdG9yKHtcbiAgICAgICAgc3RhcnRFdmVudHM6ICdtb3VzZWRvd24gdG91Y2hzdGFydCcsXG4gICAgICAgIGVuZEV2ZW50czogJ21vdXNldXAgdG91Y2hlbmQnLFxuICAgICAgICBzdGFydFBvc2U6ICdwcmVzcycsXG4gICAgICAgIGVuZFBvc2U6ICdwcmVzc0VuZCcsXG4gICAgICAgIHN0YXJ0Q2FsbGJhY2s6ICdvblByZXNzU3RhcnQnLFxuICAgICAgICBlbmRDYWxsYmFjazogJ29uUHJlc3NFbmQnLFxuICAgICAgICB1c2VEb2N1bWVudFRvRW5kOiB0cnVlXG4gICAgfSlcbn07XG52YXIgZXZlbnRLZXlzID0gLyojX19QVVJFX18qL09iamVjdC5rZXlzKGV2ZW50cyk7XG52YXIgYXBwZW5kRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoZWxlbWVudCwgYWN0aXZlQWN0aW9ucywgcG9zZXIsIF9hKSB7XG4gICAgdmFyIHByb3BzID0gX2EucHJvcHM7XG4gICAgcmV0dXJuIGV2ZW50S2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKHByb3BzW2tleV0pIGV2ZW50c1trZXldKGVsZW1lbnQsIGFjdGl2ZUFjdGlvbnMsIHBvc2VyLCBwcm9wcyk7XG4gICAgfSk7XG59O1xuXG52YXIgT1JJR0lOX1NUQVJUID0gMDtcbnZhciBPUklHSU5fQ0VOVEVSID0gJzUwJSc7XG52YXIgT1JJR0lOX0VORCA9ICcxMDAlJztcbnZhciBmaW5kQ2VudGVyID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIHRvcCA9IF9hLnRvcCxcbiAgICAgICAgcmlnaHQgPSBfYS5yaWdodCxcbiAgICAgICAgYm90dG9tID0gX2EuYm90dG9tLFxuICAgICAgICBsZWZ0ID0gX2EubGVmdDtcbiAgICByZXR1cm4ge1xuICAgICAgICB4OiAobGVmdCArIHJpZ2h0KSAvIDIsXG4gICAgICAgIHk6ICh0b3AgKyBib3R0b20pIC8gMlxuICAgIH07XG59O1xudmFyIHBvc2l0aW9uYWxQcm9wcyA9IFsnd2lkdGgnLCAnaGVpZ2h0JywgJ3RvcCcsICdsZWZ0JywgJ2JvdHRvbScsICdyaWdodCddO1xudmFyIHBvc2l0aW9uYWxQcm9wc0RpY3QgPSAvKiNfX1BVUkVfXyovbmV3IFNldChwb3NpdGlvbmFsUHJvcHMpO1xudmFyIGNoZWNrUG9zaXRpb25hbFByb3AgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHBvc2l0aW9uYWxQcm9wc0RpY3QuaGFzKGtleSk7XG59O1xudmFyIGhhc1Bvc2l0aW9uYWxQcm9wcyA9IGZ1bmN0aW9uIChwb3NlKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHBvc2UpLnNvbWUoY2hlY2tQb3NpdGlvbmFsUHJvcCk7XG59O1xudmFyIGlzRmxpcFBvc2UgPSBmdW5jdGlvbiAoZmxpcCwga2V5LCBzdGF0ZSkge1xuICAgIHJldHVybiBzdGF0ZS5wcm9wcy5lbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgKGZsaXAgPT09IHRydWUgfHwga2V5ID09PSAnZmxpcCcpO1xufTtcbnZhciBzZXRWYWx1ZSA9IGZ1bmN0aW9uIChfYSwga2V5LCB0bykge1xuICAgIHZhciB2YWx1ZXMgPSBfYS52YWx1ZXMsXG4gICAgICAgIHByb3BzID0gX2EucHJvcHM7XG4gICAgaWYgKHZhbHVlcy5oYXMoa2V5KSkge1xuICAgICAgICB2YXIgcmF3ID0gdmFsdWVzLmdldChrZXkpLnJhdztcbiAgICAgICAgcmF3LnVwZGF0ZSh0byk7XG4gICAgICAgIHJhdy51cGRhdGUodG8pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlcy5zZXQoa2V5LCB7XG4gICAgICAgICAgICByYXc6IHZhbHVlKHRvLCBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wcy5lbGVtZW50U3R5bGVyLnNldChrZXksIHYpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgfVxufTtcbnZhciBleHBsaWNpdGx5RmxpcFBvc2UgPSBmdW5jdGlvbiAoc3RhdGUsIG5leHRQb3NlKSB7XG4gICAgdmFyIF9hID0gc3RhdGUucHJvcHMsXG4gICAgICAgIGRpbWVuc2lvbnMgPSBfYS5kaW1lbnNpb25zLFxuICAgICAgICBlbGVtZW50U3R5bGVyID0gX2EuZWxlbWVudFN0eWxlcjtcbiAgICBkaW1lbnNpb25zLm1lYXN1cmUoKTtcbiAgICB2YXIgd2lkdGggPSBuZXh0UG9zZS53aWR0aCxcbiAgICAgICAgaGVpZ2h0ID0gbmV4dFBvc2UuaGVpZ2h0LFxuICAgICAgICB0b3AgPSBuZXh0UG9zZS50b3AsXG4gICAgICAgIGxlZnQgPSBuZXh0UG9zZS5sZWZ0LFxuICAgICAgICBib3R0b20gPSBuZXh0UG9zZS5ib3R0b20sXG4gICAgICAgIHJpZ2h0ID0gbmV4dFBvc2UucmlnaHQsXG4gICAgICAgIHBvc2l0aW9uID0gbmV4dFBvc2UucG9zaXRpb24sXG4gICAgICAgIHJlbWFpbmluZ1Bvc2UgPSBfX3Jlc3QobmV4dFBvc2UsIFtcIndpZHRoXCIsIFwiaGVpZ2h0XCIsIFwidG9wXCIsIFwibGVmdFwiLCBcImJvdHRvbVwiLCBcInJpZ2h0XCIsIFwicG9zaXRpb25cIl0pO1xuICAgIHZhciBwcm9wc1RvU2V0ID0gcG9zaXRpb25hbFByb3BzLmNvbmNhdCgncG9zaXRpb24nKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7XG4gICAgICAgIGlmIChuZXh0UG9zZVtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGFjY1trZXldID0gcmVzb2x2ZVByb3AobmV4dFBvc2Vba2V5XSwgc3RhdGUucHJvcHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuICAgIGVsZW1lbnRTdHlsZXIuc2V0KHByb3BzVG9TZXQpLnJlbmRlcigpO1xuICAgIHJldHVybiBpbXBsaWNpdGx5RmxpcFBvc2Uoc3RhdGUsIHJlbWFpbmluZ1Bvc2UpO1xufTtcbnZhciBpbXBsaWNpdGx5RmxpcFBvc2UgPSBmdW5jdGlvbiAoc3RhdGUsIG5leHRQb3NlKSB7XG4gICAgdmFyIF9hID0gc3RhdGUucHJvcHMsXG4gICAgICAgIGRpbWVuc2lvbnMgPSBfYS5kaW1lbnNpb25zLFxuICAgICAgICBlbGVtZW50ID0gX2EuZWxlbWVudCxcbiAgICAgICAgZWxlbWVudFN0eWxlciA9IF9hLmVsZW1lbnRTdHlsZXI7XG4gICAgaWYgKCFkaW1lbnNpb25zLmhhcygpKSByZXR1cm4ge307XG4gICAgdmFyIHByZXYgPSBkaW1lbnNpb25zLmdldCgpO1xuICAgIHZhciBuZXh0ID0gbWVhc3VyZVdpdGhvdXRUcmFuc2Zvcm0oZWxlbWVudCk7XG4gICAgdmFyIG9yaWdpblggPSBwcmV2LmxlZnQgPT09IG5leHQubGVmdCA/IE9SSUdJTl9TVEFSVCA6IHByZXYucmlnaHQgPT09IG5leHQucmlnaHQgPyBPUklHSU5fRU5EIDogT1JJR0lOX0NFTlRFUjtcbiAgICB2YXIgb3JpZ2luWSA9IHByZXYudG9wID09PSBuZXh0LnRvcCA/IE9SSUdJTl9TVEFSVCA6IHByZXYuYm90dG9tID09PSBuZXh0LmJvdHRvbSA/IE9SSUdJTl9FTkQgOiBPUklHSU5fQ0VOVEVSO1xuICAgIGVsZW1lbnRTdHlsZXIuc2V0KHsgb3JpZ2luWDogb3JpZ2luWCwgb3JpZ2luWTogb3JpZ2luWSB9KTtcbiAgICBpZiAocHJldi53aWR0aCAhPT0gbmV4dC53aWR0aCkge1xuICAgICAgICBzZXRWYWx1ZShzdGF0ZSwgJ3NjYWxlWCcsIHByZXYud2lkdGggLyBuZXh0LndpZHRoKTtcbiAgICAgICAgbmV4dFBvc2Uuc2NhbGVYID0gMTtcbiAgICB9XG4gICAgaWYgKHByZXYuaGVpZ2h0ICE9PSBuZXh0LmhlaWdodCkge1xuICAgICAgICBzZXRWYWx1ZShzdGF0ZSwgJ3NjYWxlWScsIHByZXYuaGVpZ2h0IC8gbmV4dC5oZWlnaHQpO1xuICAgICAgICBuZXh0UG9zZS5zY2FsZVkgPSAxO1xuICAgIH1cbiAgICB2YXIgcHJldkNlbnRlciA9IGZpbmRDZW50ZXIocHJldik7XG4gICAgdmFyIG5leHRDZW50ZXIgPSBmaW5kQ2VudGVyKG5leHQpO1xuICAgIGlmIChvcmlnaW5YID09PSBPUklHSU5fQ0VOVEVSKSB7XG4gICAgICAgIHNldFZhbHVlKHN0YXRlLCAneCcsIHByZXZDZW50ZXIueCAtIG5leHRDZW50ZXIueCk7XG4gICAgICAgIG5leHRQb3NlLnggPSAwO1xuICAgIH1cbiAgICBpZiAob3JpZ2luWSA9PT0gT1JJR0lOX0NFTlRFUikge1xuICAgICAgICBzZXRWYWx1ZShzdGF0ZSwgJ3knLCBwcmV2Q2VudGVyLnkgLSBuZXh0Q2VudGVyLnkpO1xuICAgICAgICBuZXh0UG9zZS55ID0gMDtcbiAgICB9XG4gICAgZWxlbWVudFN0eWxlci5yZW5kZXIoKTtcbiAgICByZXR1cm4gbmV4dFBvc2U7XG59O1xudmFyIGZsaXBQb3NlID0gZnVuY3Rpb24gKHByb3BzLCBuZXh0UG9zZSkge1xuICAgIHJldHVybiBoYXNQb3NpdGlvbmFsUHJvcHMobmV4dFBvc2UpID8gZXhwbGljaXRseUZsaXBQb3NlKHByb3BzLCBuZXh0UG9zZSkgOiBpbXBsaWNpdGx5RmxpcFBvc2UocHJvcHMsIG5leHRQb3NlKTtcbn07XG5cbnZhciBnZXRQb3NGcm9tTWF0cml4ID0gZnVuY3Rpb24gKG1hdHJpeCwgcG9zKSB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQobWF0cml4LnNwbGl0KCcsICcpW3Bvc10pO1xufTtcbnZhciBnZXRUcmFuc2xhdGVGcm9tTWF0cml4ID0gZnVuY3Rpb24gKHBvczIsIHBvczMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGVsZW1lbnQsIGJib3gsIF9hKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm0kJDEgPSBfYS50cmFuc2Zvcm07XG4gICAgICAgIGlmICh0cmFuc2Zvcm0kJDEgPT09ICdub25lJykgcmV0dXJuIDA7XG4gICAgICAgIHZhciBtYXRyaXgzZCA9IHRyYW5zZm9ybSQkMS5tYXRjaCgvXm1hdHJpeDNkXFwoKC4rKVxcKSQvKTtcbiAgICAgICAgaWYgKG1hdHJpeDNkKSByZXR1cm4gZ2V0UG9zRnJvbU1hdHJpeChtYXRyaXgzZFsxXSwgcG9zMyk7XG4gICAgICAgIHJldHVybiBnZXRQb3NGcm9tTWF0cml4KHRyYW5zZm9ybSQkMS5tYXRjaCgvXm1hdHJpeFxcKCguKylcXCkkLylbMV0sIHBvczIpO1xuICAgIH07XG59O1xudmFyIHBvc2l0aW9uYWxWYWx1ZXMgPSB7XG4gICAgd2lkdGg6IGZ1bmN0aW9uIChlbGVtZW50LCBfYSkge1xuICAgICAgICB2YXIgd2lkdGggPSBfYS53aWR0aDtcbiAgICAgICAgcmV0dXJuIHdpZHRoO1xuICAgIH0sXG4gICAgaGVpZ2h0OiBmdW5jdGlvbiAoZWxlbWVudCwgX2EpIHtcbiAgICAgICAgdmFyIGhlaWdodCA9IF9hLmhlaWdodDtcbiAgICAgICAgcmV0dXJuIGhlaWdodDtcbiAgICB9LFxuICAgIHRvcDogZnVuY3Rpb24gKGVsZW1lbnQsIGJib3gsIF9hKSB7XG4gICAgICAgIHZhciB0b3AgPSBfYS50b3A7XG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHRvcCk7XG4gICAgfSxcbiAgICBsZWZ0OiBmdW5jdGlvbiAoZWxlbWVudCwgYmJveCwgX2EpIHtcbiAgICAgICAgdmFyIGxlZnQgPSBfYS5sZWZ0O1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChsZWZ0KTtcbiAgICB9LFxuICAgIGJvdHRvbTogZnVuY3Rpb24gKGVsZW1lbnQsIF9hLCBfYikge1xuICAgICAgICB2YXIgaGVpZ2h0ID0gX2EuaGVpZ2h0O1xuICAgICAgICB2YXIgdG9wID0gX2IudG9wO1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh0b3ApICsgaGVpZ2h0O1xuICAgIH0sXG4gICAgcmlnaHQ6IGZ1bmN0aW9uIChlbGVtZW50LCBfYSwgX2IpIHtcbiAgICAgICAgdmFyIHdpZHRoID0gX2Eud2lkdGg7XG4gICAgICAgIHZhciBsZWZ0ID0gX2IubGVmdDtcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQobGVmdCkgKyB3aWR0aDtcbiAgICB9LFxuICAgIHg6IC8qI19fUFVSRV9fKi9nZXRUcmFuc2xhdGVGcm9tTWF0cml4KDQsIDEzKSxcbiAgICB5OiAvKiNfX1BVUkVfXyovZ2V0VHJhbnNsYXRlRnJvbU1hdHJpeCg1LCAxNClcbn07XG52YXIgaXNQb3NpdGlvbmFsS2V5ID0gZnVuY3Rpb24gKHYpIHtcbiAgICByZXR1cm4gcG9zaXRpb25hbFZhbHVlc1t2XSAhPT0gdW5kZWZpbmVkO1xufTtcbnZhciBpc1Bvc2l0aW9uYWwgPSBmdW5jdGlvbiAocG9zZSkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhwb3NlKS5zb21lKGlzUG9zaXRpb25hbEtleSk7XG59O1xudmFyIGNvbnZlcnRQb3NpdGlvbmFsVW5pdHMgPSBmdW5jdGlvbiAoc3RhdGUsIG5leHRQb3NlKSB7XG4gICAgdmFyIHZhbHVlcyA9IHN0YXRlLnZhbHVlcyxcbiAgICAgICAgcHJvcHMgPSBzdGF0ZS5wcm9wcztcbiAgICB2YXIgZWxlbWVudCA9IHByb3BzLmVsZW1lbnQsXG4gICAgICAgIGVsZW1lbnRTdHlsZXIgPSBwcm9wcy5lbGVtZW50U3R5bGVyO1xuICAgIHZhciBwb3NpdGlvbmFsUG9zZUtleXMgPSBPYmplY3Qua2V5cyhuZXh0UG9zZSkuZmlsdGVyKGlzUG9zaXRpb25hbEtleSk7XG4gICAgdmFyIGNoYW5nZWRQb3NpdGlvbmFsS2V5cyA9IFtdO1xuICAgIHZhciBlbGVtZW50Q29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgdmFyIGFwcGx5QXRFbmRIYXNCZWVuQ29waWVkID0gZmFsc2U7XG4gICAgcG9zaXRpb25hbFBvc2VLZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgdmFsdWUkJDEgPSB2YWx1ZXMuZ2V0KGtleSk7XG4gICAgICAgIHZhciBmcm9tVmFsdWVUeXBlID0gZ2V0VmFsdWVUeXBlKHZhbHVlJCQxLnJhdy5nZXQoKSk7XG4gICAgICAgIHZhciB0byA9IHJlc29sdmVQcm9wKG5leHRQb3NlW2tleV0sIHByb3BzKTtcbiAgICAgICAgdmFyIHRvVmFsdWVUeXBlID0gZ2V0VmFsdWVUeXBlKHRvKTtcbiAgICAgICAgaWYgKGZyb21WYWx1ZVR5cGUgIT09IHRvVmFsdWVUeXBlKSB7XG4gICAgICAgICAgICBjaGFuZ2VkUG9zaXRpb25hbEtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgaWYgKCFhcHBseUF0RW5kSGFzQmVlbkNvcGllZCkge1xuICAgICAgICAgICAgICAgIGFwcGx5QXRFbmRIYXNCZWVuQ29waWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBuZXh0UG9zZS5hcHBseUF0RW5kID0gbmV4dFBvc2UuYXBwbHlBdEVuZCA/IF9fYXNzaWduKHt9LCBuZXh0UG9zZS5hcHBseUF0RW5kKSA6IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV4dFBvc2UuYXBwbHlBdEVuZFtrZXldID0gbmV4dFBvc2UuYXBwbHlBdEVuZFtrZXldIHx8IG5leHRQb3NlW2tleV07XG4gICAgICAgICAgICBzZXRWYWx1ZShzdGF0ZSwga2V5LCB0byk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIWNoYW5nZWRQb3NpdGlvbmFsS2V5cy5sZW5ndGgpIHJldHVybiBuZXh0UG9zZTtcbiAgICB2YXIgb3JpZ2luQmJveCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIHRvcCA9IGVsZW1lbnRDb21wdXRlZFN0eWxlLnRvcCxcbiAgICAgICAgbGVmdCA9IGVsZW1lbnRDb21wdXRlZFN0eWxlLmxlZnQsXG4gICAgICAgIGJvdHRvbSA9IGVsZW1lbnRDb21wdXRlZFN0eWxlLmJvdHRvbSxcbiAgICAgICAgcmlnaHQgPSBlbGVtZW50Q29tcHV0ZWRTdHlsZS5yaWdodCxcbiAgICAgICAgdHJhbnNmb3JtJCQxID0gZWxlbWVudENvbXB1dGVkU3R5bGUudHJhbnNmb3JtO1xuICAgIHZhciBvcmlnaW5Db21wdXRlZFN0eWxlID0geyB0b3A6IHRvcCwgbGVmdDogbGVmdCwgYm90dG9tOiBib3R0b20sIHJpZ2h0OiByaWdodCwgdHJhbnNmb3JtOiB0cmFuc2Zvcm0kJDEgfTtcbiAgICBlbGVtZW50U3R5bGVyLnJlbmRlcigpO1xuICAgIHZhciB0YXJnZXRCYm94ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjaGFuZ2VkUG9zaXRpb25hbEtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHNldFZhbHVlKHN0YXRlLCBrZXksIHBvc2l0aW9uYWxWYWx1ZXNba2V5XShlbGVtZW50LCBvcmlnaW5CYm94LCBvcmlnaW5Db21wdXRlZFN0eWxlKSk7XG4gICAgICAgIG5leHRQb3NlW2tleV0gPSBwb3NpdGlvbmFsVmFsdWVzW2tleV0oZWxlbWVudCwgdGFyZ2V0QmJveCwgZWxlbWVudENvbXB1dGVkU3R5bGUpO1xuICAgIH0pO1xuICAgIGVsZW1lbnRTdHlsZXIucmVuZGVyKCk7XG4gICAgcmV0dXJuIG5leHRQb3NlO1xufTtcblxudmFyIGdldEN1cnJlbnQgPSBmdW5jdGlvbiAocHJvcCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRTdHlsZXIgPSBfYS5lbGVtZW50U3R5bGVyO1xuICAgICAgICByZXR1cm4gZWxlbWVudFN0eWxlci5nZXQocHJvcCk7XG4gICAgfTtcbn07XG52YXIgZHJhZ1Bvc2VzID0gZnVuY3Rpb24gKGRyYWdnYWJsZSkge1xuICAgIHZhciBkcmFnID0ge1xuICAgICAgICBwcmVUcmFuc2l0aW9uOiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBkaW1lbnNpb25zID0gX2EuZGltZW5zaW9ucztcbiAgICAgICAgICAgIHJldHVybiBkaW1lbnNpb25zLm1lYXN1cmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIGRyYWdFbmQgPSB7fTtcbiAgICBpZiAoZHJhZ2dhYmxlID09PSB0cnVlIHx8IGRyYWdnYWJsZSA9PT0gJ3gnKSB7XG4gICAgICAgIGRyYWcueCA9IGRyYWdFbmQueCA9IGdldEN1cnJlbnQoJ3gnKTtcbiAgICB9XG4gICAgaWYgKGRyYWdnYWJsZSA9PT0gdHJ1ZSB8fCBkcmFnZ2FibGUgPT09ICd5Jykge1xuICAgICAgICBkcmFnLnkgPSBkcmFnRW5kLnkgPSBnZXRDdXJyZW50KCd5Jyk7XG4gICAgfVxuICAgIHJldHVybiB7IGRyYWc6IGRyYWcsIGRyYWdFbmQ6IGRyYWdFbmQgfTtcbn07XG52YXIgY3JlYXRlUG9zZUNvbmZpZyA9IGZ1bmN0aW9uIChlbGVtZW50LCBfYSkge1xuICAgIHZhciBvbkRyYWdTdGFydCA9IF9hLm9uRHJhZ1N0YXJ0LFxuICAgICAgICBvbkRyYWdFbmQgPSBfYS5vbkRyYWdFbmQsXG4gICAgICAgIG9uUHJlc3NTdGFydCA9IF9hLm9uUHJlc3NTdGFydCxcbiAgICAgICAgb25QcmVzc0VuZCA9IF9hLm9uUHJlc3NFbmQsXG4gICAgICAgIGRyYWdnYWJsZSA9IF9hLmRyYWdnYWJsZSxcbiAgICAgICAgaG92ZXJhYmxlID0gX2EuaG92ZXJhYmxlLFxuICAgICAgICBmb2N1c2FibGUgPSBfYS5mb2N1c2FibGUsXG4gICAgICAgIHByZXNzYWJsZSA9IF9hLnByZXNzYWJsZSxcbiAgICAgICAgZHJhZ0JvdW5kcyA9IF9hLmRyYWdCb3VuZHMsXG4gICAgICAgIGNvbmZpZyA9IF9fcmVzdChfYSwgW1wib25EcmFnU3RhcnRcIiwgXCJvbkRyYWdFbmRcIiwgXCJvblByZXNzU3RhcnRcIiwgXCJvblByZXNzRW5kXCIsIFwiZHJhZ2dhYmxlXCIsIFwiaG92ZXJhYmxlXCIsIFwiZm9jdXNhYmxlXCIsIFwicHJlc3NhYmxlXCIsIFwiZHJhZ0JvdW5kc1wiXSk7XG4gICAgdmFyIHBvc2VDb25maWcgPSBfX2Fzc2lnbih7IGZsaXA6IHt9IH0sIGNvbmZpZywgeyBwcm9wczogX19hc3NpZ24oe30sIGNvbmZpZy5wcm9wcywgeyBvbkRyYWdTdGFydDogb25EcmFnU3RhcnQsXG4gICAgICAgICAgICBvbkRyYWdFbmQ6IG9uRHJhZ0VuZCxcbiAgICAgICAgICAgIG9uUHJlc3NTdGFydDogb25QcmVzc1N0YXJ0LFxuICAgICAgICAgICAgb25QcmVzc0VuZDogb25QcmVzc0VuZCxcbiAgICAgICAgICAgIGRyYWdCb3VuZHM6IGRyYWdCb3VuZHMsXG4gICAgICAgICAgICBkcmFnZ2FibGU6IGRyYWdnYWJsZSxcbiAgICAgICAgICAgIGhvdmVyYWJsZTogaG92ZXJhYmxlLFxuICAgICAgICAgICAgZm9jdXNhYmxlOiBmb2N1c2FibGUsXG4gICAgICAgICAgICBwcmVzc2FibGU6IHByZXNzYWJsZSxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsIGVsZW1lbnRTdHlsZXI6IHN0eWxlcihlbGVtZW50LCB7IHByZXBhcnNlT3V0cHV0OiBmYWxzZSB9KSwgZGltZW5zaW9uczogY3JlYXRlRGltZW5zaW9ucyhlbGVtZW50KSB9KSB9KTtcbiAgICBpZiAoZHJhZ2dhYmxlKSB7XG4gICAgICAgIHZhciBfYiA9IGRyYWdQb3NlcyhkcmFnZ2FibGUpLFxuICAgICAgICAgICAgZHJhZyA9IF9iLmRyYWcsXG4gICAgICAgICAgICBkcmFnRW5kID0gX2IuZHJhZ0VuZDtcbiAgICAgICAgcG9zZUNvbmZpZy5kcmFnID0gX19hc3NpZ24oe30sIGRyYWcsIHBvc2VDb25maWcuZHJhZyk7XG4gICAgICAgIHBvc2VDb25maWcuZHJhZ0VuZCA9IF9fYXNzaWduKHt9LCBkcmFnRW5kLCBwb3NlQ29uZmlnLmRyYWdFbmQpO1xuICAgIH1cbiAgICByZXR1cm4gcG9zZUNvbmZpZztcbn07XG52YXIgZG9tUG9zZSA9IC8qI19fUFVSRV9fKi9wb3NlKHtcbiAgICBwb3NlUHJpb3JpdHk6IFsnZHJhZycsICdwcmVzcycsICdmb2N1cycsICdob3ZlciddLFxuICAgIHRyYW5zZm9ybVBvc2U6IGZ1bmN0aW9uIChfYSwgbmFtZSwgc3RhdGUpIHtcbiAgICAgICAgdmFyIGZsaXAgPSBfYS5mbGlwLFxuICAgICAgICAgICAgcG9zZSQkMSA9IF9fcmVzdChfYSwgW1wiZmxpcFwiXSk7XG4gICAgICAgIGlmIChpc0ZsaXBQb3NlKGZsaXAsIG5hbWUsIHN0YXRlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZsaXBQb3NlKHN0YXRlLCBwb3NlJCQxKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1Bvc2l0aW9uYWwocG9zZSQkMSkpIHtcbiAgICAgICAgICAgIHJldHVybiBjb252ZXJ0UG9zaXRpb25hbFVuaXRzKHN0YXRlLCBwb3NlJCQxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zZSQkMTtcbiAgICB9LFxuICAgIGZvcmNlUmVuZGVyOiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRTdHlsZXIgPSBfYS5lbGVtZW50U3R5bGVyO1xuICAgICAgICBlbGVtZW50U3R5bGVyLnJlbmRlcigpO1xuICAgIH0sXG4gICAgYWRkTGlzdGVuZXJUb1ZhbHVlOiBmdW5jdGlvbiAoa2V5LCBlbGVtZW50U3R5bGVyKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRTdHlsZXIuc2V0KGtleSwgdik7XG4gICAgICAgIH07XG4gICAgfSxcbiAgICByZWFkVmFsdWVGcm9tU291cmNlOiBmdW5jdGlvbiAoa2V5LCBfYSkge1xuICAgICAgICB2YXIgZWxlbWVudFN0eWxlciA9IF9hLmVsZW1lbnRTdHlsZXIsXG4gICAgICAgICAgICBkcmFnQm91bmRzID0gX2EuZHJhZ0JvdW5kcztcbiAgICAgICAgdmFyIHZhbHVlJCQxID0gZWxlbWVudFN0eWxlci5nZXQoa2V5KTtcbiAgICAgICAgaWYgKGRyYWdCb3VuZHMgJiYgKGtleSA9PT0gJ3gnIHx8IGtleSA9PT0gJ3knKSkge1xuICAgICAgICAgICAgdmFyIGJvdW5kID0ga2V5ID09PSAneCcgPyBkcmFnQm91bmRzLmxlZnQgfHwgZHJhZ0JvdW5kcy5yaWdodCA6IGRyYWdCb3VuZHMudG9wIHx8IGRyYWdCb3VuZHMuYm90dG9tO1xuICAgICAgICAgICAgaWYgKGJvdW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJvdW5kVHlwZSA9IGdldFZhbHVlVHlwZShib3VuZCk7XG4gICAgICAgICAgICAgICAgdmFsdWUkJDEgPSBib3VuZFR5cGUudHJhbnNmb3JtKHZhbHVlJCQxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNOYU4odmFsdWUkJDEpID8gdmFsdWUkJDEgOiBwYXJzZUZsb2F0KHZhbHVlJCQxKTtcbiAgICB9LFxuICAgIHNldFZhbHVlTmF0aXZlOiBmdW5jdGlvbiAoa2V5LCB0bywgX2EpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRTdHlsZXIgPSBfYS5lbGVtZW50U3R5bGVyO1xuICAgICAgICByZXR1cm4gZWxlbWVudFN0eWxlci5zZXQoa2V5LCB0byk7XG4gICAgfSxcbiAgICBleHRlbmRBUEk6IGZ1bmN0aW9uIChhcGksIF9hLCBjb25maWcpIHtcbiAgICAgICAgdmFyIHByb3BzID0gX2EucHJvcHMsXG4gICAgICAgICAgICBhY3RpdmVBY3Rpb25zID0gX2EuYWN0aXZlQWN0aW9ucztcbiAgICAgICAgdmFyIG1lYXN1cmUgPSBwcm9wcy5kaW1lbnNpb25zLm1lYXN1cmU7XG4gICAgICAgIHZhciBwb3NlckFwaSA9IF9fYXNzaWduKHt9LCBhcGksIHsgYWRkQ2hpbGQ6IGZ1bmN0aW9uIChlbGVtZW50LCBjaGlsZENvbmZpZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcGkuX2FkZENoaWxkKGNyZWF0ZVBvc2VDb25maWcoZWxlbWVudCwgY2hpbGRDb25maWcpLCBkb21Qb3NlKTtcbiAgICAgICAgICAgIH0sIG1lYXN1cmU6IG1lYXN1cmUsIGZsaXA6IGZ1bmN0aW9uIChvcCkge1xuICAgICAgICAgICAgICAgIGlmIChvcCkge1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlKCk7XG4gICAgICAgICAgICAgICAgICAgIG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhcGkuc2V0KCdmbGlwJyk7XG4gICAgICAgICAgICB9IH0pO1xuICAgICAgICBwcm9wcy5lbGVtZW50U3R5bGVyLnJlbmRlcigpO1xuICAgICAgICBhcHBlbmRFdmVudExpc3RlbmVycyhwcm9wcy5lbGVtZW50LCBhY3RpdmVBY3Rpb25zLCBwb3NlckFwaSwgY29uZmlnKTtcbiAgICAgICAgcmV0dXJuIHBvc2VyQXBpO1xuICAgIH1cbn0pO1xudmFyIGRvbVBvc2UkMSA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb25maWcpIHtcbiAgICByZXR1cm4gZG9tUG9zZShjcmVhdGVQb3NlQ29uZmlnKGVsZW1lbnQsIGNvbmZpZykpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZG9tUG9zZSQxO1xuIiwiZnVuY3Rpb24gbWVtb2l6ZShmbikge1xuICB2YXIgY2FjaGUgPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhcmcpIHtcbiAgICBpZiAoY2FjaGVbYXJnXSA9PT0gdW5kZWZpbmVkKSBjYWNoZVthcmddID0gZm4oYXJnKTtcbiAgICByZXR1cm4gY2FjaGVbYXJnXTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbWVtb2l6ZTtcbiIsImltcG9ydCBtZW1vaXplIGZyb20gJ0BlbW90aW9uL21lbW9pemUnO1xuXG52YXIgcmVhY3RQcm9wc1JlZ2V4ID0gL14oKGNoaWxkcmVufGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MfGtleXxyZWZ8YXV0b0ZvY3VzfGRlZmF1bHRWYWx1ZXxkZWZhdWx0Q2hlY2tlZHxpbm5lckhUTUx8c3VwcHJlc3NDb250ZW50RWRpdGFibGVXYXJuaW5nfHN1cHByZXNzSHlkcmF0aW9uV2FybmluZ3x2YWx1ZUxpbmt8YWNjZXB0fGFjY2VwdENoYXJzZXR8YWNjZXNzS2V5fGFjdGlvbnxhbGxvd3xhbGxvd1VzZXJNZWRpYXxhbGxvd1BheW1lbnRSZXF1ZXN0fGFsbG93RnVsbFNjcmVlbnxhbGxvd1RyYW5zcGFyZW5jeXxhbHR8YXN5bmN8YXV0b0NvbXBsZXRlfGF1dG9QbGF5fGNhcHR1cmV8Y2VsbFBhZGRpbmd8Y2VsbFNwYWNpbmd8Y2hhbGxlbmdlfGNoYXJTZXR8Y2hlY2tlZHxjaXRlfGNsYXNzSUR8Y2xhc3NOYW1lfGNvbHN8Y29sU3Bhbnxjb250ZW50fGNvbnRlbnRFZGl0YWJsZXxjb250ZXh0TWVudXxjb250cm9sc3xjb250cm9sc0xpc3R8Y29vcmRzfGNyb3NzT3JpZ2lufGRhdGF8ZGF0ZVRpbWV8ZGVmYXVsdHxkZWZlcnxkaXJ8ZGlzYWJsZWR8ZG93bmxvYWR8ZHJhZ2dhYmxlfGVuY1R5cGV8Zm9ybXxmb3JtQWN0aW9ufGZvcm1FbmNUeXBlfGZvcm1NZXRob2R8Zm9ybU5vVmFsaWRhdGV8Zm9ybVRhcmdldHxmcmFtZUJvcmRlcnxoZWFkZXJzfGhlaWdodHxoaWRkZW58aGlnaHxocmVmfGhyZWZMYW5nfGh0bWxGb3J8aHR0cEVxdWl2fGlkfGlucHV0TW9kZXxpbnRlZ3JpdHl8aXN8a2V5UGFyYW1zfGtleVR5cGV8a2luZHxsYWJlbHxsYW5nfGxpc3R8bG9vcHxsb3d8bWFyZ2luSGVpZ2h0fG1hcmdpbldpZHRofG1heHxtYXhMZW5ndGh8bWVkaWF8bWVkaWFHcm91cHxtZXRob2R8bWlufG1pbkxlbmd0aHxtdWx0aXBsZXxtdXRlZHxuYW1lfG5vbmNlfG5vVmFsaWRhdGV8b3BlbnxvcHRpbXVtfHBhdHRlcm58cGxhY2Vob2xkZXJ8cGxheXNJbmxpbmV8cG9zdGVyfHByZWxvYWR8cHJvZmlsZXxyYWRpb0dyb3VwfHJlYWRPbmx5fHJlZmVycmVyUG9saWN5fHJlbHxyZXF1aXJlZHxyZXZlcnNlZHxyb2xlfHJvd3N8cm93U3BhbnxzYW5kYm94fHNjb3BlfHNjb3BlZHxzY3JvbGxpbmd8c2VhbWxlc3N8c2VsZWN0ZWR8c2hhcGV8c2l6ZXxzaXplc3xzbG90fHNwYW58c3BlbGxDaGVja3xzcmN8c3JjRG9jfHNyY0xhbmd8c3JjU2V0fHN0YXJ0fHN0ZXB8c3R5bGV8c3VtbWFyeXx0YWJJbmRleHx0YXJnZXR8dGl0bGV8dHlwZXx1c2VNYXB8dmFsdWV8d2lkdGh8d21vZGV8d3JhcHxhYm91dHxkYXRhdHlwZXxpbmxpc3R8cHJlZml4fHByb3BlcnR5fHJlc291cmNlfHR5cGVvZnx2b2NhYnxhdXRvQ2FwaXRhbGl6ZXxhdXRvQ29ycmVjdHxhdXRvU2F2ZXxjb2xvcnxpdGVtUHJvcHxpdGVtU2NvcGV8aXRlbVR5cGV8aXRlbUlEfGl0ZW1SZWZ8cmVzdWx0c3xzZWN1cml0eXx1bnNlbGVjdGFibGV8YWNjZW50SGVpZ2h0fGFjY3VtdWxhdGV8YWRkaXRpdmV8YWxpZ25tZW50QmFzZWxpbmV8YWxsb3dSZW9yZGVyfGFscGhhYmV0aWN8YW1wbGl0dWRlfGFyYWJpY0Zvcm18YXNjZW50fGF0dHJpYnV0ZU5hbWV8YXR0cmlidXRlVHlwZXxhdXRvUmV2ZXJzZXxhemltdXRofGJhc2VGcmVxdWVuY3l8YmFzZWxpbmVTaGlmdHxiYXNlUHJvZmlsZXxiYm94fGJlZ2lufGJpYXN8Ynl8Y2FsY01vZGV8Y2FwSGVpZ2h0fGNsaXB8Y2xpcFBhdGhVbml0c3xjbGlwUGF0aHxjbGlwUnVsZXxjb2xvckludGVycG9sYXRpb258Y29sb3JJbnRlcnBvbGF0aW9uRmlsdGVyc3xjb2xvclByb2ZpbGV8Y29sb3JSZW5kZXJpbmd8Y29udGVudFNjcmlwdFR5cGV8Y29udGVudFN0eWxlVHlwZXxjdXJzb3J8Y3h8Y3l8ZHxkZWNlbGVyYXRlfGRlc2NlbnR8ZGlmZnVzZUNvbnN0YW50fGRpcmVjdGlvbnxkaXNwbGF5fGRpdmlzb3J8ZG9taW5hbnRCYXNlbGluZXxkdXJ8ZHh8ZHl8ZWRnZU1vZGV8ZWxldmF0aW9ufGVuYWJsZUJhY2tncm91bmR8ZW5kfGV4cG9uZW50fGV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWR8ZmlsbHxmaWxsT3BhY2l0eXxmaWxsUnVsZXxmaWx0ZXJ8ZmlsdGVyUmVzfGZpbHRlclVuaXRzfGZsb29kQ29sb3J8Zmxvb2RPcGFjaXR5fGZvY3VzYWJsZXxmb250RmFtaWx5fGZvbnRTaXplfGZvbnRTaXplQWRqdXN0fGZvbnRTdHJldGNofGZvbnRTdHlsZXxmb250VmFyaWFudHxmb250V2VpZ2h0fGZvcm1hdHxmcm9tfGZyfGZ4fGZ5fGcxfGcyfGdseXBoTmFtZXxnbHlwaE9yaWVudGF0aW9uSG9yaXpvbnRhbHxnbHlwaE9yaWVudGF0aW9uVmVydGljYWx8Z2x5cGhSZWZ8Z3JhZGllbnRUcmFuc2Zvcm18Z3JhZGllbnRVbml0c3xoYW5naW5nfGhvcml6QWR2WHxob3Jpek9yaWdpblh8aWRlb2dyYXBoaWN8aW1hZ2VSZW5kZXJpbmd8aW58aW4yfGludGVyY2VwdHxrfGsxfGsyfGszfGs0fGtlcm5lbE1hdHJpeHxrZXJuZWxVbml0TGVuZ3RofGtlcm5pbmd8a2V5UG9pbnRzfGtleVNwbGluZXN8a2V5VGltZXN8bGVuZ3RoQWRqdXN0fGxldHRlclNwYWNpbmd8bGlnaHRpbmdDb2xvcnxsaW1pdGluZ0NvbmVBbmdsZXxsb2NhbHxtYXJrZXJFbmR8bWFya2VyTWlkfG1hcmtlclN0YXJ0fG1hcmtlckhlaWdodHxtYXJrZXJVbml0c3xtYXJrZXJXaWR0aHxtYXNrfG1hc2tDb250ZW50VW5pdHN8bWFza1VuaXRzfG1hdGhlbWF0aWNhbHxtb2RlfG51bU9jdGF2ZXN8b2Zmc2V0fG9wYWNpdHl8b3BlcmF0b3J8b3JkZXJ8b3JpZW50fG9yaWVudGF0aW9ufG9yaWdpbnxvdmVyZmxvd3xvdmVybGluZVBvc2l0aW9ufG92ZXJsaW5lVGhpY2tuZXNzfHBhbm9zZTF8cGFpbnRPcmRlcnxwYXRoTGVuZ3RofHBhdHRlcm5Db250ZW50VW5pdHN8cGF0dGVyblRyYW5zZm9ybXxwYXR0ZXJuVW5pdHN8cG9pbnRlckV2ZW50c3xwb2ludHN8cG9pbnRzQXRYfHBvaW50c0F0WXxwb2ludHNBdFp8cHJlc2VydmVBbHBoYXxwcmVzZXJ2ZUFzcGVjdFJhdGlvfHByaW1pdGl2ZVVuaXRzfHJ8cmFkaXVzfHJlZlh8cmVmWXxyZW5kZXJpbmdJbnRlbnR8cmVwZWF0Q291bnR8cmVwZWF0RHVyfHJlcXVpcmVkRXh0ZW5zaW9uc3xyZXF1aXJlZEZlYXR1cmVzfHJlc3RhcnR8cmVzdWx0fHJvdGF0ZXxyeHxyeXxzY2FsZXxzZWVkfHNoYXBlUmVuZGVyaW5nfHNsb3BlfHNwYWNpbmd8c3BlY3VsYXJDb25zdGFudHxzcGVjdWxhckV4cG9uZW50fHNwZWVkfHNwcmVhZE1ldGhvZHxzdGFydE9mZnNldHxzdGREZXZpYXRpb258c3RlbWh8c3RlbXZ8c3RpdGNoVGlsZXN8c3RvcENvbG9yfHN0b3BPcGFjaXR5fHN0cmlrZXRocm91Z2hQb3NpdGlvbnxzdHJpa2V0aHJvdWdoVGhpY2tuZXNzfHN0cmluZ3xzdHJva2V8c3Ryb2tlRGFzaGFycmF5fHN0cm9rZURhc2hvZmZzZXR8c3Ryb2tlTGluZWNhcHxzdHJva2VMaW5lam9pbnxzdHJva2VNaXRlcmxpbWl0fHN0cm9rZU9wYWNpdHl8c3Ryb2tlV2lkdGh8c3VyZmFjZVNjYWxlfHN5c3RlbUxhbmd1YWdlfHRhYmxlVmFsdWVzfHRhcmdldFh8dGFyZ2V0WXx0ZXh0QW5jaG9yfHRleHREZWNvcmF0aW9ufHRleHRSZW5kZXJpbmd8dGV4dExlbmd0aHx0b3x0cmFuc2Zvcm18dTF8dTJ8dW5kZXJsaW5lUG9zaXRpb258dW5kZXJsaW5lVGhpY2tuZXNzfHVuaWNvZGV8dW5pY29kZUJpZGl8dW5pY29kZVJhbmdlfHVuaXRzUGVyRW18dkFscGhhYmV0aWN8dkhhbmdpbmd8dklkZW9ncmFwaGljfHZNYXRoZW1hdGljYWx8dmFsdWVzfHZlY3RvckVmZmVjdHx2ZXJzaW9ufHZlcnRBZHZZfHZlcnRPcmlnaW5YfHZlcnRPcmlnaW5ZfHZpZXdCb3h8dmlld1RhcmdldHx2aXNpYmlsaXR5fHdpZHRoc3x3b3JkU3BhY2luZ3x3cml0aW5nTW9kZXx4fHhIZWlnaHR8eDF8eDJ8eENoYW5uZWxTZWxlY3Rvcnx4bGlua0FjdHVhdGV8eGxpbmtBcmNyb2xlfHhsaW5rSHJlZnx4bGlua1JvbGV8eGxpbmtTaG93fHhsaW5rVGl0bGV8eGxpbmtUeXBlfHhtbEJhc2V8eG1sbnN8eG1sbnNYbGlua3x4bWxMYW5nfHhtbFNwYWNlfHl8eTF8eTJ8eUNoYW5uZWxTZWxlY3Rvcnx6fHpvb21BbmRQYW58Zm9yfGNsYXNzfGF1dG9mb2N1cyl8KChbRGRdW0FhXVtUdF1bQWFdfFtBYV1bUnJdW0lpXVtBYV18eCktLiopKSQvOyAvLyBodHRwczovL2VzYmVuY2guY29tL2JlbmNoLzViZmVlNjhhNGNkN2U2MDA5ZWY2MWQyM1xuXG52YXIgaW5kZXggPSBtZW1vaXplKGZ1bmN0aW9uIChwcm9wKSB7XG4gIHJldHVybiByZWFjdFByb3BzUmVnZXgudGVzdChwcm9wKSB8fCBwcm9wLmNoYXJDb2RlQXQoMCkgPT09IDExMVxuICAvKiBvICovXG4gICYmIHByb3AuY2hhckNvZGVBdCgxKSA9PT0gMTEwXG4gIC8qIG4gKi9cbiAgJiYgcHJvcC5jaGFyQ29kZUF0KDIpIDwgOTE7XG59XG4vKiBaKzEgKi9cbik7XG5cbmV4cG9ydCBkZWZhdWx0IGluZGV4O1xuIiwiaW1wb3J0IHsgX19yZXN0LCBfX2Fzc2lnbiwgX19leHRlbmRzIH0gZnJvbSAndHNsaWInO1xuaW1wb3J0IFJlYWN0X19kZWZhdWx0LCB7IFB1cmVDb21wb25lbnQsIGNyZWF0ZUNvbnRleHQsIGNyZWF0ZUVsZW1lbnQsIGZvcndhcmRSZWYsIENvbXBvbmVudCwgY2xvbmVFbGVtZW50LCBDaGlsZHJlbiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBwb3NlRmFjdG9yeSBmcm9tICdwb3Btb3Rpb24tcG9zZSc7XG5pbXBvcnQgaXNWYWxpZFByb3AgZnJvbSAnQGVtb3Rpb24vaXMtcHJvcC12YWxpZCc7XG5pbXBvcnQgeyBpbnZhcmlhbnQsIHdhcm5pbmcgfSBmcm9tICdoZXktbGlzdGVuJztcblxudmFyIGhhc0NoYW5nZWQgPSBmdW5jdGlvbiAocHJldiwgbmV4dCkge1xyXG4gICAgaWYgKHByZXYgPT09IG5leHQpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgdmFyIHByZXZJc0FycmF5ID0gQXJyYXkuaXNBcnJheShwcmV2KTtcclxuICAgIHZhciBuZXh0SXNBcnJheSA9IEFycmF5LmlzQXJyYXkobmV4dCk7XHJcbiAgICBpZiAocHJldklzQXJyYXkgIT09IG5leHRJc0FycmF5IHx8ICghcHJldklzQXJyYXkgJiYgIW5leHRJc0FycmF5KSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAocHJldklzQXJyYXkgJiYgbmV4dElzQXJyYXkpIHtcclxuICAgICAgICB2YXIgbnVtUHJldiA9IHByZXYubGVuZ3RoO1xyXG4gICAgICAgIHZhciBudW1OZXh0ID0gbmV4dC5sZW5ndGg7XHJcbiAgICAgICAgaWYgKG51bVByZXYgIT09IG51bU5leHQpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtUHJldjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChwcmV2W2ldICE9PSBuZXh0W2ldKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59O1xuXG52YXIgcGlja0Fzc2lnbiA9IGZ1bmN0aW9uIChzaG91bGRQaWNrLCBzb3VyY2VzKSB7XHJcbiAgICByZXR1cm4gc291cmNlcy5yZWR1Y2UoZnVuY3Rpb24gKHBpY2tlZCwgc291cmNlKSB7XHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xyXG4gICAgICAgICAgICBpZiAoc2hvdWxkUGljayhrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBwaWNrZWRba2V5XSA9IHNvdXJjZVtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwaWNrZWQ7XHJcbiAgICB9LCB7fSk7XHJcbn07XG5cbnZhciBfYSA9IGNyZWF0ZUNvbnRleHQoe30pLCBQb3NlUGFyZW50Q29uc3VtZXIgPSBfYS5Db25zdW1lciwgUG9zZVBhcmVudFByb3ZpZGVyID0gX2EuUHJvdmlkZXI7XHJcbnZhciBjYWxjUG9wRnJvbUZsb3dTdHlsZSA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgdmFyIG9mZnNldFRvcCA9IGVsLm9mZnNldFRvcCwgb2Zmc2V0TGVmdCA9IGVsLm9mZnNldExlZnQsIG9mZnNldFdpZHRoID0gZWwub2Zmc2V0V2lkdGgsIG9mZnNldEhlaWdodCA9IGVsLm9mZnNldEhlaWdodDtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgdG9wOiBvZmZzZXRUb3AsXHJcbiAgICAgICAgbGVmdDogb2Zmc2V0TGVmdCxcclxuICAgICAgICB3aWR0aDogb2Zmc2V0V2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0OiBvZmZzZXRIZWlnaHRcclxuICAgIH07XHJcbn07XHJcbnZhciBoYXNQb3NlID0gZnVuY3Rpb24gKHBvc2UsIGtleSkge1xyXG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkocG9zZSkgPyBwb3NlLmluZGV4T2Yoa2V5KSAhPT0gLTEgOiBwb3NlID09PSBrZXk7XHJcbn07XHJcbnZhciBvYmplY3RUb01hcCA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLnJlZHVjZShmdW5jdGlvbiAobWFwLCBrZXkpIHtcclxuICAgICAgICBtYXAuc2V0KGtleSwgeyByYXc6IG9ialtrZXldIH0pO1xyXG4gICAgICAgIHJldHVybiBtYXA7XHJcbiAgICB9LCBuZXcgTWFwKCkpO1xyXG59O1xyXG52YXIgdGVzdEFsd2F5c1RydWUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9O1xyXG52YXIgZmlsdGVyUHJvcHMgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBlbGVtZW50VHlwZSA9IF9hLmVsZW1lbnRUeXBlLCBwb3NlQ29uZmlnID0gX2EucG9zZUNvbmZpZywgb25WYWx1ZUNoYW5nZSA9IF9hLm9uVmFsdWVDaGFuZ2UsIGlubmVyUmVmID0gX2EuaW5uZXJSZWYsIF9wb3NlID0gX2EuX3Bvc2UsIHBvc2UgPSBfYS5wb3NlLCBpbml0aWFsUG9zZSA9IF9hLmluaXRpYWxQb3NlLCBwb3NlS2V5ID0gX2EucG9zZUtleSwgb25Qb3NlQ29tcGxldGUgPSBfYS5vblBvc2VDb21wbGV0ZSwgZ2V0UGFyZW50UG9zZUNvbmZpZyA9IF9hLmdldFBhcmVudFBvc2VDb25maWcsIHJlZ2lzdGVyQ2hpbGQgPSBfYS5yZWdpc3RlckNoaWxkLCBvblVubW91bnQgPSBfYS5vblVubW91bnQsIGdldEluaXRpYWxQb3NlRnJvbVBhcmVudCA9IF9hLmdldEluaXRpYWxQb3NlRnJvbVBhcmVudCwgcG9wRnJvbUZsb3cgPSBfYS5wb3BGcm9tRmxvdywgdmFsdWVzID0gX2EudmFsdWVzLCBwYXJlbnRWYWx1ZXMgPSBfYS5wYXJlbnRWYWx1ZXMsIG9uRHJhZ1N0YXJ0ID0gX2Eub25EcmFnU3RhcnQsIG9uRHJhZ0VuZCA9IF9hLm9uRHJhZ0VuZCwgb25QcmVzc1N0YXJ0ID0gX2Eub25QcmVzc1N0YXJ0LCBvblByZXNzRW5kID0gX2Eub25QcmVzc0VuZCwgcHJvcHMgPSBfX3Jlc3QoX2EsIFtcImVsZW1lbnRUeXBlXCIsIFwicG9zZUNvbmZpZ1wiLCBcIm9uVmFsdWVDaGFuZ2VcIiwgXCJpbm5lclJlZlwiLCBcIl9wb3NlXCIsIFwicG9zZVwiLCBcImluaXRpYWxQb3NlXCIsIFwicG9zZUtleVwiLCBcIm9uUG9zZUNvbXBsZXRlXCIsIFwiZ2V0UGFyZW50UG9zZUNvbmZpZ1wiLCBcInJlZ2lzdGVyQ2hpbGRcIiwgXCJvblVubW91bnRcIiwgXCJnZXRJbml0aWFsUG9zZUZyb21QYXJlbnRcIiwgXCJwb3BGcm9tRmxvd1wiLCBcInZhbHVlc1wiLCBcInBhcmVudFZhbHVlc1wiLCBcIm9uRHJhZ1N0YXJ0XCIsIFwib25EcmFnRW5kXCIsIFwib25QcmVzc1N0YXJ0XCIsIFwib25QcmVzc0VuZFwiXSk7XHJcbiAgICByZXR1cm4gcHJvcHM7XHJcbn07XHJcbnZhciBQb3NlRWxlbWVudCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoUG9zZUVsZW1lbnQsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBQb3NlRWxlbWVudChwcm9wcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNoaWxkcmVuID0gbmV3IFNldCgpO1xyXG4gICAgICAgIF90aGlzLmNoaWxkcmVuSGFuZGxlcnMgPSB7XHJcbiAgICAgICAgICAgIHJlZ2lzdGVyQ2hpbGQ6IGZ1bmN0aW9uIChwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY2hpbGRyZW4uYWRkKHByb3BzKTtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wb3NlcilcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5mbHVzaENoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uVW5tb3VudDogZnVuY3Rpb24gKGNoaWxkKSB7IHJldHVybiBfdGhpcy5wb3Nlci5yZW1vdmVDaGlsZChjaGlsZCk7IH0sXHJcbiAgICAgICAgICAgIGdldFBhcmVudFBvc2VDb25maWc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnBvc2VDb25maWc7IH0sXHJcbiAgICAgICAgICAgIGdldEluaXRpYWxQb3NlRnJvbVBhcmVudDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZ2V0SW5pdGlhbFBvc2UoKTsgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgX3RoaXMuc2V0UmVmID0gZnVuY3Rpb24gKHJlZikge1xyXG4gICAgICAgICAgICB3YXJuaW5nKHJlZiA9PT0gbnVsbCB8fCAocmVmIGluc3RhbmNlb2YgRWxlbWVudCAmJiBfdGhpcy5yZWYgPT09IHVuZGVmaW5lZCksICdyZWYgbXVzdCBiZSBwcm92aWRlZCB0byB0aGUgc2FtZSBET00gY29tcG9uZW50IGZvciB0aGUgZW50aXJlIGxpZmVjeWNsZSBvZiBhIHBvc2VkIGNvbXBvbmVudC4nKTtcclxuICAgICAgICAgICAgX3RoaXMucmVmID0gcmVmO1xyXG4gICAgICAgICAgICB2YXIgaW5uZXJSZWYgPSBfdGhpcy5wcm9wcy5pbm5lclJlZjtcclxuICAgICAgICAgICAgaWYgKCFpbm5lclJlZilcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbm5lclJlZiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgaW5uZXJSZWYocmVmKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlubmVyUmVmLmN1cnJlbnQgPSByZWY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIF90aGlzLnNob3VsZEZvcndhcmRQcm9wID1cclxuICAgICAgICAgICAgdHlwZW9mIF90aGlzLnByb3BzLmVsZW1lbnRUeXBlID09PSAnc3RyaW5nJyA/IGlzVmFsaWRQcm9wIDogdGVzdEFsd2F5c1RydWU7XHJcbiAgICAgICAgdmFyIHBvc2VDb25maWcgPSBfdGhpcy5wcm9wcy5wb3NlQ29uZmlnO1xyXG4gICAgICAgIF90aGlzLnBvc2VDb25maWcgPVxyXG4gICAgICAgICAgICB0eXBlb2YgcG9zZUNvbmZpZyA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgICAgICAgICAgPyBwb3NlQ29uZmlnKGZpbHRlclByb3BzKHByb3BzKSlcclxuICAgICAgICAgICAgICAgIDogcG9zZUNvbmZpZztcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBQb3NlRWxlbWVudC5wcm90b3R5cGUuZ2V0SW5pdGlhbFBvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgZ2V0SW5pdGlhbFBvc2VGcm9tUGFyZW50ID0gX2EuZ2V0SW5pdGlhbFBvc2VGcm9tUGFyZW50LCBwb3NlID0gX2EucG9zZSwgX3Bvc2UgPSBfYS5fcG9zZSwgaW5pdGlhbFBvc2UgPSBfYS5pbml0aWFsUG9zZTtcclxuICAgICAgICBpZiAoaW5pdGlhbFBvc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGluaXRpYWxQb3NlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHBhcmVudFBvc2UgPSBnZXRJbml0aWFsUG9zZUZyb21QYXJlbnQgJiYgZ2V0SW5pdGlhbFBvc2VGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgICAgIHZhciBpbml0aWFsUG9zZXMgPSAoQXJyYXkuaXNBcnJheShwYXJlbnRQb3NlKVxyXG4gICAgICAgICAgICAgICAgPyBwYXJlbnRQb3NlXHJcbiAgICAgICAgICAgICAgICA6IFtwYXJlbnRQb3NlXSlcclxuICAgICAgICAgICAgICAgIC5jb25jYXQocG9zZSwgX3Bvc2UpXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xyXG4gICAgICAgICAgICByZXR1cm4gaW5pdGlhbFBvc2VzLmxlbmd0aCA+IDAgPyBpbml0aWFsUG9zZXMgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFBvc2VFbGVtZW50LnByb3RvdHlwZS5nZXRGaXJzdFBvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgaW5pdGlhbFBvc2UgPSBfYS5pbml0aWFsUG9zZSwgcG9zZSA9IF9hLnBvc2UsIF9wb3NlID0gX2EuX3Bvc2U7XHJcbiAgICAgICAgaWYgKCFpbml0aWFsUG9zZSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHZhciBmaXJzdFBvc2UgPSAoQXJyYXkuaXNBcnJheShwb3NlKSA/IHBvc2UgOiBbcG9zZV0pXHJcbiAgICAgICAgICAgIC5jb25jYXQoX3Bvc2UpXHJcbiAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbik7XHJcbiAgICAgICAgcmV0dXJuIGZpcnN0UG9zZS5sZW5ndGggPT09IDEgPyBmaXJzdFBvc2VbMF0gOiBmaXJzdFBvc2U7XHJcbiAgICB9O1xyXG4gICAgUG9zZUVsZW1lbnQucHJvdG90eXBlLmdldFNldFByb3BzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwcm9wcyA9IGZpbHRlclByb3BzKHRoaXMucHJvcHMpO1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnBvcEZyb21GbG93ICYmIHRoaXMucmVmICYmIHRoaXMucmVmIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnBvcFN0eWxlKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9wcy5zdHlsZSA9IF9fYXNzaWduKHt9LCBwcm9wcy5zdHlsZSwgY2FsY1BvcEZyb21GbG93U3R5bGUodGhpcy5yZWYpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9wU3R5bGUgPSBwcm9wcy5zdHlsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHByb3BzLnN0eWxlID0gdGhpcy5wb3BTdHlsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wb3BTdHlsZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm9wcztcclxuICAgIH07XHJcbiAgICBQb3NlRWxlbWVudC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpbnZhcmlhbnQodGhpcy5yZWYgaW5zdGFuY2VvZiBFbGVtZW50LCBcIk5vIHZhbGlkIERPTSByZWYgZm91bmQuIElmIHlvdSdyZSBjb252ZXJ0aW5nIGFuIGV4aXN0aW5nIGNvbXBvbmVudCB2aWEgcG9zZWQoQ29tcG9uZW50KSwgeW91IG11c3QgZW5zdXJlIHlvdSdyZSBwYXNzaW5nIHRoZSByZWYgdG8gdGhlIGhvc3QgRE9NIG5vZGUgdmlhIHRoZSBSZWFjdC5mb3J3YXJkUmVmIGZ1bmN0aW9uLlwiKTtcclxuICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBvblZhbHVlQ2hhbmdlID0gX2Eub25WYWx1ZUNoYW5nZSwgcmVnaXN0ZXJDaGlsZCA9IF9hLnJlZ2lzdGVyQ2hpbGQsIHZhbHVlcyA9IF9hLnZhbHVlcywgcGFyZW50VmFsdWVzID0gX2EucGFyZW50VmFsdWVzLCBvbkRyYWdTdGFydCA9IF9hLm9uRHJhZ1N0YXJ0LCBvbkRyYWdFbmQgPSBfYS5vbkRyYWdFbmQsIG9uUHJlc3NTdGFydCA9IF9hLm9uUHJlc3NTdGFydCwgb25QcmVzc0VuZCA9IF9hLm9uUHJlc3NFbmQ7XHJcbiAgICAgICAgdmFyIGNvbmZpZyA9IF9fYXNzaWduKHt9LCB0aGlzLnBvc2VDb25maWcsIHsgaW5pdGlhbFBvc2U6IHRoaXMuZ2V0SW5pdGlhbFBvc2UoKSwgdmFsdWVzOiB2YWx1ZXMgfHwgdGhpcy5wb3NlQ29uZmlnLnZhbHVlcywgcGFyZW50VmFsdWVzOiBwYXJlbnRWYWx1ZXMgPyBvYmplY3RUb01hcChwYXJlbnRWYWx1ZXMpIDogdW5kZWZpbmVkLCBwcm9wczogdGhpcy5nZXRTZXRQcm9wcygpLCBvbkRyYWdTdGFydDogb25EcmFnU3RhcnQsXHJcbiAgICAgICAgICAgIG9uRHJhZ0VuZDogb25EcmFnRW5kLFxyXG4gICAgICAgICAgICBvblByZXNzU3RhcnQ6IG9uUHJlc3NTdGFydCxcclxuICAgICAgICAgICAgb25QcmVzc0VuZDogb25QcmVzc0VuZCwgb25DaGFuZ2U6IG9uVmFsdWVDaGFuZ2UgfSk7XHJcbiAgICAgICAgaWYgKCFyZWdpc3RlckNoaWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdFBvc2VyKHBvc2VGYWN0b3J5KHRoaXMucmVmLCBjb25maWcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlZ2lzdGVyQ2hpbGQoe1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudDogdGhpcy5yZWYsXHJcbiAgICAgICAgICAgICAgICBwb3NlQ29uZmlnOiBjb25maWcsXHJcbiAgICAgICAgICAgICAgICBvblJlZ2lzdGVyZWQ6IGZ1bmN0aW9uIChwb3NlcikgeyByZXR1cm4gX3RoaXMuaW5pdFBvc2VyKHBvc2VyKTsgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUG9zZUVsZW1lbnQucHJvdG90eXBlLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIHBvc2UgPSBfYS5wb3NlLCBfcG9zZSA9IF9hLl9wb3NlO1xyXG4gICAgICAgIGlmIChoYXNQb3NlKHBvc2UsICdmbGlwJykgfHwgaGFzUG9zZShfcG9zZSwgJ2ZsaXAnKSlcclxuICAgICAgICAgICAgdGhpcy5wb3Nlci5tZWFzdXJlKCk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgUG9zZUVsZW1lbnQucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIChwcmV2UHJvcHMpIHtcclxuICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBwb3NlID0gX2EucG9zZSwgX3Bvc2UgPSBfYS5fcG9zZSwgcG9zZUtleSA9IF9hLnBvc2VLZXk7XHJcbiAgICAgICAgdGhpcy5wb3Nlci5zZXRQcm9wcyh0aGlzLmdldFNldFByb3BzKCkpO1xyXG4gICAgICAgIGlmIChwb3NlS2V5ICE9PSBwcmV2UHJvcHMucG9zZUtleSB8fFxyXG4gICAgICAgICAgICBoYXNDaGFuZ2VkKHByZXZQcm9wcy5wb3NlLCBwb3NlKSB8fFxyXG4gICAgICAgICAgICBwb3NlID09PSAnZmxpcCcpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRQb3NlKHBvc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX3Bvc2UgIT09IHByZXZQcm9wcy5fcG9zZSB8fCBfcG9zZSA9PT0gJ2ZsaXAnKVxyXG4gICAgICAgICAgICB0aGlzLnNldFBvc2UoX3Bvc2UpO1xyXG4gICAgfTtcclxuICAgIFBvc2VFbGVtZW50LnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMucG9zZXIpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB2YXIgb25Vbm1vdW50ID0gdGhpcy5wcm9wcy5vblVubW91bnQ7XHJcbiAgICAgICAgaWYgKG9uVW5tb3VudClcclxuICAgICAgICAgICAgb25Vbm1vdW50KHRoaXMucG9zZXIpO1xyXG4gICAgICAgIHRoaXMucG9zZXIuZGVzdHJveSgpO1xyXG4gICAgfTtcclxuICAgIFBvc2VFbGVtZW50LnByb3RvdHlwZS5pbml0UG9zZXIgPSBmdW5jdGlvbiAocG9zZXIpIHtcclxuICAgICAgICB0aGlzLnBvc2VyID0gcG9zZXI7XHJcbiAgICAgICAgdGhpcy5mbHVzaENoaWxkcmVuKCk7XHJcbiAgICAgICAgdmFyIGZpcnN0UG9zZSA9IHRoaXMuZ2V0Rmlyc3RQb3NlKCk7XHJcbiAgICAgICAgaWYgKGZpcnN0UG9zZSlcclxuICAgICAgICAgICAgdGhpcy5zZXRQb3NlKGZpcnN0UG9zZSk7XHJcbiAgICB9O1xyXG4gICAgUG9zZUVsZW1lbnQucHJvdG90eXBlLnNldFBvc2UgPSBmdW5jdGlvbiAocG9zZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIG9uUG9zZUNvbXBsZXRlID0gdGhpcy5wcm9wcy5vblBvc2VDb21wbGV0ZTtcclxuICAgICAgICB2YXIgcG9zZUxpc3QgPSBBcnJheS5pc0FycmF5KHBvc2UpID8gcG9zZSA6IFtwb3NlXTtcclxuICAgICAgICBQcm9taXNlLmFsbChwb3NlTGlzdC5tYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5ICYmIF90aGlzLnBvc2VyLnNldChrZXkpOyB9KSkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBvblBvc2VDb21wbGV0ZSAmJiBvblBvc2VDb21wbGV0ZShwb3NlKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgUG9zZUVsZW1lbnQucHJvdG90eXBlLmZsdXNoQ2hpbGRyZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gX2EuZWxlbWVudCwgcG9zZUNvbmZpZyA9IF9hLnBvc2VDb25maWcsIG9uUmVnaXN0ZXJlZCA9IF9hLm9uUmVnaXN0ZXJlZDtcclxuICAgICAgICAgICAgcmV0dXJuIG9uUmVnaXN0ZXJlZChfdGhpcy5wb3Nlci5hZGRDaGlsZChlbGVtZW50LCBwb3NlQ29uZmlnKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5jbGVhcigpO1xyXG4gICAgfTtcclxuICAgIFBvc2VFbGVtZW50LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnRUeXBlID0gdGhpcy5wcm9wcy5lbGVtZW50VHlwZTtcclxuICAgICAgICByZXR1cm4gKFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoUG9zZVBhcmVudFByb3ZpZGVyLCB7IHZhbHVlOiB0aGlzLmNoaWxkcmVuSGFuZGxlcnMgfSwgY3JlYXRlRWxlbWVudChlbGVtZW50VHlwZSwgcGlja0Fzc2lnbih0aGlzLnNob3VsZEZvcndhcmRQcm9wLCBbXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0U2V0UHJvcHMoKSxcclxuICAgICAgICAgICAgeyByZWY6IHRoaXMuc2V0UmVmIH1cclxuICAgICAgICBdKSkpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUG9zZUVsZW1lbnQ7XHJcbn0oUHVyZUNvbXBvbmVudCkpO1xuXG52YXIgc3VwcG9ydGVkRWxlbWVudHMgPSBbXHJcbiAgICAnYScsXHJcbiAgICAnYXJ0aWNsZScsXHJcbiAgICAnYXNpZGUnLFxyXG4gICAgJ2F1ZGlvJyxcclxuICAgICdiJyxcclxuICAgICdibG9ja3F1b3RlJyxcclxuICAgICdib2R5JyxcclxuICAgICdicicsXHJcbiAgICAnYnV0dG9uJyxcclxuICAgICdjYW52YXMnLFxyXG4gICAgJ2NhcHRpb24nLFxyXG4gICAgJ2NpdGUnLFxyXG4gICAgJ2NvZGUnLFxyXG4gICAgJ2NvbCcsXHJcbiAgICAnY29sZ3JvdXAnLFxyXG4gICAgJ2RhdGEnLFxyXG4gICAgJ2RhdGFsaXN0JyxcclxuICAgICdkaWFsb2cnLFxyXG4gICAgJ2RpdicsXHJcbiAgICAnZW0nLFxyXG4gICAgJ2VtYmVkJyxcclxuICAgICdmaWVsZHNldCcsXHJcbiAgICAnZmlnY2FwdGlvbicsXHJcbiAgICAnZmlndXJlJyxcclxuICAgICdmb290ZXInLFxyXG4gICAgJ2Zvcm0nLFxyXG4gICAgJ2gxJyxcclxuICAgICdoMicsXHJcbiAgICAnaDMnLFxyXG4gICAgJ2g0JyxcclxuICAgICdoNScsXHJcbiAgICAnaDYnLFxyXG4gICAgJ2hlYWQnLFxyXG4gICAgJ2hlYWRlcicsXHJcbiAgICAnaGdyb3VwJyxcclxuICAgICdocicsXHJcbiAgICAnaScsXHJcbiAgICAnaWZyYW1lJyxcclxuICAgICdpbWcnLFxyXG4gICAgJ2lucHV0JyxcclxuICAgICdsYWJlbCcsXHJcbiAgICAnbGVnZW5kJyxcclxuICAgICdsaScsXHJcbiAgICAnbmF2JyxcclxuICAgICdvYmplY3QnLFxyXG4gICAgJ29sJyxcclxuICAgICdvcHRpb24nLFxyXG4gICAgJ3AnLFxyXG4gICAgJ3BhcmFtJyxcclxuICAgICdwaWN0dXJlJyxcclxuICAgICdwcmUnLFxyXG4gICAgJ3Byb2dyZXNzJyxcclxuICAgICdxJyxcclxuICAgICdzZWN0aW9uJyxcclxuICAgICdzZWxlY3QnLFxyXG4gICAgJ3NwYW4nLFxyXG4gICAgJ3N0cm9uZycsXHJcbiAgICAndGFibGUnLFxyXG4gICAgJ3Rib2R5JyxcclxuICAgICd0ZCcsXHJcbiAgICAndGV4dGFyZWEnLFxyXG4gICAgJ3Rmb290JyxcclxuICAgICd0aCcsXHJcbiAgICAndGhlYWQnLFxyXG4gICAgJ3RpbWUnLFxyXG4gICAgJ3RpdGxlJyxcclxuICAgICd0cicsXHJcbiAgICAndWwnLFxyXG4gICAgJ3ZpZGVvJyxcclxuICAgICdjaXJjbGUnLFxyXG4gICAgJ2NsaXBQYXRoJyxcclxuICAgICdkZWZzJyxcclxuICAgICdlbGxpcHNlJyxcclxuICAgICdnJyxcclxuICAgICdpbWFnZScsXHJcbiAgICAnbGluZScsXHJcbiAgICAnbGluZWFyR3JhZGllbnQnLFxyXG4gICAgJ21hc2snLFxyXG4gICAgJ3BhdGgnLFxyXG4gICAgJ3BhdHRlcm4nLFxyXG4gICAgJ3BvbHlnb24nLFxyXG4gICAgJ3BvbHlsaW5lJyxcclxuICAgICdyYWRpYWxHcmFkaWVudCcsXHJcbiAgICAncmVjdCcsXHJcbiAgICAnc3RvcCcsXHJcbiAgICAnc3ZnJyxcclxuICAgICd0ZXh0JyxcclxuICAgICd0c3BhbidcclxuXTtcblxudmFyIGNvbXBvbmVudENhY2hlID0gbmV3IE1hcCgpO1xyXG52YXIgY3JlYXRlQ29tcG9uZW50RmFjdG9yeSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgIHZhciBjb21wb25lbnRGYWN0b3J5ID0gZnVuY3Rpb24gKHBvc2VDb25maWcpIHtcclxuICAgICAgICBpZiAocG9zZUNvbmZpZyA9PT0gdm9pZCAwKSB7IHBvc2VDb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHJldHVybiBmb3J3YXJkUmVmKGZ1bmN0aW9uIChfYSwgcmVmKSB7XHJcbiAgICAgICAgICAgIHZhciBfYiA9IF9hLndpdGhQYXJlbnQsIHdpdGhQYXJlbnQgPSBfYiA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9iLCBwcm9wcyA9IF9fcmVzdChfYSwgW1wid2l0aFBhcmVudFwiXSk7XHJcbiAgICAgICAgICAgIHdhcm5pbmcocHJvcHMuaW5uZXJSZWYgPT09IHVuZGVmaW5lZCwgJ2lubmVyUmVmIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgcmVmIGluc3RlYWQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybiAhd2l0aFBhcmVudCB8fCBwcm9wcy5wYXJlbnRWYWx1ZXMgPyAoUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChQb3NlRWxlbWVudCwgX19hc3NpZ24oeyBwb3NlQ29uZmlnOiBwb3NlQ29uZmlnLCBpbm5lclJlZjogcmVmLCBlbGVtZW50VHlwZToga2V5IH0sIHByb3BzKSkpIDogKFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoUG9zZVBhcmVudENvbnN1bWVyLCBudWxsLCBmdW5jdGlvbiAocGFyZW50Q3R4KSB7IHJldHVybiAoUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChQb3NlRWxlbWVudCwgX19hc3NpZ24oeyBwb3NlQ29uZmlnOiBwb3NlQ29uZmlnLCBlbGVtZW50VHlwZToga2V5LCBpbm5lclJlZjogcmVmIH0sIHByb3BzLCBwYXJlbnRDdHgpKSk7IH0pKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBjb21wb25lbnRDYWNoZS5zZXQoa2V5LCBjb21wb25lbnRGYWN0b3J5KTtcclxuICAgIHJldHVybiBjb21wb25lbnRGYWN0b3J5O1xyXG59O1xyXG52YXIgZ2V0Q29tcG9uZW50RmFjdG9yeSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgIHJldHVybiBjb21wb25lbnRDYWNoZS5oYXMoa2V5KVxyXG4gICAgICAgID8gY29tcG9uZW50Q2FjaGUuZ2V0KGtleSlcclxuICAgICAgICA6IGNyZWF0ZUNvbXBvbmVudEZhY3Rvcnkoa2V5KTtcclxufTtcclxudmFyIHBvc2VkID0gKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcclxuICAgIHJldHVybiBnZXRDb21wb25lbnRGYWN0b3J5KGNvbXBvbmVudCk7XHJcbn0pO1xyXG5zdXBwb3J0ZWRFbGVtZW50cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7XHJcbiAgICBhY2Nba2V5XSA9IGNyZWF0ZUNvbXBvbmVudEZhY3Rvcnkoa2V5KTtcclxuICAgIHJldHVybiBhY2M7XHJcbn0sIHBvc2VkKTtcblxudmFyIGdldEtleSA9IGZ1bmN0aW9uIChjaGlsZCkge1xyXG4gICAgaW52YXJpYW50KGNoaWxkICYmIGNoaWxkLmtleSAhPT0gbnVsbCwgJ0V2ZXJ5IGNoaWxkIG9mIFRyYW5zaXRpb24gbXVzdCBiZSBnaXZlbiBhIHVuaXF1ZSBrZXknKTtcclxuICAgIHZhciBjaGlsZEtleSA9IHR5cGVvZiBjaGlsZC5rZXkgPT09ICdudW1iZXInID8gY2hpbGQua2V5LnRvU3RyaW5nKCkgOiBjaGlsZC5rZXk7XHJcbiAgICByZXR1cm4gY2hpbGRLZXkucmVwbGFjZSgnLiQnLCAnJyk7XHJcbn07XHJcbnZhciBwcmVwZW5kUHJvcHMgPSBmdW5jdGlvbiAoZWxlbWVudCwgcHJvcHMpIHtcclxuICAgIHJldHVybiBjcmVhdGVFbGVtZW50KGVsZW1lbnQudHlwZSwgX19hc3NpZ24oeyBrZXk6IGVsZW1lbnQua2V5LCByZWY6IGVsZW1lbnQucmVmIH0sIHByb3BzLCBlbGVtZW50LnByb3BzKSk7XHJcbn07XHJcbnZhciBoYW5kbGVUcmFuc2l0aW9uID0gZnVuY3Rpb24gKF9hLCBfYikge1xyXG4gICAgdmFyIGRpc3BsYXllZENoaWxkcmVuID0gX2IuZGlzcGxheWVkQ2hpbGRyZW4sIGZpbmlzaGVkTGVhdmluZyA9IF9iLmZpbmlzaGVkTGVhdmluZywgaGFzSW5pdGlhbGl6ZWQgPSBfYi5oYXNJbml0aWFsaXplZCwgaW5kZXhlZENoaWxkcmVuID0gX2IuaW5kZXhlZENoaWxkcmVuLCBzY2hlZHVsZUNoaWxkUmVtb3ZhbCA9IF9iLnNjaGVkdWxlQ2hpbGRSZW1vdmFsO1xyXG4gICAgdmFyIGluY29taW5nQ2hpbGRyZW4gPSBfYS5jaGlsZHJlbiwgcHJlRW50ZXJQb3NlID0gX2EucHJlRW50ZXJQb3NlLCBlbnRlclBvc2UgPSBfYS5lbnRlclBvc2UsIGV4aXRQb3NlID0gX2EuZXhpdFBvc2UsIGFuaW1hdGVPbk1vdW50ID0gX2EuYW5pbWF0ZU9uTW91bnQsIGVudGVyQWZ0ZXJFeGl0ID0gX2EuZW50ZXJBZnRlckV4aXQsIGZsaXBNb3ZlID0gX2EuZmxpcE1vdmUsIG9uUmVzdCA9IF9hLm9uUmVzdCwgcHJvcHNGb3JDaGlsZHJlbiA9IF9fcmVzdChfYSwgW1wiY2hpbGRyZW5cIiwgXCJwcmVFbnRlclBvc2VcIiwgXCJlbnRlclBvc2VcIiwgXCJleGl0UG9zZVwiLCBcImFuaW1hdGVPbk1vdW50XCIsIFwiZW50ZXJBZnRlckV4aXRcIiwgXCJmbGlwTW92ZVwiLCBcIm9uUmVzdFwiXSk7XHJcbiAgICB2YXIgdGFyZ2V0Q2hpbGRyZW4gPSBtYWtlQ2hpbGRMaXN0KGluY29taW5nQ2hpbGRyZW4pO1xyXG4gICAgdmFyIG5leHRTdGF0ZSA9IHtcclxuICAgICAgICBkaXNwbGF5ZWRDaGlsZHJlbjogW11cclxuICAgIH07XHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgIHdhcm5pbmcoIXByb3BzRm9yQ2hpbGRyZW4ub25Qb3NlQ29tcGxldGUsIFwiPFRyYW5zaXRpb24vPiAob3IgPFBvc2VHcm91cC8+KSBkb2Vzbid0IGFjY2VwdCBvblBvc2VDb21wbGV0ZSBwcm9wLlwiKTtcclxuICAgIH1cclxuICAgIHZhciBwcmV2S2V5cyA9IGRpc3BsYXllZENoaWxkcmVuLm1hcChnZXRLZXkpO1xyXG4gICAgdmFyIG5leHRLZXlzID0gdGFyZ2V0Q2hpbGRyZW4ubWFwKGdldEtleSk7XHJcbiAgICB2YXIgaGFzUHJvcHNGb3JDaGlsZHJlbiA9IE9iamVjdC5rZXlzKHByb3BzRm9yQ2hpbGRyZW4pLmxlbmd0aCAhPT0gMDtcclxuICAgIHZhciBlbnRlcmluZyA9IG5ldyBTZXQobmV4dEtleXMuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGZpbmlzaGVkTGVhdmluZy5oYXNPd25Qcm9wZXJ0eShrZXkpIHx8IHByZXZLZXlzLmluZGV4T2Yoa2V5KSA9PT0gLTE7IH0pKTtcclxuICAgIGVudGVyaW5nLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gZGVsZXRlIGZpbmlzaGVkTGVhdmluZ1trZXldOyB9KTtcclxuICAgIHZhciBsZWF2aW5nID0gW107XHJcbiAgICB2YXIgbmV3bHlMZWF2aW5nID0ge307XHJcbiAgICBwcmV2S2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBpZiAoZW50ZXJpbmcuaGFzKGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaXNMZWF2aW5nID0gZmluaXNoZWRMZWF2aW5nLmhhc093blByb3BlcnR5KGtleSk7XHJcbiAgICAgICAgaWYgKCFpc0xlYXZpbmcgJiYgbmV4dEtleXMuaW5kZXhPZihrZXkpICE9PSAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxlYXZpbmcucHVzaChrZXkpO1xyXG4gICAgICAgIGlmICghaXNMZWF2aW5nKSB7XHJcbiAgICAgICAgICAgIGZpbmlzaGVkTGVhdmluZ1trZXldID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG5ld2x5TGVhdmluZ1trZXldID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHZhciBtb3ZpbmcgPSBuZXcgU2V0KHByZXZLZXlzLmZpbHRlcihmdW5jdGlvbiAoa2V5LCBpKSB7XHJcbiAgICAgICAgcmV0dXJuICFlbnRlcmluZy5oYXMoa2V5KSB8fCBsZWF2aW5nLmluZGV4T2Yoa2V5KSA9PT0gLTE7XHJcbiAgICB9KSk7XHJcbiAgICB0YXJnZXRDaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xyXG4gICAgICAgIHZhciBuZXdDaGlsZFByb3BzID0ge307XHJcbiAgICAgICAgaWYgKGVudGVyaW5nLmhhcyhjaGlsZC5rZXkpKSB7XHJcbiAgICAgICAgICAgIGlmIChoYXNJbml0aWFsaXplZCB8fCBhbmltYXRlT25Nb3VudCkge1xyXG4gICAgICAgICAgICAgICAgbmV3Q2hpbGRQcm9wcy5pbml0aWFsUG9zZSA9IHByZUVudGVyUG9zZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuZXdDaGlsZFByb3BzLl9wb3NlID0gZW50ZXJQb3NlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChtb3ZpbmcuaGFzKGNoaWxkLmtleSkgJiYgZmxpcE1vdmUpIHtcclxuICAgICAgICAgICAgbmV3Q2hpbGRQcm9wcy5fcG9zZSA9IFtlbnRlclBvc2UsICdmbGlwJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBuZXdDaGlsZFByb3BzLl9wb3NlID0gZW50ZXJQb3NlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbmV3Q2hpbGQgPSBjbG9uZUVsZW1lbnQoY2hpbGQsIG5ld0NoaWxkUHJvcHMpO1xyXG4gICAgICAgIGluZGV4ZWRDaGlsZHJlbltjaGlsZC5rZXldID0gbmV3Q2hpbGQ7XHJcbiAgICAgICAgbmV4dFN0YXRlLmRpc3BsYXllZENoaWxkcmVuLnB1c2goaGFzUHJvcHNGb3JDaGlsZHJlbiA/IHByZXBlbmRQcm9wcyhuZXdDaGlsZCwgcHJvcHNGb3JDaGlsZHJlbikgOiBuZXdDaGlsZCk7XHJcbiAgICB9KTtcclxuICAgIGxlYXZpbmcuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIGNoaWxkID0gaW5kZXhlZENoaWxkcmVuW2tleV07XHJcbiAgICAgICAgdmFyIG5ld0NoaWxkID0gbmV3bHlMZWF2aW5nW2tleV1cclxuICAgICAgICAgICAgPyBjbG9uZUVsZW1lbnQoY2hpbGQsIHtcclxuICAgICAgICAgICAgICAgIF9wb3NlOiBleGl0UG9zZSxcclxuICAgICAgICAgICAgICAgIG9uUG9zZUNvbXBsZXRlOiBmdW5jdGlvbiAocG9zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3NlID09PSBleGl0UG9zZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVDaGlsZFJlbW92YWwoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb25Qb3NlQ29tcGxldGUgPSBjaGlsZC5wcm9wcy5vblBvc2VDb21wbGV0ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob25Qb3NlQ29tcGxldGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUG9zZUNvbXBsZXRlKHBvc2UpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHBvcEZyb21GbG93OiBmbGlwTW92ZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICA6IGNoaWxkO1xyXG4gICAgICAgIHZhciBpbnNlcnRpb25JbmRleCA9IHByZXZLZXlzLmluZGV4T2Yoa2V5KTtcclxuICAgICAgICBpbmRleGVkQ2hpbGRyZW5bY2hpbGQua2V5XSA9IG5ld0NoaWxkO1xyXG4gICAgICAgIG5leHRTdGF0ZS5kaXNwbGF5ZWRDaGlsZHJlbi5zcGxpY2UoaW5zZXJ0aW9uSW5kZXgsIDAsIGhhc1Byb3BzRm9yQ2hpbGRyZW4gPyBwcmVwZW5kUHJvcHMobmV3Q2hpbGQsIHByb3BzRm9yQ2hpbGRyZW4pIDogbmV3Q2hpbGQpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbmV4dFN0YXRlO1xyXG59O1xyXG52YXIgaGFuZGxlQ2hpbGRyZW5UcmFuc2l0aW9ucyA9IChmdW5jdGlvbiAocHJvcHMsIHN0YXRlKSB7XHJcbiAgICB2YXIgbmV3U3RhdGUgPSBoYW5kbGVUcmFuc2l0aW9uKHByb3BzLCBzdGF0ZSk7XHJcbiAgICBuZXdTdGF0ZS5oYXNJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICByZXR1cm4gbmV3U3RhdGU7XHJcbn0pO1xyXG52YXIgbWFrZUNoaWxkTGlzdCA9IGZ1bmN0aW9uIChjaGlsZHJlbikge1xyXG4gICAgdmFyIGxpc3QgPSBbXTtcclxuICAgIENoaWxkcmVuLmZvckVhY2goY2hpbGRyZW4sIGZ1bmN0aW9uIChjaGlsZCkgeyByZXR1cm4gY2hpbGQgJiYgbGlzdC5wdXNoKGNoaWxkKTsgfSk7XHJcbiAgICByZXR1cm4gbGlzdDtcclxufTtcblxudmFyIFRyYW5zaXRpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFRyYW5zaXRpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBUcmFuc2l0aW9uKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBkaXNwbGF5ZWRDaGlsZHJlbjogW10sXHJcbiAgICAgICAgICAgIGZpbmlzaGVkTGVhdmluZzoge30sXHJcbiAgICAgICAgICAgIGhhc0luaXRpYWxpemVkOiBmYWxzZSxcclxuICAgICAgICAgICAgaW5kZXhlZENoaWxkcmVuOiB7fSxcclxuICAgICAgICAgICAgc2NoZWR1bGVDaGlsZFJlbW92YWw6IGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIF90aGlzLnJlbW92ZUNoaWxkKGtleSk7IH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnJlbW92ZUNoaWxkID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciBfYSA9IHRoaXMuc3RhdGUsIGRpc3BsYXllZENoaWxkcmVuID0gX2EuZGlzcGxheWVkQ2hpbGRyZW4sIGZpbmlzaGVkTGVhdmluZyA9IF9hLmZpbmlzaGVkTGVhdmluZztcclxuICAgICAgICB2YXIgX2IgPSB0aGlzLnByb3BzLCBlbnRlckFmdGVyRXhpdCA9IF9iLmVudGVyQWZ0ZXJFeGl0LCBvblJlc3QgPSBfYi5vblJlc3Q7XHJcbiAgICAgICAgaWYgKCFmaW5pc2hlZExlYXZpbmcuaGFzT3duUHJvcGVydHkoa2V5KSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGZpbmlzaGVkTGVhdmluZ1trZXldID0gdHJ1ZTtcclxuICAgICAgICBpZiAoIU9iamVjdC5rZXlzKGZpbmlzaGVkTGVhdmluZykuZXZlcnkoZnVuY3Rpb24gKGxlYXZpbmdLZXkpIHsgcmV0dXJuIGZpbmlzaGVkTGVhdmluZ1tsZWF2aW5nS2V5XTsgfSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGFyZ2V0Q2hpbGRyZW4gPSBkaXNwbGF5ZWRDaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKGNoaWxkKSB7IHJldHVybiAhZmluaXNoZWRMZWF2aW5nLmhhc093blByb3BlcnR5KGNoaWxkLmtleSk7IH0pO1xyXG4gICAgICAgIHZhciBuZXdTdGF0ZSA9IGVudGVyQWZ0ZXJFeGl0XHJcbiAgICAgICAgICAgID8gX19hc3NpZ24oeyBmaW5pc2hlZExlYXZpbmc6IHt9IH0sIGhhbmRsZUNoaWxkcmVuVHJhbnNpdGlvbnMoX19hc3NpZ24oe30sIHRoaXMucHJvcHMsIHsgZW50ZXJBZnRlckV4aXQ6IGZhbHNlIH0pLCBfX2Fzc2lnbih7fSwgdGhpcy5zdGF0ZSwgeyBkaXNwbGF5ZWRDaGlsZHJlbjogdGFyZ2V0Q2hpbGRyZW4gfSkpKSA6IHtcclxuICAgICAgICAgICAgZmluaXNoZWRMZWF2aW5nOiB7fSxcclxuICAgICAgICAgICAgZGlzcGxheWVkQ2hpbGRyZW46IHRhcmdldENoaWxkcmVuXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlLCBvblJlc3QpO1xyXG4gICAgfTtcclxuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnNob3VsZENvbXBvbmVudFVwZGF0ZSA9IGZ1bmN0aW9uIChuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlICE9PSBuZXh0U3RhdGU7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmRpc3BsYXllZENoaWxkcmVuO1xyXG4gICAgfTtcclxuICAgIFRyYW5zaXRpb24uZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIGZsaXBNb3ZlOiBmYWxzZSxcclxuICAgICAgICBlbnRlckFmdGVyRXhpdDogZmFsc2UsXHJcbiAgICAgICAgcHJlRW50ZXJQb3NlOiAnZXhpdCcsXHJcbiAgICAgICAgZW50ZXJQb3NlOiAnZW50ZXInLFxyXG4gICAgICAgIGV4aXRQb3NlOiAnZXhpdCdcclxuICAgIH07XHJcbiAgICBUcmFuc2l0aW9uLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyA9IGhhbmRsZUNoaWxkcmVuVHJhbnNpdGlvbnM7XHJcbiAgICByZXR1cm4gVHJhbnNpdGlvbjtcclxufShDb21wb25lbnQpKTtcblxudmFyIFBvc2VHcm91cCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoUG9zZUdyb3VwLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gUG9zZUdyb3VwKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIFBvc2VHcm91cC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KFRyYW5zaXRpb24sIF9fYXNzaWduKHt9LCB0aGlzLnByb3BzKSk7XHJcbiAgICB9O1xyXG4gICAgUG9zZUdyb3VwLmRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBmbGlwTW92ZTogdHJ1ZVxyXG4gICAgfTtcclxuICAgIHJldHVybiBQb3NlR3JvdXA7XHJcbn0oQ29tcG9uZW50KSk7XG5cbmV4cG9ydCBkZWZhdWx0IHBvc2VkO1xuZXhwb3J0IHsgVHJhbnNpdGlvbiwgUG9zZUdyb3VwIH07XG4iLCJpbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0ICAgICBmcm9tICdyZWFjdCc7XG5cbi8vIFRPRE8gcmVtb3ZlIHRoaXMgZmlsZSBlbnRpcmVseSB3aGVuIGljb24gY29tcG9uZW50IGlzIHJlYWR5LlxuY29uc3QgSWNvbkluZm9CbHVlID0gKHsgY2xhc3NOYW1lIH0pID0+IChcbiAgICA8c3ZnIGNsYXNzTmFtZT17Y2xhc3NOYW1lfSB3aWR0aD0nMTYnIGhlaWdodD0nMTYnIHZpZXdCb3g9JzAgMCAxNiAxNic+XG4gICAgICAgIDxnIGZpbGw9J25vbmUnIGZpbGxSdWxlPSdldmVub2RkJz5cbiAgICAgICAgICAgIDxjaXJjbGUgY3g9JzgnIGN5PSc4JyByPSc4JyBmaWxsPScjMjE5NkYzJyAvPlxuICAgICAgICAgICAgPGcgZmlsbD0nI0ZGRicgdHJhbnNmb3JtPSd0cmFuc2xhdGUoNi41IDQpJz5cbiAgICAgICAgICAgICAgICA8Y2lyY2xlIGN4PScxLjUnIGN5PScxJyByPScxJyAvPlxuICAgICAgICAgICAgICAgIDxyZWN0IHdpZHRoPScyJyBoZWlnaHQ9JzUnIHg9Jy41JyB5PSczJyByeD0nMScgLz5cbiAgICAgICAgICAgIDwvZz5cbiAgICAgICAgPC9nPlxuICAgIDwvc3ZnPlxuKTtcblxuSWNvbkluZm9CbHVlLnByb3BUeXBlcyA9IHtcbiAgICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBJY29uSW5mb0JsdWU7XG4iLCJpbXBvcnQgY2xhc3NOYW1lcyAgICAgICAgICAgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgUHJvcFR5cGVzICAgICAgICAgICAgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgICAgICAgICAgICAgICAgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NICAgICAgICAgICAgIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgcG9zZWQsIHsgUG9zZUdyb3VwIH0gZnJvbSAncmVhY3QtcG9zZSc7XG5pbXBvcnQgSWNvbkluZm9CbHVlICAgICAgICAgZnJvbSAnLi4vaWNvbi1pbmZvLWJsdWUuanN4JztcblxuY29uc3QgRmFkZUluID0gcG9zZWQuc3Bhbih7XG4gICAgZW50ZXI6IHtcbiAgICAgICAgb3BhY2l0eSAgIDogMSxcbiAgICAgICAgdHJhbnNpdGlvbjoge1xuICAgICAgICAgICAgZHVyYXRpb246IDE1MCxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGV4aXQ6IHtcbiAgICAgICAgb3BhY2l0eSAgIDogMCxcbiAgICAgICAgdHJhbnNpdGlvbjoge1xuICAgICAgICAgICAgZHVyYXRpb246IDE1MCxcbiAgICAgICAgfSxcbiAgICB9LFxufSk7XG5cbmNsYXNzIFBvcG92ZXJCdWJibGUgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBjYWxjdWxhdGVQb3NpdGlvbiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBhbGlnbm1lbnQsIHRhcmdldF9yZWN0YW5nbGUsIG1hcmdpbiA9IDAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgc3dpdGNoIChhbGlnbm1lbnQpIHtcbiAgICAgICAgICAgIGNhc2UgJ3RvcCc6IHJldHVybiB7XG4gICAgICAgICAgICAgICAgbGVmdCAgICAgOiAodGFyZ2V0X3JlY3RhbmdsZS53aWR0aCAvIDIpICsgdGFyZ2V0X3JlY3RhbmdsZS5sZWZ0LFxuICAgICAgICAgICAgICAgIGJvdHRvbSAgIDogKHdpbmRvdy5pbm5lckhlaWdodCAtIHRhcmdldF9yZWN0YW5nbGUudG9wKSArIG1hcmdpbixcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKC01MCUpJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlICdib3R0b20nOiByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxlZnQgICAgIDogKHRhcmdldF9yZWN0YW5nbGUud2lkdGggLyAyKSArIHRhcmdldF9yZWN0YW5nbGUubGVmdCxcbiAgICAgICAgICAgICAgICB0b3AgICAgICA6IHRhcmdldF9yZWN0YW5nbGUuYm90dG9tICsgbWFyZ2luLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoLTUwJSknLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgJ2xlZnQnOiByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJpZ2h0ICAgIDogKHdpbmRvdy5pbm5lcldpZHRoIC0gdGFyZ2V0X3JlY3RhbmdsZS5sZWZ0KSArIG1hcmdpbixcbiAgICAgICAgICAgICAgICB0b3AgICAgICA6ICh0YXJnZXRfcmVjdGFuZ2xlLmhlaWdodCAvIDIpICsgdGFyZ2V0X3JlY3RhbmdsZS50b3AsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgtNTAlKScsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSAncmlnaHQnOiByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxlZnQgICAgIDogdGFyZ2V0X3JlY3RhbmdsZS5yaWdodCArIG1hcmdpbixcbiAgICAgICAgICAgICAgICB0b3AgICAgICA6ICh0YXJnZXRfcmVjdGFuZ2xlLmhlaWdodCAvIDIpICsgdGFyZ2V0X3JlY3RhbmdsZS50b3AsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgtNTAlKScsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBsZWZ0OiB0YXJnZXRfcmVjdGFuZ2xlLmxlZnQsXG4gICAgICAgICAgICAgICAgdG9wIDogdGFyZ2V0X3JlY3RhbmdsZS50b3AsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYWxpZ25tZW50LFxuICAgICAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICAgICAgaGFzX2Vycm9yLFxuICAgICAgICAgICAgaWNvbixcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgaXNfb3BlbixcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICB0YXJnZXRfcmVjdGFuZ2xlLFxuICAgICAgICAgICAgcG9ydGFsX2NvbnRhaW5lcixcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgaWYgKCF0YXJnZXRfcmVjdGFuZ2xlKSByZXR1cm4gbnVsbDtcblxuICAgICAgICBjb25zdCBwb3BvdmVyX2J1YmJsZSA9IChcbiAgICAgICAgICAgIDxQb3NlR3JvdXA+XG4gICAgICAgICAgICAgICAgeyBpc19vcGVuICYmXG4gICAgICAgICAgICAgICAgPEZhZGVJbiBrZXk9J2ZhZGVfaW4nIGluaXRpYWxQb3NlPSdleGl0JyBzdHlsZT17eyBwb3NpdGlvbjogJ2ZpeGVkJywgekluZGV4OiA5OTkgfX0+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17IHRhcmdldF9yZWN0YW5nbGUgPyB0aGlzLmNhbGN1bGF0ZVBvc2l0aW9uKCkgOiB7fX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcG9wb3Zlci1wb3M9e2FsaWdubWVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RjLXBvcG92ZXJfX2J1YmJsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAnZGMtcG9wb3Zlcl9fYnViYmxlLS1lcnJvcic6IGhhc19lcnJvciB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtpZH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgeyBpY29uID09PSAnaW5mbycgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2RjLXBvcG92ZXJfX2J1YmJsZV9faWNvbic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uSW5mb0JsdWUgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nZGMtcG9wb3Zlcl9fYnViYmxlX190ZXh0Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IG1lc3NhZ2UgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdkYy1wb3BvdmVyX19idWJibGVfX2Fycm93JyAvPlxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9GYWRlSW4+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9Qb3NlR3JvdXA+XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIFJlYWN0RE9NLmNyZWF0ZVBvcnRhbChcbiAgICAgICAgICAgIHBvcG92ZXJfYnViYmxlLFxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9ydGFsX2NvbnRhaW5lcilcbiAgICAgICAgKTtcbiAgICB9XG59XG5cblBvcG92ZXJCdWJibGUucHJvcFR5cGVzID0ge1xuICAgIGFsaWdubWVudCAgICAgICA6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY2hpbGRyZW4gICAgICAgIDogUHJvcFR5cGVzLm5vZGUsXG4gICAgY2xhc3NOYW1lICAgICAgIDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBoYXNfZXJyb3IgICAgICAgOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBpY29uICAgICAgICAgICAgOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGlkICAgICAgICAgICAgICA6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgaXNfb3BlbiAgICAgICAgIDogUHJvcFR5cGVzLmJvb2wsXG4gICAgbWFyZ2luICAgICAgICAgIDogUHJvcFR5cGVzLm51bWJlcixcbiAgICBtZXNzYWdlICAgICAgICAgOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgdGFyZ2V0X3JlY3RhbmdsZTogUHJvcFR5cGVzLm9iamVjdCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFBvcG92ZXJCdWJibGU7XG4iLCJpbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBQcm9wVHlwZXMgIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0ICAgICAgZnJvbSAncmVhY3QnO1xuXG4vLyBUT0RPIHJlbW92ZSB0aGlzIGZpbGUgZW50aXJlbHkgd2hlbiBpY29uIGNvbXBvbmVudCBpcyByZWFkeS5cbmNvbnN0IEljb25JbmZvT3V0bGluZSA9ICh7IGNsYXNzTmFtZSwgb25Nb3VzZUVudGVyLCBvbk1vdXNlTGVhdmUgfSkgPT4gKFxuICAgIDxzdmdcbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdpbmxpbmUtaWNvbicsIGNsYXNzTmFtZSl9XG4gICAgICAgIGhlaWdodD0nMTYnXG4gICAgICAgIG9uTW91c2VFbnRlcj17b25Nb3VzZUVudGVyfVxuICAgICAgICBvbk1vdXNlTGVhdmU9e29uTW91c2VMZWF2ZX1cbiAgICAgICAgdmlld0JveD0nMCAwIDE2IDE2J1xuICAgICAgICB3aWR0aD0nMTYnXG5cbiAgICA+XG4gICAgICAgIDxwYXRoIGNsYXNzTmFtZT0nY29sb3IxLWZpbGwnIGZpbGw9J3JnYmEoMCwgMCwgMCwgMC4xNiknIGZpbGxSdWxlPSdldmVub2RkJyBkPSdNOCAxNUE3IDcgMCAxIDAgOCAxYTcgNyAwIDAgMCAwIDE0em0wIDFBOCA4IDAgMSAxIDggMGE4IDggMCAwIDEgMCAxNnpNOCA2YS43NS43NSAwIDEgMCAwLTEuNUEuNzUuNzUgMCAwIDAgOCA2em0wIDFhLjUuNSAwIDAgMC0uNS41djRhLjUuNSAwIDEgMCAxIDB2LTRBLjUuNSAwIDAgMCA4IDd6JyAvPlxuICAgIDwvc3ZnPlxuKTtcblxuSWNvbkluZm9PdXRsaW5lLnByb3BUeXBlcyA9IHtcbiAgICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBJY29uSW5mb091dGxpbmU7XG4iLCJpbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0ICAgICBmcm9tICdyZWFjdCc7XG5cbi8vIFRPRE8gcmVtb3ZlIHRoaXMgZmlsZSBlbnRpcmVseSB3aGVuIGljb24gY29tcG9uZW50IGlzIHJlYWR5LlxuY29uc3QgSWNvblF1ZXN0aW9uID0gKHsgY2xhc3NOYW1lIH0pID0+IChcbiAgICA8c3ZnIGNsYXNzTmFtZT17Y2xhc3NOYW1lfSB3aWR0aD0nMTYnIGhlaWdodD0nMTYnIHZpZXdCb3g9JzAgMCAxNiAxNic+XG4gICAgICAgIDxnIGZpbGw9JyNGRkYnIGZpbGxSdWxlPSdldmVub2RkJz5cbiAgICAgICAgICAgIDxwYXRoIGQ9J004IDE2QTggOCAwIDEgMSA4IDBhOCA4IDAgMCAxIDAgMTZ6bTAtMUE3IDcgMCAxIDAgOCAxYTcgNyAwIDAgMCAwIDE0eicgZmlsbFJ1bGU9J25vbnplcm8nIC8+XG4gICAgICAgICAgICA8cGF0aCBkPSdNNy4zOSA5LjUxOGMuMDA3LS4zNzMuMDUyLS42NjguMTM0LS44ODUuMDgyLS4yMTYuMjUtLjQ1Ni41MDMtLjcybC42NDYtLjYzNmMuMjc2LS4yOTguNDE1LS42MTguNDE1LS45NiAwLS4zMy0uMDktLjU4OC0uMjcyLS43NzQtLjE4LS4xODctLjQ0NC0uMjgtLjc4OS0uMjgtLjMzNSAwLS42MDUuMDg0LS44MDkuMjU0YS44NDIuODQyIDAgMCAwLS4zMDYuNjgySDZjLjAwNy0uNTA4LjE5Ni0uOTE4LjU3LTEuMjMuMzczLS4zMTMuODU5LS40NjkgMS40NTctLjQ2OS42MjIgMCAxLjEwNi4xNiAxLjQ1My40NzguMzQ3LjMxOC41Mi43NTUuNTIgMS4zMSAwIC41NS0uMjY2IDEuMDkxLS43OTkgMS42MjVsLS41MzguNTA4Yy0uMjQuMjU1LS4zNi42Mi0uMzYgMS4wOTdoLS45MTJ6bS0uMDM5IDEuNDkyYS41LjUgMCAwIDEgLjEzNi0uMzU1Yy4wOS0uMDk2LjIyNC0uMTQ0LjQwMi0uMTQ0LjE3OCAwIC4zMTIuMDQ4LjQwNC4xNDRhLjQ5My40OTMgMCAwIDEgLjEzOS4zNTUuNDc3LjQ3NyAwIDAgMS0uMTM5LjM1MWMtLjA5Mi4wOTMtLjIyNi4xMzktLjQwNC4xMzktLjE3OCAwLS4zMTItLjA0Ni0uNDAyLS4xMzlhLjQ4MS40ODEgMCAwIDEtLjEzNi0uMzV6JyAvPlxuICAgICAgICA8L2c+XG4gICAgPC9zdmc+XG4pO1xuXG5JY29uUXVlc3Rpb24ucHJvcFR5cGVzID0ge1xuICAgIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEljb25RdWVzdGlvbjtcbiIsImltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgICAgIGZyb20gJ3JlYWN0JztcblxuLy8gVE9ETyByZW1vdmUgdGhpcyBmaWxlIGVudGlyZWx5IHdoZW4gaWNvbiBjb21wb25lbnQgaXMgcmVhZHkuXG5jb25zdCBJY29uUmVkRG90ID0gKHsgY2xhc3NOYW1lIH0pID0+IChcbiAgICA8c3ZnIGNsYXNzTmFtZT17Y2xhc3NOYW1lfSB3aWR0aD0nNCcgaGVpZ2h0PSc0Jz5cbiAgICAgICAgPGNpcmNsZSBjeD0nMTE2MycgY3k9JzYyNicgcj0nMicgdHJhbnNmb3JtPSd0cmFuc2xhdGUoLTExNjEgLTYyNCknIGZpbGw9JyNFMzFDNEInIGZpbGxSdWxlPSdub256ZXJvJyAvPlxuICAgIDwvc3ZnPlxuKTtcblxuSWNvblJlZERvdC5wcm9wVHlwZXMgPSB7XG4gICAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgSWNvblJlZERvdDtcbiIsImltcG9ydCBjbGFzc05hbWVzICAgICAgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgUHJvcFR5cGVzICAgICAgIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0ICAgICAgICAgICBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUG9wb3ZlckJ1YmJsZSAgIGZyb20gJy4vcG9wb3Zlci1idWJibGUuanN4JztcbmltcG9ydCBJY29uSW5mb091dGxpbmUgZnJvbSAnLi4vaWNvbi1pbmZvLW91dGxpbmUuanN4JztcbmltcG9ydCBJY29uUXVlc3Rpb24gICAgZnJvbSAnLi4vaWNvbi1xdWVzdGlvbi5qc3gnO1xuaW1wb3J0IEljb25SZWREb3QgICAgICBmcm9tICcuLi9pY29uLXJlZC1kb3QuanN4JztcblxuY2xhc3MgUG9wb3ZlciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgICAgICAgICAgICA9IHtcbiAgICAgICAgICAgIGlzX29wZW4gICAgICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgdGFyZ2V0X3JlY3RhbmdsZTogbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50YXJnZXRfcmVmZXJlbmNlID0gUmVhY3QuY3JlYXRlUmVmKCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzX29wZW4gICAgICAgICA6IHRoaXMucHJvcHMuaGFzX2Vycm9yLFxuICAgICAgICAgICAgdGFyZ2V0X3JlY3RhbmdsZTogdGhpcy50YXJnZXRfcmVmZXJlbmNlLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRvZ2dsZU9wZW4gPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNfb3BlbiAgICAgICAgIDogQm9vbGVhbih0aGlzLnByb3BzLm1lc3NhZ2UpLFxuICAgICAgICAgICAgdGFyZ2V0X3JlY3RhbmdsZTogdGhpcy50YXJnZXRfcmVmZXJlbmNlLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0b2dnbGVDbG9zZSA9ICgpID0+IHRoaXMuc2V0U3RhdGUoeyBpc19vcGVuOiBmYWxzZSB9KTtcblxuICAgIHJlbmRlciAoKSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGFsaWdubWVudCxcbiAgICAgICAgICAgIGNoaWxkcmVuLFxuICAgICAgICAgICAgY2xhc3NOYW1lQnViYmxlLFxuICAgICAgICAgICAgY2xhc3NOYW1lVGFyZ2V0LFxuICAgICAgICAgICAgY2xhc3NOYW1lVGFyZ2V0SWNvbixcbiAgICAgICAgICAgIGRpc2FibGVfdGFyZ2V0X2ljb24sXG4gICAgICAgICAgICBoYXNfZXJyb3IsXG4gICAgICAgICAgICBpY29uLFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBtYXJnaW4sXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgICAgICBjb25zdCBpY29uX2NsYXNzX25hbWUgPSBjbGFzc05hbWVzKGNsYXNzTmFtZVRhcmdldEljb24sIGljb24pO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZGMtcG9wb3ZlcidcbiAgICAgICAgICAgICAgICBpZD17aWR9XG4gICAgICAgICAgICAgICAgb25Nb3VzZUVudGVyPXt0aGlzLnRvZ2dsZU9wZW59XG4gICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXt0aGlzLnRvZ2dsZUNsb3NlfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKGNsYXNzTmFtZVRhcmdldCwgJ2RjLXBvcG92ZXJfX3RhcmdldCcpfSByZWY9e3RoaXMudGFyZ2V0X3JlZmVyZW5jZX0+XG4gICAgICAgICAgICAgICAgICAgIHshZGlzYWJsZV90YXJnZXRfaWNvbiAmJlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9e21lc3NhZ2UgPyAnZGMtcG9wb3Zlcl9fdGFyZ2V0X19pY29uJyA6ICdkYy1wb3BvdmVyX190YXJnZXRfX2ljb24tLWRpc2FibGVkJ30+XG4gICAgICAgICAgICAgICAgICAgICAgICB7KGljb24gPT09ICdpbmZvJykgJiYgPEljb25JbmZvT3V0bGluZSBjbGFzc05hbWU9e2ljb25fY2xhc3NfbmFtZX0gLz59XG4gICAgICAgICAgICAgICAgICAgICAgICB7KGljb24gPT09ICdxdWVzdGlvbicpICYmIDxJY29uUXVlc3Rpb24gY2xhc3NOYW1lPXtpY29uX2NsYXNzX25hbWV9IC8+fVxuICAgICAgICAgICAgICAgICAgICAgICAgeyhpY29uID09PSAnZG90JykgJiYgPEljb25SZWREb3QgY2xhc3NOYW1lPXtpY29uX2NsYXNzX25hbWV9IC8+fVxuICAgICAgICAgICAgICAgICAgICA8L2k+XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8UG9wb3ZlckJ1YmJsZVxuICAgICAgICAgICAgICAgICAgICBhbGlnbm1lbnQ9e2FsaWdubWVudH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVCdWJibGV9XG4gICAgICAgICAgICAgICAgICAgIGhhc19lcnJvcj17aGFzX2Vycm9yfVxuICAgICAgICAgICAgICAgICAgICBpY29uPXtpY29ufVxuICAgICAgICAgICAgICAgICAgICBpZD17YCR7aWR9X2J1YmJsZWB9XG4gICAgICAgICAgICAgICAgICAgIGlzX29wZW49e3RoaXMuc3RhdGUuaXNfb3Blbn1cbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X3JlY3RhbmdsZT17dGhpcy5zdGF0ZS50YXJnZXRfcmVjdGFuZ2xlfVxuICAgICAgICAgICAgICAgICAgICBtYXJnaW49e21hcmdpbn1cbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT17bWVzc2FnZX1cbiAgICAgICAgICAgICAgICAgICAgcG9ydGFsX2NvbnRhaW5lcj17dGhpcy5wcm9wcy5wb3J0YWxfY29udGFpbmVyfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblBvcG92ZXIuZGVmYXVsdFByb3BzID0ge1xuICAgIHBvcnRhbF9jb250YWluZXI6ICdkZXJpdl9hcHAnLFxufTtcblxuUG9wb3Zlci5wcm9wVHlwZXMgPSB7XG4gICAgYWxpZ25tZW50ICAgICAgICAgIDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBjaGlsZHJlbiAgICAgICAgICAgOiBQcm9wVHlwZXMubm9kZSxcbiAgICBjbGFzc05hbWVCdWJibGUgICAgOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGNsYXNzTmFtZVRhcmdldCAgICA6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY2xhc3NOYW1lVGFyZ2V0SWNvbjogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBkaXNhYmxlX3RhcmdldF9pY29uOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBoYXNfZXJyb3IgICAgICAgICAgOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBpY29uICAgICAgICAgICAgICAgOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGlkICAgICAgICAgICAgICAgICA6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgbWFyZ2luICAgICAgICAgICAgIDogUHJvcFR5cGVzLm51bWJlcixcbiAgICBtZXNzYWdlICAgICAgICAgICAgOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHBvcnRhbF9jb250YWluZXIgICA6IFByb3BUeXBlcy5zdHJpbmcsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBQb3BvdmVyO1xuIiwiaW1wb3J0ICcuL3BvcG92ZXIuc2Nzcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZyb20gJy4vcG9wb3Zlci5qc3gnO1xuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbk1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3hPQTtBQUNBO0FBQ0EsYUFXQTtBQUNBO0FBQ0E7OztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDN0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcFpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDamlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcC9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzF2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3RlQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTkE7QUFDQTtBQVdBO0FBQ0E7QUFEQTtBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQVBBO0FBQ0E7QUFjQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFJQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQXJCQTtBQTBCQTtBQUNBOzs7Ozs7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBYUE7QUFFQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBUkE7QUFXQTtBQUFBO0FBS0E7QUFBQTtBQUdBO0FBQUE7QUFPQTtBQUlBOzs7O0FBakZBO0FBQ0E7QUFtRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBYUE7O0FDdkhBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBU0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVZBO0FBQ0E7QUFhQTtBQUNBO0FBREE7QUFJQTs7QUN2QkE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFKQTtBQUNBO0FBUUE7QUFDQTtBQURBO0FBSUE7O0FDakJBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQUNBO0FBS0E7QUFDQTtBQURBO0FBSUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBRkE7QUFpQkE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBdEJBO0FBdUJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUF0QkE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQU5BO0FBT0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFXQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFjQTs7OztBQTNFQTtBQUNBO0FBNkVBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFlQTs7QUN6R0E7QUFBQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8\n")},,,function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _raf2 = __webpack_require__(12);\n\nvar _raf3 = _interopRequireDefault(_raf2);\n\nvar _domCss = __webpack_require__(16);\n\nvar _domCss2 = _interopRequireDefault(_domCss);\n\nvar _react = __webpack_require__(0);\n\nvar _propTypes = __webpack_require__(1);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _isString = __webpack_require__(22);\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _getScrollbarWidth = __webpack_require__(23);\n\nvar _returnFalse = __webpack_require__(24);\n\nvar _returnFalse2 = _interopRequireDefault(_returnFalse);\n\nvar _getInnerWidth = __webpack_require__(25);\n\nvar _getInnerWidth2 = _interopRequireDefault(_getInnerWidth);\n\nvar _getInnerHeight = __webpack_require__(26);\n\nvar _getInnerHeight2 = _interopRequireDefault(_getInnerHeight);\n\nvar _styles = __webpack_require__(27);\n\nvar _defaultRenderElements = __webpack_require__(28);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar POLL_SCROLLBAR_WIDTH_INTERVAL = 3000;\n\nvar Scrollbars = function (_Component) {\n    _inherits(Scrollbars, _Component);\n\n    function Scrollbars(props) {\n        var _ref;\n\n        _classCallCheck(this, Scrollbars);\n\n        for (var _len = arguments.length, rest = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            rest[_key - 1] = arguments[_key];\n        }\n\n        var _this = _possibleConstructorReturn(this, (_ref = Scrollbars.__proto__ || Object.getPrototypeOf(Scrollbars)).call.apply(_ref, [this, props].concat(rest)));\n\n        _this.getScrollLeft = _this.getScrollLeft.bind(_this);\n        _this.getScrollTop = _this.getScrollTop.bind(_this);\n        _this.getScrollWidth = _this.getScrollWidth.bind(_this);\n        _this.getScrollHeight = _this.getScrollHeight.bind(_this);\n        _this.getClientWidth = _this.getClientWidth.bind(_this);\n        _this.getClientHeight = _this.getClientHeight.bind(_this);\n        _this.getPaddingWidth = _this.getPaddingWidth.bind(_this);\n        _this.getPaddingHeight = _this.getPaddingHeight.bind(_this);\n        _this.getValues = _this.getValues.bind(_this);\n        _this.getThumbHorizontalWidth = _this.getThumbHorizontalWidth.bind(_this);\n        _this.getThumbVerticalHeight = _this.getThumbVerticalHeight.bind(_this);\n        _this.getScrollLeftForOffset = _this.getScrollLeftForOffset.bind(_this);\n        _this.getScrollTopForOffset = _this.getScrollTopForOffset.bind(_this);\n\n        _this.scrollLeft = _this.scrollLeft.bind(_this);\n        _this.scrollTop = _this.scrollTop.bind(_this);\n        _this.scrollToLeft = _this.scrollToLeft.bind(_this);\n        _this.scrollToTop = _this.scrollToTop.bind(_this);\n        _this.scrollToRight = _this.scrollToRight.bind(_this);\n        _this.scrollToBottom = _this.scrollToBottom.bind(_this);\n\n        _this.handleTrackMouseEnter = _this.handleTrackMouseEnter.bind(_this);\n        _this.handleTrackMouseLeave = _this.handleTrackMouseLeave.bind(_this);\n        _this.handleHorizontalTrackMouseDown = _this.handleHorizontalTrackMouseDown.bind(_this);\n        _this.handleVerticalTrackMouseDown = _this.handleVerticalTrackMouseDown.bind(_this);\n        _this.handleHorizontalThumbMouseDown = _this.handleHorizontalThumbMouseDown.bind(_this);\n        _this.handleVerticalThumbMouseDown = _this.handleVerticalThumbMouseDown.bind(_this);\n        _this.handleWindowResize = _this.handleWindowResize.bind(_this);\n        _this.handleScroll = _this.handleScroll.bind(_this);\n        _this.handleDrag = _this.handleDrag.bind(_this);\n        _this.handleDragEnd = _this.handleDragEnd.bind(_this);\n        _this.pollScrollbarWidth = _this.pollScrollbarWidth.bind(_this);\n\n        _this.state = {\n            didMountUniversal: false,\n            scrollbarWidth: 17\n        };\n        return _this;\n    }\n\n    _createClass(Scrollbars, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.addListeners();\n            this.update();\n            this.componentDidMountUniversal();\n        }\n    }, {\n        key: 'componentDidMountUniversal',\n        value: function componentDidMountUniversal() {\n            // eslint-disable-line react/sort-comp\n            var universal = this.props.universal;\n\n            if (!universal) return;\n            this.setState({ didMountUniversal: true });\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            this.update();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.removeListeners();\n            (0, _raf2.cancel)(this.requestFrame);\n            clearTimeout(this.hideTracksTimeout);\n            clearInterval(this.detectScrollingInterval);\n        }\n    }, {\n        key: 'getScrollLeft',\n        value: function getScrollLeft() {\n            if (!this.view) return 0;\n            return this.view.scrollLeft;\n        }\n    }, {\n        key: 'getScrollTop',\n        value: function getScrollTop() {\n            if (!this.view) return 0;\n            return this.view.scrollTop;\n        }\n    }, {\n        key: 'getScrollWidth',\n        value: function getScrollWidth() {\n            if (!this.view) return 0;\n            return this.view.scrollWidth - this.getPaddingWidth();\n        }\n    }, {\n        key: 'getScrollHeight',\n        value: function getScrollHeight() {\n            if (!this.view) return 0;\n            return this.view.scrollHeight - this.getPaddingHeight();\n        }\n    }, {\n        key: 'getClientWidth',\n        value: function getClientWidth() {\n            if (!this.view) return 0;\n            return this.view.clientWidth - this.getPaddingWidth();\n        }\n    }, {\n        key: 'getClientHeight',\n        value: function getClientHeight() {\n            if (!this.view) return 0;\n            return this.view.clientHeight - this.getPaddingHeight();\n        }\n    }, {\n        key: 'getPaddingWidth',\n        value: function getPaddingWidth() {\n            return _styles.scrollbarSize;\n        }\n    }, {\n        key: 'getPaddingHeight',\n        value: function getPaddingHeight() {\n            return _styles.scrollbarSize;\n        }\n    }, {\n        key: 'getValues',\n        value: function getValues() {\n            if (!this.view) return null;\n\n            var _ref2 = this.view || {},\n                _ref2$offsetWidth = _ref2.offsetWidth,\n                offsetWidth = _ref2$offsetWidth === undefined ? 0 : _ref2$offsetWidth,\n                _ref2$scrollLeft = _ref2.scrollLeft,\n                scrollLeft = _ref2$scrollLeft === undefined ? 0 : _ref2$scrollLeft,\n                _ref2$scrollTop = _ref2.scrollTop,\n                scrollTop = _ref2$scrollTop === undefined ? 0 : _ref2$scrollTop,\n                _ref2$scrollWidth = _ref2.scrollWidth,\n                realScrollWidth = _ref2$scrollWidth === undefined ? 0 : _ref2$scrollWidth,\n                _ref2$scrollHeight = _ref2.scrollHeight,\n                realScrollHeight = _ref2$scrollHeight === undefined ? 0 : _ref2$scrollHeight,\n                _ref2$clientWidth = _ref2.clientWidth,\n                realClientWidth = _ref2$clientWidth === undefined ? 0 : _ref2$clientWidth,\n                _ref2$clientHeight = _ref2.clientHeight,\n                realClientHeight = _ref2$clientHeight === undefined ? 0 : _ref2$clientHeight;\n\n            var scrollWidth = realScrollWidth - this.getPaddingWidth();\n            var scrollHeight = realScrollHeight - this.getPaddingHeight();\n            var clientWidth = realClientWidth - this.getPaddingWidth();\n            var clientHeight = realClientHeight - this.getPaddingHeight();\n\n            return {\n                left: scrollLeft / (scrollWidth - clientWidth) || 0,\n                top: scrollTop / (scrollHeight - clientHeight) || 0,\n                offsetWidth: offsetWidth,\n                realClientWidth: realClientWidth,\n                realClientHeight: realClientHeight,\n                scrollLeft: scrollLeft,\n                scrollTop: scrollTop,\n                scrollWidth: scrollWidth,\n                scrollHeight: scrollHeight,\n                clientWidth: clientWidth,\n                clientHeight: clientHeight\n            };\n        }\n    }, {\n        key: 'getThumbHorizontalWidth',\n        value: function getThumbHorizontalWidth() {\n            var _props = this.props,\n                thumbSize = _props.thumbSize,\n                thumbMinSize = _props.thumbMinSize;\n            var _view = this.view,\n                realScrollWidth = _view.scrollWidth,\n                realClientWidth = _view.clientWidth;\n\n            var scrollWidth = realScrollWidth - this.getPaddingWidth();\n            var clientWidth = realClientWidth - this.getPaddingWidth();\n            var trackWidth = (0, _getInnerWidth2[\"default\"])(this.trackHorizontal);\n            var width = Math.ceil(clientWidth / scrollWidth * trackWidth);\n            if (scrollWidth <= clientWidth) return 0;\n            if (thumbSize) return thumbSize;\n            return Math.max(width, thumbMinSize);\n        }\n    }, {\n        key: 'getThumbVerticalHeight',\n        value: function getThumbVerticalHeight() {\n            var _props2 = this.props,\n                thumbSize = _props2.thumbSize,\n                thumbMinSize = _props2.thumbMinSize;\n            var _view2 = this.view,\n                realScrollHeight = _view2.scrollHeight,\n                realClientHeight = _view2.clientHeight;\n\n            var scrollHeight = realScrollHeight - this.getPaddingHeight();\n            var clientHeight = realClientHeight - this.getPaddingHeight();\n            var trackHeight = (0, _getInnerHeight2[\"default\"])(this.trackVertical);\n            var height = Math.ceil(clientHeight / scrollHeight * trackHeight);\n            if (scrollHeight <= clientHeight) return 0;\n            if (thumbSize) return thumbSize;\n            return Math.max(height, thumbMinSize);\n        }\n    }, {\n        key: 'getScrollLeftForOffset',\n        value: function getScrollLeftForOffset(offset) {\n            var _view3 = this.view,\n                realScrollWidth = _view3.scrollWidth,\n                realClientWidth = _view3.clientWidth;\n\n            var scrollWidth = realScrollWidth - this.getPaddingWidth();\n            var clientWidth = realClientWidth - this.getPaddingWidth();\n            var trackWidth = (0, _getInnerWidth2[\"default\"])(this.trackHorizontal);\n            var thumbWidth = this.getThumbHorizontalWidth();\n            return offset / (trackWidth - thumbWidth) * (scrollWidth - clientWidth);\n        }\n    }, {\n        key: 'getScrollTopForOffset',\n        value: function getScrollTopForOffset(offset) {\n            var _view4 = this.view,\n                realScrollHeight = _view4.scrollHeight,\n                realClientHeight = _view4.clientHeight;\n\n            var scrollHeight = realScrollHeight - this.getPaddingHeight();\n            var clientHeight = realClientHeight - this.getPaddingHeight();\n            var trackHeight = (0, _getInnerHeight2[\"default\"])(this.trackVertical);\n            var thumbHeight = this.getThumbVerticalHeight();\n            return offset / (trackHeight - thumbHeight) * (scrollHeight - clientHeight);\n        }\n    }, {\n        key: 'scrollLeft',\n        value: function scrollLeft() {\n            var left = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n            if (!this.view) return;\n            this.view.scrollLeft = left;\n        }\n    }, {\n        key: 'scrollTop',\n        value: function scrollTop() {\n            var top = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n            if (!this.view) return;\n            this.view.scrollTop = top;\n        }\n    }, {\n        key: 'scrollToLeft',\n        value: function scrollToLeft() {\n            if (!this.view) return;\n            this.view.scrollLeft = 0;\n        }\n    }, {\n        key: 'scrollToTop',\n        value: function scrollToTop() {\n            if (!this.view) return;\n            this.view.scrollTop = 0;\n        }\n    }, {\n        key: 'scrollToRight',\n        value: function scrollToRight() {\n            if (!this.view) return;\n            this.view.scrollLeft = this.view.scrollWidth - this.getPaddingWidth();\n        }\n    }, {\n        key: 'scrollToBottom',\n        value: function scrollToBottom() {\n            if (!this.view) return;\n            this.view.scrollTop = this.view.scrollHeight - this.getPaddingHeight();\n        }\n    }, {\n        key: 'addListeners',\n        value: function addListeners() {\n            /* istanbul ignore if */\n            if (typeof document === 'undefined' || !this.view) return;\n            var view = this.view,\n                trackHorizontal = this.trackHorizontal,\n                trackVertical = this.trackVertical,\n                thumbHorizontal = this.thumbHorizontal,\n                thumbVertical = this.thumbVertical;\n\n            view.addEventListener('scroll', this.handleScroll);\n            trackHorizontal.addEventListener('mouseenter', this.handleTrackMouseEnter);\n            trackHorizontal.addEventListener('mouseleave', this.handleTrackMouseLeave);\n            trackHorizontal.addEventListener('mousedown', this.handleHorizontalTrackMouseDown);\n            trackVertical.addEventListener('mouseenter', this.handleTrackMouseEnter);\n            trackVertical.addEventListener('mouseleave', this.handleTrackMouseLeave);\n            trackVertical.addEventListener('mousedown', this.handleVerticalTrackMouseDown);\n            thumbHorizontal.addEventListener('mousedown', this.handleHorizontalThumbMouseDown);\n            thumbVertical.addEventListener('mousedown', this.handleVerticalThumbMouseDown);\n            window.addEventListener('resize', this.handleWindowResize);\n            this.pollScrollbarWidthTimer = setTimeout(this.pollScrollbarWidth, POLL_SCROLLBAR_WIDTH_INTERVAL);\n        }\n    }, {\n        key: 'removeListeners',\n        value: function removeListeners() {\n            /* istanbul ignore if */\n            if (typeof document === 'undefined' || !this.view) return;\n            var view = this.view,\n                trackHorizontal = this.trackHorizontal,\n                trackVertical = this.trackVertical,\n                thumbHorizontal = this.thumbHorizontal,\n                thumbVertical = this.thumbVertical;\n\n            if (view) view.removeEventListener('scroll', this.handleScroll);\n            if (trackHorizontal) {\n                trackHorizontal.removeEventListener('mouseenter', this.handleTrackMouseEnter);\n                trackHorizontal.removeEventListener('mouseleave', this.handleTrackMouseLeave);\n                trackHorizontal.removeEventListener('mousedown', this.handleHorizontalTrackMouseDown);\n            }\n            if (trackVertical) {\n                trackVertical.removeEventListener('mouseenter', this.handleTrackMouseEnter);\n                trackVertical.removeEventListener('mouseleave', this.handleTrackMouseLeave);\n                trackVertical.removeEventListener('mousedown', this.handleVerticalTrackMouseDown);\n            }\n            if (thumbHorizontal) thumbHorizontal.removeEventListener('mousedown', this.handleHorizontalThumbMouseDown);\n            if (thumbVertical) thumbVertical.removeEventListener('mousedown', this.handleVerticalThumbMouseDown);\n            window.removeEventListener('resize', this.handleWindowResize);\n            if (this.pollScrollbarWidthTimer) clearTimeout(this.pollScrollbarWidthTimer);\n            // Possibly setup by `handleDragStart`\n            this.teardownDragging();\n        }\n    }, {\n        key: 'pollScrollbarWidth',\n        value: function pollScrollbarWidth() {\n            var _this2 = this;\n\n            this.raf(function () {\n                if (_this2.detectScrollbarWidthChange(_this2.getValues())) {\n                    _this2._update(function () {\n                        _this2.pollScrollbarWidthTimer = setTimeout(_this2.pollScrollbarWidth, POLL_SCROLLBAR_WIDTH_INTERVAL);\n                    });\n                } else {\n                    _this2.pollScrollbarWidthTimer = setTimeout(_this2.pollScrollbarWidth, POLL_SCROLLBAR_WIDTH_INTERVAL);\n                }\n            });\n        }\n    }, {\n        key: 'detectScrollbarWidthChange',\n        value: function detectScrollbarWidthChange(values) {\n            var _this3 = this;\n\n            var scrollLeft = values.scrollLeft,\n                scrollTop = values.scrollTop;\n\n            (0, _getScrollbarWidth.invalidateScrollbarWidth)();\n            var scrollbarWidth = (0, _getScrollbarWidth.getScrollbarWidth)(values);\n            var isChanged = scrollbarWidth !== this.state.scrollbarWidth && scrollbarWidth !== this.state.scrollbarWidth + 1;\n            if (isChanged) {\n                this.setState({ scrollbarWidth: scrollbarWidth }, function () {\n                    var _getValues = _this3.getValues(),\n                        clientHeight = _getValues.clientHeight,\n                        scrollHeight = _getValues.scrollHeight;\n\n                    var nearBottom = Math.abs(scrollHeight - clientHeight - scrollTop) <= scrollbarWidth;\n\n                    _this3.scrollLeft(scrollLeft);\n                    if (nearBottom) {\n                        _this3.scrollTop(scrollHeight - clientHeight);\n                    } else {\n                        _this3.scrollTop(scrollTop);\n                    }\n                });\n            }\n            return isChanged;\n        }\n    }, {\n        key: 'handleScroll',\n        value: function handleScroll(event) {\n            var _this4 = this;\n\n            var _props3 = this.props,\n                onScroll = _props3.onScroll,\n                onScrollFrame = _props3.onScrollFrame;\n\n            if (onScroll) onScroll(event);\n            this.update(function (values) {\n                var scrollLeft = values.scrollLeft,\n                    scrollTop = values.scrollTop;\n\n                _this4.viewScrollLeft = scrollLeft;\n                _this4.viewScrollTop = scrollTop;\n                if (onScrollFrame) onScrollFrame(values);\n            });\n            this.detectScrolling();\n        }\n    }, {\n        key: 'handleScrollStart',\n        value: function handleScrollStart() {\n            var onScrollStart = this.props.onScrollStart;\n\n            if (onScrollStart) onScrollStart();\n            this.handleScrollStartAutoHide();\n        }\n    }, {\n        key: 'handleScrollStartAutoHide',\n        value: function handleScrollStartAutoHide() {\n            var autoHide = this.props.autoHide;\n\n            if (!autoHide) return;\n            this.showTracks();\n        }\n    }, {\n        key: 'handleScrollStop',\n        value: function handleScrollStop() {\n            var onScrollStop = this.props.onScrollStop;\n\n            if (onScrollStop) onScrollStop();\n            this.handleScrollStopAutoHide();\n        }\n    }, {\n        key: 'handleScrollStopAutoHide',\n        value: function handleScrollStopAutoHide() {\n            var autoHide = this.props.autoHide;\n\n            if (!autoHide) return;\n            this.hideTracks();\n        }\n    }, {\n        key: 'handleWindowResize',\n        value: function handleWindowResize() {\n            this.update();\n        }\n    }, {\n        key: 'handleHorizontalTrackMouseDown',\n        value: function handleHorizontalTrackMouseDown(event) {\n            event.preventDefault();\n            var target = event.target,\n                clientX = event.clientX;\n\n            var _target$getBoundingCl = target.getBoundingClientRect(),\n                targetLeft = _target$getBoundingCl.left;\n\n            var thumbWidth = this.getThumbHorizontalWidth();\n            var offset = Math.abs(targetLeft - clientX) - thumbWidth / 2;\n            this.view.scrollLeft = this.getScrollLeftForOffset(offset);\n        }\n    }, {\n        key: 'handleVerticalTrackMouseDown',\n        value: function handleVerticalTrackMouseDown(event) {\n            event.preventDefault();\n            var target = event.target,\n                clientY = event.clientY;\n\n            var _target$getBoundingCl2 = target.getBoundingClientRect(),\n                targetTop = _target$getBoundingCl2.top;\n\n            var thumbHeight = this.getThumbVerticalHeight();\n            var offset = Math.abs(targetTop - clientY) - thumbHeight / 2;\n            this.view.scrollTop = this.getScrollTopForOffset(offset);\n        }\n    }, {\n        key: 'handleHorizontalThumbMouseDown',\n        value: function handleHorizontalThumbMouseDown(event) {\n            event.preventDefault();\n            this.handleDragStart(event);\n            var target = event.target,\n                clientX = event.clientX;\n            var offsetWidth = target.offsetWidth;\n\n            var _target$getBoundingCl3 = target.getBoundingClientRect(),\n                left = _target$getBoundingCl3.left;\n\n            this.prevPageX = offsetWidth - (clientX - left);\n        }\n    }, {\n        key: 'handleVerticalThumbMouseDown',\n        value: function handleVerticalThumbMouseDown(event) {\n            event.preventDefault();\n            this.handleDragStart(event);\n            var target = event.target,\n                clientY = event.clientY;\n            var offsetHeight = target.offsetHeight;\n\n            var _target$getBoundingCl4 = target.getBoundingClientRect(),\n                top = _target$getBoundingCl4.top;\n\n            this.prevPageY = offsetHeight - (clientY - top);\n        }\n    }, {\n        key: 'setupDragging',\n        value: function setupDragging() {\n            (0, _domCss2[\"default\"])(document.body, _styles.disableSelectStyle);\n            document.addEventListener('mousemove', this.handleDrag);\n            document.addEventListener('mouseup', this.handleDragEnd);\n            document.onselectstart = _returnFalse2[\"default\"];\n        }\n    }, {\n        key: 'teardownDragging',\n        value: function teardownDragging() {\n            (0, _domCss2[\"default\"])(document.body, _styles.disableSelectStyleReset);\n            document.removeEventListener('mousemove', this.handleDrag);\n            document.removeEventListener('mouseup', this.handleDragEnd);\n            document.onselectstart = undefined;\n        }\n    }, {\n        key: 'handleDragStart',\n        value: function handleDragStart(event) {\n            this.dragging = true;\n            event.stopImmediatePropagation();\n            this.setupDragging();\n        }\n    }, {\n        key: 'handleDrag',\n        value: function handleDrag(event) {\n            if (this.prevPageX) {\n                var clientX = event.clientX;\n\n                var _trackHorizontal$getB = this.trackHorizontal.getBoundingClientRect(),\n                    trackLeft = _trackHorizontal$getB.left;\n\n                var thumbWidth = this.getThumbHorizontalWidth();\n                var clickPosition = thumbWidth - this.prevPageX;\n                var offset = -trackLeft + clientX - clickPosition;\n                this.view.scrollLeft = this.getScrollLeftForOffset(offset);\n            }\n            if (this.prevPageY) {\n                var clientY = event.clientY;\n\n                var _trackVertical$getBou = this.trackVertical.getBoundingClientRect(),\n                    trackTop = _trackVertical$getBou.top;\n\n                var thumbHeight = this.getThumbVerticalHeight();\n                var _clickPosition = thumbHeight - this.prevPageY;\n                var _offset = -trackTop + clientY - _clickPosition;\n                this.view.scrollTop = this.getScrollTopForOffset(_offset);\n            }\n            return false;\n        }\n    }, {\n        key: 'handleDragEnd',\n        value: function handleDragEnd() {\n            this.dragging = false;\n            this.prevPageX = this.prevPageY = 0;\n            this.teardownDragging();\n            this.handleDragEndAutoHide();\n        }\n    }, {\n        key: 'handleDragEndAutoHide',\n        value: function handleDragEndAutoHide() {\n            var autoHide = this.props.autoHide;\n\n            if (!autoHide) return;\n            this.hideTracks();\n        }\n    }, {\n        key: 'handleTrackMouseEnter',\n        value: function handleTrackMouseEnter() {\n            this.trackMouseOver = true;\n            this.handleTrackMouseEnterAutoHide();\n        }\n    }, {\n        key: 'handleTrackMouseEnterAutoHide',\n        value: function handleTrackMouseEnterAutoHide() {\n            var autoHide = this.props.autoHide;\n\n            if (!autoHide) return;\n            this.showTracks();\n        }\n    }, {\n        key: 'handleTrackMouseLeave',\n        value: function handleTrackMouseLeave() {\n            this.trackMouseOver = false;\n            this.handleTrackMouseLeaveAutoHide();\n        }\n    }, {\n        key: 'handleTrackMouseLeaveAutoHide',\n        value: function handleTrackMouseLeaveAutoHide() {\n            var autoHide = this.props.autoHide;\n\n            if (!autoHide) return;\n            this.hideTracks();\n        }\n    }, {\n        key: 'showTracks',\n        value: function showTracks() {\n            clearTimeout(this.hideTracksTimeout);\n            (0, _domCss2[\"default\"])(this.trackHorizontal, { opacity: 1 });\n            (0, _domCss2[\"default\"])(this.trackVertical, { opacity: 1 });\n        }\n    }, {\n        key: 'hideTracks',\n        value: function hideTracks() {\n            var _this5 = this;\n\n            if (this.dragging) return;\n            if (this.scrolling) return;\n            if (this.trackMouseOver) return;\n            var autoHideTimeout = this.props.autoHideTimeout;\n\n            clearTimeout(this.hideTracksTimeout);\n            this.hideTracksTimeout = setTimeout(function () {\n                (0, _domCss2[\"default\"])(_this5.trackHorizontal, { opacity: 0 });\n                (0, _domCss2[\"default\"])(_this5.trackVertical, { opacity: 0 });\n            }, autoHideTimeout);\n        }\n    }, {\n        key: 'detectScrolling',\n        value: function detectScrolling() {\n            var _this6 = this;\n\n            if (this.scrolling) return;\n            this.scrolling = true;\n            this.handleScrollStart();\n            this.detectScrollingInterval = setInterval(function () {\n                if (_this6.lastViewScrollLeft === _this6.viewScrollLeft && _this6.lastViewScrollTop === _this6.viewScrollTop) {\n                    clearInterval(_this6.detectScrollingInterval);\n                    _this6.scrolling = false;\n                    _this6.handleScrollStop();\n                }\n                _this6.lastViewScrollLeft = _this6.viewScrollLeft;\n                _this6.lastViewScrollTop = _this6.viewScrollTop;\n            }, 100);\n        }\n    }, {\n        key: 'raf',\n        value: function raf(callback) {\n            var _this7 = this;\n\n            if (this.requestFrame) _raf3[\"default\"].cancel(this.requestFrame);\n            this.requestFrame = (0, _raf3[\"default\"])(function () {\n                _this7.requestFrame = undefined;\n                callback();\n            });\n        }\n    }, {\n        key: 'update',\n        value: function update(callback) {\n            var _this8 = this;\n\n            this.raf(function () {\n                _this8._update(function (values) {\n                    _this8.detectScrollbarWidthChange(values);\n                    if (typeof callback !== 'function') return;\n                    callback(values);\n                });\n            });\n        }\n    }, {\n        key: '_update',\n        value: function _update(callback) {\n            var _props4 = this.props,\n                onUpdate = _props4.onUpdate,\n                hideTracksWhenNotNeeded = _props4.hideTracksWhenNotNeeded;\n\n            this.container.scrollTop = 0;\n            this.container.scrollLeft = 0;\n            if (!this.view) {\n                if (typeof callback === 'function') callback();\n                return;\n            }\n            var values = this.getValues();\n            var scrollLeft = values.scrollLeft,\n                clientWidth = values.clientWidth,\n                scrollWidth = values.scrollWidth;\n\n            var trackHorizontalWidth = (0, _getInnerWidth2[\"default\"])(this.trackHorizontal);\n            var thumbHorizontalWidth = this.getThumbHorizontalWidth();\n            var thumbHorizontalX = scrollLeft / (scrollWidth - clientWidth) * (trackHorizontalWidth - thumbHorizontalWidth);\n            var thumbHorizontalStyle = {\n                width: thumbHorizontalWidth,\n                transform: 'translateX(' + thumbHorizontalX + 'px)'\n            };\n            var scrollTop = values.scrollTop,\n                clientHeight = values.clientHeight,\n                scrollHeight = values.scrollHeight;\n\n            var trackVerticalHeight = (0, _getInnerHeight2[\"default\"])(this.trackVertical);\n            var thumbVerticalHeight = this.getThumbVerticalHeight();\n            var thumbVerticalY = scrollTop / (scrollHeight - clientHeight) * (trackVerticalHeight - thumbVerticalHeight);\n            var thumbVerticalStyle = {\n                height: thumbVerticalHeight,\n                transform: 'translateY(' + thumbVerticalY + 'px)'\n            };\n            if (hideTracksWhenNotNeeded) {\n                var trackHorizontalStyle = {\n                    visibility: scrollWidth > clientWidth ? 'visible' : 'hidden'\n                };\n                var trackVerticalStyle = {\n                    visibility: scrollHeight > clientHeight ? 'visible' : 'hidden'\n                };\n                (0, _domCss2[\"default\"])(this.trackHorizontal, trackHorizontalStyle);\n                (0, _domCss2[\"default\"])(this.trackVertical, trackVerticalStyle);\n            }\n            (0, _domCss2[\"default\"])(this.thumbHorizontal, thumbHorizontalStyle);\n            (0, _domCss2[\"default\"])(this.thumbVertical, thumbVerticalStyle);\n            if (onUpdate) onUpdate(values);\n            if (typeof callback !== 'function') return;\n            callback(values);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this9 = this;\n\n            /* eslint-disable no-unused-vars */\n            var _props5 = this.props,\n                onScroll = _props5.onScroll,\n                onScrollFrame = _props5.onScrollFrame,\n                onScrollStart = _props5.onScrollStart,\n                onScrollStop = _props5.onScrollStop,\n                onUpdate = _props5.onUpdate,\n                renderView = _props5.renderView,\n                renderTrackHorizontal = _props5.renderTrackHorizontal,\n                renderTrackVertical = _props5.renderTrackVertical,\n                renderThumbHorizontal = _props5.renderThumbHorizontal,\n                renderThumbVertical = _props5.renderThumbVertical,\n                tagName = _props5.tagName,\n                hideTracksWhenNotNeeded = _props5.hideTracksWhenNotNeeded,\n                autoHide = _props5.autoHide,\n                autoHideTimeout = _props5.autoHideTimeout,\n                autoHideDuration = _props5.autoHideDuration,\n                thumbSize = _props5.thumbSize,\n                thumbMinSize = _props5.thumbMinSize,\n                universal = _props5.universal,\n                autoHeight = _props5.autoHeight,\n                autoHeightMin = _props5.autoHeightMin,\n                autoHeightMax = _props5.autoHeightMax,\n                style = _props5.style,\n                children = _props5.children,\n                props = _objectWithoutProperties(_props5, ['onScroll', 'onScrollFrame', 'onScrollStart', 'onScrollStop', 'onUpdate', 'renderView', 'renderTrackHorizontal', 'renderTrackVertical', 'renderThumbHorizontal', 'renderThumbVertical', 'tagName', 'hideTracksWhenNotNeeded', 'autoHide', 'autoHideTimeout', 'autoHideDuration', 'thumbSize', 'thumbMinSize', 'universal', 'autoHeight', 'autoHeightMin', 'autoHeightMax', 'style', 'children']);\n            /* eslint-enable no-unused-vars */\n\n            var _state = this.state,\n                didMountUniversal = _state.didMountUniversal,\n                scrollbarWidth = _state.scrollbarWidth;\n\n\n            var containerStyle = _extends({}, _styles.containerStyleDefault, autoHeight && _extends({}, _styles.containerStyleAutoHeight, {\n                minHeight: autoHeightMin,\n                maxHeight: autoHeightMax\n            }), style);\n\n            var viewStyle = _extends({}, _styles.viewStyleDefault, {\n                // Hide scrollbars by setting a negative margin\n                marginRight: -this.getPaddingWidth() + (scrollbarWidth ? -scrollbarWidth : 0),\n                marginBottom: -this.getPaddingHeight() + (scrollbarWidth ? -scrollbarWidth : 0),\n                width: 'calc(100% + ' + (_styles.scrollbarSize + scrollbarWidth) + 'px)'\n            }, autoHeight && _extends({}, _styles.viewStyleAutoHeight, {\n                // Add paddingHeight and scrollbarWidth to autoHeight in order to compensate negative margins\n                minHeight: (0, _isString2[\"default\"])(autoHeightMin) ? 'calc(' + autoHeightMin + ' + ' + (this.getPaddingHeight() + scrollbarWidth) + 'px)' : autoHeightMin + this.getPaddingHeight() + scrollbarWidth,\n                maxHeight: (0, _isString2[\"default\"])(autoHeightMax) ? 'calc(' + autoHeightMax + ' + ' + (this.getPaddingHeight() + scrollbarWidth) + 'px)' : autoHeightMax + this.getPaddingHeight() + scrollbarWidth\n            }), autoHeight && universal && !didMountUniversal && {\n                minHeight: autoHeightMin,\n                maxHeight: autoHeightMax\n            }, universal && !didMountUniversal && _styles.viewStyleUniversalInitial);\n\n            var viewWrapperStyle = _extends({}, _styles.viewWrapperStyleDefault, autoHeight && _extends({}, _styles.viewWrapperStyleAutoHeight));\n\n            var viewWrappedStyle = _extends({}, _styles.viewWrappedStyleDefault);\n\n            var trackAutoHeightStyle = {\n                transition: 'opacity ' + autoHideDuration + 'ms',\n                opacity: 0\n            };\n\n            var trackHorizontalStyle = _extends({}, _styles.trackHorizontalStyleDefault, autoHide && trackAutoHeightStyle, universal && !didMountUniversal && {\n                display: 'none'\n            });\n\n            var trackVerticalStyle = _extends({}, _styles.trackVerticalStyleDefault, autoHide && trackAutoHeightStyle, universal && !didMountUniversal && {\n                display: 'none'\n            });\n\n            return (0, _react.createElement)(tagName, { className: props.className ? props.className : '', style: containerStyle, ref: function ref(_ref3) {\n                    _this9.container = _ref3;\n                } }, [(0, _react.createElement)('div', { style: viewStyle, key: 'view', ref: function ref(_ref4) {\n                    _this9.view = _ref4;\n                } }, [(0, _react.createElement)('div', { style: viewWrapperStyle, key: 'viewWrapper', ref: function ref(_ref5) {\n                    _this9.viewWrapper = _ref5;\n                } }, [(0, _react.cloneElement)(renderView({ style: viewWrappedStyle }), { key: 'viewWrapped', ref: function ref(_ref6) {\n                    _this9.viewWrapped = _ref6;\n                } }, children)])]), (0, _react.cloneElement)(renderTrackHorizontal({ style: trackHorizontalStyle }), { key: 'trackHorizontal', ref: function ref(_ref7) {\n                    _this9.trackHorizontal = _ref7;\n                } }, (0, _react.cloneElement)(renderThumbHorizontal({ style: _styles.thumbHorizontalStyleDefault }), { ref: function ref(_ref8) {\n                    _this9.thumbHorizontal = _ref8;\n                } })), (0, _react.cloneElement)(renderTrackVertical({ style: trackVerticalStyle }), { key: 'trackVertical', ref: function ref(_ref9) {\n                    _this9.trackVertical = _ref9;\n                } }, (0, _react.cloneElement)(renderThumbVertical({ style: _styles.thumbVerticalStyleDefault }), { ref: function ref(_ref10) {\n                    _this9.thumbVertical = _ref10;\n                } }))]);\n        }\n    }]);\n\n    return Scrollbars;\n}(_react.Component);\n\nexports[\"default\"] = Scrollbars;\n\n\nScrollbars.propTypes = {\n    onScroll: _propTypes2[\"default\"].func,\n    onScrollFrame: _propTypes2[\"default\"].func,\n    onScrollStart: _propTypes2[\"default\"].func,\n    onScrollStop: _propTypes2[\"default\"].func,\n    onUpdate: _propTypes2[\"default\"].func,\n    renderView: _propTypes2[\"default\"].func,\n    renderTrackHorizontal: _propTypes2[\"default\"].func,\n    renderTrackVertical: _propTypes2[\"default\"].func,\n    renderThumbHorizontal: _propTypes2[\"default\"].func,\n    renderThumbVertical: _propTypes2[\"default\"].func,\n    tagName: _propTypes2[\"default\"].string,\n    thumbSize: _propTypes2[\"default\"].number,\n    thumbMinSize: _propTypes2[\"default\"].number,\n    hideTracksWhenNotNeeded: _propTypes2[\"default\"].bool,\n    autoHide: _propTypes2[\"default\"].bool,\n    autoHideTimeout: _propTypes2[\"default\"].number,\n    autoHideDuration: _propTypes2[\"default\"].number,\n    autoHeight: _propTypes2[\"default\"].bool,\n    autoHeightMin: _propTypes2[\"default\"].oneOfType([_propTypes2[\"default\"].number, _propTypes2[\"default\"].string]),\n    autoHeightMax: _propTypes2[\"default\"].oneOfType([_propTypes2[\"default\"].number, _propTypes2[\"default\"].string]),\n    universal: _propTypes2[\"default\"].bool,\n    style: _propTypes2[\"default\"].object,\n    children: _propTypes2[\"default\"].node\n};\n\nScrollbars.defaultProps = {\n    renderView: _defaultRenderElements.renderViewDefault,\n    renderTrackHorizontal: _defaultRenderElements.renderTrackHorizontalDefault,\n    renderTrackVertical: _defaultRenderElements.renderTrackVerticalDefault,\n    renderThumbHorizontal: _defaultRenderElements.renderThumbHorizontalDefault,\n    renderThumbVertical: _defaultRenderElements.renderThumbVerticalDefault,\n    tagName: 'div',\n    thumbMinSize: 30,\n    hideTracksWhenNotNeeded: false,\n    autoHide: false,\n    autoHideTimeout: 1000,\n    autoHideDuration: 200,\n    autoHeight: false,\n    autoHeightMin: 0,\n    autoHeightMax: 200,\n    universal: false\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3R0LXJlYWN0LWN1c3RvbS1zY3JvbGxiYXJzL2xpYi9TY3JvbGxiYXJzL2luZGV4LmpzPzgzYzAiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmFmMiA9IHJlcXVpcmUoJ3JhZicpO1xuXG52YXIgX3JhZjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yYWYyKTtcblxudmFyIF9kb21Dc3MgPSByZXF1aXJlKCdkb20tY3NzJyk7XG5cbnZhciBfZG9tQ3NzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RvbUNzcyk7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3Byb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9pc1N0cmluZyA9IHJlcXVpcmUoJy4uL3V0aWxzL2lzU3RyaW5nJyk7XG5cbnZhciBfaXNTdHJpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXNTdHJpbmcpO1xuXG52YXIgX2dldFNjcm9sbGJhcldpZHRoID0gcmVxdWlyZSgnLi4vdXRpbHMvZ2V0U2Nyb2xsYmFyV2lkdGgnKTtcblxudmFyIF9yZXR1cm5GYWxzZSA9IHJlcXVpcmUoJy4uL3V0aWxzL3JldHVybkZhbHNlJyk7XG5cbnZhciBfcmV0dXJuRmFsc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmV0dXJuRmFsc2UpO1xuXG52YXIgX2dldElubmVyV2lkdGggPSByZXF1aXJlKCcuLi91dGlscy9nZXRJbm5lcldpZHRoJyk7XG5cbnZhciBfZ2V0SW5uZXJXaWR0aDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRJbm5lcldpZHRoKTtcblxudmFyIF9nZXRJbm5lckhlaWdodCA9IHJlcXVpcmUoJy4uL3V0aWxzL2dldElubmVySGVpZ2h0Jyk7XG5cbnZhciBfZ2V0SW5uZXJIZWlnaHQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0SW5uZXJIZWlnaHQpO1xuXG52YXIgX3N0eWxlcyA9IHJlcXVpcmUoJy4vc3R5bGVzJyk7XG5cbnZhciBfZGVmYXVsdFJlbmRlckVsZW1lbnRzID0gcmVxdWlyZSgnLi9kZWZhdWx0UmVuZGVyRWxlbWVudHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhvYmosIGtleXMpIHsgdmFyIHRhcmdldCA9IHt9OyBmb3IgKHZhciBpIGluIG9iaikgeyBpZiAoa2V5cy5pbmRleE9mKGkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGkpKSBjb250aW51ZTsgdGFyZ2V0W2ldID0gb2JqW2ldOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUE9MTF9TQ1JPTExCQVJfV0lEVEhfSU5URVJWQUwgPSAzMDAwO1xuXG52YXIgU2Nyb2xsYmFycyA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKFNjcm9sbGJhcnMsIF9Db21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gU2Nyb2xsYmFycyhwcm9wcykge1xuICAgICAgICB2YXIgX3JlZjtcblxuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2Nyb2xsYmFycyk7XG5cbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlc3QgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgICByZXN0W19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChfcmVmID0gU2Nyb2xsYmFycy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNjcm9sbGJhcnMpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzLCBwcm9wc10uY29uY2F0KHJlc3QpKSk7XG5cbiAgICAgICAgX3RoaXMuZ2V0U2Nyb2xsTGVmdCA9IF90aGlzLmdldFNjcm9sbExlZnQuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmdldFNjcm9sbFRvcCA9IF90aGlzLmdldFNjcm9sbFRvcC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ2V0U2Nyb2xsV2lkdGggPSBfdGhpcy5nZXRTY3JvbGxXaWR0aC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ2V0U2Nyb2xsSGVpZ2h0ID0gX3RoaXMuZ2V0U2Nyb2xsSGVpZ2h0LmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5nZXRDbGllbnRXaWR0aCA9IF90aGlzLmdldENsaWVudFdpZHRoLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5nZXRDbGllbnRIZWlnaHQgPSBfdGhpcy5nZXRDbGllbnRIZWlnaHQuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmdldFBhZGRpbmdXaWR0aCA9IF90aGlzLmdldFBhZGRpbmdXaWR0aC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ2V0UGFkZGluZ0hlaWdodCA9IF90aGlzLmdldFBhZGRpbmdIZWlnaHQuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmdldFZhbHVlcyA9IF90aGlzLmdldFZhbHVlcy5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ2V0VGh1bWJIb3Jpem9udGFsV2lkdGggPSBfdGhpcy5nZXRUaHVtYkhvcml6b250YWxXaWR0aC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ2V0VGh1bWJWZXJ0aWNhbEhlaWdodCA9IF90aGlzLmdldFRodW1iVmVydGljYWxIZWlnaHQuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmdldFNjcm9sbExlZnRGb3JPZmZzZXQgPSBfdGhpcy5nZXRTY3JvbGxMZWZ0Rm9yT2Zmc2V0LmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5nZXRTY3JvbGxUb3BGb3JPZmZzZXQgPSBfdGhpcy5nZXRTY3JvbGxUb3BGb3JPZmZzZXQuYmluZChfdGhpcyk7XG5cbiAgICAgICAgX3RoaXMuc2Nyb2xsTGVmdCA9IF90aGlzLnNjcm9sbExlZnQuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLnNjcm9sbFRvcCA9IF90aGlzLnNjcm9sbFRvcC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuc2Nyb2xsVG9MZWZ0ID0gX3RoaXMuc2Nyb2xsVG9MZWZ0LmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5zY3JvbGxUb1RvcCA9IF90aGlzLnNjcm9sbFRvVG9wLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5zY3JvbGxUb1JpZ2h0ID0gX3RoaXMuc2Nyb2xsVG9SaWdodC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuc2Nyb2xsVG9Cb3R0b20gPSBfdGhpcy5zY3JvbGxUb0JvdHRvbS5iaW5kKF90aGlzKTtcblxuICAgICAgICBfdGhpcy5oYW5kbGVUcmFja01vdXNlRW50ZXIgPSBfdGhpcy5oYW5kbGVUcmFja01vdXNlRW50ZXIuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmhhbmRsZVRyYWNrTW91c2VMZWF2ZSA9IF90aGlzLmhhbmRsZVRyYWNrTW91c2VMZWF2ZS5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlSG9yaXpvbnRhbFRyYWNrTW91c2VEb3duID0gX3RoaXMuaGFuZGxlSG9yaXpvbnRhbFRyYWNrTW91c2VEb3duLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVWZXJ0aWNhbFRyYWNrTW91c2VEb3duID0gX3RoaXMuaGFuZGxlVmVydGljYWxUcmFja01vdXNlRG93bi5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlSG9yaXpvbnRhbFRodW1iTW91c2VEb3duID0gX3RoaXMuaGFuZGxlSG9yaXpvbnRhbFRodW1iTW91c2VEb3duLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVWZXJ0aWNhbFRodW1iTW91c2VEb3duID0gX3RoaXMuaGFuZGxlVmVydGljYWxUaHVtYk1vdXNlRG93bi5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlV2luZG93UmVzaXplID0gX3RoaXMuaGFuZGxlV2luZG93UmVzaXplLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVTY3JvbGwgPSBfdGhpcy5oYW5kbGVTY3JvbGwuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmhhbmRsZURyYWcgPSBfdGhpcy5oYW5kbGVEcmFnLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVEcmFnRW5kID0gX3RoaXMuaGFuZGxlRHJhZ0VuZC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMucG9sbFNjcm9sbGJhcldpZHRoID0gX3RoaXMucG9sbFNjcm9sbGJhcldpZHRoLmJpbmQoX3RoaXMpO1xuXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZGlkTW91bnRVbml2ZXJzYWw6IGZhbHNlLFxuICAgICAgICAgICAgc2Nyb2xsYmFyV2lkdGg6IDE3XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoU2Nyb2xsYmFycywgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVycygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50RGlkTW91bnRVbml2ZXJzYWwoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnRVbml2ZXJzYWwnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnRVbml2ZXJzYWwoKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHJlYWN0L3NvcnQtY29tcFxuICAgICAgICAgICAgdmFyIHVuaXZlcnNhbCA9IHRoaXMucHJvcHMudW5pdmVyc2FsO1xuXG4gICAgICAgICAgICBpZiAoIXVuaXZlcnNhbCkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRpZE1vdW50VW5pdmVyc2FsOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjb21wb25lbnREaWRVcGRhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVycygpO1xuICAgICAgICAgICAgKDAsIF9yYWYyLmNhbmNlbCkodGhpcy5yZXF1ZXN0RnJhbWUpO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRyYWNrc1RpbWVvdXQpO1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmRldGVjdFNjcm9sbGluZ0ludGVydmFsKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0U2Nyb2xsTGVmdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTY3JvbGxMZWZ0KCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnZpZXcpIHJldHVybiAwO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlldy5zY3JvbGxMZWZ0O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRTY3JvbGxUb3AnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2Nyb2xsVG9wKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnZpZXcpIHJldHVybiAwO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlldy5zY3JvbGxUb3A7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFNjcm9sbFdpZHRoJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNjcm9sbFdpZHRoKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnZpZXcpIHJldHVybiAwO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlldy5zY3JvbGxXaWR0aCAtIHRoaXMuZ2V0UGFkZGluZ1dpZHRoKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFNjcm9sbEhlaWdodCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTY3JvbGxIZWlnaHQoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudmlldykgcmV0dXJuIDA7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3LnNjcm9sbEhlaWdodCAtIHRoaXMuZ2V0UGFkZGluZ0hlaWdodCgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRDbGllbnRXaWR0aCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDbGllbnRXaWR0aCgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy52aWV3KSByZXR1cm4gMDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXcuY2xpZW50V2lkdGggLSB0aGlzLmdldFBhZGRpbmdXaWR0aCgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRDbGllbnRIZWlnaHQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xpZW50SGVpZ2h0KCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnZpZXcpIHJldHVybiAwO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlldy5jbGllbnRIZWlnaHQgLSB0aGlzLmdldFBhZGRpbmdIZWlnaHQoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0UGFkZGluZ1dpZHRoJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhZGRpbmdXaWR0aCgpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3R5bGVzLnNjcm9sbGJhclNpemU7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFBhZGRpbmdIZWlnaHQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFkZGluZ0hlaWdodCgpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3R5bGVzLnNjcm9sbGJhclNpemU7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFZhbHVlcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZXMoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudmlldykgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgIHZhciBfcmVmMiA9IHRoaXMudmlldyB8fCB7fSxcbiAgICAgICAgICAgICAgICBfcmVmMiRvZmZzZXRXaWR0aCA9IF9yZWYyLm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgICAgIG9mZnNldFdpZHRoID0gX3JlZjIkb2Zmc2V0V2lkdGggPT09IHVuZGVmaW5lZCA/IDAgOiBfcmVmMiRvZmZzZXRXaWR0aCxcbiAgICAgICAgICAgICAgICBfcmVmMiRzY3JvbGxMZWZ0ID0gX3JlZjIuc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgICAgICBzY3JvbGxMZWZ0ID0gX3JlZjIkc2Nyb2xsTGVmdCA9PT0gdW5kZWZpbmVkID8gMCA6IF9yZWYyJHNjcm9sbExlZnQsXG4gICAgICAgICAgICAgICAgX3JlZjIkc2Nyb2xsVG9wID0gX3JlZjIuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgICAgIHNjcm9sbFRvcCA9IF9yZWYyJHNjcm9sbFRvcCA9PT0gdW5kZWZpbmVkID8gMCA6IF9yZWYyJHNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICBfcmVmMiRzY3JvbGxXaWR0aCA9IF9yZWYyLnNjcm9sbFdpZHRoLFxuICAgICAgICAgICAgICAgIHJlYWxTY3JvbGxXaWR0aCA9IF9yZWYyJHNjcm9sbFdpZHRoID09PSB1bmRlZmluZWQgPyAwIDogX3JlZjIkc2Nyb2xsV2lkdGgsXG4gICAgICAgICAgICAgICAgX3JlZjIkc2Nyb2xsSGVpZ2h0ID0gX3JlZjIuc2Nyb2xsSGVpZ2h0LFxuICAgICAgICAgICAgICAgIHJlYWxTY3JvbGxIZWlnaHQgPSBfcmVmMiRzY3JvbGxIZWlnaHQgPT09IHVuZGVmaW5lZCA/IDAgOiBfcmVmMiRzY3JvbGxIZWlnaHQsXG4gICAgICAgICAgICAgICAgX3JlZjIkY2xpZW50V2lkdGggPSBfcmVmMi5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICByZWFsQ2xpZW50V2lkdGggPSBfcmVmMiRjbGllbnRXaWR0aCA9PT0gdW5kZWZpbmVkID8gMCA6IF9yZWYyJGNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgIF9yZWYyJGNsaWVudEhlaWdodCA9IF9yZWYyLmNsaWVudEhlaWdodCxcbiAgICAgICAgICAgICAgICByZWFsQ2xpZW50SGVpZ2h0ID0gX3JlZjIkY2xpZW50SGVpZ2h0ID09PSB1bmRlZmluZWQgPyAwIDogX3JlZjIkY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgICAgICB2YXIgc2Nyb2xsV2lkdGggPSByZWFsU2Nyb2xsV2lkdGggLSB0aGlzLmdldFBhZGRpbmdXaWR0aCgpO1xuICAgICAgICAgICAgdmFyIHNjcm9sbEhlaWdodCA9IHJlYWxTY3JvbGxIZWlnaHQgLSB0aGlzLmdldFBhZGRpbmdIZWlnaHQoKTtcbiAgICAgICAgICAgIHZhciBjbGllbnRXaWR0aCA9IHJlYWxDbGllbnRXaWR0aCAtIHRoaXMuZ2V0UGFkZGluZ1dpZHRoKCk7XG4gICAgICAgICAgICB2YXIgY2xpZW50SGVpZ2h0ID0gcmVhbENsaWVudEhlaWdodCAtIHRoaXMuZ2V0UGFkZGluZ0hlaWdodCgpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxlZnQ6IHNjcm9sbExlZnQgLyAoc2Nyb2xsV2lkdGggLSBjbGllbnRXaWR0aCkgfHwgMCxcbiAgICAgICAgICAgICAgICB0b3A6IHNjcm9sbFRvcCAvIChzY3JvbGxIZWlnaHQgLSBjbGllbnRIZWlnaHQpIHx8IDAsXG4gICAgICAgICAgICAgICAgb2Zmc2V0V2lkdGg6IG9mZnNldFdpZHRoLFxuICAgICAgICAgICAgICAgIHJlYWxDbGllbnRXaWR0aDogcmVhbENsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgIHJlYWxDbGllbnRIZWlnaHQ6IHJlYWxDbGllbnRIZWlnaHQsXG4gICAgICAgICAgICAgICAgc2Nyb2xsTGVmdDogc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICBzY3JvbGxXaWR0aDogc2Nyb2xsV2lkdGgsXG4gICAgICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0OiBzY3JvbGxIZWlnaHQsXG4gICAgICAgICAgICAgICAgY2xpZW50V2lkdGg6IGNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgIGNsaWVudEhlaWdodDogY2xpZW50SGVpZ2h0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRUaHVtYkhvcml6b250YWxXaWR0aCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaHVtYkhvcml6b250YWxXaWR0aCgpIHtcbiAgICAgICAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgICAgIHRodW1iU2l6ZSA9IF9wcm9wcy50aHVtYlNpemUsXG4gICAgICAgICAgICAgICAgdGh1bWJNaW5TaXplID0gX3Byb3BzLnRodW1iTWluU2l6ZTtcbiAgICAgICAgICAgIHZhciBfdmlldyA9IHRoaXMudmlldyxcbiAgICAgICAgICAgICAgICByZWFsU2Nyb2xsV2lkdGggPSBfdmlldy5zY3JvbGxXaWR0aCxcbiAgICAgICAgICAgICAgICByZWFsQ2xpZW50V2lkdGggPSBfdmlldy5jbGllbnRXaWR0aDtcblxuICAgICAgICAgICAgdmFyIHNjcm9sbFdpZHRoID0gcmVhbFNjcm9sbFdpZHRoIC0gdGhpcy5nZXRQYWRkaW5nV2lkdGgoKTtcbiAgICAgICAgICAgIHZhciBjbGllbnRXaWR0aCA9IHJlYWxDbGllbnRXaWR0aCAtIHRoaXMuZ2V0UGFkZGluZ1dpZHRoKCk7XG4gICAgICAgICAgICB2YXIgdHJhY2tXaWR0aCA9ICgwLCBfZ2V0SW5uZXJXaWR0aDJbXCJkZWZhdWx0XCJdKSh0aGlzLnRyYWNrSG9yaXpvbnRhbCk7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSBNYXRoLmNlaWwoY2xpZW50V2lkdGggLyBzY3JvbGxXaWR0aCAqIHRyYWNrV2lkdGgpO1xuICAgICAgICAgICAgaWYgKHNjcm9sbFdpZHRoIDw9IGNsaWVudFdpZHRoKSByZXR1cm4gMDtcbiAgICAgICAgICAgIGlmICh0aHVtYlNpemUpIHJldHVybiB0aHVtYlNpemU7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgod2lkdGgsIHRodW1iTWluU2l6ZSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFRodW1iVmVydGljYWxIZWlnaHQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGh1bWJWZXJ0aWNhbEhlaWdodCgpIHtcbiAgICAgICAgICAgIHZhciBfcHJvcHMyID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICAgICAgICB0aHVtYlNpemUgPSBfcHJvcHMyLnRodW1iU2l6ZSxcbiAgICAgICAgICAgICAgICB0aHVtYk1pblNpemUgPSBfcHJvcHMyLnRodW1iTWluU2l6ZTtcbiAgICAgICAgICAgIHZhciBfdmlldzIgPSB0aGlzLnZpZXcsXG4gICAgICAgICAgICAgICAgcmVhbFNjcm9sbEhlaWdodCA9IF92aWV3Mi5zY3JvbGxIZWlnaHQsXG4gICAgICAgICAgICAgICAgcmVhbENsaWVudEhlaWdodCA9IF92aWV3Mi5jbGllbnRIZWlnaHQ7XG5cbiAgICAgICAgICAgIHZhciBzY3JvbGxIZWlnaHQgPSByZWFsU2Nyb2xsSGVpZ2h0IC0gdGhpcy5nZXRQYWRkaW5nSGVpZ2h0KCk7XG4gICAgICAgICAgICB2YXIgY2xpZW50SGVpZ2h0ID0gcmVhbENsaWVudEhlaWdodCAtIHRoaXMuZ2V0UGFkZGluZ0hlaWdodCgpO1xuICAgICAgICAgICAgdmFyIHRyYWNrSGVpZ2h0ID0gKDAsIF9nZXRJbm5lckhlaWdodDJbXCJkZWZhdWx0XCJdKSh0aGlzLnRyYWNrVmVydGljYWwpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IE1hdGguY2VpbChjbGllbnRIZWlnaHQgLyBzY3JvbGxIZWlnaHQgKiB0cmFja0hlaWdodCk7XG4gICAgICAgICAgICBpZiAoc2Nyb2xsSGVpZ2h0IDw9IGNsaWVudEhlaWdodCkgcmV0dXJuIDA7XG4gICAgICAgICAgICBpZiAodGh1bWJTaXplKSByZXR1cm4gdGh1bWJTaXplO1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KGhlaWdodCwgdGh1bWJNaW5TaXplKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0U2Nyb2xsTGVmdEZvck9mZnNldCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTY3JvbGxMZWZ0Rm9yT2Zmc2V0KG9mZnNldCkge1xuICAgICAgICAgICAgdmFyIF92aWV3MyA9IHRoaXMudmlldyxcbiAgICAgICAgICAgICAgICByZWFsU2Nyb2xsV2lkdGggPSBfdmlldzMuc2Nyb2xsV2lkdGgsXG4gICAgICAgICAgICAgICAgcmVhbENsaWVudFdpZHRoID0gX3ZpZXczLmNsaWVudFdpZHRoO1xuXG4gICAgICAgICAgICB2YXIgc2Nyb2xsV2lkdGggPSByZWFsU2Nyb2xsV2lkdGggLSB0aGlzLmdldFBhZGRpbmdXaWR0aCgpO1xuICAgICAgICAgICAgdmFyIGNsaWVudFdpZHRoID0gcmVhbENsaWVudFdpZHRoIC0gdGhpcy5nZXRQYWRkaW5nV2lkdGgoKTtcbiAgICAgICAgICAgIHZhciB0cmFja1dpZHRoID0gKDAsIF9nZXRJbm5lcldpZHRoMltcImRlZmF1bHRcIl0pKHRoaXMudHJhY2tIb3Jpem9udGFsKTtcbiAgICAgICAgICAgIHZhciB0aHVtYldpZHRoID0gdGhpcy5nZXRUaHVtYkhvcml6b250YWxXaWR0aCgpO1xuICAgICAgICAgICAgcmV0dXJuIG9mZnNldCAvICh0cmFja1dpZHRoIC0gdGh1bWJXaWR0aCkgKiAoc2Nyb2xsV2lkdGggLSBjbGllbnRXaWR0aCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFNjcm9sbFRvcEZvck9mZnNldCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTY3JvbGxUb3BGb3JPZmZzZXQob2Zmc2V0KSB7XG4gICAgICAgICAgICB2YXIgX3ZpZXc0ID0gdGhpcy52aWV3LFxuICAgICAgICAgICAgICAgIHJlYWxTY3JvbGxIZWlnaHQgPSBfdmlldzQuc2Nyb2xsSGVpZ2h0LFxuICAgICAgICAgICAgICAgIHJlYWxDbGllbnRIZWlnaHQgPSBfdmlldzQuY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgICAgICB2YXIgc2Nyb2xsSGVpZ2h0ID0gcmVhbFNjcm9sbEhlaWdodCAtIHRoaXMuZ2V0UGFkZGluZ0hlaWdodCgpO1xuICAgICAgICAgICAgdmFyIGNsaWVudEhlaWdodCA9IHJlYWxDbGllbnRIZWlnaHQgLSB0aGlzLmdldFBhZGRpbmdIZWlnaHQoKTtcbiAgICAgICAgICAgIHZhciB0cmFja0hlaWdodCA9ICgwLCBfZ2V0SW5uZXJIZWlnaHQyW1wiZGVmYXVsdFwiXSkodGhpcy50cmFja1ZlcnRpY2FsKTtcbiAgICAgICAgICAgIHZhciB0aHVtYkhlaWdodCA9IHRoaXMuZ2V0VGh1bWJWZXJ0aWNhbEhlaWdodCgpO1xuICAgICAgICAgICAgcmV0dXJuIG9mZnNldCAvICh0cmFja0hlaWdodCAtIHRodW1iSGVpZ2h0KSAqIChzY3JvbGxIZWlnaHQgLSBjbGllbnRIZWlnaHQpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzY3JvbGxMZWZ0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNjcm9sbExlZnQoKSB7XG4gICAgICAgICAgICB2YXIgbGVmdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMDtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLnZpZXcpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxMZWZ0ID0gbGVmdDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2Nyb2xsVG9wJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNjcm9sbFRvcCgpIHtcbiAgICAgICAgICAgIHZhciB0b3AgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDA7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy52aWV3KSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnZpZXcuc2Nyb2xsVG9wID0gdG9wO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzY3JvbGxUb0xlZnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2Nyb2xsVG9MZWZ0KCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnZpZXcpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxMZWZ0ID0gMDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2Nyb2xsVG9Ub3AnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2Nyb2xsVG9Ub3AoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudmlldykgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbFRvcCA9IDA7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Njcm9sbFRvUmlnaHQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2Nyb2xsVG9SaWdodCgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy52aWV3KSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnZpZXcuc2Nyb2xsTGVmdCA9IHRoaXMudmlldy5zY3JvbGxXaWR0aCAtIHRoaXMuZ2V0UGFkZGluZ1dpZHRoKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Njcm9sbFRvQm90dG9tJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNjcm9sbFRvQm90dG9tKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnZpZXcpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxUb3AgPSB0aGlzLnZpZXcuc2Nyb2xsSGVpZ2h0IC0gdGhpcy5nZXRQYWRkaW5nSGVpZ2h0KCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2FkZExpc3RlbmVycycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRMaXN0ZW5lcnMoKSB7XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnIHx8ICF0aGlzLnZpZXcpIHJldHVybjtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gdGhpcy52aWV3LFxuICAgICAgICAgICAgICAgIHRyYWNrSG9yaXpvbnRhbCA9IHRoaXMudHJhY2tIb3Jpem9udGFsLFxuICAgICAgICAgICAgICAgIHRyYWNrVmVydGljYWwgPSB0aGlzLnRyYWNrVmVydGljYWwsXG4gICAgICAgICAgICAgICAgdGh1bWJIb3Jpem9udGFsID0gdGhpcy50aHVtYkhvcml6b250YWwsXG4gICAgICAgICAgICAgICAgdGh1bWJWZXJ0aWNhbCA9IHRoaXMudGh1bWJWZXJ0aWNhbDtcblxuICAgICAgICAgICAgdmlldy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmhhbmRsZVNjcm9sbCk7XG4gICAgICAgICAgICB0cmFja0hvcml6b250YWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMuaGFuZGxlVHJhY2tNb3VzZUVudGVyKTtcbiAgICAgICAgICAgIHRyYWNrSG9yaXpvbnRhbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5oYW5kbGVUcmFja01vdXNlTGVhdmUpO1xuICAgICAgICAgICAgdHJhY2tIb3Jpem9udGFsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlSG9yaXpvbnRhbFRyYWNrTW91c2VEb3duKTtcbiAgICAgICAgICAgIHRyYWNrVmVydGljYWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMuaGFuZGxlVHJhY2tNb3VzZUVudGVyKTtcbiAgICAgICAgICAgIHRyYWNrVmVydGljYWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuaGFuZGxlVHJhY2tNb3VzZUxlYXZlKTtcbiAgICAgICAgICAgIHRyYWNrVmVydGljYWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVWZXJ0aWNhbFRyYWNrTW91c2VEb3duKTtcbiAgICAgICAgICAgIHRodW1iSG9yaXpvbnRhbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmhhbmRsZUhvcml6b250YWxUaHVtYk1vdXNlRG93bik7XG4gICAgICAgICAgICB0aHVtYlZlcnRpY2FsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlVmVydGljYWxUaHVtYk1vdXNlRG93bik7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5oYW5kbGVXaW5kb3dSZXNpemUpO1xuICAgICAgICAgICAgdGhpcy5wb2xsU2Nyb2xsYmFyV2lkdGhUaW1lciA9IHNldFRpbWVvdXQodGhpcy5wb2xsU2Nyb2xsYmFyV2lkdGgsIFBPTExfU0NST0xMQkFSX1dJRFRIX0lOVEVSVkFMKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVtb3ZlTGlzdGVuZXJzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVycygpIHtcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHwgIXRoaXMudmlldykgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSB0aGlzLnZpZXcsXG4gICAgICAgICAgICAgICAgdHJhY2tIb3Jpem9udGFsID0gdGhpcy50cmFja0hvcml6b250YWwsXG4gICAgICAgICAgICAgICAgdHJhY2tWZXJ0aWNhbCA9IHRoaXMudHJhY2tWZXJ0aWNhbCxcbiAgICAgICAgICAgICAgICB0aHVtYkhvcml6b250YWwgPSB0aGlzLnRodW1iSG9yaXpvbnRhbCxcbiAgICAgICAgICAgICAgICB0aHVtYlZlcnRpY2FsID0gdGhpcy50aHVtYlZlcnRpY2FsO1xuXG4gICAgICAgICAgICBpZiAodmlldykgdmlldy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmhhbmRsZVNjcm9sbCk7XG4gICAgICAgICAgICBpZiAodHJhY2tIb3Jpem9udGFsKSB7XG4gICAgICAgICAgICAgICAgdHJhY2tIb3Jpem9udGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLmhhbmRsZVRyYWNrTW91c2VFbnRlcik7XG4gICAgICAgICAgICAgICAgdHJhY2tIb3Jpem9udGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLmhhbmRsZVRyYWNrTW91c2VMZWF2ZSk7XG4gICAgICAgICAgICAgICAgdHJhY2tIb3Jpem9udGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlSG9yaXpvbnRhbFRyYWNrTW91c2VEb3duKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmFja1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgICAgdHJhY2tWZXJ0aWNhbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5oYW5kbGVUcmFja01vdXNlRW50ZXIpO1xuICAgICAgICAgICAgICAgIHRyYWNrVmVydGljYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuaGFuZGxlVHJhY2tNb3VzZUxlYXZlKTtcbiAgICAgICAgICAgICAgICB0cmFja1ZlcnRpY2FsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlVmVydGljYWxUcmFja01vdXNlRG93bik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGh1bWJIb3Jpem9udGFsKSB0aHVtYkhvcml6b250YWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVIb3Jpem9udGFsVGh1bWJNb3VzZURvd24pO1xuICAgICAgICAgICAgaWYgKHRodW1iVmVydGljYWwpIHRodW1iVmVydGljYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVWZXJ0aWNhbFRodW1iTW91c2VEb3duKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmhhbmRsZVdpbmRvd1Jlc2l6ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wb2xsU2Nyb2xsYmFyV2lkdGhUaW1lcikgY2xlYXJUaW1lb3V0KHRoaXMucG9sbFNjcm9sbGJhcldpZHRoVGltZXIpO1xuICAgICAgICAgICAgLy8gUG9zc2libHkgc2V0dXAgYnkgYGhhbmRsZURyYWdTdGFydGBcbiAgICAgICAgICAgIHRoaXMudGVhcmRvd25EcmFnZ2luZygpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdwb2xsU2Nyb2xsYmFyV2lkdGgnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcG9sbFNjcm9sbGJhcldpZHRoKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMucmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyLmRldGVjdFNjcm9sbGJhcldpZHRoQ2hhbmdlKF90aGlzMi5nZXRWYWx1ZXMoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLl91cGRhdGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnBvbGxTY3JvbGxiYXJXaWR0aFRpbWVyID0gc2V0VGltZW91dChfdGhpczIucG9sbFNjcm9sbGJhcldpZHRoLCBQT0xMX1NDUk9MTEJBUl9XSURUSF9JTlRFUlZBTCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi5wb2xsU2Nyb2xsYmFyV2lkdGhUaW1lciA9IHNldFRpbWVvdXQoX3RoaXMyLnBvbGxTY3JvbGxiYXJXaWR0aCwgUE9MTF9TQ1JPTExCQVJfV0lEVEhfSU5URVJWQUwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkZXRlY3RTY3JvbGxiYXJXaWR0aENoYW5nZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXRlY3RTY3JvbGxiYXJXaWR0aENoYW5nZSh2YWx1ZXMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgc2Nyb2xsTGVmdCA9IHZhbHVlcy5zY3JvbGxMZWZ0LFxuICAgICAgICAgICAgICAgIHNjcm9sbFRvcCA9IHZhbHVlcy5zY3JvbGxUb3A7XG5cbiAgICAgICAgICAgICgwLCBfZ2V0U2Nyb2xsYmFyV2lkdGguaW52YWxpZGF0ZVNjcm9sbGJhcldpZHRoKSgpO1xuICAgICAgICAgICAgdmFyIHNjcm9sbGJhcldpZHRoID0gKDAsIF9nZXRTY3JvbGxiYXJXaWR0aC5nZXRTY3JvbGxiYXJXaWR0aCkodmFsdWVzKTtcbiAgICAgICAgICAgIHZhciBpc0NoYW5nZWQgPSBzY3JvbGxiYXJXaWR0aCAhPT0gdGhpcy5zdGF0ZS5zY3JvbGxiYXJXaWR0aCAmJiBzY3JvbGxiYXJXaWR0aCAhPT0gdGhpcy5zdGF0ZS5zY3JvbGxiYXJXaWR0aCArIDE7XG4gICAgICAgICAgICBpZiAoaXNDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNjcm9sbGJhcldpZHRoOiBzY3JvbGxiYXJXaWR0aCB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfZ2V0VmFsdWVzID0gX3RoaXMzLmdldFZhbHVlcygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50SGVpZ2h0ID0gX2dldFZhbHVlcy5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxIZWlnaHQgPSBfZ2V0VmFsdWVzLnNjcm9sbEhlaWdodDtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbmVhckJvdHRvbSA9IE1hdGguYWJzKHNjcm9sbEhlaWdodCAtIGNsaWVudEhlaWdodCAtIHNjcm9sbFRvcCkgPD0gc2Nyb2xsYmFyV2lkdGg7XG5cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnNjcm9sbExlZnQoc2Nyb2xsTGVmdCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZWFyQm90dG9tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuc2Nyb2xsVG9wKHNjcm9sbEhlaWdodCAtIGNsaWVudEhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuc2Nyb2xsVG9wKHNjcm9sbFRvcCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpc0NoYW5nZWQ7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVNjcm9sbCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTY3JvbGwoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgX3Byb3BzMyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgICAgICAgb25TY3JvbGwgPSBfcHJvcHMzLm9uU2Nyb2xsLFxuICAgICAgICAgICAgICAgIG9uU2Nyb2xsRnJhbWUgPSBfcHJvcHMzLm9uU2Nyb2xsRnJhbWU7XG5cbiAgICAgICAgICAgIGlmIChvblNjcm9sbCkgb25TY3JvbGwoZXZlbnQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGUoZnVuY3Rpb24gKHZhbHVlcykge1xuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gdmFsdWVzLnNjcm9sbExlZnQsXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcCA9IHZhbHVlcy5zY3JvbGxUb3A7XG5cbiAgICAgICAgICAgICAgICBfdGhpczQudmlld1Njcm9sbExlZnQgPSBzY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgIF90aGlzNC52aWV3U2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICAgIGlmIChvblNjcm9sbEZyYW1lKSBvblNjcm9sbEZyYW1lKHZhbHVlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0U2Nyb2xsaW5nKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVNjcm9sbFN0YXJ0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNjcm9sbFN0YXJ0KCkge1xuICAgICAgICAgICAgdmFyIG9uU2Nyb2xsU3RhcnQgPSB0aGlzLnByb3BzLm9uU2Nyb2xsU3RhcnQ7XG5cbiAgICAgICAgICAgIGlmIChvblNjcm9sbFN0YXJ0KSBvblNjcm9sbFN0YXJ0KCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVNjcm9sbFN0YXJ0QXV0b0hpZGUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlU2Nyb2xsU3RhcnRBdXRvSGlkZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTY3JvbGxTdGFydEF1dG9IaWRlKCkge1xuICAgICAgICAgICAgdmFyIGF1dG9IaWRlID0gdGhpcy5wcm9wcy5hdXRvSGlkZTtcblxuICAgICAgICAgICAgaWYgKCFhdXRvSGlkZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5zaG93VHJhY2tzKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVNjcm9sbFN0b3AnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU2Nyb2xsU3RvcCgpIHtcbiAgICAgICAgICAgIHZhciBvblNjcm9sbFN0b3AgPSB0aGlzLnByb3BzLm9uU2Nyb2xsU3RvcDtcblxuICAgICAgICAgICAgaWYgKG9uU2Nyb2xsU3RvcCkgb25TY3JvbGxTdG9wKCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVNjcm9sbFN0b3BBdXRvSGlkZSgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVTY3JvbGxTdG9wQXV0b0hpZGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU2Nyb2xsU3RvcEF1dG9IaWRlKCkge1xuICAgICAgICAgICAgdmFyIGF1dG9IaWRlID0gdGhpcy5wcm9wcy5hdXRvSGlkZTtcblxuICAgICAgICAgICAgaWYgKCFhdXRvSGlkZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5oaWRlVHJhY2tzKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVdpbmRvd1Jlc2l6ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVXaW5kb3dSZXNpemUoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVIb3Jpem9udGFsVHJhY2tNb3VzZURvd24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlSG9yaXpvbnRhbFRyYWNrTW91c2VEb3duKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCxcbiAgICAgICAgICAgICAgICBjbGllbnRYID0gZXZlbnQuY2xpZW50WDtcblxuICAgICAgICAgICAgdmFyIF90YXJnZXQkZ2V0Qm91bmRpbmdDbCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgICAgICB0YXJnZXRMZWZ0ID0gX3RhcmdldCRnZXRCb3VuZGluZ0NsLmxlZnQ7XG5cbiAgICAgICAgICAgIHZhciB0aHVtYldpZHRoID0gdGhpcy5nZXRUaHVtYkhvcml6b250YWxXaWR0aCgpO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IE1hdGguYWJzKHRhcmdldExlZnQgLSBjbGllbnRYKSAtIHRodW1iV2lkdGggLyAyO1xuICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbExlZnQgPSB0aGlzLmdldFNjcm9sbExlZnRGb3JPZmZzZXQob2Zmc2V0KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlVmVydGljYWxUcmFja01vdXNlRG93bicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVWZXJ0aWNhbFRyYWNrTW91c2VEb3duKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCxcbiAgICAgICAgICAgICAgICBjbGllbnRZID0gZXZlbnQuY2xpZW50WTtcblxuICAgICAgICAgICAgdmFyIF90YXJnZXQkZ2V0Qm91bmRpbmdDbDIgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICAgICAgdGFyZ2V0VG9wID0gX3RhcmdldCRnZXRCb3VuZGluZ0NsMi50b3A7XG5cbiAgICAgICAgICAgIHZhciB0aHVtYkhlaWdodCA9IHRoaXMuZ2V0VGh1bWJWZXJ0aWNhbEhlaWdodCgpO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IE1hdGguYWJzKHRhcmdldFRvcCAtIGNsaWVudFkpIC0gdGh1bWJIZWlnaHQgLyAyO1xuICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbFRvcCA9IHRoaXMuZ2V0U2Nyb2xsVG9wRm9yT2Zmc2V0KG9mZnNldCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZUhvcml6b250YWxUaHVtYk1vdXNlRG93bicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVIb3Jpem9udGFsVGh1bWJNb3VzZURvd24oZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZURyYWdTdGFydChldmVudCk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LFxuICAgICAgICAgICAgICAgIGNsaWVudFggPSBldmVudC5jbGllbnRYO1xuICAgICAgICAgICAgdmFyIG9mZnNldFdpZHRoID0gdGFyZ2V0Lm9mZnNldFdpZHRoO1xuXG4gICAgICAgICAgICB2YXIgX3RhcmdldCRnZXRCb3VuZGluZ0NsMyA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgICAgICBsZWZ0ID0gX3RhcmdldCRnZXRCb3VuZGluZ0NsMy5sZWZ0O1xuXG4gICAgICAgICAgICB0aGlzLnByZXZQYWdlWCA9IG9mZnNldFdpZHRoIC0gKGNsaWVudFggLSBsZWZ0KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlVmVydGljYWxUaHVtYk1vdXNlRG93bicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVWZXJ0aWNhbFRodW1iTW91c2VEb3duKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVEcmFnU3RhcnQoZXZlbnQpO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCxcbiAgICAgICAgICAgICAgICBjbGllbnRZID0gZXZlbnQuY2xpZW50WTtcbiAgICAgICAgICAgIHZhciBvZmZzZXRIZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgICAgICB2YXIgX3RhcmdldCRnZXRCb3VuZGluZ0NsNCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgICAgICB0b3AgPSBfdGFyZ2V0JGdldEJvdW5kaW5nQ2w0LnRvcDtcblxuICAgICAgICAgICAgdGhpcy5wcmV2UGFnZVkgPSBvZmZzZXRIZWlnaHQgLSAoY2xpZW50WSAtIHRvcCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldHVwRHJhZ2dpbmcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0dXBEcmFnZ2luZygpIHtcbiAgICAgICAgICAgICgwLCBfZG9tQ3NzMltcImRlZmF1bHRcIl0pKGRvY3VtZW50LmJvZHksIF9zdHlsZXMuZGlzYWJsZVNlbGVjdFN0eWxlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuaGFuZGxlRHJhZyk7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5oYW5kbGVEcmFnRW5kKTtcbiAgICAgICAgICAgIGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQgPSBfcmV0dXJuRmFsc2UyW1wiZGVmYXVsdFwiXTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndGVhcmRvd25EcmFnZ2luZycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0ZWFyZG93bkRyYWdnaW5nKCkge1xuICAgICAgICAgICAgKDAsIF9kb21Dc3MyW1wiZGVmYXVsdFwiXSkoZG9jdW1lbnQuYm9keSwgX3N0eWxlcy5kaXNhYmxlU2VsZWN0U3R5bGVSZXNldCk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLmhhbmRsZURyYWcpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuaGFuZGxlRHJhZ0VuZCk7XG4gICAgICAgICAgICBkb2N1bWVudC5vbnNlbGVjdHN0YXJ0ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVEcmFnU3RhcnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRHJhZ1N0YXJ0KGV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5zZXR1cERyYWdnaW5nKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZURyYWcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRHJhZyhldmVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldlBhZ2VYKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNsaWVudFggPSBldmVudC5jbGllbnRYO1xuXG4gICAgICAgICAgICAgICAgdmFyIF90cmFja0hvcml6b250YWwkZ2V0QiA9IHRoaXMudHJhY2tIb3Jpem9udGFsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgICAgICAgICB0cmFja0xlZnQgPSBfdHJhY2tIb3Jpem9udGFsJGdldEIubGVmdDtcblxuICAgICAgICAgICAgICAgIHZhciB0aHVtYldpZHRoID0gdGhpcy5nZXRUaHVtYkhvcml6b250YWxXaWR0aCgpO1xuICAgICAgICAgICAgICAgIHZhciBjbGlja1Bvc2l0aW9uID0gdGh1bWJXaWR0aCAtIHRoaXMucHJldlBhZ2VYO1xuICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSAtdHJhY2tMZWZ0ICsgY2xpZW50WCAtIGNsaWNrUG9zaXRpb247XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbExlZnQgPSB0aGlzLmdldFNjcm9sbExlZnRGb3JPZmZzZXQob2Zmc2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZQYWdlWSkge1xuICAgICAgICAgICAgICAgIHZhciBjbGllbnRZID0gZXZlbnQuY2xpZW50WTtcblxuICAgICAgICAgICAgICAgIHZhciBfdHJhY2tWZXJ0aWNhbCRnZXRCb3UgPSB0aGlzLnRyYWNrVmVydGljYWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICAgICAgICAgIHRyYWNrVG9wID0gX3RyYWNrVmVydGljYWwkZ2V0Qm91LnRvcDtcblxuICAgICAgICAgICAgICAgIHZhciB0aHVtYkhlaWdodCA9IHRoaXMuZ2V0VGh1bWJWZXJ0aWNhbEhlaWdodCgpO1xuICAgICAgICAgICAgICAgIHZhciBfY2xpY2tQb3NpdGlvbiA9IHRodW1iSGVpZ2h0IC0gdGhpcy5wcmV2UGFnZVk7XG4gICAgICAgICAgICAgICAgdmFyIF9vZmZzZXQgPSAtdHJhY2tUb3AgKyBjbGllbnRZIC0gX2NsaWNrUG9zaXRpb247XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbFRvcCA9IHRoaXMuZ2V0U2Nyb2xsVG9wRm9yT2Zmc2V0KF9vZmZzZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVEcmFnRW5kJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZURyYWdFbmQoKSB7XG4gICAgICAgICAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnByZXZQYWdlWCA9IHRoaXMucHJldlBhZ2VZID0gMDtcbiAgICAgICAgICAgIHRoaXMudGVhcmRvd25EcmFnZ2luZygpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVEcmFnRW5kQXV0b0hpZGUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlRHJhZ0VuZEF1dG9IaWRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZURyYWdFbmRBdXRvSGlkZSgpIHtcbiAgICAgICAgICAgIHZhciBhdXRvSGlkZSA9IHRoaXMucHJvcHMuYXV0b0hpZGU7XG5cbiAgICAgICAgICAgIGlmICghYXV0b0hpZGUpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuaGlkZVRyYWNrcygpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVUcmFja01vdXNlRW50ZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlVHJhY2tNb3VzZUVudGVyKCkge1xuICAgICAgICAgICAgdGhpcy50cmFja01vdXNlT3ZlciA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVRyYWNrTW91c2VFbnRlckF1dG9IaWRlKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVRyYWNrTW91c2VFbnRlckF1dG9IaWRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVRyYWNrTW91c2VFbnRlckF1dG9IaWRlKCkge1xuICAgICAgICAgICAgdmFyIGF1dG9IaWRlID0gdGhpcy5wcm9wcy5hdXRvSGlkZTtcblxuICAgICAgICAgICAgaWYgKCFhdXRvSGlkZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5zaG93VHJhY2tzKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVRyYWNrTW91c2VMZWF2ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVUcmFja01vdXNlTGVhdmUoKSB7XG4gICAgICAgICAgICB0aGlzLnRyYWNrTW91c2VPdmVyID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVRyYWNrTW91c2VMZWF2ZUF1dG9IaWRlKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVRyYWNrTW91c2VMZWF2ZUF1dG9IaWRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVRyYWNrTW91c2VMZWF2ZUF1dG9IaWRlKCkge1xuICAgICAgICAgICAgdmFyIGF1dG9IaWRlID0gdGhpcy5wcm9wcy5hdXRvSGlkZTtcblxuICAgICAgICAgICAgaWYgKCFhdXRvSGlkZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5oaWRlVHJhY2tzKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Nob3dUcmFja3MnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd1RyYWNrcygpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhpZGVUcmFja3NUaW1lb3V0KTtcbiAgICAgICAgICAgICgwLCBfZG9tQ3NzMltcImRlZmF1bHRcIl0pKHRoaXMudHJhY2tIb3Jpem9udGFsLCB7IG9wYWNpdHk6IDEgfSk7XG4gICAgICAgICAgICAoMCwgX2RvbUNzczJbXCJkZWZhdWx0XCJdKSh0aGlzLnRyYWNrVmVydGljYWwsIHsgb3BhY2l0eTogMSB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGlkZVRyYWNrcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoaWRlVHJhY2tzKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmRyYWdnaW5nKSByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxpbmcpIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0aGlzLnRyYWNrTW91c2VPdmVyKSByZXR1cm47XG4gICAgICAgICAgICB2YXIgYXV0b0hpZGVUaW1lb3V0ID0gdGhpcy5wcm9wcy5hdXRvSGlkZVRpbWVvdXQ7XG5cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhpZGVUcmFja3NUaW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMuaGlkZVRyYWNrc1RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAoMCwgX2RvbUNzczJbXCJkZWZhdWx0XCJdKShfdGhpczUudHJhY2tIb3Jpem9udGFsLCB7IG9wYWNpdHk6IDAgfSk7XG4gICAgICAgICAgICAgICAgKDAsIF9kb21Dc3MyW1wiZGVmYXVsdFwiXSkoX3RoaXM1LnRyYWNrVmVydGljYWwsIHsgb3BhY2l0eTogMCB9KTtcbiAgICAgICAgICAgIH0sIGF1dG9IaWRlVGltZW91dCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RldGVjdFNjcm9sbGluZycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXRlY3RTY3JvbGxpbmcoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsaW5nKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnNjcm9sbGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVNjcm9sbFN0YXJ0KCk7XG4gICAgICAgICAgICB0aGlzLmRldGVjdFNjcm9sbGluZ0ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpczYubGFzdFZpZXdTY3JvbGxMZWZ0ID09PSBfdGhpczYudmlld1Njcm9sbExlZnQgJiYgX3RoaXM2Lmxhc3RWaWV3U2Nyb2xsVG9wID09PSBfdGhpczYudmlld1Njcm9sbFRvcCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKF90aGlzNi5kZXRlY3RTY3JvbGxpbmdJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi5zY3JvbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmhhbmRsZVNjcm9sbFN0b3AoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXM2Lmxhc3RWaWV3U2Nyb2xsTGVmdCA9IF90aGlzNi52aWV3U2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICBfdGhpczYubGFzdFZpZXdTY3JvbGxUb3AgPSBfdGhpczYudmlld1Njcm9sbFRvcDtcbiAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JhZicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByYWYoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5yZXF1ZXN0RnJhbWUpIF9yYWYzW1wiZGVmYXVsdFwiXS5jYW5jZWwodGhpcy5yZXF1ZXN0RnJhbWUpO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0RnJhbWUgPSAoMCwgX3JhZjNbXCJkZWZhdWx0XCJdKShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXM3LnJlcXVlc3RGcmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLnJhZihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXM4Ll91cGRhdGUoZnVuY3Rpb24gKHZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczguZGV0ZWN0U2Nyb2xsYmFyV2lkdGhDaGFuZ2UodmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh2YWx1ZXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ191cGRhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZShjYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIF9wcm9wczQgPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgICAgIG9uVXBkYXRlID0gX3Byb3BzNC5vblVwZGF0ZSxcbiAgICAgICAgICAgICAgICBoaWRlVHJhY2tzV2hlbk5vdE5lZWRlZCA9IF9wcm9wczQuaGlkZVRyYWNrc1doZW5Ob3ROZWVkZWQ7XG5cbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnNjcm9sbFRvcCA9IDA7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zY3JvbGxMZWZ0ID0gMDtcbiAgICAgICAgICAgIGlmICghdGhpcy52aWV3KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy5nZXRWYWx1ZXMoKTtcbiAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gdmFsdWVzLnNjcm9sbExlZnQsXG4gICAgICAgICAgICAgICAgY2xpZW50V2lkdGggPSB2YWx1ZXMuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICAgICAgc2Nyb2xsV2lkdGggPSB2YWx1ZXMuc2Nyb2xsV2lkdGg7XG5cbiAgICAgICAgICAgIHZhciB0cmFja0hvcml6b250YWxXaWR0aCA9ICgwLCBfZ2V0SW5uZXJXaWR0aDJbXCJkZWZhdWx0XCJdKSh0aGlzLnRyYWNrSG9yaXpvbnRhbCk7XG4gICAgICAgICAgICB2YXIgdGh1bWJIb3Jpem9udGFsV2lkdGggPSB0aGlzLmdldFRodW1iSG9yaXpvbnRhbFdpZHRoKCk7XG4gICAgICAgICAgICB2YXIgdGh1bWJIb3Jpem9udGFsWCA9IHNjcm9sbExlZnQgLyAoc2Nyb2xsV2lkdGggLSBjbGllbnRXaWR0aCkgKiAodHJhY2tIb3Jpem9udGFsV2lkdGggLSB0aHVtYkhvcml6b250YWxXaWR0aCk7XG4gICAgICAgICAgICB2YXIgdGh1bWJIb3Jpem9udGFsU3R5bGUgPSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHRodW1iSG9yaXpvbnRhbFdpZHRoLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoJyArIHRodW1iSG9yaXpvbnRhbFggKyAncHgpJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSB2YWx1ZXMuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgICAgIGNsaWVudEhlaWdodCA9IHZhbHVlcy5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gdmFsdWVzLnNjcm9sbEhlaWdodDtcblxuICAgICAgICAgICAgdmFyIHRyYWNrVmVydGljYWxIZWlnaHQgPSAoMCwgX2dldElubmVySGVpZ2h0MltcImRlZmF1bHRcIl0pKHRoaXMudHJhY2tWZXJ0aWNhbCk7XG4gICAgICAgICAgICB2YXIgdGh1bWJWZXJ0aWNhbEhlaWdodCA9IHRoaXMuZ2V0VGh1bWJWZXJ0aWNhbEhlaWdodCgpO1xuICAgICAgICAgICAgdmFyIHRodW1iVmVydGljYWxZID0gc2Nyb2xsVG9wIC8gKHNjcm9sbEhlaWdodCAtIGNsaWVudEhlaWdodCkgKiAodHJhY2tWZXJ0aWNhbEhlaWdodCAtIHRodW1iVmVydGljYWxIZWlnaHQpO1xuICAgICAgICAgICAgdmFyIHRodW1iVmVydGljYWxTdHlsZSA9IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRodW1iVmVydGljYWxIZWlnaHQsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgnICsgdGh1bWJWZXJ0aWNhbFkgKyAncHgpJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChoaWRlVHJhY2tzV2hlbk5vdE5lZWRlZCkge1xuICAgICAgICAgICAgICAgIHZhciB0cmFja0hvcml6b250YWxTdHlsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogc2Nyb2xsV2lkdGggPiBjbGllbnRXaWR0aCA/ICd2aXNpYmxlJyA6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgdHJhY2tWZXJ0aWNhbFN0eWxlID0ge1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBzY3JvbGxIZWlnaHQgPiBjbGllbnRIZWlnaHQgPyAndmlzaWJsZScgOiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgKDAsIF9kb21Dc3MyW1wiZGVmYXVsdFwiXSkodGhpcy50cmFja0hvcml6b250YWwsIHRyYWNrSG9yaXpvbnRhbFN0eWxlKTtcbiAgICAgICAgICAgICAgICAoMCwgX2RvbUNzczJbXCJkZWZhdWx0XCJdKSh0aGlzLnRyYWNrVmVydGljYWwsIHRyYWNrVmVydGljYWxTdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoMCwgX2RvbUNzczJbXCJkZWZhdWx0XCJdKSh0aGlzLnRodW1iSG9yaXpvbnRhbCwgdGh1bWJIb3Jpem9udGFsU3R5bGUpO1xuICAgICAgICAgICAgKDAsIF9kb21Dc3MyW1wiZGVmYXVsdFwiXSkodGhpcy50aHVtYlZlcnRpY2FsLCB0aHVtYlZlcnRpY2FsU3R5bGUpO1xuICAgICAgICAgICAgaWYgKG9uVXBkYXRlKSBvblVwZGF0ZSh2YWx1ZXMpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuO1xuICAgICAgICAgICAgY2FsbGJhY2sodmFsdWVzKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuICAgICAgICAgICAgdmFyIF9wcm9wczUgPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgICAgIG9uU2Nyb2xsID0gX3Byb3BzNS5vblNjcm9sbCxcbiAgICAgICAgICAgICAgICBvblNjcm9sbEZyYW1lID0gX3Byb3BzNS5vblNjcm9sbEZyYW1lLFxuICAgICAgICAgICAgICAgIG9uU2Nyb2xsU3RhcnQgPSBfcHJvcHM1Lm9uU2Nyb2xsU3RhcnQsXG4gICAgICAgICAgICAgICAgb25TY3JvbGxTdG9wID0gX3Byb3BzNS5vblNjcm9sbFN0b3AsXG4gICAgICAgICAgICAgICAgb25VcGRhdGUgPSBfcHJvcHM1Lm9uVXBkYXRlLFxuICAgICAgICAgICAgICAgIHJlbmRlclZpZXcgPSBfcHJvcHM1LnJlbmRlclZpZXcsXG4gICAgICAgICAgICAgICAgcmVuZGVyVHJhY2tIb3Jpem9udGFsID0gX3Byb3BzNS5yZW5kZXJUcmFja0hvcml6b250YWwsXG4gICAgICAgICAgICAgICAgcmVuZGVyVHJhY2tWZXJ0aWNhbCA9IF9wcm9wczUucmVuZGVyVHJhY2tWZXJ0aWNhbCxcbiAgICAgICAgICAgICAgICByZW5kZXJUaHVtYkhvcml6b250YWwgPSBfcHJvcHM1LnJlbmRlclRodW1iSG9yaXpvbnRhbCxcbiAgICAgICAgICAgICAgICByZW5kZXJUaHVtYlZlcnRpY2FsID0gX3Byb3BzNS5yZW5kZXJUaHVtYlZlcnRpY2FsLFxuICAgICAgICAgICAgICAgIHRhZ05hbWUgPSBfcHJvcHM1LnRhZ05hbWUsXG4gICAgICAgICAgICAgICAgaGlkZVRyYWNrc1doZW5Ob3ROZWVkZWQgPSBfcHJvcHM1LmhpZGVUcmFja3NXaGVuTm90TmVlZGVkLFxuICAgICAgICAgICAgICAgIGF1dG9IaWRlID0gX3Byb3BzNS5hdXRvSGlkZSxcbiAgICAgICAgICAgICAgICBhdXRvSGlkZVRpbWVvdXQgPSBfcHJvcHM1LmF1dG9IaWRlVGltZW91dCxcbiAgICAgICAgICAgICAgICBhdXRvSGlkZUR1cmF0aW9uID0gX3Byb3BzNS5hdXRvSGlkZUR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIHRodW1iU2l6ZSA9IF9wcm9wczUudGh1bWJTaXplLFxuICAgICAgICAgICAgICAgIHRodW1iTWluU2l6ZSA9IF9wcm9wczUudGh1bWJNaW5TaXplLFxuICAgICAgICAgICAgICAgIHVuaXZlcnNhbCA9IF9wcm9wczUudW5pdmVyc2FsLFxuICAgICAgICAgICAgICAgIGF1dG9IZWlnaHQgPSBfcHJvcHM1LmF1dG9IZWlnaHQsXG4gICAgICAgICAgICAgICAgYXV0b0hlaWdodE1pbiA9IF9wcm9wczUuYXV0b0hlaWdodE1pbixcbiAgICAgICAgICAgICAgICBhdXRvSGVpZ2h0TWF4ID0gX3Byb3BzNS5hdXRvSGVpZ2h0TWF4LFxuICAgICAgICAgICAgICAgIHN0eWxlID0gX3Byb3BzNS5zdHlsZSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbiA9IF9wcm9wczUuY2hpbGRyZW4sXG4gICAgICAgICAgICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3Byb3BzNSwgWydvblNjcm9sbCcsICdvblNjcm9sbEZyYW1lJywgJ29uU2Nyb2xsU3RhcnQnLCAnb25TY3JvbGxTdG9wJywgJ29uVXBkYXRlJywgJ3JlbmRlclZpZXcnLCAncmVuZGVyVHJhY2tIb3Jpem9udGFsJywgJ3JlbmRlclRyYWNrVmVydGljYWwnLCAncmVuZGVyVGh1bWJIb3Jpem9udGFsJywgJ3JlbmRlclRodW1iVmVydGljYWwnLCAndGFnTmFtZScsICdoaWRlVHJhY2tzV2hlbk5vdE5lZWRlZCcsICdhdXRvSGlkZScsICdhdXRvSGlkZVRpbWVvdXQnLCAnYXV0b0hpZGVEdXJhdGlvbicsICd0aHVtYlNpemUnLCAndGh1bWJNaW5TaXplJywgJ3VuaXZlcnNhbCcsICdhdXRvSGVpZ2h0JywgJ2F1dG9IZWlnaHRNaW4nLCAnYXV0b0hlaWdodE1heCcsICdzdHlsZScsICdjaGlsZHJlbiddKTtcbiAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMgKi9cblxuICAgICAgICAgICAgdmFyIF9zdGF0ZSA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICAgICAgZGlkTW91bnRVbml2ZXJzYWwgPSBfc3RhdGUuZGlkTW91bnRVbml2ZXJzYWwsXG4gICAgICAgICAgICAgICAgc2Nyb2xsYmFyV2lkdGggPSBfc3RhdGUuc2Nyb2xsYmFyV2lkdGg7XG5cblxuICAgICAgICAgICAgdmFyIGNvbnRhaW5lclN0eWxlID0gX2V4dGVuZHMoe30sIF9zdHlsZXMuY29udGFpbmVyU3R5bGVEZWZhdWx0LCBhdXRvSGVpZ2h0ICYmIF9leHRlbmRzKHt9LCBfc3R5bGVzLmNvbnRhaW5lclN0eWxlQXV0b0hlaWdodCwge1xuICAgICAgICAgICAgICAgIG1pbkhlaWdodDogYXV0b0hlaWdodE1pbixcbiAgICAgICAgICAgICAgICBtYXhIZWlnaHQ6IGF1dG9IZWlnaHRNYXhcbiAgICAgICAgICAgIH0pLCBzdHlsZSk7XG5cbiAgICAgICAgICAgIHZhciB2aWV3U3R5bGUgPSBfZXh0ZW5kcyh7fSwgX3N0eWxlcy52aWV3U3R5bGVEZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgLy8gSGlkZSBzY3JvbGxiYXJzIGJ5IHNldHRpbmcgYSBuZWdhdGl2ZSBtYXJnaW5cbiAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogLXRoaXMuZ2V0UGFkZGluZ1dpZHRoKCkgKyAoc2Nyb2xsYmFyV2lkdGggPyAtc2Nyb2xsYmFyV2lkdGggOiAwKSxcbiAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206IC10aGlzLmdldFBhZGRpbmdIZWlnaHQoKSArIChzY3JvbGxiYXJXaWR0aCA/IC1zY3JvbGxiYXJXaWR0aCA6IDApLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAnY2FsYygxMDAlICsgJyArIChfc3R5bGVzLnNjcm9sbGJhclNpemUgKyBzY3JvbGxiYXJXaWR0aCkgKyAncHgpJ1xuICAgICAgICAgICAgfSwgYXV0b0hlaWdodCAmJiBfZXh0ZW5kcyh7fSwgX3N0eWxlcy52aWV3U3R5bGVBdXRvSGVpZ2h0LCB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHBhZGRpbmdIZWlnaHQgYW5kIHNjcm9sbGJhcldpZHRoIHRvIGF1dG9IZWlnaHQgaW4gb3JkZXIgdG8gY29tcGVuc2F0ZSBuZWdhdGl2ZSBtYXJnaW5zXG4gICAgICAgICAgICAgICAgbWluSGVpZ2h0OiAoMCwgX2lzU3RyaW5nMltcImRlZmF1bHRcIl0pKGF1dG9IZWlnaHRNaW4pID8gJ2NhbGMoJyArIGF1dG9IZWlnaHRNaW4gKyAnICsgJyArICh0aGlzLmdldFBhZGRpbmdIZWlnaHQoKSArIHNjcm9sbGJhcldpZHRoKSArICdweCknIDogYXV0b0hlaWdodE1pbiArIHRoaXMuZ2V0UGFkZGluZ0hlaWdodCgpICsgc2Nyb2xsYmFyV2lkdGgsXG4gICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiAoMCwgX2lzU3RyaW5nMltcImRlZmF1bHRcIl0pKGF1dG9IZWlnaHRNYXgpID8gJ2NhbGMoJyArIGF1dG9IZWlnaHRNYXggKyAnICsgJyArICh0aGlzLmdldFBhZGRpbmdIZWlnaHQoKSArIHNjcm9sbGJhcldpZHRoKSArICdweCknIDogYXV0b0hlaWdodE1heCArIHRoaXMuZ2V0UGFkZGluZ0hlaWdodCgpICsgc2Nyb2xsYmFyV2lkdGhcbiAgICAgICAgICAgIH0pLCBhdXRvSGVpZ2h0ICYmIHVuaXZlcnNhbCAmJiAhZGlkTW91bnRVbml2ZXJzYWwgJiYge1xuICAgICAgICAgICAgICAgIG1pbkhlaWdodDogYXV0b0hlaWdodE1pbixcbiAgICAgICAgICAgICAgICBtYXhIZWlnaHQ6IGF1dG9IZWlnaHRNYXhcbiAgICAgICAgICAgIH0sIHVuaXZlcnNhbCAmJiAhZGlkTW91bnRVbml2ZXJzYWwgJiYgX3N0eWxlcy52aWV3U3R5bGVVbml2ZXJzYWxJbml0aWFsKTtcblxuICAgICAgICAgICAgdmFyIHZpZXdXcmFwcGVyU3R5bGUgPSBfZXh0ZW5kcyh7fSwgX3N0eWxlcy52aWV3V3JhcHBlclN0eWxlRGVmYXVsdCwgYXV0b0hlaWdodCAmJiBfZXh0ZW5kcyh7fSwgX3N0eWxlcy52aWV3V3JhcHBlclN0eWxlQXV0b0hlaWdodCkpO1xuXG4gICAgICAgICAgICB2YXIgdmlld1dyYXBwZWRTdHlsZSA9IF9leHRlbmRzKHt9LCBfc3R5bGVzLnZpZXdXcmFwcGVkU3R5bGVEZWZhdWx0KTtcblxuICAgICAgICAgICAgdmFyIHRyYWNrQXV0b0hlaWdodFN0eWxlID0ge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246ICdvcGFjaXR5ICcgKyBhdXRvSGlkZUR1cmF0aW9uICsgJ21zJyxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgdHJhY2tIb3Jpem9udGFsU3R5bGUgPSBfZXh0ZW5kcyh7fSwgX3N0eWxlcy50cmFja0hvcml6b250YWxTdHlsZURlZmF1bHQsIGF1dG9IaWRlICYmIHRyYWNrQXV0b0hlaWdodFN0eWxlLCB1bml2ZXJzYWwgJiYgIWRpZE1vdW50VW5pdmVyc2FsICYmIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgdHJhY2tWZXJ0aWNhbFN0eWxlID0gX2V4dGVuZHMoe30sIF9zdHlsZXMudHJhY2tWZXJ0aWNhbFN0eWxlRGVmYXVsdCwgYXV0b0hpZGUgJiYgdHJhY2tBdXRvSGVpZ2h0U3R5bGUsIHVuaXZlcnNhbCAmJiAhZGlkTW91bnRVbml2ZXJzYWwgJiYge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiAoMCwgX3JlYWN0LmNyZWF0ZUVsZW1lbnQpKHRhZ05hbWUsIHsgY2xhc3NOYW1lOiBwcm9wcy5jbGFzc05hbWUgPyBwcm9wcy5jbGFzc05hbWUgOiAnJywgc3R5bGU6IGNvbnRhaW5lclN0eWxlLCByZWY6IGZ1bmN0aW9uIHJlZihfcmVmMykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczkuY29udGFpbmVyID0gX3JlZjM7XG4gICAgICAgICAgICAgICAgfSB9LCBbKDAsIF9yZWFjdC5jcmVhdGVFbGVtZW50KSgnZGl2JywgeyBzdHlsZTogdmlld1N0eWxlLCBrZXk6ICd2aWV3JywgcmVmOiBmdW5jdGlvbiByZWYoX3JlZjQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM5LnZpZXcgPSBfcmVmNDtcbiAgICAgICAgICAgICAgICB9IH0sIFsoMCwgX3JlYWN0LmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCB7IHN0eWxlOiB2aWV3V3JhcHBlclN0eWxlLCBrZXk6ICd2aWV3V3JhcHBlcicsIHJlZjogZnVuY3Rpb24gcmVmKF9yZWY1KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzOS52aWV3V3JhcHBlciA9IF9yZWY1O1xuICAgICAgICAgICAgICAgIH0gfSwgWygwLCBfcmVhY3QuY2xvbmVFbGVtZW50KShyZW5kZXJWaWV3KHsgc3R5bGU6IHZpZXdXcmFwcGVkU3R5bGUgfSksIHsga2V5OiAndmlld1dyYXBwZWQnLCByZWY6IGZ1bmN0aW9uIHJlZihfcmVmNikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczkudmlld1dyYXBwZWQgPSBfcmVmNjtcbiAgICAgICAgICAgICAgICB9IH0sIGNoaWxkcmVuKV0pXSksICgwLCBfcmVhY3QuY2xvbmVFbGVtZW50KShyZW5kZXJUcmFja0hvcml6b250YWwoeyBzdHlsZTogdHJhY2tIb3Jpem9udGFsU3R5bGUgfSksIHsga2V5OiAndHJhY2tIb3Jpem9udGFsJywgcmVmOiBmdW5jdGlvbiByZWYoX3JlZjcpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM5LnRyYWNrSG9yaXpvbnRhbCA9IF9yZWY3O1xuICAgICAgICAgICAgICAgIH0gfSwgKDAsIF9yZWFjdC5jbG9uZUVsZW1lbnQpKHJlbmRlclRodW1iSG9yaXpvbnRhbCh7IHN0eWxlOiBfc3R5bGVzLnRodW1iSG9yaXpvbnRhbFN0eWxlRGVmYXVsdCB9KSwgeyByZWY6IGZ1bmN0aW9uIHJlZihfcmVmOCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczkudGh1bWJIb3Jpem9udGFsID0gX3JlZjg7XG4gICAgICAgICAgICAgICAgfSB9KSksICgwLCBfcmVhY3QuY2xvbmVFbGVtZW50KShyZW5kZXJUcmFja1ZlcnRpY2FsKHsgc3R5bGU6IHRyYWNrVmVydGljYWxTdHlsZSB9KSwgeyBrZXk6ICd0cmFja1ZlcnRpY2FsJywgcmVmOiBmdW5jdGlvbiByZWYoX3JlZjkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM5LnRyYWNrVmVydGljYWwgPSBfcmVmOTtcbiAgICAgICAgICAgICAgICB9IH0sICgwLCBfcmVhY3QuY2xvbmVFbGVtZW50KShyZW5kZXJUaHVtYlZlcnRpY2FsKHsgc3R5bGU6IF9zdHlsZXMudGh1bWJWZXJ0aWNhbFN0eWxlRGVmYXVsdCB9KSwgeyByZWY6IGZ1bmN0aW9uIHJlZihfcmVmMTApIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM5LnRodW1iVmVydGljYWwgPSBfcmVmMTA7XG4gICAgICAgICAgICAgICAgfSB9KSldKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBTY3JvbGxiYXJzO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBTY3JvbGxiYXJzO1xuXG5cblNjcm9sbGJhcnMucHJvcFR5cGVzID0ge1xuICAgIG9uU2Nyb2xsOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uZnVuYyxcbiAgICBvblNjcm9sbEZyYW1lOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uZnVuYyxcbiAgICBvblNjcm9sbFN0YXJ0OiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uZnVuYyxcbiAgICBvblNjcm9sbFN0b3A6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5mdW5jLFxuICAgIG9uVXBkYXRlOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uZnVuYyxcbiAgICByZW5kZXJWaWV3OiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uZnVuYyxcbiAgICByZW5kZXJUcmFja0hvcml6b250YWw6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5mdW5jLFxuICAgIHJlbmRlclRyYWNrVmVydGljYWw6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5mdW5jLFxuICAgIHJlbmRlclRodW1iSG9yaXpvbnRhbDogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLmZ1bmMsXG4gICAgcmVuZGVyVGh1bWJWZXJ0aWNhbDogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLmZ1bmMsXG4gICAgdGFnTmFtZTogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLnN0cmluZyxcbiAgICB0aHVtYlNpemU6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5udW1iZXIsXG4gICAgdGh1bWJNaW5TaXplOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0ubnVtYmVyLFxuICAgIGhpZGVUcmFja3NXaGVuTm90TmVlZGVkOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uYm9vbCxcbiAgICBhdXRvSGlkZTogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLmJvb2wsXG4gICAgYXV0b0hpZGVUaW1lb3V0OiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0ubnVtYmVyLFxuICAgIGF1dG9IaWRlRHVyYXRpb246IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5udW1iZXIsXG4gICAgYXV0b0hlaWdodDogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLmJvb2wsXG4gICAgYXV0b0hlaWdodE1pbjogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLm9uZU9mVHlwZShbX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLm51bWJlciwgX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLnN0cmluZ10pLFxuICAgIGF1dG9IZWlnaHRNYXg6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5vbmVPZlR5cGUoW19wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5udW1iZXIsIF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5zdHJpbmddKSxcbiAgICB1bml2ZXJzYWw6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5ib29sLFxuICAgIHN0eWxlOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0ub2JqZWN0LFxuICAgIGNoaWxkcmVuOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0ubm9kZVxufTtcblxuU2Nyb2xsYmFycy5kZWZhdWx0UHJvcHMgPSB7XG4gICAgcmVuZGVyVmlldzogX2RlZmF1bHRSZW5kZXJFbGVtZW50cy5yZW5kZXJWaWV3RGVmYXVsdCxcbiAgICByZW5kZXJUcmFja0hvcml6b250YWw6IF9kZWZhdWx0UmVuZGVyRWxlbWVudHMucmVuZGVyVHJhY2tIb3Jpem9udGFsRGVmYXVsdCxcbiAgICByZW5kZXJUcmFja1ZlcnRpY2FsOiBfZGVmYXVsdFJlbmRlckVsZW1lbnRzLnJlbmRlclRyYWNrVmVydGljYWxEZWZhdWx0LFxuICAgIHJlbmRlclRodW1iSG9yaXpvbnRhbDogX2RlZmF1bHRSZW5kZXJFbGVtZW50cy5yZW5kZXJUaHVtYkhvcml6b250YWxEZWZhdWx0LFxuICAgIHJlbmRlclRodW1iVmVydGljYWw6IF9kZWZhdWx0UmVuZGVyRWxlbWVudHMucmVuZGVyVGh1bWJWZXJ0aWNhbERlZmF1bHQsXG4gICAgdGFnTmFtZTogJ2RpdicsXG4gICAgdGh1bWJNaW5TaXplOiAzMCxcbiAgICBoaWRlVHJhY2tzV2hlbk5vdE5lZWRlZDogZmFsc2UsXG4gICAgYXV0b0hpZGU6IGZhbHNlLFxuICAgIGF1dG9IaWRlVGltZW91dDogMTAwMCxcbiAgICBhdXRvSGlkZUR1cmF0aW9uOiAyMDAsXG4gICAgYXV0b0hlaWdodDogZmFsc2UsXG4gICAgYXV0b0hlaWdodE1pbjogMCxcbiAgICBhdXRvSGVpZ2h0TWF4OiAyMDAsXG4gICAgdW5pdmVyc2FsOiBmYWxzZVxufTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n")},function(module,exports,__webpack_require__){eval("/* WEBPACK VAR INJECTION */(function(global) {var now = __webpack_require__(14)\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function(object) {\n  if (!object) {\n    object = root;\n  }\n  object.requestAnimationFrame = raf\n  object.cancelAnimationFrame = caf\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(13)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3JhZi9pbmRleC5qcz9jNDQ5Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBub3cgPSByZXF1aXJlKCdwZXJmb3JtYW5jZS1ub3cnKVxuICAsIHJvb3QgPSB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHdpbmRvd1xuICAsIHZlbmRvcnMgPSBbJ21veicsICd3ZWJraXQnXVxuICAsIHN1ZmZpeCA9ICdBbmltYXRpb25GcmFtZSdcbiAgLCByYWYgPSByb290WydyZXF1ZXN0JyArIHN1ZmZpeF1cbiAgLCBjYWYgPSByb290WydjYW5jZWwnICsgc3VmZml4XSB8fCByb290WydjYW5jZWxSZXF1ZXN0JyArIHN1ZmZpeF1cblxuZm9yKHZhciBpID0gMDsgIXJhZiAmJiBpIDwgdmVuZG9ycy5sZW5ndGg7IGkrKykge1xuICByYWYgPSByb290W3ZlbmRvcnNbaV0gKyAnUmVxdWVzdCcgKyBzdWZmaXhdXG4gIGNhZiA9IHJvb3RbdmVuZG9yc1tpXSArICdDYW5jZWwnICsgc3VmZml4XVxuICAgICAgfHwgcm9vdFt2ZW5kb3JzW2ldICsgJ0NhbmNlbFJlcXVlc3QnICsgc3VmZml4XVxufVxuXG4vLyBTb21lIHZlcnNpb25zIG9mIEZGIGhhdmUgckFGIGJ1dCBub3QgY0FGXG5pZighcmFmIHx8ICFjYWYpIHtcbiAgdmFyIGxhc3QgPSAwXG4gICAgLCBpZCA9IDBcbiAgICAsIHF1ZXVlID0gW11cbiAgICAsIGZyYW1lRHVyYXRpb24gPSAxMDAwIC8gNjBcblxuICByYWYgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIGlmKHF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdmFyIF9ub3cgPSBub3coKVxuICAgICAgICAsIG5leHQgPSBNYXRoLm1heCgwLCBmcmFtZUR1cmF0aW9uIC0gKF9ub3cgLSBsYXN0KSlcbiAgICAgIGxhc3QgPSBuZXh0ICsgX25vd1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNwID0gcXVldWUuc2xpY2UoMClcbiAgICAgICAgLy8gQ2xlYXIgcXVldWUgaGVyZSB0byBwcmV2ZW50XG4gICAgICAgIC8vIGNhbGxiYWNrcyBmcm9tIGFwcGVuZGluZyBsaXN0ZW5lcnNcbiAgICAgICAgLy8gdG8gdGhlIGN1cnJlbnQgZnJhbWUncyBxdWV1ZVxuICAgICAgICBxdWV1ZS5sZW5ndGggPSAwXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmKCFjcFtpXS5jYW5jZWxsZWQpIHtcbiAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgY3BbaV0uY2FsbGJhY2sobGFzdClcbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyB0aHJvdyBlIH0sIDApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBNYXRoLnJvdW5kKG5leHQpKVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKHtcbiAgICAgIGhhbmRsZTogKytpZCxcbiAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgIGNhbmNlbGxlZDogZmFsc2VcbiAgICB9KVxuICAgIHJldHVybiBpZFxuICB9XG5cbiAgY2FmID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZihxdWV1ZVtpXS5oYW5kbGUgPT09IGhhbmRsZSkge1xuICAgICAgICBxdWV1ZVtpXS5jYW5jZWxsZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4pIHtcbiAgLy8gV3JhcCBpbiBhIG5ldyBmdW5jdGlvbiB0byBwcmV2ZW50XG4gIC8vIGBjYW5jZWxgIHBvdGVudGlhbGx5IGJlaW5nIGFzc2lnbmVkXG4gIC8vIHRvIHRoZSBuYXRpdmUgckFGIGZ1bmN0aW9uXG4gIHJldHVybiByYWYuY2FsbChyb290LCBmbilcbn1cbm1vZHVsZS5leHBvcnRzLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICBjYWYuYXBwbHkocm9vdCwgYXJndW1lbnRzKVxufVxubW9kdWxlLmV4cG9ydHMucG9seWZpbGwgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgaWYgKCFvYmplY3QpIHtcbiAgICBvYmplY3QgPSByb290O1xuICB9XG4gIG9iamVjdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSByYWZcbiAgb2JqZWN0LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gY2FmXG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///12\n")},function(module,exports){eval('var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function("return this")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === "object") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it\'s\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcz9jZDAwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBnO1xuXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxuZyA9IChmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXM7XG59KSgpO1xuXG50cnkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcblx0ZyA9IGcgfHwgbmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///13\n')},function(module,exports,__webpack_require__){eval('/* WEBPACK VAR INJECTION */(function(process) {// Generated by CoffeeScript 1.12.2\n(function() {\n  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;\n\n  if ((typeof performance !== "undefined" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== "undefined" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - nodeLoadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    moduleLoadTime = getNanoSeconds();\n    upTime = process.uptime() * 1e9;\n    nodeLoadTime = moduleLoadTime - upTime;\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n//# sourceMappingURL=performance-now.js.map\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(15)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3BlcmZvcm1hbmNlLW5vdy9saWIvcGVyZm9ybWFuY2Utbm93LmpzPzZkMDgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjJcbihmdW5jdGlvbigpIHtcbiAgdmFyIGdldE5hbm9TZWNvbmRzLCBocnRpbWUsIGxvYWRUaW1lLCBtb2R1bGVMb2FkVGltZSwgbm9kZUxvYWRUaW1lLCB1cFRpbWU7XG5cbiAgaWYgKCh0eXBlb2YgcGVyZm9ybWFuY2UgIT09IFwidW5kZWZpbmVkXCIgJiYgcGVyZm9ybWFuY2UgIT09IG51bGwpICYmIHBlcmZvcm1hbmNlLm5vdykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfTtcbiAgfSBlbHNlIGlmICgodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2VzcyAhPT0gbnVsbCkgJiYgcHJvY2Vzcy5ocnRpbWUpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIChnZXROYW5vU2Vjb25kcygpIC0gbm9kZUxvYWRUaW1lKSAvIDFlNjtcbiAgICB9O1xuICAgIGhydGltZSA9IHByb2Nlc3MuaHJ0aW1lO1xuICAgIGdldE5hbm9TZWNvbmRzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaHI7XG4gICAgICBociA9IGhydGltZSgpO1xuICAgICAgcmV0dXJuIGhyWzBdICogMWU5ICsgaHJbMV07XG4gICAgfTtcbiAgICBtb2R1bGVMb2FkVGltZSA9IGdldE5hbm9TZWNvbmRzKCk7XG4gICAgdXBUaW1lID0gcHJvY2Vzcy51cHRpbWUoKSAqIDFlOTtcbiAgICBub2RlTG9hZFRpbWUgPSBtb2R1bGVMb2FkVGltZSAtIHVwVGltZTtcbiAgfSBlbHNlIGlmIChEYXRlLm5vdykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gRGF0ZS5ub3coKSAtIGxvYWRUaW1lO1xuICAgIH07XG4gICAgbG9hZFRpbWUgPSBEYXRlLm5vdygpO1xuICB9IGVsc2Uge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsb2FkVGltZTtcbiAgICB9O1xuICAgIGxvYWRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIH1cblxufSkuY2FsbCh0aGlzKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGVyZm9ybWFuY2Utbm93LmpzLm1hcFxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///14\n')},function(module,exports){eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcz9mMjhjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///15\n")},function(module,exports,__webpack_require__){eval("var prefix = __webpack_require__(17)\nvar toCamelCase = __webpack_require__(18)\nvar cache = { 'float': 'cssFloat' }\nvar addPxToStyle = __webpack_require__(21)\n\nfunction style (element, property, value) {\n  var camel = cache[property]\n  if (typeof camel === 'undefined') {\n    camel = detect(property)\n  }\n\n  // may be false if CSS prop is unsupported\n  if (camel) {\n    if (value === undefined) {\n      return element.style[camel]\n    }\n\n    element.style[camel] = addPxToStyle(camel, value)\n  }\n}\n\nfunction each (element, properties) {\n  for (var k in properties) {\n    if (properties.hasOwnProperty(k)) {\n      style(element, k, properties[k])\n    }\n  }\n}\n\nfunction detect (cssProp) {\n  var camel = toCamelCase(cssProp)\n  var result = prefix(camel)\n  cache[camel] = cache[cssProp] = cache[result] = result\n  return result\n}\n\nfunction set () {\n  if (arguments.length === 2) {\n    if (typeof arguments[1] === 'string') {\n      arguments[0].style.cssText = arguments[1]\n    } else {\n      each(arguments[0], arguments[1])\n    }\n  } else {\n    style(arguments[0], arguments[1], arguments[2])\n  }\n}\n\nmodule.exports = set\nmodule.exports.set = set\n\nmodule.exports.get = function (element, properties) {\n  if (Array.isArray(properties)) {\n    return properties.reduce(function (obj, prop) {\n      obj[prop] = style(element, prop || '')\n      return obj\n    }, {})\n  } else {\n    return style(element, properties || '')\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL2RvbS1jc3MvaW5kZXguanM/NzFlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcHJlZml4ID0gcmVxdWlyZSgncHJlZml4LXN0eWxlJylcbnZhciB0b0NhbWVsQ2FzZSA9IHJlcXVpcmUoJ3RvLWNhbWVsLWNhc2UnKVxudmFyIGNhY2hlID0geyAnZmxvYXQnOiAnY3NzRmxvYXQnIH1cbnZhciBhZGRQeFRvU3R5bGUgPSByZXF1aXJlKCdhZGQtcHgtdG8tc3R5bGUnKVxuXG5mdW5jdGlvbiBzdHlsZSAoZWxlbWVudCwgcHJvcGVydHksIHZhbHVlKSB7XG4gIHZhciBjYW1lbCA9IGNhY2hlW3Byb3BlcnR5XVxuICBpZiAodHlwZW9mIGNhbWVsID09PSAndW5kZWZpbmVkJykge1xuICAgIGNhbWVsID0gZGV0ZWN0KHByb3BlcnR5KVxuICB9XG5cbiAgLy8gbWF5IGJlIGZhbHNlIGlmIENTUyBwcm9wIGlzIHVuc3VwcG9ydGVkXG4gIGlmIChjYW1lbCkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZWxlbWVudC5zdHlsZVtjYW1lbF1cbiAgICB9XG5cbiAgICBlbGVtZW50LnN0eWxlW2NhbWVsXSA9IGFkZFB4VG9TdHlsZShjYW1lbCwgdmFsdWUpXG4gIH1cbn1cblxuZnVuY3Rpb24gZWFjaCAoZWxlbWVudCwgcHJvcGVydGllcykge1xuICBmb3IgKHZhciBrIGluIHByb3BlcnRpZXMpIHtcbiAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgc3R5bGUoZWxlbWVudCwgaywgcHJvcGVydGllc1trXSlcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZGV0ZWN0IChjc3NQcm9wKSB7XG4gIHZhciBjYW1lbCA9IHRvQ2FtZWxDYXNlKGNzc1Byb3ApXG4gIHZhciByZXN1bHQgPSBwcmVmaXgoY2FtZWwpXG4gIGNhY2hlW2NhbWVsXSA9IGNhY2hlW2Nzc1Byb3BdID0gY2FjaGVbcmVzdWx0XSA9IHJlc3VsdFxuICByZXR1cm4gcmVzdWx0XG59XG5cbmZ1bmN0aW9uIHNldCAoKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMV0gPT09ICdzdHJpbmcnKSB7XG4gICAgICBhcmd1bWVudHNbMF0uc3R5bGUuY3NzVGV4dCA9IGFyZ3VtZW50c1sxXVxuICAgIH0gZWxzZSB7XG4gICAgICBlYWNoKGFyZ3VtZW50c1swXSwgYXJndW1lbnRzWzFdKVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBzdHlsZShhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0XG5tb2R1bGUuZXhwb3J0cy5zZXQgPSBzZXRcblxubW9kdWxlLmV4cG9ydHMuZ2V0ID0gZnVuY3Rpb24gKGVsZW1lbnQsIHByb3BlcnRpZXMpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkocHJvcGVydGllcykpIHtcbiAgICByZXR1cm4gcHJvcGVydGllcy5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgcHJvcCkge1xuICAgICAgb2JqW3Byb3BdID0gc3R5bGUoZWxlbWVudCwgcHJvcCB8fCAnJylcbiAgICAgIHJldHVybiBvYmpcbiAgICB9LCB7fSlcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3R5bGUoZWxlbWVudCwgcHJvcGVydGllcyB8fCAnJylcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///16\n")},function(module,exports){eval("var div = null\nvar prefixes = [ 'Webkit', 'Moz', 'O', 'ms' ]\n\nmodule.exports = function prefixStyle (prop) {\n  // re-use a dummy div\n  if (!div) {\n    div = document.createElement('div')\n  }\n\n  var style = div.style\n\n  // prop exists without prefix\n  if (prop in style) {\n    return prop\n  }\n\n  // borderRadius -> BorderRadius\n  var titleCase = prop.charAt(0).toUpperCase() + prop.slice(1)\n\n  // find the vendor-prefixed prop\n  for (var i = prefixes.length; i >= 0; i--) {\n    var name = prefixes[i] + titleCase\n    // e.g. WebkitBorderRadius or webkitBorderRadius\n    if (name in style) {\n      return name\n    }\n  }\n\n  return false\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3ByZWZpeC1zdHlsZS9pbmRleC5qcz82YTZjIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkaXYgPSBudWxsXG52YXIgcHJlZml4ZXMgPSBbICdXZWJraXQnLCAnTW96JywgJ08nLCAnbXMnIF1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwcmVmaXhTdHlsZSAocHJvcCkge1xuICAvLyByZS11c2UgYSBkdW1teSBkaXZcbiAgaWYgKCFkaXYpIHtcbiAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICB9XG5cbiAgdmFyIHN0eWxlID0gZGl2LnN0eWxlXG5cbiAgLy8gcHJvcCBleGlzdHMgd2l0aG91dCBwcmVmaXhcbiAgaWYgKHByb3AgaW4gc3R5bGUpIHtcbiAgICByZXR1cm4gcHJvcFxuICB9XG5cbiAgLy8gYm9yZGVyUmFkaXVzIC0+IEJvcmRlclJhZGl1c1xuICB2YXIgdGl0bGVDYXNlID0gcHJvcC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHByb3Auc2xpY2UoMSlcblxuICAvLyBmaW5kIHRoZSB2ZW5kb3ItcHJlZml4ZWQgcHJvcFxuICBmb3IgKHZhciBpID0gcHJlZml4ZXMubGVuZ3RoOyBpID49IDA7IGktLSkge1xuICAgIHZhciBuYW1lID0gcHJlZml4ZXNbaV0gKyB0aXRsZUNhc2VcbiAgICAvLyBlLmcuIFdlYmtpdEJvcmRlclJhZGl1cyBvciB3ZWJraXRCb3JkZXJSYWRpdXNcbiAgICBpZiAobmFtZSBpbiBzdHlsZSkge1xuICAgICAgcmV0dXJuIG5hbWVcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2Vcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///17\n")},function(module,exports,__webpack_require__){eval("\nvar space = __webpack_require__(19)\n\n/**\n * Export.\n */\n\nmodule.exports = toCamelCase\n\n/**\n * Convert a `string` to camel case.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toCamelCase(string) {\n  return space(string).replace(/\\s(\\w)/g, function (matches, letter) {\n    return letter.toUpperCase()\n  })\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3RvLWNhbWVsLWNhc2UvaW5kZXguanM/MTc3ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcbnZhciBzcGFjZSA9IHJlcXVpcmUoJ3RvLXNwYWNlLWNhc2UnKVxuXG4vKipcbiAqIEV4cG9ydC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHRvQ2FtZWxDYXNlXG5cbi8qKlxuICogQ29udmVydCBhIGBzdHJpbmdgIHRvIGNhbWVsIGNhc2UuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHRvQ2FtZWxDYXNlKHN0cmluZykge1xuICByZXR1cm4gc3BhY2Uoc3RyaW5nKS5yZXBsYWNlKC9cXHMoXFx3KS9nLCBmdW5jdGlvbiAobWF0Y2hlcywgbGV0dGVyKSB7XG4gICAgcmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpXG4gIH0pXG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///18\n")},function(module,exports,__webpack_require__){eval("\nvar clean = __webpack_require__(20)\n\n/**\n * Export.\n */\n\nmodule.exports = toSpaceCase\n\n/**\n * Convert a `string` to space case.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toSpaceCase(string) {\n  return clean(string).replace(/[\\W_]+(.|$)/g, function (matches, match) {\n    return match ? ' ' + match : ''\n  }).trim()\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3RvLXNwYWNlLWNhc2UvaW5kZXguanM/MzZkMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcbnZhciBjbGVhbiA9IHJlcXVpcmUoJ3RvLW5vLWNhc2UnKVxuXG4vKipcbiAqIEV4cG9ydC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHRvU3BhY2VDYXNlXG5cbi8qKlxuICogQ29udmVydCBhIGBzdHJpbmdgIHRvIHNwYWNlIGNhc2UuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHRvU3BhY2VDYXNlKHN0cmluZykge1xuICByZXR1cm4gY2xlYW4oc3RyaW5nKS5yZXBsYWNlKC9bXFxXX10rKC58JCkvZywgZnVuY3Rpb24gKG1hdGNoZXMsIG1hdGNoKSB7XG4gICAgcmV0dXJuIG1hdGNoID8gJyAnICsgbWF0Y2ggOiAnJ1xuICB9KS50cmltKClcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///19\n")},function(module,exports){eval("\n/**\n * Export.\n */\n\nmodule.exports = toNoCase\n\n/**\n * Test whether a string is camel-case.\n */\n\nvar hasSpace = /\\s/\nvar hasSeparator = /(_|-|\\.|:)/\nvar hasCamel = /([a-z][A-Z]|[A-Z][a-z])/\n\n/**\n * Remove any starting case from a `string`, like camel or snake, but keep\n * spaces and punctuation that may be important otherwise.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toNoCase(string) {\n  if (hasSpace.test(string)) return string.toLowerCase()\n  if (hasSeparator.test(string)) return (unseparate(string) || string).toLowerCase()\n  if (hasCamel.test(string)) return uncamelize(string).toLowerCase()\n  return string.toLowerCase()\n}\n\n/**\n * Separator splitter.\n */\n\nvar separatorSplitter = /[\\W_]+(.|$)/g\n\n/**\n * Un-separate a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction unseparate(string) {\n  return string.replace(separatorSplitter, function (m, next) {\n    return next ? ' ' + next : ''\n  })\n}\n\n/**\n * Camelcase splitter.\n */\n\nvar camelSplitter = /(.)([A-Z]+)/g\n\n/**\n * Un-camelcase a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction uncamelize(string) {\n  return string.replace(camelSplitter, function (m, previous, uppers) {\n    return previous + ' ' + uppers.toLowerCase().split('').join(' ')\n  })\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3RvLW5vLWNhc2UvaW5kZXguanM/ZGM4MyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qKlxuICogRXhwb3J0LlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdG9Ob0Nhc2VcblxuLyoqXG4gKiBUZXN0IHdoZXRoZXIgYSBzdHJpbmcgaXMgY2FtZWwtY2FzZS5cbiAqL1xuXG52YXIgaGFzU3BhY2UgPSAvXFxzL1xudmFyIGhhc1NlcGFyYXRvciA9IC8oX3wtfFxcLnw6KS9cbnZhciBoYXNDYW1lbCA9IC8oW2Etel1bQS1aXXxbQS1aXVthLXpdKS9cblxuLyoqXG4gKiBSZW1vdmUgYW55IHN0YXJ0aW5nIGNhc2UgZnJvbSBhIGBzdHJpbmdgLCBsaWtlIGNhbWVsIG9yIHNuYWtlLCBidXQga2VlcFxuICogc3BhY2VzIGFuZCBwdW5jdHVhdGlvbiB0aGF0IG1heSBiZSBpbXBvcnRhbnQgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiB0b05vQ2FzZShzdHJpbmcpIHtcbiAgaWYgKGhhc1NwYWNlLnRlc3Qoc3RyaW5nKSkgcmV0dXJuIHN0cmluZy50b0xvd2VyQ2FzZSgpXG4gIGlmIChoYXNTZXBhcmF0b3IudGVzdChzdHJpbmcpKSByZXR1cm4gKHVuc2VwYXJhdGUoc3RyaW5nKSB8fCBzdHJpbmcpLnRvTG93ZXJDYXNlKClcbiAgaWYgKGhhc0NhbWVsLnRlc3Qoc3RyaW5nKSkgcmV0dXJuIHVuY2FtZWxpemUoc3RyaW5nKS50b0xvd2VyQ2FzZSgpXG4gIHJldHVybiBzdHJpbmcudG9Mb3dlckNhc2UoKVxufVxuXG4vKipcbiAqIFNlcGFyYXRvciBzcGxpdHRlci5cbiAqL1xuXG52YXIgc2VwYXJhdG9yU3BsaXR0ZXIgPSAvW1xcV19dKygufCQpL2dcblxuLyoqXG4gKiBVbi1zZXBhcmF0ZSBhIGBzdHJpbmdgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiB1bnNlcGFyYXRlKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2Uoc2VwYXJhdG9yU3BsaXR0ZXIsIGZ1bmN0aW9uIChtLCBuZXh0KSB7XG4gICAgcmV0dXJuIG5leHQgPyAnICcgKyBuZXh0IDogJydcbiAgfSlcbn1cblxuLyoqXG4gKiBDYW1lbGNhc2Ugc3BsaXR0ZXIuXG4gKi9cblxudmFyIGNhbWVsU3BsaXR0ZXIgPSAvKC4pKFtBLVpdKykvZ1xuXG4vKipcbiAqIFVuLWNhbWVsY2FzZSBhIGBzdHJpbmdgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiB1bmNhbWVsaXplKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoY2FtZWxTcGxpdHRlciwgZnVuY3Rpb24gKG0sIHByZXZpb3VzLCB1cHBlcnMpIHtcbiAgICByZXR1cm4gcHJldmlvdXMgKyAnICcgKyB1cHBlcnMudG9Mb3dlckNhc2UoKS5zcGxpdCgnJykuam9pbignICcpXG4gIH0pXG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///20\n")},function(module,exports){eval("/* The following list is defined in React's core */\nvar IS_UNITLESS = {\n  animationIterationCount: true,\n  boxFlex: true,\n  boxFlexGroup: true,\n  boxOrdinalGroup: true,\n  columnCount: true,\n  flex: true,\n  flexGrow: true,\n  flexPositive: true,\n  flexShrink: true,\n  flexNegative: true,\n  flexOrder: true,\n  gridRow: true,\n  gridColumn: true,\n  fontWeight: true,\n  lineClamp: true,\n  lineHeight: true,\n  opacity: true,\n  order: true,\n  orphans: true,\n  tabSize: true,\n  widows: true,\n  zIndex: true,\n  zoom: true,\n\n  // SVG-related properties\n  fillOpacity: true,\n  stopOpacity: true,\n  strokeDashoffset: true,\n  strokeOpacity: true,\n  strokeWidth: true\n};\n\nmodule.exports = function(name, value) {\n  if(typeof value === 'number' && !IS_UNITLESS[ name ]) {\n    return value + 'px';\n  } else {\n    return value;\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL2FkZC1weC10by1zdHlsZS9pbmRleC5qcz9jZmYzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIFRoZSBmb2xsb3dpbmcgbGlzdCBpcyBkZWZpbmVkIGluIFJlYWN0J3MgY29yZSAqL1xudmFyIElTX1VOSVRMRVNTID0ge1xuICBhbmltYXRpb25JdGVyYXRpb25Db3VudDogdHJ1ZSxcbiAgYm94RmxleDogdHJ1ZSxcbiAgYm94RmxleEdyb3VwOiB0cnVlLFxuICBib3hPcmRpbmFsR3JvdXA6IHRydWUsXG4gIGNvbHVtbkNvdW50OiB0cnVlLFxuICBmbGV4OiB0cnVlLFxuICBmbGV4R3JvdzogdHJ1ZSxcbiAgZmxleFBvc2l0aXZlOiB0cnVlLFxuICBmbGV4U2hyaW5rOiB0cnVlLFxuICBmbGV4TmVnYXRpdmU6IHRydWUsXG4gIGZsZXhPcmRlcjogdHJ1ZSxcbiAgZ3JpZFJvdzogdHJ1ZSxcbiAgZ3JpZENvbHVtbjogdHJ1ZSxcbiAgZm9udFdlaWdodDogdHJ1ZSxcbiAgbGluZUNsYW1wOiB0cnVlLFxuICBsaW5lSGVpZ2h0OiB0cnVlLFxuICBvcGFjaXR5OiB0cnVlLFxuICBvcmRlcjogdHJ1ZSxcbiAgb3JwaGFuczogdHJ1ZSxcbiAgdGFiU2l6ZTogdHJ1ZSxcbiAgd2lkb3dzOiB0cnVlLFxuICB6SW5kZXg6IHRydWUsXG4gIHpvb206IHRydWUsXG5cbiAgLy8gU1ZHLXJlbGF0ZWQgcHJvcGVydGllc1xuICBmaWxsT3BhY2l0eTogdHJ1ZSxcbiAgc3RvcE9wYWNpdHk6IHRydWUsXG4gIHN0cm9rZURhc2hvZmZzZXQ6IHRydWUsXG4gIHN0cm9rZU9wYWNpdHk6IHRydWUsXG4gIHN0cm9rZVdpZHRoOiB0cnVlXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIGlmKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgIUlTX1VOSVRMRVNTWyBuYW1lIF0pIHtcbiAgICByZXR1cm4gdmFsdWUgKyAncHgnO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///21\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports["default"] = isString;\nfunction isString(maybe) {\n    return typeof maybe === \'string\';\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3R0LXJlYWN0LWN1c3RvbS1zY3JvbGxiYXJzL2xpYi91dGlscy9pc1N0cmluZy5qcz83ZWFjIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBpc1N0cmluZztcbmZ1bmN0aW9uIGlzU3RyaW5nKG1heWJlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBtYXliZSA9PT0gJ3N0cmluZyc7XG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///22\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.invalidateScrollbarWidth = invalidateScrollbarWidth;\nvar scrollbarWidth = false;\n\nfunction invalidateScrollbarWidth() {\n    scrollbarWidth = false;\n}\n\nfunction getScrollbarWidth(values) {\n    if (scrollbarWidth !== false) return scrollbarWidth;\n    /* istanbul ignore else */\n    if (values && typeof document !== \'undefined\') {\n        scrollbarWidth = values.offsetWidth - values.realClientWidth;\n    } else {\n        scrollbarWidth = 0;\n    }\n    return scrollbarWidth || 0;\n}\n\nexports["default"] = getScrollbarWidth;\nexports.getScrollbarWidth = getScrollbarWidth;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3R0LXJlYWN0LWN1c3RvbS1zY3JvbGxiYXJzL2xpYi91dGlscy9nZXRTY3JvbGxiYXJXaWR0aC5qcz82MTcxIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5pbnZhbGlkYXRlU2Nyb2xsYmFyV2lkdGggPSBpbnZhbGlkYXRlU2Nyb2xsYmFyV2lkdGg7XG52YXIgc2Nyb2xsYmFyV2lkdGggPSBmYWxzZTtcblxuZnVuY3Rpb24gaW52YWxpZGF0ZVNjcm9sbGJhcldpZHRoKCkge1xuICAgIHNjcm9sbGJhcldpZHRoID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGdldFNjcm9sbGJhcldpZHRoKHZhbHVlcykge1xuICAgIGlmIChzY3JvbGxiYXJXaWR0aCAhPT0gZmFsc2UpIHJldHVybiBzY3JvbGxiYXJXaWR0aDtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIGlmICh2YWx1ZXMgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzY3JvbGxiYXJXaWR0aCA9IHZhbHVlcy5vZmZzZXRXaWR0aCAtIHZhbHVlcy5yZWFsQ2xpZW50V2lkdGg7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2Nyb2xsYmFyV2lkdGggPSAwO1xuICAgIH1cbiAgICByZXR1cm4gc2Nyb2xsYmFyV2lkdGggfHwgMDtcbn1cblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBnZXRTY3JvbGxiYXJXaWR0aDtcbmV4cG9ydHMuZ2V0U2Nyb2xsYmFyV2lkdGggPSBnZXRTY3JvbGxiYXJXaWR0aDsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///23\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports["default"] = returnFalse;\nfunction returnFalse() {\n    return false;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3R0LXJlYWN0LWN1c3RvbS1zY3JvbGxiYXJzL2xpYi91dGlscy9yZXR1cm5GYWxzZS5qcz81ZTA0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHJldHVybkZhbHNlO1xuZnVuY3Rpb24gcmV0dXJuRmFsc2UoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xufSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///24\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports["default"] = getInnerWidth;\nfunction getInnerWidth(el) {\n    var clientWidth = el.clientWidth;\n\n    var _getComputedStyle = getComputedStyle(el),\n        paddingLeft = _getComputedStyle.paddingLeft,\n        paddingRight = _getComputedStyle.paddingRight;\n\n    return clientWidth - parseFloat(paddingLeft) - parseFloat(paddingRight);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3R0LXJlYWN0LWN1c3RvbS1zY3JvbGxiYXJzL2xpYi91dGlscy9nZXRJbm5lcldpZHRoLmpzP2JiMzQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gZ2V0SW5uZXJXaWR0aDtcbmZ1bmN0aW9uIGdldElubmVyV2lkdGgoZWwpIHtcbiAgICB2YXIgY2xpZW50V2lkdGggPSBlbC5jbGllbnRXaWR0aDtcblxuICAgIHZhciBfZ2V0Q29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWwpLFxuICAgICAgICBwYWRkaW5nTGVmdCA9IF9nZXRDb21wdXRlZFN0eWxlLnBhZGRpbmdMZWZ0LFxuICAgICAgICBwYWRkaW5nUmlnaHQgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5wYWRkaW5nUmlnaHQ7XG5cbiAgICByZXR1cm4gY2xpZW50V2lkdGggLSBwYXJzZUZsb2F0KHBhZGRpbmdMZWZ0KSAtIHBhcnNlRmxvYXQocGFkZGluZ1JpZ2h0KTtcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///25\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports["default"] = getInnerHeight;\nfunction getInnerHeight(el) {\n    var clientHeight = el.clientHeight;\n\n    var _getComputedStyle = getComputedStyle(el),\n        paddingTop = _getComputedStyle.paddingTop,\n        paddingBottom = _getComputedStyle.paddingBottom;\n\n    return clientHeight - parseFloat(paddingTop) - parseFloat(paddingBottom);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3R0LXJlYWN0LWN1c3RvbS1zY3JvbGxiYXJzL2xpYi91dGlscy9nZXRJbm5lckhlaWdodC5qcz9iNWEzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IGdldElubmVySGVpZ2h0O1xuZnVuY3Rpb24gZ2V0SW5uZXJIZWlnaHQoZWwpIHtcbiAgICB2YXIgY2xpZW50SGVpZ2h0ID0gZWwuY2xpZW50SGVpZ2h0O1xuXG4gICAgdmFyIF9nZXRDb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbCksXG4gICAgICAgIHBhZGRpbmdUb3AgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5wYWRkaW5nVG9wLFxuICAgICAgICBwYWRkaW5nQm90dG9tID0gX2dldENvbXB1dGVkU3R5bGUucGFkZGluZ0JvdHRvbTtcblxuICAgIHJldHVybiBjbGllbnRIZWlnaHQgLSBwYXJzZUZsb2F0KHBhZGRpbmdUb3ApIC0gcGFyc2VGbG9hdChwYWRkaW5nQm90dG9tKTtcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///26\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar scrollbarSize = exports.scrollbarSize = 100;\n\nvar containerStyleDefault = exports.containerStyleDefault = {\n    position: 'relative',\n    overflow: 'hidden',\n    width: '100%',\n    height: '100%'\n};\n\nvar viewWrapperStyleDefault = exports.viewWrapperStyleDefault = {\n    paddingRight: scrollbarSize,\n    paddingBottom: scrollbarSize,\n    width: 'auto',\n    minWidth: '100%',\n    boxSizing: 'border-box',\n    verticalAlign: 'top',\n    display: 'inline-block'\n};\n\nvar viewWrappedStyleDefault = exports.viewWrappedStyleDefault = {\n    position: 'relative',\n    display: 'block',\n    verticalAlign: 'top',\n    width: '100%',\n    boxSizing: 'border-box'\n};\n\n// Overrides containerStyleDefault properties\nvar containerStyleAutoHeight = exports.containerStyleAutoHeight = {\n    height: 'auto'\n};\n\nvar viewStyleDefault = exports.viewStyleDefault = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'scroll',\n    MsOverflowStyle: 'scrollbar',\n    WebkitOverflowScrolling: 'touch',\n    height: 'auto',\n    boxSizing: 'content-box'\n};\n\n// Overrides viewStyleDefault properties\nvar viewStyleAutoHeight = exports.viewStyleAutoHeight = {\n    position: 'relative',\n    top: undefined,\n    left: undefined,\n    right: undefined,\n    bottom: undefined\n};\n\nvar viewStyleUniversalInitial = exports.viewStyleUniversalInitial = {\n    overflow: 'hidden',\n    marginRight: 0,\n    marginBottom: 0\n};\n\nvar trackHorizontalStyleDefault = exports.trackHorizontalStyleDefault = {\n    position: 'absolute',\n    height: 6\n};\n\nvar trackVerticalStyleDefault = exports.trackVerticalStyleDefault = {\n    position: 'absolute',\n    width: 6\n};\n\nvar thumbHorizontalStyleDefault = exports.thumbHorizontalStyleDefault = {\n    position: 'relative',\n    display: 'block',\n    height: '100%'\n};\n\nvar thumbVerticalStyleDefault = exports.thumbVerticalStyleDefault = {\n    position: 'relative',\n    display: 'block',\n    width: '100%'\n};\n\nvar disableSelectStyle = exports.disableSelectStyle = {\n    userSelect: 'none'\n};\n\nvar disableSelectStyleReset = exports.disableSelectStyleReset = {\n    userSelect: ''\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3R0LXJlYWN0LWN1c3RvbS1zY3JvbGxiYXJzL2xpYi9TY3JvbGxiYXJzL3N0eWxlcy5qcz8xOTExIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xudmFyIHNjcm9sbGJhclNpemUgPSBleHBvcnRzLnNjcm9sbGJhclNpemUgPSAxMDA7XG5cbnZhciBjb250YWluZXJTdHlsZURlZmF1bHQgPSBleHBvcnRzLmNvbnRhaW5lclN0eWxlRGVmYXVsdCA9IHtcbiAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgd2lkdGg6ICcxMDAlJyxcbiAgICBoZWlnaHQ6ICcxMDAlJ1xufTtcblxudmFyIHZpZXdXcmFwcGVyU3R5bGVEZWZhdWx0ID0gZXhwb3J0cy52aWV3V3JhcHBlclN0eWxlRGVmYXVsdCA9IHtcbiAgICBwYWRkaW5nUmlnaHQ6IHNjcm9sbGJhclNpemUsXG4gICAgcGFkZGluZ0JvdHRvbTogc2Nyb2xsYmFyU2l6ZSxcbiAgICB3aWR0aDogJ2F1dG8nLFxuICAgIG1pbldpZHRoOiAnMTAwJScsXG4gICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsXG4gICAgdmVydGljYWxBbGlnbjogJ3RvcCcsXG4gICAgZGlzcGxheTogJ2lubGluZS1ibG9jaydcbn07XG5cbnZhciB2aWV3V3JhcHBlZFN0eWxlRGVmYXVsdCA9IGV4cG9ydHMudmlld1dyYXBwZWRTdHlsZURlZmF1bHQgPSB7XG4gICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICB2ZXJ0aWNhbEFsaWduOiAndG9wJyxcbiAgICB3aWR0aDogJzEwMCUnLFxuICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnXG59O1xuXG4vLyBPdmVycmlkZXMgY29udGFpbmVyU3R5bGVEZWZhdWx0IHByb3BlcnRpZXNcbnZhciBjb250YWluZXJTdHlsZUF1dG9IZWlnaHQgPSBleHBvcnRzLmNvbnRhaW5lclN0eWxlQXV0b0hlaWdodCA9IHtcbiAgICBoZWlnaHQ6ICdhdXRvJ1xufTtcblxudmFyIHZpZXdTdHlsZURlZmF1bHQgPSBleHBvcnRzLnZpZXdTdHlsZURlZmF1bHQgPSB7XG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgdG9wOiAwLFxuICAgIGxlZnQ6IDAsXG4gICAgcmlnaHQ6IDAsXG4gICAgYm90dG9tOiAwLFxuICAgIG92ZXJmbG93OiAnc2Nyb2xsJyxcbiAgICBNc092ZXJmbG93U3R5bGU6ICdzY3JvbGxiYXInLFxuICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiAndG91Y2gnLFxuICAgIGhlaWdodDogJ2F1dG8nLFxuICAgIGJveFNpemluZzogJ2NvbnRlbnQtYm94J1xufTtcblxuLy8gT3ZlcnJpZGVzIHZpZXdTdHlsZURlZmF1bHQgcHJvcGVydGllc1xudmFyIHZpZXdTdHlsZUF1dG9IZWlnaHQgPSBleHBvcnRzLnZpZXdTdHlsZUF1dG9IZWlnaHQgPSB7XG4gICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgdG9wOiB1bmRlZmluZWQsXG4gICAgbGVmdDogdW5kZWZpbmVkLFxuICAgIHJpZ2h0OiB1bmRlZmluZWQsXG4gICAgYm90dG9tOiB1bmRlZmluZWRcbn07XG5cbnZhciB2aWV3U3R5bGVVbml2ZXJzYWxJbml0aWFsID0gZXhwb3J0cy52aWV3U3R5bGVVbml2ZXJzYWxJbml0aWFsID0ge1xuICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICBtYXJnaW5SaWdodDogMCxcbiAgICBtYXJnaW5Cb3R0b206IDBcbn07XG5cbnZhciB0cmFja0hvcml6b250YWxTdHlsZURlZmF1bHQgPSBleHBvcnRzLnRyYWNrSG9yaXpvbnRhbFN0eWxlRGVmYXVsdCA9IHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICBoZWlnaHQ6IDZcbn07XG5cbnZhciB0cmFja1ZlcnRpY2FsU3R5bGVEZWZhdWx0ID0gZXhwb3J0cy50cmFja1ZlcnRpY2FsU3R5bGVEZWZhdWx0ID0ge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHdpZHRoOiA2XG59O1xuXG52YXIgdGh1bWJIb3Jpem9udGFsU3R5bGVEZWZhdWx0ID0gZXhwb3J0cy50aHVtYkhvcml6b250YWxTdHlsZURlZmF1bHQgPSB7XG4gICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICBoZWlnaHQ6ICcxMDAlJ1xufTtcblxudmFyIHRodW1iVmVydGljYWxTdHlsZURlZmF1bHQgPSBleHBvcnRzLnRodW1iVmVydGljYWxTdHlsZURlZmF1bHQgPSB7XG4gICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICB3aWR0aDogJzEwMCUnXG59O1xuXG52YXIgZGlzYWJsZVNlbGVjdFN0eWxlID0gZXhwb3J0cy5kaXNhYmxlU2VsZWN0U3R5bGUgPSB7XG4gICAgdXNlclNlbGVjdDogJ25vbmUnXG59O1xuXG52YXIgZGlzYWJsZVNlbGVjdFN0eWxlUmVzZXQgPSBleHBvcnRzLmRpc2FibGVTZWxlY3RTdHlsZVJlc2V0ID0ge1xuICAgIHVzZXJTZWxlY3Q6ICcnXG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///27\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.renderViewDefault = renderViewDefault;\nexports.renderTrackHorizontalDefault = renderTrackHorizontalDefault;\nexports.renderTrackVerticalDefault = renderTrackVerticalDefault;\nexports.renderThumbHorizontalDefault = renderThumbHorizontalDefault;\nexports.renderThumbVerticalDefault = renderThumbVerticalDefault;\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\n/* eslint-disable react/prop-types */\n\nfunction renderViewDefault(props) {\n    return _react2[\"default\"].createElement('div', props);\n}\n\nfunction renderTrackHorizontalDefault(_ref) {\n    var style = _ref.style,\n        props = _objectWithoutProperties(_ref, ['style']);\n\n    var finalStyle = _extends({}, style, {\n        right: 2,\n        bottom: 2,\n        left: 2,\n        borderRadius: 3\n    });\n    return _react2[\"default\"].createElement('div', _extends({ style: finalStyle }, props));\n}\n\nfunction renderTrackVerticalDefault(_ref2) {\n    var style = _ref2.style,\n        props = _objectWithoutProperties(_ref2, ['style']);\n\n    var finalStyle = _extends({}, style, {\n        right: 2,\n        bottom: 2,\n        top: 2,\n        borderRadius: 3\n    });\n    return _react2[\"default\"].createElement('div', _extends({ style: finalStyle }, props));\n}\n\nfunction renderThumbHorizontalDefault(_ref3) {\n    var style = _ref3.style,\n        props = _objectWithoutProperties(_ref3, ['style']);\n\n    var finalStyle = _extends({}, style, {\n        cursor: 'pointer',\n        borderRadius: 'inherit',\n        backgroundColor: 'rgba(0,0,0,.2)'\n    });\n    return _react2[\"default\"].createElement('div', _extends({ style: finalStyle }, props));\n}\n\nfunction renderThumbVerticalDefault(_ref4) {\n    var style = _ref4.style,\n        props = _objectWithoutProperties(_ref4, ['style']);\n\n    var finalStyle = _extends({}, style, {\n        cursor: 'pointer',\n        borderRadius: 'inherit',\n        backgroundColor: 'rgba(0,0,0,.2)'\n    });\n    return _react2[\"default\"].createElement('div', _extends({ style: finalStyle }, props));\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3R0LXJlYWN0LWN1c3RvbS1zY3JvbGxiYXJzL2xpYi9TY3JvbGxiYXJzL2RlZmF1bHRSZW5kZXJFbGVtZW50cy5qcz9hMjMzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5leHBvcnRzLnJlbmRlclZpZXdEZWZhdWx0ID0gcmVuZGVyVmlld0RlZmF1bHQ7XG5leHBvcnRzLnJlbmRlclRyYWNrSG9yaXpvbnRhbERlZmF1bHQgPSByZW5kZXJUcmFja0hvcml6b250YWxEZWZhdWx0O1xuZXhwb3J0cy5yZW5kZXJUcmFja1ZlcnRpY2FsRGVmYXVsdCA9IHJlbmRlclRyYWNrVmVydGljYWxEZWZhdWx0O1xuZXhwb3J0cy5yZW5kZXJUaHVtYkhvcml6b250YWxEZWZhdWx0ID0gcmVuZGVyVGh1bWJIb3Jpem9udGFsRGVmYXVsdDtcbmV4cG9ydHMucmVuZGVyVGh1bWJWZXJ0aWNhbERlZmF1bHQgPSByZW5kZXJUaHVtYlZlcnRpY2FsRGVmYXVsdDtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykgeyB2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGkgaW4gb2JqKSB7IGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlOyB0YXJnZXRbaV0gPSBvYmpbaV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG4vKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9wcm9wLXR5cGVzICovXG5cbmZ1bmN0aW9uIHJlbmRlclZpZXdEZWZhdWx0KHByb3BzKSB7XG4gICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHByb3BzKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyVHJhY2tIb3Jpem9udGFsRGVmYXVsdChfcmVmKSB7XG4gICAgdmFyIHN0eWxlID0gX3JlZi5zdHlsZSxcbiAgICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgWydzdHlsZSddKTtcblxuICAgIHZhciBmaW5hbFN0eWxlID0gX2V4dGVuZHMoe30sIHN0eWxlLCB7XG4gICAgICAgIHJpZ2h0OiAyLFxuICAgICAgICBib3R0b206IDIsXG4gICAgICAgIGxlZnQ6IDIsXG4gICAgICAgIGJvcmRlclJhZGl1czogM1xuICAgIH0pO1xuICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCBfZXh0ZW5kcyh7IHN0eWxlOiBmaW5hbFN0eWxlIH0sIHByb3BzKSk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlclRyYWNrVmVydGljYWxEZWZhdWx0KF9yZWYyKSB7XG4gICAgdmFyIHN0eWxlID0gX3JlZjIuc3R5bGUsXG4gICAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYyLCBbJ3N0eWxlJ10pO1xuXG4gICAgdmFyIGZpbmFsU3R5bGUgPSBfZXh0ZW5kcyh7fSwgc3R5bGUsIHtcbiAgICAgICAgcmlnaHQ6IDIsXG4gICAgICAgIGJvdHRvbTogMixcbiAgICAgICAgdG9wOiAyLFxuICAgICAgICBib3JkZXJSYWRpdXM6IDNcbiAgICB9KTtcbiAgICByZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCgnZGl2JywgX2V4dGVuZHMoeyBzdHlsZTogZmluYWxTdHlsZSB9LCBwcm9wcykpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJUaHVtYkhvcml6b250YWxEZWZhdWx0KF9yZWYzKSB7XG4gICAgdmFyIHN0eWxlID0gX3JlZjMuc3R5bGUsXG4gICAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYzLCBbJ3N0eWxlJ10pO1xuXG4gICAgdmFyIGZpbmFsU3R5bGUgPSBfZXh0ZW5kcyh7fSwgc3R5bGUsIHtcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgIGJvcmRlclJhZGl1czogJ2luaGVyaXQnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDAsMCwwLC4yKSdcbiAgICB9KTtcbiAgICByZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCgnZGl2JywgX2V4dGVuZHMoeyBzdHlsZTogZmluYWxTdHlsZSB9LCBwcm9wcykpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJUaHVtYlZlcnRpY2FsRGVmYXVsdChfcmVmNCkge1xuICAgIHZhciBzdHlsZSA9IF9yZWY0LnN0eWxlLFxuICAgICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmNCwgWydzdHlsZSddKTtcblxuICAgIHZhciBmaW5hbFN0eWxlID0gX2V4dGVuZHMoe30sIHN0eWxlLCB7XG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICdpbmhlcml0JyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgwLDAsMCwuMiknXG4gICAgfSk7XG4gICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIF9leHRlbmRzKHsgc3R5bGU6IGZpbmFsU3R5bGUgfSwgcHJvcHMpKTtcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///28\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n    if(false) { var cssReload; }\n  //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvcG9wb3Zlci9wb3BvdmVyLnNjc3M/ZWVkNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbiAgICBpZihtb2R1bGUuaG90KSB7XG4gICAgICAvLyAxNTY3NTA5NzczOTM1XG4gICAgICB2YXIgY3NzUmVsb2FkID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWhvdC1sb2FkZXIvaG90TW9kdWxlUmVwbGFjZW1lbnQuanNcIikobW9kdWxlLmlkLCB7XCJmaWxlTWFwXCI6XCJ7ZmlsZU5hbWV9XCJ9KTtcbiAgICAgIG1vZHVsZS5ob3QuZGlzcG9zZShjc3NSZWxvYWQpO1xuICAgICAgbW9kdWxlLmhvdC5hY2NlcHQodW5kZWZpbmVkLCBjc3NSZWxvYWQpOztcbiAgICB9XG4gICJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxnQ0FLQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///29\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar _interopRequireDefault = __webpack_require__(39);\n\nexports.__esModule = true;\nexports.default = addClass;\n\nvar _hasClass = _interopRequireDefault(__webpack_require__(40));\n\nfunction addClass(element, className) {\n  if (element.classList) element.classList.add(className);else if (!(0, _hasClass.default)(element, className)) if (typeof element.className === 'string') element.className = element.className + ' ' + className;else element.setAttribute('class', (element.className && element.className.baseVal || '') + ' ' + className);\n}\n\nmodule.exports = exports[\"default\"];//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2NsYXNzL2FkZENsYXNzLmpzP2M5YzEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0ID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0XCIpO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5kZWZhdWx0ID0gYWRkQ2xhc3M7XG5cbnZhciBfaGFzQ2xhc3MgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2hhc0NsYXNzXCIpKTtcblxuZnVuY3Rpb24gYWRkQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbGVtZW50LmNsYXNzTGlzdCkgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7ZWxzZSBpZiAoISgwLCBfaGFzQ2xhc3MuZGVmYXVsdCkoZWxlbWVudCwgY2xhc3NOYW1lKSkgaWYgKHR5cGVvZiBlbGVtZW50LmNsYXNzTmFtZSA9PT0gJ3N0cmluZycpIGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUgKyAnICcgKyBjbGFzc05hbWU7ZWxzZSBlbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAoZWxlbWVudC5jbGFzc05hbWUgJiYgZWxlbWVudC5jbGFzc05hbWUuYmFzZVZhbCB8fCAnJykgKyAnICcgKyBjbGFzc05hbWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///30\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nfunction replaceClassName(origClass, classToRemove) {\n  return origClass.replace(new RegExp('(^|\\\\s)' + classToRemove + '(?:\\\\s|$)', 'g'), '$1').replace(/\\s+/g, ' ').replace(/^\\s*|\\s*$/g, '');\n}\n\nmodule.exports = function removeClass(element, className) {\n  if (element.classList) element.classList.remove(className);else if (typeof element.className === 'string') element.className = replaceClassName(element.className, className);else element.setAttribute('class', replaceClassName(element.className && element.className.baseVal || '', className));\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2NsYXNzL3JlbW92ZUNsYXNzLmpzPzU0ZTciXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiByZXBsYWNlQ2xhc3NOYW1lKG9yaWdDbGFzcywgY2xhc3NUb1JlbW92ZSkge1xuICByZXR1cm4gb3JpZ0NsYXNzLnJlcGxhY2UobmV3IFJlZ0V4cCgnKF58XFxcXHMpJyArIGNsYXNzVG9SZW1vdmUgKyAnKD86XFxcXHN8JCknLCAnZycpLCAnJDEnKS5yZXBsYWNlKC9cXHMrL2csICcgJykucmVwbGFjZSgvXlxccyp8XFxzKiQvZywgJycpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO2Vsc2UgaWYgKHR5cGVvZiBlbGVtZW50LmNsYXNzTmFtZSA9PT0gJ3N0cmluZycpIGVsZW1lbnQuY2xhc3NOYW1lID0gcmVwbGFjZUNsYXNzTmFtZShlbGVtZW50LmNsYXNzTmFtZSwgY2xhc3NOYW1lKTtlbHNlIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIHJlcGxhY2VDbGFzc05hbWUoZWxlbWVudC5jbGFzc05hbWUgJiYgZWxlbWVudC5jbGFzc05hbWUuYmFzZVZhbCB8fCAnJywgY2xhc3NOYW1lKSk7XG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///31\n")},,,,,,function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n    if(false) { var cssReload; }\n  //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvZHJvcGRvd24vZHJvcGRvd24uc2Nzcz8wZjUwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuICAgIGlmKG1vZHVsZS5ob3QpIHtcbiAgICAgIC8vIDE1Njc1MDk3NzM5MjFcbiAgICAgIHZhciBjc3NSZWxvYWQgPSByZXF1aXJlKFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtaG90LWxvYWRlci9ob3RNb2R1bGVSZXBsYWNlbWVudC5qc1wiKShtb2R1bGUuaWQsIHtcImZpbGVNYXBcIjpcIntmaWxlTmFtZX1cIn0pO1xuICAgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGNzc1JlbG9hZCk7XG4gICAgICBtb2R1bGUuaG90LmFjY2VwdCh1bmRlZmluZWQsIGNzc1JlbG9hZCk7O1xuICAgIH1cbiAgIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLGdDQUtBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///37\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n    if(false) { var cssReload; }\n  //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvZHJvcGRvd24vbGlzdC5zY3NzP2ZhZjYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG4gICAgaWYobW9kdWxlLmhvdCkge1xuICAgICAgLy8gMTU2NzUwOTc3NDIxNVxuICAgICAgdmFyIGNzc1JlbG9hZCA9IHJlcXVpcmUoXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1ob3QtbG9hZGVyL2hvdE1vZHVsZVJlcGxhY2VtZW50LmpzXCIpKG1vZHVsZS5pZCwge1wiZmlsZU1hcFwiOlwie2ZpbGVOYW1lfVwifSk7XG4gICAgICBtb2R1bGUuaG90LmRpc3Bvc2UoY3NzUmVsb2FkKTtcbiAgICAgIG1vZHVsZS5ob3QuYWNjZXB0KHVuZGVmaW5lZCwgY3NzUmVsb2FkKTs7XG4gICAgfVxuICAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsZ0NBS0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///38\n")},function(module,exports){eval('function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    "default": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzPzRlYTQiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHtcbiAgICBcImRlZmF1bHRcIjogb2JqXG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///39\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nexports.__esModule = true;\nexports.default = hasClass;\n\nfunction hasClass(element, className) {\n  if (element.classList) return !!className && element.classList.contains(className);else return (" " + (element.className.baseVal || element.className) + " ").indexOf(" " + className + " ") !== -1;\n}\n\nmodule.exports = exports["default"];//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2NsYXNzL2hhc0NsYXNzLmpzP2M4M2UiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmRlZmF1bHQgPSBoYXNDbGFzcztcblxuZnVuY3Rpb24gaGFzQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbGVtZW50LmNsYXNzTGlzdCkgcmV0dXJuICEhY2xhc3NOYW1lICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7ZWxzZSByZXR1cm4gKFwiIFwiICsgKGVsZW1lbnQuY2xhc3NOYW1lLmJhc2VWYWwgfHwgZWxlbWVudC5jbGFzc05hbWUpICsgXCIgXCIpLmluZGV4T2YoXCIgXCIgKyBjbGFzc05hbWUgKyBcIiBcIikgIT09IC0xO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///40\n')},,,function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./src/components/dropdown/dropdown.scss\nvar dropdown = __webpack_require__(37);\n\n// EXTERNAL MODULE: ./src/components/dropdown/list.scss\nvar dropdown_list = __webpack_require__(38);\n\n// EXTERNAL MODULE: ./node_modules/classnames/index.js\nvar classnames = __webpack_require__(2);\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// EXTERNAL MODULE: ./node_modules/prop-types/index.js\nvar prop_types = __webpack_require__(1);\nvar prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);\n\n// EXTERNAL MODULE: external {"root":"React","commonjs":"react","commonjs2":"react"}\nvar external_root_React_commonjs_react_commonjs2_react_ = __webpack_require__(0);\nvar external_root_React_commonjs_react_commonjs2_react_default = /*#__PURE__*/__webpack_require__.n(external_root_React_commonjs_react_commonjs2_react_);\n\n// CONCATENATED MODULE: ./node_modules/@babel/runtime/helpers/esm/extends.js\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n// CONCATENATED MODULE: ./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n// CONCATENATED MODULE: ./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n// EXTERNAL MODULE: ./node_modules/dom-helpers/class/addClass.js\nvar class_addClass = __webpack_require__(30);\nvar addClass_default = /*#__PURE__*/__webpack_require__.n(class_addClass);\n\n// EXTERNAL MODULE: ./node_modules/dom-helpers/class/removeClass.js\nvar class_removeClass = __webpack_require__(31);\nvar removeClass_default = /*#__PURE__*/__webpack_require__.n(class_removeClass);\n\n// EXTERNAL MODULE: external {"commonjs":"react-dom","commonjs2":"react-dom","root":"ReactDOM"}\nvar external_commonjs_react_dom_commonjs2_react_dom_root_ReactDOM_ = __webpack_require__(6);\nvar external_commonjs_react_dom_commonjs2_react_dom_root_ReactDOM_default = /*#__PURE__*/__webpack_require__.n(external_commonjs_react_dom_commonjs2_react_dom_root_ReactDOM_);\n\n// CONCATENATED MODULE: ./node_modules/react-transition-group/esm/config.js\n/* harmony default export */ var config = ({\n  disabled: false\n});\n// CONCATENATED MODULE: ./node_modules/react-transition-group/esm/TransitionGroupContext.js\n\n/* harmony default export */ var TransitionGroupContext = (external_root_React_commonjs_react_commonjs2_react_default.a.createContext(null));\n// CONCATENATED MODULE: ./node_modules/react-transition-group/esm/Transition.js\n\n\n\n\n\n\n\n\nvar UNMOUNTED = \'unmounted\';\nvar EXITED = \'exited\';\nvar ENTERING = \'entering\';\nvar ENTERED = \'entered\';\nvar EXITING = \'exiting\';\n/**\n * The Transition component lets you describe a transition from one component\n * state to another _over time_ with a simple declarative API. Most commonly\n * it\'s used to animate the mounting and unmounting of a component, but can also\n * be used to describe in-place transition states as well.\n *\n * ---\n *\n * **Note**: `Transition` is a platform-agnostic base component. If you\'re using\n * transitions in CSS, you\'ll probably want to use\n * [`CSSTransition`](https://reactcommunity.org/react-transition-group/css-transition)\n * instead. It inherits all the features of `Transition`, but contains\n * additional features necessary to play nice with CSS transitions (hence the\n * name of the component).\n *\n * ---\n *\n * By default the `Transition` component does not alter the behavior of the\n * component it renders, it only tracks "enter" and "exit" states for the\n * components. It\'s up to you to give meaning and effect to those states. For\n * example we can add styles to a component when it enters or exits:\n *\n * ```jsx\n * import { Transition } from \'react-transition-group\';\n *\n * const duration = 300;\n *\n * const defaultStyle = {\n *   transition: `opacity ${duration}ms ease-in-out`,\n *   opacity: 0,\n * }\n *\n * const transitionStyles = {\n *   entering: { opacity: 1 },\n *   entered:  { opacity: 1 },\n *   exiting:  { opacity: 0 },\n *   exited:  { opacity: 0 },\n * };\n *\n * const Fade = ({ in: inProp }) => (\n *   <Transition in={inProp} timeout={duration}>\n *     {state => (\n *       <div style={{\n *         ...defaultStyle,\n *         ...transitionStyles[state]\n *       }}>\n *         I\'m a fade Transition!\n *       </div>\n *     )}\n *   </Transition>\n * );\n * ```\n *\n * There are 4 main states a Transition can be in:\n *  - `\'entering\'`\n *  - `\'entered\'`\n *  - `\'exiting\'`\n *  - `\'exited\'`\n *\n * Transition state is toggled via the `in` prop. When `true` the component\n * begins the "Enter" stage. During this stage, the component will shift from\n * its current transition state, to `\'entering\'` for the duration of the\n * transition and then to the `\'entered\'` stage once it\'s complete. Let\'s take\n * the following example (we\'ll use the\n * [useState](https://reactjs.org/docs/hooks-reference.html#usestate) hook):\n *\n * ```jsx\n * function App() {\n *   const [inProp, setInProp] = useState(false);\n *   return (\n *     <div>\n *       <Transition in={inProp} timeout={500}>\n *         {state => (\n *           // ...\n *         )}\n *       </Transition>\n *       <button onClick={() => setInProp(true)}>\n *         Click to Enter\n *       </button>\n *     </div>\n *   );\n * }\n * ```\n *\n * When the button is clicked the component will shift to the `\'entering\'` state\n * and stay there for 500ms (the value of `timeout`) before it finally switches\n * to `\'entered\'`.\n *\n * When `in` is `false` the same thing happens except the state moves from\n * `\'exiting\'` to `\'exited\'`.\n */\n\nvar Transition_Transition =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Transition, _React$Component);\n\n  function Transition(props, context) {\n    var _this;\n\n    _this = _React$Component.call(this, props, context) || this;\n    var parentGroup = context; // In the context of a TransitionGroup all enters are really appears\n\n    var appear = parentGroup && !parentGroup.isMounting ? props.enter : props.appear;\n    var initialStatus;\n    _this.appearStatus = null;\n\n    if (props.in) {\n      if (appear) {\n        initialStatus = EXITED;\n        _this.appearStatus = ENTERING;\n      } else {\n        initialStatus = ENTERED;\n      }\n    } else {\n      if (props.unmountOnExit || props.mountOnEnter) {\n        initialStatus = UNMOUNTED;\n      } else {\n        initialStatus = EXITED;\n      }\n    }\n\n    _this.state = {\n      status: initialStatus\n    };\n    _this.nextCallback = null;\n    return _this;\n  }\n\n  Transition.getDerivedStateFromProps = function getDerivedStateFromProps(_ref, prevState) {\n    var nextIn = _ref.in;\n\n    if (nextIn && prevState.status === UNMOUNTED) {\n      return {\n        status: EXITED\n      };\n    }\n\n    return null;\n  }; // getSnapshotBeforeUpdate(prevProps) {\n  //   let nextStatus = null\n  //   if (prevProps !== this.props) {\n  //     const { status } = this.state\n  //     if (this.props.in) {\n  //       if (status !== ENTERING && status !== ENTERED) {\n  //         nextStatus = ENTERING\n  //       }\n  //     } else {\n  //       if (status === ENTERING || status === ENTERED) {\n  //         nextStatus = EXITING\n  //       }\n  //     }\n  //   }\n  //   return { nextStatus }\n  // }\n\n\n  var _proto = Transition.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.updateStatus(true, this.appearStatus);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var nextStatus = null;\n\n    if (prevProps !== this.props) {\n      var status = this.state.status;\n\n      if (this.props.in) {\n        if (status !== ENTERING && status !== ENTERED) {\n          nextStatus = ENTERING;\n        }\n      } else {\n        if (status === ENTERING || status === ENTERED) {\n          nextStatus = EXITING;\n        }\n      }\n    }\n\n    this.updateStatus(false, nextStatus);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.cancelNextCallback();\n  };\n\n  _proto.getTimeouts = function getTimeouts() {\n    var timeout = this.props.timeout;\n    var exit, enter, appear;\n    exit = enter = appear = timeout;\n\n    if (timeout != null && typeof timeout !== \'number\') {\n      exit = timeout.exit;\n      enter = timeout.enter; // TODO: remove fallback for next major\n\n      appear = timeout.appear !== undefined ? timeout.appear : enter;\n    }\n\n    return {\n      exit: exit,\n      enter: enter,\n      appear: appear\n    };\n  };\n\n  _proto.updateStatus = function updateStatus(mounting, nextStatus) {\n    if (mounting === void 0) {\n      mounting = false;\n    }\n\n    if (nextStatus !== null) {\n      // nextStatus will always be ENTERING or EXITING.\n      this.cancelNextCallback();\n      var node = external_commonjs_react_dom_commonjs2_react_dom_root_ReactDOM_default.a.findDOMNode(this);\n\n      if (nextStatus === ENTERING) {\n        this.performEnter(node, mounting);\n      } else {\n        this.performExit(node);\n      }\n    } else if (this.props.unmountOnExit && this.state.status === EXITED) {\n      this.setState({\n        status: UNMOUNTED\n      });\n    }\n  };\n\n  _proto.performEnter = function performEnter(node, mounting) {\n    var _this2 = this;\n\n    var enter = this.props.enter;\n    var appearing = this.context ? this.context.isMounting : mounting;\n    var timeouts = this.getTimeouts();\n    var enterTimeout = appearing ? timeouts.appear : timeouts.enter; // no enter animation skip right to ENTERED\n    // if we are mounting and running this it means appear _must_ be set\n\n    if (!mounting && !enter || config.disabled) {\n      this.safeSetState({\n        status: ENTERED\n      }, function () {\n        _this2.props.onEntered(node);\n      });\n      return;\n    }\n\n    this.props.onEnter(node, appearing);\n    this.safeSetState({\n      status: ENTERING\n    }, function () {\n      _this2.props.onEntering(node, appearing);\n\n      _this2.onTransitionEnd(node, enterTimeout, function () {\n        _this2.safeSetState({\n          status: ENTERED\n        }, function () {\n          _this2.props.onEntered(node, appearing);\n        });\n      });\n    });\n  };\n\n  _proto.performExit = function performExit(node) {\n    var _this3 = this;\n\n    var exit = this.props.exit;\n    var timeouts = this.getTimeouts(); // no exit animation skip right to EXITED\n\n    if (!exit || config.disabled) {\n      this.safeSetState({\n        status: EXITED\n      }, function () {\n        _this3.props.onExited(node);\n      });\n      return;\n    }\n\n    this.props.onExit(node);\n    this.safeSetState({\n      status: EXITING\n    }, function () {\n      _this3.props.onExiting(node);\n\n      _this3.onTransitionEnd(node, timeouts.exit, function () {\n        _this3.safeSetState({\n          status: EXITED\n        }, function () {\n          _this3.props.onExited(node);\n        });\n      });\n    });\n  };\n\n  _proto.cancelNextCallback = function cancelNextCallback() {\n    if (this.nextCallback !== null) {\n      this.nextCallback.cancel();\n      this.nextCallback = null;\n    }\n  };\n\n  _proto.safeSetState = function safeSetState(nextState, callback) {\n    // This shouldn\'t be necessary, but there are weird race conditions with\n    // setState callbacks and unmounting in testing, so always make sure that\n    // we can cancel any pending setState callbacks after we unmount.\n    callback = this.setNextCallback(callback);\n    this.setState(nextState, callback);\n  };\n\n  _proto.setNextCallback = function setNextCallback(callback) {\n    var _this4 = this;\n\n    var active = true;\n\n    this.nextCallback = function (event) {\n      if (active) {\n        active = false;\n        _this4.nextCallback = null;\n        callback(event);\n      }\n    };\n\n    this.nextCallback.cancel = function () {\n      active = false;\n    };\n\n    return this.nextCallback;\n  };\n\n  _proto.onTransitionEnd = function onTransitionEnd(node, timeout, handler) {\n    this.setNextCallback(handler);\n    var doesNotHaveTimeoutOrListener = timeout == null && !this.props.addEndListener;\n\n    if (!node || doesNotHaveTimeoutOrListener) {\n      setTimeout(this.nextCallback, 0);\n      return;\n    }\n\n    if (this.props.addEndListener) {\n      this.props.addEndListener(node, this.nextCallback);\n    }\n\n    if (timeout != null) {\n      setTimeout(this.nextCallback, timeout);\n    }\n  };\n\n  _proto.render = function render() {\n    var status = this.state.status;\n\n    if (status === UNMOUNTED) {\n      return null;\n    }\n\n    var _this$props = this.props,\n        children = _this$props.children,\n        childProps = _objectWithoutPropertiesLoose(_this$props, ["children"]); // filter props for Transtition\n\n\n    delete childProps.in;\n    delete childProps.mountOnEnter;\n    delete childProps.unmountOnExit;\n    delete childProps.appear;\n    delete childProps.enter;\n    delete childProps.exit;\n    delete childProps.timeout;\n    delete childProps.addEndListener;\n    delete childProps.onEnter;\n    delete childProps.onEntering;\n    delete childProps.onEntered;\n    delete childProps.onExit;\n    delete childProps.onExiting;\n    delete childProps.onExited;\n\n    if (typeof children === \'function\') {\n      // allows for nested Transitions\n      return external_root_React_commonjs_react_commonjs2_react_default.a.createElement(TransitionGroupContext.Provider, {\n        value: null\n      }, children(status, childProps));\n    }\n\n    var child = external_root_React_commonjs_react_commonjs2_react_default.a.Children.only(children);\n    return (// allows for nested Transitions\n      external_root_React_commonjs_react_commonjs2_react_default.a.createElement(TransitionGroupContext.Provider, {\n        value: null\n      }, external_root_React_commonjs_react_commonjs2_react_default.a.cloneElement(child, childProps))\n    );\n  };\n\n  return Transition;\n}(external_root_React_commonjs_react_commonjs2_react_default.a.Component);\n\nTransition_Transition.contextType = TransitionGroupContext;\nTransition_Transition.propTypes =  false ? undefined : {};\n\nfunction noop() {}\n\nTransition_Transition.defaultProps = {\n  in: false,\n  mountOnEnter: false,\n  unmountOnExit: false,\n  appear: false,\n  enter: true,\n  exit: true,\n  onEnter: noop,\n  onEntering: noop,\n  onEntered: noop,\n  onExit: noop,\n  onExiting: noop,\n  onExited: noop\n};\nTransition_Transition.UNMOUNTED = 0;\nTransition_Transition.EXITED = 1;\nTransition_Transition.ENTERING = 2;\nTransition_Transition.ENTERED = 3;\nTransition_Transition.EXITING = 4;\n/* harmony default export */ var esm_Transition = (Transition_Transition);\n// CONCATENATED MODULE: ./node_modules/react-transition-group/esm/CSSTransition.js\n\n\n\n\n\n\n\n\n\n\nvar _addClass = function addClass(node, classes) {\n  return node && classes && classes.split(\' \').forEach(function (c) {\n    return addClass_default()(node, c);\n  });\n};\n\nvar CSSTransition_removeClass = function removeClass(node, classes) {\n  return node && classes && classes.split(\' \').forEach(function (c) {\n    return removeClass_default()(node, c);\n  });\n};\n/**\n * A transition component inspired by the excellent\n * [ng-animate](http://www.nganimate.org/) library, you should use it if you\'re\n * using CSS transitions or animations. It\'s built upon the\n * [`Transition`](https://reactcommunity.org/react-transition-group/transition)\n * component, so it inherits all of its props.\n *\n * `CSSTransition` applies a pair of class names during the `appear`, `enter`,\n * and `exit` states of the transition. The first class is applied and then a\n * second `*-active` class in order to activate the CSS transition. After the\n * transition, matching `*-done` class names are applied to persist the\n * transition state.\n *\n * ```jsx\n * function App() {\n *   const [inProp, setInProp] = useState(false);\n *   return (\n *     <div>\n *       <CSSTransition in={inProp} timeout={200} classNames="my-node">\n *         <div>\n *           {"I\'ll receive my-node-* classes"}\n *         </div>\n *       </CSSTransition>\n *       <button type="button" onClick={() => setInProp(true)}>\n *         Click to Enter\n *       </button>\n *     </div>\n *   );\n * }\n * ```\n *\n * When the `in` prop is set to `true`, the child component will first receive\n * the class `example-enter`, then the `example-enter-active` will be added in\n * the next tick. `CSSTransition` [forces a\n * reflow](https://github.com/reactjs/react-transition-group/blob/5007303e729a74be66a21c3e2205e4916821524b/src/CSSTransition.js#L208-L215)\n * between before adding the `example-enter-active`. This is an important trick\n * because it allows us to transition between `example-enter` and\n * `example-enter-active` even though they were added immediately one after\n * another. Most notably, this is what makes it possible for us to animate\n * _appearance_.\n *\n * ```css\n * .my-node-enter {\n *   opacity: 0;\n * }\n * .my-node-enter-active {\n *   opacity: 1;\n *   transition: opacity 200ms;\n * }\n * .my-node-exit {\n *   opacity: 1;\n * }\n * .my-node-exit-active {\n *   opacity: 0;\n *   transition: opacity 200ms;\n * }\n * ```\n *\n * `*-active` classes represent which styles you want to animate **to**.\n *\n * **Note**: If you\'re using the\n * [`appear`](http://reactcommunity.org/react-transition-group/transition#Transition-prop-appear)\n * prop, make sure to define styles for `.appear-*` classes as well.\n */\n\n\nvar CSSTransition_CSSTransition =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(CSSTransition, _React$Component);\n\n  function CSSTransition() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.appliedClasses = {\n      appear: {},\n      enter: {},\n      exit: {}\n    };\n\n    _this.onEnter = function (node, appearing) {\n      _this.removeClasses(node, \'exit\');\n\n      _this.addClass(node, appearing ? \'appear\' : \'enter\', \'base\');\n\n      if (_this.props.onEnter) {\n        _this.props.onEnter(node, appearing);\n      }\n    };\n\n    _this.onEntering = function (node, appearing) {\n      var type = appearing ? \'appear\' : \'enter\';\n\n      _this.addClass(node, type, \'active\');\n\n      if (_this.props.onEntering) {\n        _this.props.onEntering(node, appearing);\n      }\n    };\n\n    _this.onEntered = function (node, appearing) {\n      var type = appearing ? \'appear\' : \'enter\';\n\n      _this.removeClasses(node, type);\n\n      _this.addClass(node, type, \'done\');\n\n      if (_this.props.onEntered) {\n        _this.props.onEntered(node, appearing);\n      }\n    };\n\n    _this.onExit = function (node) {\n      _this.removeClasses(node, \'appear\');\n\n      _this.removeClasses(node, \'enter\');\n\n      _this.addClass(node, \'exit\', \'base\');\n\n      if (_this.props.onExit) {\n        _this.props.onExit(node);\n      }\n    };\n\n    _this.onExiting = function (node) {\n      _this.addClass(node, \'exit\', \'active\');\n\n      if (_this.props.onExiting) {\n        _this.props.onExiting(node);\n      }\n    };\n\n    _this.onExited = function (node) {\n      _this.removeClasses(node, \'exit\');\n\n      _this.addClass(node, \'exit\', \'done\');\n\n      if (_this.props.onExited) {\n        _this.props.onExited(node);\n      }\n    };\n\n    _this.getClassNames = function (type) {\n      var classNames = _this.props.classNames;\n      var isStringClassNames = typeof classNames === \'string\';\n      var prefix = isStringClassNames && classNames ? classNames + "-" : \'\';\n      var baseClassName = isStringClassNames ? "" + prefix + type : classNames[type];\n      var activeClassName = isStringClassNames ? baseClassName + "-active" : classNames[type + "Active"];\n      var doneClassName = isStringClassNames ? baseClassName + "-done" : classNames[type + "Done"];\n      return {\n        baseClassName: baseClassName,\n        activeClassName: activeClassName,\n        doneClassName: doneClassName\n      };\n    };\n\n    return _this;\n  }\n\n  var _proto = CSSTransition.prototype;\n\n  _proto.addClass = function addClass(node, type, phase) {\n    var className = this.getClassNames(type)[phase + "ClassName"];\n\n    if (type === \'appear\' && phase === \'done\') {\n      className += " " + this.getClassNames(\'enter\').doneClassName;\n    } // This is for to force a repaint,\n    // which is necessary in order to transition styles when adding a class name.\n\n\n    if (phase === \'active\') {\n      /* eslint-disable no-unused-expressions */\n      node && node.scrollTop;\n    }\n\n    this.appliedClasses[type][phase] = className;\n\n    _addClass(node, className);\n  };\n\n  _proto.removeClasses = function removeClasses(node, type) {\n    var _this$appliedClasses$ = this.appliedClasses[type],\n        baseClassName = _this$appliedClasses$.base,\n        activeClassName = _this$appliedClasses$.active,\n        doneClassName = _this$appliedClasses$.done;\n    this.appliedClasses[type] = {};\n\n    if (baseClassName) {\n      CSSTransition_removeClass(node, baseClassName);\n    }\n\n    if (activeClassName) {\n      CSSTransition_removeClass(node, activeClassName);\n    }\n\n    if (doneClassName) {\n      CSSTransition_removeClass(node, doneClassName);\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        _ = _this$props.classNames,\n        props = _objectWithoutPropertiesLoose(_this$props, ["classNames"]);\n\n    return external_root_React_commonjs_react_commonjs2_react_default.a.createElement(esm_Transition, _extends({}, props, {\n      onEnter: this.onEnter,\n      onEntered: this.onEntered,\n      onEntering: this.onEntering,\n      onExit: this.onExit,\n      onExiting: this.onExiting,\n      onExited: this.onExited\n    }));\n  };\n\n  return CSSTransition;\n}(external_root_React_commonjs_react_commonjs2_react_default.a.Component);\n\nCSSTransition_CSSTransition.defaultProps = {\n  classNames: \'\'\n};\nCSSTransition_CSSTransition.propTypes =  false ? undefined : {};\n/* harmony default export */ var esm_CSSTransition = (CSSTransition_CSSTransition);\n// EXTERNAL MODULE: ./node_modules/tt-react-custom-scrollbars/lib/index.js\nvar lib = __webpack_require__(7);\n\n// CONCATENATED MODULE: ./src/components/icon-arrow.jsx\n\n\n // TODO remove this file entirely when icon component is ready.\n\nvar icon_arrow_IconArrow = function IconArrow(_ref) {\n  var className = _ref.className,\n      classNamePath = _ref.classNamePath;\n  return external_root_React_commonjs_react_commonjs2_react_default.a.createElement("svg", {\n    className: classnames_default()(\'inline-icon\', className),\n    width: "16",\n    height: "16"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement("path", {\n    className: classnames_default()(classNamePath, \'color1-fill\'),\n    fill: "rgba(0, 0, 0, 0.8)",\n    fillRule: "nonzero",\n    d: "M13.164 5.13a.5.5 0 1 1 .672.74l-5.5 5a.5.5 0 0 1-.672 0l-5.5-5a.5.5 0 0 1 .672-.74L8 9.824l5.164-4.694z"\n  }));\n};\n\nicon_arrow_IconArrow.propTypes = {\n  className: prop_types_default.a.string,\n  classNamePath: prop_types_default.a.string\n};\n/* harmony default export */ var icon_arrow = (icon_arrow_IconArrow);\n// CONCATENATED MODULE: ./src/components/dropdown/dropdown.js\n\nvar getDisplayText = function getDisplayText(list, value) {\n  var findInArray = function findInArray(arr_list) {\n    return (arr_list.find(function (item) {\n      return item.value === value;\n    }) || {}).text;\n  };\n\n  var text = \'\';\n\n  if (Array.isArray(list)) {\n    text = findInArray(list);\n  } else {\n    Object.keys(list).some(function (key) {\n      text = findInArray(list[key]);\n      return text;\n    });\n  }\n\n  return text;\n};\nvar getItemFromValue = function getItemFromValue(list, value) {\n  var findInArray = function findInArray(arr_list) {\n    return arr_list.findIndex(function (item) {\n      return item.value === value;\n    });\n  };\n\n  var item = {};\n\n  if (Array.isArray(list)) {\n    item = {\n      number: findInArray(list),\n      length: list.length\n    };\n  } else {\n    Object.keys(list).some(function (key) {\n      item = {\n        number: findInArray(list[key]),\n        length: list[key].length\n      };\n      return item;\n    });\n  }\n\n  return item;\n};\nvar getValueFromIndex = function getValueFromIndex(list, index) {\n  var findInArray = function findInArray(arr_list) {\n    return arr_list[index];\n  };\n\n  var result;\n\n  if (Array.isArray(list)) {\n    result = findInArray(list);\n  } else {\n    Object.keys(list).some(function (key) {\n      result = findInArray(list[key]);\n      return result.value;\n    });\n  }\n\n  return result.value;\n};\nvar getPrevIndex = function getPrevIndex(index, length) {\n  var prev_index = index - 1 < 0 ? length - 1 : index - 1;\n  return prev_index;\n};\nvar getNextIndex = function getNextIndex(index, length) {\n  var next_index = index + 1 === length ? 0 : index + 1;\n  return next_index;\n};\nvar dropdown_listPropType = function listPropType() {\n  return prop_types_default.a.oneOfType([prop_types_default.a.arrayOf(prop_types_default.a.shape({\n    disabled: prop_types_default.a.bool,\n    has_tooltip: prop_types_default.a.bool,\n    text: prop_types_default.a.string,\n    tooltip: prop_types_default.a.string,\n    value: prop_types_default.a.oneOfType([prop_types_default.a.string, prop_types_default.a.number])\n  })), prop_types_default.a.object]);\n};\n// EXTERNAL MODULE: ./src/components/popover/index.js + 19 modules\nvar popover = __webpack_require__(8);\n\n// CONCATENATED MODULE: ./src/components/dropdown/items.jsx\n\n\n\n\n\nvar items_Items = function Items(_ref) {\n  var index = _ref.index,\n      handleSelect = _ref.handleSelect,\n      has_symbol = _ref.has_symbol,\n      items = _ref.items,\n      name = _ref.name,\n      value = _ref.value;\n  return items.map(function (item, idx) {\n    var symbol_type_class_name = item.text ? "symbols--".concat(item.text.toLowerCase()) : \'\';\n    return external_root_React_commonjs_react_commonjs2_react_default.a.createElement("div", {\n      className: classnames_default()(\'dc-list__item\', {\n        \'dc-list__item--highlighted\': idx === index\n      }, {\n        \'dc-list__item--selected\': value === item.value\n      }, {\n        \'dc-list__item--disabled\': item.disabled\n      }),\n      name: name,\n      value: item.value,\n      onClick: item.disabled ? null : handleSelect.bind(null, item),\n      key: idx\n    }, !!has_symbol && item.has_tooltip && external_root_React_commonjs_react_commonjs2_react_default.a.createElement(popover["default"], {\n      alignment: "left",\n      message: item.tooltip\n    }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement("span", {\n      className: classnames_default()(\'symbols\', \'dc-list__item-symbol\', symbol_type_class_name)\n    })), !!has_symbol && !item.has_tooltip && external_root_React_commonjs_react_commonjs2_react_default.a.createElement("span", {\n      className: classnames_default()(\'symbols\', \'dc-list__item-text\', symbol_type_class_name)\n    }), !has_symbol && external_root_React_commonjs_react_commonjs2_react_default.a.createElement("span", {\n      className: "dc-list__item-text"\n    }, item.text));\n  });\n};\n\nitems_Items.propTypes = {\n  handleSelect: prop_types_default.a.func,\n  has_symbol: prop_types_default.a.bool,\n  name: prop_types_default.a.string,\n  value: prop_types_default.a.oneOfType([prop_types_default.a.number, prop_types_default.a.string])\n};\n/* harmony default export */ var dropdown_items = (items_Items);\n// CONCATENATED MODULE: ./src/components/dropdown/native-select.jsx\n\n\n\nvar native_select_NativeSelect = function NativeSelect(_ref) {\n  var name = _ref.name,\n      list = _ref.list,\n      value = _ref.value,\n      onChange = _ref.onChange;\n  return external_root_React_commonjs_react_commonjs2_react_default.a.createElement("div", {\n    className: "native-select native-select__wrapper"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement("select", {\n    className: "select native-select__select",\n    name: name,\n    value: value,\n    onChange: onChange\n  }, Array.isArray(list) ? list.map(function (item, idx) {\n    return external_root_React_commonjs_react_commonjs2_react_default.a.createElement("option", {\n      key: idx,\n      value: item.value\n    }, item.text);\n  }) : Object.keys(list).map(function (key) {\n    return external_root_React_commonjs_react_commonjs2_react_default.a.createElement(external_root_React_commonjs_react_commonjs2_react_default.a.Fragment, {\n      key: key\n    }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement("optgroup", {\n      label: key\n    }, list[key].map(function (item, idx) {\n      return external_root_React_commonjs_react_commonjs2_react_default.a.createElement("option", {\n        key: idx,\n        value: item.value\n      }, item.text);\n    })));\n  })));\n};\n\nnative_select_NativeSelect.propTypes = {\n  list: prop_types_default.a.oneOfType([prop_types_default.a.object, prop_types_default.a.array]),\n  name: prop_types_default.a.string,\n  onChange: prop_types_default.a.func,\n  value: prop_types_default.a.oneOfType([prop_types_default.a.number, prop_types_default.a.string])\n};\n/* harmony default export */ var native_select = (native_select_NativeSelect);\n// CONCATENATED MODULE: ./src/components/dropdown/symbol-span.jsx\nfunction _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\nvar symbol_span_SymbolSpan =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SymbolSpan, _Component);\n\n  function SymbolSpan() {\n    _classCallCheck(this, SymbolSpan);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SymbolSpan).apply(this, arguments));\n  }\n\n  _createClass(SymbolSpan, [{\n    key: "render",\n    value: function render() {\n      if (this.props.has_symbol) {\n        return external_root_React_commonjs_react_commonjs2_react_default.a.createElement("span", {\n          name: this.props.name,\n          value: this.props.value,\n          className: "symbols dc-dropdown__display-symbol symbols--".concat((this.props.value || \'\').toLowerCase())\n        });\n      }\n\n      return external_root_React_commonjs_react_commonjs2_react_default.a.createElement("span", {\n        name: this.props.name,\n        value: this.props.value,\n        className: "dc-dropdown__display-text"\n      }, getDisplayText(this.props.list, this.props.value));\n    }\n  }]);\n\n  return SymbolSpan;\n}(external_root_React_commonjs_react_commonjs2_react_["Component"]);\n\nsymbol_span_SymbolSpan.propTypes = {\n  has_symbol: prop_types_default.a.bool,\n  list: dropdown_listPropType(),\n  name: prop_types_default.a.string,\n  value: prop_types_default.a.oneOfType([prop_types_default.a.string, prop_types_default.a.number, prop_types_default.a.bool])\n};\n/* harmony default export */ var symbol_span = (symbol_span_SymbolSpan);\n// CONCATENATED MODULE: ./src/components/dropdown/dropdown.jsx\nfunction dropdown_typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { dropdown_typeof = function _typeof(obj) { return typeof obj; }; } else { dropdown_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return dropdown_typeof(obj); }\n\nfunction dropdown_extends() { dropdown_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return dropdown_extends.apply(this, arguments); }\n\nfunction dropdown_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction dropdown_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction dropdown_createClass(Constructor, protoProps, staticProps) { if (protoProps) dropdown_defineProperties(Constructor.prototype, protoProps); if (staticProps) dropdown_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction dropdown_possibleConstructorReturn(self, call) { if (call && (dropdown_typeof(call) === "object" || typeof call === "function")) { return call; } return dropdown_assertThisInitialized(self); }\n\nfunction dropdown_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction dropdown_getPrototypeOf(o) { dropdown_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return dropdown_getPrototypeOf(o); }\n\nfunction dropdown_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) dropdown_setPrototypeOf(subClass, superClass); }\n\nfunction dropdown_setPrototypeOf(o, p) { dropdown_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return dropdown_setPrototypeOf(o, p); }\n\n\n\n\n\n\n\n\n\n\n\n\nvar dropdown_Dropdown =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  dropdown_inherits(Dropdown, _React$PureComponent);\n\n  function Dropdown() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    dropdown_classCallCheck(this, Dropdown);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = dropdown_possibleConstructorReturn(this, (_getPrototypeOf2 = dropdown_getPrototypeOf(Dropdown)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.list_ref = external_root_React_commonjs_react_commonjs2_react_default.a.createRef();\n    _this.state = {\n      curr_index: getItemFromValue(_this.props.list, _this.props.value).number,\n      is_list_visible: false,\n      list_width: 0\n    };\n\n    _this.handleSelect = function (item) {\n      if (item.value !== _this.props.value) {\n        _this.props.onChange({\n          target: {\n            name: _this.props.name,\n            value: item.value\n          }\n        });\n      }\n\n      _this.handleVisibility();\n    };\n\n    _this.setWrapperRef = function (node) {\n      return _this.wrapper_ref = node;\n    };\n\n    _this.handleClickOutside = function (event) {\n      if (_this.wrapper_ref && !_this.wrapper_ref.contains(event.target) && _this.state.is_list_visible) {\n        _this.setState({\n          is_list_visible: false\n        });\n      }\n    };\n\n    _this.handleVisibility = function () {\n      _this.setState(function (state) {\n        return {\n          is_list_visible: !state.is_list_visible\n        };\n      });\n    };\n\n    _this.handleToggle = function (value) {\n      if (_this.state.is_list_visible && _this.props.value !== value) {\n        _this.props.onChange({\n          target: {\n            name: _this.props.name,\n            value: value\n          }\n        });\n      }\n\n      _this.handleVisibility();\n    };\n\n    _this.onKeyPressed = function (event) {\n      if (_this.is_single_option) return;\n\n      if (event.keyCode === 9) {\n        // Tab is pressed\n        if (_this.state.is_list_visible) {\n          _this.handleVisibility();\n        }\n\n        return;\n      }\n\n      event.preventDefault();\n      var index = getItemFromValue(_this.props.list, _this.props.value);\n      var value = getValueFromIndex(_this.props.list, _this.state.curr_index);\n\n      switch (event.keyCode) {\n        case 13: // Enter is pressed\n\n        case 32:\n          // Space is pressed\n          _this.handleToggle(value);\n\n          break;\n\n        case 38:\n          // Up Arrow is pressed\n          if (_this.state.is_list_visible) {\n            var prev_index = getPrevIndex(_this.state.curr_index, index.length);\n\n            _this.setState({\n              curr_index: prev_index\n            });\n          }\n\n          break;\n\n        case 40:\n          // Down Arrow is pressed\n          if (_this.state.is_list_visible) {\n            var next_index = getNextIndex(_this.state.curr_index, index.length);\n\n            _this.setState({\n              curr_index: next_index\n            });\n          } else if (!_this.props.is_alignment_left) {\n            _this.handleVisibility();\n          }\n\n          break;\n\n        case 37:\n          // Left arrow is pressed\n          if (!_this.state.is_list_visible && _this.props.is_alignment_left) {\n            _this.handleVisibility();\n          }\n\n          break;\n\n        case 39:\n          // Right Arrow is pressed\n          if (_this.state.is_list_visible && _this.props.is_alignment_left) {\n            _this.handleVisibility();\n          }\n\n          break;\n\n        default:\n      } // For char presses, we do a search for the item:\n\n\n      if (event.key.length === 1) {\n        var _char = event.key.toLowerCase();\n\n        var firstChars = _this.props.list.map(function (x) {\n          return x.text[0].toLowerCase();\n        });\n\n        var idx; // Tapping the same character again jumps to the next match:\n\n        if (_this.state.curr_index) {\n          idx = firstChars.indexOf(_char, _this.state.curr_index + 1);\n        }\n\n        if (idx === undefined || idx === -1) {\n          idx = firstChars.indexOf(_char);\n        }\n\n        if (idx >= 0) {\n          _this.setState({\n            curr_index: idx\n          });\n        }\n      }\n    };\n\n    _this.setListWidth = function () {\n      return _this.setState({\n        list_width: _this.list_ref.current.offsetWidth\n      });\n    };\n\n    return _this;\n  }\n\n  dropdown_createClass(Dropdown, [{\n    key: "componentDidMount",\n    value: function componentDidMount() {\n      document.addEventListener(\'mousedown\', this.handleClickOutside, {\n        passive: true\n      });\n    }\n  }, {\n    key: "componentWillUnmount",\n    value: function componentWillUnmount() {\n      document.removeEventListener(\'mousedown\', this.handleClickOutside);\n    }\n  }, {\n    key: "render",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.props.is_nativepicker) {\n        return external_root_React_commonjs_react_commonjs2_react_default.a.createElement(native_select, {\n          name: this.props.name,\n          value: this.props.value,\n          list: this.props.list,\n          onChange: this.props.onChange\n        });\n      }\n\n      return external_root_React_commonjs_react_commonjs2_react_default.a.createElement("div", {\n        ref: this.setWrapperRef,\n        className: this.container_class_name\n      }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement("div", {\n        className: this.dropdown_display_class_name,\n        tabIndex: this.is_single_option ? \'-1\' : \'0\',\n        onClick: this.handleVisibility,\n        onKeyDown: this.onKeyPressed\n      }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(symbol_span, {\n        has_symbol: this.props.has_symbol,\n        name: this.props.name,\n        value: this.props.value,\n        list: this.props.list\n      })), !this.is_single_option && external_root_React_commonjs_react_commonjs2_react_default.a.createElement(icon_arrow, {\n        icon: "IconArrow",\n        className: classnames_default()(\'dc-dropdown__select-arrow\', {\n          \'dc-dropdown__select-arrow--left\': this.props.is_alignment_left\n        })\n      }), external_root_React_commonjs_react_commonjs2_react_default.a.createElement(esm_CSSTransition, {\n        "in": this.state.is_list_visible,\n        timeout: 100,\n        classNames: this.transition_class_names,\n        onEntered: this.setListWidth,\n        unmountOnExit: true\n      }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement("div", {\n        className: this.dropdown_list_class_names\n      }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement("div", {\n        className: this.list_class_names,\n        ref: this.list_ref,\n        style: this.props.is_alignment_left ? this.computed_offset_left : undefined\n      }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(lib["Scrollbars"], {\n        autoHeight: true,\n        autoHide: true,\n        autoHeightMax: 200,\n        renderTrackHorizontal: function renderTrackHorizontal(props) {\n          return external_root_React_commonjs_react_commonjs2_react_default.a.createElement("div", dropdown_extends({}, props, {\n            className: "track-horizontal",\n            style: {\n              display: \'none\'\n            }\n          }));\n        },\n        renderThumbHorizontal: function renderThumbHorizontal(props) {\n          return external_root_React_commonjs_react_commonjs2_react_default.a.createElement("div", dropdown_extends({}, props, {\n            className: "thumb-horizontal",\n            style: {\n              display: \'none\'\n            }\n          }));\n        }\n      }, Array.isArray(this.props.list) ? external_root_React_commonjs_react_commonjs2_react_default.a.createElement(dropdown_items, {\n        index: this.state.curr_index,\n        handleSelect: this.handleSelect,\n        has_symbol: this.props.has_symbol,\n        items: this.props.list,\n        name: this.props.name,\n        value: this.props.value\n      }) : Object.keys(this.props.list).map(function (key) {\n        return external_root_React_commonjs_react_commonjs2_react_default.a.createElement(external_root_React_commonjs_react_commonjs2_react_default.a.Fragment, {\n          key: key\n        }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement("div", {\n          className: "dc-list__label"\n        }, key), external_root_React_commonjs_react_commonjs2_react_default.a.createElement(dropdown_items, {\n          index: _this2.state.curr_index,\n          handleSelect: _this2.handleSelect,\n          has_symbol: _this2.props.has_symbol,\n          items: _this2.props.list[key],\n          name: _this2.props.name,\n          value: _this2.props.value\n        }));\n      }))))));\n    }\n  }, {\n    key: "computed_offset_left",\n\n    /**\n     * Calculate the offset for the dropdown list based on its width\n     *\n     * @return {{transform: string}}\n     */\n    get: function get() {\n      return {\n        transform: "translate3d(calc(-".concat(this.state.list_width, "px - 12px), 0, 0px)")\n      };\n    }\n  }, {\n    key: "is_single_option",\n    get: function get() {\n      return Array.isArray(this.props.list) ? this.props.list.length < 2 : Object.keys(this.props.list).length < 2;\n    }\n  }, {\n    key: "container_class_name",\n    get: function get() {\n      return classnames_default()(\'dc-dropdown-container\', this.props.className, {\n        \'dc-dropdown--left\': this.props.is_alignment_left,\n        \'dc-dropdown--show\': this.state.is_list_visible,\n        \'dc-dropdown--disabled\': this.is_single_option\n      });\n    }\n  }, {\n    key: "dropdown_display_class_name",\n    get: function get() {\n      return classnames_default()(\'dc-dropdown__display\', this.props.classNameDisplay, {\n        \'dc-dropdown__display--clicked\': this.state.is_list_visible,\n        \'dc-dropdown__display--has-symbol\': this.props.has_symbol\n      });\n    }\n  }, {\n    key: "dropdown_list_class_names",\n    get: function get() {\n      return classnames_default()(\'dc-dropdown__list\', {\n        \'dc-dropdown__list--left\': this.props.is_alignment_left\n      });\n    }\n  }, {\n    key: "list_class_names",\n    get: function get() {\n      return classnames_default()(\'dc-list\', {\n        \'dc-list--left\': this.props.is_alignment_left\n      });\n    }\n  }, {\n    key: "transition_class_names",\n    get: function get() {\n      return {\n        enter: "dc-dropdown__list--enter".concat(this.props.is_alignment_left ? \' dc-dropdown__list--left--enter\' : \'\'),\n        enterDone: "dc-dropdown__list--enter-done".concat(this.props.is_alignment_left ? \' dc-dropdown__list--left--enter-done\' : \'\'),\n        exit: "dc-dropdown__list--exit".concat(this.props.is_alignment_left ? \' dc-dropdown__list--left--exit\' : \'\')\n      };\n    }\n    /**\n     * Set Initial State based on props\n    *\n     * @param props\n     * @param state\n     * @return {{curr_index: *, is_list_visible: boolean}}\n     */\n\n  }], [{\n    key: "getDerivedStateFromProps",\n    value: function getDerivedStateFromProps(props, state) {\n      return {\n        curr_index: getItemFromValue(props.list, props.value).number,\n        is_list_visible: !!state && !!state.is_list_visible\n      };\n    }\n  }]);\n\n  return Dropdown;\n}(external_root_React_commonjs_react_commonjs2_react_default.a.PureComponent);\n\ndropdown_Dropdown.propTypes = {\n  className: prop_types_default.a.string,\n  classNameDisplay: prop_types_default.a.string,\n  has_symbol: prop_types_default.a.bool,\n  is_alignment_left: prop_types_default.a.bool,\n  is_nativepicker: prop_types_default.a.bool,\n  list: dropdown_listPropType(),\n  name: prop_types_default.a.string,\n  onChange: prop_types_default.a.func,\n  value: prop_types_default.a.oneOfType([prop_types_default.a.number, prop_types_default.a.string])\n};\n/* harmony default export */ var dropdown_dropdown = (dropdown_Dropdown);\n// CONCATENATED MODULE: ./src/components/dropdown/index.js\n/* concated harmony reexport default */__webpack_require__.d(__webpack_exports__, "default", function() { return dropdown_dropdown; });\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMuanM/YzMxZCIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UuanM/Y2NiNSIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzTG9vc2UuanM/NzQ4ZSIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvZXNtL2NvbmZpZy5qcz8yYTQyIiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcmVhY3QtdHJhbnNpdGlvbi1ncm91cC9lc20vVHJhbnNpdGlvbkdyb3VwQ29udGV4dC5qcz9kMGY0Iiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcmVhY3QtdHJhbnNpdGlvbi1ncm91cC9lc20vVHJhbnNpdGlvbi5qcz83NTFiIiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcmVhY3QtdHJhbnNpdGlvbi1ncm91cC9lc20vQ1NTVHJhbnNpdGlvbi5qcz9hNTBmIiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9pY29uLWFycm93LmpzeD8wMTg5Iiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9kcm9wZG93bi9kcm9wZG93bi5qcz85ODlkIiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9kcm9wZG93bi9pdGVtcy5qc3g/ZmY2ZSIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvZHJvcGRvd24vbmF0aXZlLXNlbGVjdC5qc3g/OGM2ZCIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvZHJvcGRvd24vc3ltYm9sLXNwYW4uanN4P2M1YzYiLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL3NyYy9jb21wb25lbnRzL2Ryb3Bkb3duL2Ryb3Bkb3duLmpzeD80ZGQ3Iiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9kcm9wZG93bi9pbmRleC5qcz83MWFmIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9leHRlbmRzKCkge1xuICBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG5cbiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IHt9O1xuICB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG4gIHZhciBrZXksIGk7XG5cbiAgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBrZXkgPSBzb3VyY2VLZXlzW2ldO1xuICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7XG4gIHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzO1xuICBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xufSIsImV4cG9ydCBkZWZhdWx0IHtcbiAgZGlzYWJsZWQ6IGZhbHNlXG59OyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5leHBvcnQgZGVmYXVsdCBSZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpOyIsImltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZVwiO1xuaW1wb3J0IF9pbmhlcml0c0xvb3NlIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c0xvb3NlXCI7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyB0aW1lb3V0c1NoYXBlIH0gZnJvbSAnLi91dGlscy9Qcm9wVHlwZXMnO1xuaW1wb3J0IFRyYW5zaXRpb25Hcm91cENvbnRleHQgZnJvbSAnLi9UcmFuc2l0aW9uR3JvdXBDb250ZXh0JztcbmV4cG9ydCB2YXIgVU5NT1VOVEVEID0gJ3VubW91bnRlZCc7XG5leHBvcnQgdmFyIEVYSVRFRCA9ICdleGl0ZWQnO1xuZXhwb3J0IHZhciBFTlRFUklORyA9ICdlbnRlcmluZyc7XG5leHBvcnQgdmFyIEVOVEVSRUQgPSAnZW50ZXJlZCc7XG5leHBvcnQgdmFyIEVYSVRJTkcgPSAnZXhpdGluZyc7XG4vKipcbiAqIFRoZSBUcmFuc2l0aW9uIGNvbXBvbmVudCBsZXRzIHlvdSBkZXNjcmliZSBhIHRyYW5zaXRpb24gZnJvbSBvbmUgY29tcG9uZW50XG4gKiBzdGF0ZSB0byBhbm90aGVyIF9vdmVyIHRpbWVfIHdpdGggYSBzaW1wbGUgZGVjbGFyYXRpdmUgQVBJLiBNb3N0IGNvbW1vbmx5XG4gKiBpdCdzIHVzZWQgdG8gYW5pbWF0ZSB0aGUgbW91bnRpbmcgYW5kIHVubW91bnRpbmcgb2YgYSBjb21wb25lbnQsIGJ1dCBjYW4gYWxzb1xuICogYmUgdXNlZCB0byBkZXNjcmliZSBpbi1wbGFjZSB0cmFuc2l0aW9uIHN0YXRlcyBhcyB3ZWxsLlxuICpcbiAqIC0tLVxuICpcbiAqICoqTm90ZSoqOiBgVHJhbnNpdGlvbmAgaXMgYSBwbGF0Zm9ybS1hZ25vc3RpYyBiYXNlIGNvbXBvbmVudC4gSWYgeW91J3JlIHVzaW5nXG4gKiB0cmFuc2l0aW9ucyBpbiBDU1MsIHlvdSdsbCBwcm9iYWJseSB3YW50IHRvIHVzZVxuICogW2BDU1NUcmFuc2l0aW9uYF0oaHR0cHM6Ly9yZWFjdGNvbW11bml0eS5vcmcvcmVhY3QtdHJhbnNpdGlvbi1ncm91cC9jc3MtdHJhbnNpdGlvbilcbiAqIGluc3RlYWQuIEl0IGluaGVyaXRzIGFsbCB0aGUgZmVhdHVyZXMgb2YgYFRyYW5zaXRpb25gLCBidXQgY29udGFpbnNcbiAqIGFkZGl0aW9uYWwgZmVhdHVyZXMgbmVjZXNzYXJ5IHRvIHBsYXkgbmljZSB3aXRoIENTUyB0cmFuc2l0aW9ucyAoaGVuY2UgdGhlXG4gKiBuYW1lIG9mIHRoZSBjb21wb25lbnQpLlxuICpcbiAqIC0tLVxuICpcbiAqIEJ5IGRlZmF1bHQgdGhlIGBUcmFuc2l0aW9uYCBjb21wb25lbnQgZG9lcyBub3QgYWx0ZXIgdGhlIGJlaGF2aW9yIG9mIHRoZVxuICogY29tcG9uZW50IGl0IHJlbmRlcnMsIGl0IG9ubHkgdHJhY2tzIFwiZW50ZXJcIiBhbmQgXCJleGl0XCIgc3RhdGVzIGZvciB0aGVcbiAqIGNvbXBvbmVudHMuIEl0J3MgdXAgdG8geW91IHRvIGdpdmUgbWVhbmluZyBhbmQgZWZmZWN0IHRvIHRob3NlIHN0YXRlcy4gRm9yXG4gKiBleGFtcGxlIHdlIGNhbiBhZGQgc3R5bGVzIHRvIGEgY29tcG9uZW50IHdoZW4gaXQgZW50ZXJzIG9yIGV4aXRzOlxuICpcbiAqIGBgYGpzeFxuICogaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJ3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAnO1xuICpcbiAqIGNvbnN0IGR1cmF0aW9uID0gMzAwO1xuICpcbiAqIGNvbnN0IGRlZmF1bHRTdHlsZSA9IHtcbiAqICAgdHJhbnNpdGlvbjogYG9wYWNpdHkgJHtkdXJhdGlvbn1tcyBlYXNlLWluLW91dGAsXG4gKiAgIG9wYWNpdHk6IDAsXG4gKiB9XG4gKlxuICogY29uc3QgdHJhbnNpdGlvblN0eWxlcyA9IHtcbiAqICAgZW50ZXJpbmc6IHsgb3BhY2l0eTogMSB9LFxuICogICBlbnRlcmVkOiAgeyBvcGFjaXR5OiAxIH0sXG4gKiAgIGV4aXRpbmc6ICB7IG9wYWNpdHk6IDAgfSxcbiAqICAgZXhpdGVkOiAgeyBvcGFjaXR5OiAwIH0sXG4gKiB9O1xuICpcbiAqIGNvbnN0IEZhZGUgPSAoeyBpbjogaW5Qcm9wIH0pID0+IChcbiAqICAgPFRyYW5zaXRpb24gaW49e2luUHJvcH0gdGltZW91dD17ZHVyYXRpb259PlxuICogICAgIHtzdGF0ZSA9PiAoXG4gKiAgICAgICA8ZGl2IHN0eWxlPXt7XG4gKiAgICAgICAgIC4uLmRlZmF1bHRTdHlsZSxcbiAqICAgICAgICAgLi4udHJhbnNpdGlvblN0eWxlc1tzdGF0ZV1cbiAqICAgICAgIH19PlxuICogICAgICAgICBJJ20gYSBmYWRlIFRyYW5zaXRpb24hXG4gKiAgICAgICA8L2Rpdj5cbiAqICAgICApfVxuICogICA8L1RyYW5zaXRpb24+XG4gKiApO1xuICogYGBgXG4gKlxuICogVGhlcmUgYXJlIDQgbWFpbiBzdGF0ZXMgYSBUcmFuc2l0aW9uIGNhbiBiZSBpbjpcbiAqICAtIGAnZW50ZXJpbmcnYFxuICogIC0gYCdlbnRlcmVkJ2BcbiAqICAtIGAnZXhpdGluZydgXG4gKiAgLSBgJ2V4aXRlZCdgXG4gKlxuICogVHJhbnNpdGlvbiBzdGF0ZSBpcyB0b2dnbGVkIHZpYSB0aGUgYGluYCBwcm9wLiBXaGVuIGB0cnVlYCB0aGUgY29tcG9uZW50XG4gKiBiZWdpbnMgdGhlIFwiRW50ZXJcIiBzdGFnZS4gRHVyaW5nIHRoaXMgc3RhZ2UsIHRoZSBjb21wb25lbnQgd2lsbCBzaGlmdCBmcm9tXG4gKiBpdHMgY3VycmVudCB0cmFuc2l0aW9uIHN0YXRlLCB0byBgJ2VudGVyaW5nJ2AgZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGVcbiAqIHRyYW5zaXRpb24gYW5kIHRoZW4gdG8gdGhlIGAnZW50ZXJlZCdgIHN0YWdlIG9uY2UgaXQncyBjb21wbGV0ZS4gTGV0J3MgdGFrZVxuICogdGhlIGZvbGxvd2luZyBleGFtcGxlICh3ZSdsbCB1c2UgdGhlXG4gKiBbdXNlU3RhdGVdKGh0dHBzOi8vcmVhY3Rqcy5vcmcvZG9jcy9ob29rcy1yZWZlcmVuY2UuaHRtbCN1c2VzdGF0ZSkgaG9vayk6XG4gKlxuICogYGBganN4XG4gKiBmdW5jdGlvbiBBcHAoKSB7XG4gKiAgIGNvbnN0IFtpblByb3AsIHNldEluUHJvcF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gKiAgIHJldHVybiAoXG4gKiAgICAgPGRpdj5cbiAqICAgICAgIDxUcmFuc2l0aW9uIGluPXtpblByb3B9IHRpbWVvdXQ9ezUwMH0+XG4gKiAgICAgICAgIHtzdGF0ZSA9PiAoXG4gKiAgICAgICAgICAgLy8gLi4uXG4gKiAgICAgICAgICl9XG4gKiAgICAgICA8L1RyYW5zaXRpb24+XG4gKiAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldEluUHJvcCh0cnVlKX0+XG4gKiAgICAgICAgIENsaWNrIHRvIEVudGVyXG4gKiAgICAgICA8L2J1dHRvbj5cbiAqICAgICA8L2Rpdj5cbiAqICAgKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIFdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkIHRoZSBjb21wb25lbnQgd2lsbCBzaGlmdCB0byB0aGUgYCdlbnRlcmluZydgIHN0YXRlXG4gKiBhbmQgc3RheSB0aGVyZSBmb3IgNTAwbXMgKHRoZSB2YWx1ZSBvZiBgdGltZW91dGApIGJlZm9yZSBpdCBmaW5hbGx5IHN3aXRjaGVzXG4gKiB0byBgJ2VudGVyZWQnYC5cbiAqXG4gKiBXaGVuIGBpbmAgaXMgYGZhbHNlYCB0aGUgc2FtZSB0aGluZyBoYXBwZW5zIGV4Y2VwdCB0aGUgc3RhdGUgbW92ZXMgZnJvbVxuICogYCdleGl0aW5nJ2AgdG8gYCdleGl0ZWQnYC5cbiAqL1xuXG52YXIgVHJhbnNpdGlvbiA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHNMb29zZShUcmFuc2l0aW9uLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBUcmFuc2l0aW9uKHByb3BzLCBjb250ZXh0KSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfUmVhY3QkQ29tcG9uZW50LmNhbGwodGhpcywgcHJvcHMsIGNvbnRleHQpIHx8IHRoaXM7XG4gICAgdmFyIHBhcmVudEdyb3VwID0gY29udGV4dDsgLy8gSW4gdGhlIGNvbnRleHQgb2YgYSBUcmFuc2l0aW9uR3JvdXAgYWxsIGVudGVycyBhcmUgcmVhbGx5IGFwcGVhcnNcblxuICAgIHZhciBhcHBlYXIgPSBwYXJlbnRHcm91cCAmJiAhcGFyZW50R3JvdXAuaXNNb3VudGluZyA/IHByb3BzLmVudGVyIDogcHJvcHMuYXBwZWFyO1xuICAgIHZhciBpbml0aWFsU3RhdHVzO1xuICAgIF90aGlzLmFwcGVhclN0YXR1cyA9IG51bGw7XG5cbiAgICBpZiAocHJvcHMuaW4pIHtcbiAgICAgIGlmIChhcHBlYXIpIHtcbiAgICAgICAgaW5pdGlhbFN0YXR1cyA9IEVYSVRFRDtcbiAgICAgICAgX3RoaXMuYXBwZWFyU3RhdHVzID0gRU5URVJJTkc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbml0aWFsU3RhdHVzID0gRU5URVJFRDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHByb3BzLnVubW91bnRPbkV4aXQgfHwgcHJvcHMubW91bnRPbkVudGVyKSB7XG4gICAgICAgIGluaXRpYWxTdGF0dXMgPSBVTk1PVU5URUQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbml0aWFsU3RhdHVzID0gRVhJVEVEO1xuICAgICAgfVxuICAgIH1cblxuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgc3RhdHVzOiBpbml0aWFsU3RhdHVzXG4gICAgfTtcbiAgICBfdGhpcy5uZXh0Q2FsbGJhY2sgPSBudWxsO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIFRyYW5zaXRpb24uZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzID0gZnVuY3Rpb24gZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKF9yZWYsIHByZXZTdGF0ZSkge1xuICAgIHZhciBuZXh0SW4gPSBfcmVmLmluO1xuXG4gICAgaWYgKG5leHRJbiAmJiBwcmV2U3RhdGUuc3RhdHVzID09PSBVTk1PVU5URUQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogRVhJVEVEXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9OyAvLyBnZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgLy8gICBsZXQgbmV4dFN0YXR1cyA9IG51bGxcbiAgLy8gICBpZiAocHJldlByb3BzICE9PSB0aGlzLnByb3BzKSB7XG4gIC8vICAgICBjb25zdCB7IHN0YXR1cyB9ID0gdGhpcy5zdGF0ZVxuICAvLyAgICAgaWYgKHRoaXMucHJvcHMuaW4pIHtcbiAgLy8gICAgICAgaWYgKHN0YXR1cyAhPT0gRU5URVJJTkcgJiYgc3RhdHVzICE9PSBFTlRFUkVEKSB7XG4gIC8vICAgICAgICAgbmV4dFN0YXR1cyA9IEVOVEVSSU5HXG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH0gZWxzZSB7XG4gIC8vICAgICAgIGlmIChzdGF0dXMgPT09IEVOVEVSSU5HIHx8IHN0YXR1cyA9PT0gRU5URVJFRCkge1xuICAvLyAgICAgICAgIG5leHRTdGF0dXMgPSBFWElUSU5HXG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH1cbiAgLy8gICB9XG4gIC8vICAgcmV0dXJuIHsgbmV4dFN0YXR1cyB9XG4gIC8vIH1cblxuXG4gIHZhciBfcHJvdG8gPSBUcmFuc2l0aW9uLnByb3RvdHlwZTtcblxuICBfcHJvdG8uY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnVwZGF0ZVN0YXR1cyh0cnVlLCB0aGlzLmFwcGVhclN0YXR1cyk7XG4gIH07XG5cbiAgX3Byb3RvLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICB2YXIgbmV4dFN0YXR1cyA9IG51bGw7XG5cbiAgICBpZiAocHJldlByb3BzICE9PSB0aGlzLnByb3BzKSB7XG4gICAgICB2YXIgc3RhdHVzID0gdGhpcy5zdGF0ZS5zdGF0dXM7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmluKSB7XG4gICAgICAgIGlmIChzdGF0dXMgIT09IEVOVEVSSU5HICYmIHN0YXR1cyAhPT0gRU5URVJFRCkge1xuICAgICAgICAgIG5leHRTdGF0dXMgPSBFTlRFUklORztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gRU5URVJJTkcgfHwgc3RhdHVzID09PSBFTlRFUkVEKSB7XG4gICAgICAgICAgbmV4dFN0YXR1cyA9IEVYSVRJTkc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVN0YXR1cyhmYWxzZSwgbmV4dFN0YXR1cyk7XG4gIH07XG5cbiAgX3Byb3RvLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5jYW5jZWxOZXh0Q2FsbGJhY2soKTtcbiAgfTtcblxuICBfcHJvdG8uZ2V0VGltZW91dHMgPSBmdW5jdGlvbiBnZXRUaW1lb3V0cygpIHtcbiAgICB2YXIgdGltZW91dCA9IHRoaXMucHJvcHMudGltZW91dDtcbiAgICB2YXIgZXhpdCwgZW50ZXIsIGFwcGVhcjtcbiAgICBleGl0ID0gZW50ZXIgPSBhcHBlYXIgPSB0aW1lb3V0O1xuXG4gICAgaWYgKHRpbWVvdXQgIT0gbnVsbCAmJiB0eXBlb2YgdGltZW91dCAhPT0gJ251bWJlcicpIHtcbiAgICAgIGV4aXQgPSB0aW1lb3V0LmV4aXQ7XG4gICAgICBlbnRlciA9IHRpbWVvdXQuZW50ZXI7IC8vIFRPRE86IHJlbW92ZSBmYWxsYmFjayBmb3IgbmV4dCBtYWpvclxuXG4gICAgICBhcHBlYXIgPSB0aW1lb3V0LmFwcGVhciAhPT0gdW5kZWZpbmVkID8gdGltZW91dC5hcHBlYXIgOiBlbnRlcjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZXhpdDogZXhpdCxcbiAgICAgIGVudGVyOiBlbnRlcixcbiAgICAgIGFwcGVhcjogYXBwZWFyXG4gICAgfTtcbiAgfTtcblxuICBfcHJvdG8udXBkYXRlU3RhdHVzID0gZnVuY3Rpb24gdXBkYXRlU3RhdHVzKG1vdW50aW5nLCBuZXh0U3RhdHVzKSB7XG4gICAgaWYgKG1vdW50aW5nID09PSB2b2lkIDApIHtcbiAgICAgIG1vdW50aW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKG5leHRTdGF0dXMgIT09IG51bGwpIHtcbiAgICAgIC8vIG5leHRTdGF0dXMgd2lsbCBhbHdheXMgYmUgRU5URVJJTkcgb3IgRVhJVElORy5cbiAgICAgIHRoaXMuY2FuY2VsTmV4dENhbGxiYWNrKCk7XG4gICAgICB2YXIgbm9kZSA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpO1xuXG4gICAgICBpZiAobmV4dFN0YXR1cyA9PT0gRU5URVJJTkcpIHtcbiAgICAgICAgdGhpcy5wZXJmb3JtRW50ZXIobm9kZSwgbW91bnRpbmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wZXJmb3JtRXhpdChub2RlKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMudW5tb3VudE9uRXhpdCAmJiB0aGlzLnN0YXRlLnN0YXR1cyA9PT0gRVhJVEVEKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgc3RhdHVzOiBVTk1PVU5URURcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8ucGVyZm9ybUVudGVyID0gZnVuY3Rpb24gcGVyZm9ybUVudGVyKG5vZGUsIG1vdW50aW5nKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgZW50ZXIgPSB0aGlzLnByb3BzLmVudGVyO1xuICAgIHZhciBhcHBlYXJpbmcgPSB0aGlzLmNvbnRleHQgPyB0aGlzLmNvbnRleHQuaXNNb3VudGluZyA6IG1vdW50aW5nO1xuICAgIHZhciB0aW1lb3V0cyA9IHRoaXMuZ2V0VGltZW91dHMoKTtcbiAgICB2YXIgZW50ZXJUaW1lb3V0ID0gYXBwZWFyaW5nID8gdGltZW91dHMuYXBwZWFyIDogdGltZW91dHMuZW50ZXI7IC8vIG5vIGVudGVyIGFuaW1hdGlvbiBza2lwIHJpZ2h0IHRvIEVOVEVSRURcbiAgICAvLyBpZiB3ZSBhcmUgbW91bnRpbmcgYW5kIHJ1bm5pbmcgdGhpcyBpdCBtZWFucyBhcHBlYXIgX211c3RfIGJlIHNldFxuXG4gICAgaWYgKCFtb3VudGluZyAmJiAhZW50ZXIgfHwgY29uZmlnLmRpc2FibGVkKSB7XG4gICAgICB0aGlzLnNhZmVTZXRTdGF0ZSh7XG4gICAgICAgIHN0YXR1czogRU5URVJFRFxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIucHJvcHMub25FbnRlcmVkKG5vZGUpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5wcm9wcy5vbkVudGVyKG5vZGUsIGFwcGVhcmluZyk7XG4gICAgdGhpcy5zYWZlU2V0U3RhdGUoe1xuICAgICAgc3RhdHVzOiBFTlRFUklOR1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzMi5wcm9wcy5vbkVudGVyaW5nKG5vZGUsIGFwcGVhcmluZyk7XG5cbiAgICAgIF90aGlzMi5vblRyYW5zaXRpb25FbmQobm9kZSwgZW50ZXJUaW1lb3V0LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMi5zYWZlU2V0U3RhdGUoe1xuICAgICAgICAgIHN0YXR1czogRU5URVJFRFxuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMyLnByb3BzLm9uRW50ZXJlZChub2RlLCBhcHBlYXJpbmcpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5wZXJmb3JtRXhpdCA9IGZ1bmN0aW9uIHBlcmZvcm1FeGl0KG5vZGUpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHZhciBleGl0ID0gdGhpcy5wcm9wcy5leGl0O1xuICAgIHZhciB0aW1lb3V0cyA9IHRoaXMuZ2V0VGltZW91dHMoKTsgLy8gbm8gZXhpdCBhbmltYXRpb24gc2tpcCByaWdodCB0byBFWElURURcblxuICAgIGlmICghZXhpdCB8fCBjb25maWcuZGlzYWJsZWQpIHtcbiAgICAgIHRoaXMuc2FmZVNldFN0YXRlKHtcbiAgICAgICAgc3RhdHVzOiBFWElURURcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMzLnByb3BzLm9uRXhpdGVkKG5vZGUpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5wcm9wcy5vbkV4aXQobm9kZSk7XG4gICAgdGhpcy5zYWZlU2V0U3RhdGUoe1xuICAgICAgc3RhdHVzOiBFWElUSU5HXG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMzLnByb3BzLm9uRXhpdGluZyhub2RlKTtcblxuICAgICAgX3RoaXMzLm9uVHJhbnNpdGlvbkVuZChub2RlLCB0aW1lb3V0cy5leGl0LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMy5zYWZlU2V0U3RhdGUoe1xuICAgICAgICAgIHN0YXR1czogRVhJVEVEXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczMucHJvcHMub25FeGl0ZWQobm9kZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLmNhbmNlbE5leHRDYWxsYmFjayA9IGZ1bmN0aW9uIGNhbmNlbE5leHRDYWxsYmFjaygpIHtcbiAgICBpZiAodGhpcy5uZXh0Q2FsbGJhY2sgIT09IG51bGwpIHtcbiAgICAgIHRoaXMubmV4dENhbGxiYWNrLmNhbmNlbCgpO1xuICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uc2FmZVNldFN0YXRlID0gZnVuY3Rpb24gc2FmZVNldFN0YXRlKG5leHRTdGF0ZSwgY2FsbGJhY2spIHtcbiAgICAvLyBUaGlzIHNob3VsZG4ndCBiZSBuZWNlc3NhcnksIGJ1dCB0aGVyZSBhcmUgd2VpcmQgcmFjZSBjb25kaXRpb25zIHdpdGhcbiAgICAvLyBzZXRTdGF0ZSBjYWxsYmFja3MgYW5kIHVubW91bnRpbmcgaW4gdGVzdGluZywgc28gYWx3YXlzIG1ha2Ugc3VyZSB0aGF0XG4gICAgLy8gd2UgY2FuIGNhbmNlbCBhbnkgcGVuZGluZyBzZXRTdGF0ZSBjYWxsYmFja3MgYWZ0ZXIgd2UgdW5tb3VudC5cbiAgICBjYWxsYmFjayA9IHRoaXMuc2V0TmV4dENhbGxiYWNrKGNhbGxiYWNrKTtcbiAgICB0aGlzLnNldFN0YXRlKG5leHRTdGF0ZSwgY2FsbGJhY2spO1xuICB9O1xuXG4gIF9wcm90by5zZXROZXh0Q2FsbGJhY2sgPSBmdW5jdGlvbiBzZXROZXh0Q2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIHZhciBhY3RpdmUgPSB0cnVlO1xuXG4gICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChhY3RpdmUpIHtcbiAgICAgICAgYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIF90aGlzNC5uZXh0Q2FsbGJhY2sgPSBudWxsO1xuICAgICAgICBjYWxsYmFjayhldmVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubmV4dENhbGxiYWNrLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGFjdGl2ZSA9IGZhbHNlO1xuICAgIH07XG5cbiAgICByZXR1cm4gdGhpcy5uZXh0Q2FsbGJhY2s7XG4gIH07XG5cbiAgX3Byb3RvLm9uVHJhbnNpdGlvbkVuZCA9IGZ1bmN0aW9uIG9uVHJhbnNpdGlvbkVuZChub2RlLCB0aW1lb3V0LCBoYW5kbGVyKSB7XG4gICAgdGhpcy5zZXROZXh0Q2FsbGJhY2soaGFuZGxlcik7XG4gICAgdmFyIGRvZXNOb3RIYXZlVGltZW91dE9yTGlzdGVuZXIgPSB0aW1lb3V0ID09IG51bGwgJiYgIXRoaXMucHJvcHMuYWRkRW5kTGlzdGVuZXI7XG5cbiAgICBpZiAoIW5vZGUgfHwgZG9lc05vdEhhdmVUaW1lb3V0T3JMaXN0ZW5lcikge1xuICAgICAgc2V0VGltZW91dCh0aGlzLm5leHRDYWxsYmFjaywgMCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMuYWRkRW5kTGlzdGVuZXIpIHtcbiAgICAgIHRoaXMucHJvcHMuYWRkRW5kTGlzdGVuZXIobm9kZSwgdGhpcy5uZXh0Q2FsbGJhY2spO1xuICAgIH1cblxuICAgIGlmICh0aW1lb3V0ICE9IG51bGwpIHtcbiAgICAgIHNldFRpbWVvdXQodGhpcy5uZXh0Q2FsbGJhY2ssIHRpbWVvdXQpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8ucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBzdGF0dXMgPSB0aGlzLnN0YXRlLnN0YXR1cztcblxuICAgIGlmIChzdGF0dXMgPT09IFVOTU9VTlRFRCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgY2hpbGRyZW4gPSBfdGhpcyRwcm9wcy5jaGlsZHJlbixcbiAgICAgICAgY2hpbGRQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKF90aGlzJHByb3BzLCBbXCJjaGlsZHJlblwiXSk7IC8vIGZpbHRlciBwcm9wcyBmb3IgVHJhbnN0aXRpb25cblxuXG4gICAgZGVsZXRlIGNoaWxkUHJvcHMuaW47XG4gICAgZGVsZXRlIGNoaWxkUHJvcHMubW91bnRPbkVudGVyO1xuICAgIGRlbGV0ZSBjaGlsZFByb3BzLnVubW91bnRPbkV4aXQ7XG4gICAgZGVsZXRlIGNoaWxkUHJvcHMuYXBwZWFyO1xuICAgIGRlbGV0ZSBjaGlsZFByb3BzLmVudGVyO1xuICAgIGRlbGV0ZSBjaGlsZFByb3BzLmV4aXQ7XG4gICAgZGVsZXRlIGNoaWxkUHJvcHMudGltZW91dDtcbiAgICBkZWxldGUgY2hpbGRQcm9wcy5hZGRFbmRMaXN0ZW5lcjtcbiAgICBkZWxldGUgY2hpbGRQcm9wcy5vbkVudGVyO1xuICAgIGRlbGV0ZSBjaGlsZFByb3BzLm9uRW50ZXJpbmc7XG4gICAgZGVsZXRlIGNoaWxkUHJvcHMub25FbnRlcmVkO1xuICAgIGRlbGV0ZSBjaGlsZFByb3BzLm9uRXhpdDtcbiAgICBkZWxldGUgY2hpbGRQcm9wcy5vbkV4aXRpbmc7XG4gICAgZGVsZXRlIGNoaWxkUHJvcHMub25FeGl0ZWQ7XG5cbiAgICBpZiAodHlwZW9mIGNoaWxkcmVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBhbGxvd3MgZm9yIG5lc3RlZCBUcmFuc2l0aW9uc1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVHJhbnNpdGlvbkdyb3VwQ29udGV4dC5Qcm92aWRlciwge1xuICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgfSwgY2hpbGRyZW4oc3RhdHVzLCBjaGlsZFByb3BzKSk7XG4gICAgfVxuXG4gICAgdmFyIGNoaWxkID0gUmVhY3QuQ2hpbGRyZW4ub25seShjaGlsZHJlbik7XG4gICAgcmV0dXJuICgvLyBhbGxvd3MgZm9yIG5lc3RlZCBUcmFuc2l0aW9uc1xuICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2l0aW9uR3JvdXBDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgIHZhbHVlOiBudWxsXG4gICAgICB9LCBSZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGQsIGNoaWxkUHJvcHMpKVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIFRyYW5zaXRpb247XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cblRyYW5zaXRpb24uY29udGV4dFR5cGUgPSBUcmFuc2l0aW9uR3JvdXBDb250ZXh0O1xuVHJhbnNpdGlvbi5wcm9wVHlwZXMgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB7XG4gIC8qKlxuICAgKiBBIGBmdW5jdGlvbmAgY2hpbGQgY2FuIGJlIHVzZWQgaW5zdGVhZCBvZiBhIFJlYWN0IGVsZW1lbnQuIFRoaXMgZnVuY3Rpb24gaXNcbiAgICogY2FsbGVkIHdpdGggdGhlIGN1cnJlbnQgdHJhbnNpdGlvbiBzdGF0dXMgKGAnZW50ZXJpbmcnYCwgYCdlbnRlcmVkJ2AsXG4gICAqIGAnZXhpdGluZydgLCBgJ2V4aXRlZCdgKSwgd2hpY2ggY2FuIGJlIHVzZWQgdG8gYXBwbHkgY29udGV4dFxuICAgKiBzcGVjaWZpYyBwcm9wcyB0byBhIGNvbXBvbmVudC5cbiAgICpcbiAgICogYGBganN4XG4gICAqIDxUcmFuc2l0aW9uIGluPXt0aGlzLnN0YXRlLmlufSB0aW1lb3V0PXsxNTB9PlxuICAgKiAgIHtzdGF0ZSA9PiAoXG4gICAqICAgICA8TXlDb21wb25lbnQgY2xhc3NOYW1lPXtgZmFkZSBmYWRlLSR7c3RhdGV9YH0gLz5cbiAgICogICApfVxuICAgKiA8L1RyYW5zaXRpb24+XG4gICAqIGBgYFxuICAgKi9cbiAgY2hpbGRyZW46IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsIFByb3BUeXBlcy5lbGVtZW50LmlzUmVxdWlyZWRdKS5pc1JlcXVpcmVkLFxuXG4gIC8qKlxuICAgKiBTaG93IHRoZSBjb21wb25lbnQ7IHRyaWdnZXJzIHRoZSBlbnRlciBvciBleGl0IHN0YXRlc1xuICAgKi9cbiAgaW46IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBCeSBkZWZhdWx0IHRoZSBjaGlsZCBjb21wb25lbnQgaXMgbW91bnRlZCBpbW1lZGlhdGVseSBhbG9uZyB3aXRoXG4gICAqIHRoZSBwYXJlbnQgYFRyYW5zaXRpb25gIGNvbXBvbmVudC4gSWYgeW91IHdhbnQgdG8gXCJsYXp5IG1vdW50XCIgdGhlIGNvbXBvbmVudCBvbiB0aGVcbiAgICogZmlyc3QgYGluPXt0cnVlfWAgeW91IGNhbiBzZXQgYG1vdW50T25FbnRlcmAuIEFmdGVyIHRoZSBmaXJzdCBlbnRlciB0cmFuc2l0aW9uIHRoZSBjb21wb25lbnQgd2lsbCBzdGF5XG4gICAqIG1vdW50ZWQsIGV2ZW4gb24gXCJleGl0ZWRcIiwgdW5sZXNzIHlvdSBhbHNvIHNwZWNpZnkgYHVubW91bnRPbkV4aXRgLlxuICAgKi9cbiAgbW91bnRPbkVudGVyOiBQcm9wVHlwZXMuYm9vbCxcblxuICAvKipcbiAgICogQnkgZGVmYXVsdCB0aGUgY2hpbGQgY29tcG9uZW50IHN0YXlzIG1vdW50ZWQgYWZ0ZXIgaXQgcmVhY2hlcyB0aGUgYCdleGl0ZWQnYCBzdGF0ZS5cbiAgICogU2V0IGB1bm1vdW50T25FeGl0YCBpZiB5b3UnZCBwcmVmZXIgdG8gdW5tb3VudCB0aGUgY29tcG9uZW50IGFmdGVyIGl0IGZpbmlzaGVzIGV4aXRpbmcuXG4gICAqL1xuICB1bm1vdW50T25FeGl0OiBQcm9wVHlwZXMuYm9vbCxcblxuICAvKipcbiAgICogTm9ybWFsbHkgYSBjb21wb25lbnQgaXMgbm90IHRyYW5zaXRpb25lZCBpZiBpdCBpcyBzaG93biB3aGVuIHRoZVxuICAgKiBgPFRyYW5zaXRpb24+YCBjb21wb25lbnQgbW91bnRzLiBJZiB5b3Ugd2FudCB0byB0cmFuc2l0aW9uIG9uIHRoZSBmaXJzdFxuICAgKiBtb3VudCBzZXQgYGFwcGVhcmAgdG8gYHRydWVgLCBhbmQgdGhlIGNvbXBvbmVudCB3aWxsIHRyYW5zaXRpb24gaW4gYXMgc29vblxuICAgKiBhcyB0aGUgYDxUcmFuc2l0aW9uPmAgbW91bnRzLlxuICAgKlxuICAgKiA+ICoqTm90ZSoqOiB0aGVyZSBhcmUgbm8gc3BlY2lhbCBhcHBlYXIgc3RhdGVzIGxpa2UgYGFwcGVhcmluZ2AvYGFwcGVhcmVkYCwgdGhpcyBwcm9wXG4gICAqID4gb25seSBhZGRzIGFuIGFkZGl0aW9uYWwgZW50ZXIgdHJhbnNpdGlvbi4gSG93ZXZlciwgaW4gdGhlXG4gICAqID4gYDxDU1NUcmFuc2l0aW9uPmAgY29tcG9uZW50IHRoYXQgZmlyc3QgZW50ZXIgdHJhbnNpdGlvbiBkb2VzIHJlc3VsdCBpblxuICAgKiA+IGFkZGl0aW9uYWwgYC5hcHBlYXItKmAgY2xhc3NlcywgdGhhdCB3YXkgeW91IGNhbiBjaG9vc2UgdG8gc3R5bGUgaXRcbiAgICogPiBkaWZmZXJlbnRseS5cbiAgICovXG4gIGFwcGVhcjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgLyoqXG4gICAqIEVuYWJsZSBvciBkaXNhYmxlIGVudGVyIHRyYW5zaXRpb25zLlxuICAgKi9cbiAgZW50ZXI6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBFbmFibGUgb3IgZGlzYWJsZSBleGl0IHRyYW5zaXRpb25zLlxuICAgKi9cbiAgZXhpdDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgLyoqXG4gICAqIFRoZSBkdXJhdGlvbiBvZiB0aGUgdHJhbnNpdGlvbiwgaW4gbWlsbGlzZWNvbmRzLlxuICAgKiBSZXF1aXJlZCB1bmxlc3MgYGFkZEVuZExpc3RlbmVyYCBpcyBwcm92aWRlZC5cbiAgICpcbiAgICogWW91IG1heSBzcGVjaWZ5IGEgc2luZ2xlIHRpbWVvdXQgZm9yIGFsbCB0cmFuc2l0aW9uczpcbiAgICpcbiAgICogYGBganN4XG4gICAqIHRpbWVvdXQ9ezUwMH1cbiAgICogYGBgXG4gICAqXG4gICAqIG9yIGluZGl2aWR1YWxseTpcbiAgICpcbiAgICogYGBganN4XG4gICAqIHRpbWVvdXQ9e3tcbiAgICogIGFwcGVhcjogNTAwLFxuICAgKiAgZW50ZXI6IDMwMCxcbiAgICogIGV4aXQ6IDUwMCxcbiAgICogfX1cbiAgICogYGBgXG4gICAqXG4gICAqIC0gYGFwcGVhcmAgZGVmYXVsdHMgdG8gdGhlIHZhbHVlIG9mIGBlbnRlcmBcbiAgICogLSBgZW50ZXJgIGRlZmF1bHRzIHRvIGAwYFxuICAgKiAtIGBleGl0YCBkZWZhdWx0cyB0byBgMGBcbiAgICpcbiAgICogQHR5cGUge251bWJlciB8IHsgZW50ZXI/OiBudW1iZXIsIGV4aXQ/OiBudW1iZXIsIGFwcGVhcj86IG51bWJlciB9fVxuICAgKi9cbiAgdGltZW91dDogZnVuY3Rpb24gdGltZW91dChwcm9wcykge1xuICAgIHZhciBwdCA9IHRpbWVvdXRzU2hhcGU7XG4gICAgaWYgKCFwcm9wcy5hZGRFbmRMaXN0ZW5lcikgcHQgPSBwdC5pc1JlcXVpcmVkO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHB0LmFwcGx5KHZvaWQgMCwgW3Byb3BzXS5jb25jYXQoYXJncykpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGQgYSBjdXN0b20gdHJhbnNpdGlvbiBlbmQgdHJpZ2dlci4gQ2FsbGVkIHdpdGggdGhlIHRyYW5zaXRpb25pbmdcbiAgICogRE9NIG5vZGUgYW5kIGEgYGRvbmVgIGNhbGxiYWNrLiBBbGxvd3MgZm9yIG1vcmUgZmluZSBncmFpbmVkIHRyYW5zaXRpb24gZW5kXG4gICAqIGxvZ2ljLiAqKk5vdGU6KiogVGltZW91dHMgYXJlIHN0aWxsIHVzZWQgYXMgYSBmYWxsYmFjayBpZiBwcm92aWRlZC5cbiAgICpcbiAgICogYGBganN4XG4gICAqIGFkZEVuZExpc3RlbmVyPXsobm9kZSwgZG9uZSkgPT4ge1xuICAgKiAgIC8vIHVzZSB0aGUgY3NzIHRyYW5zaXRpb25lbmQgZXZlbnQgdG8gbWFyayB0aGUgZmluaXNoIG9mIGEgdHJhbnNpdGlvblxuICAgKiAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGRvbmUsIGZhbHNlKTtcbiAgICogfX1cbiAgICogYGBgXG4gICAqL1xuICBhZGRFbmRMaXN0ZW5lcjogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZpcmVkIGJlZm9yZSB0aGUgXCJlbnRlcmluZ1wiIHN0YXR1cyBpcyBhcHBsaWVkLiBBbiBleHRyYSBwYXJhbWV0ZXJcbiAgICogYGlzQXBwZWFyaW5nYCBpcyBzdXBwbGllZCB0byBpbmRpY2F0ZSBpZiB0aGUgZW50ZXIgc3RhZ2UgaXMgb2NjdXJyaW5nIG9uIHRoZSBpbml0aWFsIG1vdW50XG4gICAqXG4gICAqIEB0eXBlIEZ1bmN0aW9uKG5vZGU6IEh0bWxFbGVtZW50LCBpc0FwcGVhcmluZzogYm9vbCkgLT4gdm9pZFxuICAgKi9cbiAgb25FbnRlcjogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZpcmVkIGFmdGVyIHRoZSBcImVudGVyaW5nXCIgc3RhdHVzIGlzIGFwcGxpZWQuIEFuIGV4dHJhIHBhcmFtZXRlclxuICAgKiBgaXNBcHBlYXJpbmdgIGlzIHN1cHBsaWVkIHRvIGluZGljYXRlIGlmIHRoZSBlbnRlciBzdGFnZSBpcyBvY2N1cnJpbmcgb24gdGhlIGluaXRpYWwgbW91bnRcbiAgICpcbiAgICogQHR5cGUgRnVuY3Rpb24obm9kZTogSHRtbEVsZW1lbnQsIGlzQXBwZWFyaW5nOiBib29sKVxuICAgKi9cbiAgb25FbnRlcmluZzogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZpcmVkIGFmdGVyIHRoZSBcImVudGVyZWRcIiBzdGF0dXMgaXMgYXBwbGllZC4gQW4gZXh0cmEgcGFyYW1ldGVyXG4gICAqIGBpc0FwcGVhcmluZ2AgaXMgc3VwcGxpZWQgdG8gaW5kaWNhdGUgaWYgdGhlIGVudGVyIHN0YWdlIGlzIG9jY3VycmluZyBvbiB0aGUgaW5pdGlhbCBtb3VudFxuICAgKlxuICAgKiBAdHlwZSBGdW5jdGlvbihub2RlOiBIdG1sRWxlbWVudCwgaXNBcHBlYXJpbmc6IGJvb2wpIC0+IHZvaWRcbiAgICovXG4gIG9uRW50ZXJlZDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZpcmVkIGJlZm9yZSB0aGUgXCJleGl0aW5nXCIgc3RhdHVzIGlzIGFwcGxpZWQuXG4gICAqXG4gICAqIEB0eXBlIEZ1bmN0aW9uKG5vZGU6IEh0bWxFbGVtZW50KSAtPiB2b2lkXG4gICAqL1xuICBvbkV4aXQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmaXJlZCBhZnRlciB0aGUgXCJleGl0aW5nXCIgc3RhdHVzIGlzIGFwcGxpZWQuXG4gICAqXG4gICAqIEB0eXBlIEZ1bmN0aW9uKG5vZGU6IEh0bWxFbGVtZW50KSAtPiB2b2lkXG4gICAqL1xuICBvbkV4aXRpbmc6IFByb3BUeXBlcy5mdW5jLFxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmaXJlZCBhZnRlciB0aGUgXCJleGl0ZWRcIiBzdGF0dXMgaXMgYXBwbGllZC5cbiAgICpcbiAgICogQHR5cGUgRnVuY3Rpb24obm9kZTogSHRtbEVsZW1lbnQpIC0+IHZvaWRcbiAgICovXG4gIG9uRXhpdGVkOiBQcm9wVHlwZXMuZnVuYyAvLyBOYW1lIHRoZSBmdW5jdGlvbiBzbyBpdCBpcyBjbGVhcmVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG5cbn0gOiB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cblRyYW5zaXRpb24uZGVmYXVsdFByb3BzID0ge1xuICBpbjogZmFsc2UsXG4gIG1vdW50T25FbnRlcjogZmFsc2UsXG4gIHVubW91bnRPbkV4aXQ6IGZhbHNlLFxuICBhcHBlYXI6IGZhbHNlLFxuICBlbnRlcjogdHJ1ZSxcbiAgZXhpdDogdHJ1ZSxcbiAgb25FbnRlcjogbm9vcCxcbiAgb25FbnRlcmluZzogbm9vcCxcbiAgb25FbnRlcmVkOiBub29wLFxuICBvbkV4aXQ6IG5vb3AsXG4gIG9uRXhpdGluZzogbm9vcCxcbiAgb25FeGl0ZWQ6IG5vb3Bcbn07XG5UcmFuc2l0aW9uLlVOTU9VTlRFRCA9IDA7XG5UcmFuc2l0aW9uLkVYSVRFRCA9IDE7XG5UcmFuc2l0aW9uLkVOVEVSSU5HID0gMjtcblRyYW5zaXRpb24uRU5URVJFRCA9IDM7XG5UcmFuc2l0aW9uLkVYSVRJTkcgPSA0O1xuZXhwb3J0IGRlZmF1bHQgVHJhbnNpdGlvbjsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZVwiO1xuaW1wb3J0IF9pbmhlcml0c0xvb3NlIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c0xvb3NlXCI7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IGFkZE9uZUNsYXNzIGZyb20gJ2RvbS1oZWxwZXJzL2NsYXNzL2FkZENsYXNzJztcbmltcG9ydCByZW1vdmVPbmVDbGFzcyBmcm9tICdkb20taGVscGVycy9jbGFzcy9yZW1vdmVDbGFzcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFRyYW5zaXRpb24gZnJvbSAnLi9UcmFuc2l0aW9uJztcbmltcG9ydCB7IGNsYXNzTmFtZXNTaGFwZSB9IGZyb20gJy4vdXRpbHMvUHJvcFR5cGVzJztcblxudmFyIF9hZGRDbGFzcyA9IGZ1bmN0aW9uIGFkZENsYXNzKG5vZGUsIGNsYXNzZXMpIHtcbiAgcmV0dXJuIG5vZGUgJiYgY2xhc3NlcyAmJiBjbGFzc2VzLnNwbGl0KCcgJykuZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgIHJldHVybiBhZGRPbmVDbGFzcyhub2RlLCBjKTtcbiAgfSk7XG59O1xuXG52YXIgcmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiByZW1vdmVDbGFzcyhub2RlLCBjbGFzc2VzKSB7XG4gIHJldHVybiBub2RlICYmIGNsYXNzZXMgJiYgY2xhc3Nlcy5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcbiAgICByZXR1cm4gcmVtb3ZlT25lQ2xhc3Mobm9kZSwgYyk7XG4gIH0pO1xufTtcbi8qKlxuICogQSB0cmFuc2l0aW9uIGNvbXBvbmVudCBpbnNwaXJlZCBieSB0aGUgZXhjZWxsZW50XG4gKiBbbmctYW5pbWF0ZV0oaHR0cDovL3d3dy5uZ2FuaW1hdGUub3JnLykgbGlicmFyeSwgeW91IHNob3VsZCB1c2UgaXQgaWYgeW91J3JlXG4gKiB1c2luZyBDU1MgdHJhbnNpdGlvbnMgb3IgYW5pbWF0aW9ucy4gSXQncyBidWlsdCB1cG9uIHRoZVxuICogW2BUcmFuc2l0aW9uYF0oaHR0cHM6Ly9yZWFjdGNvbW11bml0eS5vcmcvcmVhY3QtdHJhbnNpdGlvbi1ncm91cC90cmFuc2l0aW9uKVxuICogY29tcG9uZW50LCBzbyBpdCBpbmhlcml0cyBhbGwgb2YgaXRzIHByb3BzLlxuICpcbiAqIGBDU1NUcmFuc2l0aW9uYCBhcHBsaWVzIGEgcGFpciBvZiBjbGFzcyBuYW1lcyBkdXJpbmcgdGhlIGBhcHBlYXJgLCBgZW50ZXJgLFxuICogYW5kIGBleGl0YCBzdGF0ZXMgb2YgdGhlIHRyYW5zaXRpb24uIFRoZSBmaXJzdCBjbGFzcyBpcyBhcHBsaWVkIGFuZCB0aGVuIGFcbiAqIHNlY29uZCBgKi1hY3RpdmVgIGNsYXNzIGluIG9yZGVyIHRvIGFjdGl2YXRlIHRoZSBDU1MgdHJhbnNpdGlvbi4gQWZ0ZXIgdGhlXG4gKiB0cmFuc2l0aW9uLCBtYXRjaGluZyBgKi1kb25lYCBjbGFzcyBuYW1lcyBhcmUgYXBwbGllZCB0byBwZXJzaXN0IHRoZVxuICogdHJhbnNpdGlvbiBzdGF0ZS5cbiAqXG4gKiBgYGBqc3hcbiAqIGZ1bmN0aW9uIEFwcCgpIHtcbiAqICAgY29uc3QgW2luUHJvcCwgc2V0SW5Qcm9wXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAqICAgcmV0dXJuIChcbiAqICAgICA8ZGl2PlxuICogICAgICAgPENTU1RyYW5zaXRpb24gaW49e2luUHJvcH0gdGltZW91dD17MjAwfSBjbGFzc05hbWVzPVwibXktbm9kZVwiPlxuICogICAgICAgICA8ZGl2PlxuICogICAgICAgICAgIHtcIkknbGwgcmVjZWl2ZSBteS1ub2RlLSogY2xhc3Nlc1wifVxuICogICAgICAgICA8L2Rpdj5cbiAqICAgICAgIDwvQ1NTVHJhbnNpdGlvbj5cbiAqICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIG9uQ2xpY2s9eygpID0+IHNldEluUHJvcCh0cnVlKX0+XG4gKiAgICAgICAgIENsaWNrIHRvIEVudGVyXG4gKiAgICAgICA8L2J1dHRvbj5cbiAqICAgICA8L2Rpdj5cbiAqICAgKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIFdoZW4gdGhlIGBpbmAgcHJvcCBpcyBzZXQgdG8gYHRydWVgLCB0aGUgY2hpbGQgY29tcG9uZW50IHdpbGwgZmlyc3QgcmVjZWl2ZVxuICogdGhlIGNsYXNzIGBleGFtcGxlLWVudGVyYCwgdGhlbiB0aGUgYGV4YW1wbGUtZW50ZXItYWN0aXZlYCB3aWxsIGJlIGFkZGVkIGluXG4gKiB0aGUgbmV4dCB0aWNrLiBgQ1NTVHJhbnNpdGlvbmAgW2ZvcmNlcyBhXG4gKiByZWZsb3ddKGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdGpzL3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvYmxvYi81MDA3MzAzZTcyOWE3NGJlNjZhMjFjM2UyMjA1ZTQ5MTY4MjE1MjRiL3NyYy9DU1NUcmFuc2l0aW9uLmpzI0wyMDgtTDIxNSlcbiAqIGJldHdlZW4gYmVmb3JlIGFkZGluZyB0aGUgYGV4YW1wbGUtZW50ZXItYWN0aXZlYC4gVGhpcyBpcyBhbiBpbXBvcnRhbnQgdHJpY2tcbiAqIGJlY2F1c2UgaXQgYWxsb3dzIHVzIHRvIHRyYW5zaXRpb24gYmV0d2VlbiBgZXhhbXBsZS1lbnRlcmAgYW5kXG4gKiBgZXhhbXBsZS1lbnRlci1hY3RpdmVgIGV2ZW4gdGhvdWdoIHRoZXkgd2VyZSBhZGRlZCBpbW1lZGlhdGVseSBvbmUgYWZ0ZXJcbiAqIGFub3RoZXIuIE1vc3Qgbm90YWJseSwgdGhpcyBpcyB3aGF0IG1ha2VzIGl0IHBvc3NpYmxlIGZvciB1cyB0byBhbmltYXRlXG4gKiBfYXBwZWFyYW5jZV8uXG4gKlxuICogYGBgY3NzXG4gKiAubXktbm9kZS1lbnRlciB7XG4gKiAgIG9wYWNpdHk6IDA7XG4gKiB9XG4gKiAubXktbm9kZS1lbnRlci1hY3RpdmUge1xuICogICBvcGFjaXR5OiAxO1xuICogICB0cmFuc2l0aW9uOiBvcGFjaXR5IDIwMG1zO1xuICogfVxuICogLm15LW5vZGUtZXhpdCB7XG4gKiAgIG9wYWNpdHk6IDE7XG4gKiB9XG4gKiAubXktbm9kZS1leGl0LWFjdGl2ZSB7XG4gKiAgIG9wYWNpdHk6IDA7XG4gKiAgIHRyYW5zaXRpb246IG9wYWNpdHkgMjAwbXM7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBgKi1hY3RpdmVgIGNsYXNzZXMgcmVwcmVzZW50IHdoaWNoIHN0eWxlcyB5b3Ugd2FudCB0byBhbmltYXRlICoqdG8qKi5cbiAqXG4gKiAqKk5vdGUqKjogSWYgeW91J3JlIHVzaW5nIHRoZVxuICogW2BhcHBlYXJgXShodHRwOi8vcmVhY3Rjb21tdW5pdHkub3JnL3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvdHJhbnNpdGlvbiNUcmFuc2l0aW9uLXByb3AtYXBwZWFyKVxuICogcHJvcCwgbWFrZSBzdXJlIHRvIGRlZmluZSBzdHlsZXMgZm9yIGAuYXBwZWFyLSpgIGNsYXNzZXMgYXMgd2VsbC5cbiAqL1xuXG5cbnZhciBDU1NUcmFuc2l0aW9uID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKENTU1RyYW5zaXRpb24sIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIENTU1RyYW5zaXRpb24oKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIF90aGlzID0gX1JlYWN0JENvbXBvbmVudC5jYWxsLmFwcGx5KF9SZWFjdCRDb21wb25lbnQsIFt0aGlzXS5jb25jYXQoYXJncykpIHx8IHRoaXM7XG4gICAgX3RoaXMuYXBwbGllZENsYXNzZXMgPSB7XG4gICAgICBhcHBlYXI6IHt9LFxuICAgICAgZW50ZXI6IHt9LFxuICAgICAgZXhpdDoge31cbiAgICB9O1xuXG4gICAgX3RoaXMub25FbnRlciA9IGZ1bmN0aW9uIChub2RlLCBhcHBlYXJpbmcpIHtcbiAgICAgIF90aGlzLnJlbW92ZUNsYXNzZXMobm9kZSwgJ2V4aXQnKTtcblxuICAgICAgX3RoaXMuYWRkQ2xhc3Mobm9kZSwgYXBwZWFyaW5nID8gJ2FwcGVhcicgOiAnZW50ZXInLCAnYmFzZScpO1xuXG4gICAgICBpZiAoX3RoaXMucHJvcHMub25FbnRlcikge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkVudGVyKG5vZGUsIGFwcGVhcmluZyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLm9uRW50ZXJpbmcgPSBmdW5jdGlvbiAobm9kZSwgYXBwZWFyaW5nKSB7XG4gICAgICB2YXIgdHlwZSA9IGFwcGVhcmluZyA/ICdhcHBlYXInIDogJ2VudGVyJztcblxuICAgICAgX3RoaXMuYWRkQ2xhc3Mobm9kZSwgdHlwZSwgJ2FjdGl2ZScpO1xuXG4gICAgICBpZiAoX3RoaXMucHJvcHMub25FbnRlcmluZykge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkVudGVyaW5nKG5vZGUsIGFwcGVhcmluZyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLm9uRW50ZXJlZCA9IGZ1bmN0aW9uIChub2RlLCBhcHBlYXJpbmcpIHtcbiAgICAgIHZhciB0eXBlID0gYXBwZWFyaW5nID8gJ2FwcGVhcicgOiAnZW50ZXInO1xuXG4gICAgICBfdGhpcy5yZW1vdmVDbGFzc2VzKG5vZGUsIHR5cGUpO1xuXG4gICAgICBfdGhpcy5hZGRDbGFzcyhub2RlLCB0eXBlLCAnZG9uZScpO1xuXG4gICAgICBpZiAoX3RoaXMucHJvcHMub25FbnRlcmVkKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uRW50ZXJlZChub2RlLCBhcHBlYXJpbmcpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5vbkV4aXQgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgX3RoaXMucmVtb3ZlQ2xhc3Nlcyhub2RlLCAnYXBwZWFyJyk7XG5cbiAgICAgIF90aGlzLnJlbW92ZUNsYXNzZXMobm9kZSwgJ2VudGVyJyk7XG5cbiAgICAgIF90aGlzLmFkZENsYXNzKG5vZGUsICdleGl0JywgJ2Jhc2UnKTtcblxuICAgICAgaWYgKF90aGlzLnByb3BzLm9uRXhpdCkge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkV4aXQobm9kZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLm9uRXhpdGluZyA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBfdGhpcy5hZGRDbGFzcyhub2RlLCAnZXhpdCcsICdhY3RpdmUnKTtcblxuICAgICAgaWYgKF90aGlzLnByb3BzLm9uRXhpdGluZykge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkV4aXRpbmcobm9kZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLm9uRXhpdGVkID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIF90aGlzLnJlbW92ZUNsYXNzZXMobm9kZSwgJ2V4aXQnKTtcblxuICAgICAgX3RoaXMuYWRkQ2xhc3Mobm9kZSwgJ2V4aXQnLCAnZG9uZScpO1xuXG4gICAgICBpZiAoX3RoaXMucHJvcHMub25FeGl0ZWQpIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25FeGl0ZWQobm9kZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLmdldENsYXNzTmFtZXMgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgdmFyIGNsYXNzTmFtZXMgPSBfdGhpcy5wcm9wcy5jbGFzc05hbWVzO1xuICAgICAgdmFyIGlzU3RyaW5nQ2xhc3NOYW1lcyA9IHR5cGVvZiBjbGFzc05hbWVzID09PSAnc3RyaW5nJztcbiAgICAgIHZhciBwcmVmaXggPSBpc1N0cmluZ0NsYXNzTmFtZXMgJiYgY2xhc3NOYW1lcyA/IGNsYXNzTmFtZXMgKyBcIi1cIiA6ICcnO1xuICAgICAgdmFyIGJhc2VDbGFzc05hbWUgPSBpc1N0cmluZ0NsYXNzTmFtZXMgPyBcIlwiICsgcHJlZml4ICsgdHlwZSA6IGNsYXNzTmFtZXNbdHlwZV07XG4gICAgICB2YXIgYWN0aXZlQ2xhc3NOYW1lID0gaXNTdHJpbmdDbGFzc05hbWVzID8gYmFzZUNsYXNzTmFtZSArIFwiLWFjdGl2ZVwiIDogY2xhc3NOYW1lc1t0eXBlICsgXCJBY3RpdmVcIl07XG4gICAgICB2YXIgZG9uZUNsYXNzTmFtZSA9IGlzU3RyaW5nQ2xhc3NOYW1lcyA/IGJhc2VDbGFzc05hbWUgKyBcIi1kb25lXCIgOiBjbGFzc05hbWVzW3R5cGUgKyBcIkRvbmVcIl07XG4gICAgICByZXR1cm4ge1xuICAgICAgICBiYXNlQ2xhc3NOYW1lOiBiYXNlQ2xhc3NOYW1lLFxuICAgICAgICBhY3RpdmVDbGFzc05hbWU6IGFjdGl2ZUNsYXNzTmFtZSxcbiAgICAgICAgZG9uZUNsYXNzTmFtZTogZG9uZUNsYXNzTmFtZVxuICAgICAgfTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IENTU1RyYW5zaXRpb24ucHJvdG90eXBlO1xuXG4gIF9wcm90by5hZGRDbGFzcyA9IGZ1bmN0aW9uIGFkZENsYXNzKG5vZGUsIHR5cGUsIHBoYXNlKSB7XG4gICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMuZ2V0Q2xhc3NOYW1lcyh0eXBlKVtwaGFzZSArIFwiQ2xhc3NOYW1lXCJdO1xuXG4gICAgaWYgKHR5cGUgPT09ICdhcHBlYXInICYmIHBoYXNlID09PSAnZG9uZScpIHtcbiAgICAgIGNsYXNzTmFtZSArPSBcIiBcIiArIHRoaXMuZ2V0Q2xhc3NOYW1lcygnZW50ZXInKS5kb25lQ2xhc3NOYW1lO1xuICAgIH0gLy8gVGhpcyBpcyBmb3IgdG8gZm9yY2UgYSByZXBhaW50LFxuICAgIC8vIHdoaWNoIGlzIG5lY2Vzc2FyeSBpbiBvcmRlciB0byB0cmFuc2l0aW9uIHN0eWxlcyB3aGVuIGFkZGluZyBhIGNsYXNzIG5hbWUuXG5cblxuICAgIGlmIChwaGFzZSA9PT0gJ2FjdGl2ZScpIHtcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuICAgICAgbm9kZSAmJiBub2RlLnNjcm9sbFRvcDtcbiAgICB9XG5cbiAgICB0aGlzLmFwcGxpZWRDbGFzc2VzW3R5cGVdW3BoYXNlXSA9IGNsYXNzTmFtZTtcblxuICAgIF9hZGRDbGFzcyhub2RlLCBjbGFzc05hbWUpO1xuICB9O1xuXG4gIF9wcm90by5yZW1vdmVDbGFzc2VzID0gZnVuY3Rpb24gcmVtb3ZlQ2xhc3Nlcyhub2RlLCB0eXBlKSB7XG4gICAgdmFyIF90aGlzJGFwcGxpZWRDbGFzc2VzJCA9IHRoaXMuYXBwbGllZENsYXNzZXNbdHlwZV0sXG4gICAgICAgIGJhc2VDbGFzc05hbWUgPSBfdGhpcyRhcHBsaWVkQ2xhc3NlcyQuYmFzZSxcbiAgICAgICAgYWN0aXZlQ2xhc3NOYW1lID0gX3RoaXMkYXBwbGllZENsYXNzZXMkLmFjdGl2ZSxcbiAgICAgICAgZG9uZUNsYXNzTmFtZSA9IF90aGlzJGFwcGxpZWRDbGFzc2VzJC5kb25lO1xuICAgIHRoaXMuYXBwbGllZENsYXNzZXNbdHlwZV0gPSB7fTtcblxuICAgIGlmIChiYXNlQ2xhc3NOYW1lKSB7XG4gICAgICByZW1vdmVDbGFzcyhub2RlLCBiYXNlQ2xhc3NOYW1lKTtcbiAgICB9XG5cbiAgICBpZiAoYWN0aXZlQ2xhc3NOYW1lKSB7XG4gICAgICByZW1vdmVDbGFzcyhub2RlLCBhY3RpdmVDbGFzc05hbWUpO1xuICAgIH1cblxuICAgIGlmIChkb25lQ2xhc3NOYW1lKSB7XG4gICAgICByZW1vdmVDbGFzcyhub2RlLCBkb25lQ2xhc3NOYW1lKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgX3RoaXMkcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICBfID0gX3RoaXMkcHJvcHMuY2xhc3NOYW1lcyxcbiAgICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfdGhpcyRwcm9wcywgW1wiY2xhc3NOYW1lc1wiXSk7XG5cbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2l0aW9uLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICAgIG9uRW50ZXI6IHRoaXMub25FbnRlcixcbiAgICAgIG9uRW50ZXJlZDogdGhpcy5vbkVudGVyZWQsXG4gICAgICBvbkVudGVyaW5nOiB0aGlzLm9uRW50ZXJpbmcsXG4gICAgICBvbkV4aXQ6IHRoaXMub25FeGl0LFxuICAgICAgb25FeGl0aW5nOiB0aGlzLm9uRXhpdGluZyxcbiAgICAgIG9uRXhpdGVkOiB0aGlzLm9uRXhpdGVkXG4gICAgfSkpO1xuICB9O1xuXG4gIHJldHVybiBDU1NUcmFuc2l0aW9uO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5DU1NUcmFuc2l0aW9uLmRlZmF1bHRQcm9wcyA9IHtcbiAgY2xhc3NOYW1lczogJydcbn07XG5DU1NUcmFuc2l0aW9uLnByb3BUeXBlcyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IF9leHRlbmRzKHt9LCBUcmFuc2l0aW9uLnByb3BUeXBlcywge1xuICAvKipcbiAgICogVGhlIGFuaW1hdGlvbiBjbGFzc05hbWVzIGFwcGxpZWQgdG8gdGhlIGNvbXBvbmVudCBhcyBpdCBhcHBlYXJzLCBlbnRlcnMsXG4gICAqIGV4aXRzIG9yIGhhcyBmaW5pc2hlZCB0aGUgdHJhbnNpdGlvbi4gQSBzaW5nbGUgbmFtZSBjYW4gYmUgcHJvdmlkZWQgYW5kIGl0XG4gICAqIHdpbGwgYmUgc3VmZml4ZWQgZm9yIGVhY2ggc3RhZ2U6IGUuZy5cbiAgICpcbiAgICogYGNsYXNzTmFtZXM9XCJmYWRlXCJgIGFwcGxpZXMgYGZhZGUtYXBwZWFyYCwgYGZhZGUtYXBwZWFyLWFjdGl2ZWAsXG4gICAqIGBmYWRlLWFwcGVhci1kb25lYCwgYGZhZGUtZW50ZXJgLCBgZmFkZS1lbnRlci1hY3RpdmVgLCBgZmFkZS1lbnRlci1kb25lYCxcbiAgICogYGZhZGUtZXhpdGAsIGBmYWRlLWV4aXQtYWN0aXZlYCwgYW5kIGBmYWRlLWV4aXQtZG9uZWAuXG4gICAqXG4gICAqICoqTm90ZSoqOiBgZmFkZS1hcHBlYXItZG9uZWAgYW5kIGBmYWRlLWVudGVyLWRvbmVgIHdpbGwgX2JvdGhfIGJlIGFwcGxpZWQuXG4gICAqIFRoaXMgYWxsb3dzIHlvdSB0byBkZWZpbmUgZGlmZmVyZW50IGJlaGF2aW9yIGZvciB3aGVuIGFwcGVhcmluZyBpcyBkb25lIGFuZFxuICAgKiB3aGVuIHJlZ3VsYXIgZW50ZXJpbmcgaXMgZG9uZSwgdXNpbmcgc2VsZWN0b3JzIGxpa2VcbiAgICogYC5mYWRlLWVudGVyLWRvbmU6bm90KC5mYWRlLWFwcGVhci1kb25lKWAuIEZvciBleGFtcGxlLCB5b3UgY291bGQgYXBwbHkgYW5cbiAgICogZXBpYyBlbnRyYW5jZSBhbmltYXRpb24gd2hlbiBlbGVtZW50IGZpcnN0IGFwcGVhcnMgaW4gdGhlIERPTSB1c2luZ1xuICAgKiBbQW5pbWF0ZS5jc3NdKGh0dHBzOi8vZGFuZWRlbi5naXRodWIuaW8vYW5pbWF0ZS5jc3MvKS4gT3RoZXJ3aXNlIHlvdSBjYW5cbiAgICogc2ltcGx5IHVzZSBgZmFkZS1lbnRlci1kb25lYCBmb3IgZGVmaW5pbmcgYm90aCBjYXNlcy5cbiAgICpcbiAgICogRWFjaCBpbmRpdmlkdWFsIGNsYXNzTmFtZXMgY2FuIGFsc28gYmUgc3BlY2lmaWVkIGluZGVwZW5kZW50bHkgbGlrZTpcbiAgICpcbiAgICogYGBganNcbiAgICogY2xhc3NOYW1lcz17e1xuICAgKiAgYXBwZWFyOiAnbXktYXBwZWFyJyxcbiAgICogIGFwcGVhckFjdGl2ZTogJ215LWFjdGl2ZS1hcHBlYXInLFxuICAgKiAgYXBwZWFyRG9uZTogJ215LWRvbmUtYXBwZWFyJyxcbiAgICogIGVudGVyOiAnbXktZW50ZXInLFxuICAgKiAgZW50ZXJBY3RpdmU6ICdteS1hY3RpdmUtZW50ZXInLFxuICAgKiAgZW50ZXJEb25lOiAnbXktZG9uZS1lbnRlcicsXG4gICAqICBleGl0OiAnbXktZXhpdCcsXG4gICAqICBleGl0QWN0aXZlOiAnbXktYWN0aXZlLWV4aXQnLFxuICAgKiAgZXhpdERvbmU6ICdteS1kb25lLWV4aXQnLFxuICAgKiB9fVxuICAgKiBgYGBcbiAgICpcbiAgICogSWYgeW91IHdhbnQgdG8gc2V0IHRoZXNlIGNsYXNzZXMgdXNpbmcgQ1NTIE1vZHVsZXM6XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGltcG9ydCBzdHlsZXMgZnJvbSAnLi9zdHlsZXMuY3NzJztcbiAgICogYGBgXG4gICAqXG4gICAqIHlvdSBtaWdodCB3YW50IHRvIHVzZSBjYW1lbENhc2UgaW4geW91ciBDU1MgZmlsZSwgdGhhdCB3YXkgY291bGQgc2ltcGx5XG4gICAqIHNwcmVhZCB0aGVtIGluc3RlYWQgb2YgbGlzdGluZyB0aGVtIG9uZSBieSBvbmU6XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGNsYXNzTmFtZXM9e3sgLi4uc3R5bGVzIH19XG4gICAqIGBgYFxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nIHwge1xuICAgKiAgYXBwZWFyPzogc3RyaW5nLFxuICAgKiAgYXBwZWFyQWN0aXZlPzogc3RyaW5nLFxuICAgKiAgYXBwZWFyRG9uZT86IHN0cmluZyxcbiAgICogIGVudGVyPzogc3RyaW5nLFxuICAgKiAgZW50ZXJBY3RpdmU/OiBzdHJpbmcsXG4gICAqICBlbnRlckRvbmU/OiBzdHJpbmcsXG4gICAqICBleGl0Pzogc3RyaW5nLFxuICAgKiAgZXhpdEFjdGl2ZT86IHN0cmluZyxcbiAgICogIGV4aXREb25lPzogc3RyaW5nLFxuICAgKiB9fVxuICAgKi9cbiAgY2xhc3NOYW1lczogY2xhc3NOYW1lc1NoYXBlLFxuXG4gIC8qKlxuICAgKiBBIGA8VHJhbnNpdGlvbj5gIGNhbGxiYWNrIGZpcmVkIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSAnZW50ZXInIG9yICdhcHBlYXInIGNsYXNzIGlzXG4gICAqIGFwcGxpZWQuXG4gICAqXG4gICAqIEB0eXBlIEZ1bmN0aW9uKG5vZGU6IEh0bWxFbGVtZW50LCBpc0FwcGVhcmluZzogYm9vbClcbiAgICovXG4gIG9uRW50ZXI6IFByb3BUeXBlcy5mdW5jLFxuXG4gIC8qKlxuICAgKiBBIGA8VHJhbnNpdGlvbj5gIGNhbGxiYWNrIGZpcmVkIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSAnZW50ZXItYWN0aXZlJyBvclxuICAgKiAnYXBwZWFyLWFjdGl2ZScgY2xhc3MgaXMgYXBwbGllZC5cbiAgICpcbiAgICogQHR5cGUgRnVuY3Rpb24obm9kZTogSHRtbEVsZW1lbnQsIGlzQXBwZWFyaW5nOiBib29sKVxuICAgKi9cbiAgb25FbnRlcmluZzogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIEEgYDxUcmFuc2l0aW9uPmAgY2FsbGJhY2sgZmlyZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlICdlbnRlcicgb3JcbiAgICogJ2FwcGVhcicgY2xhc3NlcyBhcmUgKipyZW1vdmVkKiogYW5kIHRoZSBgZG9uZWAgY2xhc3MgaXMgYWRkZWQgdG8gdGhlIERPTSBub2RlLlxuICAgKlxuICAgKiBAdHlwZSBGdW5jdGlvbihub2RlOiBIdG1sRWxlbWVudCwgaXNBcHBlYXJpbmc6IGJvb2wpXG4gICAqL1xuICBvbkVudGVyZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gIC8qKlxuICAgKiBBIGA8VHJhbnNpdGlvbj5gIGNhbGxiYWNrIGZpcmVkIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSAnZXhpdCcgY2xhc3MgaXNcbiAgICogYXBwbGllZC5cbiAgICpcbiAgICogQHR5cGUgRnVuY3Rpb24obm9kZTogSHRtbEVsZW1lbnQpXG4gICAqL1xuICBvbkV4aXQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gIC8qKlxuICAgKiBBIGA8VHJhbnNpdGlvbj5gIGNhbGxiYWNrIGZpcmVkIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSAnZXhpdC1hY3RpdmUnIGlzIGFwcGxpZWQuXG4gICAqXG4gICAqIEB0eXBlIEZ1bmN0aW9uKG5vZGU6IEh0bWxFbGVtZW50KVxuICAgKi9cbiAgb25FeGl0aW5nOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogQSBgPFRyYW5zaXRpb24+YCBjYWxsYmFjayBmaXJlZCBpbW1lZGlhdGVseSBhZnRlciB0aGUgJ2V4aXQnIGNsYXNzZXNcbiAgICogYXJlICoqcmVtb3ZlZCoqIGFuZCB0aGUgYGV4aXQtZG9uZWAgY2xhc3MgaXMgYWRkZWQgdG8gdGhlIERPTSBub2RlLlxuICAgKlxuICAgKiBAdHlwZSBGdW5jdGlvbihub2RlOiBIdG1sRWxlbWVudClcbiAgICovXG4gIG9uRXhpdGVkOiBQcm9wVHlwZXMuZnVuY1xufSkgOiB7fTtcbmV4cG9ydCBkZWZhdWx0IENTU1RyYW5zaXRpb247IiwiaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgUHJvcFR5cGVzICBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCAgICAgIGZyb20gJ3JlYWN0JztcblxuLy8gVE9ETyByZW1vdmUgdGhpcyBmaWxlIGVudGlyZWx5IHdoZW4gaWNvbiBjb21wb25lbnQgaXMgcmVhZHkuXG5jb25zdCBJY29uQXJyb3cgPSAoeyBjbGFzc05hbWUsIGNsYXNzTmFtZVBhdGggfSkgPT4gKFxuICAgIDxzdmcgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdpbmxpbmUtaWNvbicsIGNsYXNzTmFtZSl9IHdpZHRoPScxNicgaGVpZ2h0PScxNic+XG4gICAgICAgIDxwYXRoXG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoY2xhc3NOYW1lUGF0aCwgJ2NvbG9yMS1maWxsJyl9XG4gICAgICAgICAgICBmaWxsPSdyZ2JhKDAsIDAsIDAsIDAuOCknXG4gICAgICAgICAgICBmaWxsUnVsZT0nbm9uemVybydcbiAgICAgICAgICAgIGQ9J00xMy4xNjQgNS4xM2EuNS41IDAgMSAxIC42NzIuNzRsLTUuNSA1YS41LjUgMCAwIDEtLjY3MiAwbC01LjUtNWEuNS41IDAgMCAxIC42NzItLjc0TDggOS44MjRsNS4xNjQtNC42OTR6J1xuICAgICAgICAvPlxuICAgIDwvc3ZnPlxuKTtcblxuSWNvbkFycm93LnByb3BUeXBlcyA9IHtcbiAgICBjbGFzc05hbWUgICAgOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGNsYXNzTmFtZVBhdGg6IFByb3BUeXBlcy5zdHJpbmcsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBJY29uQXJyb3c7XG4iLCJpbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgZ2V0RGlzcGxheVRleHQgPSAobGlzdCwgdmFsdWUpID0+IHtcbiAgICBjb25zdCBmaW5kSW5BcnJheSA9IChhcnJfbGlzdCkgPT4gKGFycl9saXN0LmZpbmQoaXRlbSA9PiBpdGVtLnZhbHVlID09PSB2YWx1ZSkgfHwge30pLnRleHQ7XG4gICAgbGV0IHRleHQgPSAnJztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShsaXN0KSkge1xuICAgICAgICB0ZXh0ID0gZmluZEluQXJyYXkobGlzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgT2JqZWN0LmtleXMobGlzdCkuc29tZShrZXkgPT4ge1xuICAgICAgICAgICAgdGV4dCA9IGZpbmRJbkFycmF5KGxpc3Rba2V5XSk7XG4gICAgICAgICAgICByZXR1cm4gdGV4dDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0O1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEl0ZW1Gcm9tVmFsdWUgPSAobGlzdCwgdmFsdWUpID0+IHtcbiAgICBjb25zdCBmaW5kSW5BcnJheSA9IChhcnJfbGlzdCkgPT4gYXJyX2xpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS52YWx1ZSA9PT0gdmFsdWUpO1xuICAgIGxldCBpdGVtID0ge307XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobGlzdCkpIHtcbiAgICAgICAgaXRlbSA9IHsgbnVtYmVyOiBmaW5kSW5BcnJheShsaXN0KSwgbGVuZ3RoOiBsaXN0Lmxlbmd0aCB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGxpc3QpLnNvbWUoa2V5ID0+IHtcbiAgICAgICAgICAgIGl0ZW0gPSB7IG51bWJlcjogZmluZEluQXJyYXkobGlzdFtrZXldKSwgbGVuZ3RoOiBsaXN0W2tleV0ubGVuZ3RoIH07XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBpdGVtO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFZhbHVlRnJvbUluZGV4ID0gKGxpc3QsIGluZGV4KSA9PiB7XG4gICAgY29uc3QgZmluZEluQXJyYXkgPSAoYXJyX2xpc3QpID0+IGFycl9saXN0W2luZGV4XTtcbiAgICBsZXQgcmVzdWx0O1xuICAgIGlmIChBcnJheS5pc0FycmF5KGxpc3QpKSB7XG4gICAgICAgIHJlc3VsdCA9IGZpbmRJbkFycmF5KGxpc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGxpc3QpLnNvbWUoa2V5ID0+IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZpbmRJbkFycmF5KGxpc3Rba2V5XSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC52YWx1ZTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRQcmV2SW5kZXggPSAoaW5kZXgsIGxlbmd0aCkgPT4ge1xuICAgIGNvbnN0IHByZXZfaW5kZXggPSAoaW5kZXggLSAxKSA8IDAgPyAobGVuZ3RoIC0gMSkgOiBpbmRleCAtIDE7XG4gICAgcmV0dXJuIHByZXZfaW5kZXg7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0TmV4dEluZGV4ID0gKGluZGV4LCBsZW5ndGgpID0+IHtcbiAgICBjb25zdCBuZXh0X2luZGV4ID0gKGluZGV4ICsgMSkgPT09IGxlbmd0aCA/IDAgOiBpbmRleCArIDE7XG4gICAgcmV0dXJuIG5leHRfaW5kZXg7XG59O1xuXG5leHBvcnQgY29uc3QgbGlzdFByb3BUeXBlID0gKCkgPT4gUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgZGlzYWJsZWQgICA6IFByb3BUeXBlcy5ib29sLFxuICAgICAgICBoYXNfdG9vbHRpcDogUHJvcFR5cGVzLmJvb2wsXG4gICAgICAgIHRleHQgICAgICAgOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICB0b29sdGlwICAgIDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgdmFsdWUgICAgICA6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgICAgUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgICAgIFByb3BUeXBlcy5udW1iZXIsXG4gICAgICAgIF0pLFxuICAgIH0pKSxcbiAgICBQcm9wVHlwZXMub2JqZWN0LFxuXSk7XG4iLCJpbXBvcnQgY2xhc3NOYW1lcyAgICAgICAgICBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBQcm9wVHlwZXMgICAgICAgICAgIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0ICAgICAgICAgICAgICAgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFBvcG92ZXIgICAgICAgICAgICAgZnJvbSAnQ29tcG9uZW50cy9wb3BvdmVyJztcblxuY29uc3QgSXRlbXMgPSAoe1xuICAgIGluZGV4LFxuICAgIGhhbmRsZVNlbGVjdCxcbiAgICBoYXNfc3ltYm9sLFxuICAgIGl0ZW1zLFxuICAgIG5hbWUsXG4gICAgdmFsdWUsXG59KSA9PiAgaXRlbXMubWFwKChpdGVtLCBpZHgpID0+IHtcbiAgICBjb25zdCBzeW1ib2xfdHlwZV9jbGFzc19uYW1lID0gaXRlbS50ZXh0ID8gYHN5bWJvbHMtLSR7KGl0ZW0udGV4dCkudG9Mb3dlckNhc2UoKX1gIDogJyc7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXG4gICAgICAgICAgICAgICAgJ2RjLWxpc3RfX2l0ZW0nLFxuICAgICAgICAgICAgICAgIHsgJ2RjLWxpc3RfX2l0ZW0tLWhpZ2hsaWdodGVkJzogaWR4ID09PSBpbmRleCB9LFxuICAgICAgICAgICAgICAgIHsgJ2RjLWxpc3RfX2l0ZW0tLXNlbGVjdGVkJzogdmFsdWUgPT09IGl0ZW0udmFsdWUgfSxcbiAgICAgICAgICAgICAgICB7ICdkYy1saXN0X19pdGVtLS1kaXNhYmxlZCc6IGl0ZW0uZGlzYWJsZWQgfVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG5hbWU9e25hbWV9XG4gICAgICAgICAgICB2YWx1ZT17aXRlbS52YWx1ZX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e2l0ZW0uZGlzYWJsZWQgPyBudWxsIDogaGFuZGxlU2VsZWN0LmJpbmQobnVsbCwgaXRlbSl9XG4gICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgPlxuICAgICAgICAgICAgeyEhaGFzX3N5bWJvbCAmJiBpdGVtLmhhc190b29sdGlwICYmXG4gICAgICAgICAgICAgICAgPFBvcG92ZXJcbiAgICAgICAgICAgICAgICAgICAgYWxpZ25tZW50PSdsZWZ0J1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlPXtpdGVtLnRvb2x0aXB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzeW1ib2xzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGMtbGlzdF9faXRlbS1zeW1ib2wnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bWJvbF90eXBlX2NsYXNzX25hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Qb3BvdmVyPlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB7ISFoYXNfc3ltYm9sICYmICFpdGVtLmhhc190b29sdGlwICYmXG4gICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3N5bWJvbHMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RjLWxpc3RfX2l0ZW0tdGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2xfdHlwZV9jbGFzc19uYW1lLFxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHshaGFzX3N5bWJvbCAmJlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nZGMtbGlzdF9faXRlbS10ZXh0Jz57aXRlbS50ZXh0fTwvc3Bhbj5cbiAgICAgICAgICAgIH1cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn0pO1xuXG5JdGVtcy5wcm9wVHlwZXMgPSB7XG4gICAgaGFuZGxlU2VsZWN0OiBQcm9wVHlwZXMuZnVuYyxcbiAgICBoYXNfc3ltYm9sICA6IFByb3BUeXBlcy5ib29sLFxuICAgIG5hbWUgICAgICAgIDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICB2YWx1ZSAgICAgICA6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICBQcm9wVHlwZXMubnVtYmVyLFxuICAgICAgICBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIF0pLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgSXRlbXM7XG4iLCJpbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0ICAgICBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IE5hdGl2ZVNlbGVjdCA9ICh7XG4gICAgbmFtZSxcbiAgICBsaXN0LFxuICAgIHZhbHVlLFxuICAgIG9uQ2hhbmdlLFxufSkgPT4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSduYXRpdmUtc2VsZWN0IG5hdGl2ZS1zZWxlY3RfX3dyYXBwZXInPlxuICAgICAgICA8c2VsZWN0IGNsYXNzTmFtZT0nc2VsZWN0IG5hdGl2ZS1zZWxlY3RfX3NlbGVjdCcgbmFtZT17bmFtZX0gdmFsdWU9e3ZhbHVlfSBvbkNoYW5nZT17b25DaGFuZ2V9PlxuICAgICAgICAgICAge0FycmF5LmlzQXJyYXkobGlzdCkgP1xuICAgICAgICAgICAgICAgIGxpc3QubWFwKChpdGVtLCBpZHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2lkeH0gdmFsdWU9e2l0ZW0udmFsdWV9PntpdGVtLnRleHR9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMobGlzdCkubWFwKGtleSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudCBrZXk9e2tleX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0Z3JvdXAgbGFiZWw9e2tleX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpc3Rba2V5XS5tYXAoKGl0ZW0sIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17aWR4fSB2YWx1ZT17aXRlbS52YWx1ZX0+e2l0ZW0udGV4dH08L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0Z3JvdXA+XG4gICAgICAgICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgKSl9XG4gICAgICAgIDwvc2VsZWN0PlxuICAgIDwvZGl2PlxuKTtcblxuTmF0aXZlU2VsZWN0LnByb3BUeXBlcyA9IHtcbiAgICBsaXN0OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgUHJvcFR5cGVzLm9iamVjdCxcbiAgICAgICAgUHJvcFR5cGVzLmFycmF5LFxuICAgIF0pLFxuICAgIG5hbWUgICAgOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICB2YWx1ZSAgIDogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgIFByb3BUeXBlcy5udW1iZXIsXG4gICAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgXSksXG59O1xuXG5leHBvcnQgZGVmYXVsdCBOYXRpdmVTZWxlY3Q7XG4iLCJpbXBvcnQgUHJvcFR5cGVzICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gICAgICAgICAgICAgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgZ2V0RGlzcGxheVRleHQsIGxpc3RQcm9wVHlwZSB9IGZyb20gJy4vZHJvcGRvd24nO1xuXG5jbGFzcyBTeW1ib2xTcGFuIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICByZW5kZXIgKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5oYXNfc3ltYm9sKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9e3RoaXMucHJvcHMubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMudmFsdWV9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHN5bWJvbHMgZGMtZHJvcGRvd25fX2Rpc3BsYXktc3ltYm9sIHN5bWJvbHMtLSR7KHRoaXMucHJvcHMudmFsdWUgfHwgJycpLnRvTG93ZXJDYXNlKCl9YH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICBuYW1lPXt0aGlzLnByb3BzLm5hbWV9XG4gICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMudmFsdWV9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdkYy1kcm9wZG93bl9fZGlzcGxheS10ZXh0J1xuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtnZXREaXNwbGF5VGV4dCh0aGlzLnByb3BzLmxpc3QsIHRoaXMucHJvcHMudmFsdWUpfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICApO1xuXG4gICAgfVxufVxuXG5TeW1ib2xTcGFuLnByb3BUeXBlcyA9IHtcbiAgICBoYXNfc3ltYm9sOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBsaXN0ICAgICAgOiBsaXN0UHJvcFR5cGUoKSxcbiAgICBuYW1lICAgICAgOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHZhbHVlICAgICA6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBQcm9wVHlwZXMubnVtYmVyLFxuICAgICAgICBQcm9wVHlwZXMuYm9vbCxcbiAgICBdKSxcbn07XG5leHBvcnQgZGVmYXVsdCBTeW1ib2xTcGFuO1xuIiwiaW1wb3J0IGNsYXNzTmFtZXMgICAgICAgIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFByb3BUeXBlcyAgICAgICAgIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0ICAgICAgICAgICAgIGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IENTU1RyYW5zaXRpb24gfSBmcm9tICdyZWFjdC10cmFuc2l0aW9uLWdyb3VwJztcbmltcG9ydCB7IFNjcm9sbGJhcnMgfSAgICBmcm9tICd0dC1yZWFjdC1jdXN0b20tc2Nyb2xsYmFycyc7XG5pbXBvcnQgSWNvbiAgICAgICAgICAgICAgZnJvbSAnQ29tcG9uZW50cy9pY29uLWFycm93LmpzeCc7XG5pbXBvcnQge1xuICAgIGdldEl0ZW1Gcm9tVmFsdWUsXG4gICAgZ2V0VmFsdWVGcm9tSW5kZXgsXG4gICAgZ2V0UHJldkluZGV4LFxuICAgIGdldE5leHRJbmRleCxcbiAgICBsaXN0UHJvcFR5cGUsXG59ICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi9kcm9wZG93bic7XG5pbXBvcnQgSXRlbXMgICAgICAgICAgICAgZnJvbSAnLi9pdGVtcy5qc3gnO1xuaW1wb3J0IE5hdGl2ZVNlbGVjdCAgICAgIGZyb20gJy4vbmF0aXZlLXNlbGVjdC5qc3gnO1xuaW1wb3J0IFN5bWJvbFNwYW4gICAgICAgIGZyb20gJy4vc3ltYm9sLXNwYW4uanN4JztcblxuY2xhc3MgRHJvcGRvd24gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBsaXN0X3JlZiA9IFJlYWN0LmNyZWF0ZVJlZigpO1xuXG4gICAgc3RhdGUgPSB7XG4gICAgICAgIGN1cnJfaW5kZXggICAgIDogZ2V0SXRlbUZyb21WYWx1ZSh0aGlzLnByb3BzLmxpc3QsIHRoaXMucHJvcHMudmFsdWUpLm51bWJlcixcbiAgICAgICAgaXNfbGlzdF92aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgbGlzdF93aWR0aCAgICAgOiAwLFxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIG9mZnNldCBmb3IgdGhlIGRyb3Bkb3duIGxpc3QgYmFzZWQgb24gaXRzIHdpZHRoXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHt7dHJhbnNmb3JtOiBzdHJpbmd9fVxuICAgICAqL1xuICAgIGdldCBjb21wdXRlZF9vZmZzZXRfbGVmdCAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUzZChjYWxjKC0ke3RoaXMuc3RhdGUubGlzdF93aWR0aH1weCAtIDEycHgpLCAwLCAwcHgpYCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBnZXQgaXNfc2luZ2xlX29wdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHRoaXMucHJvcHMubGlzdCkgP1xuICAgICAgICAgICAgKHRoaXMucHJvcHMubGlzdC5sZW5ndGggPCAyKSA6XG4gICAgICAgICAgICAoT2JqZWN0LmtleXModGhpcy5wcm9wcy5saXN0KS5sZW5ndGggPCAyKTtcbiAgICB9XG5cbiAgICBnZXQgY29udGFpbmVyX2NsYXNzX25hbWUgKCkge1xuICAgICAgICByZXR1cm4gY2xhc3NOYW1lcygnZGMtZHJvcGRvd24tY29udGFpbmVyJyxcbiAgICAgICAgICAgIHRoaXMucHJvcHMuY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAgICAgJ2RjLWRyb3Bkb3duLS1sZWZ0JyAgICA6IHRoaXMucHJvcHMuaXNfYWxpZ25tZW50X2xlZnQsXG4gICAgICAgICAgICAgICAgJ2RjLWRyb3Bkb3duLS1zaG93JyAgICA6IHRoaXMuc3RhdGUuaXNfbGlzdF92aXNpYmxlLFxuICAgICAgICAgICAgICAgICdkYy1kcm9wZG93bi0tZGlzYWJsZWQnOiB0aGlzLmlzX3NpbmdsZV9vcHRpb24sXG4gICAgICAgICAgICB9LFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGdldCBkcm9wZG93bl9kaXNwbGF5X2NsYXNzX25hbWUgKCkge1xuICAgICAgICByZXR1cm4gY2xhc3NOYW1lcygnZGMtZHJvcGRvd25fX2Rpc3BsYXknLFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jbGFzc05hbWVEaXNwbGF5LCB7XG4gICAgICAgICAgICAgICAgJ2RjLWRyb3Bkb3duX19kaXNwbGF5LS1jbGlja2VkJyAgIDogdGhpcy5zdGF0ZS5pc19saXN0X3Zpc2libGUsXG4gICAgICAgICAgICAgICAgJ2RjLWRyb3Bkb3duX19kaXNwbGF5LS1oYXMtc3ltYm9sJzogdGhpcy5wcm9wcy5oYXNfc3ltYm9sLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBnZXQgZHJvcGRvd25fbGlzdF9jbGFzc19uYW1lcyAoKSB7XG4gICAgICAgIHJldHVybiBjbGFzc05hbWVzKCdkYy1kcm9wZG93bl9fbGlzdCcsIHtcbiAgICAgICAgICAgICdkYy1kcm9wZG93bl9fbGlzdC0tbGVmdCc6IHRoaXMucHJvcHMuaXNfYWxpZ25tZW50X2xlZnQsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldCBsaXN0X2NsYXNzX25hbWVzICgpIHtcbiAgICAgICAgcmV0dXJuIGNsYXNzTmFtZXMoJ2RjLWxpc3QnLCB7XG4gICAgICAgICAgICAnZGMtbGlzdC0tbGVmdCc6IHRoaXMucHJvcHMuaXNfYWxpZ25tZW50X2xlZnQsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldCB0cmFuc2l0aW9uX2NsYXNzX25hbWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVudGVyOiBgZGMtZHJvcGRvd25fX2xpc3QtLWVudGVyJHt0aGlzLnByb3BzLmlzX2FsaWdubWVudF9sZWZ0XG4gICAgICAgICAgICAgICAgPyAnIGRjLWRyb3Bkb3duX19saXN0LS1sZWZ0LS1lbnRlcidcbiAgICAgICAgICAgICAgICA6ICcnfWAsXG4gICAgICAgICAgICBlbnRlckRvbmU6IGBkYy1kcm9wZG93bl9fbGlzdC0tZW50ZXItZG9uZSR7dGhpcy5wcm9wcy5pc19hbGlnbm1lbnRfbGVmdFxuICAgICAgICAgICAgICAgID8gJyBkYy1kcm9wZG93bl9fbGlzdC0tbGVmdC0tZW50ZXItZG9uZSdcbiAgICAgICAgICAgICAgICA6ICcnfWAsXG4gICAgICAgICAgICBleGl0OiBgZGMtZHJvcGRvd25fX2xpc3QtLWV4aXQke3RoaXMucHJvcHMuaXNfYWxpZ25tZW50X2xlZnRcbiAgICAgICAgICAgICAgICA/ICcgZGMtZHJvcGRvd25fX2xpc3QtLWxlZnQtLWV4aXQnXG4gICAgICAgICAgICAgICAgOiAnJ31gLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBJbml0aWFsIFN0YXRlIGJhc2VkIG9uIHByb3BzXG5cdCAqXG4gICAgICogQHBhcmFtIHByb3BzXG4gICAgICogQHBhcmFtIHN0YXRlXG4gICAgICogQHJldHVybiB7e2N1cnJfaW5kZXg6ICosIGlzX2xpc3RfdmlzaWJsZTogYm9vbGVhbn19XG4gICAgICovXG4gICAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyAocHJvcHMsIHN0YXRlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjdXJyX2luZGV4ICAgICA6IGdldEl0ZW1Gcm9tVmFsdWUocHJvcHMubGlzdCwgcHJvcHMudmFsdWUpLm51bWJlcixcbiAgICAgICAgICAgIGlzX2xpc3RfdmlzaWJsZTogISFzdGF0ZSAmJiAhIXN0YXRlLmlzX2xpc3RfdmlzaWJsZSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAnbW91c2Vkb3duJyxcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2xpY2tPdXRzaWRlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhc3NpdmU6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVDbGlja091dHNpZGUpO1xuICAgIH1cblxuICAgIGhhbmRsZVNlbGVjdCA9IChpdGVtKSA9PiB7XG4gICAgICAgIGlmIChpdGVtLnZhbHVlICE9PSB0aGlzLnByb3BzLnZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKFxuICAgICAgICAgICAgICAgIHsgdGFyZ2V0OiB7IG5hbWU6IHRoaXMucHJvcHMubmFtZSwgdmFsdWU6IGl0ZW0udmFsdWUgfSB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsZVZpc2liaWxpdHkoKTtcbiAgICB9O1xuXG4gICAgc2V0V3JhcHBlclJlZiA9IChub2RlKSA9PiB0aGlzLndyYXBwZXJfcmVmID0gbm9kZTtcblxuICAgIGhhbmRsZUNsaWNrT3V0c2lkZSA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLndyYXBwZXJfcmVmICYmICF0aGlzLndyYXBwZXJfcmVmLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkgJiZcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNfbGlzdF92aXNpYmxlXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzX2xpc3RfdmlzaWJsZTogZmFsc2UgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaGFuZGxlVmlzaWJpbGl0eSA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgoc3RhdGUpID0+ICh7IGlzX2xpc3RfdmlzaWJsZTogIXN0YXRlLmlzX2xpc3RfdmlzaWJsZSB9KSk7XG4gICAgfTtcblxuICAgIGhhbmRsZVRvZ2dsZSA9ICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc19saXN0X3Zpc2libGUgJiYgdGhpcy5wcm9wcy52YWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UoXG4gICAgICAgICAgICAgICAgeyB0YXJnZXQ6IHsgbmFtZTogdGhpcy5wcm9wcy5uYW1lLCB2YWx1ZSB9IH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlVmlzaWJpbGl0eSgpO1xuICAgIH07XG5cbiAgICBvbktleVByZXNzZWQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuaXNfc2luZ2xlX29wdGlvbikgcmV0dXJuO1xuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gOSkgeyAvLyBUYWIgaXMgcHJlc3NlZFxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNfbGlzdF92aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVWaXNpYmlsaXR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBnZXRJdGVtRnJvbVZhbHVlKHRoaXMucHJvcHMubGlzdCwgdGhpcy5wcm9wcy52YWx1ZSk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0VmFsdWVGcm9tSW5kZXgodGhpcy5wcm9wcy5saXN0LCB0aGlzLnN0YXRlLmN1cnJfaW5kZXgpO1xuXG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuICAgICAgICAgICAgY2FzZSAxMzogLy8gRW50ZXIgaXMgcHJlc3NlZFxuICAgICAgICAgICAgY2FzZSAzMjogLy8gU3BhY2UgaXMgcHJlc3NlZFxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzg6IC8vIFVwIEFycm93IGlzIHByZXNzZWRcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc19saXN0X3Zpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldl9pbmRleCA9IGdldFByZXZJbmRleChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuY3Vycl9pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGN1cnJfaW5kZXg6IHByZXZfaW5kZXggfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0MDogLy8gRG93biBBcnJvdyBpcyBwcmVzc2VkXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNfbGlzdF92aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRfaW5kZXggPSBnZXROZXh0SW5kZXgoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmN1cnJfaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBjdXJyX2luZGV4OiBuZXh0X2luZGV4IH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMucHJvcHMuaXNfYWxpZ25tZW50X2xlZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVWaXNpYmlsaXR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzNzogLy8gTGVmdCBhcnJvdyBpcyBwcmVzc2VkXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmlzX2xpc3RfdmlzaWJsZSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmlzX2FsaWdubWVudF9sZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlVmlzaWJpbGl0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzk6IC8vIFJpZ2h0IEFycm93IGlzIHByZXNzZWRcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc19saXN0X3Zpc2libGUgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5pc19hbGlnbm1lbnRfbGVmdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVZpc2liaWxpdHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRm9yIGNoYXIgcHJlc3Nlcywgd2UgZG8gYSBzZWFyY2ggZm9yIHRoZSBpdGVtOlxuICAgICAgICBpZiAoZXZlbnQua2V5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgY29uc3QgY2hhciAgICAgICA9IGV2ZW50LmtleS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgY29uc3QgZmlyc3RDaGFycyA9IHRoaXMucHJvcHMubGlzdC5tYXAoXG4gICAgICAgICAgICAgICAgeCA9PiB4LnRleHRbMF0udG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICBsZXQgaWR4O1xuICAgICAgICAgICAgLy8gVGFwcGluZyB0aGUgc2FtZSBjaGFyYWN0ZXIgYWdhaW4ganVtcHMgdG8gdGhlIG5leHQgbWF0Y2g6XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5jdXJyX2luZGV4KSB7XG4gICAgICAgICAgICAgICAgaWR4ID0gZmlyc3RDaGFycy5pbmRleE9mKGNoYXIsIHRoaXMuc3RhdGUuY3Vycl9pbmRleCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlkeCA9PT0gdW5kZWZpbmVkIHx8IGlkeCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBpZHggPSBmaXJzdENoYXJzLmluZGV4T2YoY2hhcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgY3Vycl9pbmRleDogaWR4IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIFVwb24gcmVuZGVyIHZpYSBjc3MgdHJhbnNpdGlvbiBncm91cCwgd2UgdXNlIHRoaXMgYXMgYSBjYWxsYmFjayB0byBzZXQgdGhlIHdpZHRoIG9mIHRoZSBkcm9wZG93biBsaXN0IGluIHRoZSBzdGF0ZVxuICAgIHNldExpc3RXaWR0aCA9ICgpID0+IHRoaXMuc2V0U3RhdGUoeyBsaXN0X3dpZHRoOiB0aGlzLmxpc3RfcmVmLmN1cnJlbnQub2Zmc2V0V2lkdGggfSk7XG5cbiAgICByZW5kZXIgKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5pc19uYXRpdmVwaWNrZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPE5hdGl2ZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBuYW1lPXt0aGlzLnByb3BzLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICBsaXN0PXt0aGlzLnByb3BzLmxpc3R9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uQ2hhbmdlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICByZWY9e3RoaXMuc2V0V3JhcHBlclJlZn1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3RoaXMuY29udGFpbmVyX2NsYXNzX25hbWV9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3RoaXMuZHJvcGRvd25fZGlzcGxheV9jbGFzc19uYW1lfVxuICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17dGhpcy5pc19zaW5nbGVfb3B0aW9uID8gJy0xJyA6ICcwJ31cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVWaXNpYmlsaXR5fVxuICAgICAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMub25LZXlQcmVzc2VkfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFN5bWJvbFNwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc19zeW1ib2w9e3RoaXMucHJvcHMuaGFzX3N5bWJvbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e3RoaXMucHJvcHMubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdD17dGhpcy5wcm9wcy5saXN0fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgIXRoaXMuaXNfc2luZ2xlX29wdGlvbiAmJiA8SWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbj0nSWNvbkFycm93J1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdkYy1kcm9wZG93bl9fc2VsZWN0LWFycm93Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYy1kcm9wZG93bl9fc2VsZWN0LWFycm93LS1sZWZ0JzogdGhpcy5wcm9wcy5pc19hbGlnbm1lbnRfbGVmdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA8Q1NTVHJhbnNpdGlvblxuICAgICAgICAgICAgICAgICAgICBpbj17dGhpcy5zdGF0ZS5pc19saXN0X3Zpc2libGV9XG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ9ezEwMH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lcz17dGhpcy50cmFuc2l0aW9uX2NsYXNzX25hbWVzfVxuICAgICAgICAgICAgICAgICAgICBvbkVudGVyZWQ9e3RoaXMuc2V0TGlzdFdpZHRofVxuICAgICAgICAgICAgICAgICAgICB1bm1vdW50T25FeGl0XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17dGhpcy5kcm9wZG93bl9saXN0X2NsYXNzX25hbWVzfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3RoaXMubGlzdF9jbGFzc19uYW1lc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e3RoaXMubGlzdF9yZWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3RoaXMucHJvcHMuaXNfYWxpZ25tZW50X2xlZnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmNvbXB1dGVkX29mZnNldF9sZWZ0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTY3JvbGxiYXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9IZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0hpZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0hlaWdodE1heD17MjAwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJUcmFja0hvcml6b250YWw9e3Byb3BzID0+IDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndHJhY2staG9yaXpvbnRhbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdub25lJyB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyVGh1bWJIb3Jpem9udGFsPXtwcm9wcyA9PiA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3RodW1iLWhvcml6b250YWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnbm9uZScgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QXJyYXkuaXNBcnJheSh0aGlzLnByb3BzLmxpc3QpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PXt0aGlzLnN0YXRlLmN1cnJfaW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlU2VsZWN0PXt0aGlzLmhhbmRsZVNlbGVjdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNfc3ltYm9sPXt0aGlzLnByb3BzLmhhc19zeW1ib2x9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM9e3RoaXMucHJvcHMubGlzdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXt0aGlzLnByb3BzLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMudmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnByb3BzLmxpc3QpLm1hcChrZXkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudCBrZXk9e2tleX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkYy1saXN0X19sYWJlbCc+e2tleX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleD17dGhpcy5zdGF0ZS5jdXJyX2luZGV4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlU2VsZWN0PXt0aGlzLmhhbmRsZVNlbGVjdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc19zeW1ib2w9e3RoaXMucHJvcHMuaGFzX3N5bWJvbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zPXt0aGlzLnByb3BzLmxpc3Rba2V5XX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e3RoaXMucHJvcHMubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TY3JvbGxiYXJzPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvQ1NTVHJhbnNpdGlvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cblxufVxuXG5Ecm9wZG93bi5wcm9wVHlwZXMgPSB7XG4gICAgY2xhc3NOYW1lICAgICAgICA6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY2xhc3NOYW1lRGlzcGxheSA6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgaGFzX3N5bWJvbCAgICAgICA6IFByb3BUeXBlcy5ib29sLFxuICAgIGlzX2FsaWdubWVudF9sZWZ0OiBQcm9wVHlwZXMuYm9vbCxcbiAgICBpc19uYXRpdmVwaWNrZXIgIDogUHJvcFR5cGVzLmJvb2wsXG4gICAgbGlzdCAgICAgICAgICAgICA6IGxpc3RQcm9wVHlwZSgpLFxuICAgIG5hbWUgICAgICAgICAgICAgOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIG9uQ2hhbmdlICAgICAgICAgOiBQcm9wVHlwZXMuZnVuYyxcbiAgICB2YWx1ZSAgICAgICAgICAgIDogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgIFByb3BUeXBlcy5udW1iZXIsXG4gICAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgXSksXG59O1xuXG5leHBvcnQgZGVmYXVsdCBEcm9wZG93bjtcbiIsImltcG9ydCAnLi9kcm9wZG93bi5zY3NzJztcbmltcG9ydCAnLi9saXN0LnNjc3MnO1xuXG5leHBvcnQgZGVmYXVsdCBmcm9tICcuL2Ryb3Bkb3duLmpzeCc7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUNKQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREE0SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREEyR0E7QUFDQTs7Ozs7QUNuV0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUZBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFGQTtBQUtBOztBQ3JCQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFEQTs7Ozs7QUN0REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUVBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBY0E7QUFDQTtBQUZBO0FBS0E7QUFEQTtBQVlBO0FBREE7QUFVQTtBQUFBO0FBSUE7QUFyREE7QUFDQTtBQXNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFVQTs7QUN0RUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBREE7QUFIQTtBQWJBO0FBQ0E7QUF5QkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQVBBO0FBYUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBU0E7Ozs7QUFyQkE7QUFDQTtBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFVQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3RDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUErRkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBckNBO0FBQ0E7QUFDQTtBQXVDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7Ozs7O0FBdEhBO0FBQ0E7QUFJQTtBQURBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTs7O0FBMkdBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFTQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFBQTtBQUtBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBQUE7QUFUQTtBQWlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUhBO0FBb0JBOzs7O0FBcFNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFHQTs7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7OztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQVBBO0FBV0E7QUFFQTs7Ozs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7OztBQW5GQTtBQUNBO0FBZ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFlQTs7QUNqVkE7QUFBQTtBQUNBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///43\n')}]).default},module.exports=I(__webpack_require__(111),__webpack_require__(229))},147:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=["even_odd","match_diff","over_under"],g=function(e){return r.includes(e)}},179:function(e,t,n){"use strict";n.r(t);var r=n(5),g=n.n(r),c=n(1),a=n.n(c),i=n(0),o=n.n(i),I=function(e){var t=e.className;return o.a.createElement("svg",{className:g()("inline-icon",t),width:"149",height:"16",viewBox:"0 0 149 16"},o.a.createElement("g",{fill:"none",fillRule:"nonzero"},o.a.createElement("path",{fill:"#21CE99",d:"M3.673.002V.02L9.78 7.945.004 15.868v.017h9.872a6.197 6.197 0 0 0 6.03-4.785l.817-3.533a6.177 6.177 0 0 0-1.191-5.229A6.204 6.204 0 0 0 10.695.002H3.673z"}),o.a.createElement("path",{fill:"#11825C",d:"M9.774 7.96l-4.295 7.925H0z"}),o.a.createElement("path",{className:"color3-fill",d:"M23.757.002h6.156c4.966 0 7.797 3.413 7.014 7.84v.045c-.784 4.44-4.825 7.893-9.79 7.893h-6.164L23.757.002zm3.929 12.64c2.845 0 5.103-1.92 5.596-4.71v-.045c.492-2.793-1.068-4.753-3.925-4.753h-2.685l-1.675 9.508h2.689zM41.637.002h11.92l-.545 3.096h-8.466l-.566 3.2h5.464l-.545 3.084h-5.465l-.585 3.316h8.578l-.545 3.084h-12.03zM64.996 10.138c2.137-.743 3.798-2.347 4.25-4.888v-.045c.262-1.493 0-2.726-.717-3.605C67.674.563 66.214 0 64.207 0H56.98l-2.779 15.77h3.476l2.234-12.638h3.453c1.693 0 2.597.766 2.334 2.253v.044c-.235 1.33-1.364 2.232-3.057 2.232h-2.619l3.782 8.106h4.062l-2.871-5.63zM73.694.002h3.476l-2.779 15.77h-3.476zM79.992.002h3.848l2.167 11.106L92.102.002h3.748l-9.193 15.883H83.57zM124.236 9.875c-.12-.004-.239.014-.352.051-.101.032-.197.076-.287.133a.775.775 0 0 0-.213.194l-.052.053v-.365h-.874v3.294h.874v-1.837a.722.722 0 0 1 .182-.52.584.584 0 0 1 .457-.181.522.522 0 0 1 .445.18c.112.15.167.335.156.521v1.863h.874v-2.097a1.298 1.298 0 0 0-.314-.924 1.156 1.156 0 0 0-.896-.365zM127.435 9.9a2.493 2.493 0 0 0-.678.08c-.187.053-.37.118-.55.194l-.05.028.234.701.064-.025c.144-.051.274-.105.428-.143.15-.038.303-.055.457-.051a.814.814 0 0 1 .535.155.497.497 0 0 1 .17.427 2.53 2.53 0 0 0-.3-.064 2.48 2.48 0 0 0-1.018.026 1.093 1.093 0 0 0-.428.213.945.945 0 0 0-.288.35 1.165 1.165 0 0 0-.103.482v-.002c-.001.158.034.314.103.456.066.125.155.236.263.327.11.093.239.16.378.194.148.044.301.066.455.066a1.38 1.38 0 0 0 .642-.143c.111-.06.217-.132.314-.213v.286h.855v-1.94a1.38 1.38 0 0 0-.365-1.03 1.524 1.524 0 0 0-1.118-.373zm-.144 2.723a.722.722 0 0 1-.39-.105.326.326 0 0 1-.144-.285v-.013a.343.343 0 0 1 .156-.299.893.893 0 0 1 .496-.117c.127 0 .254.012.378.038.105.026.195.039.274.064v.132a.445.445 0 0 1-.051.233.549.549 0 0 1-.159.183 1.07 1.07 0 0 1-.248.13 1.285 1.285 0 0 1-.312.039zM133.36 12.154l-.855-2.213h-.928l1.345 3.217a.602.602 0 0 1-.156.233.362.362 0 0 1-.214.066 1.013 1.013 0 0 1-.194-.026l-.197-.078-.064-.039-.301.664.053.025c.112.06.23.108.35.145.14.04.284.057.428.051.124.004.248-.013.366-.05.109-.04.21-.098.299-.171.096-.083.18-.18.248-.286.08-.138.151-.28.214-.427l1.282-3.332h-.9l-.776 2.22zM139.038 12.169a1.43 1.43 0 0 1-.353.273.876.876 0 0 1-1.235-.47 1.092 1.092 0 0 1-.066-.365v-.012c0-.242.083-.476.235-.664a.951.951 0 0 1 .26-.196.739.739 0 0 1 .34-.079.882.882 0 0 1 .428.105c.128.071.242.164.34.273l.053.053.548-.587-.039-.05a1.765 1.765 0 0 0-.536-.406 1.741 1.741 0 0 0-.77-.156c-.233 0-.464.049-.678.143a2.055 2.055 0 0 0-.55.365 1.55 1.55 0 0 0-.352.548 1.9 1.9 0 0 0-.13.663v.024c-.003.228.041.454.13.663.087.201.206.387.353.549.159.154.345.278.55.364.213.091.444.136.677.13.276.011.55-.047.797-.168.207-.115.392-.265.548-.444l.038-.05-.534-.524-.054.018zM142.888 10.383a1.71 1.71 0 0 0-.562-.365 1.741 1.741 0 0 0-.705-.13c-.468 0-.918.182-1.253.508a1.785 1.785 0 0 0-.366.548c-.089.21-.133.436-.13.663v.024c-.003.228.041.454.13.663.086.204.21.39.366.549a1.713 1.713 0 0 0 1.24.495c.242-.002.481-.05.705-.143.21-.083.4-.207.56-.365a1.69 1.69 0 0 0 .366-.548c.09-.21.134-.436.13-.664v-.013a1.612 1.612 0 0 0-.13-.663 1.35 1.35 0 0 0-.35-.56zm-1.255 2.163a.777.777 0 0 1-.35-.079 1.056 1.056 0 0 1-.289-.213.87.87 0 0 1-.182-.299 1.148 1.148 0 0 1-.066-.365v-.012c.002-.242.085-.477.235-.666.081-.078.173-.144.274-.194a.784.784 0 0 1 .366-.08c.126 0 .25.027.365.08.11.05.208.123.289.213a.766.766 0 0 1 .181.299c.042.117.064.24.067.365v.012a1.148 1.148 0 0 1-.067.365.87.87 0 0 1-.181.299.806.806 0 0 1-.276.196.797.797 0 0 1-.366.08zM148.487 10.214a1.13 1.13 0 0 0-.855-.339c-.23-.008-.456.05-.652.169-.153.09-.29.205-.406.339a1.046 1.046 0 0 0-.338-.34 1.193 1.193 0 0 0-.614-.168.906.906 0 0 0-.34.051.882.882 0 0 0-.273.133c-.078.052-.15.113-.214.181a.177.177 0 0 1-.053.051v-.35h-.888v3.294h.875v-1.837a.773.773 0 0 1 .17-.533.511.511 0 0 1 .428-.181.5.5 0 0 1 .428.168c.112.15.168.334.156.52v1.863h.874v-1.837a.729.729 0 0 1 .17-.533.571.571 0 0 1 .427-.181.514.514 0 0 1 .427.168c.116.153.171.343.156.534v1.862h.855v-2.084a1.396 1.396 0 0 0-.333-.95zM121.118 9.954h1v3.296h-1zM122.03 9.171a.48.48 0 0 0-.48-.482.489.489 0 0 0-.484.482.48.48 0 0 0 .483.482.473.473 0 0 0 .481-.482zM136.1 12.832a.482.482 0 1 0-.963 0 .482.482 0 0 0 .964 0zM120.4 11.23a1.229 1.229 0 0 0-.287-.235 1.183 1.183 0 0 0-.214-.104l-.051-.026.038-.026.118-.078a.97.97 0 0 0 .357-.5c.038-.122.056-.25.051-.377V9.87a1.053 1.053 0 0 0-.312-.768c-.274-.273-.667-.405-1.201-.405h-2.048v4.546h2.099c.233.002.466-.024.693-.077.19-.045.372-.124.534-.235.148-.106.268-.244.353-.405.082-.17.122-.357.117-.546v-.013a1.34 1.34 0 0 0-.064-.416.753.753 0 0 0-.184-.322zm-2.675-.691V9.485h1.082a.916.916 0 0 1 .55.143c.116.09.184.23.18.377v.013a.448.448 0 0 1-.213.427c-.179.101-.382.15-.588.143h-1.017v-.04l.006-.01zm2.06 1.354a.46.46 0 0 1-.213.427c-.184.101-.391.15-.6.143h-1.253v-1.12h1.186c.231-.014.462.035.667.143a.446.446 0 0 1 .214.427v-.02zM131.272 9.888a1.07 1.07 0 0 0-.744.213c-.124.1-.23.218-.314.352v-.495h-.875v3.294h.875V11.99a1.586 1.586 0 0 1 .079-.52.98.98 0 0 1 .213-.365.93.93 0 0 1 .719-.299h.102v-.9l-.055-.017zM109.189 12.503a.885.885 0 0 0 .428.628l-.09-.184s.17-.482-.338-.444z"}),o.a.createElement("path",{className:"color3-fill",d:"M113.888 7.893a4.667 4.667 0 0 0-6.59 0 4.644 4.644 0 0 0 0 6.577 4.667 4.667 0 0 0 6.59 0 4.657 4.657 0 0 0 0-6.577zm-.483 6.11c-.054.051-.105.103-.156.143-1.123.911-1.984.455-1.997.455-.588-.118-.877-.118-1.045-.214-.039-.028-.17-.104-.214-.079a.392.392 0 0 1-.456-.025l-.04-.04a.332.332 0 0 1-.064-.442c.038-.039-.039-.169-.039-.169s-.214-.326-.365-.523a1.58 1.58 0 0 1-.197-.64 2.45 2.45 0 0 1-.248-.352c-.038-.05-.092-.104-.13-.155a.6.6 0 0 1-.08-.092v-.026a.854.854 0 0 1 .261-.326c.054-.039.276-.169.276-.169a.456.456 0 0 1 .338-.196c.223-.013.446.023.654.105l.143.04c.235.077.443.169.614.233.11.052.223.096.34.132.286.077.808-.158.912-.262a.68.68 0 0 0 .261-.35.234.234 0 0 0-.066-.145.924.924 0 0 1-.103-.118l-.027-.025c-.496-.52-.404-.854-.404-.854a.69.69 0 0 0-.261-.546l-.026-.025-.013-.013c.249.071.502.128.757.168.112.023.227.027.34.013.26-.013.455-.025.468-.092a5.115 5.115 0 0 1-.678-.194c-.248-.091-.286-.104-.457-.17a3.853 3.853 0 0 1-.428-.169c.888.235 1.174.326 1.578.326.101.004.203-.005.301-.027.052-.013.236-.051.261-.118a1.555 1.555 0 0 1-.496-.076c-1.03-.34-1.122-.508-1.697-.73a4.783 4.783 0 0 0-.874-.273 2.011 2.011 0 0 0-.757 0c-.783-.184-.966-.17-1.202-.117a3.984 3.984 0 0 1 5.443 1.12l.013.025c.435.647.667 1.41.667 2.189a3.761 3.761 0 0 1-1.107 2.803zm-2.61-4.495c.241.1.427.3.508.549-.496.117-.391-.39-.391-.39l-.118-.159zM101.882.06h.319v15.77h-.319zM107.78 2.32c.233 0 .417-.058.552-.175a.568.568 0 0 0 .203-.45v-.01c0-.207-.068-.362-.205-.468-.137-.105-.32-.157-.55-.157h-.715v1.26h.715zM106.45.5h1.38c.203 0 .387.027.552.083.166.055.305.134.42.237.116.103.204.227.265.37.062.143.093.303.093.48v.01a1.075 1.075 0 0 1-.41.89c-.127.1-.275.176-.445.227-.17.052-.352.078-.545.078h-.695V4h-.615V.5zm5.02 2.995a1.154 1.154 0 0 0 .85-.363c.103-.111.184-.242.243-.392.058-.15.087-.31.087-.48v-.01c0-.17-.03-.33-.088-.482a1.185 1.185 0 0 0-.623-.663 1.146 1.146 0 0 0-.479-.1 1.154 1.154 0 0 0-.85.363 1.225 1.225 0 0 0-.242.392c-.059.15-.088.31-.088.48v.01c0 .17.03.33.088.482a1.185 1.185 0 0 0 .622.663c.147.067.307.1.48.1zm-.01.565c-.27 0-.517-.047-.74-.142a1.758 1.758 0 0 1-.95-.96 1.812 1.812 0 0 1-.135-.698v-.01c0-.247.045-.48.135-.698.09-.218.217-.41.38-.575a1.829 1.829 0 0 1 1.32-.537c.27 0 .517.047.74.143a1.758 1.758 0 0 1 .95.96c.09.218.135.45.135.697v.01c0 .247-.045.48-.135.697-.09.219-.217.41-.38.575a1.829 1.829 0 0 1-1.32.538zM113.77.5h.665l.835 2.595.86-2.605h.52l.86 2.605.835-2.595h.645l-1.22 3.525h-.53l-.86-2.515-.86 2.515h-.53L113.77.5zm5.85 0h2.595v.55h-1.98v.91h1.755v.55h-1.755v.94h2.005V4h-2.62V.5zm4.865 1.735c.22 0 .395-.052.525-.157a.52.52 0 0 0 .195-.428v-.01c0-.19-.063-.334-.19-.432-.127-.099-.305-.148-.535-.148h-.895v1.175h.9zM122.97.5h1.56c.22 0 .415.03.585.093.17.061.312.147.425.257.093.097.165.208.215.335.05.127.075.267.075.42v.01c0 .143-.02.272-.063.387a1.013 1.013 0 0 1-.434.53c-.102.062-.215.11-.338.143L125.94 4h-.725l-.86-1.22h-.77V4h-.615V.5zm3.615 0h2.595v.55h-1.98v.91h1.755v.55H127.2v.94h2.005V4h-2.62V.5zm4.655 2.94c.183 0 .35-.03.5-.087.15-.059.277-.14.382-.246.106-.105.187-.23.245-.375.059-.145.088-.302.088-.472v-.01c0-.17-.03-.328-.088-.475a1.103 1.103 0 0 0-.244-.377 1.123 1.123 0 0 0-.383-.248c-.15-.06-.317-.09-.5-.09h-.69v2.38h.69zM129.935.5h1.305c.273 0 .524.044.752.132.229.089.425.211.59.368.166.157.293.34.383.552.09.212.135.441.135.688v.01c0 .247-.045.477-.135.69a1.63 1.63 0 0 1-.382.555 1.81 1.81 0 0 1-.59.37c-.229.09-.48.135-.753.135h-1.305V.5zm7.035 2.955c.21 0 .375-.04.495-.12.12-.08.18-.2.18-.36v-.01c0-.15-.06-.266-.178-.347-.118-.082-.299-.123-.542-.123h-.975v.96h1.02zm-.18-1.48c.2 0 .36-.04.48-.118.12-.078.18-.197.18-.357v-.01c0-.14-.052-.25-.157-.327-.106-.079-.258-.118-.458-.118h-.885v.93h.84zM135.345.5h1.57c.403 0 .708.103.915.31.157.157.235.35.235.58v.01a.816.816 0 0 1-.153.498.778.778 0 0 1-.16.162 1.364 1.364 0 0 1-.187.12c.103.037.197.08.282.127a.909.909 0 0 1 .22.173.7.7 0 0 1 .143.235c.033.09.05.195.05.315v.01c0 .157-.03.295-.093.415a.824.824 0 0 1-.262.3c-.113.08-.25.14-.41.183-.16.041-.337.062-.53.062h-1.62V.5zm4.64 2.12L138.595.5h.725l.98 1.55.99-1.55h.705l-1.39 2.105V4h-.62V2.62zm2.465.695h.665V4h-.665v-.685zm0-1.955h.665v.685h-.665V1.36z"})))};I.propTypes={className:a.a.string},t.default=I},180:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return v});var r,g=n(26),c=n.n(g),a=n(12),i=n(107),o=n(3),I=n(108),l=n(7),s=function(e){return null!=e&&String(e).replace(/\s/g,"").length>0},C=function(e){return/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,63}$/.test(e)},u=function(e){return/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]+/.test(e)},A=function(e){return!/[`~!@#$%^&*)(_=+[}{\]\\\/";:?><,|\d]+/.test(e)},b=function(e){return!/[`~!@#$%^&*)(_=+[}{\]\\\/";:?><|]+/.test(e)},d=function(e){return!/[`~!$%^&*_=+[}{\]\\"?><|]+/.test(e)},B=function(e){return/^[a-zA-Z\d-\s]*$/.test(e)},p=function(e){return/^\+?[0-9\s]*$/.test(e)},m=function(e,t){return t.regex.test(e)},y=function(e){return 8===e.trim().length},Q=function(e){return/^[a-zA-Z0-9]*[\w-]*$/.test(e)},G=function(e){return/^[+-]?\d+\.?\d*$/.test(e)},Z=function(e,t){return e===Object(i.getElementById)(t.to.substr(1)).value},h=function(e,t){return e!==Object(i.getElementById)(t.to.substr(1)).value},F=function(e,t){return!t.min||e.length>=t.min},X=function(e,t){return(!t.min||e.length>=t.min)&&(!t.max||e.length<=t.max)},V=function(e,t){var n=Object(l.cloneObject)(t),r=null;if(n.allow_empty&&0===e.length)return!0;var g=!0;return"min"in n&&"function"==typeof n.min&&(n.min=n.min()),"max"in n&&"function"==typeof n.max&&(n.max=n.max()),!("float"===n.type?/^\d*(\.\d+)?$/:/^\d+$/).test(e)||isNaN(e)?(g=!1,r=Object(o.localize)("Should be a valid number.")):"float"===n.type&&n.decimals&&!new RegExp("^\\d+(\\.\\d{0,".concat(n.decimals,"})?$")).test(e)?(g=!1,r=Object(o.localize)("Up to {{decimal_count}} decimal places are allowed.",{decimal_count:n.decimals})):"min"in n&&"max"in n&&+n.min==+n.max&&+e!=+n.min?(g=!1,r=Object(o.localize)("Should be {{value}}",{value:Object(a.addComma)(n.min,n.format_money?Object(a.getDecimalPlaces)(c.a.get("currency")):void 0)})):"min"in n&&"max"in n&&(+e<+n.min||f(e,n))?(g=!1,r=Object(o.localize)("Should be between {{min_value}} and {{max_value}}",{min_value:Object(a.addComma)(n.min,n.format_money?Object(a.getDecimalPlaces)(c.a.get("currency")):void 0),max_value:Object(a.addComma)(n.max,n.format_money?Object(a.getDecimalPlaces)(c.a.get("currency")):void 0)})):"min"in n&&+e<+n.min?(g=!1,r=Object(o.localize)("Should be more than {{min_value}}",{min_value:Object(a.addComma)(n.min,n.format_money?Object(a.getDecimalPlaces)(c.a.get("currency")):void 0)})):"max"in n&&f(e,n)&&(g=!1,r=Object(o.localize)("Should be less than {{max_value}}",{max_value:Object(a.addComma)(n.max,n.format_money?Object(a.getDecimalPlaces)(c.a.get("currency")):void 0)})),v().number.message=r,g},f=function(e,t){return"float"===t.type?+e>+t.max:1===Object(I.compareBigUnsignedInt)(e,t.max)},v=function(){return r||(r={address:{func:d,message:Object(o.localize)("Only letters, numbers, space, and these special characters are allowed: {{permitted_characters}}",{permitted_characters:"- . ' # ; : ( ) , @ /"})},barrier:{func:G,message:Object(o.localize)("Only numbers and these special characters are allowed: {{permitted_characters}}",{permitted_characters:"+ - ."})},compare:{func:Z,message:Object(o.localize)("The two passwords that you entered do not match.")},email:{func:C,message:Object(o.localize)("Invalid email address.")},general:{func:b,message:Object(o.localize)("Only letters, numbers, space, hyphen, period, and apostrophe are allowed.")},length:{func:X,message:Object(o.localize)("You should enter {{value}} characters.",{value:"{{value}}"})},letter_symbol:{func:A,message:Object(o.localize)("Only letters, space, hyphen, period, and apostrophe are allowed.")},min:{func:F,message:Object(o.localize)("Minimum of {{value}} characters required.",{value:"{{value}}"})},not_equal:{func:h,message:Object(o.localize)("{{value_one}} and {{value_two}} cannot be the same.",{value_one:"{{value_one}}",value_two:"{{value_two}}"})},number:{func:V,message:""},password:{func:u,message:Object(o.localize)("Password should have lower and uppercase letters with numbers.")},phone:{func:p,message:Object(o.localize)("Only numbers and spaces are allowed.")},postcode:{func:B,message:Object(o.localize)("Only letters, numbers, space, and hyphen are allowed.")},regular:{func:m,message:""},req:{func:s,message:""},signup_token:{func:y,message:Object(o.localize)("The length of token should be 8.")},tax_id:{func:Q,message:Object(o.localize)("Should start with letter or number, and may contain hyphen and underscore.")}}),r}},181:function(e,t,n){"use strict";var r=n(1),g=n.n(r),c=n(0),a=n.n(c),i=function(e){var t=e.id,n=e.is_slow_loading,r=e.status,g=e.theme;return a.a.createElement("div",{className:"initial-loader"},a.a.createElement("div",{id:t,className:"initial-loader__barspinner barspinner barspinner-".concat(g||"light")},Array.from(new Array(5)).map(function(e,t){return a.a.createElement("div",{key:t,className:"initial-loader__barspinner--rect barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})),n&&r.map(function(e,t){return a.a.createElement("h3",{className:"initial-loader__text",key:t},e)}))};i.propTypes={id:g.a.oneOfType([g.a.string,g.a.number]),is_slow_loading:g.a.bool,status:g.a.array,theme:g.a.string};var o=i,I=function(e){var t=e.is_dark;return e.is_visible&&a.a.createElement("div",{className:"chart-container__loader"},a.a.createElement(o,{theme:t?"dark":"light"}))};I.propTypes={is_dark:g.a.bool,is_visible:g.a.bool};t.a=I},185:function(e,t){var n,r={extractInfoFromShortcode:n=function(e){var t={category:"",underlying:"",barrier_1:""},n=new RegExp("^([A-Z]+)_((OTC_[A-Z0-9]+)|R_[\\d]{2,3}|[A-Z]+)").exec(e);return null!==n&&(t.category=n[1].toLowerCase(),t.underlying=n[2],/^(CALL|PUT)$/i.test(t.category)&&(t.barrier_1=e.split("_").slice(-2)[0])),t},isHighLow:function(e){var t=e.shortcode,r=void 0===t?"":t,g=e.shortcode_info,c=void 0===g?"":g,a=r?n(r):c;return!(!a||!a.barrier_1||/^S0P$/.test(a.barrier_1))}};e.exports=r},186:function(e,t,n){"use strict";var r=n(5),g=n.n(r),c=n(13),a=n(1),i=n.n(a),o=n(0),I=n.n(o),l=n(12),s=n(8);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,g=new Array(r),c=0;c<r;c++)g[c]=arguments[c];return(n=A(this,(e=b(t)).call.apply(e,[this].concat(g)))).state={show_tooltip_balloon_icon:!1},n.onMouseEnter=function(){n.setState({show_tooltip_balloon_icon:!0})},n.onMouseLeave=function(){n.setState({show_tooltip_balloon_icon:!1})},n}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,I.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.alignment,n=e.children,r=e.className,c=e.classNameIcon,a=e.has_error,i=e.icon,o=e.message,l=g()(c,i);return I.a.createElement("span",{className:g()(r,"tooltip",{"tooltip--error":a}),"data-tooltip":o||void 0,"data-tooltip-pos":t},"info"===i&&I.a.createElement(I.a.Fragment,null,I.a.createElement(s.a,{icon:"IconInfoOutline",className:l,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave}),I.a.createElement(s.a,{icon:"IconInfoBlue",className:g()("".concat(c,"-balloon-icon"),"tooltip__balloon-icon",{"tooltip__balloon-icon--show":this.state.show_tooltip_balloon_icon})})),"question"===i&&I.a.createElement(s.a,{icon:"IconQuestion",className:l}),"dot"===i&&I.a.createElement(s.a,{icon:"IconRedDot",className:l}),n)}}])&&u(n.prototype,r),c&&u(n,c),t}();B.propTypes={alignment:i.a.string,children:i.a.node,className:i.a.string,classNameIcon:i.a.string,has_error:i.a.bool,icon:i.a.string,message:i.a.string};var p=B,m=n(28),y=n.n(m),Q=(n(65),function(e){var t=e.decrementValue,n=e.id,r=e.incrementValue,g=e.max_is_disabled,c=e.min_is_disabled;return I.a.createElement(I.a.Fragment,null,I.a.createElement(y.a,{id:"".concat(n,"_add"),className:"input-wrapper__button input-wrapper__button--increment",is_disabled:g,onClick:r,tabIndex:"-1"},I.a.createElement(s.a,{icon:"IconPlus",className:"input-wrapper__icon input-wrapper__icon--plus",is_disabled:g})),I.a.createElement(y.a,{id:"".concat(n,"_sub"),className:"input-wrapper__button input-wrapper__button--decrement",is_disabled:c,onClick:t,tabIndex:"-1"},I.a.createElement(s.a,{icon:"IconMinus",className:"input-wrapper__icon input-wrapper__icon--minus",is_disabled:c})))});Q.propTypes={decrementValue:i.a.func,id:i.a.string,incrementValue:i.a.func,max_is_disabled:i.a.oneOfType([i.a.number,i.a.bool]),min_is_disabled:i.a.oneOfType([i.a.number,i.a.bool])};var G=Q,Z=function(e){var t=e.changeValue,n=e.checked,r=e.className,c=e.classNameInlinePrefix,a=e.data_value,i=e.data_tip,o=e.display_value,l=e.fractional_digits,s=e.id,C=e.inline_prefix,u=e.is_autocomplete_disabled,A=e.is_disabled,b=e.is_hj_whitelisted,d=e.is_incrementable,B=e.is_read_only,p=e.max_length,m=e.name,y=e.onClick,Q=e.onKeyPressed,G=e.placeholder,Z=e.required,h=e.type;return I.a.createElement(I.a.Fragment,null,!!C&&I.a.createElement("div",{className:c},I.a.createElement("span",{className:g()(c?"".concat(c,"--symbol"):"","symbols","symbols--".concat(C.toLowerCase()))})),I.a.createElement("input",{autoComplete:u?"off":void 0,checked:n,className:g()(r),"data-for":"error_tooltip_".concat(m),"data-hj-whitelist":b,"data-tip":i,"data-value":a,disabled:A,id:s,maxLength:l?p+l+1:p,name:m,onChange:function(e){if(-1!==navigator.userAgent.indexOf("Safari")&&"checkbox"!==h){var n=e.target.selectionStart;t(e,function(e){e.target.selectionEnd=n})}else t(e)},onClick:y,onKeyDown:d?Q:void 0,placeholder:G||void 0,readOnly:B,required:Z||void 0,type:"number"===h?"text":h,value:o||""}))};Z.propTypes={changeValue:i.a.func,checked:i.a.oneOfType([i.a.number,i.a.string]),className:i.a.string,classNameInlinePrefix:i.a.string,data_tip:i.a.string,data_value:i.a.oneOfType([i.a.number,i.a.string]),display_value:i.a.oneOfType([i.a.number,i.a.string]),fractional_digits:i.a.number,id:i.a.string,inline_prefix:i.a.string,is_autocomplete_disabled:i.a.bool,is_disabled:i.a.string,is_hj_whitelisted:i.a.bool,is_incrementable:i.a.bool,is_read_only:i.a.bool,max_length:i.a.number,name:i.a.string,onClick:i.a.func,onKeyPressed:i.a.func,placeholder:i.a.string,required:i.a.bool,type:i.a.string,value:i.a.oneOfType([i.a.number,i.a.string])};var h=Z;function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var W=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V(this,f(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,I.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.checked,n=e.className,r=e.classNameInlinePrefix,c=e.classNameInput,a=e.classNamePrefix,i=e.currency,o=e.data_tip,s=e.data_value,C=e.error_messages,u=e.fractional_digits,A=e.helper,b=e.id,d=e.inline_prefix,B=e.is_autocomplete_disabled,m=e.is_disabled,y=e.is_float,Q=e.is_hj_whitelisted,Z=void 0!==Q&&Q,F=e.is_incrementable,X=e.is_negative_disabled,V=e.is_read_only,f=void 0!==V&&V,v=e.is_signed,W=void 0!==v&&v,U=e.is_unit_at_right,N=void 0!==U&&U,_=e.label,H=e.max_length,x=e.max_value,R=e.min_value,Y=e.name,O=e.onChange,T=e.onClick,S=e.placeholder,J=e.prefix,E=e.required,D=e.type,w=e.unit,k=e.value,z=this.props.icon,j=C&&!!C.length,L=!0,P=x&&+k>=+x,K=R&&+k<=+R,M=function(e){var t="string"==typeof e?e.split("."):e.toString().split(".");return t&&t.length>1?t[1].length:0},q=function(){if(!P){var e,t=k?M(k):0;if(!!i&&Object(l.isCryptocurrency)(i)||!i&&y){var n=parseFloat(+k)+parseFloat(1*Math.pow(10,0-t));e=parseFloat(n).toFixed(t)}else e=parseFloat(+k+1).toFixed(t);O({target:{value:e,name:Y}})}},$=function(){var e,t=k?M(k):0;if(!!i&&Object(l.isCryptocurrency)(i)||!i&&y){var n=parseFloat(+k)-parseFloat(1*Math.pow(10,0-t));e=parseFloat(n).toFixed(t)}else e=parseFloat(+k-1).toFixed(t);return e},ee=function(){if(k&&!K){var e=$();X&&e<0||O({target:{value:e,name:Y}})}},te=k;w&&(te=N?"".concat(k," ").concat(w):"".concat(w," ").concat(k));var ne=F&&("number"===D||"tel"===D),re=I.a.createElement(h,{changeValue:function(e,t){if(w&&(e.target.value=e.target.value.replace(w,"").trim()),e.target.value!==k||"checkbox"===D){if("number"===D||"tel"===D){var n=!e.target.value||""===e.target.value||"  "===e.target.value,r=W?"^([+-.0-9])":"^",g=new RegExp("".concat(r,"(\\d*)?").concat(y?"(\\.\\d+)?":"","$")).test(e.target.value),c=y&&new RegExp("".concat(r,"(\\.|\\d+\\.)?$")).test(e.target.value),a=new RegExp("".concat(r,"(\\d+)?\\.(\\d+)?[0]+$")).test(e.target.value),i=/e/.test("".concat(+e.target.value));if(H&&u&&(L=new RegExp("".concat(r,"(\\d{0,").concat(H,"})(\\.\\d{0,").concat(u,"})?$")).test(e.target.value)),(g||n)&&L)e.target.value=n||W||a||i||"tel"===D?e.target.value:+e.target.value;else if(!c)return void(e.target.value=k)}O(e),t&&t(e)}},checked:t,className:g()(ne?"input-wrapper__input":"",d?"input--has-inline-prefix":"","input",{"input--error":j},c),classNameInlinePrefix:r,data_tip:o,data_value:s,display_value:te,fractional_digits:u,has_error:j,id:b,inline_prefix:d,is_autocomplete_disabled:B,is_disabled:m,is_hj_whitelisted:Z,is_incrementable:ne,is_read_only:f,max_length:H,name:Y,onClick:T,onKeyPressed:function(e){38===e.keyCode&&q(),40===e.keyCode&&ee()},placeholder:S,required:E,type:D}),ge=I.a.createElement(G,{id:b,max_is_disabled:P,incrementValue:q,min_is_disabled:K||X&&$()<0,decrementValue:ee}),ce=I.a.createElement(p,{className:g()("",{"tooltip--with-label":_}),alignment:"left",message:j?C[0]:null,has_error:j},!!_&&I.a.createElement("label",{htmlFor:Y,className:"input-field__label"},_),!!A&&I.a.createElement("span",{className:"input-field__helper"},A),ne?I.a.createElement("div",{className:"input-wrapper"},ge,re):re);return I.a.createElement(I.a.Fragment,null,!!J&&I.a.createElement("div",{className:a},I.a.createElement("span",{className:g()("".concat(a,"--symbol"),"symbols","symbols--".concat(J.toLowerCase()))})),I.a.createElement("div",{className:g()("input-field",n)},this.props.icon&&I.a.createElement(z,{onClick:T}),ce))}}])&&X(n.prototype,r),c&&X(n,c),t}();W.propTypes={checked:i.a.oneOfType([i.a.number,i.a.string]),className:i.a.string,classNameInlinePrefix:i.a.string,classNameInput:i.a.string,classNamePrefix:i.a.string,currency:i.a.string,error_messages:c.PropTypes.arrayOrObservableArray,fractional_digits:i.a.number,helper:i.a.string,icon:i.a.oneOfType([i.a.func,i.a.node]),id:i.a.string,inline_prefix:i.a.string,is_autocomplete_disabled:i.a.bool,is_disabled:i.a.string,is_float:i.a.bool,is_hj_whitelisted:i.a.bool,is_incrementable:i.a.bool,is_negative_disabled:i.a.bool,is_read_only:i.a.bool,is_signed:i.a.bool,is_unit_at_right:i.a.bool,label:i.a.string,max_length:i.a.number,name:i.a.string,onChange:i.a.func,onClick:i.a.func,placeholder:i.a.string,prefix:i.a.string,required:i.a.bool,type:i.a.string,unit:i.a.string,value:i.a.oneOfType([i.a.number,i.a.string])};t.a=Object(c.observer)(W)},187:function(e,t,n){"use strict";var r=n(5),g=n.n(r),c=n(1),a=n.n(c),i=n(0),o=n.n(i),I=n(137),l=n(138);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=u(this,A(t).call(this,e))).changeSelected=function(e){n.setState({selected:e})},e.is_routed){var r=e.list.filter(function(t){return t.path===e.current_path||t.default}),g=r.length>1?r[r.length-1]:r[0];n.state={selected:g}}else n.state={selected:e.list[e.selected_index||0]};return n}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,o.a.PureComponent),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:g()("vertical-tab",{"vertical-tab--full-screen":this.props.is_full_width})},o.a.createElement(l.a,{items:this.props.list,onChange:this.changeSelected,selected:this.state.selected,is_routed:this.props.is_routed,header_title:this.props.header_title}),o.a.createElement(I.a,{action_bar:this.props.action_bar,action_bar_classname:this.props.action_bar_classname,id:this.props.id,items:this.props.list,selected:this.state.selected,is_routed:this.props.is_routed}))}}])&&C(n.prototype,r),c&&C(n,c),t}();d.propTypes={action_bar:a.a.arrayOf(a.a.shape({component:a.a.func,icon:a.a.string,onClick:a.a.func,title:a.a.string})),action_bar_classname:a.a.string,current_path:a.a.string,header_title:a.a.string,id:a.a.string,is_full_width:a.a.bool,is_routed:a.a.bool,list:a.a.arrayOf(a.a.shape({default:a.a.bool,icon:a.a.string,label:a.a.string,path:a.a.string,value:a.a.oneOfType([a.a.func,a.a.object])})).isRequired,selected_index:a.a.number},t.a=d},188:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(5),g=n.n(r),c=n(0),a=n.n(c),i=function(e){var t=e.market;return a.a.createElement("div",{className:g()("icons-underlying","icons-underlying__ic-".concat(t?t.toUpperCase():"unknown"))})}},189:function(e,t,n){"use strict";var r=n(5),g=n.n(r),c=n(1),a=n.n(c),i=n(0),o=n.n(i),I=n(11),l=n(19);function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var C=function(e){var t=e.current_tick,n=e.ticks_count,r=s(Array(n).keys());return o.a.createElement("div",{className:"progress-slider__ticks"},o.a.createElement("span",{className:"progress-slider__ticks-caption"},o.a.createElement(l.a,{i18n_default_text:"Tick {{current_tick}}",values:{current_tick:t.toString()}})),o.a.createElement("div",{className:"progress-slider__ticks-wrapper"},r.map(function(e){return o.a.createElement("div",{key:e,className:g()("progress-slider__ticks-step",{"progress-slider__ticks-step--marked":e+1<=parseInt(t)})})})))};C.propTypes={current_tick:a.a.number,ticks_count:a.a.number};var u=C,A=n(247),b=n(4),d=function(e){var t=e.end_time,n=void 0===t?null:t,r=e.start_time;if(!+n||r.unix()>+n)return"";var g=Object(b.i)(Object(b.k)(r.unix(),n));return o.a.createElement("div",{className:"remaining-time"},g)};d.propTypes={end_time:a.a.oneOfType([a.a.number,a.a.string]),start_time:a.a.object};var B=Object(I.b)(function(e){return{start_time:e.common.server_time}})(d),p=function(e){var t=e.className,n=e.current_tick,r=e.is_loading,c=e.start_time,a=e.expiry_time,i=e.server_time,I=e.ticks_count,l=Object(A.c)(i,c,a);return o.a.createElement("div",{className:g()("progress-slider",t)},I?o.a.createElement(u,{current_tick:n,ticks_count:I}):o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"positions-drawer-card__remaining-time"},o.a.createElement(B,{end_time:a})),r||l<1?o.a.createElement("div",{className:"progress-slider__infinite-loader"},o.a.createElement("div",{className:"progress-slider__infinite-loader--indeterminate"})):o.a.createElement("div",{className:"progress-slider__track"},o.a.createElement("div",{className:g()("progress-slider__line",{"progress-slider__line--green":l>=50,"progress-slider__line--orange":l<50&&l>=20,"progress-slider__line--red":l<20}),style:{width:"".concat(l,"%")}}))))};p.propTypes={className:a.a.string,current_tick:a.a.number,expiry_time:a.a.oneOfType([a.a.number,a.a.string]),is_loading:a.a.bool,server_time:a.a.object,start_time:a.a.oneOfType([a.a.number,a.a.string]),ticks_count:a.a.number};t.a=Object(I.b)(function(e){return{server_time:e.common.server_time}})(p)},19:function(e,t,n){"use strict";var r=n(1),g=n.n(r),c=n(0),a=n.n(c),i=n(148),o=function(e){var t=e.i18n_default_text,n=e.values,r=e.components;return a.a.createElement(i.a,{defaults:t,values:n,components:r})};o.propTypes={components:g.a.arrayOf(g.a.node),i18n_default_text:g.a.string,values:g.a.object},t.a=o},20:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return C}),n.d(t,"d",function(){return A}),n.d(t,"f",function(){return d}),n.d(t,"g",function(){return B}),n.d(t,"h",function(){return p}),n.d(t,"i",function(){return m}),n.d(t,"j",function(){return y}),n.d(t,"e",function(){return Q});var r=n(16),g=n.n(r),c=n(7),a=n(33),i=n.n(a),o=function(e,t,n){if(Object(c.isEmptyObject)(e))return null;var r=e.date_start,g=Q(e),a=C(r,g||null),i=s(r,g||null);return{chart_type:e.tick_count?"mountain":i,granularity:e.tick_count?0:a,end_epoch:g,start_epoch:n?null:r,scroll_to_epoch:e.purchase_time,should_show_bottom_widgets:t}},I=[[1,0],[2,120],[6,600],[24,900],[120,3600],[720,14400]],l=function(e){return e||i.a.get().unix()},s=function(e,t){return g.a.duration(g.a.unix(l(t)).diff(g.a.unix(e))).asHours()<=1?"mountain":"candle"},C=function(e,t){return u(l(t)-e)},u=function(e){return(I.find(function(t){return e<=3600*t[0]})||[null,86400])[1]},A=function(e){var t="purchased";return p(e)&&(t=e.profit>=0?"won":"lost"),t},b=function(e){return+(e.sell_price||e.bid_price)},d=function(e){return b(e)&&p(e)?b(e):+e.bid_price||null},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e[e.length-1]||{}},p=function(e){return!!(e.status&&"open"!==e.status||e.is_expired||e.is_settleable)},m=function(e){return"sold"===e.status},y=function(e){return!p(e)&&!m(e)&&1==+e.is_valid_to_sell},Q=function(e){var t=e.exit_tick_time,n=e.date_expiry,r=e.is_expired,g=e.is_path_dependent,c=e.sell_time,a=e.status,i=e.tick_count;if(r&&"open"!==a||m(e))return m(e)?c>n?n:c:!i&&c>n?n:n>t&&!+g?n:t}},21:function(e,t,n){var r=n(136),g=n(7).getPropertyValue,c=n(7).isEmptyObject,a=n(70).isProduction,i=function(e){return JSON.parse(this.getItem(e)||"{}")},o=function(e,t){if(t&&t instanceof Object)try{this.setItem(e,JSON.stringify(t))}catch(e){}};"undefined"!=typeof Storage&&(Storage.prototype.getObject=i,Storage.prototype.setObject=o);var I=function(e){if(void 0===e)return!1;try{return e.setItem("test","1"),e.removeItem("test"),!0}catch(e){return!1}},l=function(e){this.storage=e,this.storage.getObject=i,this.storage.setObject=o};l.prototype={get:function(e){return this.storage.getItem(e)||void 0},set:function(e,t){void 0!==t&&this.storage.setItem(e,t)},getObject:function(e){return"function"==typeof this.storage.getObject?this.storage.getObject(e):JSON.parse(this.storage.getItem(e)||"{}")},setObject:function(e,t){"function"==typeof this.storage.setObject?this.storage.setObject(e,t):this.storage.setItem(e,JSON.stringify(t))},remove:function(e){this.storage.removeItem(e)},clear:function(){this.storage.clear()}};var s=function(e){this.store=void 0!==e?e:{}};s.prototype={get:function(e){return g(this.store,e)},set:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.store,r=e;Array.isArray(r)||(r=[r]),r.length>1?(r[0]in n&&!c(n[r[0]])||(n[r[0]]={}),this.set(r.slice(1),t,n[r[0]])):n[r[0]]=t},getObject:function(e){return JSON.parse(this.get(e)||"{}")},setObject:function(e,t){this.set(e,JSON.stringify(t))},remove:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){delete e.store[t]})},clear:function(){this.store={}},has:function(e){return void 0!==this.get(e)},keys:function(){return Object.keys(this.store)},call:function(e){"function"==typeof this.get(e)&&this.get(e)()}};var C=new s;C.prototype=s.prototype,C.prototype.getResponse=function(e){var t=e;if("string"==typeof t){var n=t.split(".");t=["response",n[0]].concat(n)}return this.get(t)},C.set("response",{});var u=function(e,t){var n=window.location.hostname;this.initialized=!1,this.cookie_name=e,this.domain=t||(a()?".".concat(n.split(".").slice(-2).join(".")):n),this.path="/",this.expires=new Date("Thu, 1 Jan 2037 12:00:00 GMT"),this.value={}};u.prototype={read:function(){var e=r.get(this.cookie_name);try{this.value=e?JSON.parse(e):{}}catch(e){this.value={}}this.initialized=!0},write:function(e,t,n){this.initialized||this.read(),this.value=e,t&&(this.expires=t),r.set(this.cookie_name,this.value,{expires:this.expires,path:this.path,domain:this.domain,secure:!!n})},get:function(e){return this.initialized||this.read(),this.value[e]},set:function(e,t){this.initialized||this.read(),this.value[e]=t,r.set(this.cookie_name,this.value,{expires:new Date(this.expires),path:this.path,domain:this.domain})},remove:function(){r.remove(this.cookie_name,{path:this.path,domain:this.domain})}};var A,b;I(window.localStorage)&&(b=new l(window.localStorage)),I(window.sessionStorage)&&(A=new l(window.sessionStorage)),b||(b=new s),A||(A=new s),e.exports={isStorageSupported:I,CookieStorage:u,removeCookies:function(){var e=[".".concat(document.domain.split(".").slice(-2).join(".")),".".concat(document.domain)],t=window.location.pathname.split("/",2)[1];""!==t&&(t="/".concat(t));for(var n=arguments.length,g=new Array(n),c=0;c<n;c++)g[c]=arguments[c];g.forEach(function(n){r.remove(n,{path:"/",domain:e[0]}),r.remove(n,{path:"/",domain:e[1]}),r.remove(n),new RegExp(n).test(document.cookie)&&t&&(r.remove(n,{path:t,domain:e[0]}),r.remove(n,{path:t,domain:e[1]}),r.remove(n,{path:t}))})},State:C,SessionStore:A,LocalStore:b}},22:function(e,t,n){"use strict";var r=n(33),g=n.n(r),c=n(3),a=n(7),i=n(9),o=n(4);function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n(39),s=n(53),C=n(109);function u(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,g=!1,c=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){g=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(g)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m,y,Q,G,Z,h,F,X,V,f,v,W,U,N,_,H,x,R,Y,O,T,S,J,E=(G={},Z={},h={},F=!1,X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t[e.contract_type]=e.contract_display,t},V=function(e,t){return-1!==e.indexOf(t)?t:e[0]},f=function(e){return{form_components:["duration","amount"].concat(b(Q[e].components))}},v=function(e,t){return{duration_units_list:Object(a.getPropertyValue)(G,[e,"config","durations","units_display",t])||[]}},W=function(e,t,n){var r=Object(a.getPropertyValue)(G,[t,"config","durations","units_display",n])||[],g=[];return r.forEach(function(e){g.push(e.value)}),{duration_unit:V(g,e)}},U=function(e,t,n){var r=Object(a.getPropertyValue)(G,[e,"config","durations","min_max",t])||{};return n&&(r=r[n]||{}),{duration_min_max:r}},N=function(e){return{contract_start_type:e===Number(0)?"spot":"forward"}},_=function(e,t){var n=Object(a.getPropertyValue)(G,[e,"config"]),r=[];return n.has_spot&&r.push({text:Object(c.localize)("Now"),value:Number(0)}),n.forward_starting_dates&&r.push.apply(r,b(n.forward_starting_dates)),{start_date:r.find(function(e){return e.value===t})?t:r[0].value,start_dates_list:r}},H=b(Array(24).keys()).map(function(e){return"0".concat(e).slice(-2)}),x=b(Array(12).keys()).map(function(e){return"0".concat(5*e).slice(-2)}),R=function(e,t,n){return e&&!Object(s.b)(e,t)&&(t.minute(x.find(function(n){return Object(s.b)(e,t.minute(n))})||t.format("mm")),Object(s.b)(e,t)||(t.minute(0),t.hour(H.find(function(r){return Object(s.b)(e,t.hour(r),n,!0)})||t.format("HH")),t.minute(x.find(function(n){return Object(s.b)(e,t.minute(n))})||t.format("mm")))),t.format("HH:mm")},Y=function(e,t){var n=A(Object(o.p)(t)?t.split(":"):[0,0],2),r=n[0],c=n[1];return Object(o.w)(e||g.a.get()).hour(r).minute(c)},O=function(e){return e.minute(5*Math.ceil(e.minute()/5))},T=function(e){return{trade_types:Object(a.getPropertyValue)(G,[e,"config","trade_types"])}},J=function(e,t){var n=Object(a.getPropertyValue)(G,[e,"basis"])||{},r=Object(C.c)();return{basis_list:n.reduce(function(e,t){return[].concat(b(e),[{text:r[t],value:t}])},[]),basis:V(n,t)}},{buildContractTypesConfig:function(e){return i.b.contractsFor(e).then(function(e){var t=Object(a.getPropertyValue)(e,["contracts_for"]);if(F=t&&!e.contracts_for.available.find(function(e){return"forward"!==e.start_type}),t&&!F){var n=Object(C.a)();Q=Object(C.b)(),G={},Z=Object(a.cloneObject)(n),e.contracts_for.available.forEach(function(e){var t=Object.keys(Q).find(function(t){return-1!==Q[t].trade_types.indexOf(e.contract_type)&&(void 0===Q[t].barrier_count||+Q[t].barrier_count===e.barriers)});if(t){if(!G[t]){var n=Z[Object.keys(Z).find(function(e){return-1!==Z[e].indexOf(t)})];if(!n)return;n[n.indexOf(t)]={value:t,text:Q[t].title},G[t]=Object(a.cloneObject)(Q[t])}var r=G[t].config||{};r.has_spot=r.has_spot||"spot"===e.start_type,r.durations=Object(l.a)(e,r.durations),r.trade_types=X(e,r.trade_types),r.barriers=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{count:e.barriers};if(e.barriers){var n={};return["barrier","low_barrier","high_barrier"].forEach(function(t){t in e&&(n[t]=e[t])}),Object.assign(t||{},I({},e.expiry_type,n))}}(e,r.barriers),r.forward_starting_dates=Object(s.a)(e,r.forward_starting_dates),G[t].config=r}}),Object.keys(Z).forEach(function(e){Z[e]=Z[e].filter(function(e){return"object"===p(e)}),0===Z[e].length&&delete Z[e]})}})},getBarriers:S=function(e,t){var n=Object(a.getPropertyValue)(G,[e,"config","barriers"])||{},r=n[t]||{},g=r.barrier||r.high_barrier||"",c=r.low_barrier||"";return{barrier_count:n.count||0,barrier_1:g.toString(),barrier_2:c.toString()}},getContractType:function(e,t){var n=Object.keys(e||{}).reduce(function(t,n){return[].concat(b(t),b(e[n].map(function(e){return e.value})))},[]);return{contract_type:V(n,t)}},getContractValues:function(e){var t=e.contract_expiry_type,n=e.contract_type,r=e.basis,g=e.duration_unit,c=e.start_date,a=f(n),i=J(n,r),o=T(n),I=_(n,c),l=N(I.start_date);return function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};d(n,!0).forEach(function(t){B(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):d(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({},a,{},i,{},o,{},I,{},l,{},S(n,t),{},W(g,n,l.contract_start_type),{},v(n,l.contract_start_type),{},U(n,l.contract_start_type))},getDurationMinMax:U,getDurationUnit:W,getDurationUnitsList:v,getFullContractTypes:function(){return G},getExpiryDate:function(e,t,n,r){var g=null;if("endtime"===n){var c=Object(o.w)(r),a=Object(o.w)(t);g=Object(l.d)(e)?(a.isBefore(c,"day")||r&&a.isAfter(c.clone().add(1,"day"))?c:a).format("YYYY-MM-DD"):(a.isSameOrBefore(c,"day")?c.clone().add(1,"day"):a).format("YYYY-MM-DD")}return{expiry_date:g}},getExpiryTime:function(e,t,n,r,c,a,i){var I=null;if("endtime"===n){var l="23:59:59";if(r&&r.length&&"--"!==r[0]&&(l=r.slice(-1)[0]),!a&&g.a.get().isBefore(Y(e),"day"))I=l;else{var C=a?Y(a,i):g.a.get(),u=Y(e,t);I=u.format("HH:mm");var A=[{open:C.clone().add(5,"minute"),close:Object(o.q)(C.clone().add(24,"hour"),Y(e,l))}];if(Object(s.b)(A,u)||(I=R(A,u.clone(),C.clone())),u.isSameOrBefore(C)||u.diff(C,"minute")<5){var b=23===C.get("hours")&&C.get("minute")>=55,d=c&&!Object(s.b)(c,C.clone().add(5,"minutes"));I=C.clone().add(b||d?0:5,"minutes"),I=O(I).format("HH:mm")}"00:00"===I&&C.isBefore(u,"day")&&(I=C.clone().subtract(5,"minute").format("HH:mm"))}}return{expiry_time:I}},getExpiryType:function(e,t){return e&&1===e.length&&"t"===e[0].value?{expiry_type:"duration"}:{expiry_type:t}},getSessions:function(e,t){return{sessions:(((Object(a.getPropertyValue)(G,[e,"config"])||{}).forward_starting_dates||[]).find(function(e){return e.value===t})||{}).sessions}},getStartTime:function(e,t,n){return{start_time:t?R(e,Y(t,n)):null}},getStartType:N,getTradingTimes:(m=regeneratorRuntime.mark(function e(t){var n,r,g,c,o,I,l,s,C=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=C.length>1&&void 0!==C[1]?C[1]:null,t){e.next=3;break}return e.abrupt("return",[]);case 3:if(t in h){e.next=8;break}return e.next=6,i.b.getTradingTimes(t);case 6:if(r=e.sent,Object(a.getPropertyValue)(r,["trading_times","markets"]))for(g=0;g<r.trading_times.markets.length;g++)if(c=r.trading_times.markets[g].submarkets)for(o=0;o<c.length;o++)if(I=c[o].symbols)for(l=0;l<I.length;l++)s=I[l],h[r.echo_req.trading_times]||(h[r.echo_req.trading_times]={}),h[r.echo_req.trading_times][s.symbol]={open:s.times.open,close:s.times.close};case 8:return e.abrupt("return",n?h[t][n]:h[t]);case 9:case"end":return e.stop()}},e)}),y=function(){var e=this,t=arguments;return new Promise(function(n,r){var g=m.apply(e,t);function c(e){u(g,n,r,c,a,"next",e)}function a(e){u(g,n,r,c,a,"throw",e)}c(void 0)})},function(e){return y.apply(this,arguments)}),getContractCategories:function(){return{contract_types_list:Z,has_only_forward_starting_contracts:F}}});t.a=E},234:function(e,t,n){"use strict";var r=n(0),g=n.n(r),c=n(1),a=n.n(c),i=n(72),o=n(8),I=function(e){var t=e.type,n=e.is_high_low;return g.a.createElement("div",{className:"contract-type"},g.a.createElement("div",{className:"contract-type__type-wrapper"},g.a.createElement(o.a,{icon:"IconTradeType",type:n?"".concat(t.toLowerCase(),"_barrier"):t.toLowerCase(),className:"category-type"})),g.a.createElement("span",{className:"contract-type__type-label"},Object(i.b)(t,n)||""))};I.propTypes={type:a.a.string},t.a=I},235:function(e,t,n){"use strict";var r=n(189);n.d(t,"a",function(){return r.a})},236:function(e,t,n){},237:function(module,exports,__webpack_require__){var t;window,t=function(__WEBPACK_EXTERNAL_MODULE__0__){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var g=t[r]={i:r,l:!1,exports:{}};return e[r].call(g.exports,g,g.exports,n),g.l=!0,g.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var g in e)n.d(r,g,function(t){return e[t]}.bind(null,g));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=48)}({0:function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__0__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vZXh0ZXJuYWwge1wicm9vdFwiOlwiUmVhY3RcIixcImNvbW1vbmpzXCI6XCJyZWFjdFwiLFwiY29tbW9uanMyXCI6XCJyZWFjdFwifT82MWRlIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fOyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")},1:function(module,exports,__webpack_require__){eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (false) { var throwOnDirectAccess, ReactIs; } else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = __webpack_require__(4)();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qcz9kN2JjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdmFyIFJlYWN0SXMgPSByZXF1aXJlKCdyZWFjdC1pcycpO1xuXG4gIC8vIEJ5IGV4cGxpY2l0bHkgdXNpbmcgYHByb3AtdHlwZXNgIHlvdSBhcmUgb3B0aW5nIGludG8gbmV3IGRldmVsb3BtZW50IGJlaGF2aW9yLlxuICAvLyBodHRwOi8vZmIubWUvcHJvcC10eXBlcy1pbi1wcm9kXG4gIHZhciB0aHJvd09uRGlyZWN0QWNjZXNzID0gdHJ1ZTtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2ZhY3RvcnlXaXRoVHlwZUNoZWNrZXJzJykoUmVhY3RJcy5pc0VsZW1lbnQsIHRocm93T25EaXJlY3RBY2Nlc3MpO1xufSBlbHNlIHtcbiAgLy8gQnkgZXhwbGljaXRseSB1c2luZyBgcHJvcC10eXBlc2AgeW91IGFyZSBvcHRpbmcgaW50byBuZXcgcHJvZHVjdGlvbiBiZWhhdmlvci5cbiAgLy8gaHR0cDovL2ZiLm1lL3Byb3AtdHlwZXMtaW4tcHJvZFxuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vZmFjdG9yeVdpdGhUaHJvd2luZ1NoaW1zJykoKTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n")},2:function(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif ( true && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (true) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n\t\t\treturn classNames;\n\t\t}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else {}\n}());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcz80ZDI2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTcgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykgJiYgYXJnLmxlbmd0aCkge1xuXHRcdFx0XHR2YXIgaW5uZXIgPSBjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZyk7XG5cdFx0XHRcdGlmIChpbm5lcikge1xuXHRcdFx0XHRcdGNsYXNzZXMucHVzaChpbm5lcik7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdGNsYXNzTmFtZXMuZGVmYXVsdCA9IGNsYXNzTmFtZXM7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQSxVQUVBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n")},36:function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n    if(false) { var cssReload; }\n  //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2hlY2tib3gvY2hlY2tib3guc2Nzcz82ZWMxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuICAgIGlmKG1vZHVsZS5ob3QpIHtcbiAgICAgIC8vIDE1Njc1MDk3NzQ0NDVcbiAgICAgIHZhciBjc3NSZWxvYWQgPSByZXF1aXJlKFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtaG90LWxvYWRlci9ob3RNb2R1bGVSZXBsYWNlbWVudC5qc1wiKShtb2R1bGUuaWQsIHtcImZpbGVNYXBcIjpcIntmaWxlTmFtZX1cIn0pO1xuICAgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGNzc1JlbG9hZCk7XG4gICAgICBtb2R1bGUuaG90LmFjY2VwdCh1bmRlZmluZWQsIGNzc1JlbG9hZCk7O1xuICAgIH1cbiAgIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLGdDQUtBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///36\n")},4:function(module,exports,__webpack_require__){"use strict";eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = __webpack_require__(5);\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9mYWN0b3J5V2l0aFRocm93aW5nU2hpbXMuanM/ZDdhMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gcmVxdWlyZSgnLi9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQnKTtcblxuZnVuY3Rpb24gZW1wdHlGdW5jdGlvbigpIHt9XG5mdW5jdGlvbiBlbXB0eUZ1bmN0aW9uV2l0aFJlc2V0KCkge31cbmVtcHR5RnVuY3Rpb25XaXRoUmVzZXQucmVzZXRXYXJuaW5nQ2FjaGUgPSBlbXB0eUZ1bmN0aW9uO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBzaGltKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwgc2VjcmV0KSB7XG4gICAgaWYgKHNlY3JldCA9PT0gUmVhY3RQcm9wVHlwZXNTZWNyZXQpIHtcbiAgICAgIC8vIEl0IGlzIHN0aWxsIHNhZmUgd2hlbiBjYWxsZWQgZnJvbSBSZWFjdC5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcihcbiAgICAgICdDYWxsaW5nIFByb3BUeXBlcyB2YWxpZGF0b3JzIGRpcmVjdGx5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGBwcm9wLXR5cGVzYCBwYWNrYWdlLiAnICtcbiAgICAgICdVc2UgUHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzKCkgdG8gY2FsbCB0aGVtLiAnICtcbiAgICAgICdSZWFkIG1vcmUgYXQgaHR0cDovL2ZiLm1lL3VzZS1jaGVjay1wcm9wLXR5cGVzJ1xuICAgICk7XG4gICAgZXJyLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7XG4gICAgdGhyb3cgZXJyO1xuICB9O1xuICBzaGltLmlzUmVxdWlyZWQgPSBzaGltO1xuICBmdW5jdGlvbiBnZXRTaGltKCkge1xuICAgIHJldHVybiBzaGltO1xuICB9O1xuICAvLyBJbXBvcnRhbnQhXG4gIC8vIEtlZXAgdGhpcyBsaXN0IGluIHN5bmMgd2l0aCBwcm9kdWN0aW9uIHZlcnNpb24gaW4gYC4vZmFjdG9yeVdpdGhUeXBlQ2hlY2tlcnMuanNgLlxuICB2YXIgUmVhY3RQcm9wVHlwZXMgPSB7XG4gICAgYXJyYXk6IHNoaW0sXG4gICAgYm9vbDogc2hpbSxcbiAgICBmdW5jOiBzaGltLFxuICAgIG51bWJlcjogc2hpbSxcbiAgICBvYmplY3Q6IHNoaW0sXG4gICAgc3RyaW5nOiBzaGltLFxuICAgIHN5bWJvbDogc2hpbSxcblxuICAgIGFueTogc2hpbSxcbiAgICBhcnJheU9mOiBnZXRTaGltLFxuICAgIGVsZW1lbnQ6IHNoaW0sXG4gICAgZWxlbWVudFR5cGU6IHNoaW0sXG4gICAgaW5zdGFuY2VPZjogZ2V0U2hpbSxcbiAgICBub2RlOiBzaGltLFxuICAgIG9iamVjdE9mOiBnZXRTaGltLFxuICAgIG9uZU9mOiBnZXRTaGltLFxuICAgIG9uZU9mVHlwZTogZ2V0U2hpbSxcbiAgICBzaGFwZTogZ2V0U2hpbSxcbiAgICBleGFjdDogZ2V0U2hpbSxcblxuICAgIGNoZWNrUHJvcFR5cGVzOiBlbXB0eUZ1bmN0aW9uV2l0aFJlc2V0LFxuICAgIHJlc2V0V2FybmluZ0NhY2hlOiBlbXB0eUZ1bmN0aW9uXG4gIH07XG5cbiAgUmVhY3RQcm9wVHlwZXMuUHJvcFR5cGVzID0gUmVhY3RQcm9wVHlwZXM7XG5cbiAgcmV0dXJuIFJlYWN0UHJvcFR5cGVzO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n")},48:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/classnames/index.js\nvar classnames = __webpack_require__(2);\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// EXTERNAL MODULE: ./node_modules/prop-types/index.js\nvar prop_types = __webpack_require__(1);\nvar prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);\n\n// EXTERNAL MODULE: external {"root":"React","commonjs":"react","commonjs2":"react"}\nvar external_root_React_commonjs_react_commonjs2_react_ = __webpack_require__(0);\nvar external_root_React_commonjs_react_commonjs2_react_default = /*#__PURE__*/__webpack_require__.n(external_root_React_commonjs_react_commonjs2_react_);\n\n// CONCATENATED MODULE: ./src/components/checkbox/checkbox.jsx\nfunction _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n // TODO: use-from-shared - Use this icon from icons\' shared package\n\nvar checkbox_IconCheckmark = function IconCheckmark(_ref) {\n  var className = _ref.className,\n      classNamePath = _ref.classNamePath;\n  return external_root_React_commonjs_react_commonjs2_react_default.a.createElement("svg", {\n    className: classnames_default()(\'inline-icon\', className),\n    width: "16",\n    height: "16"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement("path", {\n    className: classnames_default()(classNamePath, \'color1-fill\'),\n    d: "M6 10.0857864L3.70710678 7.79289322c-.39052429-.39052429-1.02368927-.39052429-1.41421356 0-.39052429.39052429-.39052429 1.02368927 0 1.41421356l3 3.00000002c.39052429.3905243 1.02368927.3905243 1.41421356 0l7.00000002-7.00000002c.3905243-.39052429.3905243-1.02368927 0-1.41421356-.3905243-.39052429-1.0236893-.39052429-1.4142136 0L6 10.0857864z",\n    fill: "#FFF",\n    fillRule: "evenodd"\n  }));\n};\n\nvar checkbox_Checkbox =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(Checkbox, _React$PureComponent);\n\n  function Checkbox() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Checkbox);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Checkbox)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.onClick = function () {\n      _this.props.onClick(!_this.props.value);\n    };\n\n    return _this;\n  }\n\n  _createClass(Checkbox, [{\n    key: "render",\n    value: function render() {\n      var _this$props = this.props,\n          className = _this$props.className,\n          classNameLabel = _this$props.classNameLabel,\n          id = _this$props.id,\n          label = _this$props.label,\n          value = _this$props.value;\n      return external_root_React_commonjs_react_commonjs2_react_default.a.createElement("div", {\n        id: id,\n        className: classnames_default()(\'dc-checkbox\', className),\n        onClick: this.onClick\n      }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement("div", {\n        className: classnames_default()(\'dc-checkbox__box\', {\n          \'dc-checkbox__box--active\': value\n        })\n      }, !!value && external_root_React_commonjs_react_commonjs2_react_default.a.createElement(checkbox_IconCheckmark, null)), external_root_React_commonjs_react_commonjs2_react_default.a.createElement("div", {\n        className: classnames_default()(\'dc-checkbox__label\', classNameLabel)\n      }, label));\n    }\n  }]);\n\n  return Checkbox;\n}(external_root_React_commonjs_react_commonjs2_react_default.a.PureComponent);\n\ncheckbox_Checkbox.propTypes = {\n  className: prop_types_default.a.string,\n  classNameLabel: prop_types_default.a.string,\n  id: prop_types_default.a.string,\n  label: prop_types_default.a.string,\n  value: prop_types_default.a.bool\n};\n/* harmony default export */ var checkbox_checkbox = (checkbox_Checkbox);\n// EXTERNAL MODULE: ./src/components/checkbox/checkbox.scss\nvar components_checkbox_checkbox = __webpack_require__(36);\n\n// CONCATENATED MODULE: ./src/components/checkbox/index.js\n\n\n/* harmony default export */ var components_checkbox = __webpack_exports__["default"] = (checkbox_checkbox);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2hlY2tib3gvY2hlY2tib3guanN4PzNiZWYiLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NoZWNrYm94L2luZGV4LmpzPzNmNzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgUHJvcFR5cGVzICBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCAgICAgIGZyb20gJ3JlYWN0JztcblxuLy8gVE9ETzogdXNlLWZyb20tc2hhcmVkIC0gVXNlIHRoaXMgaWNvbiBmcm9tIGljb25zJyBzaGFyZWQgcGFja2FnZVxuY29uc3QgSWNvbkNoZWNrbWFyayA9ICh7IGNsYXNzTmFtZSwgY2xhc3NOYW1lUGF0aCB9KSA9PiAoXG4gICAgPHN2ZyBjbGFzc05hbWU9eyBjbGFzc05hbWVzKCdpbmxpbmUtaWNvbicsIGNsYXNzTmFtZSkgfSB3aWR0aD0nMTYnIGhlaWdodD0nMTYnPlxuICAgICAgICA8cGF0aFxuICAgICAgICAgICAgY2xhc3NOYW1lPXsgY2xhc3NOYW1lcyhjbGFzc05hbWVQYXRoLCAnY29sb3IxLWZpbGwnKSB9XG4gICAgICAgICAgICBkPSdNNiAxMC4wODU3ODY0TDMuNzA3MTA2NzggNy43OTI4OTMyMmMtLjM5MDUyNDI5LS4zOTA1MjQyOS0xLjAyMzY4OTI3LS4zOTA1MjQyOS0xLjQxNDIxMzU2IDAtLjM5MDUyNDI5LjM5MDUyNDI5LS4zOTA1MjQyOSAxLjAyMzY4OTI3IDAgMS40MTQyMTM1NmwzIDMuMDAwMDAwMDJjLjM5MDUyNDI5LjM5MDUyNDMgMS4wMjM2ODkyNy4zOTA1MjQzIDEuNDE0MjEzNTYgMGw3LjAwMDAwMDAyLTcuMDAwMDAwMDJjLjM5MDUyNDMtLjM5MDUyNDI5LjM5MDUyNDMtMS4wMjM2ODkyNyAwLTEuNDE0MjEzNTYtLjM5MDUyNDMtLjM5MDUyNDI5LTEuMDIzNjg5My0uMzkwNTI0MjktMS40MTQyMTM2IDBMNiAxMC4wODU3ODY0eidcbiAgICAgICAgICAgIGZpbGw9JyNGRkYnXG4gICAgICAgICAgICBmaWxsUnVsZT0nZXZlbm9kZCdcbiAgICAgICAgLz5cbiAgICA8L3N2Zz5cbik7XG5cbmNsYXNzIENoZWNrYm94IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgb25DbGljayA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNsaWNrKCF0aGlzLnByb3BzLnZhbHVlKTtcbiAgICB9O1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICAgICBjbGFzc05hbWVMYWJlbCxcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgaWQ9e2lkfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnZGMtY2hlY2tib3gnLCBjbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25DbGlja31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnZGMtY2hlY2tib3hfX2JveCcsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2RjLWNoZWNrYm94X19ib3gtLWFjdGl2ZSc6IHZhbHVlLFxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeyAhIXZhbHVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICA8SWNvbkNoZWNrbWFyayAvPlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2RjLWNoZWNrYm94X19sYWJlbCcsIGNsYXNzTmFtZUxhYmVsKX0+e2xhYmVsfTwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5DaGVja2JveC5wcm9wVHlwZXMgPSB7XG4gICAgY2xhc3NOYW1lICAgICA6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY2xhc3NOYW1lTGFiZWw6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgaWQgICAgICAgICAgICA6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgbGFiZWwgICAgICAgICA6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdmFsdWUgICAgICAgICA6IFByb3BUeXBlcy5ib29sLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2hlY2tib3g7XG4iLCJpbXBvcnQgQ2hlY2tib3ggZnJvbSAnLi9jaGVja2JveC5qc3gnO1xuaW1wb3J0ICAgICAgICAgICAgICAgJy4vY2hlY2tib3guc2Nzcyc7XG5cbmV4cG9ydCBkZWZhdWx0IENoZWNrYm94O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBRkE7QUFDQTtBQVVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQURBO0FBQUE7QUFRQTtBQUFBO0FBR0E7Ozs7QUE5QkE7QUFDQTtBQWdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBOzs7OztBQ3pEQTtBQUNBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///48\n')},5:function(module,exports,__webpack_require__){"use strict";eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQuanM/NTliMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJztcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFByb3BUeXBlc1NlY3JldDtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n")}}).default},module.exports=t(__webpack_require__(111))},238:function(e,t,n){"use strict";var r=n(1),g=n.n(r),c=n(0),a=n.n(c),i=n(8),o=n(3),I=function(e){return e||"IconCalendarToday"},l=function(e){var t=e.footer,n=e.has_today_btn,r=e.has_range_selection,g=e.duration_date,c=e.is_minimum,l=e.onClick,s=e.use_icon;return a.a.createElement(a.a.Fragment,null,(n||t||r)&&a.a.createElement("div",{className:"calendar__footer"},t&&a.a.createElement("span",{className:"calendar__text"},t),r&&a.a.createElement("span",{className:"calendar__text"},"".concat(c?"":Object(o.localize)("Duration: ")).concat(g)),n&&a.a.createElement(i.a,{icon:I(s),className:"calendar__icon",onClick:l})))};l.propTypes={duration_date:g.a.string,footer:g.a.string,has_range_selection:g.a.bool,has_today_btn:g.a.bool,is_minimum:g.a.bool,onClick:g.a.func,use_icon:g.a.string},t.a=l},239:function(e,t,n){"use strict";var r=n(13),g=n(1),c=n.n(g),a=n(0),i=n.n(a),o=n(5),I=n.n(o),l=n(146),s=n.n(l),C=(n(236),n(12)),u=n(28),A=n.n(u),b=(n(65),function(e){var t=e.left,n=e.width,r=t<110?0:t,g={width:n<110?111:n,left:0,transform:"translate3d(".concat(r,"px, 0, 0)"),borderTopLeftRadius:0===r?"4px":0,borderTopRightRadius:0===r?0:"4px",borderBottomLeftRadius:0===r?"4px":0,borderBottomRightRadius:0===r?0:"4px"};return i.a.createElement("span",{style:g,className:"button-menu--highlight"})});function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(null==e)return{};var n,r,g=function(e,t){if(null==e)return{};var n,r,g={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(g[n]=e[n]);return g}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(g[n]=e[n])}return g}function Q(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}b.propTypes={left:c.a.number,width:c.a.number};var X=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,g=new Array(r),c=0;c<r;c++)g[c]=arguments[c];return(n=Z(this,(e=h(t)).call.apply(e,[this].concat(g)))).state={left:0,width:0},n.onClick=function(e,t){e.target&&(n.updateHighlightPosition(e.target.closest("button")),"function"==typeof t&&t())},n.resetHighlight=function(){n.setState({left:0,width:0})},n.updateHighlightPosition=function(e){if(e){var t=e.offsetLeft,r=e.offsetWidth;n.state.width!==r&&n.setState({width:r}),n.state.left!==t&&n.setState({left:t})}},n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){var e=Q(this.node.getElementsByClassName("button-menu__button--active"))[0];this.node&&this.updateHighlightPosition(e)}},{key:"componentDidUpdate",value:function(){var e=Q(this.node.getElementsByClassName("button-menu__button--active"))[0];e?this.updateHighlightPosition(e):0===this.state.left&&0===this.state.width||this.resetHighlight()}},{key:"componentWillUnMount",value:function(){this.resetHighlight()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=y(t,["className"]),g=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};p(n,!0).forEach(function(t){m(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):p(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({className:I()("button-menu__wrapper",n)},r);return i.a.createElement("div",B({ref:function(t){return e.node=t}},g),i.a.Children.map(this.props.children,function(t){return i.a.cloneElement(t,{onClick:function(n){return e.onClick(n,t.props.onClick)}})}),i.a.createElement(b,{left:this.state.left,width:this.state.width}))}}])&&G(n.prototype,r),g&&G(n,g),t}();X.propTypes={children:c.a.array,className:c.a.string,timeout:c.a.number};var V=X,f=function(e){var t=e.buttons_arr,n=e.id,r=e.is_animated,g=e.name,c=e.onChange,a=e.value,o=t.map(function(e,t){var n=I()("button-menu__button",{"button-menu__button--active":e.value===a});return i.a.createElement(A.a,{id:"dt_".concat(e.value,"_toggle_item"),key:t,text:"".concat(e.text.charAt(0).toUpperCase()).concat(e.text.slice(1)),onClick:function(){return t=e.value,void(a!==t&&c({target:{value:t,name:g}}));var t},className:n})});return i.a.createElement("div",{id:n,className:"button-menu"},r?i.a.createElement(V,null,o):i.a.createElement(i.a.Fragment,null,o))};f.propTypes={buttons_arr:c.a.array,id:c.a.string,is_animated:c.a.bool,name:c.a.string,onChange:c.a.func,value:c.a.oneOfType([c.a.number,c.a.string])};var v=f,W=n(52),U=n(186),N=n(11),_=n(71),H=n.n(_),x=(n(112),n(237)),R=n.n(x),Y=(n(257),n(3)),O=n(7),T=n(22);function S(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var J=function(e){return!!e&&Object(O.getPropertyValue)(e,"Up/Down").some(function(e){return"rise_fall_equal"===e.value})},E=function(e,t,n){if(!e||!t||!n)return!1;var r=Object.keys(e||{}).reduce(function(t,n){return[].concat(S(t),S(e[n].map(function(e){return e.value})))},[]).map(function(e){return t={},r=e,g=Object(O.getPropertyValue)(T.a.getFullContractTypes(),[e,"config","durations","units_display",n]),r in t?Object.defineProperty(t,r,{value:g,enumerable:!0,configurable:!0,writable:!0}):t[r]=g,t;var t,r,g});return!!J(e)&&r.filter(function(e){return e.rise_fall_equal})[0].rise_fall_equal.some(function(e){return e.value===t})},D=function(e){var t=e.contract_start_type,n=e.contract_type,r=e.contract_types_list,g=e.duration_unit,c=e.expiry_type,a=e.onChange,o=e.value,I=E(r,g,t),l=J(r);return function(e){return/^(rise_fall|rise_fall_equal)$/.test(e)}(n)&&(I||"endtime"===c)&&l&&i.a.createElement("div",{className:"allow-equals"},i.a.createElement(R.a,{className:"allow-equals__input-field",id:"dt_allow_equals_input",onClick:function(e){a({target:{name:"is_equal",value:Number(e)}})},value:o,label:Object(Y.localize)("Allow equals"),classNameLabel:"allow-equals__label"}),i.a.createElement(H.a,{alignment:"left",classNameTarget:"allow-equals__tooltip",icon:"info",id:"dt_allow_equals_info",message:Object(Y.localize)("Win payout if exit spot is also equal to entry spot."),margin:113}))};D.propTypes={contract_start_type:c.a.string,contract_type:c.a.string,contract_types_list:c.a.object,duration_unit:c.a.string,expiry_type:c.a.string,onChange:c.a.func,value:c.a.number};var w=D;var k=function(e){var t,n,r,g=e.amount,c=e.basis,a=e.basis_list,o=e.contract_start_type,l=e.contract_type,u=e.contract_types_list,A=e.currencies_list,b=e.currency,d=e.duration_unit,B=e.expiry_type,p=e.is_equal,m=e.is_minimized,y=e.is_nativepicker,Q=e.is_single_currency,G=e.onChange,Z=e.validation_errors;if(m)return i.a.createElement("div",{className:"fieldset-minimized fieldset-minimized__amount"},i.a.createElement("span",{className:"fieldset-minimized__basis"},(a.find(function(e){return e.value===c})||{}).text)," ",i.a.createElement("i",null,i.a.createElement("span",{className:I()("fieldset-minimized__currency","symbols",(t={},n="symbols--".concat((b||"").toLowerCase()),r=b,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t))})),Object(C.addComma)(g,2));var h=i.a.createElement(U.a,{className:"trade-container__amount",classNameInlinePrefix:"trade-container__currency",classNameInput:"trade-container__input",currency:b,error_messages:Z.amount,fractional_digits:Object(C.getDecimalPlaces)(b),id:"dt_amount_input",inline_prefix:Q?b:null,is_autocomplete_disabled:!0,is_float:!0,is_hj_whitelisted:!0,is_incrementable:!0,is_nativepicker:y,is_negative_disabled:!0,max_length:10,name:"amount",onChange:G,type:"tel",value:g});return i.a.createElement(W.a,{className:"trade-container__fieldset"},i.a.createElement(v,{id:"dt_amount_toggle",buttons_arr:a,className:"dropdown--no-margin",is_animated:!0,name:"basis",onChange:G,value:c}),Q?h:i.a.createElement("div",{className:"trade-container__currency-options"},i.a.createElement(s.a,{id:"amount",className:I()({"trade-container__currency-options-dropdown":!Q}),classNameDisplay:"trade-container__currency-options--display",has_symbol:!0,is_alignment_left:!0,is_nativepicker:!1,list:A,name:"currency",value:b,onChange:G}),h),i.a.createElement(w,{contract_start_type:o,contract_type:l,contract_types_list:u,duration_unit:d,expiry_type:B,onChange:G,value:parseInt(p)}))};k.propTypes={amount:c.a.oneOfType([c.a.number,c.a.string]),basis:c.a.string,basis_list:r.PropTypes.arrayOrObservableArray,contract_start_type:c.a.string,contract_type:c.a.string,contract_types_list:r.PropTypes.observableObject,currencies_list:r.PropTypes.observableObject,currency:c.a.string,duration_unit:c.a.string,expiry_type:c.a.string,is_equal:c.a.oneOfType([c.a.number,c.a.string]),is_minimized:c.a.bool,is_nativepicker:c.a.bool,is_single_currency:c.a.bool,onChange:c.a.func,validation_errors:c.a.object};var z=Object(N.b)(function(e){var t=e.modules,n=e.client;return{amount:t.trade.amount,basis:t.trade.basis,basis_list:t.trade.basis_list,contract_start_type:t.trade.contract_start_type,contract_type:t.trade.contract_type,contract_types_list:t.trade.contract_types_list,currencies_list:n.currencies_list,currency:t.trade.currency,duration_unit:t.trade.duration_unit,expiry_type:t.trade.expiry_type,is_equal:t.trade.is_equal,is_single_currency:n.is_single_currency,onChange:t.trade.onChange,validation_errors:t.trade.validation_errors}})(k),j=n(8),L=function(e){var t=e.barrier_1,n=e.barrier_2,r=e.barrier_count,g=e.is_minimized,c=e.onChange,a=e.validation_errors,o=1===r?Object(Y.localize)("Barrier"):Object(Y.localize)("Barriers");if(g)return 2!==r?i.a.createElement("div",{className:"fieldset-minimized fieldset-minimized__barrier1"},t):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"fieldset-minimized fieldset-minimized__barrier1"},t),i.a.createElement("div",{className:"fieldset-minimized fieldset-minimized__barrier2"},n));var l=2===r?"multiple":"single";return i.a.createElement(W.a,{className:"trade-container__fieldset trade-container__barriers",header:o,is_center:!0},i.a.createElement("div",null,i.a.createElement(U.a,{id:"dt_barrier_1_input",type:"number",name:"barrier_1",value:t,className:"trade-container__barriers-".concat(l),classNameInput:I()("trade-container__input","trade-container__barriers-input","trade-container__barriers-".concat(l,"-input")),onChange:c,error_messages:a.barrier_1||[],is_float:!0,is_signed:!0}),2===r&&i.a.createElement(i.a.Fragment,null,i.a.createElement(U.a,{id:"dt_barrier_2_input",type:"number",name:"barrier_2",value:n,className:"multiple",classNameInput:"trade-container__input",onChange:c,error_messages:a.barrier_2,is_float:!0,is_signed:!0}),i.a.createElement(j.a,{icon:"IconBarrierUp",className:"trade-container__barriers--up"}),i.a.createElement(j.a,{icon:"IconBarrierDown",className:"trade-container__barriers--down"}))))};L.propTypes={barrier_1:c.a.string,barrier_2:c.a.string,barrier_count:c.a.number,is_minimized:c.a.bool,onChange:c.a.func,validation_errors:c.a.object};var P=Object(N.b)(function(e){var t=e.modules;return{barrier_1:t.trade.barrier_1,barrier_2:t.trade.barrier_2,barrier_count:t.trade.barrier_count,onChange:t.trade.onChange,validation_errors:t.trade.validation_errors}})(L),K=n(39);function M(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var q=function(e){var t=e.hover_value,n=e.max_value,r=e.min_value,g=e.onClick,c=e.onMouseEnter,a=e.onMouseLeave,o=e.value,l=M(Array(n-r+1).keys()),s=function(e){return e+r===o},C=function(e){return e+r<o},u=function(e){return!C(e)&&e+r<=t};return i.a.createElement(i.a.Fragment,null,l.map(function(e){return i.a.createElement("span",{key:e,className:I()("range-slider__ticks-step",{"range-slider__ticks-step--active":s(e),"range-slider__ticks-step--marked":C(e),"range-slider__ticks-step--marked-hover":u(e)}),onClick:function(){return g(e+r)},onMouseEnter:function(){return c(e+r)},onMouseLeave:a})}))};q.propTypes={hover_value:c.a.number,max_value:c.a.number,min_value:c.a.number,onClick:c.a.func,onMouseEnter:c.a.func,onMouseLeave:c.a.func,value:c.a.number};var $=q;function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ce=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,g=new Array(r),c=0;c<r;c++)g[c]=arguments[c];return(n=ne(this,(e=re(t)).call.apply(e,[this].concat(g)))).state={hover_value:0},n.handleChange=function(e){var t=+e.target.value;t!==n.props.value&&(n.resetOnHover(),n.props.onChange({target:{name:n.props.name,value:t}}))},n.handleClick=function(e){e!==n.props.value&&(n.resetOnHover(),n.props.onChange({target:{name:n.props.name,value:e}}))},n.onMouseEnter=function(e){e&&(n.setState({hover_value:e}),n.rangeSliderTrack.style.width=n.getRangeSliderTrackWidth(e,!0))},n.onMouseLeave=function(e){var t=e.nativeEvent,r=t.offsetX,g=t.offsetY;(g<=-3||g>=3||r<-3||r>3)&&n.resetOnHover()},n.getRangeSliderTrackWidth=function(e,t){var r=(e-n.props.min_value)*(10/(n.props.max_value-n.props.min_value));return"".concat(2*r+(t?.8:1.4),"em")},n.resetOnHover=function(){n.state.hover_value&&(n.setState({hover_value:0}),n.rangeSliderTrack.style.width=0)},n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.max_value,g=t.min_value,c=t.name,a=t.value,o=this.state.hover_value||a;return i.a.createElement("div",{className:I()("range-slider",n,{"range-slider__error":a<g||a>r})},i.a.createElement("label",{className:"range-slider__label",htmlFor:"range"},i.a.createElement("input",{className:"input trade-container__input range-slider__track",id:"dt_duration_range_input",max:r,max_value:r,min:g,min_value:g,name:c,onChange:this.handleChange,tabIndex:"0",type:"range",steps:r-g,value:a}),i.a.createElement("span",{ref:function(t){return e.rangeSliderTrack=t},className:"range-slider__line range-slider__line--fill",onMouseLeave:this.onMouseLeave}),i.a.createElement("div",{className:"range-slider__ticks"},i.a.createElement($,{hover_value:this.state.hover_value,max_value:r,min_value:g,onClick:this.handleClick,onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter,value:a})),i.a.createElement("div",{className:"range-slider__line",style:{width:"".concat(this.getRangeSliderTrackWidth(a))}})),i.a.createElement("div",{className:"range-slider__caption"},!!o&&i.a.createElement("span",{id:"dt_range_slider_label",className:"range-slider__caption-title"},1===o&&Object(Y.localize)("{{display_value}} Tick",{display_value:o}),o>1&&Object(Y.localize)("{{display_value}} Ticks",{display_value:o}))))}}])&&te(n.prototype,r),g&&te(n,g),t}();ce.propTypes={className:c.a.string,max_value:c.a.number,min_value:c.a.number,name:c.a.string,onChange:c.a.func,value:c.a.number};var ae=ce,ie=n(4),oe=function(e){var t=e.name,n=e.onChange,r=e.value,g=I()("advanced-simple-toggle__icon","select-arrow",{"advanced-simple-toggle__icon--active":r});return i.a.createElement(a.Fragment,null,i.a.createElement("button",{id:r?"dt_advanced_toggle":"dt_simple_toggle",className:"advanced-simple-toggle",onClick:function(){n({target:{value:!r,name:t}})}},i.a.createElement(j.a,{icon:"IconArrow",className:g,classNamePath:"advanced-simple-toggle__icon-path"})))};oe.propTypes={name:c.a.string,onChange:c.a.func,value:c.a.bool};var Ie=oe,le=n(37),se=n(9);function Ce(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}var ue={},Ae=function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var n,r,g,c,a,i,o,I,l=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:null,t){e.next=3;break}return e.abrupt("return",[]);case 3:if(t in ue){e.next=8;break}return e.next=6,se.b.getTradingTimes(t);case 6:if(r=e.sent,Object(O.getPropertyValue)(r,["trading_times","markets"]))for(g=0;g<r.trading_times.markets.length;g++)if(c=r.trading_times.markets[g].submarkets)for(a=0;a<c.length;a++)if(i=c[a].symbols)for(o=0;o<i.length;o++)I=i[o],ue[r.echo_req.trading_times]||(ue[r.echo_req.trading_times]={}),ue[r.echo_req.trading_times][I.symbol]=I.events;case 8:return e.abrupt("return",ue[t][n]);case 9:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,g){var c=e.apply(t,n);function a(e){Ce(c,r,g,a,i,"next",e)}function i(e){Ce(c,r,g,a,i,"throw",e)}a(void 0)})});return function(e){return t.apply(this,arguments)}}(),be=n(241),de=n(238),Be=n(245);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ze=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ye(this,Qe(t).call(this,e))).switchView=function(e){n.setState({calendar_view:e})},n.navigateTo=function(e){n.setState({calendar_date:Object(ie.w)(e).format(n.props.date_format)},function(){if(n.props.onChangeCalendarMonth){var t=Object(ie.l)(e);n.props.onChangeCalendarMonth(t)}})},n.onMouseOver=function(e){var t=e.currentTarget;t.classList.contains("calendar__cell--disabled")||t.classList.contains("calendar__cell--hover")||(t.className+=" calendar__cell--hover",n.setState({hovered_date:t.getAttribute("data-date"),duration_date:t.getAttribute("data-duration")}))},n.onMouseLeave=function(e){var t=e.currentTarget;t.classList.contains("calendar__cell--hover")&&(t.classList.remove("calendar__cell--hover"),n.setState({hovered_date:null,duration_date:null}))},n.updateSelectedDate=function(e){var t=n.props,r=t.date_format,g=t.max_date,c=t.min_date,a=t.onSelect,i=Object(ie.w)(e.target.dataset.date).startOf("day"),o=i.isBefore(Object(ie.w)(c)),I=i.isAfter(Object(ie.w)(g));if(!o&&!I){var l=i.format(r);n.setState({calendar_date:l,selected_date:l}),a&&a(l)}},n.updateSelected=function(e,t){if(e&&e.stopPropagation(),"day"!==t){var r=Object(ie.w)(n.state.calendar_date)["decade"===t?"year":t](e.target.dataset[t].split("-")[0]).format(n.props.date_format);n.isPeriodDisabled(r,t)||n.setState({calendar_date:r,calendar_view:{month:"date",year:"month",decade:"year"}[t]},function(){if(n.props.onChangeCalendarMonth){var e=Object(ie.l)(r);n.props.onChangeCalendarMonth(e)}})}else n.updateSelectedDate(e)},n.resetCalendar=function(){var e=n.props,t=e.date_format,r=e.start_date,g=Object(ie.w)(r).format(t);n.setState({calendar_date:g,selected_date:"",calendar_view:"date"})},n.setToday=function(){var e=n.props,t=e.date_format,r=e.onSelect,g=Object(ie.w)().format(t);n.setState({calendar_date:g,selected_date:g,calendar_view:"date"}),r&&r(g,!0)},n.isPeriodDisabled=function(e,t){var r=n.props,g=r.max_date,c=r.min_date,a=Object(ie.w)(e).clone().startOf(t);return Object(ie.w)(e).clone().endOf(t).isBefore(Object(ie.w)(c))||a.isAfter(Object(ie.w)(g))};var r=e.date_format,g=e.start_date,c=e.value,a=Object(ie.w)(c||g).format(r);return n.state={calendar_date:a,selected_date:c,calendar_view:"date",hovered_date:"",duration_date:""},n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e,t,n=this.props,r=n.date_format,g=n.duration_date,c=n.footer,a=n.has_today_btn,o=n.has_range_selection,I=n.holidays,l=n.start_date,s=n.weekends,C=this.state,u=C.calendar_date,A=C.calendar_view,b=C.selected_date;return g?(e="".concat(g," ").concat(1===g?Object(Y.localize)("Day"):Object(Y.localize)("Days")),t=!1):(e=Object(Y.localize)("Minimum duration is 1 day"),t=!0),i.a.createElement("div",{className:"calendar","data-value":b},i.a.createElement(Be.a,{calendar_date:u,calendar_view:A,isPeriodDisabled:this.isPeriodDisabled,navigateTo:this.navigateTo,switchView:this.switchView}),i.a.createElement(be.a,{calendar_date:u,calendar_view:A,date_format:r,isPeriodDisabled:this.isPeriodDisabled,start_date:l,selected_date:b,updateSelected:this.updateSelected,holidays:I,has_range_selection:o,hovered_date:this.state.hovered_date,weekends:s,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseLeave}),i.a.createElement(de.a,{footer:c,duration_date:this.state.duration_date||e,is_minimum:t,has_today_btn:a,has_range_selection:o,onClick:this.setToday}))}}])&&me(n.prototype,r),g&&me(n,g),t}();Ze.defaultProps={date_format:"YYYY-MM-DD",min_date:Object(ie.w)(0).format("YYYY-MM-DD"),max_date:Object(ie.w)().add(120,"y").format("YYYY-MM-DD")},Ze.propTypes={date_format:c.a.string,duration_date:c.a.oneOfType([c.a.number,c.a.string]),footer:c.a.string,has_range_selection:c.a.bool,has_today_btn:c.a.bool,holidays:c.a.arrayOf(c.a.shape({dates:c.a.array,descrip:c.a.string})),max_date:c.a.oneOfType([c.a.object,c.a.string]),min_date:c.a.oneOfType([c.a.object,c.a.string]),onChangeCalendarMonth:c.a.func,onSelect:c.a.func,start_date:c.a.oneOfType([c.a.number,c.a.string]),value:c.a.string,weekends:c.a.arrayOf(c.a.number)};var he=Ze;function Fe(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _e=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,g=new Array(r),c=0;c<r;c++)g[c]=arguments[c];return(n=We(this,(e=Ue(t)).call.apply(e,[this].concat(g)))).state={date_value:"",holidays:[],is_datepicker_visible:!1,is_clear_btn_visible:!1,value:n.props.value,weekends:[]},n.is_mounted=!1,n.handleVisibility=function(){n.setState(function(e){return{is_datepicker_visible:!e.is_datepicker_visible}})},n.onClickOutside=function(e){/purchase_/gi.test(e.target.id)||!n.mainNode.contains(e.target)&&n.state.is_datepicker_visible&&(n.setState({is_datepicker_visible:!1}),n.state.value&&"duration"!==n.props.mode&&n.updateDatePickerValue(Object(ie.h)(n.state.value,"DD MMM YYYY")))},n.onMouseEnter=function(){n.state.value&&("is_clearable"in n.props||n.props.is_clearable)&&n.setState({is_clear_btn_visible:!0})},n.onMouseLeave=function(){n.setState({is_clear_btn_visible:!1})},n.onSelectCalendar=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e;Object(ie.m)(r)||(r=""),"duration"===n.props.mode?n.updateDatePickerValue(r):n.updateDatePickerValue(Object(ie.h)(r,"DD MMM YYYY")),n.setState({is_datepicker_visible:t})},n.onChangeInput=function(e){var t=e.target.value,r=Object(ie.h)(Object(ie.a)(Object(ie.w)(),t),"DD MMM YYYY");n.updateDatePickerValue(r),n.props.onChange(e)},n.clearDatePickerInput=function(){n.setState({value:null},n.updateStore),n.calendar&&n.calendar.resetCalendar()},n.updateDatePickerValue=function(e){var t=n.props,r=t.date_format,g=t.mode,c=t.start_date;if(n.setState({value:e},n.updateStore),"duration"===g){var a=Object(ie.e)(e),i=Object(ie.h)(e,"DD MMM YYYY");n.setState({value:a,date_value:i},n.updateStore)}var o="duration"===g?Object(ie.h)(e,"DD MMM YYYY"):e;if(n.calendar&&(Object(ie.m)(o)||!o))if(o)n.calendar.setState({calendar_date:Object(ie.h)(o),selected_date:Object(ie.h)(o)});else{var I=Object(ie.h)(c,r);n.calendar.setState({calendar_date:I,selected_date:I})}},n.updateStore=function(){var e=n.props,t=e.name,r=e.onChange;r&&r({target:{name:t,value:n.state.value}})},n.renderInputField=function(){var e,t,r,g=n.props,c=g.is_read_only,a=g.mode,o=g.name,I=g.label,l=g.error_messages,s=n.props.placeholder;switch(a){case"duration":r=n.onChangeInput,t="text",e=n.state.value;break;default:s=s||Object(Y.localize)("Select a date"),t="text",e=Object(ie.h)(n.props.value,"DD MMM YYYY")}return i.a.createElement(U.a,{className:"datepicker__input-field",classNameInput:"datepicker__input trade-container__input","data-tip":!1,"data-value":n.state.value,error_messages:l,id:"dt_".concat(o,"_input"),is_autocomplete_disabled:!0,is_hj_whitelisted:!0,label:I,is_read_only:c,name:o,onChange:r,onClick:n.handleVisibility,placeholder:s,type:t,value:e})},n}var n,r,g,c,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(t,i.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.is_mounted=!0,document.addEventListener("click",this.onClickOutside,!0);var e=this.props,t=e.mode,n=e.value,r="duration"===t?Object(ie.h)(Object(ie.a)(Object(ie.w)(),n||1),"DD MMM YYYY"):Object(ie.h)(n,"DD MMM YYYY");this.updateDatePickerValue(r),this.props.disable_trading_events&&this.onChangeCalendarMonth(Object(ie.l)(this.state.value))}},{key:"componentWillUnmount",value:function(){this.is_mounted=!1,document.removeEventListener("click",this.onClickOutside,!0)}},{key:"onChangeCalendarMonth",value:(c=regeneratorRuntime.mark(function e(t){var n,r,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae(t,this.props.underlying);case 2:n=e.sent,r=[],g=[],n.forEach(function(e){var t=e.dates.split(", ");-1!==t.indexOf("Fridays")&&(g=[6,0]),r.push({dates:t,descrip:e.descrip})}),this.is_mounted&&this.setState({holidays:r,weekends:g});case 7:case"end":return e.stop()}},e,this)}),a=function(){var e=this,t=arguments;return new Promise(function(n,r){var g=c.apply(e,t);function a(e){fe(g,n,r,a,i,"next",e)}function i(e){fe(g,n,r,a,i,"throw",e)}a(void 0)})},function(e){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this;return this.props.is_nativepicker?i.a.createElement("div",{ref:function(t){e.mainNode=t},className:"datepicker"},i.a.createElement("input",{id:this.props.name,name:this.props.name,className:"input trade-container__input datepicker__input",type:"date",value:this.state.value,min:this.props.min_date,max:this.props.max_date,onChange:function(t){var n=t.nativeEvent.target;window.setTimeout(function(){n.defaultValue=""},0),e.onSelectCalendar(t.target.value)}}),i.a.createElement("label",{className:"datepicker__native-overlay",htmlFor:this.props.name},this.state.value||this.props.placeholder,i.a.createElement(j.a,{icon:"IconArrow",className:"datepicker__arrowhead"}))):i.a.createElement("div",{id:this.props.id,ref:function(t){e.mainNode=t},className:"datepicker",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.renderInputField(),i.a.createElement(j.a,{icon:"IconCalendar",className:I()("datepicker__icon datepicker__icon--calendar",{"datepicker__icon--is-hidden":this.state.is_clear_btn_visible,"datepicker__icon--with-label":this.props.label}),onClick:this.handleVisibility}),this.props.is_clearable&&i.a.createElement(j.a,{icon:"IconClear",className:I()("datepicker__icon datepicker__icon--clear",{"datepicker__icon--is-hidden":!this.state.is_clear_btn_visible}),onClick:this.state.is_clear_btn_visible?this.clearDatePickerInput:void 0}),i.a.createElement(le.CSSTransition,{in:this.state.is_datepicker_visible,timeout:100,classNames:{enter:"datepicker__picker--enter datepicker__picker--".concat(this.props.alignment,"-enter"),enterDone:"datepicker__picker--enter-done datepicker__picker--".concat(this.props.alignment,"-enter-done"),exit:"datepicker__picker--exit datepicker__picker--".concat(this.props.alignment,"-exit")},unmountOnExit:!0},i.a.createElement("div",{className:I()("datepicker__picker",{"datepicker__picker--left":"left"===this.props.alignment})},i.a.createElement(he,{ref:function(t){e.calendar=t},onSelect:this.onSelectCalendar,onChangeCalendarMonth:this.props.disable_trading_events?this.onChangeCalendarMonth.bind(this):void 0,holidays:this.state.holidays,weekends:this.state.weekends,duration_date:this.state.value,date_format:this.props.date_format,has_today_btn:this.props.has_today_btn,has_range_selection:this.props.has_range_selection,footer:this.props.footer,max_date:this.props.max_date,min_date:this.props.min_date,start_date:this.props.start_date,value:"duration"===this.props.mode?this.state.date_value:this.props.value}))))}}])&&ve(n.prototype,r),g&&ve(n,g),t}();_e.defaultProps={date_format:he.defaultProps.date_format,mode:"date"},_e.propTypes=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};Fe(n,!0).forEach(function(t){Xe(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):Fe(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({},he.propTypes,{error_messages:c.a.array,label:c.a.string});var He=Object(r.observer)(_e),xe=function(e){var t,n,r,g,c=e.duration_d,a=e.duration_min_max,o=e.duration_units_list,I=e.expiry_date,l=e.expiry_type,s=e.is_24_hours_contract,C=e.mode,u=e.name,A=e.onChange,b=e.server_time,d=e.start_time,B=e.start_date,p=e.symbol,m=e.validation_errors,y=Object(K.d)(o),Q=y?Object(ie.w)(b).clone():Object(ie.w)(b).clone().add(a.daily.min,"second"),G=Object(ie.r)(Object(ie.w)(Q),Object(ie.p)(d)?d:b.format("HH:mm:ss")),Z=a.daily?a.daily.max:31536e3,h="duration"===l;s?(n=G.clone().startOf("day"),t=G.clone().add(B?86400:Z,"second")):(n=G.clone().startOf("day"),t=G.clone().add(Z,"second")),h?(y&&n.add(1,"day"),r=!1,g=!1):(r=!0,g=!0);var F=h?m.duration:m.expiry_date,X=h?(c||"").toString():I;return i.a.createElement(He,{alignment:"left",disable_year_selector:!0,disable_trading_events:!0,error_messages:F||[],has_today_btn:r,has_range_selection:"duration"===C,is_nativepicker:!1,is_read_only:g,label:1===o.length?o[0].text:null,mode:C,name:u,onChange:A,min_date:n,max_date:t,start_date:B,underlying:p,value:X})};xe.propTypes={duration:c.a.oneOfType([c.a.string,c.a.number]),duration_min_max:c.a.object,duration_units_list:r.PropTypes.arrayOrObservableArray,expiry_date:c.a.oneOfType([c.a.string,c.a.number]),expiry_type:c.a.string,is_24_hours_contract:c.a.bool,mode:c.a.string,name:c.a.string,onChange:c.a.func,server_time:c.a.object,start_date:c.a.oneOfType([c.a.number,c.a.string]),start_time:c.a.string,symbol:c.a.string,validation_errors:c.a.object};var Re=Object(N.b)(function(e){var t=e.modules,n=e.common,r=e.ui;return{duration_min_max:t.trade.duration_min_max,duration_units_list:t.trade.duration_units_list,expiry_date:t.trade.expiry_date,expiry_type:t.trade.expiry_type,onChange:t.trade.onChange,server_time:n.server_time,start_date:t.trade.start_date,start_time:t.trade.start_time,symbol:t.trade.symbol,validation_errors:t.trade.validation_errors,duration_d:r.duration_d}})(xe);function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,g=!1,c=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){g=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(g)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Se=function(e){var t=e.preClass,n=e.selected_time,r=e.end_time,g=e.start_time,c=e.onChange,a=e.className,o=g?Object(ie.w)(g):Object(ie.w)(),l=r?Object(ie.w)(r):Object(ie.w)().hour("23").minute("59").seconds("59").milliseconds("999"),s=Object(ie.w)(),C=Te(n.split(":"),2),u=C[0],A=C[1],b=Oe(Array(24).keys()).map(function(e){return"0".concat(e).slice(-2)}),d=Oe(Array(12).keys()).map(function(e){return"0".concat(5*e).slice(-2)}),B=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(r&&n){var g=n.split(":"),a=Te(g,2),i=a[0],o=a[1];("h"===e&&t!==i||"m"===e&&t!==o)&&c("".concat("h"===e?t:i,":").concat("m"===e?t:o))}};return i.a.createElement("div",{className:I()("".concat(t,"__dialog"),"".concat(a))},i.a.createElement("div",{className:"".concat(t,"__selector")},i.a.createElement("div",{className:"".concat(t,"__selector--hours")},i.a.createElement("div",{className:I()("".concat(t,"__selector-list-title"),"center-text")},i.a.createElement("strong",null,Object(Y.localize)("Hour"))),i.a.createElement("div",null,b.map(function(e,r){s.hour(e);var g=o.clone().minute(0),c=s.isBetween(g,l),a=s.isBetween(o,l,"minute"),C=s.minutes()>52?c&&a:c;return i.a.createElement("div",{className:I()("".concat(t,"__selector-list-item"),Ye({},"".concat(t,"__selector-list-item--selected"),u===e),Ye({},"".concat(t,"__selector-list-item--disabled"),!C)),key:r,onClick:function(){B("h",e,n,C)}},e)}))),i.a.createElement("div",{className:"".concat(t,"__selector--minutes")},i.a.createElement("div",{className:I()("".concat(t,"__selector-list-title"),"center-text")},i.a.createElement("strong",null,Object(Y.localize)("Minute"))),i.a.createElement("div",null,d.map(function(e,r){s.hour(u).minute(e);var g=s.isBetween(o,l,"minute");return i.a.createElement("div",{className:I()("".concat(t,"__selector-list-item"),Ye({},"".concat(t,"__selector-list-item--selected"),A===e),Ye({},"".concat(t,"__selector-list-item--disabled"),!g)),key:r,onClick:function(){B("m",e,n,g)}},e)})))))};Se.propTypes={className:c.a.string,end_time:c.a.oneOfType([c.a.number,c.a.string,c.a.object]),onChange:c.a.func,preClass:c.a.string,selected_time:c.a.oneOfType([c.a.number,c.a.string,c.a.object]),start_time:c.a.oneOfType([c.a.number,c.a.string,c.a.object])};var Je=Se;function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,g=new Array(r),c=0;c<r;c++)g[c]=arguments[c];return(n=we(this,(e=ke(t)).call.apply(e,[this].concat(g)))).state={is_open:!1},n.toggleDropDown=function(){n.setState(function(e){return{is_open:!e.is_open}})},n.handleChange=function(e){var t="object"===Ee(e)?e.target.selected_time:e;t!==n.props.selected_time&&n.props.onChange({target:{name:n.props.name,value:t}})},n.saveRef=function(e){e&&("INPUT"!==e.nodeName?n.wrapper_ref=e:n.target_element=e)},n.handleClickOutside=function(e){n.wrapper_ref&&!n.wrapper_ref.contains(e.target)&&n.state.is_open&&n.setState({is_open:!1})},n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,i.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e,t,n,r=this.props,g=r.selected_time,c=r.name,a=r.is_nativepicker,o=r.placeholder,l=r.end_time,s=r.start_time,C=r.validation_errors;return i.a.createElement("div",{ref:this.saveRef,className:I()("time-picker",(e={},t="".concat("time-picker","--padding"),n=this.props.padding,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e))},a?i.a.createElement("input",{type:"time",id:"dt_".concat(c,"_input"),value:g,onChange:this.handleChange,name:c,min:s,max:l}):i.a.createElement(i.a.Fragment,null,i.a.createElement(U.a,{error_messages:C,type:"text",is_hj_whitelisted:!0,is_read_only:!0,id:"dt_".concat(c,"_input"),className:I()("".concat("time-picker","-input")),value:"".concat(g," GMT"),onClick:this.toggleDropDown,name:c,placeholder:o}),i.a.createElement(j.a,{icon:"IconClock",className:"".concat("time-picker","__icon")}),i.a.createElement(le.CSSTransition,{in:this.state.is_open,classNames:{enter:"time-picker__dialog--enter",enterDone:"time-picker__dialog--enter-done",exit:"time-picker__dialog--exit"},timeout:100,unmountOnExit:!0},i.a.createElement(Je,{end_time:l,start_time:s,className:"from-left",onChange:this.handleChange,preClass:"time-picker",selected_time:g}))))}}])&&De(n.prototype,r),g&&De(n,g),t}();je.propTypes={end_time:c.a.oneOfType([c.a.number,c.a.string,c.a.object]),is_clearable:c.a.bool,is_nativepicker:c.a.bool,name:c.a.string,onChange:c.a.func,padding:c.a.string,placeholder:c.a.string,selected_time:c.a.string,start_time:c.a.oneOfType([c.a.number,c.a.string,c.a.object])};var Le=Object(r.observer)(je),Pe=function(e,t){return e.minute(Math.ceil(e.minute()/t)*t)},Ke=function(e){var t=e.expiry_date,n=e.expiry_time,r=e.market_close_times,g=e.market_open_times,c=e.onChange,a=e.server_time,o=Object(ie.w)(t),I=Object(ie.r)(o.clone(),g.slice(-1)[0]),l=Object(ie.r)(o.clone(),r.slice(-1)[0]),s=Object(ie.r)(o.clone(),n),C=Object(ie.w)(a),u=function(e,t,n){var r={start:e.isBefore(t)?t:e,end:n};return r.start=Pe(r.start,5),r}(C.clone(),I.clone(),l),A=function(e,t,n){return t.isAfter(n)?Pe(t,5).format("HH:mm"):n.isAfter(e)?Pe(n,5).format("HH:mm"):Pe(e,5).format("HH:mm")}(C.clone(),s,I);return i.a.createElement(Le,{end_time:u.end,onChange:c,name:"expiry_time",placeholder:"12:00",start_time:u.start,selected_time:A})};Ke.propTypes={expiry_date:c.a.oneOfType([c.a.string,c.a.number]),expiry_time:c.a.string,market_close_times:c.a.array,name:c.a.string,onChange:c.a.func,server_time:c.a.object};var Me=Object(N.b)(function(e){var t=e.modules,n=e.common;return{duration_units_list:t.trade.duration_units_list,expiry_time:t.trade.expiry_time,expiry_date:t.trade.expiry_date,market_close_times:t.trade.market_close_times,market_open_times:t.trade.market_open_times,onChange:t.trade.onChange,server_time:n.server_time}})(Ke);function qe(){return(qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var $e=function(e){var t=e.advanced_duration_unit,n=e.advanced_expiry_type,r=e.duration_units_list,g=e.duration_t,c=e.changeDurationUnit,o=e.getDurationFromUnit,l=e.expiry_date,C=e.expiry_list,u=e.expiry_type,A=e.number_input_props,b=e.onChange,d=e.onChangeUiStore,B=e.server_time,p=e.shared_input_props,m=e.start_date,y=e.validation_errors,Q=!1;if("endtime"===u){var G=Object(K.d)(r);Q=(!!m||Object(ie.w)(l||B).isSame(Object(ie.w)(B),"day"))&&G}var Z=I()("endtime-container",{"has-time":Q});return i.a.createElement(a.Fragment,null,C.length>1&&i.a.createElement(v,{id:"dt_advanced_duration_toggle",buttons_arr:C,name:"advanced_expiry_type",is_animated:!0,onChange:function(e){var t=e.target,n=t.name,r=t.value;b({target:{name:"expiry_type",value:r}}),d({name:n,value:r})},value:n}),"duration"===u?i.a.createElement(a.Fragment,null,i.a.createElement("div",{className:"duration-container"},r.length>1&&i.a.createElement(s.a,{id:"duration",is_alignment_left:!0,is_nativepicker:!1,list:r,name:"advanced_duration_unit",onChange:c,value:t}),"t"===t&&i.a.createElement(ae,qe({name:"duration",ticks:10,value:g},p)),"d"===t&&i.a.createElement(Re,{mode:"duration",name:"duration",is_24_hours_contract:Q}),"t"!==t&&"d"!==t&&i.a.createElement(U.a,qe({id:"dt_advanced_duration_input",classNameInput:"trade-container__input",error_messages:y.duration,label:1===r.length?r[0].text:null,name:"duration",value:o(t)},A,p)))):i.a.createElement(a.Fragment,null,i.a.createElement("div",{className:Z},i.a.createElement(Re,{name:"expiry_date",is_24_hours_contract:Q}),Q&&i.a.createElement(Me,null))))};$e.propTypes={advanced_duration_unit:c.a.string,advanced_expiry_type:c.a.string,changeDurationUnit:c.a.func,duration_t:c.a.number,duration_units_list:r.PropTypes.arrayOrObservableArray,expiry_date:c.a.oneOfType([c.a.string,c.a.number]),expiry_list:c.a.array,expiry_type:c.a.string,getDurationFromUnit:c.a.func,number_input_props:c.a.object,onChange:c.a.func,onChangeUiStore:c.a.func,server_time:c.a.object,shared_input_props:c.a.object,start_date:c.a.oneOfType([c.a.number,c.a.string]),validation_errors:c.a.object};var et=Object(N.b)(function(e){return{validation_errors:e.modules.trade.validation_errors}})($e);function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var nt=function(e){var t,n,r=e.changeDurationUnit,g=e.duration_t,c=e.duration_units_list,o=e.getDurationFromUnit,I=e.number_input_props,l=e.shared_input_props,s=e.simple_duration_unit,C=e.validation_errors,u=!c.some(function(e){return"t"===e.value});return i.a.createElement(a.Fragment,null,c.length>1&&i.a.createElement(v,{id:"dt_simple_duration_toggle",buttons_arr:(t=c,n=t.filter(function(e){return"t"===e.value||"m"===e.value}),n.length<=1?[]:n),is_animated:!0,name:"simple_duration_unit",onChange:r,value:s}),"t"===s&&i.a.createElement(ae,tt({name:"duration",value:g,ticks:10},l)),"d"===s&&i.a.createElement(Re,{alignment:"left",mode:"duration",name:"duration"}),"t"!==s&&"d"!==s&&i.a.createElement(U.a,tt({id:"dt_simple_duration_input",classNameInput:"trade-container__input",error_messages:C.duration,name:"duration",label:u?c[0].text:null,value:o(s)},I,l)))};nt.propTypes={changeDurationUnit:c.a.func,duration_t:c.a.number,duration_units_list:r.PropTypes.arrayOrObservableArray,getDurationFromUnit:c.a.func,number_input_props:c.a.object,shared_input_props:c.a.object,simple_duration_unit:c.a.string,validation_errors:c.a.object};var rt=Object(N.b)(function(e){return{validation_errors:e.modules.trade.validation_errors}})(nt);function gt(){return(gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ct(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var it=function(e){var t=e.advanced_duration_unit,n=e.advanced_expiry_type,r=e.duration,g=e.duration_unit,c=e.duration_units_list,o=e.duration_t,l=e.expiry_date,s=e.expiry_time,C=e.expiry_type,u=e.getDurationFromUnit,A=e.hasDurationUnit,b=e.is_advanced_duration,d=e.is_minimized,B=e.min_value,p=e.max_value,m=e.onChange,y=e.onChangeUiStore,Q=e.onChangeMultiple,G=e.simple_duration_unit,Z=e.server_time,h=e.start_date,F=e.market_open_times,X=[{text:Object(Y.localize)("Duration"),value:"duration"}],V=X.find(function(e){return"endtime"===e.value});if(1===c.length&&"t"===g?V&&X.pop():V||X.push({text:Object(Y.localize)("End time"),value:"endtime"}),d){var f=Object(ie.w)(l),v=(c.find(function(e){return e.value===g})||{}).text;return i.a.createElement("div",{className:"fieldset-minimized fieldset-minimized__duration"},"duration"===C?"".concat(r," ").concat(v):"".concat(f.format("ddd - DD MMM, YYYY"),"\n").concat(s))}var U=function(e){var t=e.target,n=t.name,r=t.value,g=u(r);y({name:n,value:r}),Q({duration_unit:r,duration:g})},N={shared_input:{is_hj_whitelisted:!0,onChange:function(e){var n=e.target,r=n.name,g=n.value,c="duration_".concat(b?t:G);y({name:c,value:+g}),m({target:{name:r,value:+g}})},max_value:p,min_value:B},number_input:{type:"number",is_incrementable:!0}},_=X.length>1||c.length>1;return i.a.createElement(W.a,{className:I()("trade-container__fieldset",{"trade-container__fieldset--advanced":b})},!_&&i.a.createElement(ae,gt({name:"duration",value:o},N.shared_input)),_&&i.a.createElement(a.Fragment,null,b&&i.a.createElement(et,{advanced_expiry_type:n,advanced_duration_unit:t,changeDurationUnit:U,duration_t:o,duration_units_list:c,expiry_date:l,expiry_list:X,expiry_type:C,getDurationFromUnit:u,market_open_times:F,number_input_props:N.number_input,onChange:m,onChangeUiStore:y,server_time:Z,shared_input_props:N.shared_input,start_date:h}),!b&&i.a.createElement(rt,{getDurationFromUnit:u,changeDurationUnit:U,duration_t:o,duration_units_list:c,number_input_props:N.number_input,shared_input_props:N.shared_input,simple_duration_unit:G}),i.a.createElement(Ie,{name:"is_advanced_duration",onChange:function(e){var r=e.target,g=r.name,a=r.value;y({name:g,value:a});var i=a?t:G;A(i)||(i=c[0].value,y({name:"".concat(a?"advanced":"simple","_duration_unit"),value:i}));var o={duration_unit:i,duration:u(i)};a||"duration"===C||(o.expiry_type="duration"),a&&C!==n&&(o.expiry_type=n),Q(function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};ct(n,!0).forEach(function(t){at(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):ct(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({},o))},value:b})))};it.propTypes={advanced_duration_unit:c.a.string,advanced_expiry_type:c.a.string,duration:c.a.number,duration_t:c.a.number,duration_unit:c.a.string,duration_units_list:r.PropTypes.arrayOrObservableArray,expiry_date:c.a.oneOfType([c.a.string,c.a.number]),expiry_time:c.a.string,expiry_type:c.a.string,getDurationFromUnit:c.a.func,hasDurationUnit:c.a.func,is_advanced_duration:c.a.bool,is_minimized:c.a.bool,market_open_times:c.a.array,max_value:c.a.number,min_value:c.a.number,onChange:c.a.func,onChangeUiStore:c.a.func,server_time:c.a.object,simple_duration_unit:c.a.string,start_date:c.a.oneOfType([c.a.number,c.a.string]),validation_errors:c.a.object};var ot=it;function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(){return(lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,g=!1,c=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){g=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(g)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ct(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function At(e,t){return!t||"object"!==It(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e,t){return(dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Bt=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,g=new Array(r),c=0;c<r;c++)g[c]=arguments[c];return(n=At(this,(e=bt(t)).call.apply(e,[this].concat(g)))).hasDurationUnit=function(e){var t=Ct(n.props.duration_units_list);return n.props.duration_units_list.length>1&&!n.props.is_advanced_duration&&(t=t.filter(function(e){return"m"===e.value||"t"===e.value})),t.some(function(t){return t.value===e})},n.advancedHasWrongExpiry=function(){return n.props.is_advanced_duration&&n.props.expiry_type!==n.props.advanced_expiry_type},n.handleEndTime=function(){n.props.duration_units_list.length>1||n.props.is_advanced_duration?(n.props.is_advanced_duration||n.props.onChangeUiStore({name:"is_advanced_duration",value:!0}),n.props.onChangeUiStore({name:"advanced_expiry_type",value:"endtime"})):n.props.onChange({target:{name:"expiry_type",value:"duration"}})},n.getDurationMinMaxValues=function(e,t,n){var r=Object(K.b)(+e[t].max,n);return[Object(K.b)(+e[t].min,n),r]},n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}(t,i.a.Component),n=t,(r=[{key:"setDurationUnit",value:function(){var e=this.props.duration_units_list[0].value,t=this.props.getDurationFromUnit(e);this.props.onChangeUiStore({name:"".concat(this.props.is_advanced_duration?"advanced":"simple","_duration_unit"),value:e}),this.props.onChangeMultiple({duration_unit:e,duration:+t})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.advanced_duration_unit,n=e.advanced_expiry_type,r=e.duration,g=e.duration_unit,c=e.expiry_type,a=e.getDurationFromUnit,i=e.is_advanced_duration,o=e.onChange,I=e.onChangeUiStore,l=e.simple_duration_unit,s=i?t:l,C=a(s);g!==s&&I({name:"".concat(i?"advanced":"simple","_duration_unit"),value:g}),+r!=+C&&I({name:"duration_".concat(g),value:r}),"endtime"===c&&this.handleEndTime(),this.advancedHasWrongExpiry()&&o({target:{name:"expiry_type",value:n}}),this.assertDurationIsWithinBoundary(g,C,I,o)}},{key:"componentWillReact",value:function(){var e=this.props,t=e.advanced_expiry_type,n=e.duration,r=e.duration_unit,g=e.expiry_type,c=e.getDurationFromUnit,a=e.is_advanced_duration,i=e.onChange,o=e.onChangeUiStore,I=c(r);!a&&"duration"!==g&&i({target:{name:"expiry_type",value:"duration"}}),this.advancedHasWrongExpiry()&&i({target:{name:"expiry_type",value:t}}),n!==I&&o({name:"duration_".concat(r),value:n}),this.assertDurationIsWithinBoundary(r,I,o,i)}},{key:"assertDurationIsWithinBoundary",value:function(e,t,n,r){var g=st(this.getDurationMinMaxValues(this.props.duration_min_max,this.props.contract_expiry_type,e),2),c=g[0],a=g[1];t<c?(n({name:"duration_".concat(e),value:c}),r({target:{name:"duration",value:c}})):t>a&&(n({name:"duration_".concat(e),value:a}),r({target:{name:"duration",value:a}}))}},{key:"render",value:function(){var e=this.props,t=e.advanced_duration_unit,n=e.contract_expiry_type,r=e.duration_min_max,g=e.duration_unit,c=e.duration_units_list,a=e.is_advanced_duration,o=e.simple_duration_unit,I=a?t:o,l=!this.hasDurationUnit(I),s=!a&&"d"===o&&4===c.length,C=st(this.getDurationMinMaxValues(r,n,g),2),u=C[0],A=C[1];return(l||s)&&this.setDurationUnit(),i.a.createElement(ot,lt({hasDurationUnit:this.hasDurationUnit,max_value:A,min_value:u},this.props))}}])&&ut(n.prototype,r),g&&ut(n,g),t}();Bt.propTypes={advanced_duration_unit:c.a.string,advanced_expiry_type:c.a.string,contract_expiry_type:c.a.string,duration:c.a.number,duration_d:c.a.number,duration_h:c.a.number,duration_m:c.a.number,duration_min_max:c.a.object,duration_s:c.a.number,duration_t:c.a.number,duration_unit:c.a.string,duration_units_list:r.PropTypes.arrayOrObservableArray,expiry_date:c.a.oneOfType([c.a.string,c.a.number]),expiry_time:c.a.string,expiry_type:c.a.string,getDurationFromUnit:c.a.func,is_advanced_duration:c.a.bool,is_minimized:c.a.bool,market_open_times:c.a.array,onChange:c.a.func,onChangeMultiple:c.a.func,onChangeUiStore:c.a.func,sessions:r.PropTypes.arrayOrObservableArray,simple_duration_unit:c.a.string,start_date:c.a.oneOfType([c.a.number,c.a.string]),start_time:c.a.string,symbol:c.a.string};var pt=Object(N.b)(function(e){var t=e.modules,n=e.ui;return{advanced_duration_unit:n.advanced_duration_unit,advanced_expiry_type:n.advanced_expiry_type,contract_expiry_type:t.trade.contract_expiry_type,duration:t.trade.duration,duration_unit:t.trade.duration_unit,duration_units_list:t.trade.duration_units_list,duration_min_max:t.trade.duration_min_max,duration_t:n.duration_t,expiry_date:t.trade.expiry_date,expiry_time:t.trade.expiry_time,expiry_type:t.trade.expiry_type,getDurationFromUnit:n.getDurationFromUnit,is_advanced_duration:n.is_advanced_duration,onChange:t.trade.onChange,onChangeUiStore:n.onChangeUiStore,onChangeMultiple:t.trade.onChangeMultiple,simple_duration_unit:n.simple_duration_unit,start_date:t.trade.start_date,market_open_times:t.trade.market_open_times}})(Bt),mt=function(e){var t=e.arr_arr_numbers,n=e.name,r=e.onChange,g=e.selected_number,c=function(e){+e.target.getAttribute("data-value")!==g&&r({target:{name:n,value:+e.target.getAttribute("data-value")}})};return i.a.createElement("div",{className:"number-selector"},t.map(function(e,t){return i.a.createElement("div",{className:"number-selector__row",key:t},e.map(function(e){return i.a.createElement("span",{key:e,className:I()("number-selector__selection",{"number-selector__selection--selected":g===e}),"data-value":e,onClick:c},e)}))}))};mt.propTypes={arr_arr_numbers:c.a.arrayOf(c.a.array),name:c.a.string,onChange:c.a.func,selected_number:c.a.number};var yt=mt;function Qt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Gt=function(e){var t=e.is_minimized,n=e.last_digit,r=e.onChange;if(t)return i.a.createElement("div",{className:"fieldset-minimized"},"".concat(Object(Y.localize)("Last Digit"),": ").concat(n));var g=Qt(Array(5).keys());return i.a.createElement(W.a,{className:"trade-container__fieldset",header:Object(Y.localize)("Last Digit Prediction"),is_center:!0},i.a.createElement(yt,{arr_arr_numbers:[g,g.map(function(e){return e+5})],name:"last_digit",onChange:r,selected_number:+n}))};Gt.propTypes={is_minimized:c.a.bool,last_digit:c.a.oneOfType([c.a.number,c.a.string]),onChange:c.a.func};var Zt=Object(N.b)(function(e){var t=e.modules;return{last_digit:t.trade.last_digit,onChange:t.trade.onChange}})(Gt);function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xt(e,t){return!t||"object"!==ht(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xt(this,Vt(t).apply(this,arguments))}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(t,i.a.Component),n=t,(r=[{key:"isVisible",value:function(e){return this.props.form_components.includes(e)}},{key:"render",value:function(){var e=this.props.is_minimized;return i.a.createElement(i.a.Fragment,null,this.isVisible("duration")&&i.a.createElement(pt,{key:"duration",is_minimized:e}),this.isVisible("barrier")&&i.a.createElement(P,{key:"barrier",is_minimized:e}),this.isVisible("last_digit")&&i.a.createElement(Zt,{key:"last_digit",is_minimized:e}),this.isVisible("amount")&&i.a.createElement(z,{key:"amount",is_minimized:e}))}}])&&Ft(n.prototype,r),g&&Ft(n,g),t}();vt.propTypes={form_components:r.PropTypes.arrayOrObservableArray,is_minimized:c.a.bool};t.a=Object(N.b)(function(e){return{form_components:e.modules.trade.form_components}})(vt)},240:function(e,t,n){"use strict";var r=n(1),g=n.n(r),c=n(0),a=n.n(c),i=n(11),o=n(5),I=n.n(o),l=n(8),s=n(37),C=n(139),u=function(e){var t=e.children,n=e.is_mobile,r=e.open,g=e.onClose;return n?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"contract-type-widget__select-arrow"}),a.a.createElement(C.a,{title:"Select Trading Type",visible:r,onClose:g},t)):a.a.createElement(s.CSSTransition,{in:r,timeout:100,classNames:{enter:"contracts-type-dialog--enter",enterDone:"contracts-type-dialog--enterDone",exit:"contracts-type-dialog--exit"},unmountOnExit:!0},a.a.createElement("div",{className:"contracts-type-dialog"},a.a.createElement("div",{className:"contracts-type-dialog__list-wrapper"},t)))};u.propTypes={children:g.a.element,is_mobile:g.a.bool,onClose:g.a.func,open:g.a.bool};var A=u,b=n(13),d=function(e){var t=e.contracts,n=e.name,r=e.value,g=e.is_equal,c=e.handleInfoClick,i=e.handleSelect;return t.map(function(e,t){return a.a.createElement("div",{id:"dt_contract_".concat(e.value,"_item"),key:t,className:I()("contract-type-item",{"contract-type-item--selected":r===e.value,"contract-type-item--invisible":"rise_fall"===e.value&&g||"rise_fall_equal"===e.value&&!g}),name:n,value:e.value,onClick:function(t){return i(e,t)}},a.a.createElement(l.a,{icon:"IconTradeCategory",category:e.value,className:"contract-type-item__icon-wrapper"}),a.a.createElement("span",{className:"contract-type-item__title"},e.text),a.a.createElement("div",{id:"info-icon",className:"contract-type-item__icon",onClick:function(){return c(e)}},a.a.createElement(l.a,{icon:"IconInfoOutline"})))})};d.propTypes={contracts:b.PropTypes.arrayOrObservableArray,handleInfoClick:g.a.func,handleSelect:g.a.func,is_equal:g.a.oneOfType([g.a.number,g.a.string]),name:g.a.string,value:g.a.string};var B=d,p=function(e){var t=e.handleInfoClick,n=e.handleSelect,r=e.is_equal,g=e.list,c=e.name,i=e.value;return Object.keys(g).map(function(e){return!["In/Out","Asians"].includes(e)&&a.a.createElement(a.a.Fragment,{key:e},a.a.createElement("div",{className:"contract-type-list"},a.a.createElement("div",{className:"contract-type-list__label"},a.a.createElement("span",null,e)),a.a.createElement("div",{className:"contract-type-list__contracts-wrapper"},a.a.createElement(B,{contracts:g[e],name:c,value:i,handleSelect:n,handleInfoClick:t,is_equal:r}))))})};p.propTypes={handleInfoClick:g.a.func,handleSelect:g.a.func,is_equal:g.a.oneOfType([g.a.number,g.a.string]),list:b.PropTypes.objectOrObservableObject,name:g.a.string,value:g.a.string};var m=p,y=function(e){var t=e.children,n=e.is_mobile,r=e.open,g=e.onClose,c=e.title;return n?a.a.createElement(C.a,{visible:r,onClose:g,title:c,wrapperClassName:"trade-type-info-modal"},t):a.a.createElement(s.CSSTransition,{classNames:{enter:"trade-type-info-dialog--enter",enterDone:"trade-type-info-dialog--enterDone",exit:"trade-type-info-dialog--exit"},in:r,timeout:100,unmountOnExit:!0},a.a.createElement("div",{className:"trade-type-info-dialog"},a.a.createElement("div",{className:"trade-type-info-dialog__info-wrapper"},t)))};y.propTypes={children:g.a.element,is_mobile:g.a.bool,onClose:g.a.func,open:g.a.bool,title:g.a.string};var Q=y,G=n(99),Z=n(28),h=n.n(Z),F=(n(65),n(3)),X=function(e){var t=e.handleNavigationClick,n=e.handleNextClick,r=e.handlePrevClick,g=e.is_dark_theme,c=e.is_mobile,i=e.item,o=e.item_index,s=e.itemList,C=e.itemListLength,u=e.onBackButtonClick,A=e.onSubmitButtonClick;return a.a.createElement("div",{id:"dt_contract_info_".concat(i.value)},!c&&a.a.createElement("div",{className:"trade-type-info-dialog__header"},a.a.createElement("span",{id:"dt_contract_info_back_nav",onClick:function(){return u()}},a.a.createElement(l.a,{icon:"IconBack"})),a.a.createElement("span",{className:"title"},i.text)),a.a.createElement("div",{className:"trade-type-info-dialog__body"},a.a.createElement("div",{className:"trade-type-info-dialog__card-wrapper",style:{transform:"translate3d(-".concat(274*o,"px, 0, 0)")}},s.map(function(e,t){return a.a.createElement("div",{className:"trade-type-info-dialog__card",key:t},a.a.createElement("div",{className:"trade-type-info-dialog__gif"},a.a.createElement(l.a,{icon:"TradeCategoriesGIF",category:e.value,className:"trade-type-info-dialog__gif-image",is_dark_theme:g})),a.a.createElement("div",{className:"trade-type-info-dialog__content"},a.a.createElement(G.Scrollbars,{autoHide:!0,style:{height:"100%"}},a.a.createElement(l.a,{icon:"TradeCategories",category:e.value}))),C>1&&a.a.createElement("div",null,a.a.createElement(h.a,{id:"dt_contract_info_".concat(i.value,"_button"),className:"btn--primary--orange trade-type-info-dialog__choose-button",onClick:function(){return A(e)},text:Object(F.localize)("Choose")})))}))),C>1&&a.a.createElement("div",{className:"trade-type-info-navigation"},a.a.createElement("div",{id:"dt_contract_info_left_nav",className:"trade-type-info-navigation__icon",onClick:function(){return r(s)}},a.a.createElement(l.a,{icon:"IconChevronLeft"})),a.a.createElement("div",{className:"trade-type-info-navigation__list"},a.a.createElement("i",{className:I()("trade-type-info-navigation__circle-button","trade-type-info-navigation__circle-button--active"),style:{transform:"translate3d(".concat(16*o,"px, 0, 0)")}}),s.map(function(e,n){return a.a.createElement(a.a.Fragment,{key:n},a.a.createElement("div",{id:"dt_contract_info_".concat(e.value,"_circle"),className:"trade-type-info-navigation__circle-button",onClick:function(){return t(e)}}))})),a.a.createElement("div",{id:"dt_contract_info_right_nav",className:"trade-type-info-navigation__icon",onClick:function(){return n(s)}},a.a.createElement(l.a,{icon:"IconChevronRight"}))))};X.propTypes={handleNavigationClick:g.a.func,handleNextClick:g.a.func,handlePrevClick:g.a.func,is_dark_theme:g.a.bool,is_mobile:g.a.bool,item:g.a.object,item_index:g.a.number,itemList:g.a.array,onBackButtonClick:g.a.func,onSubmitButtonClick:g.a.func};var V=X;function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,g=new Array(r),c=0;c<r;c++)g[c]=arguments[c];return(n=W(this,(e=U(t)).call.apply(e,[this].concat(g)))).state={is_dialog_open:!1,is_info_dialog_open:!1,item:{}},n.handleSelect=function(e,t){e.value!==n.props.value&&"info-icon"!==t.target.id&&n.props.onChange({target:{name:n.props.name,value:e.value}}),n.handleVisibility()},n.onSubmitButtonClick=function(e){e.value!==n.props.value&&n.props.onChange({target:{name:n.props.name,value:e.value}}),n.handleInfoVisibility()},n.handleInfoClick=function(e){n.setState({item:e}),n.handleInfoVisibility(),n.handleVisibility()},n.handleNavigationClick=function(e){n.setState({item:e})},n.handleNextClick=function(e){var t=e.length,r=n.state.item,g=e.findIndex(function(e){return e.value===r.value})+1;g<t?n.handleNavigationClick(e[g]):n.handleNavigationClick(e[0])},n.handlePrevClick=function(e){var t=e.length,r=n.state.item,g=e.findIndex(function(e){return e.value===r.value})-1;g>-1?n.handleNavigationClick(e[g]):n.handleNavigationClick(e[t-1])},n.setWrapperRef=function(e){n.wrapper_ref=e},n.handleClickOutside=function(e){n.wrapper_ref&&!n.wrapper_ref.contains(e.target)&&n.state.is_dialog_open?n.setState({is_dialog_open:!1}):n.wrapper_ref&&!n.wrapper_ref.contains(e.target)&&n.state.is_info_dialog_open&&n.setState({is_dialog_open:!1,is_info_dialog_open:!1})},n.handleInfoVisibility=function(){n.setState(function(e){return{is_info_dialog_open:!e.is_info_dialog_open}})},n.handleVisibility=function(){n.setState({is_dialog_open:!n.state.is_dialog_open})},n.onWidgetClick=function(){n.setState(function(e){return{is_dialog_open:!e.is_dialog_open,is_info_dialog_open:!1}})},n.onBackButtonClick=function(){n.setState(function(e){return{is_dialog_open:!e.is_dialog_open,is_info_dialog_open:!1}})},n.getDisplayText=function(){var e=n.props,t=e.list,r=e.value,g="";return t&&Object.keys(t).some(function(e){var n;return n=t[e],g=(n.find(function(e){return e.value===r})||{}).text}),g},n.getItemIndex=function(e,t){return t.findIndex(function(t){return t.value===e.value})},n.getItemList=function(){var e=[],t=n.props.list;return Object.keys(t).map(function(n){!["In/Out","Asians"].includes(n)&&t[n].map(function(t){"rise_fall_equal"!==t.value&&e.push(t)})}),e},n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this.props,t=e.is_dark_theme,n=e.is_equal,r=e.is_mobile,g=e.list,c=e.name,i=e.value,o=this.state,s=o.is_dialog_open,C=o.is_info_dialog_open,u=o.item,b=this.getItemList(),d=this.getItemIndex(u,b),B=b?b.length:0;return a.a.createElement("div",{id:"dt_contract_dropdown",className:"contract-type-widget dropdown--left",ref:this.setWrapperRef,tabIndex:"0"},a.a.createElement("div",{className:I()("contract-type-widget__display",{"contract-type-widget__display--clicked":s||C}),onClick:this.onWidgetClick},a.a.createElement(l.a,{icon:"IconTradeCategory",category:i,className:"contract-type-widget__icon-wrapper"}),a.a.createElement("span",{name:c,value:i},this.getDisplayText()),a.a.createElement(l.a,{icon:"IconArrow",className:I()("contract-type-widget__select-arrow","contract-type-widget__select-arrow--left")})),a.a.createElement(A,{is_mobile:r,onClose:this.handleVisibility,open:s},a.a.createElement(m,{handleInfoClick:this.handleInfoClick,handleSelect:this.handleSelect,is_equal:n,list:g,name:c,value:i})),a.a.createElement(Q,{is_mobile:r,onClose:this.handleInfoClick,open:C,title:u.text},a.a.createElement(V,{handleNavigationClick:this.handleNavigationClick,handleNextClick:this.handleNextClick,handlePrevClick:this.handlePrevClick,is_dark_theme:t,is_mobile:r,item:u,item_index:d<0?void 0:d,itemList:b,itemListLength:B,onBackButtonClick:this.onBackButtonClick,onSubmitButtonClick:this.onSubmitButtonClick})))}}])&&v(n.prototype,r),g&&v(n,g),t}();_.propTypes={is_dark_theme:g.a.bool,is_equal:g.a.oneOfType([g.a.number,g.a.string]),is_mobile:g.a.bool,list:g.a.object,name:g.a.string,onChange:g.a.func,value:g.a.string};var H=_,x=function(e){var t=e.contract_type,n=e.contract_types_list,r=e.is_dark_theme,g=e.is_equal,c=e.is_mobile,i=e.onChange;return a.a.createElement(H,{is_dark_theme:r,is_equal:g,is_mobile:c,list:n,name:"contract_type",onChange:i,value:t})};x.propTypes={contract_type:g.a.string,contract_types_list:g.a.object,is_equal:g.a.oneOfType([g.a.number,g.a.string]),is_mobile:g.a.bool,onChange:g.a.func};t.a=Object(i.b)(function(e){var t=e.modules,n=e.ui;return{contract_type:t.trade.contract_type,contract_types_list:t.trade.contract_types_list,is_equal:t.trade.is_equal,onChange:t.trade.onChange,is_dark_theme:n.is_dark_mode_on,is_mobile:n.is_mobile}})(x)},241:function(e,t,n){"use strict";var r=n(1),g=n.n(r),c=n(0),a=n.n(c),i=n(71),o=n.n(i),I=(n(112),n(5)),l=n.n(I),s=n(108),C=n(3),u=n(77),A=n(4),b={calendar_date:g.a.oneOfType([g.a.string,g.a.number]),isPeriodDisabled:g.a.func,selected_date:g.a.oneOfType([g.a.string,g.a.number]),updateSelected:g.a.func};function d(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){var t=function(e){for(var t=e.calendar_date,n=e.date_format,r=e.has_range_selection,g=e.hide_others,c=e.holidays,i=e.hovered_date,I=e.isPeriodDisabled,b=e.start_date,d=e.selected_date,B=e.updateSelected,p=e.weekends,m=e.onMouseOver,y=e.onMouseLeave,Q=[],G=[],Z=Object(A.w)().startOf("day"),h=Object(A.w)(t),F=h.daysInMonth()+1,X=h.clone().startOf("month"),V=h.clone().endOf("month"),f="number"==typeof d?Object(A.g)(d).startOf("day"):Object(A.w)(d).startOf("day"),v=Object(A.t)(h,1).endOf("month").day();v>0;v--)Q.push(Object(A.s)(X,v).format(n));for(var W=1;W<F;W+=1)Q.push(h.clone().format(n.replace("DD",Object(s.padLeft)(W,2,"0"))));var U=Object(A.b)(h,1).startOf("month").day();if(U-1>0||Q.length<=28)for(var N=1;N<=7-U+1;N++)Q.push(Object(A.a)(V,N,"day").format(n));else U||Q.push(Object(A.a)(V,1).format(n));var _=Object(A.w)(b).startOf("day");return Q.map(function(e){var t=Object(A.w)(e).startOf("day"),n=Object(A.w)(i).startOf("day"),s=d&&t.isSame(f),Q=t.isSame(Z,"day"),F=c.filter(function(t){return t.dates.find(function(t){return t===e||Object(u.a)(t)===Object(A.w)(e).day()})}),X=!!F.length,V=F.map(function(e){return!!e.descrip.match(/Closes early|Opens late/)})[0],v=F.map(function(e){return e.descrip})[0]||"",W=Object(A.e)(e),U=t.isBetween(Z,f),N=t.isBetween(Z,n),H=I(t,"day"),x=H||b&&t.isBefore(_)||p.some(function(t){return Object(A.w)(e).day()===t})||X&&!V,R=t.month()!==h.month();G.push(a.a.createElement("span",{key:e,className:l()("calendar__cell",{"calendar__cell--active":s,"calendar__cell--today":Q,"calendar__cell--active-duration":s&&r&&!Q,"calendar__cell--today-duration":Q&&r,"calendar__cell--disabled":x,"calendar__cell--is-hidden":R&&g,"calendar__cell--other":R,"calendar__cell--between-hover":N&&r,"calendar__cell--between":U&&r}),onClick:x?void 0:function(e){return B(e,"day")},"data-date":e,"data-duration":"".concat(W," ").concat(1===W?Object(C.localize)("Day"):Object(C.localize)("Days")),onMouseOver:m,onMouseLeave:y},(X||V)&&!R&&!H&&a.a.createElement(o.a,{alignment:"top",classNameTarget:"calendar__cell-tooltip",classNameTargetIcon:"calendar__cell-tooltip-icon",icon:"dot",message:v}),t.date()))}),G}(e).map(function(e){return e});return a.a.createElement("div",{className:"calendar__body calendar__body--date"},Object.keys(u.c).map(function(e,t){return a.a.createElement("span",{key:t,className:"calendar__text calendar__text--bold"},u.c[e])}),t)};function m(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}p.defaultProps={holidays:[],weekends:[]},p.propTypes=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};d(n,!0).forEach(function(t){B(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):d(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({},b,{date_format:g.a.string,has_range_selection:g.a.bool,holidays:g.a.arrayOf(g.a.shape({dates:g.a.array,descrip:g.a.string})),hovered_date:g.a.string,onMouseLeave:g.a.func,onMouseOver:g.a.func,start_date:g.a.oneOfType([g.a.number,g.a.string]),weekends:g.a.arrayOf(g.a.number)});var Q=function(e){var t=e.calendar_date,n=e.isPeriodDisabled,r=e.selected_date,g=e.updateSelected,c=Object(A.w)(t),i=Object(A.w)(r);return a.a.createElement("div",{className:"calendar__body calendar__body--month"},Object.keys(u.b).map(function(e,t){var r=e===i.clone().format("MMM")&&i.isSame(c,"year"),o=n(c.clone().month(e),"month");return a.a.createElement("span",{key:t,className:l()("calendar__cell",{"calendar__cell--active":r,"calendar__cell--disabled":o}),onClick:o?void 0:function(e){return g(e,"month")},"data-month":e},u.b[e])}))};Q.propTypes=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};m(n,!0).forEach(function(t){y(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):m(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({},b);var G=n(81);function Z(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,g=!1,c=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){g=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(g)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var X=function(e){for(var t=e.calendar_date,n=e.isPeriodDisabled,r=e.selected_date,g=e.updateSelected,c=Object(A.w)(r),i=Object(A.w)(t),o=F(Object(G.b)(i).split("-"),2),I=o[0],s=o[1],C=[],u=+I-1;u<=+s+1;u++)C.push(u);return a.a.createElement("div",{className:"calendar__body calendar__body--year"},C.map(function(e,t){var r=0===t||11===t,o=n(i.clone().year(e),"year");return a.a.createElement("span",{key:t,className:l()("calendar__cell",{"calendar__cell--active":e===c.year(),"calendar__cell--other":r,"calendar__cell--disabled":o}),onClick:o?void 0:function(e){return g(e,"year")},"data-year":e},e)}))};function V(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,g=!1,c=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){g=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(g)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}X.propTypes=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};Z(n,!0).forEach(function(t){h(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):Z(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({},b);var W=function(e){for(var t=e.calendar_date,n=e.isPeriodDisabled,r=e.selected_date,g=e.updateSelected,c=Object(A.w)(r),i=Object(A.w)(t),o=[],I=+Object(G.a)(i).split("-")[0]-10,s=0;s<12;s++){var C=Object(G.b)(Object(A.w)().year(I));o.push(C),I=+C.split("-")[1]+1}return a.a.createElement("div",{className:"calendar__body calendar__body--decade"},o.map(function(e,t){var r=v(e.split("-"),2),o=r[0],I=r[1],s=+o===c.year(),C=n(i.clone().year(o),"year")&&n(i.clone().year(I),"year"),u=0===t||11===t;return a.a.createElement("span",{key:t,className:l()("calendar__cell",{"calendar__cell--active":s,"calendar__cell--disabled":C,"calendar__cell--other":u}),onClick:C?void 0:function(e){return g(e,"decade")},"data-decade":e},e)}))};W.propTypes=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};V(n,!0).forEach(function(t){f(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):V(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({},b);var U=function(e){var t={date:a.a.createElement(p,e),month:a.a.createElement(Q,e),year:a.a.createElement(X,e),decade:a.a.createElement(W,e)};return a.a.createElement(a.a.Fragment,null,t[e.calendar_view])};U.propTypes={calendar_view:g.a.string};t.a=U},242:function(e,t,n){"use strict";var r=n(1),g=n.n(r),c=n(0),a=n.n(c),i=n(5),o=n.n(i),I=n(8),l=function(e){var t=e.onClick,n=e.className;return a.a.createElement("button",{className:n,type:"button",onClick:t})};l.propTypes={className:g.a.string,onClick:g.a.func.isRequired};var s,C=l,u={danger:"notification--danger",info:"notification--info",success:"notification--success",warning:"notification--warning",contract_sold:"notification--info"},A=(s={contract_sold:1,danger:2,warning:3,info:4,success:5},function(e,t){return s[e.type]-s[t.type]}),b=function(e){var t=e.data,n=e.removeNotification,r=function(e){n(t),t.closeOnClick&&t.closeOnClick(t,e)};return t.is_auto_close&&setTimeout(r,t.delay||3e3),a.a.createElement("div",{className:o()("notification",u[t.type],{"notification--small":"small"===t.size})},a.a.createElement("div",{className:"notification__icon"},"danger"===t.type&&a.a.createElement(I.a,{icon:"IconDanger",className:"notification__icon-type"}),("info"===t.type||"contract_sold"===t.type)&&a.a.createElement(I.a,{icon:"IconInformation",className:"notification__icon-type"}),"success"===t.type&&a.a.createElement(I.a,{icon:"IconSuccess",className:"notification__icon-type"}),"warning"===t.type&&a.a.createElement(I.a,{icon:"IconWarning",className:"notification__icon-type"})),a.a.createElement("div",{className:"notification__text-container"},a.a.createElement("h4",{className:"notification__header"},t.header),a.a.createElement("p",{className:"notification__text-body"}," ",t.message)),t.should_hide_close_btn?void 0:a.a.createElement(C,{onClick:function(){return r(!0)},className:"notification__close-button"}))};b.propTypes={data:g.a.shape({closeOnClick:g.a.func,delay:g.a.number,header:g.a.string,is_auto_close:g.a.bool,message:g.a.oneOfType([g.a.node,g.a.string]),should_hide_close_btn:g.a.bool,size:g.a.oneOf(["small"]),type:g.a.oneOf(["warning","info","success","danger","contract_sold"]).isRequired}),removeNotification:g.a.func};var d=b;n.d(t,"a",function(){return d}),n.d(t,"b",function(){return 3}),n.d(t,"c",function(){return A})},243:function(e,t,n){"use strict";var r=n(1),g=n.n(r),c=n(0),a=n.n(c),i=n(7),o=n(5),I=n.n(o),l=n(71),s=n.n(l),C=(n(112),n(52)),u=n(109),A=n(3),b=n(75),d=n(8),B=function(e){var t=e.basis,n=e.currency,r=e.has_increased,g=e.is_loading,c=e.should_fade,i=e.is_visible,o=e.proposal_info,l=e.type,C=Object(u.c)(),B=o.has_error||!o.id;return a.a.createElement("div",{className:"trade-container__price"},a.a.createElement("div",{id:"dt_purchase_".concat(l.toLowerCase(),"_price"),className:I()("trade-container__price-info",{"trade-container__price-info--disabled":B,"trade-container__price-info--slide":g&&!c,"trade-container__price-info--fade":g&&c})},a.a.createElement("div",{className:"trade-container__price-info-basis"},B?function(){switch(t){case"stake":return C.payout;case"payout":return C.stake;default:return t}}():Object(A.localize)("{{value}}",{value:o.obj_contract_basis.text})),a.a.createElement("div",{className:"trade-container__price-info-value"},!B&&a.a.createElement(b.a,{amount:o.obj_contract_basis.value,className:"trade-container__price-info-currency",currency:n})),i&&a.a.createElement("div",{className:"trade-container__price-info-movement"},!B&&null!==r&&a.a.createElement(d.a,{icon:"IconPriceMove",type:r?"profit":"loss"}))),a.a.createElement(s.a,{alignment:"left",icon:"info",id:"dt_purchase_".concat(l.toLowerCase(),"_info"),margin:210,message:B?"":o.message}))};B.propTypes={basis:g.a.string,currency:g.a.string,has_increased:g.a.bool,is_loading:g.a.bool,is_visible:g.a.bool,proposal_info:g.a.object,type:g.a.string};var p=B,m=n(28),y=n.n(m),Q=(n(65),n(72)),G=function(e){var t=e.buy_info,n=e.index,r=e.info,g=e.is_contract_mode,c=e.is_disabled,i=e.is_high_low,o=e.is_loading,l=e.is_proposal_empty,s=e.purchased_states_arr,C=e.setPurchaseState,u=e.should_fade,b=e.onClickPurchase,B=e.type,p=(g||c)&&!o||l;return a.a.createElement(y.a,{is_disabled:g||c,id:"dt_purchase_".concat(B.toLowerCase(),"_button"),className:I()("btn-purchase",{"btn-purchase--disabled":p||!!t.error,"btn-purchase--animated--slide":o&&!u,"btn-purchase--animated--fade":o&&u,"btn-purchase--swoosh":!!s[n]}),onClick:function(){C(n),b(r.id,r.stake,B)}},a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"btn-purchase__info btn-purchase__info--left"},a.a.createElement("div",{className:"btn-purchase__type-wrapper"},a.a.createElement("div",{className:"btn-purchase__icon_wrapper"},a.a.createElement(d.a,{icon:"IconTradeType",className:"btn-purchase__icon",type:!u&&o?"":i?"".concat(B.toLowerCase(),"_barrier"):B.toLowerCase()})),a.a.createElement("div",{className:"btn-purchase__text_wrapper"},a.a.createElement("span",{className:"btn-purchase__text"},!u&&o?"":Object(A.localize)("{{value}}",{value:Object(Q.b)(B,i)}))))),a.a.createElement("div",{className:"btn-purchase__effect-detail"}),a.a.createElement("div",{className:"btn-purchase__effect-detail--arrow"}),a.a.createElement("div",{className:"btn-purchase__info btn-purchase__info--right"},a.a.createElement("div",{className:"btn-purchase__text_wrapper"},a.a.createElement("span",{className:"btn-purchase__text"},o||c?"":r.returns)))))};G.propTypes={buy_info:g.a.object,currency:g.a.string,index:g.a.number,info:g.a.object,is_contract_mode:g.a.bool,is_disabled:g.a.bool,is_high_low:g.a.bool,is_loading:g.a.bool,is_proposal_empty:g.a.bool,onClickPurchase:g.a.func,purchased_states_arr:g.a.array,setPurchaseState:g.a.func,type:g.a.string};var Z=G;function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,g=new Array(r),c=0;c<r;c++)g[c]=arguments[c];return(n=X(this,(e=V(t)).call.apply(e,[this].concat(g)))).state={should_fade:!1},n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.setState({should_fade:!0})}},{key:"render",value:function(){var e=this.props,t=e.basis,n=e.buy_info,r=e.currency,g=e.info,c=e.index,i=e.is_contract_mode,o=e.is_disabled,l=e.is_high_low,u=e.is_loading,A=e.is_proposal_empty,b=e.is_proposal_error,d=e.purchased_states_arr,B=e.onClickPurchase,m=e.onHoverPurchase,y=e.setPurchaseState,Q=e.type,G=a.a.createElement(Z,{buy_info:n,currency:r,info:g,index:c,is_contract_mode:i,is_disabled:o,is_high_low:l,is_loading:u,is_proposal_empty:A,purchased_states_arr:d,onClickPurchase:B,setPurchaseState:y,should_fade:this.state.should_fade,type:Q});return a.a.createElement(C.a,{className:"trade-container__fieldset purchase-container__option"},a.a.createElement(a.a.Fragment,null,a.a.createElement(p,{basis:t,currency:r,proposal_info:g,has_increased:g.has_increased,is_loading:u,should_fade:this.state.should_fade,is_visible:!i,type:Q}),a.a.createElement("div",{className:I()("btn-purchase__shadow-wrapper",{"btn-purchase__shadow-wrapper--disabled":b||o}),onMouseEnter:function(){o||m(!0,Q)},onMouseLeave:function(){o||m(!1)}},a.a.createElement("div",{className:"btn-purchase__box-shadow"}),b?a.a.createElement(s.a,{alignment:"left",classNameBubble:"purchase-container__popover-bubble",message:g.message},G):G)))}}])&&F(n.prototype,r),g&&F(n,g),t}();v.propTypes={basis:g.a.string,buy_info:g.a.object,currency:g.a.string,index:g.a.number,info:g.a.object,is_contract_mode:g.a.bool,is_disabled:g.a.bool,is_high_low:g.a.bool,is_loading:g.a.bool,is_proposal_empty:g.a.bool,is_proposal_error:g.a.bool,onClickPurchase:g.a.func,onHoverPurchase:g.a.func,purchased_states_arr:g.a.array,setPurchaseState:g.a.func,type:g.a.string};var W=v,U=n(11),N=function(e){var t=e.basis,n=e.contract_type,r=e.currency,g=e.is_contract_mode,c=e.is_client_allowed_to_visit,o=e.purchased_states_arr,I=e.is_trade_enabled,l=e.onClickPurchase,s=e.onHoverPurchase,C=e.purchase_info,u=e.proposal_info,A=e.setPurchaseState,b=e.trade_types,d=e.validation_errors,B=/high_low/.test(n.toLowerCase()),p=function(e){return!Object.values(d).some(function(e){return e.length})&&!e.has_error&&!e.id},m=Object(i.isEmptyObject)(u),y=[];return Object.keys(b).map(function(e,n){var i=u[e]||{},b=g||!I||!i.id||!c,d=i.has_error&&!i.has_error_details,G=a.a.createElement(W,{basis:t,buy_info:C,currency:r,info:i,key:n,index:"top"===Object(Q.c)(e)?0:"bottom"===Object(Q.c)(e)?1:n,is_contract_mode:g,is_disabled:b,is_high_low:B,is_loading:p(i),is_proposal_empty:m,is_proposal_error:d,purchased_states_arr:o,onHoverPurchase:s,onClickPurchase:l,setPurchaseState:A,type:e});switch(Object(Q.c)(e)){case"top":y.unshift(G);break;case"bottom":default:y.push(G)}}),y};N.propTypes={basis:g.a.string,currency:g.a.string,is_client_allowed_to_visit:g.a.bool,is_contract_mode:g.a.bool,is_purchase_locked:g.a.bool,is_trade_enabled:g.a.bool,onClickPurchase:g.a.func,onHoverPurchase:g.a.func,proposal_info:g.a.object,purchase_info:g.a.object,purchased_states_arr:g.a.array,setPurchaseState:g.a.func,trade_types:g.a.object,validation_errors:g.a.object};t.a=Object(U.b)(function(e){var t=e.client,n=e.modules,r=e.ui;return{currency:t.currency,is_client_allowed_to_visit:t.is_client_allowed_to_visit,is_contract_mode:n.smart_chart.is_contract_mode,basis:n.trade.basis,contract_type:n.trade.contract_type,is_trade_enabled:n.trade.is_trade_enabled,onClickPurchase:n.trade.onPurchase,onHoverPurchase:n.trade.onHoverPurchase,proposal_info:n.trade.proposal_info,purchase_info:n.trade.purchase_info,trade_types:n.trade.trade_types,validation_errors:n.trade.validation_errors,purchased_states_arr:r.purchase_states,setPurchaseState:r.setPurchaseState}})(N)},244:function(e,t,n){"use strict";n.r(t);var r=n(1),g=n.n(r),c=n(0),a=n.n(c),i=n(143),o=n(29),I=n(19),l=function(e){var t=e.header,n=e.message,r=e.redirect_label,g=e.redirectOnClick,c=e.should_show_refresh,l=void 0===c||c?a.a.createElement(I.a,{i18n_default_text:"Please refresh this page to continue."}):"";return a.a.createElement(i.a,{header:t||a.a.createElement(I.a,{i18n_default_text:"Oops, something went wrong."}),messages:n?[n,l]:[a.a.createElement(I.a,{key:0,i18n_default_text:"Sorry, an error occured while processing your request."}),l],redirect_url:o.e.trade,redirect_label:r||a.a.createElement(I.a,{i18n_default_text:"Refresh"}),buttonOnClick:g||function(){return location.reload()}})};l.propTypes={message:g.a.oneOfType([g.a.node,g.a.string,g.a.object]),type:g.a.string};var s=l;n.d(t,"default",function(){return s})},245:function(e,t,n){"use strict";var r=n(5),g=n.n(r),c=n(1),a=n.n(c),i=n(0),o=n.n(i),I=n(8),l=n(77),s=n(4),C=function(e){var t=e.children,n=e.className,r=e.is_hidden,g=e.label,c=e.onClick;return o.a.createElement(o.a.Fragment,null,!r&&o.a.createElement("div",{className:n,onClick:c},g,t))};C.propTypes={children:a.a.oneOfType([a.a.array,a.a.object,a.a.string]),className:a.a.string,is_hidden:a.a.bool,label:a.a.string,onClick:a.a.func};var u=C,A=n(81),b=function(e){var t=e.calendar_date,n=e.calendar_view,r=e.disable_month_selector,c=e.disable_year_selector,a=e.hide_disabled_periods,i=e.isPeriodDisabled,C=e.navigateTo,b=e.switchView,d="date"===n,B="month"===n,p="year"===n,m="decade"===n,y=Object(s.w)(t),Q=1;p&&(Q=10),m&&(Q=100);var G=Object(A.a)(y.clone()),Z=Object(A.b)(y.clone()),h=(p?Z:G).split("-")[1],F=i(Object(s.t)(y,1),"month"),X=i(Object(s.u)(y,Q),"month"),V=i(Object(s.b)(y,1),"month"),f=i(Object(s.c)(y,Q),"month"),v=i(y.clone().year(h),"year")||c,W=V&&a,U=F&&a,N=X&&a,_=f&&a,H=X||N?void 0:function(){return C(Object(s.u)(t,Q))},x=f||_?void 0:function(){return C(Object(s.c)(t,Q))},R=F||U?void 0:function(){return C(Object(s.t)(t,1))},Y=V||W?void 0:function(){return C(Object(s.b)(t,1))};return o.a.createElement("div",{className:"calendar__header"},o.a.createElement(u,{className:g()("calendar__nav calendar__nav--prev-year",{"calendar__nav--disabled":X,"calendar__nav--is-hidden":N}),onClick:H},o.a.createElement(I.a,{icon:"IconChevronDoubleLeft",className:"calendar__icon"})),o.a.createElement(u,{className:g()("calendar__nav calendar__nav--prev-month",{"calendar__nav--disabled":F,"calendar__nav--is-hidden":U}),is_hidden:!d,onClick:R},o.a.createElement(I.a,{icon:"IconChevronLeft",className:"calendar__icon"})),o.a.createElement(o.a.Fragment,null,d&&o.a.createElement(u,{className:"calendar__btn calendar__btn--select",is_hidden:!d,label:l.b[y.format("MMM")],onClick:function(){return r?void 0:b("month")}}),(d||B)&&o.a.createElement(u,{className:g()("calendar__btn calendar__btn--select",{"calendar__btn--disabled":v}),label:y.format("YYYY"),onClick:function(){return v?void 0:b("year")}}),(p||m)&&o.a.createElement(u,{className:g()("calendar__btn calendar__btn--select",{"calendar__btn--disabled":v}),onClick:v?void 0:function(){return b("decade")}},p&&"".concat(Z),m&&"".concat(G))),o.a.createElement(u,{className:g()("calendar__nav calendar__nav--next-month",{"calendar__nav--disabled":V,"calendar__nav--is-hidden":W}),is_hidden:!d,onClick:Y},o.a.createElement(I.a,{icon:"IconChevronRight",className:"calendar__icon"})),o.a.createElement(u,{className:g()("calendar__nav calendar__nav--next-year",{"calendar__nav--disabled":f,"calendar__nav--is-hidden":_}),onClick:x},o.a.createElement(I.a,{icon:"IconChevronDoubleRight",className:"calendar__icon"})))};b.propTypes={calendar_date:a.a.oneOfType([a.a.string,a.a.object,a.a.number]),calendar_view:a.a.string,disable_month_selector:a.a.bool,disable_year_selector:a.a.bool,hide_disabled_periods:a.a.bool,isPeriodDisabled:a.a.func,navigateTo:a.a.func,switchView:a.a.func};t.a=b},246:function(e,t,n){"use strict";var r=n(41),g=Object(r.get)(),c=function(){var e=["ACH"];Object.keys(Object(r.getAll)()).filter(function(t){return!e.includes(t)}).reduce(function(e,t){return e[t]=Object(r.getAll)()[t],e},{});return{EN:"English"}},a=function(e){return Object(r.urlFor)(e)};n.d(t,"a",function(){return g}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return a})},247:function(e,t,n){"use strict";var r=n(16),g=n.n(r),c=n(3),a=function(e,t,n){var r=g.a.duration(g.a.unix(n).diff(g.a.unix(t))),c=g.a.duration(g.a.unix(n).diff(e)).asMilliseconds()/r.asMilliseconds()*100;return c<.5?c=0:c>100&&(c=100),Math.round(c)},i=function(e){return I(e.contract_type)?Object(c.localize)("Target"):Object(c.localize)("Barrier")},o=function(e){return I(e.contract_type)?l(e)[e.contract_type]:function(e,t){if(!e||isNaN(e))return e;var n=String(t?(+e).toFixed(t):e),r=n.indexOf(".");return n.replace(/\d(?=(?:\d{3})+(?:\.|$))/g,function(e,t){return r<=0||t<r?"".concat(e,","):e})}(e.barrier)},I=function(e){return/digit/.test(e.toLowerCase())},l=function(e){return{DIGITDIFF:Object(c.localize)("Not {{barrier}}",{barrier:e.barrier}),DIGITEVEN:Object(c.localize)("Even"),DIGITMATCH:Object(c.localize)("Equals {{barrier}}",{barrier:e.barrier}),DIGITODD:Object(c.localize)("Odd"),DIGITOVER:Object(c.localize)("Over {{barrier}}",{barrier:e.barrier}),DIGITUNDER:Object(c.localize)("Under {{barrier}}",{barrier:e.barrier})}};n.d(t,"c",function(){return a}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return I})},254:function(e){e.exports=JSON.parse('{"7100308":"Hour must be between 0 and 23.","41458723":"Binary Options Trading has been disabled on your account. Kindly contact <0>customer support</0> for assistance.","45453595":"Binary Coin","65982042":"Total","74963864":"Under","101994801":"all notifications","111718006":"End date","114014970":"Trade now","120340777":"Complete your personal details","122729511":"API token for third party applications","156529152":"<0>Authenticate your account</0> now to take full advantage of all payment methods available.","179083332":"Date","208961150":"Withdrawal Disabled","211224838":"Investment","222329461":"Potential Profit/Loss:","226192398":"Start a new trade","240247367":"Profit table","260523949":"Aug","280057182":"View all trades purchased on your account, and a summary of your total profit/loss.","281301037":"Take me to SmartTrader","284772879":"Contract","308913971":"Only letters, numbers, space, and these special characters are allowed: {{permitted_characters}}","313834394":"Ref. ID (Buy)","317601768":"Themes","321291822":"Error Code: {{error_code}}","334942497":"Buy time","337023006":"Start time cannot be in the past.","338091997":"Indicative Price","339449279":"Remaining time","340807218":"Description not found.","349047911":"Over","380606668":"tick","390647540":"Real account","395286495":"Wednesday","396418990":"Offline","402237478":"Security & Limits","427617266":"Bitcoin","436374134":"Ref. ID (Sell)","462079779":"Resale not offered","481276888":"Goes Outside","488508343":"Remove Deposit Limits","523065091":"Apr","538228086":"Close-Low","539352212":"Tick {{current_tick}}","543223747":"S","577779861":"Withdrawal","578640761":"Call Spread","584028307":"Allow equals","597723493":"Tuesday","627292452":"<0>Your Proof of Identity or Proof of Address</0> did not meet our requirements. Please check your email for further instructions.","633888348":"Back to trade page","638898398":"Please set the <0>currency</0> of your account to enable trading.","640596349":"You have yet to receive any notifications","647192851":"Contract will be sold at the prevailing market price when the request is received by our servers. This price may differ from the indicated price.","651284052":"Low Tick","655174618":"W","668001939":"You cannot use your real money account with Deriv at this time.","676159329":"Could not switch to default account.","687212287":"Amount is a required field.","689137215":"Purchase price","701462190":"Entry spot","710966927":"Self Exclusion","720293140":"Log out","720618567":"You have opted to be excluded from Binary.com until {{exclusion_end}}. Please <0>contact us</0> for assistance.","723292865":"Portfolio","766317539":"Language","766682425":"You have no trading activity for this period.","782852290":"Cashier Disabled","787727156":"Barrier","802556390":"seconds","805386374":"Please complete the <0>Financial Assessment form</0> to lift your withdrawal and trading limits.","811644918":"Feb","832398317":"Sell Error","845213721":"Logout","856395971":"Open Positions","880285380":"This trade type is currently not supported on {{website_name}}. Please go to Binary.com for details.","890299833":"Go to Reports","905134118":"Payout:","906050991":"Duration: ","918447723":"Real","923230981":"We are reviewing your documents. For more details <0>contact us</0>.","930546422":"Touch","940950724":"This trade type is currently not supported on {{website_name}}. Please go to <0>Binary.com</0> for details.","945532698":"Contract sold","952687704":"Change your main login password.","955424010":"Change the password used for deposits and withdrawals","958430760":"In/Out","968576099":"Up/Down","974888153":"High-Low","982829181":"Barriers","988361781":"You have no trading activity yet.","1001160515":"Sell","1004559284":"Your network connection might be slow.","1019265663":"You have no transactions yet.","1023795011":"Even/Odd","1025823039":"Lookback","1042587491":"Login History","1048947317":"Sorry, this app is unavailable in {{clients_country}}.","1049384824":"Rise","1050844889":"Reports","1069576070":"Purchase lock","1078297770":"lost","1080068516":"Action","1090410775":"Contract Lost","1103309514":"Target","1108294265":"Binary Options Trading Disabled","1110102997":"Statement","1112582372":"Interval duration","1127837763":"Recent Positions","1155748622":"Dec","1168029733":"Win payout if exit spot is also equal to entry spot.","1173261687":"Mar","1204202371":"No open positions","1217146340":"The two passwords that you entered do not match.","1233300532":"Payout","1240413031":"Change the position of the toolbar","1246443703":"Financial Assessment","1272337240":"Days","1282951921":"Only Downs","1303016265":"Yes","1304234792":"F","1315674264":"MT5 Withdrawal Disabled","1323996051":"Profile","1338496204":"Ref. ID","1340314141":"Go to SmartTrader","1359424217":"You have sold this contract at <0 />","1363675688":"Duration is a required field.","1366244749":"Limits","1371193412":"Cancel","1373524548":"Sorry, but this market is not supported yet on Deriv. Do you want to trade this market on SmartTrader?","1378419333":"Ether","1385162684":"Deposits and withdrawals have been disabled on your account. Please check your email for more details.","1387503299":"Log in","1400962248":"High-Close","1419347132":"Install {{website_name}} app?","1419823037":"Jan","1423082412":"Last Digit","1433367863":"Sorry, an error occured while processing your request.","1455556119":"You have no transactions for this period.","1497911454":"Please set your <0>30-day turnover limit</0> to remove deposit limits.","1502039206":"Over {{barrier}}","1516676261":"Deposit","1533177906":"Fall","1559479164":"Personal Details","1565270013":"Authentication Failed","1565336048":"Contract Won","1599864810":"Add new account","1634594289":"Select language","1636605481":"Platform settings","1644300804":"binary options, forex, forex trading, online trading, financial trading, binary trading, index trading, trading indices, forex trades, trading commodities, binary options strategy, binary broker, binary bet, binary options trading platform, binary strategy, finance, stocks, investment, trading","1651513020":"Display remaining time for each interval","1659074761":"Reset Put","1665738338":"Balance","1670426231":"End Time","1693614409":"Start time","1709859601":"Exit Spot Time","1712357617":"Invalid email address.","1732891201":"Sell price","1768861315":"Minute","1768918213":"Only letters, space, hyphen, period, and apostrophe are allowed.","1779519903":"Should be a valid number.","1782395995":"Last Digit Prediction","1782703044":"Sign up","1793399167":"Please wait for the page to finish loading.","1810217569":"Please refresh this page to continue.","1812582011":"Connecting to server","1828715622":"{{value}} Ticks","1832898020":"Select a date","1833481689":"Unlock","1858251701":"minute","1867635801":"Continue with Virtual Account","1869787212":"Even","1870933427":"Crypto","1881018702":"hour","1901467756":"Filter by date:","1923785856":"View your financial assessment settings","1930899934":"Tether","1932776018":"View all transactions on your account, including trades, deposits, and withdrawals.","1946643995":"Try Volatility Indices","1965916759":"Asian options settle by comparing the last tick with the average spot over the period.","1968025770":"Bitcoin Cash","1973536221":"You have no open positions yet.","1975412720":"No, stay on Deriv","1982141807":"Please wait for the page to finish loading or check your network connection.","1997138507":"If the last tick is equal to the average of the ticks, you don\'t win the payout.","2011808755":"Purchase Time","2027638150":"Upgrade","2036578466":"Should be {{value}}","2045254751":"Please complete your <0>Personal Details</0> before you proceed.","2047742184":"Jun","2057419639":"Exit Spot","2072486568":"View all active trades on your account that can still incur a profit or a loss.","2075224715":"Market is unavailable","2086792088":"Both barriers should be relative or absolute","2133451414":"Duration","2143229037":"Withdrawal and Trading Limits","2143803283":"Purchase Error","-1590712279":"Gaming","-16448469":"Virtual","-1822545742":"Ether Classic","-1334641066":"Litecoin","-1717650468":"Online","-1282933308":"Not {{barrier}}","-968190634":"Equals {{barrier}}","-808904691":"Odd","-1747377543":"Under {{barrier}}","-1190860329":"BETA","-679102561":"Contract Details","-812593853":"Profit Table","-1076138910":"Trade","-1939885748":"Account Password","-1617606412":"Cashier Password","-1591792668":"Account Limits","-198329198":"API Token","-621846045":"Authorized Applications","-526636259":"Error 404","-556230215":"Ends Outside","-1268220904":"Ends Between","-1163058241":"Stays Between","-1354485738":"Reset Call","-1337379177":"High Tick","-1572746946":"Asian Up","-686840306":"Asian Down","-841561409":"Put Spread","-376148198":"Only Ups","-2141198770":"Higher","-816098265":"Lower","-912577498":"Matches","-1862940531":"Differs","-768425113":"No Touch","-767798017":"May","-1811910204":"Jul","-650860763":"Sep","-1656774994":"Oct","-565781831":"Nov","-662820801":"Monday","-1216220934":"Thursday","-1222724746":"Friday","-383986464":"Saturday","-873282313":"Sunday","-630205792":"M","-1107002784":"T","-14889407":"Reference No.","-1939502444":"Contract Type","-1274463615":"Remaining Time","-1954482791":"Potential Payout","-1738427539":"Purchase","-1830873449":"Indicative","-513103225":"Transaction time","-190084602":"Transaction","-2066666313":"Credit/Debit","-42436171":"Total profit/loss","-2140412463":"Buy price","-1981004241":"Sell time","-427802309":"Profit/Loss","-1943211857":"Potential payout","-706219815":"Indicative price","-383184553":"View your personal information.","-1447232529":"Facility that allows you to set limits on your account.","-66547334":"View your trading and withdrawal limits","-1635885015":"View your login history","-1161288045":"Manage your authorised applications","-517091312":"Ref.","-344403983":"Description","-43386112":"Your web browser is out of date and may affect your trading experience. Please {{opening_tag}}update your browser{{closing_tag}}.","-577777971":"You have reached the rate limit of requests per second. Please try later.","-522767852":"DEMO","-433761292":"Switching to default account.","-1713183064":"Set Currency","-1104928010":"Self-exclusion Detected","-1150484771":"Account Authentication","-1786038405":"Documents in review","-1161254828":"Withdrawals have been disabled on your account. Please check your email for more details.","-764323310":"MT5 withdrawals have been disabled on your account. Please check your email for more details.","-525378727":"Trading and Deposits Disabled","-33599329":"Trading and deposits have been disabled on your account. Kindly contact <0>customer support</0> for assistance.","-802463555":"Terms & Conditions Updated","-1745337926":"Please <0>accept the updated Terms and Conditions</0> to enable deposit and trading.","-590018519":"Contract Purchased","-405439829":"Sorry, you can\'t view this contract because it doesn\'t belong to this account.","-994038153":"Start Time","-1979852400":"Entry Spot","-388871877":"Purchase Price","-337314714":"days","-442488432":"day","-1977959027":"hours","-1603581277":"minutes","-1658230823":"Contract was sold for <0 />.","-1358367903":"Stake","-339236213":"Multiplier","-922253974":"Rise/Fall","-1361254291":"Higher/Lower","-1691868913":"Touch/No Touch","-1673960856":"Ends Between/Ends Outside","-1326361265":"Stays Between/Goes Outside","-151151292":"Asians","-330437517":"Matches/Differs","-657360193":"Over/Under","-763273340":"Digits","-1386326276":"Barrier is a required field.","-1418742026":"Higher barrier must be higher than lower barrier.","-92007689":"Lower barrier must be lower than higher barrier.","-243442086":"Please enter the start time in the format ","-1975910372":"Minute must be between 0 and 59.","-866277689":"Expiry time cannot be in the past.","-1488537825":"If you have an account, log in to continue.","-2092611555":"Sorry, this app is unavailable in your current location.","-1455298001":"Now","-206321775":"Fiat","-1983189496":"ticks","-256210543":"Trading is unavailable at this time.","-182918519":"This page is taking too long to load.","-1590869353":"Up to {{decimal_count}} decimal places are allowed.","-2061307421":"Should be more than {{min_value}}","-1099941162":"Should be less than {{max_value}}","-144803045":"Only numbers and these special characters are allowed: {{permitted_characters}}","-1450516268":"Only letters, numbers, space, hyphen, period, and apostrophe are allowed.","-107953344":"You should enter {{value}} characters.","-1603618642":"Minimum of {{value}} characters required.","-1628851787":"{{value_one}} and {{value_two}} cannot be the same.","-1579996889":"Password should have lower and uppercase letters with numbers.","-1746014456":"Only numbers and spaces are allowed.","-2113555886":"Only letters, numbers, space, and hyphen are allowed.","-1966032552":"The length of token should be 8.","-2128137611":"Should start with letter or number, and may contain hyphen and underscore.","-571642000":"Day","-338707425":"Minimum duration is 1 day","-1802726473":"Sell contract","-2087317410":"Oops, something went wrong.","-1354983065":"Refresh","-763249420":"{{page_title}} page is only<0 />available for existing clients.","-207063174":"If you have an active account, please <0>Log in</0> for full access. Otherwise, please <1>Sign up</1> to start trading.","-411253175":"Market is closed.","-731908352":"Try Volatility Indices which simulate real-world market volatility and are open 24/7.","-442562554":"No Notifications","-1511825574":"Profit/Loss:","-327631223":"Indicative Price:","-627895223":"Exit spot","-1012793015":"End time","-426730256":"won","-939764287":"Charts","-167511295":"{{value}} Tick","-802374032":"Hour","-1966944392":"Network status: {{status}}","-1580617280":"Real accounts","-1225508663":"Virtual account","-1885473840":"Upgrade to Real Account","-82521982":"Whoops!","-939129712":"Back to main website","-1215315818":"Dark Mode","-1638223347":"Purchase Confirmation","-1611480904":"Purchase Lock","-231863107":"No","-684271315":"OK","-1374337465":"Toolbar position","-1896646766":"Bottom","-631945130":"Left","-1386748735":"Open-high-low-close <0>(OHLC) information</0>","-210382088":"Display open-high-low-close (OHLC) information for current chart","-2039780875":"Purchase confirmation","-1672470173":"Require confirmation before purchasing a contract","-1342661765":"Lock contract purchase buttons","-601615681":"Select theme","-1152511291":"Dark","-1428458509":"Light","-1432826913":"Continue to Binary.com","-713299565":"Work in progress!","-205864504":"This is currently unavailable for mobile devices.","-2120394709":"If you select ","-1350745673":"If the exit spot is equal to the barrier, you don\'t win the payout.","-546460677":"If the exit spot is equal to either the Low barrier or the High barrier, you don\'t win the payout.","-440001988":"Reference No:","-1586757609":"Contract Information","-1850120004":"Contract Expiry","-149836494":"Your transaction reference number is {{transaction_id}}","-1382749084":"Go back to trading","-759124288":"Close","-1302642436":"Oops, page not available.","-804874085":"The page you requested could not be found. Either it no longer exists or the address is wrong. Please check for any typos.","-13224053":"Return to Trade","-1309011360":"Open positions","-235412879":"Your account has no trading activity.","-507895844":"Your account has no trading activity for the selected period.","-1577570698":"Start date","-741395299":"{{value}}","-945156951":"Are you sure you want to purchase this contract?","-1527492178":"Purchase Locked","-725375562":"You can lock/unlock the purchase button from the Settings menu","-2008534713":"Choose","-1166263399":"Your browser does not support JavaScript!","-746064461":"{{broker_name}} gives everyone an easy way to participate in the financial markets. Trade with as little as $1 USD on major currencies, stocks, indices, and commodities.","-137444201":"Buy"}')},255:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g,c,a,i,o,I,l,s,C,u,A,b,d,B,p,m=n(10),y=n(3).localize,Q=(I={get:function(e){return c||(c={online:{class:"online",tooltip:y("Online")},offline:{class:"offline",tooltip:y("Offline")},blinking:{class:"blinker",tooltip:y("Connecting to server")}}),c[e]}},l={},r(g={},(s={ws_init:"ws_init",ws_request:"ws_request"}).ws_init,5e3),r(g,s.ws_request,1e4),C=g,u=function(){return navigator.onLine},A=function(e){u()?s[e]||"offline"===i?(i="blinking",u()&&m.hasReadyState(2,3)?m.init(a):m.send({ping:1})):i="online":i="offline","function"==typeof o&&o(I.get(i),u())},b={init:function(){return B(s.ws_init)},open:function(){return p(s.ws_init)},send:function(){return B(s.ws_request)},message:function(){return p()},close:function(){return B(s.ws_init)}},B=function(e){l[e]||(l[e]=setTimeout(function(){l[e]=void 0,A(e)},C[e]))},p=function(e){var t=function(e){clearTimeout(l[e]),l[e]=void 0,e===s.ws_request&&A("online")};e?t(e):Object.keys(l).forEach(t)},{init:function(e,t){o=t,a=Object.assign({wsEvent:d,isOnline:u},e),"onLine"in navigator?(window.addEventListener("online",A),window.addEventListener("offline",A)):navigator.onLine=!0,u()&&m.init(a),A(u()?"online":"offline")},wsEvent:d=function(e){"function"==typeof b[e]&&b[e]()}});e.exports=Q},257:function(e,t,n){},26:function(e,t,n){var r,g,c,a,i,o,I,l,s,C,u,A,b,d=n(12).isCryptocurrency,B=n(100),p=n(3).localize,m=n(21).LocalStore,y=n(21).State,Q=n(7).getPropertyValue,G=n(7).isEmptyObject,Z=(c={},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],g=s(t);return("virtual"===e&&"virtual"===g||"real"===e&&"virtual"!==g||e===g)&&(!n||!o("is_disabled",t))},u=function(e,t){var n=l().find(function(n){return C(e,n,t)});return n?Object.assign({loginid:n},o(null,n)):{}},A={get:function(){return g||(g={default:p("Real"),financial:p("Investment"),gaming:p("Gaming"),virtual:p("Virtual")}),g}},b=function(e){if(e===r||o("is_virtual",e)||o("is_virtual")||o("is_disabled",e))return!1;var t=o("currency"),n=o("currency",e);if(!t||!n)return!1;if(t===n){var g=o("landing_company_shortcode"),c=o("landing_company_shortcode",e);return({maltainvest:"malta",malta:"maltainvest"}[g]||"")===c}var a=d(t),i=d(n);return a?!i:i},{init:function(){r=m.get("active_loginid"),c=I()},isLoggedIn:a=function(){return!G(I())&&o("loginid")&&o("token")},isValidLoginid:function(){if(!a())return!0;var e=new RegExp("^(MX|MF|VRTC|MLT|CR|FOG)[0-9]+$","i");return l().every(function(t){return e.test(t)})},set:i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;"loginid"===e&&t!==r?(m.set("active_loginid",t),r=t):(n in c||(c[n]={}),c[n][e]=t,m.setObject("client.accounts",c))},get:o=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;if("loginid"===e)t=n||m.get("active_loginid");else{var g=c[n]||I()[n]||c;t=e?g[e]:g}return Array.isArray(t)||1!=+t&&0!=+t&&"true"!==t&&"false"!==t||(t=JSON.parse(t||!1)),t},getAllLoginids:l=function(){return Object.keys(I())},getAccountType:s=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return/^VR/.test(t)?e="virtual":/^MF/.test(t)?e="financial":/^MLT|MX/.test(t)&&(e="gaming"),e},isAccountOfType:C,getAccountOfType:u,hasAccountType:function(e,t){return!G(u(e,t))},hasCurrencyType:function(e){var t=l();return"crypto"===e?t.find(function(e){return!o("is_virtual",e)&&d(o("currency",e))}):t.find(function(e){return!o("is_virtual",e)&&!d(o("currency",e))})},getAccountTitle:function(e){var t=A.get();return t[s(e)]||t.default},responseAuthorize:function(e){var t=e.authorize;i("loginid",t.loginid)},shouldAcceptTnc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.getResponse("get_settings");if(o("is_virtual"))return!1;var t=y.getResponse("website_status.terms_conditions_version"),n=e.client_tnc_status;return void 0!==n&&n!==t},clearAllAccounts:function(){r=void 0,c={},m.setObject("client.accounts",c)},setNewAccount:function(e){return!!(e.email&&e.loginid&&e.token)&&(B.clear(),localStorage.setItem("GTM_new_account","1"),i("token",e.token,e.loginid),i("email",e.email,e.loginid),i("is_virtual",+e.is_virtual,e.loginid),i("loginid",e.loginid),!0)},currentLandingCompany:function(){var e=y.getResponse("landing_company")||{},t=o("landing_company_shortcode"),n=Object.keys(e).find(function(n){return t===e[n].shortcode});return e[n]||{}},shouldCompleteTax:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.getResponse("get_account_status");return C("financial")&&!/crs_tin_information/.test((e||{}).status)},getAllAccountsObject:I=function(){return m.getObject("client.accounts")},getMT5AccountType:function(e){return e?e.replace("\\","_").replace(/_(\d+|master|EUR|GBP)/,""):""},getBasicUpgradeInfo:function(){var e,t,n=y.getResponse("authorize.upgradeable_landing_companies"),r=!1;if((n||[]).length){var g=o("landing_company_shortcode");r=-1!==n.indexOf(g),(t=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.find(function(e){return e!==g&&-1!==n.indexOf(e)})}("svg","iom","malta","maltainvest"))&&(e="maltainvest"===t?"financial":"real")}return{type:e,can_upgrade:!!t,can_upgrade_to:t,can_open_multi:r}},getLandingCompanyValue:function(e,t,n){var r;if(e.financial||C("financial",e))r=Q(t,"financial_company");else{if(!e.real&&!C("real",e)){var g=(Q(t,"financial_company")||{})[n]||[],c=(Q(t,"gaming_company")||{})[n]||[];return r=g.concat(c)}(r=Q(t,"gaming_company"))||(r=Q(t,"financial_company"))}return(r||{})[n]},getRiskAssessment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.getResponse("get_account_status"),t=e.status,n=/high/.test(e.risk_classification);return C("financial")?/(financial_assessment|trading_experience)_not_complete/.test(t):n&&/financial_assessment_not_complete/.test(t)},canTransferFunds:function(e){return e?b(e.loginid):Object.keys(c).some(function(e){return b(e)})},hasSvgAccount:function(){return!!l().find(function(e){return/^CR/.test(e)})},canChangeCurrency:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=o("currency"),g=0===t.length,c=0===e.count&&0===e.transactions.length,a=c&&g;return n?r&&!o("is_virtual")&&a&&!d(r):a}});e.exports=Z},28:function(module,exports,__webpack_require__){var t;window,t=function(__WEBPACK_EXTERNAL_MODULE__0__){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var g=t[r]={i:r,l:!1,exports:{}};return e[r].call(g.exports,g,g.exports,n),g.l=!0,g.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var g in e)n.d(r,g,function(t){return e[t]}.bind(null,g));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=47)}({0:function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__0__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vZXh0ZXJuYWwge1wicm9vdFwiOlwiUmVhY3RcIixcImNvbW1vbmpzXCI6XCJyZWFjdFwiLFwiY29tbW9uanMyXCI6XCJyZWFjdFwifT82MWRlIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fOyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")},1:function(module,exports,__webpack_require__){eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (false) { var throwOnDirectAccess, ReactIs; } else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = __webpack_require__(4)();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qcz9kN2JjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdmFyIFJlYWN0SXMgPSByZXF1aXJlKCdyZWFjdC1pcycpO1xuXG4gIC8vIEJ5IGV4cGxpY2l0bHkgdXNpbmcgYHByb3AtdHlwZXNgIHlvdSBhcmUgb3B0aW5nIGludG8gbmV3IGRldmVsb3BtZW50IGJlaGF2aW9yLlxuICAvLyBodHRwOi8vZmIubWUvcHJvcC10eXBlcy1pbi1wcm9kXG4gIHZhciB0aHJvd09uRGlyZWN0QWNjZXNzID0gdHJ1ZTtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2ZhY3RvcnlXaXRoVHlwZUNoZWNrZXJzJykoUmVhY3RJcy5pc0VsZW1lbnQsIHRocm93T25EaXJlY3RBY2Nlc3MpO1xufSBlbHNlIHtcbiAgLy8gQnkgZXhwbGljaXRseSB1c2luZyBgcHJvcC10eXBlc2AgeW91IGFyZSBvcHRpbmcgaW50byBuZXcgcHJvZHVjdGlvbiBiZWhhdmlvci5cbiAgLy8gaHR0cDovL2ZiLm1lL3Byb3AtdHlwZXMtaW4tcHJvZFxuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vZmFjdG9yeVdpdGhUaHJvd2luZ1NoaW1zJykoKTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n")},2:function(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif ( true && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (true) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n\t\t\treturn classNames;\n\t\t}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else {}\n}());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcz80ZDI2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTcgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykgJiYgYXJnLmxlbmd0aCkge1xuXHRcdFx0XHR2YXIgaW5uZXIgPSBjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZyk7XG5cdFx0XHRcdGlmIChpbm5lcikge1xuXHRcdFx0XHRcdGNsYXNzZXMucHVzaChpbm5lcik7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdGNsYXNzTmFtZXMuZGVmYXVsdCA9IGNsYXNzTmFtZXM7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQSxVQUVBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n")},35:function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n    if(false) { var cssReload; }\n  //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvYnV0dG9uL2J1dHRvbi5zY3NzP2NjZTgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG4gICAgaWYobW9kdWxlLmhvdCkge1xuICAgICAgLy8gMTU2NzUwOTc3NDM0NVxuICAgICAgdmFyIGNzc1JlbG9hZCA9IHJlcXVpcmUoXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1ob3QtbG9hZGVyL2hvdE1vZHVsZVJlcGxhY2VtZW50LmpzXCIpKG1vZHVsZS5pZCwge1wiZmlsZU1hcFwiOlwie2ZpbGVOYW1lfVwifSk7XG4gICAgICBtb2R1bGUuaG90LmRpc3Bvc2UoY3NzUmVsb2FkKTtcbiAgICAgIG1vZHVsZS5ob3QuYWNjZXB0KHVuZGVmaW5lZCwgY3NzUmVsb2FkKTs7XG4gICAgfVxuICAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsZ0NBS0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///35\n")},4:function(module,exports,__webpack_require__){"use strict";eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = __webpack_require__(5);\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9mYWN0b3J5V2l0aFRocm93aW5nU2hpbXMuanM/ZDdhMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gcmVxdWlyZSgnLi9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQnKTtcblxuZnVuY3Rpb24gZW1wdHlGdW5jdGlvbigpIHt9XG5mdW5jdGlvbiBlbXB0eUZ1bmN0aW9uV2l0aFJlc2V0KCkge31cbmVtcHR5RnVuY3Rpb25XaXRoUmVzZXQucmVzZXRXYXJuaW5nQ2FjaGUgPSBlbXB0eUZ1bmN0aW9uO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBzaGltKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwgc2VjcmV0KSB7XG4gICAgaWYgKHNlY3JldCA9PT0gUmVhY3RQcm9wVHlwZXNTZWNyZXQpIHtcbiAgICAgIC8vIEl0IGlzIHN0aWxsIHNhZmUgd2hlbiBjYWxsZWQgZnJvbSBSZWFjdC5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcihcbiAgICAgICdDYWxsaW5nIFByb3BUeXBlcyB2YWxpZGF0b3JzIGRpcmVjdGx5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGBwcm9wLXR5cGVzYCBwYWNrYWdlLiAnICtcbiAgICAgICdVc2UgUHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzKCkgdG8gY2FsbCB0aGVtLiAnICtcbiAgICAgICdSZWFkIG1vcmUgYXQgaHR0cDovL2ZiLm1lL3VzZS1jaGVjay1wcm9wLXR5cGVzJ1xuICAgICk7XG4gICAgZXJyLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7XG4gICAgdGhyb3cgZXJyO1xuICB9O1xuICBzaGltLmlzUmVxdWlyZWQgPSBzaGltO1xuICBmdW5jdGlvbiBnZXRTaGltKCkge1xuICAgIHJldHVybiBzaGltO1xuICB9O1xuICAvLyBJbXBvcnRhbnQhXG4gIC8vIEtlZXAgdGhpcyBsaXN0IGluIHN5bmMgd2l0aCBwcm9kdWN0aW9uIHZlcnNpb24gaW4gYC4vZmFjdG9yeVdpdGhUeXBlQ2hlY2tlcnMuanNgLlxuICB2YXIgUmVhY3RQcm9wVHlwZXMgPSB7XG4gICAgYXJyYXk6IHNoaW0sXG4gICAgYm9vbDogc2hpbSxcbiAgICBmdW5jOiBzaGltLFxuICAgIG51bWJlcjogc2hpbSxcbiAgICBvYmplY3Q6IHNoaW0sXG4gICAgc3RyaW5nOiBzaGltLFxuICAgIHN5bWJvbDogc2hpbSxcblxuICAgIGFueTogc2hpbSxcbiAgICBhcnJheU9mOiBnZXRTaGltLFxuICAgIGVsZW1lbnQ6IHNoaW0sXG4gICAgZWxlbWVudFR5cGU6IHNoaW0sXG4gICAgaW5zdGFuY2VPZjogZ2V0U2hpbSxcbiAgICBub2RlOiBzaGltLFxuICAgIG9iamVjdE9mOiBnZXRTaGltLFxuICAgIG9uZU9mOiBnZXRTaGltLFxuICAgIG9uZU9mVHlwZTogZ2V0U2hpbSxcbiAgICBzaGFwZTogZ2V0U2hpbSxcbiAgICBleGFjdDogZ2V0U2hpbSxcblxuICAgIGNoZWNrUHJvcFR5cGVzOiBlbXB0eUZ1bmN0aW9uV2l0aFJlc2V0LFxuICAgIHJlc2V0V2FybmluZ0NhY2hlOiBlbXB0eUZ1bmN0aW9uXG4gIH07XG5cbiAgUmVhY3RQcm9wVHlwZXMuUHJvcFR5cGVzID0gUmVhY3RQcm9wVHlwZXM7XG5cbiAgcmV0dXJuIFJlYWN0UHJvcFR5cGVzO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n")},47:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/classnames/index.js\nvar classnames = __webpack_require__(2);\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// EXTERNAL MODULE: ./node_modules/prop-types/index.js\nvar prop_types = __webpack_require__(1);\nvar prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);\n\n// EXTERNAL MODULE: external {"root":"React","commonjs":"react","commonjs2":"react"}\nvar external_root_React_commonjs_react_commonjs2_react_ = __webpack_require__(0);\nvar external_root_React_commonjs_react_commonjs2_react_default = /*#__PURE__*/__webpack_require__.n(external_root_React_commonjs_react_commonjs2_react_);\n\n// EXTERNAL MODULE: ./src/components/button/button.scss\nvar button_button = __webpack_require__(35);\n\n// CONCATENATED MODULE: ./src/components/button/button.jsx\n\n\n\n\n\nvar button_Button = function Button(_ref) {\n  var children = _ref.children,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? \'\' : _ref$className,\n      classNameSpan = _ref.classNameSpan,\n      has_effect = _ref.has_effect,\n      id = _ref.id,\n      is_disabled = _ref.is_disabled,\n      onClick = _ref.onClick,\n      tabIndex = _ref.tabIndex,\n      text = _ref.text,\n      wrapperClassName = _ref.wrapperClassName,\n      type = _ref.type;\n  var classes = classnames_default()(\'btn\', {\n    effect: has_effect\n  }, className);\n  var button = external_root_React_commonjs_react_commonjs2_react_default.a.createElement("button", {\n    id: id,\n    className: classes,\n    onClick: onClick || undefined,\n    disabled: is_disabled,\n    tabIndex: tabIndex || \'0\',\n    type: type || \'submit\'\n  }, text && external_root_React_commonjs_react_commonjs2_react_default.a.createElement("span", {\n    className: classnames_default()(\'btn__text\', classNameSpan)\n  }, text), children);\n  var wrapper = external_root_React_commonjs_react_commonjs2_react_default.a.createElement("div", {\n    className: wrapperClassName\n  }, button);\n  return wrapperClassName ? wrapper : button;\n};\n\nbutton_Button.propTypes = {\n  children: prop_types_default.a.node,\n  className: prop_types_default.a.string,\n  classNameSpan: prop_types_default.a.string,\n  has_effect: prop_types_default.a.bool,\n  id: prop_types_default.a.string,\n  is_disabled: prop_types_default.a.oneOfType([prop_types_default.a.number, prop_types_default.a.bool]),\n  onClick: prop_types_default.a.func,\n  text: prop_types_default.a.string,\n  wrapperClassName: prop_types_default.a.string\n};\n/* harmony default export */ var components_button_button = (button_Button);\n// CONCATENATED MODULE: ./src/components/button/index.js\n\n/* harmony default export */ var components_button = __webpack_exports__["default"] = (components_button_button);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvYnV0dG9uL2J1dHRvbi5qc3g/NjkwMiIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvYnV0dG9uL2luZGV4LmpzPzE1M2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgUHJvcFR5cGVzICBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCAgICAgIGZyb20gJ3JlYWN0JztcbmltcG9ydCAgICAgICAgICAgICAgICAgJy4vYnV0dG9uLnNjc3MnO1xuXG5jb25zdCBCdXR0b24gPSAoe1xuICAgIGNoaWxkcmVuLFxuICAgIGNsYXNzTmFtZSA9ICcnLFxuICAgIGNsYXNzTmFtZVNwYW4sXG4gICAgaGFzX2VmZmVjdCxcbiAgICBpZCxcbiAgICBpc19kaXNhYmxlZCxcbiAgICBvbkNsaWNrLFxuICAgIHRhYkluZGV4LFxuICAgIHRleHQsXG4gICAgd3JhcHBlckNsYXNzTmFtZSxcbiAgICB0eXBlLFxufSkgPT4ge1xuICAgIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdidG4nLCB7IGVmZmVjdDogaGFzX2VmZmVjdCB9LCBjbGFzc05hbWUpO1xuICAgIGNvbnN0IGJ1dHRvbiA9IChcbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgaWQ9e2lkfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc2VzfVxuICAgICAgICAgICAgb25DbGljaz17b25DbGljayB8fCB1bmRlZmluZWR9XG4gICAgICAgICAgICBkaXNhYmxlZD17aXNfZGlzYWJsZWR9XG4gICAgICAgICAgICB0YWJJbmRleD17dGFiSW5kZXggfHwgJzAnfVxuICAgICAgICAgICAgdHlwZT17dHlwZSB8fCAnc3VibWl0J31cbiAgICAgICAgPlxuICAgICAgICAgICAgeyB0ZXh0ICYmXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdidG5fX3RleHQnLCBjbGFzc05hbWVTcGFuKX0+XG4gICAgICAgICAgICAgICAgICAgIHt0ZXh0fVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPC9idXR0b24+XG4gICAgKTtcbiAgICBjb25zdCB3cmFwcGVyID0gKDxkaXYgY2xhc3NOYW1lPXt3cmFwcGVyQ2xhc3NOYW1lfT57YnV0dG9ufTwvZGl2Pik7XG5cbiAgICByZXR1cm4gd3JhcHBlckNsYXNzTmFtZSA/IHdyYXBwZXIgOiBidXR0b247XG59O1xuXG5CdXR0b24ucHJvcFR5cGVzID0ge1xuICAgIGNoaWxkcmVuICAgICAgICA6IFByb3BUeXBlcy5ub2RlLFxuICAgIGNsYXNzTmFtZSAgICAgICA6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY2xhc3NOYW1lU3BhbiAgIDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBoYXNfZWZmZWN0ICAgICAgOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBpZCAgICAgICAgICAgICAgOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGlzX2Rpc2FibGVkICAgICA6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5udW1iZXIsIFByb3BUeXBlcy5ib29sXSksXG4gICAgb25DbGljayAgICAgICAgIDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgdGV4dCAgICAgICAgICAgIDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICB3cmFwcGVyQ2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgQnV0dG9uO1xuIiwiaW1wb3J0IEJ1dHRvbiBmcm9tICcuL2J1dHRvbi5qc3gnO1xuXG5leHBvcnQgZGVmYXVsdCBCdXR0b247XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFTQTtBQUFBO0FBT0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVlBOztBQ3JEQTtBQUVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///47\n')},5:function(module,exports,__webpack_require__){"use strict";eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQuanM/NTliMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJztcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFByb3BUeXBlc1NlY3JldDtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n")}}).default},module.exports=t(__webpack_require__(111))},29:function(e,t,n){"use strict";var r=n(72);n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return r.d}),n.d(t,"c",function(){return r.e}),n.d(t,"d",function(){return r.f});var g=n(45);n.d(t,"e",function(){return g.a});n(118)},3:function(e,t,n){"use strict";n.r(t),n.d(t,"localize",function(){return l});var r=n(184),g=n(149),c=n(148);n(254);function a(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function i(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};a(n,!0).forEach(function(t){o(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):a(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I={resources:{EN:{translation:i({},n.t(254,1))}},react:{hashTransKey:function(e){return Object(r.str)(e)}},lng:window.location.search&&window.location.search.includes("lang=")?window.location.search.substr(1).split("&").find(function(e){return e.includes("lang=")}).split("=")[1].toUpperCase():void 0,fallbackLng:"EN"};g.a.use(c.b).init(I);var l=function(e,t){return g.a.t(Object(r.str)(e),i({defaultValue:e},t))};t.default=g.a},32:function(e,t,n){var r=n(41).urlFor,g=n(41).get,c=n(70).getCurrentProductionDomain;n(515);var a,i,o,I,l,s=(I=function(e){return e?e.replace(/(^\/|\/$|[^a-zA-Z0-9-_\/])/g,""):""},l={"bot.binary.com":"www.binary.bot","developers.binary.com":"developers.binary.com","academy.binary.com":"academy.binary.com","tech.binary.com":"tech.binary.com","blog.binary.com":"blog.binary.com"},{getUrlBase:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=window.location;return/^\/br_|bot/.test(t.pathname)?"/".concat(t.pathname.split("/")[1]).concat(/^\//.test(e)?e:"/".concat(e)):e},reset:function(){a=window?window.location:a},paramsHash:o=function(e){for(var t={},n=function(e){for(var t=[],n=((e?new URL(e):a).search||"").substr(1).split("&"),r=n.length;r--;){var g=n[r].split("=");t.push(g)}return t}(e),r=n.length;r--;)n[r][0]&&(t[n[r][0]]=n[r][1]||"");return t},urlFor:function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(n||g()).toLowerCase(),i="https://".concat(window.location.hostname,"/");c&&(i=/localhost|binary\.sx/.test(i)?"https://binary.com/".concat(a||"en","/"):i.replace(/deriv\.app/,"binary.com/".concat(a||"en")));var o="".concat(i).concat(I(e)||"home",".html").concat(t?"?".concat(t):"");return r(a,o)},urlForCurrentDomain:function(e){var t=c();if(!t)return e;var n=new URL(e);if(Object.keys(l).includes(n.hostname))n.hostname=l[n.hostname];else{if(-1===n.hostname.indexOf("binary.com"))return e;n.hostname=n.hostname.replace(new RegExp("\\.".concat("binary.com"),"i"),".".concat(t))}return n.href},urlForStatic:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i&&0!==i.length||((i=document.querySelector('script[src*="vendor.min.js"]'))&&(i=i.getAttribute("src")),i=i&&i.length>0?i.substr(0,i.indexOf("/js/")+1):s.websiteUrl()),i+e.replace(/(^\/)/g,"")},param:function(e){return o()[e]},websiteUrl:function(){return"".concat(location.protocol,"//").concat(location.hostname,"/")},getHostMap:function(){return l},resetStaticHost:function(){i=void 0}});e.exports=s},33:function(e,t,n){var r,g,c,a,i,o,I,l,s,C,u=n(16),A=n(10),b=n(7).PromiseClass,d=(o=!1,I=new b,l=function(e){o||(i=e,s(),clearInterval(c),c=setInterval(s,3e4),o=!0)},s=function(){g=performance.now(),A.send({time:1}).then(C)},C=function(e){if(!e.error)if(o){clearInterval(a);var t=e.time,n=performance.now(),c=1e3*t+(n-g),s=function(){var e=performance.now()-n;r=u(c+e).utc(),"function"==typeof i&&i()};s(),I.resolve(),a=setInterval(s,1e3)}else l()},{init:l,get:function(){return r?r.clone():void 0},timePromise:I.promise});e.exports=d},38:function(e,t,n){"use strict";var r=n(1),g=n.n(r),c=n(0),a=n.n(c),i=n(144);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){if(null==e)return{};var n,r,g=function(e,t){if(null==e)return{};var n,r,g={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(g[n]=e[n]);return g}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(g[n]=e[n])}return g}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,C(t).apply(this,arguments))}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.should_load,n=void 0===t||t,r=e.ctor,g=e.has_progress,c=I(e,["should_load","ctor","has_progress"]);if(!n)return null;var o=a.a.lazy(r);return a.a.createElement(a.a.Suspense,{fallback:g?a.a.createElement(i.a,null):a.a.createElement("div",null)},a.a.createElement(o,c))}}])&&l(n.prototype,r),g&&l(n,g),t}();A.defaultProps={should_load:!0,has_progress:!1},A.propTypes={ctor:g.a.func.isRequired,has_progress:g.a.bool,should_load:g.a.bool};var b=A;n.d(t,"a",function(){return b})},39:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return C}),n.d(t,"e",function(){return u});var r=n(3),g=n(4);function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=function(){return{t:{display:Object(r.localize)("ticks"),order:1},s:{display:Object(r.localize)("seconds"),order:2,to_second:1},m:{display:Object(r.localize)("minutes"),order:3,to_second:60},h:{display:Object(r.localize)("hours"),order:4,to_second:3600},d:{display:Object(r.localize)("days"),order:5,to_second:86400}}},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{min_max:{},units_display:{}};t.min_max[e.start_type]=t.min_max[e.start_type]||{},t.units_display[e.start_type]=t.units_display[e.start_type]||[];var n=I(e.min_contract_duration),r=I(e.max_contract_duration);t.min_max[e.start_type][e.expiry_type]={min:o(n.duration,n.unit,"s"),max:o(r.duration,r.unit,"s")};var g=[];t.units_display[e.start_type].forEach(function(e){g.push(e.value)});var i=a();return/^tick|daily$/.test(e.expiry_type)?-1===g.indexOf(n.unit)&&g.push(n.unit):Object.keys(i).forEach(function(e){"d"!==e&&-1===g.indexOf(e)&&i[e].order>=i[n.unit].order&&i[e].order<=i[r.unit].order&&g.push(e)}),t.units_display[e.start_type]=g.sort(function(e,t){return i[e].order>i[t].order?1:-1}).reduce(function(e,t){return[].concat(c(e),[{text:i[t].display,value:t}])},[]),t},o=function(e,t,n){if(!e||!t||!n||isNaN(parseInt(e)))return null;var r=a();return t!==n&&"to_second"in r[t]?e*r[t].to_second/r[n].to_second:e},I=function(e){var t=e.toString().match(/[a-zA-Z]+|[0-9]+/g);return{duration:+t[0],unit:t[1]}},l=function(e){var t=e.duration_unit,n=e.expiry_date,r=e.expiry_type,c=e.duration_units_list,a=e.root_store.common.server_time,i="duration"===r&&"d"===t,o="endtime"===r&&(Object(g.w)(n).isAfter(Object(g.w)(a),"day")||!C(c)),I="daily";return i||o||(I="t"===t?"tick":"intraday"),I},s=function(e,t){if(!(e>=0&&t&&Number.isInteger(e)))return null;if("m"===t){var n=e/60;return n>=1?Math.floor(n):1}if("h"===t){var r=e/3600;return r>=1?Math.floor(r):1}if("d"===t){var g=e/86400;return g>=1?Math.floor(g):1}return e},C=function(e){return e.some(function(e){return-1!==["m","h"].indexOf(e.value)})},u=function(e,t){return/^R_/.test(e)&&"endtime"===t?Object(g.w)(null).format("DD MMM YYYY"):null}},4:function(e,t,n){"use strict";var r=n(16),g=n.n(r),c=n(3),a=n(33),i=n.n(a);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,g=!1,c=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){g=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(g)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}g.a.createFromInputFallback=function(e){e._d=new Date(NaN)};var I=function(e){return g.a.unix(e).utc()},l=function(e){if(!e)return i.a.get()||g()().utc();if(e instanceof g.a&&e.isValid()&&e.isUTC())return e;if("number"==typeof e)return I(e);if(/invalid/i.test(g()(e))){var t=g()();return e>t.utc().daysInMonth()?g.a.utc(t.add(e,"d"),"DD MMM YYYY"):g.a.utc(e,"DD MMM YYYY")}return g.a.utc(e)},s=function(e,t){var n=o(t?t.split(":"):[0,0,0],3),r=n[0],g=n[1],c=n[2];return e.hour(r).minute(g||0).second(c||0),e},C=function(e,t){return s(l(e),t).unix()},u=function(e){return g()(e||void 0).utc().format("YYYY-MM-DD HH:mm:ss [GMT]")},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";return l(e).format(t)},b=function(e){var t=l(e).startOf("day").diff(l().startOf("day"),"days");return!e||t<0?"":t},d=function(e,t){return t.diff(e,"month")},B=function(e,t){return g.a.duration(g.a.unix(t).diff(g.a.unix(e)))},p=function(e){var t=Math.floor(e.asDays()),n=e.hours(),r=e.minutes(),a=e.seconds(),i=g()(0).hour(n).minute(r).seconds(a).format("HH:mm:ss");return t>0&&(i="".concat(t," ").concat(t>1?Object(c.localize)("days"):Object(c.localize)("day")," ").concat(i)),i},m=function(e){return/^([0-9]|[0-1][0-9]|2[0-3]):([0-9]|[0-5][0-9])(:([0-9]|[0-5][0-9]))?$/.test(e)},y=function(e){return m(e)&&/^([01][0-9]|2[0-3])$/.test(e.split(":")[0])},Q=function(e){return m(e)&&/^[0-5][0-9]$/.test(e.split(":")[1])},G=function(e){return g()(e,"DD MMM YYYY").isValid()},Z=function(e,t){return l(e).clone().add(t,"day")},h=function(e,t){return l(e).clone().add(t,"month")},F=function(e,t){return l(e).clone().add(t,"year")},X=function(e,t){return l(e).clone().subtract(t,"day")},V=function(e,t){return l(e).clone().subtract(t,"month")},f=function(e,t){return l(e).clone().subtract(t,"year")},v=function(e,t){return g.a.min(l(e),l(t))},W=function(e){return l(e).clone().startOf("month").format("YYYY-MM-DD")},U=function(e,t){return g.a.utc(e).format(t)};n.d(t,"g",function(){return I}),n.d(t,"w",function(){return l}),n.d(t,"r",function(){return s}),n.d(t,"d",function(){return C}),n.d(t,"v",function(){return u}),n.d(t,"h",function(){return A}),n.d(t,"e",function(){return b}),n.d(t,"f",function(){return d}),n.d(t,"k",function(){return B}),n.d(t,"i",function(){return p}),n.d(t,"p",function(){return m}),n.d(t,"n",function(){return y}),n.d(t,"o",function(){return Q}),n.d(t,"m",function(){return G}),n.d(t,"a",function(){return Z}),n.d(t,"b",function(){return h}),n.d(t,"c",function(){return F}),n.d(t,"s",function(){return X}),n.d(t,"t",function(){return V}),n.d(t,"u",function(){return f}),n.d(t,"q",function(){return v}),n.d(t,"l",function(){return W}),n.d(t,"j",function(){return U})},41:function(e,t,n){var r,g,c,a,i,o,I=n(136),l=n(21).CookieStorage,s=(r={ACH:"Translations",EN:"English",DE:"Deutsch",ES:"Español",FR:"Français",ID:"Indonesia",IT:"Italiano",PL:"Polish",PT:"Português",RU:"Русский",TH:"Thai",VI:"Tiếng Việt",ZH_CN:"简体中文",ZH_TW:"繁體中文"},g=null,c=new RegExp("^(".concat(Object.keys(r).join("|"),")$"),"i"),i=null,{getAll:function(){return r},setCookie:function(e){I.get("language")&&!e||new l("language").write((e||o()).toUpperCase())},get:o=function(){if(/ach/i.test(i)||/ach/i.test(a())){var e=localStorage.getItem("jipt_language_code_binary-static")||I.get("jipt_language_code_binary-static");e&&(i=e.toUpperCase().replace("-","_").toUpperCase(),document.body&&document.body.classList.add(i))}return i=i||(a()||I.get("language")||"EN").toUpperCase()},urlFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return t.replace(new RegExp("/".concat(o(),"/"),"i"),"/".concat((e||"EN").trim().toLowerCase(),"/"))},urlLang:a=function(e){if(g&&!e)return g;var t=(e||window.location.href).split("/").slice(3).find(function(e){return c.test(e)})||"";return e||(g=t),t},reset:function(){g=null,i=null}});e.exports=s},45:function(e,t,n){"use strict";t.a={error404:"/404",account_password:"/settings/account_password",apps:"/settings/apps",cashier_password:"/settings/cashier_password",contract:"/contract/:contract_id",exclusion:"/settings/exclusion",financial:"/settings/financial",history:"/settings/history",index:"/index",limits:"/settings/limits",personal:"/settings/personal",positions:"/reports/positions",profit:"/reports/profit",reports:"/reports",root:"/",redirect:"/redirect",settings:"/settings",statement:"/reports/statement",token:"/settings/token",trade:"/"}},46:function(e,t,n){"use strict";var r=n(10),g=n.n(r),c=n(7);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,o,I,l,s,C,u,A,b=(i={},o={},I=0,l=function(e,t){var n=Object(c.getPropertyValue)(e,[e.msg_type,"id"])||Object(c.getPropertyValue)(e.subscription,["id"]);if(i[t]){var r=i[t];!r.stream_id&&n&&(r.stream_id=n),r.subscribers.length?((!r.stream_id&&(e.error||!Object(c.isEmptyObject)(e[e.msg_type])&&e.msg_type===r.msg_type)||!n&&r.stream_id)&&delete i[t],r.subscribers.forEach(function(t){t(e)})):(delete i[t],C(r.stream_id))}else o[n]||C(n)},s=function(e,t,n){if("function"!=typeof t)throw new Error("Missing callback function. To forget all subscriptions of msg_type: ".concat(e,", please call forgetAll()."));var r=[];return Object.keys(i).forEach(function(g){if(i[g].msg_type===e&&(!n||A(i[g].request,n))){var c=i[g].stream_id;c&&1===i[g].subscribers.length?(delete i[g],r.push(C(c))):u(g,t)&&i[g].subscribers.splice(i[g].subscribers.indexOf(t),1)}}),Promise.all(r)},u=function(e,t){return i[e]&&-1!==i[e].subscribers.indexOf(t)},A=function(e,t){return"object"===a(e)&&"object"===a(t)&&Object.keys(t).every(function(n){return e[n]===t[n]})},{addSubscriptionFromRequest:function(e,t,n,r){return new Promise(function(a){var o,s=!1;g.a.send(t,{callback:function(t){return t.error?a(t):s?l(t,o):(s=!0,o=++I,r&&Array.isArray(r)&&r.forEach(function(e){t[t.msg_type][e]&&(n[e]=t[t.msg_type][e])}),i[o]={msg_type:e,request:Object(c.cloneObject)(n),stream_id:"",subscribers:[]},a(t))}})})},subscribe:function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(a)s(t,r).then(function(){e(t,n,r)});else{var o=Object.keys(i).find(function(e){return Object(c.isDeepEqual)(n,i[e].request)});o?u(o,r)||i[o].subscribers.push(r):(o=++I,i[o]={msg_type:t,request:Object(c.cloneObject)(n),stream_id:"",subscribers:[r]},g.a.send(n,{callback:function(e){return l(e,o)}}))}},forget:s,forgetAll:function(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){var n=Object.keys(i).filter(function(e){return i[e].msg_type===t});n.length&&(n.forEach(function(e){delete i[e]}),e[t]=!0)}),Promise.resolve(Object(c.isEmptyObject)(e)?{}:g.a.send({forget_all:Object.keys(e)}))},forgetStream:C=function(e){return o[e]=!0,Promise.resolve(e?g.a.send({forget:e}).then(function(){delete o[e]}):{})}});function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=window.ignored_responses_in_trackjs||[],p=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.list=[],this.size=3}var t,n,r;return t=e,(n=[{key:"add",value:function(e){this.list.unshift(e)}},{key:"remove",value:function(){this.list.pop()}},{key:"push",value:function(e){this.list.length>=this.size&&this.remove(),this.add(e)}},{key:"fresh",value:function(){this.list=[]}}])&&d(t.prototype,n),r&&d(t,r),e}()),m={get:function(e,t,n){try{var r=Reflect.get(e,t,n);return"function"==typeof r?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var g=r.apply(this,t);return g instanceof Promise?new Promise(function(e){var t;g.then(function(e){e.error&&(p.push(e),window.TrackJS&&window.TrackJS.console.log(p.list),p.fresh(),window.TrackJS&&!B.some(function(t){return t===e.error.code})&&window.TrackJS.track(e.error.code)),p.push(e),t=e}).catch(function(e){window.TrackJS&&(window.TrackJS.console.log(p.list),window.TrackJS.track(e.getMessage()))}).finally(function(){e(t)})}):g}.bind(this):r}catch(e){throw new Error(e.getMessage())}}};function y(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function Q(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};y(n,!0).forEach(function(t){G(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):y(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z={activeSymbols:function(e){return g.a.send({active_symbols:"brief"},Q({msg_type:"active_symbols"},e&&e))},buy:function(e,t){return g.a.send({buy:e,price:t})},cashier:function(e,t){return g.a.send(Q({cashier:e},t&&{verification_code:t}))},contractsFor:function(e){return g.a.send({contracts_for:e})},getAccountStatus:function(){return g.a.send({get_account_status:1})},getSelfExclusion:function(){return g.a.send({get_self_exclusion:1})},getSettings:function(e){return g.a.send({get_settings:1},e)},getTradingTimes:function(e){return g.a.send({trading_times:e})},landingCompany:function(e){return g.a.send({landing_company:e})},logout:function(){return g.a.send({logout:1})},mt5LoginList:function(){return g.a.send({mt5_login_list:1})},newAccountVirtual:function(e,t,n,r){return g.a.send(Q({new_account_virtual:1,verification_code:e,client_password:t,residence:n},r))},oauthApps:function(){return g.a.send({oauth_apps:1})},portfolio:function(){return g.a.send({portfolio:1})},payoutCurrencies:function(e){return g.a.send({payout_currencies:1},Q({msg_type:"payout_currencies"},e&&e))},profitTable:function(e,t,n){return g.a.send(Q({profit_table:1,description:1,limit:e,offset:t},n))},proposalOpenContract:function(e){return g.a.send({proposal_open_contract:1,contract_id:e})},residenceList:function(){return g.a.send({residence_list:1})},sell:function(e,t){return g.a.send({sell:e,price:t})},sellExpired:function(){return g.a.send({sell_expired:1})},sendRequest:function(e,t){return Promise.resolve(Object(c.isEmptyObject)(e)?{}:g.a.send(e,t))},statement:function(e,t,n){return g.a.send(Q({statement:1,description:1,limit:e,offset:t},n))},verifyEmail:function(e,t){return g.a.send({verify_email:e,type:t})},forget:function(e,t,n){return b.forget(e,t,n)},forgetAll:function(){return b.forgetAll.apply(b,arguments)},forgetStream:function(e){return b.forgetStream(e)},subscribeBalance:function(e,t){return b.subscribe("balance",{balance:1,subscribe:1},e,t)},subscribeProposal:function(e,t,n){return b.subscribe("proposal",e,t,n)},subscribeProposalOpenContract:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return b.subscribe("proposal_open_contract",Q({proposal_open_contract:1,subscribe:1},e&&{contract_id:e}),t,n)},subscribeProposalOpenContractOnBuy:function(e){return b.addSubscriptionFromRequest("proposal_open_contract",Q({},e,{subscribe:1}),{proposal_open_contract:1,subscribe:1},["contract_id"])},subscribeTicks:function(e,t,n){return b.subscribe("ticks",{ticks:e,subscribe:1},t,n)},subscribeTicksHistory:function(e,t,n){return b.subscribe("ticks_history",e,t,n)},subscribeTransaction:function(e,t){return b.subscribe("transaction",{transaction:1,subscribe:1},e,t)},subscribeWebsiteStatus:function(e){return b.subscribe("website_status",{website_status:1,subscribe:1},e)}};t.a=new Proxy(Z,m)},463:function(e,t){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)})},464:function(e,t){Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})},466:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Element.prototype.hide=function(){return this.style.display="none",this},Element.prototype.show=function(){return this.style.display="",this},"remove"in Element.prototype||(Element.prototype.remove=function(){return this.parentNode&&this.parentNode.removeChild(this),this}),Element.prototype.toggleClass=function(e,t){return void 0===t&&(t=!this.classList.contains(e)),this.classList[t?"add":"remove"](e),this},Element.prototype.setVisibility=function(e){return this.toggleClass("invisible",!e),this},Element.prototype.html=function(e){return"object"===n(e)?(this.innerHTML="",this.appendChild(e)):this.innerHTML=e,this}},501:function(e,t){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1})},513:function(e,t,n){},514:function(e,t){e.exports={isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}}},516:function(e,t,n){},517:function(e,t,n){},518:function(e,t,n){"use strict";n.r(t);n(258),n(460),n(463),n(464);n(465),n(466);var r=n(1),g=n.n(r),c=n(0),a=n.n(c),i=n(61),o=n.n(i),I=n(36),l=n(11),s=n(244);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=u(this,A(t).call(this,e))).componentDidCatch=function(e,t){window.TrackJS&&window.TrackJS.console.log(n.props.root_store),n.setState({hasError:!0,error:e,info:t})},n.render=function(){return n.state.hasError?a.a.createElement(s.default,{should_show_refresh:!0}):n.props.children},n.state={hasError:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,a.a.Component),t}();d.propTypes={root_store:g.a.object};var B=Object(l.b)(function(e){return{root_store:e}})(d),p=n(5),m=n.n(p),y=n(31),Q=n(99),G=function(e){var t=e.children,n=e.is_app_disabled,r=e.is_contract_mode,g=(e.is_logged_in,e.is_positions_drawer_on),c=e.is_route_modal_on;return a.a.createElement("div",{id:"app_contents",className:m()("app-contents",{"app-contents--show-positions-drawer":g,"app-contents--contract-mode":r,"app-contents--is-disabled":n,"app-contents--is-route-modal":c})},a.a.createElement(Q.Scrollbars,{autoHide:!0,style:{height:"calc(100vh - 83px)"}},t))};G.propTypes={addNotificationBar:g.a.func,children:g.a.any,is_app_disabled:g.a.bool,is_contract_mode:g.a.bool,is_logged_in:g.a.bool,is_positions_drawer_on:g.a.bool,is_route_modal_on:g.a.bool,pwa_prompt_event:g.a.object,setPWAPromptEvent:g.a.func};var Z=Object(y.g)(Object(l.b)(function(e){var t=e.client,n=e.modules,r=e.ui;return{is_logged_in:t.is_logged_in,is_contract_mode:n.smart_chart.is_contract_mode,is_app_disabled:r.is_app_disabled,is_positions_drawer_on:r.is_positions_drawer_on,is_route_modal_on:r.is_route_modal_on,pwa_prompt_event:r.pwa_prompt_event}})(G)),h=n(13),F=n(4),X=function(e){var t=e.server_time,n=Object(F.v)(t);return a.a.createElement("div",{className:"server-time"},n)};X.propTypes={server_time:g.a.object};var V=Object(l.b)(function(e){return{server_time:e.common.server_time}})(X),f=n(71),v=n.n(f),W=(n(112),n(3)),U=function(e){var t=e.status;return a.a.createElement("div",{className:"network-status__wrapper"},a.a.createElement(v.a,{classNameBubble:"network-status__tooltip",alignment:"top",message:Object(W.localize)("Network status: {{status}}",{status:t.tooltip||Object(W.localize)("Connecting to server")})},a.a.createElement("div",{className:m()("network-status__circle",{"network-status__circle--offline":"offline"===t.class,"network-status__circle--online":"online"===t.class,"network-status__circle--blinker":"blinker"===t.class})})))};U.propTypes={status:g.a.object};var N=Object(l.b)(function(e){return{status:e.common.network_status}})(U),_=n(8);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=R(this,Y(t).call(this,e))).onFullScreen=function(){var e=n.fullscreen_map.element.some(function(e){return document[e]});n.setState({is_full_screen:e})},n.toggleFullScreen=function(e){e.stopPropagation();var t=n.state.is_full_screen,r=t?document:document.documentElement,g=n.fullscreen_map[t?"fnc_exit":"fnc_enter"].find(function(e){return r[e]});g?r[g]():n.setState({is_full_screen:!1})},n.state={is_full_screen:!1},n.fullscreen_map={event:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],element:["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"],fnc_enter:["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],fnc_exit:["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"]},n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.fullscreen_map.event.forEach(function(t){document.addEventListener(t,e.onFullScreen,!1)})}},{key:"render",value:function(){var e=m()("ic-fullscreen","footer__link",{"ic-fullscreen--active":this.state.is_full_screen});return a.a.createElement("a",{className:e,onClick:this.toggleFullScreen,id:"dt_fullscreen_toggle"},a.a.createElement(_.a,{icon:"IconMaximize",className:"footer__icon"}))}}])&&x(n.prototype,r),g&&x(n,g),t}(),S=function(e){var t=e.positions_count,n=e.is_positions_drawer_on,r=e.togglePositionsDrawer,g=m()("ic-positions","footer__link",{"ic-positions--active":n,"ic-positions--has-count":t>0});return a.a.createElement("a",{id:"dt_positions_toggle",className:g,onClick:r,"data-count":t},a.a.createElement(_.a,{icon:"IconPositions",className:"footer__icon ic-positions__icon"}))};S.propTypes={is_positions_drawer_on:g.a.bool,positions_count:g.a.number,togglePositionsDrawer:g.a.func};var J=n(37),E=n(187);n(137),n(138);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=k(this,z(t).call(this,e))).componentDidMount=function(){document.addEventListener("mousedown",n.handleClickOutside),n.el.classList.add("modal"),n.state.modal_root.appendChild(n.el)},n.componentWillUnmount=function(){document.removeEventListener("mousedown",n.handleClickOutside),n.state.modal_root.removeChild(n.el)},n.handleClickOutside=function(e){n.wrapper_ref&&!n.wrapper_ref.contains(e.target)&&n.props.is_open&&n.props.toggleModal()},n.setWrapperRef=function(e){n.wrapper_ref=e},n.el=document.createElement("div"),n.state={modal_root:document.getElementById("modal_root")},n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){return o.a.createPortal(a.a.createElement("div",{ref:this.setWrapperRef,id:this.props.id,className:m()("modal__container",this.props.className&&"modal__".concat(this.props.className))},a.a.createElement("div",{className:"modal-header"},a.a.createElement("h3",{className:"modal-header__sidebar"},this.props.title),a.a.createElement("div",{className:"modal-header__main"},this.props.header&&a.a.createElement("div",{className:"modal-header__section"},this.props.header),a.a.createElement("div",{id:"dt_modal_close_icon",className:"modal-header__close",onClick:this.props.toggleModal},a.a.createElement(_.a,{icon:"ModalIconClose"})))),a.a.createElement(E.a,{alignment:"center",classNameHeader:"modal__tab-header",id:"modal",list:this.props.modal_content,selected_index:this.props.selected_index})),this.el)}}])&&w(n.prototype,r),g&&w(n,g),t}();L.propTypes={className:g.a.string,header:g.a.node,id:g.a.string,is_open:g.a.bool,modal_content:g.a.array,selected_index:g.a.number,title:g.a.string,toggleModal:g.a.func};var P=function(e){var t=e.className,n=e.header,r=e.id,g=e.is_open,c=e.modal_content,i=e.selected_index,o=e.title,I=e.toggleModal;return a.a.createElement(J.CSSTransition,{appear:!0,in:g,timeout:250,classNames:{appear:"modal__container--enter",enter:"modal__container--enter",enterDone:"modal__container--enter-done",exit:"modal__container--exit"},unmountOnExit:!0},a.a.createElement(L,{className:t,header:n,id:r,is_open:g,modal_content:c,selected_index:i,title:o,toggleModal:I}))};P.propTypes={className:g.a.string,header:g.a.node,id:g.a.string,is_open:g.a.bool,modal_content:g.a.array,selected_index:g.a.number,title:g.a.string,toggleModal:g.a.func};var K=n(144),M=n(38),q=(n(513),function(){return a.a.createElement(M.a,{ctor:function(){return n.e("settings-theme").then(n.bind(null,652))},should_load:!0,has_progress:!0})}),$=function(){return a.a.createElement(M.a,{ctor:function(){return n.e("settings-language").then(n.bind(null,638))},should_load:!0,has_progress:!0})},ee=function(){return a.a.createElement(M.a,{ctor:function(){return n.e("settings-chart").then(n.bind(null,644))}})};ee.displayName="ChartSettingContainer",$.displayName="LanguageSettingContainer",q.displayName="ThemeSettingContainer";var te=[{icon:"IconTheme",label:Object(W.localize)("Themes"),value:q},{icon:"IconLanguage",label:Object(W.localize)("Language"),value:$},{icon:"IconCharts",label:Object(W.localize)("Charts"),value:ee}],ne=function(e){var t=e.enableApp,n=e.is_settings_visible,r=e.disableApp,g=e.toggleSettings,c=m()("ic-settings","footer__link",{"ic-settings--active":n});return a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{id:"dt_settings_toggle",onClick:g,className:c},a.a.createElement(_.a,{icon:"IconSettings",className:"footer__icon ic-settings__icon"})),a.a.createElement(a.a.Suspense,{fallback:a.a.createElement(K.a,null)},a.a.createElement(P,{id:"dt_settings_modal",modal_content:te,enableApp:t,is_open:n,disableApp:r,title:Object(W.localize)("Platform settings"),toggleModal:g})))};ne.propTypes={disableApp:g.a.func,enableApp:g.a.func,is_settings_visible:g.a.bool,toggleSettings:g.a.func};var re=function(e){var t=e.active_positions,n=e.enableApp,r=e.is_app_disabled,g=e.is_logged_in,c=e.is_positions_drawer_on,i=e.is_route_modal_on,o=e.is_settings_modal_on,I=e.disableApp,l=e.show_positions_toggle,s=e.togglePositionsDrawer,C=e.toggleSettingsModal;return a.a.createElement("footer",{className:m()("footer",{"footer--is-disabled":r||i})},a.a.createElement("div",{className:"footer__links footer__links--left"},g&&l&&a.a.createElement(S,{is_positions_drawer_on:c,togglePositionsDrawer:s,positions_count:t.length||0})),a.a.createElement(N,null),a.a.createElement(V,null),a.a.createElement("div",{className:"footer__links"},a.a.createElement(ne,{is_settings_visible:o,toggleSettings:C,disableApp:I,enableApp:n}),a.a.createElement(T,null)))};re.propTypes={active_positions:h.PropTypes.arrayOrObservableArray,is_app_disabled:g.a.bool,is_logged_in:g.a.bool,is_positions_drawer_on:g.a.bool,is_route_modal_on:g.a.bool,is_settings_modal_on:g.a.bool,location:g.a.object,show_positions_toggle:g.a.bool,togglePositionsDrawer:g.a.func,toggleSettingsModal:g.a.func};var ge=Object(y.g)(Object(l.b)(function(e){var t=e.client,n=e.modules,r=e.ui;return{active_positions:n.portfolio.active_positions,enableApp:r.enableApp,is_app_disabled:r.is_app_disabled,is_route_modal_on:r.is_route_modal_on,is_logged_in:t.is_logged_in,is_loading:r.is_loading,is_positions_drawer_on:r.is_positions_drawer_on,is_settings_modal_on:r.is_settings_modal_on,disableApp:r.disableApp,show_positions_toggle:r.show_positions_toggle,togglePositionsDrawer:r.togglePositionsDrawer,toggleSettingsModal:r.toggleSettingsModal}})(re)),ce=n(141),ae=function(e){var t=e.is_logged_in,n=e.items;return a.a.createElement(a.a.Fragment,null,!!n.length&&a.a.createElement("div",{className:"header__menu-links"},n.map(function(e,n){return e.login_only&&e.login_only!==t?null:a.a.createElement(ce.a,{id:e.id,key:n,to:e.link_to,className:"header__menu-link",active_class:"header__menu-link--active"},a.a.createElement(a.a.Fragment,null,e.text&&a.a.createElement("span",{title:e.text,className:"header__menu-link-text"},e.icon,e.text,e.logo),e.image&&a.a.createElement("span",{className:"header__menu-link-text"},e.image,e.logo)))})))};ae.propTypes={items:g.a.arrayOf(g.a.shape({icon:g.a.shape({className:g.a.string}),is_logged_in:g.a.bool,link_to:g.a.string,text:g.a.string}))};var ie=n(28),oe=n.n(ie),Ie=(n(65),n(12)),le=n(32),se=n(62),Ce=function(e){var t=e.className;return a.a.createElement(oe.a,{id:"dt_login_button",className:m()(t,"btn--secondary btn--secondary--orange"),has_effect:!0,text:Object(W.localize)("Log in"),onClick:se.redirectToLogin})};Ce.propTypes={className:g.a.string};var ue=function(e){var t=e.className;return a.a.createElement(oe.a,{id:"dt_signup_button",className:m()(t,"btn--primary btn--primary--orange"),has_effect:!0,text:Object(W.localize)("Sign up"),onClick:function(){window.open("https://deriv.com")}})};ue.propTypes={className:g.a.string};var Ae=function(e){var t=e.className,n=e.onClick;return a.a.createElement(oe.a,{id:"acc-balance-btn",className:m()(t,"btn--primary btn--primary--orange"),has_effect:!0,text:Object(W.localize)("Upgrade"),onClick:n})};Ae.propTypes={className:g.a.string,onClick:g.a.func};n(516);function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ye=a.a.lazy(function(){return n.e("account-info").then(n.bind(null,650))}),Qe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Be(this,pe(t).apply(this,arguments))}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,c["Component"]),n=t,(r=[{key:"shouldComponentUpdate",value:function(e){return e.balance!==this.props.balance||e.can_upgrade!==this.props.can_upgrade||e.can_upgrade_to!==this.props.can_upgrade_to||e.currency!==this.props.currency||e.is_acc_switcher_on!==this.props.is_acc_switcher_on||e.is_logged_in!==this.props.is_logged_in||e.is_virtual!==this.props.is_virtual||e.loginid!==this.props.loginid}},{key:"render",value:function(){var e=this.props,t=e.balance,n=e.can_upgrade,r=e.can_upgrade_to,g=e.currency,c=e.is_acc_switcher_on,i=e.is_logged_in,o=e.is_virtual,I=e.loginid,l=e.onClickUpgrade,s=e.toggleAccountsDialog;return i?a.a.createElement(a.a.Fragment,null,a.a.createElement(a.a.Suspense,{fallback:a.a.createElement("div",null)},a.a.createElement(ye,{balance:Object(Ie.formatMoney)(g,t,!0),is_upgrade_enabled:n,is_virtual:o,onClickUpgrade:l,currency:g,loginid:I,is_dialog_on:c,toggleDialog:s})),!(!r||!o)&&a.a.createElement(Ae,{className:"acc-info__button",onClick:function(){window.open(Object(le.urlFor)("user/accounts",void 0,void 0,!0))}}),!o&&a.a.createElement(oe.a,{id:"dt_deposit_button",className:"btn--primary btn--primary--orange acc-info__button",has_effect:!0,text:Object(W.localize)("Deposit"),onClick:function(){window.open(Object(le.urlFor)("cashier",void 0,void 0,!0),"_blank","noopener","noreferrer")}})):a.a.createElement(a.a.Fragment,null,a.a.createElement(Ce,{className:"acc-info__button"}),a.a.createElement(ue,{className:"acc-info__button"}))}}])&&de(n.prototype,r),g&&de(n,g),t}();Qe.propTypes={balance:r.any,can_upgrade:r.any,can_upgrade_to:r.any,currency:r.any,is_acc_switcher_on:r.any,is_logged_in:r.any,is_virtual:r.any,loginid:r.any,onClickUpgrade:r.any,toggleAccountsDialog:r.any};var Ge=n(179),Ze=n(29),he=[{id:"dt_deriv_logo",logo:a.a.createElement("div",{className:"header__logo"},Object(W.localize)("BETA")),image:a.a.createElement(Ge.default,{className:"header__icon"}),link_to:Ze.e.trade},{id:"dt_reports_tab",icon:a.a.createElement(_.a,{icon:"IconReports",className:"header__icon"}),text:Object(W.localize)("Reports"),link_to:Ze.e.reports,login_only:!0}],Fe=function(e){var t=e.balance,r=e.can_upgrade,g=e.can_upgrade_to,c=e.currency,i=e.enableApp,o=e.is_acc_switcher_on,I=e.is_app_disabled,l=e.is_logged_in,s=e.is_mobile,C=e.is_route_modal_on,u=e.is_virtual,A=e.loginid,b=e.onClickUpgrade,d=e.disableApp,B=e.toggleAccountsDialog;return a.a.createElement("header",{className:m()("header",{"header--is-disabled":I||C})},a.a.createElement("div",{className:"header__menu-items"},a.a.createElement("div",{className:"header__menu-left"},a.a.createElement(M.a,{has_progress:!1,ctor:function(){return n.e("toggle-menu-drawer").then(n.bind(null,646))},should_load:s}),a.a.createElement(ae,{is_logged_in:l,items:he})),a.a.createElement("div",{className:"header__menu-right"},a.a.createElement("div",{className:"acc-info__container"},a.a.createElement(Qe,{balance:t,can_upgrade_to:g,currency:c,can_upgrade:r,disableApp:d,enableApp:i,is_acc_switcher_on:o,is_logged_in:l,is_virtual:u,loginid:A,onClickUpgrade:b,toggleAccountsDialog:B})))))};Fe.propTypes={balance:g.a.string,can_upgrade:g.a.bool,can_upgrade_to:g.a.string,currency:g.a.string,disableApp:g.a.func,enableApp:g.a.func,is_acc_switcher_on:g.a.bool,is_app_disabled:g.a.bool,is_dark_mode:g.a.bool,is_logged_in:g.a.bool,is_mobile:g.a.bool,is_route_modal_on:g.a.bool,is_virtual:g.a.bool,loginid:g.a.string,onClickUpgrade:g.a.func,toggleAccountsDialog:g.a.func};var Xe=Object(l.b)(function(e){var t=e.client,n=e.ui;return{balance:t.balance,can_upgrade:t.can_upgrade,can_upgrade_to:t.can_upgrade_to,currency:t.currency,is_logged_in:t.is_logged_in,is_virtual:t.is_virtual,loginid:t.loginid,enableApp:n.enableApp,is_acc_switcher_on:n.is_accounts_switcher_on,is_dark_mode:n.is_dark_mode_on,is_app_disabled:n.is_app_disabled,is_loading:n.is_loading,is_route_modal_on:n.is_route_modal_on,is_mobile:n.is_mobile,disableApp:n.disableApp,toggleAccountsDialog:n.toggleAccountsDialog}})(Fe);function Ve(){return(Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var fe=function(e){return e.has_error?a.a.createElement(M.a,Ve({ctor:function(){return Promise.resolve().then(n.bind(null,244))},should_load:e.has_error,has_progress:!0},e.error)):a.a.createElement(ce.b,{is_logged_in:e.is_logged_in})};fe.propTypes={error:h.PropTypes.objectOrObservableObject,has_error:g.a.bool,is_logged_in:g.a.bool};var ve,We,Ue,Ne=Object(y.g)(Object(l.b)(function(e){var t=e.client,n=e.common;return{is_logged_in:t.is_logged_in,error:n.error,has_error:n.has_error}})(fe)),_e=n(2),He=n(26),xe=n.n(He),Re=n(255),Ye=n.n(Re),Oe=n(9),Te=(We=Object(_e.action)(function(e,t){ve&&ve.setNetworkStatus(e,t)}),{init:function(e){Ye.a.init(Oe.a.init(e),We),ve=e.common}}),Se=function(){var e=Object(_e.action)("showError",function(){Ue&&Ue.showError({message:Object(W.localize)("Your web browser is out of date and may affect your trading experience. Please {{opening_tag}}update your browser{{closing_tag}}.",{opening_tag:'<a href="http://outdatedbrowser.com" rel="noopener noreferrer" target="_blank" class="link">',closing_tag:"</a>",interpolation:{escapeValue:!1}}),has_html:!0})});return{init:function(t){Ue=t.common;var n="//browser-update.org/update.min.js";if(!document.querySelector('script[src*="'.concat(n,'"]'))&&(window.$buoop={vs:{i:11,f:-4,o:-4,s:9,c:-4},api:4,url:"https://whatbrowser.org/",noclose:!0,reminder:0,onshow:e,nomessage:!0,insecure:!0},document.body)){var r=document.createElement("script");r.setAttribute("src",n),document.body.appendChild(r)}}}}(),Je=n(16),Ee=n.n(Je),De=n(10),we=n.n(De),ke=n(100),ze=n(7),je=n(21),Le=n(140),Pe=n(19);function Ke(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Me={currency:{header:Object(W.localize)("Set Currency"),message:a.a.createElement(Pe.a,{i18n_default_text:"Please set the <0>currency</0> of your account to enable trading.",components:[a.a.createElement("a",{key:0,className:"link link--white",target:"_blank",href:Object(le.urlFor)("user/set-currency",void 0,void 0,!0)})]}),type:"danger"},self_exclusion:function(e){return{header:Object(W.localize)("Self-exclusion Detected"),message:a.a.createElement(Pe.a,{i18n_default_text:"You have opted to be excluded from Binary.com until {{exclusion_end}}. Please <0>contact us</0> for assistance.",values:{exclusion_end:Object(F.h)(e,"DD/MM/YYYY"),interpolation:{escapeValue:!1}},components:[a.a.createElement("a",{key:0,className:"link link--white",target:"_blank",href:Object(le.urlFor)("contact",void 0,void 0,!0)})]}),type:"danger"}},authenticate:{header:Object(W.localize)("Account Authentication"),message:a.a.createElement(Pe.a,{i18n_default_text:"<0>Authenticate your account</0> now to take full advantage of all payment methods available.",components:[a.a.createElement("a",{key:0,className:"link link--white",target:"_blank",href:Object(le.urlFor)("user/authenticate",void 0,void 0,!0)})]}),type:"info"},cashier_locked:{header:Object(W.localize)("Cashier Disabled"),message:Object(W.localize)("Deposits and withdrawals have been disabled on your account. Please check your email for more details."),type:"warning"},withdrawal_locked:{header:Object(W.localize)("Withdrawal Disabled"),message:Object(W.localize)("Withdrawals have been disabled on your account. Please check your email for more details."),type:"warning"},mt5_withdrawal_locked:{header:Object(W.localize)("MT5 Withdrawal Disabled"),message:Object(W.localize)("MT5 withdrawals have been disabled on your account. Please check your email for more details."),type:"warning"},document_needs_action:{header:Object(W.localize)("Authentication Failed"),message:a.a.createElement(Pe.a,{i18n_default_text:"<0>Your Proof of Identity or Proof of Address</0> did not meet our requirements. Please check your email for further instructions.",components:[a.a.createElement("a",{key:0,className:"link link--white",target:"_blank",href:Object(le.urlFor)("user/authenticate",void 0,void 0,!0)})]}),type:"warning"},unwelcome:{header:Object(W.localize)("Trading and Deposits Disabled"),message:a.a.createElement(Pe.a,{i18n_default_text:"Trading and deposits have been disabled on your account. Kindly contact <0>customer support</0> for assistance.",components:[a.a.createElement("a",{key:0,className:"link link--white",target:"_blank",href:Object(le.urlFor)("contact",void 0,void 0,!0)})]}),type:"danger"},mf_retail:{header:Object(W.localize)("Binary Options Trading Disabled"),message:a.a.createElement(Pe.a,{i18n_default_text:"Binary Options Trading has been disabled on your account. Kindly contact <0>customer support</0> for assistance.",components:[a.a.createElement("a",{key:0,className:"link link--white",target:"_blank",href:Object(le.urlFor)("contact",void 0,void 0,!0)})]}),type:"danger"},financial_limit:{header:Object(W.localize)("Remove Deposit Limits"),message:a.a.createElement(Pe.a,{i18n_default_text:"Please set your <0>30-day turnover limit</0> to remove deposit limits.",components:[a.a.createElement("a",{key:0,className:"link link--white",target:"_blank",href:Object(le.urlFor)("user/security/self_exclusionws",void 0,void 0,!0)})]}),type:"warning"},risk:{header:Object(W.localize)("Withdrawal and Trading Limits"),message:a.a.createElement(Pe.a,{i18n_default_text:"Please complete the <0>Financial Assessment form</0> to lift your withdrawal and trading limits.",components:[a.a.createElement("a",{key:0,className:"link link--white",target:"_blank",href:Object(le.urlFor)("user/settings/assessmentws",void 0,void 0,!0)})]}),type:"info"},tax:{header:Object(W.localize)("Complete your personal details"),message:a.a.createElement(Pe.a,{i18n_default_text:"Please complete your <0>Personal Details</0> before you proceed.",components:[a.a.createElement("a",{key:0,className:"link link--white",target:"_blank",href:Object(le.urlFor)("user/settings/detailsws",void 0,void 0,!0)})]}),type:"danger"},tnc:{header:Object(W.localize)("Terms & Conditions Updated"),message:a.a.createElement(Pe.a,{i18n_default_text:"Please <0>accept the updated Terms and Conditions</0> to enable deposit and trading.",components:[a.a.createElement("a",{key:0,className:"link link--white",target:"_blank",href:Object(le.urlFor)("user/tnc_approvalws",void 0,void 0,!0)})]}),type:"danger"},required_fields:{header:Object(W.localize)("Complete your personal details"),message:a.a.createElement(Pe.a,{i18n_default_text:"Please complete your <0>Personal Details</0> before you proceed.",components:[a.a.createElement("a",{key:0,className:"link link--white",target:"_blank",href:Object(le.urlFor)("user/settings/detailsws",void 0,void 0,!0)})]}),type:"danger"}},qe=function(e,t,n,r,g){var c=e.currency,a=e.excluded_until;c||r(Me.currency),a&&r(Me.self_exclusion(a)),function(e,t,n,r){if(e&&r===je.LocalStore.get("active_loginid")){var g=e.prompt_client_to_authenticate,c=e.status,a=c.reduce(function(e,t){return e[t]=!0,e},{}),i=a.document_under_review,o=a.cashier_locked,I=a.withdrawal_locked,l=a.mt5_withdrawal_locked,s=a.document_needs_action,C=a.unwelcome,u=a.ukrts_max_turnover_limit_not_set,A=a.professional,b="maltainvest"===t.landing_company_shortcode&&!A;o&&n(Me.cashier_locked),I&&n(Me.withdrawal_locked),l&&n(Me.mt5_withdrawal_locked),s&&n(Me.document_needs_action),C&&n(Me.unwelcome),b&&n(Me.mf_retail),u&&n(Me.financial_limit),Object(He.getRiskAssessment)(e)&&n(Me.risk),Object(He.shouldCompleteTax)(e)&&n(Me.tax),!+g||i||s||n(Me.authenticate)}}(n,e,r,g),g===je.LocalStore.get("active_loginid")&&(Object(He.shouldAcceptTnc)(t)&&r(Me.tnc),function(e,t){if(!e)return!1;var n,r,g,c=t.landing_company_shortcode;return"svg"===c||"costarica"===c?(r=je.State.getResponse("landing_company.financial_company.requirements.withdrawal"),g=je.State.getResponse("landing_company.financial_company.requirements.signup").map(function(e){return"residence"===e?"country":e}),n=[].concat(Ke(r),Ke(g))):n=function(){if(!Object(He.isAccountOfType)("financial"))return[];var e=t.residence,n=["account_opening_reason","address_line_1","address_city","phone","tax_identification_number","tax_residence"];return"gb"!==e&&"iom"!==c||n.push("address_postcode"),[].concat(n)}(),n.some(function(t){return!e[t]})}(t,e)&&r(Me.required_fields))},$e=n(180);function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var tt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t){this.has(e)||(this.errors[e]=[]),-1===this.errors[e].indexOf(t)&&this.errors[e].push(t)}},{key:"all",value:function(){return this.errors}},{key:"first",value:function(e){return this.has(e)?this.errors[e][0]:null}},{key:"get",value:function(e){return this.has(e)?this.errors[e]:[]}},{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.errors,e)}}])&&et(t.prototype,n),r&&et(t,r),e}();function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var rt,gt,ct,at,it,ot,It,lt,st,Ct,ut=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.input=t,this.rules=n,this.store=r,this.errors=new tt,this.error_count=0}var t,n,r;return t=e,r=[{key:"getRuleObject",value:function(e){var t="string"==typeof e,n={name:t?e:e[0],options:t?{}:e[1]||{}};return n.validator="custom"===n.name?e[1].func:Object($e.a)()[n.name].func,n}}],(n=[{key:"addFailure",value:function(e,t){var n=t.options.message||Object($e.a)()[t.name].message;"length"===t.name?n=Object(ze.template)(n,[t.options.min===t.options.max?t.options.min:"".concat(t.options.min,"-").concat(t.options.max)]):"min"===t.name?n=Object(ze.template)(n,[t.options.min]):"not_equal"===t.name&&(n=Object(ze.template)(n,[t.options.name1,t.options.name2])),this.errors.add(e,n),this.error_count++}},{key:"check",value:function(){var t=this;return Object.keys(this.input).forEach(function(n){Object.prototype.hasOwnProperty.call(t.rules,n)&&t.rules[n].forEach(function(r){var g=e.getRuleObject(r);(g.validator||"function"==typeof g.validator)&&(g.options.condition&&!g.options.condition(t.store)||""===t.input[n]&&"req"!==g.name||g.validator(t.input[n],g.options,t.store,t.input)||t.addFailure(n,g))})}),!this.error_count}},{key:"isPassed",value:function(){return this.check()}}])&&nt(t.prototype,n),r&&nt(t,r),e}(),At=n(70);function bt(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bt(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}function pt(e){return function(){var t=this,n=arguments;return new Promise(function(r,g){var c=e.apply(t,n);function a(e){Bt(c,r,g,a,i,"next",e)}function i(e){Bt(c,r,g,a,i,"throw",e)}a(void 0)})}}function mt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qt(e,t,n,r,g){var c={};return Object.keys(r).forEach(function(e){c[e]=r[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},c),g&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(g):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null),c}var Gt=(rt=_e.action.bound,gt=_e.action.bound,ct=_e.action.bound,at=_e.action.bound,Ct=st=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),mt(this,"validation_errors",ot,this),mt(this,"validation_rules",It,this),this.switchAccountDisposer=null,this.switch_account_listener=null,mt(this,"partial_fetch_time",lt,this),this.waitFor=pt(regeneratorRuntime.mark(function e(){var t=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.a.wait.apply(we.a,t);case 2:case"end":return e.stop()}},e)}));var n=t.root_store,r=t.local_storage_properties,g=t.session_storage_properties,c=t.validation_rules,a=t.store_name;if(Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0}),r&&r.length||g&&g.length){if(!a)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:a,enumerable:!1,writable:!1})}this.root_store=n,this.local_storage_properties=r||[],this.session_storage_properties=g||[],this.setValidationRules(c),this.setupReactionForLocalStorage(),this.setupReactionForSessionStorage(),this.retrieveFromStorage()}var t,n,r;return t=e,(n=[{key:"getSnapshot",value:function(e){var t=Object(_e.toJS)(this);return Object(ze.isEmptyObject)(this.root_store)||(t.root_store=this.root_store),e&&e.length&&(t=e.reduce(function(e,n){return Object.assign(e,dt({},n,t[n]))},{})),t}},{key:"setupReactionForLocalStorage",value:function(){var t=this;this.local_storage_properties.length&&Object(_e.reaction)(function(){return t.local_storage_properties.map(function(e){return t[e]})},function(){return t.saveToStorage(t.local_storage_properties,e.STORAGES.LOCAL_STORAGE)})}},{key:"setupReactionForSessionStorage",value:function(){var t=this;this.session_storage_properties.length&&Object(_e.reaction)(function(){return t.session_storage_properties.map(function(e){return t[e]})},function(){return t.saveToStorage(t.session_storage_properties,e.STORAGES.SESSION_STORAGE)})}},{key:"saveToStorage",value:function(t,n){var r=JSON.stringify(this.getSnapshot(t),function(e,t){if(null!==t)return t});n===e.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,r):n===e.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,r)}},{key:"retrieveFromStorage",value:function(){var e=this,t=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};bt(n,!0).forEach(function(t){dt(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):bt(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({},JSON.parse(localStorage.getItem(this.store_name,{})),{},JSON.parse(sessionStorage.getItem(this.store_name,{})));Object.keys(t).forEach(function(n){return e[n]=t[n]})}},{key:"setValidationErrorMessages",value:function(e,t){var n=this;this.validation_errors[e]&&!n.validation_errors[e].filter(function(e){return!t.includes(e)}).concat(t.filter(function(t){return!n.validation_errors[e].includes(t)})).length||(this.validation_errors[e]=t)}},{key:"setValidationRules",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach(function(n){e.addRule(n,t[n])})}},{key:"addRule",value:function(e,t){var n=this;this.validation_rules[e]=t,Object(_e.intercept)(this,e,function(t){return n.validateProperty(e,t.newValue),t})}},{key:"validateProperty",value:function(e,t){var n=this,r=this.validation_rules[e].trigger,g=dt({},e,void 0!==t?t:this[e]),c=dt({},e,this.validation_rules[e].rules||[]);r&&Object.hasOwnProperty.call(this,r)&&(g[r]=this[r],c[r]=this.validation_rules[r].rules||[]);var a=new ut(g,c,this);a.isPassed(),Object.keys(g).forEach(function(e){n.setValidationErrorMessages(e,a.errors.get(e))})}},{key:"validateAllProperties",value:function(){var e=this,t=Object.keys(this.validation_rules),n=Object.keys(this.validation_errors);t.forEach(function(t){e.validateProperty(t,e[t])}),n.forEach(function(n){t.includes(n)||delete e.validation_errors[n]})}},{key:"onSwitchAccount",value:function(e){var t=this;this.switchAccountDisposer=Object(_e.when)(function(){return t.root_store.client.switch_broadcast},pt(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=t.switch_account_listener())||!n.then||"function"!=typeof n.then){e.next=6;break}n.then(function(){t.root_store.client.switchEndSignal(),t.onSwitchAccount(t.switch_account_listener)}),e.next=7;break;case 6:throw new Error("Switching account listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Object(At.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}))),this.switch_account_listener=e}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"onUnmount",value:function(){this.disposeSwitchAccount()}},{key:"assertHasValidCache",value:function(e){if(this.root_store.client.loginid!==e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(e){return e()}),this.partial_fetch_time=!1}}}])&&yt(t.prototype,n),r&&yt(t,r),e}(),st.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")}),ot=Qt((it=Ct).prototype,"validation_errors",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),It=Qt(it.prototype,"validation_rules",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),lt=Qt(it.prototype,"partial_fetch_time",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Qt(it.prototype,"retrieveFromStorage",[_e.action],Object.getOwnPropertyDescriptor(it.prototype,"retrieveFromStorage"),it.prototype),Qt(it.prototype,"setValidationErrorMessages",[_e.action],Object.getOwnPropertyDescriptor(it.prototype,"setValidationErrorMessages"),it.prototype),Qt(it.prototype,"setValidationRules",[_e.action],Object.getOwnPropertyDescriptor(it.prototype,"setValidationRules"),it.prototype),Qt(it.prototype,"addRule",[_e.action],Object.getOwnPropertyDescriptor(it.prototype,"addRule"),it.prototype),Qt(it.prototype,"validateProperty",[_e.action],Object.getOwnPropertyDescriptor(it.prototype,"validateProperty"),it.prototype),Qt(it.prototype,"validateAllProperties",[_e.action],Object.getOwnPropertyDescriptor(it.prototype,"validateAllProperties"),it.prototype),Qt(it.prototype,"onSwitchAccount",[rt],Object.getOwnPropertyDescriptor(it.prototype,"onSwitchAccount"),it.prototype),Qt(it.prototype,"disposeSwitchAccount",[gt],Object.getOwnPropertyDescriptor(it.prototype,"disposeSwitchAccount"),it.prototype),Qt(it.prototype,"onUnmount",[ct],Object.getOwnPropertyDescriptor(it.prototype,"onUnmount"),it.prototype),Qt(it.prototype,"assertHasValidCache",[at],Object.getOwnPropertyDescriptor(it.prototype,"assertHasValidCache"),it.prototype),it);function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ht,Ft,Xt,Vt,ft,vt,Wt,Ut,Nt,_t,Ht,xt,Rt,Yt,Ot,Tt,St,Jt,Et,Dt,wt,kt,zt,jt,Lt,Pt,Kt,Mt,qt,$t,en,tn,nn,rn,gn,cn,an,on,In,ln,sn,Cn,un;function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bn(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}function dn(e){return function(){var t=this,n=arguments;return new Promise(function(r,g){var c=e.apply(t,n);function a(e){bn(c,r,g,a,i,"next",e)}function i(e){bn(c,r,g,a,i,"throw",e)}a(void 0)})}}function Bn(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mn(e){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qn(e,t){return(Qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gn(e,t,n,r,g){var c={};return Object.keys(r).forEach(function(e){c[e]=r[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},c),g&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(g):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null),c}var Zn,hn,Fn,Xn,Vn,fn,vn,Wn,Un,Nn,_n,Hn,xn,Rn,Yn,On,Tn,Sn=(ht=_e.action.bound,Ft=_e.action.bound,Xt=_e.action.bound,Vt=_e.action.bound,ft=_e.action.bound,vt=_e.action.bound,Wt=_e.action.bound,Ut=_e.action.bound,Nt=_e.action.bound,_t=_e.action.bound,Ht=_e.action.bound,xt=_e.action.bound,Rt=_e.action.bound,Yt=_e.action.bound,Ot=_e.action.bound,Tt=_e.action.bound,St=_e.action.bound,Jt=_e.action.bound,Et=_e.action.bound,Dt=_e.action.bound,wt=_e.action.bound,kt=_e.action.bound,zt=_e.action.bound,jt=_e.action.bound,Lt=_e.action.bound,Pt=_e.action.bound,Kt=_e.action.bound,qt=Gn((Mt=function(e){function t(e){var n,r,g;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,Bn(n=!(g=mn(t).call(this,{root_store:e}))||"object"!==An(g)&&"function"!=typeof g?yn(r):g,"loginid",qt,yn(n)),Bn(n,"upgrade_info",$t,yn(n)),Bn(n,"email",en,yn(n)),Bn(n,"accounts",tn,yn(n)),Bn(n,"switched",nn,yn(n)),Bn(n,"switch_broadcast",rn,yn(n)),Bn(n,"currencies_list",gn,yn(n)),Bn(n,"residence_list",cn,yn(n)),Bn(n,"selected_currency",an,yn(n)),Bn(n,"is_populating_account_list",on,yn(n)),Bn(n,"website_status",In,yn(n)),Bn(n,"verification_code",ln,yn(n)),Bn(n,"account_settings",sn,yn(n)),Bn(n,"account_status",Cn,yn(n)),Bn(n,"device_data",un,yn(n)),n}var n,r,g,c,a,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qn(e,t)}(t,Gt),n=t,(r=[{key:"resetLocalStorageValues",value:function(e){this.accounts[e].accepted_bch=0,je.LocalStore.setObject("client.accounts",this.accounts),je.LocalStore.set("active_loginid",e),this.loginid=e}},{key:"getBasicUpgradeInfo",value:function(){var e,t,n=this,r=je.State.getResponse("authorize.upgradeable_landing_companies"),g=!1;if((r||[]).length){g=-1!==r.indexOf(this.accounts[this.loginid].landing_company_shortcode);(t=function(){for(var e=arguments.length,t=new Array(e),g=0;g<e;g++)t[g]=arguments[g];return t.find(function(e){return e!==n.accounts[n.loginid].landing_company_shortcode&&-1!==r.indexOf(e)})}("svg","iom","malta","maltainvest"))&&(e="maltainvest"===t?"financial":"real")}return{type:e,can_upgrade:!!t,can_upgrade_to:t,can_open_multi:g}}},{key:"responsePayoutCurrencies",value:function(e){var t,n,r,g=e.payout_currencies||e;this.currencies_list=(n=[],r=[],g.forEach(function(e){var t=Object(Ie.isCryptocurrency)(e);(t?r:n).push({text:e,value:e,has_tooltip:t})}),Zt(t={},Object(W.localize)("Fiat"),n),Zt(t,Object(W.localize)("Crypto"),r),t),this.selectCurrency("")}},{key:"responseAuthorize",value:function(e){this.accounts[this.loginid].email=e.authorize.email,this.accounts[this.loginid].currency=e.authorize.currency,this.accounts[this.loginid].is_virtual=+e.authorize.is_virtual,this.accounts[this.loginid].session_start=parseInt(Ee()().utc().valueOf()/1e3),this.accounts[this.loginid].landing_company_shortcode=e.authorize.landing_company_name,this.updateAccountList(e.authorize.account_list),this.upgrade_info=this.getBasicUpgradeInfo(),this.user_id=e.authorize.user_id,xe.a.responseAuthorize(e)}},{key:"setWebsiteStatus",value:function(e){this.website_status=e.website_status,Object(Ie.setCurrencies)(this.website_status)}},{key:"updateAccountList",value:function(e){var t=this;e.forEach(function(e){t.accounts[e.loginid]&&(t.accounts[e.loginid].excluded_until=e.excluded_until||"",Object.keys(e).forEach(function(n){var r="country"===n?"residence":n,g=void 0===e[n]?"":e[n];"loginid"!==r&&(t.accounts[e.loginid][r]=g)}))})}},{key:"switchAccount",value:(o=dn(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.root_store.ui.removeAllNotifications(),this.setSwitched(t),e.t0=this,e.next=5,Oe.b.payoutCurrencies();case 5:e.t1=e.sent,e.t0.responsePayoutCurrencies.call(e.t0,e.t1);case 7:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"switchEndSignal",value:function(){this.switch_broadcast=!1}},{key:"init",value:(i=dn(regeneratorRuntime.mark(function e(t){var n,r,g=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setUserLogin(t);case 2:if(n=e.sent,this.setLoginId(je.LocalStore.get("active_loginid")),this.setAccounts(je.LocalStore.getObject("client.accounts")),this.setSwitched(""),r=this.accounts[this.loginid],!n){e.next=14;break}if(this.loginid!==n.authorize.loginid){e.next=12;break}Le.a.authorizeAccount(n),e.next=14;break;case 12:return e.next=14,we.a.send({authorize:r.token},{forced:!0});case 14:return r&&!r.is_virtual?we.a.wait("landing_company","website_status","get_settings","get_account_status").then(function(){qe(r,g.account_settings,g.account_status,g.root_store.ui.addNotification,g.loginid)}):r&&!r.is_virtual||this.root_store.ui.removeAllNotifications(),this.selectCurrency(""),e.t0=this,e.next=19,Oe.b.payoutCurrencies();case 19:e.t1=e.sent,e.t0.responsePayoutCurrencies.call(e.t0,e.t1),this.registerReactions();case 22:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"setLoginId",value:function(e){this.loginid=e}},{key:"setAccounts",value:function(e){this.accounts=e}},{key:"setSwitched",value:function(e){this.switched=e}},{key:"isDisabled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid;return this.getAccount(e).is_disabled}},{key:"getToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid;return this.getAccount(e).token}},{key:"getAccount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid;return this.accounts[e]}},{key:"getAccountInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid,t=this.getAccount(e),n=t.currency,r=t.is_virtual,g=!r&&n?n:xe.a.getAccountTitle(e);return{loginid:e,is_virtual:r,icon:g.toLowerCase(),title:"virtual"===g.toLowerCase()?Object(W.localize)("DEMO"):g}}},{key:"broadcastAccountChange",value:function(){this.switch_broadcast=!0}},{key:"switchAccountHandler",value:(a=dn(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.switched&&this.switched.length&&this.getAccount(this.switched).token){e.next=12;break}if(this.all_loginids.some(function(e){return e!==t.switched})&&this.switched!==this.loginid){e.next=6;break}return this.root_store.ui.addNotification({message:Object(W.localize)("Could not switch to default account."),type:"danger"}),Object(Oe.c)(),this.root_store.modules.trade.clearContract(),e.abrupt("return");case 6:return this.root_store.modules.portfolio.clearTable(),this.root_store.ui.addNotification({message:Object(W.localize)("Switching to default account."),type:"info"}),this.switchAccount(this.all_loginids[0]),e.next=11,this.switchAccountHandler();case 11:return e.abrupt("return");case 12:return sessionStorage.setItem("active_tab","1"),this.root_store.gtm.setLoginFlag(),this.resetLocalStorageValues(this.switched),ke.clear(),e.next=18,we.a.send({authorize:this.getToken()},{forced:!0});case 18:return e.next=20,this.init();case 20:this.broadcastAccountChange();case 21:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"registerReactions",value:function(){var e=this;Object(_e.when)(function(){return e.switched},this.switchAccountHandler)}},{key:"setBalance",value:function(e){this.accounts[this.loginid].balance=e}},{key:"selectCurrency",value:function(e){this.selected_currency=e}},{key:"setResidence",value:function(e){this.accounts[this.loginid].residence=e}},{key:"setEmail",value:function(e){this.accounts[this.loginid].email=e,this.email=e}},{key:"setAccountSettings",value:function(e){this.account_settings=e}},{key:"setAccountStatus",value:function(e){this.account_status=e}},{key:"cleanUp",value:function(){var e=this;this.root_store.gtm.pushDataLayer({event:"log_out"}),this.loginid=null,this.upgrade_info=void 0,this.accounts={},Object(_e.runInAction)(dn(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,Oe.b.payoutCurrencies({forced:!0});case 3:t.t1=t.sent,t.t0.responsePayoutCurrencies.call(t.t0,t.t1);case 5:case"end":return t.stop()}},t)}))),this.root_store.modules.smart_chart.should_refresh_active_symbols=!0,this.root_store.modules.trade.resetErrorServices(),this.root_store.ui.removeAllNotifications(),this.root_store.modules.trade.refresh(),this.root_store.modules.trade.debouncedProposal()}},{key:"storeClientAccounts",value:function(e,t){var n,r={country:"residence",landing_company_name:"landing_company_shortcode"},g={},c=!0;t.forEach(function(e){/^virtual|svg$/.test(e.landing_company_name)||(c=!1)}),t.forEach(function(e){Object.keys(e).forEach(function(t){if("loginid"===t)n||e.is_disabled||(c&&!e.is_virtual?n=e[t]:e.is_virtual&&(n=e[t]));else{var a=r[t]||t,i=void 0===e[t]?"":e[t];e.loginid in g||(g[e.loginid]={}),g[e.loginid][a]=i}})});for(var a=1;e["acct".concat(a)];){var i=e["acct".concat(a)],o=e["token".concat(a)];i&&o&&(g[i].token=o),a++}n&&g[n].token||(n=e.acct1),n&&Object.keys(g).length&&(localStorage.setItem("active_loginid",n),localStorage.setItem("client.accounts",JSON.stringify(g)))}},{key:"setUserLogin",value:(c=dn(regeneratorRuntime.mark(function e(t){var n,r,g=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},window.location.search&&window.location.search.substr(1).split("&").forEach(function(e){if(e){var t=e.split("=");t&&(n[t[0]]=t[1])}}),!(t?t.token1:n.token1)){e.next=14;break}return window.history.replaceState({},document.title,"/"),this.is_populating_account_list=!0,e.next=9,we.a.send({authorize:t?t.token1:n.token1});case 9:return r=e.sent,this.is_populating_account_list=!1,t&&(n=t),Object(_e.runInAction)(function(){var e=(r.authorize||{}).account_list;e&&Object(ze.isEmptyObject)(g.accounts)&&g.storeClientAccounts(n,e)}),e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"setVerificationCode",value:function(e){this.verification_code=e,e?je.LocalStore.set("verification_code",e):je.LocalStore.remove("verification_code"),this.fetchResidenceList()}},{key:"setDeviceData",value:function(e){this.device_data=e}},{key:"onSignup",value:function(e,t){var n=this,r=e.password,g=e.residence;this.verification_code&&r&&g&&Oe.b.newAccountVirtual(this.verification_code,r,g,this.device_data).then(function(){var e=dn(regeneratorRuntime.mark(function e(r){var g,c,a,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.error){e.next=4;break}t(r.error.message),e.next=10;break;case 4:return t(),g=r.new_account_virtual,c=g.client_id,a=g.currency,i=g.oauth_token,o={acct1:c,token1:i,curr1:a},e.next=9,n.init(o);case 9:n.root_store.modules.trade.initAccountCurrency(a);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}},{key:"fetchResidenceList",value:function(){var e=this;Oe.b.residenceList().then(function(t){Object(_e.runInAction)(function(){e.residence_list=t.residence_list||[]})})}},{key:"balance",get:function(){return Object(ze.isEmptyObject)(this.accounts)?"":this.accounts[this.loginid]&&this.accounts[this.loginid].balance?this.accounts[this.loginid].balance.toString():""}},{key:"is_client_allowed_to_visit",get:function(){return!(this.is_logged_in&&!this.is_virtual&&"svg"!==this.accounts[this.loginid].landing_company_shortcode)}},{key:"account_list",get:function(){var e=this;return this.all_loginids.map(function(t){return!e.isDisabled(t)&&e.getToken(t)?e.getAccountInfo(t):void 0}).filter(function(e){return e})}},{key:"active_accounts",get:function(){return this.accounts instanceof Object?Object.values(this.accounts).filter(function(e){return!e.is_disabled}):[]}},{key:"all_loginids",get:function(){return Object(ze.isEmptyObject)(this.accounts)?[]:Object.keys(this.accounts)}},{key:"account_title",get:function(){return xe.a.getAccountTitle(this.loginid)}},{key:"currency",get:function(){return this.selected_currency.length?this.selected_currency:this.is_logged_in?this.accounts[this.loginid].currency:this.default_currency}},{key:"default_currency",get:function(){if(Object.keys(this.currencies_list).length>0){var e=Object.keys(this.currencies_list);return this.currencies_list.Fiat.length<1?"USD":Object.values(this.currencies_list["".concat(e[0])])[0].text}return"USD"}},{key:"is_valid_login",get:function(){if(!this.is_logged_in)return!0;var e=new RegExp("^(MX|MF|VRTC|MLT|CR|FOG)[0-9]+$","i");return this.all_loginids.every(function(t){return e.test(t)})}},{key:"is_logged_in",get:function(){return!!(!Object(ze.isEmptyObject)(this.accounts)&&Object.keys(this.accounts).length>0&&this.loginid&&this.accounts[this.loginid].token)}},{key:"is_virtual",get:function(){return!Object(ze.isEmptyObject)(this.accounts)&&this.accounts[this.loginid]&&!!this.accounts[this.loginid].is_virtual}},{key:"can_upgrade",get:function(){return this.upgrade_info&&(this.upgrade_info.can_upgrade||this.upgrade_info.can_open_multi)}},{key:"can_upgrade_to",get:function(){return this.upgrade_info&&this.upgrade_info.can_upgrade_to}},{key:"virtual_account_loginid",get:function(){var e=this;return this.all_loginids.find(function(t){return!!e.accounts[t].is_virtual})}},{key:"is_single_currency",get:function(){var e=this;return 1===Object.keys(this.currencies_list).map(function(t){return Object.values(e.currencies_list[t]).length}).reduce(function(e,t){return e+t},0)}},{key:"account_type",get:function(){return e=this.loginid,/^VR/.test(e)?t="virtual":/^MF/.test(e)?t="financial":/^MLT|MX/.test(e)&&(t="gaming"),t;var e,t}},{key:"is_website_status_ready",get:function(){return this.website_status&&"up"===this.website_status.site_status}}])&&pn(n.prototype,r),g&&pn(n,g),t}()).prototype,"loginid",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t=Gn(Mt.prototype,"upgrade_info",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),en=Gn(Mt.prototype,"email",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tn=Gn(Mt.prototype,"accounts",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),nn=Gn(Mt.prototype,"switched",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),rn=Gn(Mt.prototype,"switch_broadcast",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gn=Gn(Mt.prototype,"currencies_list",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),cn=Gn(Mt.prototype,"residence_list",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),an=Gn(Mt.prototype,"selected_currency",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),on=Gn(Mt.prototype,"is_populating_account_list",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),In=Gn(Mt.prototype,"website_status",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ln=Gn(Mt.prototype,"verification_code",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),sn=Gn(Mt.prototype,"account_settings",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Cn=Gn(Mt.prototype,"account_status",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),un=Gn(Mt.prototype,"device_data",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Gn(Mt.prototype,"balance",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"balance"),Mt.prototype),Gn(Mt.prototype,"is_client_allowed_to_visit",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"is_client_allowed_to_visit"),Mt.prototype),Gn(Mt.prototype,"account_list",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"account_list"),Mt.prototype),Gn(Mt.prototype,"active_accounts",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"active_accounts"),Mt.prototype),Gn(Mt.prototype,"all_loginids",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"all_loginids"),Mt.prototype),Gn(Mt.prototype,"account_title",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"account_title"),Mt.prototype),Gn(Mt.prototype,"currency",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"currency"),Mt.prototype),Gn(Mt.prototype,"default_currency",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"default_currency"),Mt.prototype),Gn(Mt.prototype,"is_valid_login",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"is_valid_login"),Mt.prototype),Gn(Mt.prototype,"is_logged_in",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"is_logged_in"),Mt.prototype),Gn(Mt.prototype,"is_virtual",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"is_virtual"),Mt.prototype),Gn(Mt.prototype,"can_upgrade",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"can_upgrade"),Mt.prototype),Gn(Mt.prototype,"can_upgrade_to",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"can_upgrade_to"),Mt.prototype),Gn(Mt.prototype,"virtual_account_loginid",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"virtual_account_loginid"),Mt.prototype),Gn(Mt.prototype,"is_single_currency",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"is_single_currency"),Mt.prototype),Gn(Mt.prototype,"account_type",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"account_type"),Mt.prototype),Gn(Mt.prototype,"resetLocalStorageValues",[ht],Object.getOwnPropertyDescriptor(Mt.prototype,"resetLocalStorageValues"),Mt.prototype),Gn(Mt.prototype,"getBasicUpgradeInfo",[Ft],Object.getOwnPropertyDescriptor(Mt.prototype,"getBasicUpgradeInfo"),Mt.prototype),Gn(Mt.prototype,"responsePayoutCurrencies",[Xt],Object.getOwnPropertyDescriptor(Mt.prototype,"responsePayoutCurrencies"),Mt.prototype),Gn(Mt.prototype,"responseAuthorize",[Vt],Object.getOwnPropertyDescriptor(Mt.prototype,"responseAuthorize"),Mt.prototype),Gn(Mt.prototype,"setWebsiteStatus",[ft],Object.getOwnPropertyDescriptor(Mt.prototype,"setWebsiteStatus"),Mt.prototype),Gn(Mt.prototype,"is_website_status_ready",[_e.computed],Object.getOwnPropertyDescriptor(Mt.prototype,"is_website_status_ready"),Mt.prototype),Gn(Mt.prototype,"updateAccountList",[vt],Object.getOwnPropertyDescriptor(Mt.prototype,"updateAccountList"),Mt.prototype),Gn(Mt.prototype,"switchAccount",[Wt],Object.getOwnPropertyDescriptor(Mt.prototype,"switchAccount"),Mt.prototype),Gn(Mt.prototype,"switchEndSignal",[Ut],Object.getOwnPropertyDescriptor(Mt.prototype,"switchEndSignal"),Mt.prototype),Gn(Mt.prototype,"init",[Nt],Object.getOwnPropertyDescriptor(Mt.prototype,"init"),Mt.prototype),Gn(Mt.prototype,"setLoginId",[_t],Object.getOwnPropertyDescriptor(Mt.prototype,"setLoginId"),Mt.prototype),Gn(Mt.prototype,"setAccounts",[Ht],Object.getOwnPropertyDescriptor(Mt.prototype,"setAccounts"),Mt.prototype),Gn(Mt.prototype,"setSwitched",[xt],Object.getOwnPropertyDescriptor(Mt.prototype,"setSwitched"),Mt.prototype),Gn(Mt.prototype,"broadcastAccountChange",[Rt],Object.getOwnPropertyDescriptor(Mt.prototype,"broadcastAccountChange"),Mt.prototype),Gn(Mt.prototype,"switchAccountHandler",[Yt],Object.getOwnPropertyDescriptor(Mt.prototype,"switchAccountHandler"),Mt.prototype),Gn(Mt.prototype,"registerReactions",[Ot],Object.getOwnPropertyDescriptor(Mt.prototype,"registerReactions"),Mt.prototype),Gn(Mt.prototype,"setBalance",[Tt],Object.getOwnPropertyDescriptor(Mt.prototype,"setBalance"),Mt.prototype),Gn(Mt.prototype,"selectCurrency",[St],Object.getOwnPropertyDescriptor(Mt.prototype,"selectCurrency"),Mt.prototype),Gn(Mt.prototype,"setResidence",[Jt],Object.getOwnPropertyDescriptor(Mt.prototype,"setResidence"),Mt.prototype),Gn(Mt.prototype,"setEmail",[Et],Object.getOwnPropertyDescriptor(Mt.prototype,"setEmail"),Mt.prototype),Gn(Mt.prototype,"setAccountSettings",[Dt],Object.getOwnPropertyDescriptor(Mt.prototype,"setAccountSettings"),Mt.prototype),Gn(Mt.prototype,"setAccountStatus",[wt],Object.getOwnPropertyDescriptor(Mt.prototype,"setAccountStatus"),Mt.prototype),Gn(Mt.prototype,"cleanUp",[kt],Object.getOwnPropertyDescriptor(Mt.prototype,"cleanUp"),Mt.prototype),Gn(Mt.prototype,"storeClientAccounts",[zt],Object.getOwnPropertyDescriptor(Mt.prototype,"storeClientAccounts"),Mt.prototype),Gn(Mt.prototype,"setUserLogin",[jt],Object.getOwnPropertyDescriptor(Mt.prototype,"setUserLogin"),Mt.prototype),Gn(Mt.prototype,"setVerificationCode",[Lt],Object.getOwnPropertyDescriptor(Mt.prototype,"setVerificationCode"),Mt.prototype),Gn(Mt.prototype,"setDeviceData",[Pt],Object.getOwnPropertyDescriptor(Mt.prototype,"setDeviceData"),Mt.prototype),Gn(Mt.prototype,"onSignup",[Kt],Object.getOwnPropertyDescriptor(Mt.prototype,"onSignup"),Mt.prototype),Mt),Jn=n(246);function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dn(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kn(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jn(e){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pn(e,t){return(Pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kn(e,t,n,r,g){var c={};return Object.keys(r).forEach(function(e){c[e]=r[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},c),g&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(g):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null),c}var Mn,qn,$n,er,tr,nr,rr,gr=(Zn=_e.action.bound,hn=_e.action.bound,Fn=_e.action.bound,Xn=_e.action.bound,Vn=_e.action.bound,fn=_e.action.bound,Wn=Kn((vn=function(e){function t(){var e,n,r,g;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return r=this,kn(n=!(g=(e=jn(t)).call.apply(e,[this].concat(a)))||"object"!==En(g)&&"function"!=typeof g?Ln(r):g,"server_time",Wn,Ln(n)),kn(n,"current_language",Un,Ln(n)),kn(n,"has_error",Nn,Ln(n)),kn(n,"error",_n,Ln(n)),kn(n,"network_status",Hn,Ln(n)),kn(n,"is_network_online",xn,Ln(n)),kn(n,"is_socket_opened",Rn,Ln(n)),kn(n,"services_error",Yn,Ln(n)),kn(n,"deposit_url",On,Ln(n)),kn(n,"withdraw_url",Tn,Ln(n)),n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pn(e,t)}(t,Gt),n=t,(r=[{key:"setIsSocketOpened",value:function(e){this.is_socket_opened=e}},{key:"setNetworkStatus",value:function(e,t){this.network_status.class?(this.network_status.class=e.class,this.network_status.tooltip=e.tooltip):this.network_status=e,this.is_network_online=t}},{key:"setError",value:function(e,t){this.has_error=e,this.error=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};Dn(n,!0).forEach(function(t){wn(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):Dn(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({type:t?t.type:"info"},t&&{header:t.header,message:t.message,redirect_label:t.redirect_label,redirectOnClick:t.redirectOnClick,should_show_refresh:t.should_show_refresh})}},{key:"showError",value:function(e,t,n,r,g){this.setError(!0,{header:t,message:e,redirect_label:n,redirectOnClick:r,should_show_refresh:g,type:"error"})}},{key:"setDepositURL",value:function(e){this.deposit_url=e}},{key:"setWithdrawURL",value:function(e){this.withdraw_url=e}}])&&zn(n.prototype,r),g&&zn(n,g),t}()).prototype,"server_time",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ee.a.utc()}}),Un=Kn(vn.prototype,"current_language",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Jn.a}}),Nn=Kn(vn.prototype,"has_error",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_n=Kn(vn.prototype,"error",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{type:"info",message:""}}}),Hn=Kn(vn.prototype,"network_status",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),xn=Kn(vn.prototype,"is_network_online",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rn=Kn(vn.prototype,"is_socket_opened",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Yn=Kn(vn.prototype,"services_error",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),On=Kn(vn.prototype,"deposit_url",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Tn=Kn(vn.prototype,"withdraw_url",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Kn(vn.prototype,"setIsSocketOpened",[Zn],Object.getOwnPropertyDescriptor(vn.prototype,"setIsSocketOpened"),vn.prototype),Kn(vn.prototype,"setNetworkStatus",[hn],Object.getOwnPropertyDescriptor(vn.prototype,"setNetworkStatus"),vn.prototype),Kn(vn.prototype,"setError",[Fn],Object.getOwnPropertyDescriptor(vn.prototype,"setError"),vn.prototype),Kn(vn.prototype,"showError",[Xn],Object.getOwnPropertyDescriptor(vn.prototype,"showError"),vn.prototype),Kn(vn.prototype,"setDepositURL",[Vn],Object.getOwnPropertyDescriptor(vn.prototype,"setDepositURL"),vn.prototype),Kn(vn.prototype,"setWithdrawURL",[fn],Object.getOwnPropertyDescriptor(vn.prototype,"setWithdrawURL"),vn.prototype),vn),cr=n(136),ar=n(41);function ir(e){return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function or(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function Ir(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};or(n,!0).forEach(function(t){lr(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):or(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}function lr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sr(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}function Cr(e){return function(){var t=this,n=arguments;return new Promise(function(r,g){var c=e.apply(t,n);function a(e){sr(c,r,g,a,i,"next",e)}function i(e){sr(c,r,g,a,i,"throw",e)}a(void 0)})}}function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ar(e,t){return!t||"object"!==ir(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function br(e){return(br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dr(e,t){return(dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Br(e,t,n,r,g){var c={};return Object.keys(r).forEach(function(e){c[e]=r[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},c),g&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(g):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null),c}var pr,mr,yr,Qr,Gr,Zr,hr,Fr,Xr,Vr,fr,vr,Wr,Ur,Nr,_r,Hr,xr,Rr,Yr,Or,Tr,Sr,Jr,Er,Dr=(Mn=_e.action.bound,qn=_e.action.bound,$n=_e.action.bound,er=_e.action.bound,tr=_e.action.bound,nr=_e.action.bound,Br((rr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ar(this,br(t).call(this,{root_store:e}))).is_gtm_applicable=/^(16303|16929)$/.test(Object(At.getAppId)()),n.onSwitchAccount(n.accountSwitcherListener),n}var n,r,g,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dr(e,t)}(t,Gt),n=t,(r=[{key:"accountSwitcherListener",value:function(){var e=this;return new Promise(function(){var t=Cr(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n(e.pushDataLayer({event:"account switch"})));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"pushDataLayer",value:(c=Cr(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.is_gtm_applicable&&!Object(se.isLoginPages)()&&we.a.wait("authorize").then(function(){dataLayer.push(Ir({},n.common_variables,{},t))});case 1:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"pushPurchaseData",value:function(e){var t={event:"buy_contract",bom_ui:"new",contract:{amount:e.amount,barrier1:e.barrier,barrier2:e.barrier2,basis:e.basis,buy_price:e.buy_price,contract_type:e.contract_type,currency:e.currency,date_expiry:e.date_expiry,date_start:e.date_start,duration:e.duration,duration_unit:e.duration_unit,payout:e.payout,symbol:e.symbol},settings:{theme:this.root_store.ui.is_dark_mode_on?"dark":"light",positions_drawer:this.root_store.ui.is_positions_drawer_on?"open":"closed",chart:{toolbar_position:this.root_store.ui.is_chart_layout_default?"bottom":"left",chart_asset_info:this.root_store.ui.is_chart_asset_info_visible?"visible":"hidden",chart_type:this.root_store.modules.smart_chart.chart_type,granularity:this.root_store.modules.smart_chart.granularity}}};this.pushDataLayer(t)}},{key:"pushTransactionData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.is_gtm_applicable&&!this.root_store.client.is_virtual&&e.transaction&&e.transaction.action&&["deposit","withdrawal"].includes(e.transaction.action)){var n=Object(F.w)(),r="GTM_transactions",g=JSON.parse(localStorage.getItem(r))||{};Object.prototype.hasOwnProperty.call(g,"timestamp")&&n.isAfter(Object(F.g)(g.timestamp),"day")&&(localStorage.removeItem(r),g={timestamp:n.unix()});var c=g.transactions||[];if(!c.includes(e.transaction.transaction_id)){var a={event:"transaction",bom_account_type:this.root_store.client.account_type,bom_today:n.unix(),transaction:{id:e.transaction.transaction_id,type:e.transaction.action,time:e.transaction.transaction_time,amount:e.transaction.amount}};Object.assign(a,t),this.pushDataLayer(a),c.push(e.transaction.transaction_id),g.transactions=c,g.timestamp=g.timestamp||n.unix(),localStorage.setItem(r,JSON.stringify(g))}}}},{key:"eventHandler",value:function(e){var t=this;if(this.is_gtm_applicable){var n=localStorage.getItem("GTM_login"),r="1"===localStorage.getItem("GTM_new_account");localStorage.removeItem("GTM_login"),localStorage.removeItem("GTM_new_account");var g=cr.getJSON("affiliate_tracking");g&&this.pushDataLayer({affiliate_token:g.t});var c=Object(F.w)(),a={visitorId:this.visitorId,account_type:this.root_store.client.account_type,currency:this.root_store.client.currency,country:e.country,country_abbrev:e.country_code,email:e.email,url:window.location.href,today:c.unix()};r&&(a.event="new_account",a.bom_date_joined=a.bom_today),n?(a.event=n,we.a.wait("mt5_login_list").then(function(e){(e.mt5_login_list||[]).forEach(function(e){var t,n=(t=e.group,(t?t.replace("\\","_").replace(/_(\d+|master|EUR|GBP)/,""):"")||"").replace("real_vanuatu","financial").replace("vanuatu_","").replace(/svg/,"gaming");n&&(a["mt5_".concat(n,"_id")]=e.login)}),t.pushDataLayer(a)})):this.pushDataLayer(a)}}},{key:"setLoginFlag",value:function(e){this.is_gtm_applicable&&localStorage.setItem("GTM_login",e)}},{key:"visitorId",get:function(){return this.root_store.client.loginid}},{key:"common_variables",get:function(){return Ir({language:Object(ar.get)()},this.root_store.client.is_logged_in&&{visitorId:this.visitorId,currency:this.root_store.client.currency,userId:this.root_store.client.user_id},{},this.root_store.ui.is_dark_mode_on&&{theme:this.root_store.ui.is_dark_mode_on?"dark":"light"})}}])&&ur(n.prototype,r),g&&ur(n,g),t}()).prototype,"visitorId",[_e.computed],Object.getOwnPropertyDescriptor(rr.prototype,"visitorId"),rr.prototype),Br(rr.prototype,"common_variables",[_e.computed],Object.getOwnPropertyDescriptor(rr.prototype,"common_variables"),rr.prototype),Br(rr.prototype,"accountSwitcherListener",[Mn],Object.getOwnPropertyDescriptor(rr.prototype,"accountSwitcherListener"),rr.prototype),Br(rr.prototype,"pushDataLayer",[qn],Object.getOwnPropertyDescriptor(rr.prototype,"pushDataLayer"),rr.prototype),Br(rr.prototype,"pushPurchaseData",[$n],Object.getOwnPropertyDescriptor(rr.prototype,"pushPurchaseData"),rr.prototype),Br(rr.prototype,"pushTransactionData",[er],Object.getOwnPropertyDescriptor(rr.prototype,"pushTransactionData"),rr.prototype),Br(rr.prototype,"eventHandler",[tr],Object.getOwnPropertyDescriptor(rr.prototype,"eventHandler"),rr.prototype),Br(rr.prototype,"setLoginFlag",[nr],Object.getOwnPropertyDescriptor(rr.prototype,"setLoginFlag"),rr.prototype),rr);function wr(e){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kr(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}function zr(e){return function(){var t=this,n=arguments;return new Promise(function(r,g){var c=e.apply(t,n);function a(e){kr(c,r,g,a,i,"next",e)}function i(e){kr(c,r,g,a,i,"throw",e)}a(void 0)})}}function jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lr(e){return(Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kr(e,t){return(Kr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mr(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function qr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $r(e,t,n,r,g){var c={};return Object.keys(r).forEach(function(e){c[e]=r[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},c),g&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(g):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null),c}var eg=(mr=$r((pr=function e(t){var n=t.container;qr(this,e),this.container="",this.is_session_timeout=!0,this.onIframeLoaded="",this.timeout_session="",Mr(this,"error",mr,this),Mr(this,"iframe_height",yr,this),Mr(this,"iframe_url",Qr,this),this.container=n}).prototype,"error",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{message:"",button_text:"",link:""}}}),yr=$r(pr.prototype,"iframe_height",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Qr=$r(pr.prototype,"iframe_url",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),pr),tg=(Gr=_e.action.bound,Zr=_e.action.bound,hr=_e.action.bound,Fr=_e.action.bound,Xr=_e.action.bound,Vr=_e.action.bound,fr=_e.action.bound,vr=_e.action.bound,Wr=_e.action.bound,Ur=_e.action.bound,Nr=_e.action.bound,_r=_e.action.bound,Hr=_e.action.bound,xr=_e.action.bound,Rr=_e.action.bound,Yr=_e.action.bound,Or=_e.action.bound,Tr=_e.action.bound,Jr=$r((Sr=function(e){function t(e){var n,r,g,c=e.root_store;return qr(this,t),r=this,g=Lr(t).call(this,{root_store:c}),Mr(n=!g||"object"!==wr(g)&&"function"!=typeof g?Pr(r):g,"is_loading",Jr,Pr(n)),Mr(n,"config",Er,Pr(n)),n.containers=[n.config.deposit.container,n.config.withdraw.container],n.error_fields={address_city:Object(W.localize)("Town/City"),address_line_1:Object(W.localize)("First line of home address"),address_postcode:Object(W.localize)("Postal Code/ZIP"),address_state:Object(W.localize)("State/Province"),email:Object(W.localize)("Email address"),phone:Object(W.localize)("Telephone"),residence:Object(W.localize)("Country of Residence")},n.getError=function(e){if(!e||Object(ze.isEmptyObject)(e))return null;var t,r,g;switch(e.code){case"ASK_EMAIL_VERIFY":case"InvalidToken":t=[Object(W.localize)("Verification code is wrong."),Object(W.localize)("Please use the link sent to your email.")],r=Object(W.localize)("Okay");break;case"ASK_TNC_APPROVAL":t=Object(W.localize)("Please accept the updated Terms and Conditions."),g="user/tnc_approvalws";break;case"ASK_FIX_DETAILS":t=[Object(W.localize)("There was a problem validating your personal details."),e.details.fields?Object(W.localize)("Please update your {{details}}.",{details:e.details.fields.map(function(e){return n.error_fields[e]||e}).join(", ")}):Object(W.localize)("Please update your details.")];break;case"ASK_AUTHENTICATE":t=Object(W.localize)("Please [_1]authenticate[_2] your account."),g="user/authenticate";break;case"ASK_FINANCIAL_RISK_APPROVAL":t=[Object(W.localize)("Financial Risk approval is required."),Object(W.localize)("Please contact customer support for more information.")],g="contact";break;case"ASK_AGE_VERIFICATION":t=[Object(W.localize)("Account needs age verification."),Object(W.localize)("Please contact customer support for more information.")],g="contact";break;case"ASK_SELF_EXCLUSION_MAX_TURNOVER_SET":t=Object(W.localize)("Please set your 30-day turnover limit to access the cashier."),g="user/security/self_exclusionws";break;default:t=e.message}return{error_message:t,error_link:g,error_button_text:r}},n.onSwitchAccount(n.accountSwitcherListener),n}var n,r,g,c,a,i,o,I;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kr(e,t)}(t,Gt),n=t,(r=[{key:"onMount",value:(I=zr(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==this.containers.indexOf(t)){e.next=2;break}throw new Error("Cashier Store onMount requires a valid container name.");case 2:if(this.setErrorMessage("",t),this.setContainerHeight(0,t),this.setLoading(!0),this.config[t].is_session_timeout){e.next=8;break}return this.checkIframeLoaded(t),e.abrupt("return");case 8:if(this.setIframeUrl("",t),t!==this.config.withdraw.container||n){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,Oe.b.cashier(t,n);case 13:if(!(r=e.sent).error){e.next=22;break}this.setLoading(!1),this.setErrorMessage(r.error,t),this.setSessionTimeout(!0,t),this.clearTimeoutCashierUrl(t),n&&this.clearVerification(),e.next=33;break;case 22:if(!Object(Ie.isCryptocurrency)(this.root_store.client.currency)){e.next=28;break}this.setLoading(!1),this.setContainerHeight("700",t),this.setIframeUrl(r.cashier,t),e.next=33;break;case 28:return e.next=30,this.checkIframeLoaded(t);case 30:this.setIframeUrl(r.cashier,t),this.setSessionTimeout(!1,t),this.setTimeoutCashierUrl(t);case 33:case"end":return e.stop()}},e,this)})),function(e,t){return I.apply(this,arguments)})},{key:"onMountDeposit",value:(o=zr(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onMount(this.config.deposit.container);case 2:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"checkIframeLoaded",value:(i=zr(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.removeOnIframeLoaded(t),this.config[t].onIframeLoaded=function(e){/cashier|doughflow/.test(e.origin)&&(this.setLoading(!1),this.setContainerHeight(+e.data||"1200",t))}.bind(this),window.addEventListener("message",this.config[t].onIframeLoaded,!1);case 3:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"removeOnIframeLoaded",value:function(e){this.config[e].onIframeLoaded&&(window.removeEventListener("message",this.config[e].onIframeLoaded,!1),this.config[e].onIframeLoaded="")}},{key:"setIframeUrl",value:function(e,t){this.config[t].iframe_url=e,e&&this.root_store.client.setVerificationCode("")}},{key:"setContainerHeight",value:function(e,t){this.config[t].iframe_height=e}},{key:"setErrorMessage",value:function(e,t){var n=this.getError(e)||{};this.config[t].error={message:n.error_message,button_text:n.error_button_text,link:n.error_link}}},{key:"setLoading",value:function(e){this.is_loading=e}},{key:"setSessionTimeout",value:function(e,t){this.config[t].is_session_timeout=e,e&&this.removeOnIframeLoaded(t)}},{key:"setVerificationButtonClicked",value:function(e){this.config.verification.is_button_clicked=e}},{key:"setVerificationEmailSent",value:function(e){this.config.verification.is_email_sent=e}},{key:"setVerificationResendClicked",value:function(e){this.config.verification.is_resend_clicked=e}},{key:"setVerificationResendTimeout",value:function(e){this.config.verification.resend_timeout=e}},{key:"clearTimeoutCashierUrl",value:function(e){this.config[e].timeout_session&&clearTimeout(this.config[e].timeout_session)}},{key:"setTimeoutCashierUrl",value:function(e){var t=this;this.clearTimeoutCashierUrl(e),this.config[e].timeout_session=setTimeout(function(){t.setSessionTimeout(!0,e)},6e4)}},{key:"clearTimeoutVerification",value:function(){this.config.verification.timeout_button&&clearTimeout(this.config.verification.timeout_button)}},{key:"setTimeoutVerification",value:function(){var e=this;this.clearTimeoutVerification(),this.config.verification.timeout_button=setTimeout(function(){e.clearVerification()},36e5)}},{key:"onMountWithdraw",value:(a=zr(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onMount(this.config.withdraw.container,t);case 2:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"sendVerificationEmail",value:(c=zr(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.config.verification.is_button_clicked){e.next=2;break}return e.abrupt("return");case 2:return this.setErrorMessage("",this.config.withdraw.container),this.setVerificationButtonClicked(!0),e.next=6,Oe.b.verifyEmail(this.root_store.client.email,"payment_withdraw");case 6:(t=e.sent).error?(this.clearVerification(),this.setErrorMessage(t.error,this.config.withdraw.container)):(this.setVerificationEmailSent(!0),this.setTimeoutVerification());case 8:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"resendVerificationEmail",value:function(){this.config.verification.resend_timeout<60||(this.setVerificationButtonClicked(!1),this.setCountDownResendVerification(),this.sendVerificationEmail())}},{key:"setCountDownResendVerification",value:function(){var e=this;this.setVerificationResendTimeout(this.config.verification.resend_timeout-1);var t=setInterval(function(){1===e.config.verification.resend_timeout?(e.setVerificationResendTimeout(60),clearInterval(t)):e.setVerificationResendTimeout(e.config.verification.resend_timeout-1)},1e3)}},{key:"clearVerification",value:function(){this.clearTimeoutVerification(),this.setVerificationButtonClicked(!1),this.setVerificationEmailSent(!1),this.setVerificationResendClicked(!1),this.setVerificationResendTimeout(60),this.root_store.client.setVerificationCode("")}},{key:"setActiveTab",value:function(e){this.root_store.ui.setCashierActiveTab(e)}},{key:"onUnmount",value:function(){var e=this;this.clearVerification(),[this.config.deposit.container,this.config.withdraw.container].forEach(function(t){e.setIframeUrl("",t),e.clearTimeoutCashierUrl(t),e.setSessionTimeout(!0,t)})}},{key:"accountSwitcherListener",value:function(){var e=this;return new Promise(function(){var t=zr(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n(e.onUnmount()));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}}])&&jr(n.prototype,r),g&&jr(n,g),t}()).prototype,"is_loading",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Er=$r(Sr.prototype,"config",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{deposit:new eg({container:"deposit"}),verification:{is_button_clicked:!1,is_email_sent:!1,is_resend_clicked:!1,resend_timeout:60,timeout_button:""},withdraw:new eg({container:"withdraw"})}}}),$r(Sr.prototype,"onMount",[Gr],Object.getOwnPropertyDescriptor(Sr.prototype,"onMount"),Sr.prototype),$r(Sr.prototype,"onMountDeposit",[Zr],Object.getOwnPropertyDescriptor(Sr.prototype,"onMountDeposit"),Sr.prototype),$r(Sr.prototype,"checkIframeLoaded",[hr],Object.getOwnPropertyDescriptor(Sr.prototype,"checkIframeLoaded"),Sr.prototype),$r(Sr.prototype,"setIframeUrl",[Fr],Object.getOwnPropertyDescriptor(Sr.prototype,"setIframeUrl"),Sr.prototype),$r(Sr.prototype,"setContainerHeight",[Xr],Object.getOwnPropertyDescriptor(Sr.prototype,"setContainerHeight"),Sr.prototype),$r(Sr.prototype,"setErrorMessage",[Vr],Object.getOwnPropertyDescriptor(Sr.prototype,"setErrorMessage"),Sr.prototype),$r(Sr.prototype,"setLoading",[fr],Object.getOwnPropertyDescriptor(Sr.prototype,"setLoading"),Sr.prototype),$r(Sr.prototype,"setSessionTimeout",[vr],Object.getOwnPropertyDescriptor(Sr.prototype,"setSessionTimeout"),Sr.prototype),$r(Sr.prototype,"setVerificationButtonClicked",[Wr],Object.getOwnPropertyDescriptor(Sr.prototype,"setVerificationButtonClicked"),Sr.prototype),$r(Sr.prototype,"setVerificationEmailSent",[Ur],Object.getOwnPropertyDescriptor(Sr.prototype,"setVerificationEmailSent"),Sr.prototype),$r(Sr.prototype,"setVerificationResendClicked",[Nr],Object.getOwnPropertyDescriptor(Sr.prototype,"setVerificationResendClicked"),Sr.prototype),$r(Sr.prototype,"setVerificationResendTimeout",[_r],Object.getOwnPropertyDescriptor(Sr.prototype,"setVerificationResendTimeout"),Sr.prototype),$r(Sr.prototype,"setTimeoutCashierUrl",[Hr],Object.getOwnPropertyDescriptor(Sr.prototype,"setTimeoutCashierUrl"),Sr.prototype),$r(Sr.prototype,"setTimeoutVerification",[xr],Object.getOwnPropertyDescriptor(Sr.prototype,"setTimeoutVerification"),Sr.prototype),$r(Sr.prototype,"onMountWithdraw",[Rr],Object.getOwnPropertyDescriptor(Sr.prototype,"onMountWithdraw"),Sr.prototype),$r(Sr.prototype,"sendVerificationEmail",[Yr],Object.getOwnPropertyDescriptor(Sr.prototype,"sendVerificationEmail"),Sr.prototype),$r(Sr.prototype,"resendVerificationEmail",[Or],Object.getOwnPropertyDescriptor(Sr.prototype,"resendVerificationEmail"),Sr.prototype),$r(Sr.prototype,"setActiveTab",[Tr],Object.getOwnPropertyDescriptor(Sr.prototype,"setActiveTab"),Sr.prototype),Sr),ng={CALL:"ABOVE",PUT:"BELOW",CALLE:"ABOVE",PUTE:"BELOW",EXPIRYRANGE:"BETWEEN",EXPIRYMISS:"OUTSIDE",RANGE:"BETWEEN",UPORDOWN:"OUTSIDE",ONETOUCH:"NONE_SINGLE",NOTOUCH:"NONE_SINGLE",ASIANU:"ABOVE",ASIAND:"BELOW"},rg={1:"NONE_SINGLE",2:"NONE_DOUBLE"},gg="#999cac",cg="#555975",ag={DASHED:"dashed",DOTTED:"dotted",SOLID:"solid"},ig=function(e,t,n){if(e.removeBarriers(),t){var r=t.contract_type,g=t.barrier,c=t.high_barrier,a=t.low_barrier;(g||c)&&(e.createBarriers(r,g||c,a,null,{color:n?cg:gg,line_style:ag.SOLID,not_draggable:!0}),e.updateBarrierShade(!0,r))}},og=n(94),Ig=n.n(og),lg=n(63),sg=n(20),Cg=function(e){var t=e.label,n=e.line_style,r=e.marker_config,g=e.status;return r?a.a.createElement("div",{className:m()("chart-marker-line__wrapper","chart-marker-line--".concat(n))},t===r.LINE_END.content_config.label&&a.a.createElement(_.a,{icon:"IconEndTime",className:m()("chart-marker-line__icon",{"chart-marker-line__icon--won":"won"===g,"chart-marker-line__icon--lost":"lost"===g})}),t===r.LINE_START.content_config.label&&a.a.createElement(_.a,{icon:"IconStartTime",className:m()("chart-marker-line__icon","chart-marker-line__icon--time")})):a.a.createElement("div",null)};Cg.propTypes={label:g.a.string,line_style:g.a.string,marker_config:g.a.object,status:g.a.oneOf(["won","lost"])};var ug=Object(h.observer)(Cg),Ag=function(e){var t=e.className,n=e.spot_count;return a.a.createElement("div",{className:m()("chart-spot",t)},n)};Ag.propTypes={className:g.a.string,spot_count:g.a.oneOfType([g.a.number,g.a.string])};var bg=Object(h.observer)(Ag);function dg(e){return(dg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pg(e,t){return!t||"object"!==dg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mg(e){return(mg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yg(e,t){return(yg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qg=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=pg(this,mg(t).call(this,e))).handleHoverToggle=function(){n.setState(function(e){return{show_label:!e.show_label}})},n.state={show_label:!n.props.has_hover_toggle},n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yg(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=a.a.createElement(bg,{className:this.props.spot_className,spot_count:this.props.spot_count});return this.props.has_hover_toggle&&(e=a.a.createElement("div",{className:"marker-hover-container",onMouseEnter:this.handleHoverToggle,onMouseLeave:this.handleHoverToggle},e)),a.a.createElement("div",{className:"chart-spot-label"},this.state.show_label&&a.a.createElement("div",{className:"chart-spot-label__info-container"},a.a.createElement("div",{className:"chart-spot-label__time-value-container chart-spot-label__time-value-container--".concat(this.props.align_label)},a.a.createElement("div",{className:"chart-spot-label__time-container"},a.a.createElement(_.a,{icon:"IconClock",height:"10",width:"10",className:"chart-spot-label__time-icon"}),a.a.createElement("p",{className:"chart-spot-label__time"},Object(F.w)(+this.props.spot_epoch).format("HH:mm:ss"))),a.a.createElement("div",{className:m()("chart-spot-label__value-container",{"chart-spot-label__value-container--won":"won"===this.props.status,"chart-spot-label__value-container--lost":"lost"===this.props.status})},a.a.createElement("p",null,Object(Ie.addComma)(this.props.spot_value))))),e)}}])&&Bg(n.prototype,r),g&&Bg(n,g),t}();Qg.defaultProps={align_label:"top"},Qg.propTypes={align_label:g.a.oneOf(["top","bottom"]),has_hover_toggle:g.a.bool,spot_className:g.a.string,spot_count:g.a.oneOfType([g.a.number,g.a.string]),spot_epoch:g.a.oneOfType([g.a.number,g.a.string]),spot_value:g.a.oneOfType([g.a.number,g.a.string]),status:g.a.oneOf(["won","lost"])};var Gg,Zg,hg=Object(h.observer)(Qg),Fg={LINE_END:{type:"LINE_END",marker_config:{ContentComponent:ug,className:"chart-marker-line"},content_config:{line_style:"dash",label:Object(W.localize)("End Time")}},LINE_PURCHASE:{type:"LINE_PURCHASE",marker_config:{ContentComponent:ug,className:"chart-marker-line"},content_config:{line_style:"solid",label:Object(W.localize)("Purchase Time")}},LINE_START:{type:"LINE_START",marker_config:{ContentComponent:ug,className:"chart-marker-line"},content_config:{line_style:"solid",label:Object(W.localize)("Start Time")}},SPOT_ENTRY:{type:"SPOT_ENTRY",marker_config:{ContentComponent:bg},content_config:{className:"chart-spot__entry"}},SPOT_SELL:{type:"SPOT_SELL",marker_config:{ContentComponent:bg},content_config:{className:"chart-spot__sell"}},SPOT_EXIT:{type:"SPOT_EXIT",marker_config:{ContentComponent:hg},content_config:{spot_className:"chart-spot__spot"}},SPOT_MIDDLE:{type:"SPOT_MIDDLE",marker_config:{ContentComponent:hg},content_config:{spot_className:"chart-spot__spot"}}},Xg=function(e,t,n,r){return Ig()(!0,{},Fg[e],{marker_config:{x:+t,y:n},content_config:r})},Vg=function(e,t){return Object(lg.b)(e.contract_type)?t+1:t},fg=function(e){if(!e.entry_tick_time)return!1;var t=Fg.SPOT_ENTRY.type,n={},r=e.entry_tick_display_value;return Object(lg.b)(e.contract_type)&&(t=Fg.SPOT_MIDDLE.type,n={spot_value:"".concat(r),spot_epoch:"".concat(e.entry_tick_time),spot_count:1}),Xg(t,e.entry_tick_time,r,n)},vg=function(e,t,n){if(!e.exit_tick_time)return!1;var r,g,c=Object(sg.i)(e);t&&(r=Vg(e,n),g=t.align_label);var a=e.exit_tick_display_value;return Xg(c?Fg.SPOT_SELL.type:Fg.SPOT_EXIT.type,+e.exit_tick_time,+a,c?{}:{spot_value:"".concat(a),spot_epoch:"".concat(e.exit_tick_time),status:"".concat(+e.profit>0?"won":"lost"),align_label:g,spot_count:r})},Wg=function(e,t,n){var r=Vg(e,n),g=t.tick_display_value,c=Xg(Fg.SPOT_MIDDLE.type,+t.epoch,+g,{spot_value:"".concat(g),spot_epoch:"".concat(t.epoch),align_label:t.align_label,spot_count:r});return c.type="".concat(c.type,"_").concat(n),c};function Ug(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}function Ng(e){return function(){var t=this,n=arguments;return new Promise(function(r,g){var c=e.apply(t,n);function a(e){Ug(c,r,g,a,i,"next",e)}function i(e){Ug(c,r,g,a,i,"throw",e)}a(void 0)})}}function _g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hg,xg,Rg,Yg,Og,Tg,Sg,Jg,Eg,Dg,wg,kg,zg,jg,Lg,Pg,Kg,Mg=function(e,t){if(t){var n=Object(sg.e)(t),r=Object(sg.c)(t.date_start,n);t.tick_count?nc(e,t):"candle"!==r&&ec(qg,e,t),ec($g,e,t)}},qg=(_g(Gg={},Fg.SPOT_ENTRY.type,fg),_g(Gg,Fg.SPOT_EXIT.type,vg),Gg),$g=(_g(Zg={},Fg.LINE_START.type,function(e){return!!e.date_start&&Xg(Fg.LINE_START.type,+e.date_start,null,{marker_config:Fg})}),_g(Zg,Fg.LINE_END.type,function(e){var t=Object(sg.e)(e);return!!t&&Xg(Fg.LINE_END.type,+t,null,{status:"".concat(e.profit>0?"won":"lost"),marker_config:Fg})}),_g(Zg,Fg.LINE_PURCHASE.type,function(e){return!(!e.purchase_time||!e.date_start||+e.purchase_time==+e.date_start)&&Xg(Fg.LINE_PURCHASE.type,+e.purchase_time)}),Zg),ec=function(){var e=Ng(regeneratorRuntime.mark(function e(t,n,r){var g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g=function(e){if(!(e in n.markers)){var g=t[e](r);g&&n.createMarker(g)}},Object.keys(t).forEach(g);case 2:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),tc=function(e,t,n){if(t>0&&n.length){var r=n[t-1];+e>+r.tick&&(e.align_label="top"),+e.tick<+r.tick&&(e.align_label="bottom"),+e.tick==+r.tick&&(e.align_label=r.align_label)}return e},nc=function(){var e=Ng(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(ze.unique)(n.tick_stream,"epoch").map(tc).forEach(function(e,r){var g,c=0===r&&+e.epoch!==n.exit_tick_time,a=r>0&&+e.epoch!=+n.exit_tick_time,i=+e.epoch==+n.exit_tick_time||Vg(n,r)===n.tick_count;if(c?g=fg(n):a?g=Wg(n,e,r):i&&(e.align_label="top",g=vg(n,e,r)),g){if(g.type in t.markers)return;t.createMarker(g)}});case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),rc=n(75),gc=function(e,t){return{header:Object(W.localize)("Contract sold"),message:a.a.createElement(Pe.a,{i18n_default_text:"Contract was sold for <0 />.",components:[a.a.createElement(rc.a,{key:t,amount:t,currency:e})]}),type:"contract_sold",size:"small",should_hide_close_btn:!0,is_auto_close:!0}};function cc(e){return(cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ac(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function ic(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oc(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Ic(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lc(e){return(lc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cc(e,t){return(Cc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uc(e,t,n,r,g){var c={};return Object.keys(r).forEach(function(e){c[e]=r[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},c),g&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(g):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null),c}var Ac,bc,dc,Bc,pc,mc,yc,Qc,Gc,Zc,hc,Fc,Xc,Vc,fc,vc,Wc,Uc=(Hg=_e.action.bound,xg=_e.action.bound,Rg=_e.action.bound,Yg=_e.action.bound,Og=_e.action.bound,Tg=_e.action.bound,Sg=_e.action.bound,Eg=uc((Jg=function(e){function t(){var e,n,r,g;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return r=this,g=(e=lc(t)).call.apply(e,[this].concat(a)),oc(n=!g||"object"!==cc(g)&&"function"!=typeof g?sc(r):g,"digits_info",Eg,sc(n)),oc(n,"sell_info",Dg,sc(n)),oc(n,"has_error",wg,sc(n)),oc(n,"error_message",kg,sc(n)),oc(n,"is_sell_requested",zg,sc(n)),oc(n,"contract_id",jg,sc(n)),oc(n,"indicative_status",Lg,sc(n)),oc(n,"contract_info",Pg,sc(n)),oc(n,"is_static_chart",Kg,sc(n)),n.chart_type="mountain",n.is_ongoing_contract=!1,n.prev_indicative=0,n.indicative=0,n.should_forget_first=!1,n.handleSubscribeProposalOpenContract=function(e,t){var r=[e,t,!1];n.should_forget_first?Oe.b.forgetAll("proposal_open_contract").then(function(){n.should_forget_first=!1,Oe.b.subscribeProposalOpenContract.apply(Oe.b,r)}):Oe.b.subscribeProposalOpenContract.apply(Oe.b,r)},n.forgetProposalOpenContract=function(e,t){Oe.b.forget("proposal_open_contract",t,{contract_id:e})},n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cc(e,t)}(t,Gt),n=t,(r=[{key:"onMount",value:function(e){var t=this;e&&(this.smart_chart=this.root_store.modules.smart_chart,this.smart_chart.setContractMode(!0),this.contract_id=e,we.a.wait("authorize").then(function(){t.handleSubscribeProposalOpenContract(t.contract_id,t.populateConfig)}),Oe.b.activeSymbols({skip_cache_update:!0}))}},{key:"onUnmount",value:function(){this.forgetProposalOpenContract(this.contract_id,this.populateConfig),this.contract_id=null,this.digits_info={},this.is_ongoing_contract=!1,this.is_static_chart=!1,this.is_sell_requested=!1,this.contract_info={},this.indicative_status=null,this.prev_indicative=0,this.indicative=0,this.sell_info={},this.smart_chart.setContractMode(!1),this.smart_chart.cleanupContractChartView()}},{key:"populateConfig",value:function(e){if("error"in e)return this.has_error=!0,void this.smart_chart.setIsChartLoading(!1);if(Object(ze.isEmptyObject)(e.proposal_open_contract))return this.has_error=!0,this.error_message=Object(W.localize)("Sorry, you can't view this contract because it doesn't belong to this account."),this.should_forget_first=!0,this.smart_chart.setContractMode(!1),void this.smart_chart.setIsChartLoading(!1);if(+e.proposal_open_contract.contract_id===this.contract_id){this.contract_info=e.proposal_open_contract;var t=this.prev_indicative,n=+this.contract_info.bid_price;this.indicative=n,this.indicative_status=n>t?"profit":n<t?"loss":null,this.prev_indicative=this.indicative;var r=Object(sg.e)(this.contract_info);this.smart_chart.updateMargin((r||this.contract_info.date_expiry)-this.contract_info.date_start),r||(this.is_ongoing_contract=!0),r&&(this.is_ongoing_contract?this.is_static_chart=!1:this.is_static_chart=!0),ig(this.smart_chart,this.contract_info,this.root_store.ui.is_dark_mode_on),Mg(this.smart_chart,this.contract_info),this.handleDigits(this.contract_info),this.smart_chart.setIsChartLoading(!1)}}},{key:"handleDigits",value:function(e){this.is_digit_contract&&Object(_e.extendObservable)(this.digits_info,Object(lg.a)(this.digits_info,e))}},{key:"onClickSell",value:function(e){var t=this.contract_info.bid_price;e&&t&&(this.is_sell_requested=!0,Oe.b.sell(e,t).then(this.handleSell))}},{key:"handleSell",value:function(e){e.error?(this.is_sell_requested=!1,this.root_store.common.services_error=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};ac(n,!0).forEach(function(t){ic(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):ac(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({type:e.msg_type},e.error),this.root_store.ui.toggleServicesErrorModal(!0)):!e.error&&e.sell&&(this.is_sell_requested=!1,this.sell_info={sell_price:e.sell.sold_for,transaction_id:e.sell.transaction_id},this.root_store.ui.addNotification(gc(this.root_store.client.currency,e.sell.sold_for)))}},{key:"removeErrorMessage",value:function(){this.error_message="",this.has_error=!1}},{key:"contract_config",get:function(){return Object(sg.a)(this.contract_info,this.is_digit_contract,!1)}},{key:"display_status",get:function(){return Object(sg.d)(this.contract_info)}},{key:"is_ended",get:function(){return Object(sg.h)(this.contract_info)}},{key:"is_digit_contract",get:function(){return Object(lg.b)(this.contract_info.contract_type)}}])&&Ic(n.prototype,r),g&&Ic(n,g),t}()).prototype,"digits_info",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.observable.object({})}}),Dg=uc(Jg.prototype,"sell_info",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.observable.object({})}}),wg=uc(Jg.prototype,"has_error",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kg=uc(Jg.prototype,"error_message",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),zg=uc(Jg.prototype,"is_sell_requested",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jg=uc(Jg.prototype,"contract_id",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lg=uc(Jg.prototype,"indicative_status",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pg=uc(Jg.prototype,"contract_info",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.observable.object({})}}),Kg=uc(Jg.prototype,"is_static_chart",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),uc(Jg.prototype,"onMount",[Hg],Object.getOwnPropertyDescriptor(Jg.prototype,"onMount"),Jg.prototype),uc(Jg.prototype,"onUnmount",[xg],Object.getOwnPropertyDescriptor(Jg.prototype,"onUnmount"),Jg.prototype),uc(Jg.prototype,"populateConfig",[Rg],Object.getOwnPropertyDescriptor(Jg.prototype,"populateConfig"),Jg.prototype),uc(Jg.prototype,"handleDigits",[Yg],Object.getOwnPropertyDescriptor(Jg.prototype,"handleDigits"),Jg.prototype),uc(Jg.prototype,"onClickSell",[Og],Object.getOwnPropertyDescriptor(Jg.prototype,"onClickSell"),Jg.prototype),uc(Jg.prototype,"handleSell",[Tg],Object.getOwnPropertyDescriptor(Jg.prototype,"handleSell"),Jg.prototype),uc(Jg.prototype,"removeErrorMessage",[Sg],Object.getOwnPropertyDescriptor(Jg.prototype,"removeErrorMessage"),Jg.prototype),uc(Jg.prototype,"contract_config",[_e.computed],Object.getOwnPropertyDescriptor(Jg.prototype,"contract_config"),Jg.prototype),uc(Jg.prototype,"display_status",[_e.computed],Object.getOwnPropertyDescriptor(Jg.prototype,"display_status"),Jg.prototype),uc(Jg.prototype,"is_ended",[_e.computed],Object.getOwnPropertyDescriptor(Jg.prototype,"is_ended"),Jg.prototype),uc(Jg.prototype,"is_digit_contract",[_e.computed],Object.getOwnPropertyDescriptor(Jg.prototype,"is_digit_contract"),Jg.prototype),Jg);function Nc(e){return(Nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _c(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Hc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xc(e){return(xc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yc(e,t){return(Yc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oc(e,t,n,r,g){var c={};return Object.keys(r).forEach(function(e){c[e]=r[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},c),g&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(g):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null),c}var Tc,Sc,Jc,Ec,Dc,wc,kc,zc,jc,Lc,Pc,Kc,Mc,qc,$c,ea,ta,na,ra,ga=(Ac=_e.action.bound,bc=_e.action.bound,dc=_e.action.bound,Bc=_e.action.bound,pc=_e.action.bound,mc=_e.action.bound,yc=_e.action.bound,Qc=_e.action.bound,Gc=_e.action.bound,Zc=_e.action.bound,hc=_e.action.bound,Xc=Oc((Fc=function(e){function t(){var e,n,r,g;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return r=this,g=(e=xc(t)).call.apply(e,[this].concat(a)),_c(n=!g||"object"!==Nc(g)&&"function"!=typeof g?Rc(r):g,"contract_id",Xc,Rc(n)),_c(n,"contract_info",Vc,Rc(n)),_c(n,"digits_info",fc,Rc(n)),_c(n,"has_error",vc,Rc(n)),_c(n,"error_message",Wc,Rc(n)),n.is_from_positions=!1,n.is_ongoing_contract=!1,n.should_forget_first=!1,n.handleSubscribeProposalOpenContract=function(e,t){var r=[e,t,!1];n.should_forget_first?Oe.b.forgetAll("proposal_open_contract").then(function(){n.should_forget_first=!1,Oe.b.subscribeProposalOpenContract.apply(Oe.b,r)}):Oe.b.subscribeProposalOpenContract.apply(Oe.b,r)},n.forgetProposalOpenContract=function(e,t){Oe.b.forget("proposal_open_contract",t,{contract_id:e})},n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yc(e,t)}(t,Gt),n=t,(r=[{key:"drawChart",value:function(){var e=this.contract_info,t=e.date_expiry,n=e.date_start,r=e.tick_count,g=Object(sg.e)(this.contract_info);if(g||(this.is_ongoing_contract=!0),g){var c=r<2;this.is_ongoing_contract||c?this.smart_chart.setStaticChart(!1):this.smart_chart.setStaticChart(!0),this.smart_chart.setContractStart(n),this.smart_chart.setContractEnd(g),this.is_ongoing_contract||this.smart_chart.setIsChartLoading(!1)}else this.is_from_positions&&this.smart_chart.setContractStart(n);this.smart_chart.updateMargin((g||t)-n),ig(this.smart_chart,this.contract_info,this.root_store.ui.is_dark_mode_on),Mg(this.smart_chart,this.contract_info),this.smart_chart.is_chart_ready&&this.smart_chart.setIsChartLoading(!1)}},{key:"drawContractStartTime",value:function(e,t,n){this.contract_info.longcode=t,Mg(this.root_store.modules.smart_chart,{date_start:e}),this.onMountBuy(n)}},{key:"onMountBuy",value:function(e){var t=this;e!==this.contract_id&&(this.contract_id=e,this.root_store.modules.trade.proposal_info={},this.root_store.modules.trade.purchase_info={},we.a.wait("authorize").then(function(){t.handleSubscribeProposalOpenContract(t.contract_id,t.updateProposal)}))}},{key:"onMount",value:function(e,t){var n=this;if(e!==this.contract_id){this.smart_chart=this.root_store.modules.smart_chart;var r=this.smart_chart.is_contract_mode&&!!this.contract_id;r&&this.resetValues(this.smart_chart),this.has_error=!1,this.error_message="",this.contract_id=e,this.is_from_positions=t,this.root_store.modules.trade.proposal_info={},this.root_store.modules.trade.purchase_info={},e&&(this.is_from_positions&&(this.smart_chart.setIsChartLoading(!0),this.smart_chart.switchToContractMode(!0,r)),we.a.wait("authorize").then(function(){n.handleSubscribeProposalOpenContract(n.contract_id,n.updateProposal)}))}}},{key:"resetValues",value:function(e){this.forgetProposalOpenContract(this.contract_id,this.updateProposal),this.contract_id=null,this.contract_info={},this.digits_info={},this.error_message="",this.has_error=!1,this.is_from_positions=!1,this.is_ongoing_contract=!1,e.cleanupContractChartView()}},{key:"onCloseContract",value:function(){this.smart_chart||(this.smart_chart=this.root_store.modules.smart_chart),this.resetValues(this.smart_chart),this.smart_chart.applySavedTradeChartLayout()}},{key:"onUnmount",value:function(){this.disposeSwitchAccount(),this.onCloseContract()}},{key:"updateProposal",value:function(e){return"error"in e?(this.has_error=!0,this.error_message=e.error.message,this.contract_info={},void this.smart_chart.setIsChartLoading(!1)):Object(ze.isEmptyObject)(e.proposal_open_contract)?(this.has_error=!0,this.error_message=Object(W.localize)("Sorry, you can't view this contract because it doesn't belong to this account."),this.should_forget_first=!0,this.contract_info={},this.contract_id=null,this.smart_chart.setContractMode(!1),void this.smart_chart.setIsChartLoading(!1)):void(+e.proposal_open_contract.contract_id===this.contract_id&&(this.contract_info=e.proposal_open_contract,this.handleChartType(this.contract_info.date_start,Object(sg.e)(this.contract_info)||null),this.is_from_positions&&0!==this.smart_chart.granularity&&this.smart_chart.setChartView(this.contract_info.date_start),this.root_store.modules.trade.symbol!==this.contract_info.underlying&&(this.root_store.modules.trade.symbol=this.contract_info.underlying),this.drawChart(this.contract_info),this.handleDigits(this.contract_info)))}},{key:"handleDigits",value:function(e){this.is_digit_contract&&Object(_e.extendObservable)(this.digits_info,Object(lg.a)(this.digits_info,e))}},{key:"handleChartType",value:function(e,t){this.smart_chart||(this.smart_chart=this.root_store.modules.smart_chart);var n=Object(sg.c)(e,t),r=Object(sg.b)(e,t);this.smart_chart.updateChartType(n),this.smart_chart.updateGranularity(r)}},{key:"clearError",value:function(){this.error_message="",this.has_error=!1}},{key:"setIsDigitContract",value:function(e){this.contract_info.contract_type=e}},{key:"display_status",get:function(){return Object(sg.d)(this.contract_info)}},{key:"is_ended",get:function(){return Object(sg.h)(this.contract_info)}},{key:"is_digit_contract",get:function(){return Object(lg.b)(this.contract_info.contract_type)}}])&&Hc(n.prototype,r),g&&Hc(n,g),t}()).prototype,"contract_id",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vc=Oc(Fc.prototype,"contract_info",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.observable.object({})}}),fc=Oc(Fc.prototype,"digits_info",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.observable.object({})}}),vc=Oc(Fc.prototype,"has_error",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wc=Oc(Fc.prototype,"error_message",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Oc(Fc.prototype,"drawChart",[Ac],Object.getOwnPropertyDescriptor(Fc.prototype,"drawChart"),Fc.prototype),Oc(Fc.prototype,"drawContractStartTime",[bc],Object.getOwnPropertyDescriptor(Fc.prototype,"drawContractStartTime"),Fc.prototype),Oc(Fc.prototype,"onMountBuy",[dc],Object.getOwnPropertyDescriptor(Fc.prototype,"onMountBuy"),Fc.prototype),Oc(Fc.prototype,"onMount",[Bc],Object.getOwnPropertyDescriptor(Fc.prototype,"onMount"),Fc.prototype),Oc(Fc.prototype,"resetValues",[pc],Object.getOwnPropertyDescriptor(Fc.prototype,"resetValues"),Fc.prototype),Oc(Fc.prototype,"onCloseContract",[mc],Object.getOwnPropertyDescriptor(Fc.prototype,"onCloseContract"),Fc.prototype),Oc(Fc.prototype,"onUnmount",[yc],Object.getOwnPropertyDescriptor(Fc.prototype,"onUnmount"),Fc.prototype),Oc(Fc.prototype,"updateProposal",[Qc],Object.getOwnPropertyDescriptor(Fc.prototype,"updateProposal"),Fc.prototype),Oc(Fc.prototype,"handleDigits",[Gc],Object.getOwnPropertyDescriptor(Fc.prototype,"handleDigits"),Fc.prototype),Oc(Fc.prototype,"clearError",[Zc],Object.getOwnPropertyDescriptor(Fc.prototype,"clearError"),Fc.prototype),Oc(Fc.prototype,"setIsDigitContract",[hc],Object.getOwnPropertyDescriptor(Fc.prototype,"setIsDigitContract"),Fc.prototype),Oc(Fc.prototype,"display_status",[_e.computed],Object.getOwnPropertyDescriptor(Fc.prototype,"display_status"),Fc.prototype),Oc(Fc.prototype,"is_ended",[_e.computed],Object.getOwnPropertyDescriptor(Fc.prototype,"is_ended"),Fc.prototype),Oc(Fc.prototype,"is_digit_contract",[_e.computed],Object.getOwnPropertyDescriptor(Fc.prototype,"is_digit_contract"),Fc.prototype),Fc),ca=n(256),aa=Object(_e.flow)(regeneratorRuntime.mark(function e(t){var n,r,g,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.a.wait("website_status");case 2:return n=e.sent,e.next=5,Oe.b.residenceList();case 5:r=e.sent,g=n.website_status.clients_country,c=(r.residence_list.find(function(e){return e.value===g})||{}).text,t(Object(W.localize)("If you have an account, log in to continue."),c?Object(W.localize)("Sorry, this app is unavailable in {{clients_country}}.",{clients_country:c}):Object(W.localize)("Sorry, this app is unavailable in your current location."),Object(W.localize)("Log in"),se.redirectToLogin,!1);case 9:case"end":return e.stop()}},e)})),ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return!!e.length&&(!!e.filter(function(e){return e.symbol===t})[0]&&!e.filter(function(e){return e.symbol===t})[0].exchange_is_open)},oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?Ia(e)||la(e):""},Ia=function(e){var t=je.LocalStore.get("cq-favorites");if(t){var n=JSON.parse(t)["chartTitle&Comparison"].map(function(t){return e.find(function(e){return e.symbol===t})});if(n){var r=n.filter(function(e){return e}).find(sa);if(r)return r.symbol}}},la=function(e){var t=e.filter(function(e){return/major_pairs|random_index/.test(e.submarket)}).find(sa);return t?t.symbol:e.find(function(e){return"major_pairs"===e.submarket}).symbol},sa=function(e){return 1===e.exchange_is_open},Ca=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return(e.find(function(e){return e.symbol.toUpperCase()===t.toUpperCase()})||{display_name:""}).display_name},ua=n(101),Aa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=parseFloat(e.buy_price),r=parseFloat(e.payout),g=Ca(t,Object(ua.a)(e.shortcode).underlying);return{contract_info:e,details:e.longcode.replace(/\n/g,"<br />"),display_name:g,id:e.contract_id,indicative:0,payout:r,purchase:n,reference:+e.transaction_id,type:e.contract_type,is_unsupported:!!Object(Ze.d)()[e.contract_type]}},ba=n(110);function da(e){return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ba(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function pa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ma(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}function ya(e){return function(){var t=this,n=arguments;return new Promise(function(r,g){var c=e.apply(t,n);function a(e){ma(c,r,g,a,i,"next",e)}function i(e){ma(c,r,g,a,i,"throw",e)}a(void 0)})}}function Qa(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Ga(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Za(e){return(Za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ha(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fa(e,t){return(Fa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xa(e,t,n,r,g){var c={};return Object.keys(r).forEach(function(e){c[e]=r[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},c),g&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(g):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null),c}var Va=(Tc=_e.action.bound,Sc=_e.action.bound,Jc=_e.action.bound,Ec=_e.action.bound,Dc=_e.action.bound,wc=_e.action.bound,kc=_e.action.bound,zc=_e.action.bound,jc=_e.action.bound,Lc=_e.action.bound,Pc=_e.action.bound,Kc=_e.action.bound,Mc=_e.action.bound,$c=Xa((qc=function(e){function t(){var e,n,r,g;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return r=this,g=(e=Za(t)).call.apply(e,[this].concat(a)),Qa(n=!g||"object"!==da(g)&&"function"!=typeof g?ha(r):g,"positions",$c,ha(n)),Qa(n,"is_loading",ea,ha(n)),Qa(n,"error",ta,ha(n)),n.getPositionById=Object(ca.a)(function(e){return n.positions.find(function(t){return+t.id==+e})}),Qa(n,"initializePortfolio",na,ha(n)),Qa(n,"populateResultDetails",ra,ha(n)),n}var n,r,g,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fa(e,t)}(t,Gt),n=t,(r=[{key:"clearTable",value:function(){this.positions=[],this.is_loading=!1,this.error=""}},{key:"portfolioHandler",value:function(e){var t=this;this.is_loading=!1,"error"in e?this.error=e.error.message:(this.error="",e.portfolio.contracts&&(this.positions=e.portfolio.contracts.map(function(e){return Aa(e,t.root_store.modules.trade.active_symbols)}).sort(function(e,t){return t.reference-e.reference})))}},{key:"transactionHandler",value:(c=ya(regeneratorRuntime.mark(function e(t){var n,r,g,c,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("error"in t&&(this.error=t.error.message),t.transaction){e.next=3;break}return e.abrupt("return");case 3:if(n=t.transaction,r=n.contract_id,"buy"!==(g=n.action)){e.next=15;break}return e.next=7,Oe.b.portfolio();case 7:if(c=e.sent,a=c.portfolio.contracts.find(function(e){return+e.contract_id==+r})){e.next=11;break}return e.abrupt("return");case 11:this.pushNewPosition(a),Oe.b.subscribeProposalOpenContract(r,this.proposalOpenContractHandler,!1),e.next=21;break;case 15:if("sell"!==g){e.next=21;break}if(-1!==(i=this.getPositionIndexById(r))){e.next=19;break}return e.abrupt("return");case 19:this.positions[i].is_loading=!0,Oe.b.subscribeProposalOpenContract(r,this.populateResultDetails,!1);case 21:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"proposalOpenContractHandler",value:function(e){if(!("error"in e)){var t=e.proposal_open_contract,n=this.positions.find(function(e){return+e.id==+t.contract_id});if(n){var r=n.indicative,g=+t.bid_price,c=+t.profit;if(t.barrier&&(n.barrier=+t.barrier),t.entry_spot&&(n.entry_spot=+t.entry_spot),n.indicative=g,n.profit_loss=c,n.is_valid_to_sell=Object(sg.j)(t),n.contract_info=t,t.tick_count){var a=n.current_tick>Object(ba.a)(t)?n.current_tick:Object(ba.a)(t);n.current_tick=a}n.status=g>r?"profit":g<r?"loss":null}}}},{key:"onClickSell",value:function(e){var t=this.getPositionIndexById(e),n=this.positions[t].contract_info.bid_price;this.positions[t].is_sell_requested=!1,e&&n&&Oe.b.sell(e,n).then(this.handleSell)}},{key:"handleSell",value:function(e){if(e.error){var t=this.getPositionIndexById(e.echo_req.sell);this.positions[t].is_sell_requested=!1,this.root_store.common.services_error=function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};Ba(n,!0).forEach(function(t){pa(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):Ba(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({type:e.msg_type},e.error),this.root_store.ui.toggleServicesErrorModal(!0)}else if(!e.error&&e.sell){var n=this.getPositionIndexById(e.sell.contract_id);this.positions[n].is_sell_requested=!1,this.root_store.modules.contract_trade.sell_info={sell_price:e.sell.sold_for,transaction_id:e.sell.transaction_id},this.root_store.ui.addNotification(gc(this.root_store.client.currency,e.sell.sold_for))}}},{key:"pushNewPosition",value:function(e){this.positions.unshift(Aa(e,this.root_store.modules.trade.active_symbols))}},{key:"removePositionById",value:function(e){var t=this.root_store.modules.smart_chart.is_contract_mode,n=this.getPositionIndexById(e);this.positions.splice(n,1),t&&+this.root_store.modules.contract_trade.contract_id==+e&&this.root_store.modules.contract_trade.onCloseContract()}},{key:"accountSwitcherListener",value:function(){var e=this;return new Promise(function(){var t=ya(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.clearTable();case 2:return t.next=4,Oe.b.forgetAll("proposal_open_contract","transaction");case 4:return t.abrupt("return",n(e.initializePortfolio()));case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"onMount",value:function(){var e=this;this.onSwitchAccount(this.accountSwitcherListener.bind(null)),0===this.positions.length&&(this.root_store.client.is_logged_in?this.initializePortfolio():Object(_e.reaction)(function(){return e.root_store.client.is_logged_in},function(){e.root_store.client.is_logged_in&&e.initializePortfolio()}))}},{key:"onUnmount",value:function(){this.disposeSwitchAccount(),this.root_store.ui.is_mobile&&(this.clearTable(),Oe.b.forgetAll("proposal_open_contract","transaction"))}},{key:"getPositionIndexById",value:function(e){return this.positions.findIndex(function(t){return+t.id==+e})}},{key:"totals",get:function(){var e=0,t=0,n=0;return this.positions.forEach(function(r){e+=+r.indicative,t+=+r.payout,n+=+r.purchase}),{indicative:e,payout:t,purchase:n}}},{key:"active_positions_totals",get:function(){var e=0,t=0;return this.active_positions.forEach(function(n){e+=+n.indicative,t+=+n.purchase}),{indicative:e,purchase:t}}},{key:"active_positions",get:function(){return this.positions.filter(function(e){return!e.result})}},{key:"all_positions",get:function(){return this.positions}},{key:"is_active_empty",get:function(){return!this.is_loading&&0===this.active_positions.length}},{key:"is_empty",get:function(){return!this.is_loading&&0===this.all_positions.length}}])&&Ga(n.prototype,r),g&&Ga(n,g),t}()).prototype,"positions",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ea=Xa(qc.prototype,"is_loading",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ta=Xa(qc.prototype,"error",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),na=Xa(qc.prototype,"initializePortfolio",[Tc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return ya(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.is_loading=!0,t.next=3,e.waitFor("authorize");case 3:Oe.b.portfolio().then(e.portfolioHandler),Oe.b.subscribeProposalOpenContract(null,e.proposalOpenContractHandler,!1),Oe.b.subscribeTransaction(e.transactionHandler,!1);case 6:case"end":return t.stop()}},t)}))}}),Xa(qc.prototype,"clearTable",[Sc],Object.getOwnPropertyDescriptor(qc.prototype,"clearTable"),qc.prototype),Xa(qc.prototype,"portfolioHandler",[Jc],Object.getOwnPropertyDescriptor(qc.prototype,"portfolioHandler"),qc.prototype),Xa(qc.prototype,"transactionHandler",[Ec],Object.getOwnPropertyDescriptor(qc.prototype,"transactionHandler"),qc.prototype),Xa(qc.prototype,"proposalOpenContractHandler",[Dc],Object.getOwnPropertyDescriptor(qc.prototype,"proposalOpenContractHandler"),qc.prototype),Xa(qc.prototype,"onClickSell",[wc],Object.getOwnPropertyDescriptor(qc.prototype,"onClickSell"),qc.prototype),Xa(qc.prototype,"handleSell",[kc],Object.getOwnPropertyDescriptor(qc.prototype,"handleSell"),qc.prototype),ra=Xa(qc.prototype,"populateResultDetails",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=t.proposal_open_contract,r=e.getPositionIndexById(n.contract_id);e.positions[r].contract_info=n,e.positions[r].duration=Object(ba.c)(n),e.positions[r].duration_unit=Object(ba.d)(Object(ba.b)(n)),e.positions[r].exit_spot=n.exit_tick||n.current_spot,e.positions[r].is_valid_to_sell=Object(sg.j)(n),e.positions[r].result=Object(sg.d)(n),e.positions[r].profit_loss=+n.profit,e.positions[r].sell_time=Object(sg.e)(n)||n.current_spot_time,e.positions[r].sell_price=n.sell_price,e.positions[r].status="complete",e.positions[r].contract_info.barrier&&e.positions[r].contract_info.entry_spot||(e.positions[r].contract_info.barrier=e.positions[r].barrier,e.positions[r].contract_info.entry_spot=e.positions[r].entry_spot),Object(sg.i)(n)&&(e.positions[r].exit_spot="-"),e.positions[r].is_loading=!1,Object(sg.h)(n)&&[e.populateResultDetails,e.proposalOpenContractHandler].forEach(function(e){Oe.b.forget("proposal_open_contract",e,{contract_id:n.contract_id})})}}}),Xa(qc.prototype,"pushNewPosition",[jc],Object.getOwnPropertyDescriptor(qc.prototype,"pushNewPosition"),qc.prototype),Xa(qc.prototype,"removePositionById",[Lc],Object.getOwnPropertyDescriptor(qc.prototype,"removePositionById"),qc.prototype),Xa(qc.prototype,"accountSwitcherListener",[Pc],Object.getOwnPropertyDescriptor(qc.prototype,"accountSwitcherListener"),qc.prototype),Xa(qc.prototype,"onMount",[Kc],Object.getOwnPropertyDescriptor(qc.prototype,"onMount"),qc.prototype),Xa(qc.prototype,"onUnmount",[Mc],Object.getOwnPropertyDescriptor(qc.prototype,"onUnmount"),qc.prototype),Xa(qc.prototype,"totals",[_e.computed],Object.getOwnPropertyDescriptor(qc.prototype,"totals"),qc.prototype),Xa(qc.prototype,"active_positions_totals",[_e.computed],Object.getOwnPropertyDescriptor(qc.prototype,"active_positions_totals"),qc.prototype),Xa(qc.prototype,"active_positions",[_e.computed],Object.getOwnPropertyDescriptor(qc.prototype,"active_positions"),qc.prototype),Xa(qc.prototype,"all_positions",[_e.computed],Object.getOwnPropertyDescriptor(qc.prototype,"all_positions"),qc.prototype),Xa(qc.prototype,"is_active_empty",[_e.computed],Object.getOwnPropertyDescriptor(qc.prototype,"is_active_empty"),qc.prototype),Xa(qc.prototype,"is_empty",[_e.computed],Object.getOwnPropertyDescriptor(qc.prototype,"is_empty"),qc.prototype),qc),fa=n(102),va=n.n(fa);function Wa(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function Ua(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};Wa(n,!0).forEach(function(t){Na(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):Wa(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}function Na(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _a=function(e,t){var n=Object(F.w)().startOf("day").unix();return t&&n>t?t:Object(F.g)(n).add(1,"d").subtract(1,"s").unix()},Ha=function(e,t,n,r){return Object(F.w)().startOf("day").unix()>r?n:e&&t?t:n},xa=function(e,t,n,r){return Object(F.w)().startOf("day").unix()>r?!!e||t:t?n||e:!!e||!1},Ra=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ua({},xa(e,r,n,t)&&{date_from:Ha(r,n,e,t)},{},(t||r)&&{date_to:_a(0,t)})};function Ya(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function Oa(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};Ya(n,!0).forEach(function(t){Ta(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):Ya(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}function Ta(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sa,Ja,Ea,Da,wa,ka,za,ja,La,Pa,Ka,Ma,qa,$a,ei,ti,ni,ri=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="DD MMM YYYY HH:mm:ss",g="".concat(Object(F.w)(+e.purchase_time).format(r)),c="".concat(Object(F.w)(+e.sell_time).format(r)),a=parseFloat(e.payout),i=parseFloat(e.sell_price),o=parseFloat(e.buy_price),I=Object(Ie.formatMoney)(t,Number(i-o),!0),l=!0,s=Ca(n,Object(ua.a)(e.shortcode).underlying);return Oa({},e,{},{payout:isNaN(a)?"-":Object(Ie.formatMoney)(t,a,l),sell_price:isNaN(i)?"-":Object(Ie.formatMoney)(t,i,l),buy_price:isNaN(o)?"-":Object(Ie.formatMoney)(t,o,l),profit_loss:I,sell_time:c,purchase_time:g,display_name:s})};function gi(e){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ci(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ai(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}function ii(e){return function(){var t=this,n=arguments;return new Promise(function(r,g){var c=e.apply(t,n);function a(e){ai(c,r,g,a,i,"next",e)}function i(e){ai(c,r,g,a,i,"throw",e)}a(void 0)})}}function oi(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Ii(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function li(e){return(li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function si(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ci(e,t){return(Ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ui(e,t,n,r,g){var c={};return Object.keys(r).forEach(function(e){c[e]=r[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},c),g&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(g):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null),c}var Ai,bi,di,Bi,pi,mi,yi,Qi,Gi,Zi,hi,Fi,Xi,Vi=150,fi=(Sa=_e.action.bound,Ja=_e.action.bound,Ea=_e.action.bound,Da=_e.action.bound,wa=_e.action.bound,ka=_e.action.bound,za=_e.action.bound,ja=_e.action.bound,La=_e.action.bound,Ka=ui((Pa=function(e){function t(){var e,n,r,g;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return r=this,g=(e=li(t)).call.apply(e,[this].concat(a)),oi(n=!g||"object"!==gi(g)&&"function"!=typeof g?si(r):g,"data",Ka,si(n)),oi(n,"date_from",Ma,si(n)),oi(n,"date_to",qa,si(n)),oi(n,"error",$a,si(n)),oi(n,"has_loaded_all",ei,si(n)),oi(n,"is_loading",ti,si(n)),oi(n,"client_loginid",ni,si(n)),n.fetchOnScroll=va()(function(e){e<2e3&&n.fetchNextBatch()},Vi),n}var n,r,g,c,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ci(e,t)}(t,Gt),n=t,(r=[{key:"shouldFetchNextBatch",value:function(e){if(!e&&(this.has_loaded_all||this.is_loading))return!1;var t=Object(F.w)().startOf("day").add(1,"d").subtract(1,"s").unix();return!(this.date_to<t)||!e&&this.partial_fetch_time}},{key:"fetchNextBatch",value:(a=ii(regeneratorRuntime.mark(function e(){var t,n,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0],this.shouldFetchNextBatch(t)){e.next=3;break}return e.abrupt("return");case 3:return this.is_loading=!0,e.next=6,Oe.b.profitTable(50,t?void 0:this.data.length,Ra(this.date_from,this.date_to,this.partial_fetch_time,t));case 6:n=e.sent,this.profitTableResponseHandler(n,t);case 8:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"profitTableResponseHandler",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("error"in e)this.error=e.error.message;else{var r=e.profit_table.transactions.map(function(e){return ri(e,t.root_store.client.currency,t.root_store.modules.trade.active_symbols)});this.data=n?[].concat(ci(r),ci(this.data)):[].concat(ci(this.data),ci(r)),this.has_loaded_all=!n&&r.length<50,this.is_loading=!1,r.length>0&&(this.partial_fetch_time=Object(F.w)().unix())}}},{key:"handleScroll",value:function(e){var t=e.target,n=t.scrollTop,r=t.scrollHeight-(n+t.clientHeight);this.fetchOnScroll(r)}},{key:"onMount",value:(c=ii(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertHasValidCache(this.client_loginid,this.clearDateFilter,this.clearTable,Oe.b.forgetAll.bind(null,"proposal")),this.client_loginid=this.root_store.client.loginid,this.onSwitchAccount(this.accountSwitcherListener),e.next=5,this.waitFor("authorize");case 5:this.fetchNextBatch(!0);case 6:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"onUnmount",value:function(){this.disposeSwitchAccount(),Oe.b.forgetAll("proposal")}},{key:"accountSwitcherListener",value:function(){var e=this;return new Promise(function(t){return e.clearTable(),e.clearDateFilter(),t(e.fetchNextBatch())})}},{key:"clearTable",value:function(){this.data=[],this.has_loaded_all=!1,this.is_loading=!1}},{key:"clearDateFilter",value:function(){this.date_from=null,this.date_to=Object(F.w)().startOf("day").add(1,"d").subtract(1,"s").unix(),this.partial_fetch_time=0}},{key:"handleDateChange",value:function(e){var t=this;Object.keys(e).forEach(function(n){t["date_".concat(n)]=e[n]}),this.clearTable(),this.fetchNextBatch()}},{key:"total_profit",get:function(){return this.data.reduce(function(e,t){var n=Number(parseFloat(t.buy_price));return e+(Number(parseFloat(t.sell_price))-n)},0)}},{key:"is_empty",get:function(){return!this.is_loading&&0===this.data.length}},{key:"has_selected_date",get:function(){return!(!this.date_from&&!this.date_to)}},{key:"totals",get:function(){var e=0;return this.data.forEach(function(t){-1!==t.profit_loss.indexOf("-")?e-=parseFloat(t.profit_loss.split("-")[1]):e+=parseFloat(t.profit_loss)}),{profit_loss:e.toString()}}}])&&Ii(n.prototype,r),g&&Ii(n,g),t}()).prototype,"data",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ma=ui(Pa.prototype,"date_from",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qa=ui(Pa.prototype,"date_to",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(F.w)().startOf("day").add(1,"d").subtract(1,"s").unix()}}),$a=ui(Pa.prototype,"error",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ei=ui(Pa.prototype,"has_loaded_all",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ti=ui(Pa.prototype,"is_loading",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ni=ui(Pa.prototype,"client_loginid",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ui(Pa.prototype,"total_profit",[_e.computed],Object.getOwnPropertyDescriptor(Pa.prototype,"total_profit"),Pa.prototype),ui(Pa.prototype,"is_empty",[_e.computed],Object.getOwnPropertyDescriptor(Pa.prototype,"is_empty"),Pa.prototype),ui(Pa.prototype,"has_selected_date",[_e.computed],Object.getOwnPropertyDescriptor(Pa.prototype,"has_selected_date"),Pa.prototype),ui(Pa.prototype,"fetchNextBatch",[Sa],Object.getOwnPropertyDescriptor(Pa.prototype,"fetchNextBatch"),Pa.prototype),ui(Pa.prototype,"profitTableResponseHandler",[Ja],Object.getOwnPropertyDescriptor(Pa.prototype,"profitTableResponseHandler"),Pa.prototype),ui(Pa.prototype,"handleScroll",[Ea],Object.getOwnPropertyDescriptor(Pa.prototype,"handleScroll"),Pa.prototype),ui(Pa.prototype,"onMount",[Da],Object.getOwnPropertyDescriptor(Pa.prototype,"onMount"),Pa.prototype),ui(Pa.prototype,"onUnmount",[wa],Object.getOwnPropertyDescriptor(Pa.prototype,"onUnmount"),Pa.prototype),ui(Pa.prototype,"totals",[_e.computed],Object.getOwnPropertyDescriptor(Pa.prototype,"totals"),Pa.prototype),ui(Pa.prototype,"accountSwitcherListener",[ka],Object.getOwnPropertyDescriptor(Pa.prototype,"accountSwitcherListener"),Pa.prototype),ui(Pa.prototype,"clearTable",[za],Object.getOwnPropertyDescriptor(Pa.prototype,"clearTable"),Pa.prototype),ui(Pa.prototype,"clearDateFilter",[ja],Object.getOwnPropertyDescriptor(Pa.prototype,"clearDateFilter"),Pa.prototype),ui(Pa.prototype,"handleDateChange",[La],Object.getOwnPropertyDescriptor(Pa.prototype,"handleDateChange"),Pa.prototype),Pa),vi=n(33),Wi=n.n(vi),Ui=function(e,t){return Object.keys(e).forEach(function(n){var r=Object(_e.toJS)(e[n]);Object(ze.isEmptyObject)(r)||t.push(r)}),t};function Ni(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _i(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Hi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xi(e,t,n,r,g){var c={};return Object.keys(r).forEach(function(e){c[e]=r[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},c),g&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(g):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null),c}var Ri,Yi,Oi,Ti=(Ai=_e.action.bound,bi=_e.action.bound,di=_e.action.bound,Bi=_e.action.bound,mi=xi((pi=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=g.color,a=g.line_style,i=g.not_draggable;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_i(this,"color",mi,this),_i(this,"lineStyle",yi,this),_i(this,"shade",Qi,this),_i(this,"high",Gi,this),_i(this,"low",Zi,this),_i(this,"relative",hi,this),_i(this,"draggable",Fi,this),_i(this,"hidePriceLines",Xi,this),this.onChartBarrierChange=void 0,this.color=c,this.lineStyle=a||ag.SOLID,this.onChange=this.onBarrierChange,this.onChartBarrierChange="function"==typeof r?r.bind(this):function(){},this.high=+t||0,n&&(this.low=+n),this.shade=this.default_shade;var o=!!t;this.relative=!o||/^[+-]/.test(t),this.draggable=!i&&o,this.hidePriceLines=!o}var t,n,r;return t=e,(n=[{key:"updateBarriers",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n||(this.relative=/^[+-]/.test(e)),this.high=+e||void 0,this.low=+t||void 0}},{key:"updateBarrierShade",value:function(e,t){this.shade=e&&ng[t]||this.default_shade}},{key:"onBarrierChange",value:function(e){var t=e.high,n=e.low;this.updateBarriers(t,n,!0),this.onChartBarrierChange.apply(this,Ni(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.filter(function(e){return null!=e}).map(function(t){return"".concat(e&&!/^[+-]/.test(t)?"+":"").concat(t)})}(this.relative,t,n)))}},{key:"updateBarrierColor",value:function(e){this.color=e?cg:gg}},{key:"barrier_count",get:function(){return(void 0!==this.high)+(void 0!==this.low)}},{key:"default_shade",get:function(){return rg[this.barrier_count]}}])&&Hi(t.prototype,n),r&&Hi(t,r),e}()).prototype,"color",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yi=xi(pi.prototype,"lineStyle",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qi=xi(pi.prototype,"shade",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gi=xi(pi.prototype,"high",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zi=xi(pi.prototype,"low",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hi=xi(pi.prototype,"relative",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fi=xi(pi.prototype,"draggable",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xi=xi(pi.prototype,"hidePriceLines",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xi(pi.prototype,"updateBarriers",[Ai],Object.getOwnPropertyDescriptor(pi.prototype,"updateBarriers"),pi.prototype),xi(pi.prototype,"updateBarrierShade",[bi],Object.getOwnPropertyDescriptor(pi.prototype,"updateBarrierShade"),pi.prototype),xi(pi.prototype,"onBarrierChange",[di],Object.getOwnPropertyDescriptor(pi.prototype,"onBarrierChange"),pi.prototype),xi(pi.prototype,"updateBarrierColor",[Bi],Object.getOwnPropertyDescriptor(pi.prototype,"updateBarrierColor"),pi.prototype),xi(pi.prototype,"barrier_count",[_e.computed],Object.getOwnPropertyDescriptor(pi.prototype,"barrier_count"),pi.prototype),xi(pi.prototype,"default_shade",[_e.computed],Object.getOwnPropertyDescriptor(pi.prototype,"default_shade"),pi.prototype),pi);function Si(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Ji(e,t,n,r,g){var c={};return Object.keys(r).forEach(function(e){c[e]=r[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},c),g&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(g):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null),c}var Ei,Di,wi,ki,zi,ji,Li,Pi,Ki,Mi,qi,$i,eo,to,no,ro,go,co,ao,io,oo,Io,lo,so,Co,uo,Ao,bo,Bo,po,mo,yo,Qo,Go,Zo,ho,Fo,Xo,Vo,fo,vo,Wo,Uo,No,_o,Ho,xo,Ro,Yo,Oo=(Yi=Ji((Ri=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Si(this,"marker_config",Yi,this),Si(this,"content_config",Oi,this),this.marker_config=t,this.content_config=n}).prototype,"marker_config",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.observable.object({})}}),Oi=Ji(Ri.prototype,"content_config",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.observable.object({})}}),Ri);function To(e){return(To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function So(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function Jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eo(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Do(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wo(e){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ko(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zo(e,t){return(zo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jo(e,t,n,r,g){var c={};return Object.keys(r).forEach(function(e){c[e]=r[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},c),g&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(g):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null),c}var Lo,Po,Ko,Mo,qo,$o,eI,tI,nI,rI,gI,cI,aI,iI,oI,II,lI,sI=(Ei=_e.action.bound,Di=_e.action.bound,wi=_e.action.bound,ki=_e.action.bound,zi=_e.action.bound,ji=_e.action.bound,Li=_e.action.bound,Pi=_e.action.bound,Ki=_e.action.bound,Mi=_e.action.bound,qi=_e.action.bound,$i=_e.action.bound,eo=_e.action.bound,to=_e.action.bound,no=_e.action.bound,ro=_e.action.bound,go=_e.action.bound,co=_e.action.bound,ao=_e.action.bound,io=_e.action.bound,oo=_e.action.bound,Io=_e.action.bound,lo=_e.action.bound,so=_e.action.bound,Co=_e.action.bound,uo=_e.action.bound,bo=jo((Ao=function(e){function t(){var e,n,r,g;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return r=this,g=(e=wo(t)).call.apply(e,[this].concat(a)),Eo(n=!g||"object"!==To(g)&&"function"!=typeof g?ko(r):g,"chart_type",bo,ko(n)),Eo(n,"granularity",Bo,ko(n)),Eo(n,"barriers",po,ko(n)),Eo(n,"markers",mo,ko(n)),n.barriers_empty_array=[],n.markers_empty_array=[],Eo(n,"is_contract_mode",yo,ko(n)),Eo(n,"is_static_chart",Qo,ko(n)),Eo(n,"is_title_enabled",Go,ko(n)),Eo(n,"start_epoch",Zo,ko(n)),Eo(n,"end_epoch",ho,ko(n)),Eo(n,"margin",Fo,ko(n)),Eo(n,"scroll_to_left_epoch",Xo,ko(n)),Eo(n,"chart_id",Vo,ko(n)),Eo(n,"is_chart_loading",fo,ko(n)),Eo(n,"is_chart_ready",vo,ko(n)),Eo(n,"should_import_layout",Wo,ko(n)),Eo(n,"should_export_layout",Uo,ko(n)),Eo(n,"should_clear_chart",No,ko(n)),Eo(n,"trade_chart_layout",_o,ko(n)),Eo(n,"should_refresh_active_symbols",Ho,ko(n)),n.trade_chart_symbol=null,n.trade_chart_granularity=null,n.trade_chart_type=null,Eo(n,"onMount",xo,ko(n)),Eo(n,"onUnmount",Ro,ko(n)),Eo(n,"createBarriers",Yo,ko(n)),n.wsSubscribe=function(e,t){1===e.subscribe&&Oe.b.subscribeTicksHistory(function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};So(n,!0).forEach(function(t){Jo(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):So(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({},e),t)},n.wsForget=function(e,t){return Oe.b.forget("ticks_history",t,e)},n.wsForgetStream=function(e){return Oe.b.forgetStream(e)},n.wsSendRequest=function(e){return e.time?Wi.a.timePromise.then(function(){return{msg_type:"time",time:Wi.a.get().unix()}}):e.active_symbols?n.should_refresh_active_symbols?Oe.b.sendRequest(e,{forced:!0}):we.a.wait("active_symbols"):Oe.b.sendRequest(e)},n}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zo(e,t)}(t,Gt),n=t,(r=[{key:"switchToContractMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mountain",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t||this.saveAndClearTradeChartLayout(null),this.setContractMode(!0),e||(this.updateGranularity(r),this.updateChartType(n))}},{key:"getChartStatus",value:function(e){this.is_chart_ready=e}},{key:"updateChartType",value:function(e){this.chart_type=e,this.is_contract_mode||(this.trade_chart_type=e)}},{key:"updateGranularity",value:function(e){this.granularity=e,this.is_contract_mode||(this.trade_chart_granularity=e)}},{key:"updateMargin",value:function(e){this.margin=Math.floor(this.granularity?3*this.granularity:Math.max(300,30*e/3600||0))}},{key:"updateEpochScrollToValue",value:function(e){this.scroll_to_left_epoch=e}},{key:"cleanupContractChartView",value:function(){this.margin=null,this.removeBarriers(),this.removeMarkers(),this.resetScrollToLeft(),this.setContractMode(!1),this.setContractStart(null),this.setContractEnd(null),this.setStaticChart(!1),this.root_store.ui.resetPurchaseStates()}},{key:"resetScrollToLeft",value:function(){this.scroll_to_left_epoch=null}},{key:"setContractMode",value:function(e){this.is_contract_mode=e,this.is_title_enabled=!e}},{key:"setChartView",value:function(e){this.updateEpochScrollToValue(e)}},{key:"setContractStart",value:function(e){this.start_epoch=e}},{key:"setContractEnd",value:function(e){this.end_epoch=e}},{key:"setIsChartLoading",value:function(e){this.is_chart_loading=e}},{key:"updateBarriers",value:function(e,t){Object(ze.isEmptyObject)(this.barriers.main)||this.barriers.main.updateBarriers(e,t)}},{key:"updateBarrierShade",value:function(e,t){Object(ze.isEmptyObject)(this.barriers.main)||this.barriers.main.updateBarrierShade(e,t)}},{key:"updateBarrierColor",value:function(e){Object(ze.isEmptyObject)(this.barriers.main)||this.barriers.main.updateBarrierColor(e)}},{key:"removeBarriers",value:function(){this.barriers={}}},{key:"saveAndClearTradeChartLayout",value:function(e){this.should_export_layout=!0,this.should_import_layout=!1,this.trade_chart_symbol=this.root_store.modules.trade.symbol,this.trade_chart_granularity=this.root_store.modules.smart_chart.granularity||0,this.trade_chart_type=this.root_store.modules.smart_chart.chart_type||"mountain",this.chart_id=e}},{key:"applySavedTradeChartLayout",value:function(){var e=this;this.trade_chart_layout&&(this.setIsChartLoading(!0),this.should_export_layout=!1,this.should_import_layout=!0,this.should_clear_chart=!1,this.chart_id="trade",this.trade_chart_layout.isDone=Object(_e.action)(function(){e.trade_chart_layout=null,e.should_import_layout=!1,e.trade_chart_symbol!==e.root_store.modules.trade.symbol&&(e.root_store.modules.trade.symbol=e.trade_chart_symbol),Oe.b.forgetAll("proposal").then(e.root_store.modules.trade.requestProposal()),e.is_chart_ready&&e.setIsChartLoading(!1)}))}},{key:"exportLayout",value:function(e){this.trade_chart_layout=e,this.should_clear_chart=!0}},{key:"setStaticChart",value:function(e){this.is_static_chart=e}},{key:"createMarker",value:function(e){this.markers=Ig()({},this.markers,Jo({},e.type,new Oo(e.marker_config,e.content_config)))}},{key:"removeMarkers",value:function(){this.markers={}}},{key:"barriers_array",get:function(){var e=!1,t=Ui(this.barriers,[]);return this.barriers_empty_array.length!==t.length?e=!0:this.barriers_empty_array.forEach(function(n){t.forEach(function(t){Object.keys(n).forEach(function(r){n[r]!==t[r]&&(e=!0)})})}),e?this.barriers_empty_array=[]:this.barriers_empty_array.length=0,Ui(this.barriers,this.barriers_empty_array)}},{key:"markers_array",get:function(){var e=!1,t=Ui(this.markers,[]);return this.markers_empty_array.length!==t.length?e=!0:this.markers_empty_array.forEach(function(n){t.forEach(function(t){Object.keys(n).forEach(function(r){n[r]!==t[r]&&(e=!0)})})}),e?this.markers_empty_array=[]:this.markers_empty_array.length=0,Ui(this.markers,this.markers_empty_array)}},{key:"settings",get:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.root_store,n=t.common,r=t.ui;return{assetInformation:!1,countdown:r.is_chart_countdown_visible,isHighestLowestMarkerEnabled:!1,lang:n.current_language,position:r.is_chart_layout_default?"bottom":"left",theme:r.is_dark_mode_on?"dark":"light"}}()}}])&&Do(n.prototype,r),g&&Do(n,g),t}()).prototype,"chart_type",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bo=jo(Ao.prototype,"granularity",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),po=jo(Ao.prototype,"barriers",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.observable.object({})}}),mo=jo(Ao.prototype,"markers",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.observable.object({})}}),yo=jo(Ao.prototype,"is_contract_mode",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qo=jo(Ao.prototype,"is_static_chart",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Go=jo(Ao.prototype,"is_title_enabled",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Zo=jo(Ao.prototype,"start_epoch",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ho=jo(Ao.prototype,"end_epoch",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fo=jo(Ao.prototype,"margin",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xo=jo(Ao.prototype,"scroll_to_left_epoch",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vo=jo(Ao.prototype,"chart_id",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"trade"}}),fo=jo(Ao.prototype,"is_chart_loading",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vo=jo(Ao.prototype,"is_chart_ready",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wo=jo(Ao.prototype,"should_import_layout",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Uo=jo(Ao.prototype,"should_export_layout",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),No=jo(Ao.prototype,"should_clear_chart",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_o=jo(Ao.prototype,"trade_chart_layout",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ho=jo(Ao.prototype,"should_refresh_active_symbols",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jo(Ao.prototype,"switchToContractMode",[Ei],Object.getOwnPropertyDescriptor(Ao.prototype,"switchToContractMode"),Ao.prototype),jo(Ao.prototype,"getChartStatus",[Di],Object.getOwnPropertyDescriptor(Ao.prototype,"getChartStatus"),Ao.prototype),jo(Ao.prototype,"updateChartType",[wi],Object.getOwnPropertyDescriptor(Ao.prototype,"updateChartType"),Ao.prototype),jo(Ao.prototype,"updateGranularity",[ki],Object.getOwnPropertyDescriptor(Ao.prototype,"updateGranularity"),Ao.prototype),jo(Ao.prototype,"updateMargin",[zi],Object.getOwnPropertyDescriptor(Ao.prototype,"updateMargin"),Ao.prototype),jo(Ao.prototype,"updateEpochScrollToValue",[ji],Object.getOwnPropertyDescriptor(Ao.prototype,"updateEpochScrollToValue"),Ao.prototype),jo(Ao.prototype,"cleanupContractChartView",[Li],Object.getOwnPropertyDescriptor(Ao.prototype,"cleanupContractChartView"),Ao.prototype),jo(Ao.prototype,"resetScrollToLeft",[Pi],Object.getOwnPropertyDescriptor(Ao.prototype,"resetScrollToLeft"),Ao.prototype),jo(Ao.prototype,"setContractMode",[Ki],Object.getOwnPropertyDescriptor(Ao.prototype,"setContractMode"),Ao.prototype),xo=jo(Ao.prototype,"onMount",[Mi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.trade_chart_layout&&!Object(ze.isEmptyObject)(e.trade_chart_layout)&&e.applySavedTradeChartLayout()}}}),Ro=jo(Ao.prototype,"onUnmount",[qi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.symbol=null,e.trade_chart_layout=null,e.should_import_layout=!1,e.setIsChartLoading(!1),e.cleanupContractChartView()}}}),jo(Ao.prototype,"setChartView",[$i],Object.getOwnPropertyDescriptor(Ao.prototype,"setChartView"),Ao.prototype),jo(Ao.prototype,"setContractStart",[eo],Object.getOwnPropertyDescriptor(Ao.prototype,"setContractStart"),Ao.prototype),jo(Ao.prototype,"setContractEnd",[to],Object.getOwnPropertyDescriptor(Ao.prototype,"setContractEnd"),Ao.prototype),jo(Ao.prototype,"setIsChartLoading",[no],Object.getOwnPropertyDescriptor(Ao.prototype,"setIsChartLoading"),Ao.prototype),Yo=jo(Ao.prototype,"createBarriers",[ro],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n,r,g,c){if(Object(ze.isEmptyObject)(e.barriers.main)){var a={};(function(e){return e in ng})(t)&&(a=new Ti(n,r,g,c)),e.barriers={main:a}}}}}),jo(Ao.prototype,"updateBarriers",[go],Object.getOwnPropertyDescriptor(Ao.prototype,"updateBarriers"),Ao.prototype),jo(Ao.prototype,"updateBarrierShade",[co],Object.getOwnPropertyDescriptor(Ao.prototype,"updateBarrierShade"),Ao.prototype),jo(Ao.prototype,"updateBarrierColor",[ao],Object.getOwnPropertyDescriptor(Ao.prototype,"updateBarrierColor"),Ao.prototype),jo(Ao.prototype,"removeBarriers",[io],Object.getOwnPropertyDescriptor(Ao.prototype,"removeBarriers"),Ao.prototype),jo(Ao.prototype,"saveAndClearTradeChartLayout",[oo],Object.getOwnPropertyDescriptor(Ao.prototype,"saveAndClearTradeChartLayout"),Ao.prototype),jo(Ao.prototype,"applySavedTradeChartLayout",[Io],Object.getOwnPropertyDescriptor(Ao.prototype,"applySavedTradeChartLayout"),Ao.prototype),jo(Ao.prototype,"exportLayout",[lo],Object.getOwnPropertyDescriptor(Ao.prototype,"exportLayout"),Ao.prototype),jo(Ao.prototype,"setStaticChart",[so],Object.getOwnPropertyDescriptor(Ao.prototype,"setStaticChart"),Ao.prototype),jo(Ao.prototype,"barriers_array",[_e.computed],Object.getOwnPropertyDescriptor(Ao.prototype,"barriers_array"),Ao.prototype),jo(Ao.prototype,"createMarker",[Co],Object.getOwnPropertyDescriptor(Ao.prototype,"createMarker"),Ao.prototype),jo(Ao.prototype,"removeMarkers",[uo],Object.getOwnPropertyDescriptor(Ao.prototype,"removeMarkers"),Ao.prototype),jo(Ao.prototype,"markers_array",[_e.computed],Object.getOwnPropertyDescriptor(Ao.prototype,"markers_array"),Ao.prototype),jo(Ao.prototype,"settings",[_e.computed],Object.getOwnPropertyDescriptor(Ao.prototype,"settings"),Ao.prototype),Ao),CI=n(108);function uI(e){return(uI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AI(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function bI(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}function dI(e){return function(){var t=this,n=arguments;return new Promise(function(r,g){var c=e.apply(t,n);function a(e){bI(c,r,g,a,i,"next",e)}function i(e){bI(c,r,g,a,i,"throw",e)}a(void 0)})}}function BI(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function pI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mI(e){return(mI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QI(e,t){return(QI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GI(e,t,n,r,g){var c={};return Object.keys(r).forEach(function(e){c[e]=r[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},c),g&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(g):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null),c}var ZI=150,hI=(Lo=_e.action.bound,Po=_e.action.bound,Ko=_e.action.bound,Mo=_e.action.bound,qo=_e.action.bound,$o=_e.action.bound,eI=_e.action.bound,tI=_e.action.bound,nI=_e.action.bound,gI=GI((rI=function(e){function t(){var e,n,r,g;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return r=this,g=(e=mI(t)).call.apply(e,[this].concat(a)),BI(n=!g||"object"!==uI(g)&&"function"!=typeof g?yI(r):g,"data",gI,yI(n)),BI(n,"is_loading",cI,yI(n)),BI(n,"has_loaded_all",aI,yI(n)),BI(n,"date_from",iI,yI(n)),BI(n,"date_to",oI,yI(n)),BI(n,"error",II,yI(n)),BI(n,"client_loginid",lI,yI(n)),n.fetchOnScroll=va()(function(e){e<2e3&&n.fetchNextBatch()},ZI),n}var n,r,g,c,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QI(e,t)}(t,Gt),n=t,(r=[{key:"clearTable",value:function(){this.data=[],this.has_loaded_all=!1,this.is_loading=!1}},{key:"clearDateFilter",value:function(){this.date_from=null,this.date_to=Object(F.w)().startOf("day").add(1,"d").subtract(1,"s").unix(),this.partial_fetch_time=0}},{key:"shouldFetchNextBatch",value:function(e){if(!e&&(this.has_loaded_all||this.is_loading))return!1;var t=Object(F.w)().startOf("day").add(1,"d").subtract(1,"s").unix();return!(this.date_to<t)||!e&&this.partial_fetch_time}},{key:"fetchNextBatch",value:(a=dI(regeneratorRuntime.mark(function e(){var t,n,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0],this.shouldFetchNextBatch(t)){e.next=3;break}return e.abrupt("return");case 3:return this.is_loading=!0,e.next=6,Oe.b.statement(100,t?void 0:this.data.length,Ra(this.date_from,this.date_to,this.partial_fetch_time,t));case 6:n=e.sent,this.statementHandler(n,t);case 8:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"statementHandler",value:function(e,t){var n=this;if("error"in e)this.error=e.error.message;else{var r=e.statement.transactions.map(function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="DD MMM YYYY HH:mm:ss",g=Object(F.w)(e.transaction_time).format(r),c=parseFloat(e.payout),a=parseFloat(e.amount),i=parseFloat(e.balance_after),o=!0,I=["buy","sell"].includes(e.action_type)?e.shortcode:null,l=I?Ca(n,Object(ua.a)(I).underlying):"";return{action:Object(W.localize)(Object(CI.toTitleCase)(e.action_type)),date:g,display_name:l,refid:e.transaction_id,payout:isNaN(c)?"-":Object(Ie.formatMoney)(t,c,o),amount:isNaN(a)?"-":Object(Ie.formatMoney)(t,a,o),balance:isNaN(i)?"-":Object(Ie.formatMoney)(t,i,o),desc:e.longcode.replace(/\n/g,"<br />"),id:e.contract_id,app_id:e.app_id,shortcode:I,action_type:e.action_type}}(e,n.root_store.client.currency,n.root_store.modules.trade.active_symbols)});this.data=t?[].concat(AI(r),AI(this.data)):[].concat(AI(this.data),AI(r)),this.has_loaded_all=!t&&r.length<100,this.is_loading=!1,r.length>0&&(this.partial_fetch_time=Object(F.w)().unix())}}},{key:"handleDateChange",value:function(e){var t=this;Object.keys(e).forEach(function(n){e[n]&&(t["date_".concat(n)]=e[n])}),this.clearTable(),this.fetchNextBatch()}},{key:"handleScroll",value:function(e){var t=e.target,n=t.scrollTop,r=t.scrollHeight-(n+t.clientHeight);this.fetchOnScroll(r)}},{key:"accountSwitcherListener",value:function(){var e=this;return new Promise(function(t){return e.clearTable(),e.clearDateFilter(),t(e.fetchNextBatch())})}},{key:"onMount",value:(c=dI(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertHasValidCache(this.client_loginid,this.clearDateFilter,this.clearTable,Oe.b.forgetAll.bind(null,"proposal")),this.client_loginid=this.root_store.client.loginid,this.onSwitchAccount(this.accountSwitcherListener),e.next=5,this.waitFor("authorize");case 5:this.fetchNextBatch(!0);case 6:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"onUnmount",value:function(){this.disposeSwitchAccount(),Oe.b.forgetAll("proposal")}},{key:"is_empty",get:function(){return!this.is_loading&&0===this.data.length}},{key:"has_selected_date",get:function(){return!(!this.date_from&&!this.date_to)}}])&&pI(n.prototype,r),g&&pI(n,g),t}()).prototype,"data",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),cI=GI(rI.prototype,"is_loading",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),aI=GI(rI.prototype,"has_loaded_all",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),iI=GI(rI.prototype,"date_from",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oI=GI(rI.prototype,"date_to",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(F.w)().startOf("day").add(1,"d").subtract(1,"s").unix()}}),II=GI(rI.prototype,"error",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),lI=GI(rI.prototype,"client_loginid",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),GI(rI.prototype,"is_empty",[_e.computed],Object.getOwnPropertyDescriptor(rI.prototype,"is_empty"),rI.prototype),GI(rI.prototype,"has_selected_date",[_e.computed],Object.getOwnPropertyDescriptor(rI.prototype,"has_selected_date"),rI.prototype),GI(rI.prototype,"clearTable",[Lo],Object.getOwnPropertyDescriptor(rI.prototype,"clearTable"),rI.prototype),GI(rI.prototype,"clearDateFilter",[Po],Object.getOwnPropertyDescriptor(rI.prototype,"clearDateFilter"),rI.prototype),GI(rI.prototype,"fetchNextBatch",[Ko],Object.getOwnPropertyDescriptor(rI.prototype,"fetchNextBatch"),rI.prototype),GI(rI.prototype,"statementHandler",[Mo],Object.getOwnPropertyDescriptor(rI.prototype,"statementHandler"),rI.prototype),GI(rI.prototype,"handleDateChange",[qo],Object.getOwnPropertyDescriptor(rI.prototype,"handleDateChange"),rI.prototype),GI(rI.prototype,"handleScroll",[$o],Object.getOwnPropertyDescriptor(rI.prototype,"handleScroll"),rI.prototype),GI(rI.prototype,"accountSwitcherListener",[eI],Object.getOwnPropertyDescriptor(rI.prototype,"accountSwitcherListener"),rI.prototype),GI(rI.prototype,"onMount",[tI],Object.getOwnPropertyDescriptor(rI.prototype,"onMount"),rI.prototype),GI(rI.prototype,"onUnmount",[nI],Object.getOwnPropertyDescriptor(rI.prototype,"onUnmount"),rI.prototype),rI),FI=n(147);function XI(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}var VI=function(){var e,t=(e=regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oe.b.subscribeProposalOpenContractOnBuy({buy:t,price:n}));case 1:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,g){var c=e.apply(t,n);function a(e){XI(c,r,g,a,i,"next",e)}function i(e){XI(c,r,g,a,i,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),fI=n(22);function vI(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}var WI=function(){var e,t=(e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fI.a.buildContractTypesConfig(t);case 2:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,g){var c=e.apply(t,n);function a(e){vI(c,r,g,a,i,"next",e)}function i(e){vI(c,r,g,a,i,"throw",e)}a(void 0)})});return function(e){return t.apply(this,arguments)}}(),UI=n(53);function NI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,g=!1,c=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){g=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(g)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var _I=function(){return{amount:{rules:[["req",{message:Object(W.localize)("Amount is a required field.")}],["number",{min:0,type:"float"}]]},barrier_1:{rules:[["req",{condition:function(e){return e.barrier_count&&e.form_components.indexOf("barrier")>-1},message:Object(W.localize)("Barrier is a required field.")}],["barrier",{condition:function(e){return e.barrier_count}}],["custom",{func:function(e,t,n,r){return!(n.barrier_count>1)||+e>+r.barrier_2},message:Object(W.localize)("Higher barrier must be higher than lower barrier.")}]],trigger:"barrier_2"},barrier_2:{rules:[["req",{condition:function(e){return e.barrier_count>1&&e.form_components.indexOf("barrier")>-1},message:Object(W.localize)("Barrier is a required field.")}],["barrier",{condition:function(e){return e.barrier_count}}],["custom",{func:function(e,t,n,r){return/^[+-]/g.test(r.barrier_1)&&/^[+-]/g.test(e)||/^(?![+-])/g.test(r.barrier_1)&&/^(?![+-])/g.test(e)},message:Object(W.localize)("Both barriers should be relative or absolute")}],["custom",{func:function(e,t,n,r){return+r.barrier_1>+e},message:Object(W.localize)("Lower barrier must be lower than higher barrier.")}]],trigger:"barrier_1"},duration:{rules:[["req",{message:Object(W.localize)("Duration is a required field.")}]]},start_date:{trigger:"start_time"},expiry_date:{trigger:"expiry_time"},start_time:{rules:[["custom",{func:function(e,t,n){return"spot"===n.contract_start_type||Object(F.p)(e)},message:Object(W.localize)('Please enter the start time in the format "HH:MM".')}],["custom",{func:function(e,t,n){return"spot"===n.contract_start_type||Object(F.n)(e)},message:Object(W.localize)("Hour must be between 0 and 23.")}],["custom",{func:function(e,t,n){return"spot"===n.contract_start_type||Object(F.o)(e)},message:Object(W.localize)("Minute must be between 0 and 59.")}],["custom",{func:function(e,t,n){if("spot"===n.contract_start_type)return!0;if(!Object(F.p)(e))return!1;var r=Object(F.w)(n.start_date),g=r.clone(),c=NI(e.split(":"),2),a=c[0],i=c[1];return Object(UI.b)(n.sessions,g.hour(a).minute(i),r)},message:Object(W.localize)("Start time cannot be in the past.")}]]},expiry_time:{rules:[["custom",{func:function(e,t,n){return"spot"===n.contract_start_type||Object(F.p)(e)},message:Object(W.localize)('Please enter the start time in the format "HH:MM".')}],["custom",{func:function(e,t,n){return"spot"===n.contract_start_type||Object(F.n)(e)},message:Object(W.localize)("Hour must be between 0 and 23.")}],["custom",{func:function(e,t,n){return"spot"===n.contract_start_type||Object(F.o)(e)},message:Object(W.localize)("Minute must be between 0 and 59.")}],["custom",{func:function(e,t,n){if("spot"===n.contract_start_type)return!0;if(!Object(F.p)(e))return!1;var r=Object(F.w)(n.start_date),g=r.clone(),c=NI(e.split(":"),2),a=c[0],i=c[1];return Object(UI.b)(n.sessions,g.hour(a).minute(i),r)},message:Object(W.localize)("Expiry time cannot be in the past.")}]]}}},HI=n(39),xI=function(e){var t=e.contract_types_list,n=e.contract_type;return fI.a.getContractType(t,n)},RI=function(e){return fI.a.getContractValues(e)};function YI(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function OI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var TI=function(e){var t=Object(HI.c)(e);return function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};YI(n,!0).forEach(function(t){OI(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):YI(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({contract_expiry_type:t},e.contract_expiry_type!==t&&fI.a.getBarriers(e.contract_type,t))};function SI(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function JI(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};SI(n,!0).forEach(function(t){EI(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):SI(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}function EI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DI(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}var wI=function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var n,r,g,c,a,i,o,I,l,s,C,u,A,b,d,B,p,m,y,Q,G,Z,h,F,X;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.contract_type,r=t.duration_unit,g=t.expiry_time,c=t.start_date,a=t.symbol,i=t.root_store.common.server_time,o=t.start_time,I=t.expiry_date,l=t.expiry_type,o=o||i.clone().add(6,"minute").format("HH:mm"),s=fI.a.getStartType(c),C=s.contract_start_type,u=fI.a.getSessions(n,c),A=u.sessions,b=fI.a.getStartTime(A,c,o),o=b.start_time,d=fI.a.getDurationUnitsList(n,C),B=d.duration_units_list,p=fI.a.getDurationUnit(r,n,C),m=fI.a.getExpiryType(B,l),l=m.expiry_type,y=fI.a.getExpiryDate(B,I,l,c),I=y.expiry_date,e.next=19,fI.a.getTradingTimes(I,a);case 19:return Q=e.sent,G={market_open_times:Q.open},Z={market_close_times:Q.close},h=Z.market_close_times,F=fI.a.getExpiryTime(I,g,l,h,A,c,o),X=fI.a.getDurationMinMax(n,C),e.abrupt("return",JI({},s,{},d,{},X,{},p,{},u,{},b,{},y,{},F,{},m,{},G,{},Z));case 26:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,g){var c=e.apply(t,n);function a(e){DI(c,r,g,a,i,"next",e)}function i(e){DI(c,r,g,a,i,"throw",e)}a(void 0)})});return function(e){return t.apply(this,arguments)}}();function kI(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function zI(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}var jI=function(){var e,t=(e=regeneratorRuntime.mark(function e(t,n){var r,g,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.getSnapshot(),g=LI(t,n),c=0;case 3:if(!(c<g.length)){e.next=13;break}return e.t0=PI,e.t1=r,e.next=8,g[c](r);case 8:e.t2=e.sent,(0,e.t0)(e.t1,e.t2);case 10:c++,e.next=3;break;case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,g){var c=e.apply(t,n);function a(e){zI(c,r,g,a,i,"next",e)}function i(e){zI(c,r,g,a,i,"throw",e)}a(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),LI=function(e,t){return[fI.a.getContractCategories,xI].concat(kI(/\b(symbol|contract_type)\b/.test(Object.keys(t))||!e.contract_type?[RI]:[]),[wI,TI])},PI=function(e,t){["contract_types_list","duration_units_list","form_components","market_close_times","trade_types"].forEach(function(n){n in t&&(e[n]=void 0)}),Ig()(!0,e,t)},KI=n(107);function MI(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function qI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $I,el,tl,nl,rl,gl,cl,al,il,ol,Il,ll,sl,Cl,ul,Al,bl,dl,Bl,pl,ml,yl,Ql,Gl,Zl,hl,Fl,Xl,Vl,fl,vl,Wl,Ul,Nl,_l,Hl,xl,Rl,Yl,Ol,Tl,Sl,Jl,El,Dl,wl,kl,zl,jl,Ll,Pl,Kl,Ml,ql,$l,es,ts,ns,rs,gs,cs,as,is,os,Is,ls,ss,Cs,us,As={barrier:"barrier_1",barrier2:"barrier_2",date_expiry:"expiry_date"},bs=function(e){var t=Object(ze.getPropertyValue)(e,["error","details","field"]);if(!t)return null;var n=As[t]||t,r=document.getElementsByName(n)[0];return r&&Object(KI.isVisible)(r)?n:null},ds=function(e,t){var n={};if("endtime"===e.expiry_type){var r=Object(F.w)(e.expiry_date);n.date_expiry=Object(F.d)(r.unix(),e.expiry_time)}return function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};MI(n,!0).forEach(function(t){qI(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):MI(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({proposal:1,subscribe:1,amount:parseFloat(e.amount),basis:e.basis,contract_type:t,currency:e.root_store.client.currency,symbol:e.symbol},e.start_date&&{date_start:Object(F.d)(e.start_date,e.start_time)},{},"duration"===e.expiry_type?{duration:parseInt(e.duration),duration_unit:e.duration_unit}:n,{},(e.barrier_count>0||-1!==e.form_components.indexOf("last_digit"))&&{barrier:e.barrier_1||e.last_digit},{},2===e.barrier_count&&{barrier2:e.barrier_2})};function Bs(e){return(Bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ps(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function ms(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};ps(n,!0).forEach(function(t){ys(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):ps(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}function ys(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qs(e,t,n,r,g,c,a){try{var i=e[c](a),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,g)}function Gs(e){return function(){var t=this,n=arguments;return new Promise(function(r,g){var c=e.apply(t,n);function a(e){Qs(c,r,g,a,i,"next",e)}function i(e){Qs(c,r,g,a,i,"throw",e)}a(void 0)})}}function Zs(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function hs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fs(e){return(Fs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vs(e,t){return(Vs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fs(e,t,n,r,g){var c={};return Object.keys(r).forEach(function(e){c[e]=r[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},c),g&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(g):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null),c}var vs="trade_store",Ws=($I=_e.action.bound,el=_e.action.bound,tl=_e.action.bound,nl=_e.action.bound,rl=_e.action.bound,gl=_e.action.bound,cl=_e.action.bound,al=_e.action.bound,il=_e.action.bound,ol=_e.action.bound,Il=_e.action.bound,ll=_e.action.bound,sl=_e.action.bound,Cl=_e.action.bound,ul=_e.action.bound,Al=_e.action.bound,bl=_e.action.bound,dl=_e.action.bound,Bl=_e.action.bound,pl=_e.action.bound,ml=_e.action.bound,yl=_e.action.bound,Ql=_e.action.bound,Gl=_e.action.bound,Zl=_e.action.bound,hl=_e.action.bound,Fl=_e.action.bound,Xl=_e.action.bound,fl=fs((Vl=function(e){function t(e){var n,r=e.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var g,c;return g=this,c=Fs(t).call(this,{root_store:r,local_storage_properties:["amount","barrier_1","barrier_2","basis","contract_start_type","contract_type","duration","duration_unit","expiry_date","expiry_type","is_equal","last_digit","start_date","start_time","symbol"],store_name:vs,validation_rules:_I()}),Zs(n=!c||"object"!==Bs(c)&&"function"!=typeof c?Xs(g):c,"is_trade_component_mounted",fl,Xs(n)),Zs(n,"is_purchase_enabled",vl,Xs(n)),Zs(n,"is_trade_enabled",Wl,Xs(n)),Zs(n,"is_equal",Ul,Xs(n)),Zs(n,"symbol",Nl,Xs(n)),Zs(n,"is_market_closed",_l,Xs(n)),Zs(n,"previous_symbol",Hl,Xs(n)),Zs(n,"active_symbols",xl,Xs(n)),Zs(n,"contract_expiry_type",Rl,Xs(n)),Zs(n,"contract_start_type",Yl,Xs(n)),Zs(n,"contract_type",Ol,Xs(n)),Zs(n,"contract_types_list",Tl,Xs(n)),Zs(n,"form_components",Sl,Xs(n)),Zs(n,"trade_types",Jl,Xs(n)),Zs(n,"amount",El,Xs(n)),Zs(n,"basis",Dl,Xs(n)),Zs(n,"basis_list",wl,Xs(n)),Zs(n,"currency",kl,Xs(n)),Zs(n,"duration",zl,Xs(n)),Zs(n,"duration_unit",jl,Xs(n)),Zs(n,"duration_units_list",Ll,Xs(n)),Zs(n,"duration_min_max",Pl,Xs(n)),Zs(n,"expiry_date",Kl,Xs(n)),Zs(n,"expiry_time",Ml,Xs(n)),Zs(n,"expiry_type",ql,Xs(n)),Zs(n,"barrier_1",$l,Xs(n)),Zs(n,"barrier_2",es,Xs(n)),Zs(n,"barrier_count",ts,Xs(n)),Zs(n,"start_date",ns,Xs(n)),Zs(n,"start_dates_list",rs,Xs(n)),Zs(n,"start_time",gs,Xs(n)),Zs(n,"sessions",cs,Xs(n)),Zs(n,"market_open_times",as,Xs(n)),Zs(n,"market_close_times",is,Xs(n)),Zs(n,"last_digit",os,Xs(n)),Zs(n,"proposal_info",Is,Xs(n)),Zs(n,"purchase_info",ls,Xs(n)),n.debouncedProposal=va()(n.requestProposal,500),n.proposal_requests={},n.initial_barriers=void 0,n.is_initial_barrier_applied=!1,Zs(n,"init",ss,Xs(n)),Zs(n,"refresh",Cs,Xs(n)),Zs(n,"clearContract",us,Xs(n)),n.disablePurchaseButtons=function(){var e=document.getElementsByClassName("trade-container__price-info"),t=document.getElementsByClassName("btn-purchase");[].forEach.bind(t,function(e){e.classList.add("btn-purchase--disabled")})(),[].forEach.bind(e,function(e){e.classList.add("trade-container__price-info--fade")})()},Object(_e.reaction)(function(){return[n.contract_expiry_type,n.duration_min_max,n.duration_unit,n.expiry_type]},function(){n.changeDurationValidationRules()}),Object(_e.reaction)(function(){return n.is_equal},function(){n.onAllowEqualsChange()}),Object(_e.reaction)(function(){return n.symbol},function(){var e=Object(HI.e)(n.symbol,n.expiry_type);e&&(n.expiry_date=e)}),Object(_e.reaction)(function(){return n.duration_unit},function(){n.contract_expiry_type="t"===n.duration_unit?"tick":"intraday"}),n}var n,r,g,c,a,i,o,I,l,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vs(e,t)}(t,Gt),n=t,(r=[{key:"setDefaultSymbol",value:(s=Gs(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.is_symbol_in_active_symbols){e.next=3;break}return e.next=3,this.processNewValuesAsync({symbol:oa(this.active_symbols)});case 3:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"setActiveSymbols",value:(l=Gs(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.smart_chart.should_refresh_active_symbols){e.next=6;break}return e.next=3,we.a.wait("active_symbols");case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,Oe.b.activeSymbols({forced:!0});case 8:e.t0=e.sent;case 9:if(t=e.t0,n=t.active_symbols,!t.error){e.next=17;break}return this.root_store.common.showError(Object(W.localize)("Trading is unavailable at this time.")),e.abrupt("return");case 17:if(n&&n.length){e.next=20;break}return aa(this.root_store.common.showError),e.abrupt("return");case 20:this.processNewValuesAsync({active_symbols:n});case 21:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"setContractTypes",value:(I=Gs(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.symbol||!this.is_symbol_in_active_symbols){e.next=4;break}return e.next=3,WI(this.symbol);case 3:Object(_e.runInAction)(function(){t.processNewValuesAsync(ms({},fI.a.getContractValues(t),{},fI.a.getContractCategories()))});case 4:case"end":return e.stop()}},e,this)})),function(){return I.apply(this,arguments)})},{key:"prepareTradeStore",value:(o=Gs(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.smart_chart=this.root_store.modules.smart_chart,this.currency=this.root_store.client.currency,this.initial_barriers={barrier_1:this.barrier_1,barrier_2:this.barrier_2},e.next=5,we.a.wait("authorize");case 5:return e.next=7,this.setActiveSymbols();case 7:Object(_e.runInAction)(Gs(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setDefaultSymbol();case 2:return e.next=4,t.setContractTypes();case 4:return e.next=6,t.processNewValuesAsync({is_market_closed:ia(t.active_symbols,t.symbol)},!0,null,!1);case 6:case"end":return e.stop()}},e)})));case 8:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"onChangeMultiple",value:function(e){var t=this;Object.keys(e).forEach(function(e){if(!(e in t))throw new Error("Invalid Argument: ".concat(e))}),this.processNewValuesAsync(ms({},e),!0)}},{key:"onChange",value:function(e){var t=e.target,n=t.name,r=t.value;if("symbol"===n&&r&&(this.root_store.modules.smart_chart.trade_chart_symbol=r),"currency"===n)this.root_store.client.selectCurrency(r);else if("expiry_date"===n)this.expiry_time=null;else if(!(n in this))throw new Error("Invalid Argument: ".concat(n));this.validateAllProperties(),this.processNewValuesAsync(ys({},n,r),!0)}},{key:"setPreviousSymbol",value:function(e){this.previous_symbol!==e&&(this.previous_symbol=e)}},{key:"resetPreviousSymbol",value:(i=Gs(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setMarketStatus(ia(this.active_symbols,this.previous_symbol)),e.next=3,WI(this.previous_symbol);case 3:Object(_e.runInAction)(function(){t.previous_symbol=""});case 4:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"onHoverPurchase",value:function(e,t){this.is_purchase_enabled&&this.smart_chart.updateBarrierShade(e,t)}},{key:"onPurchase",value:function(e,t,n){var r=this;this.is_purchase_enabled&&e&&(this.is_purchase_enabled=!1,VI(e,t).then(Object(_e.action)(function(t){if(r.proposal_info[n].id!==e)throw r.smart_chart.cleanupContractChartView(),r.smart_chart.applySavedTradeChartLayout(),new Error("Proposal ID does not match.");if(t.buy){r.smart_chart.switchToContractMode();var g=ms({},r.proposal_requests[n],{},r.proposal_info[n],{buy_price:t.buy.buy_price}),c=t.buy,a=c.contract_id,i=c.longcode,o=c.start_time;a&&(r.smart_chart.setChartView(o),r.root_store.modules.contract_trade.drawContractStartTime(o,i,a),r.root_store.ui.openPositionsDrawer()),r.root_store.gtm.pushPurchaseData(g)}else t.error&&(r.disablePurchaseButtons(),r.root_store.common.services_error=ms({type:t.msg_type},t.error),r.root_store.ui.toggleServicesErrorModal(!0));Oe.b.forgetAll("proposal"),r.purchase_info=t,r.is_purchase_enabled=!0})))}},{key:"updateStore",value:function(e){var t=this;return Object.keys(Object(ze.cloneObject)(e)).forEach(function(n){"root_store"===n||["validation_rules","validation_errors","currency","smart_chart"].indexOf(n)>-1||(JSON.stringify(t[n])===JSON.stringify(e[n])?delete e[n]:("symbol"===n&&(t.is_purchase_enabled=!1,t.is_trade_enabled=!1),e.start_date&&"string"==typeof e.start_date&&(e.start_date=parseInt(e.start_date)),t[n]=e[n],"barrier_2"===n&&e.barrier_1&&(t.barrier_1=e.barrier_1)))}),e}},{key:"processNewValuesAsync",value:(a=Gs(regeneratorRuntime.mark(function e(){var t,n,r,g,c,a,i,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},n=o.length>1&&void 0!==o[1]&&o[1],r=o.length>2&&void 0!==o[2]?o[2]:{},(!(o.length>3&&void 0!==o[3])||o[3])&&Oe.b.forgetAll("proposal"),n&&/\bcurrency\b/.test(Object.keys(t))&&(g=r&&!Object(ze.isEmptyObject)(r)&&r.currency?r.currency:this.currency,Object(Ie.isCryptocurrency)(t.currency)!==Object(Ie.isCryptocurrency)(g)&&(t.amount=n&&t.amount?t.amount:Object(Ie.getMinPayout)(t.currency)),this.currency=t.currency),!Object.keys(t).includes("symbol")){e.next=12;break}return this.setPreviousSymbol(this.symbol),e.next=10,WI(t.symbol);case 10:this.setMarketStatus(ia(this.active_symbols,t.symbol)),c=fI.a.getContractCategories().has_only_forward_starting_contracts;case 12:if(this.root_store.ui.setHasOnlyForwardingContracts(c),!c){e.next=15;break}return e.abrupt("return");case 15:if(a=this.updateStore(Object(ze.cloneObject)(t)),!n&&!/\b(symbol|contract_types_list)\b/.test(Object.keys(a))){e.next=28;break}return this.updateStore({is_purchase_enabled:!1,proposal_info:{}}),t.contract_type&&this.root_store.ui.is_advanced_duration&&Object(FI.a)(t.contract_type)&&(this.barrier_1="",this.barrier_2="",this.expiry_type="duration",this.root_store.ui.is_advanced_duration=!1),this.smart_chart.is_contract_mode||("barrier_1"in a||"barrier_2"in a?this.smart_chart.updateBarriers(this.barrier_1,this.barrier_2):this.smart_chart.removeBarriers()),e.next=22,jI(this,a);case 22:(i=e.sent).is_trade_enabled=!0,this.updateStore(ms({},i,{},this.is_initial_barrier_applied?{}:this.initial_barriers)),this.is_initial_barrier_applied=!0,/\bcontract_type\b/.test(Object.keys(a))&&this.validateAllProperties(),this.smart_chart.is_contract_mode||this.debouncedProposal();case 28:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"clearPurchaseInfo",value:function(){this.purchase_info={},this.proposal_requests={},this.proposal_info={}}},{key:"requestProposal",value:function(){var e=this,t=function(e){var t={};return Object.keys(e.trade_types).forEach(function(n){var r=ds(e,n),g=e.proposal_requests[n];Object(ze.isDeepEqual)(r,g)||(t[n]=r)}),t}(this);if(Object.values(this.validation_errors).some(function(e){return e.length}))return this.proposal_info={},this.purchase_info={},void Oe.b.forgetAll("proposal");Object(ze.isEmptyObject)(t)||(this.proposal_requests=t,this.proposal_info={},this.purchase_info={},this.root_store.modules.contract_trade.setIsDigitContract(Object.keys(this.proposal_requests)[0]),Object.keys(this.proposal_requests).forEach(function(t){Oe.b.subscribeProposal(e.proposal_requests[t],e.onProposalResponse)})),this.root_store.ui.resetPurchaseStates()}},{key:"setMarketStatus",value:function(e){this.is_market_closed=e}},{key:"onProposalResponse",value:function(e){if(!this.root_store.modules.smart_chart.is_contract_mode){var t=e.echo_req.contract_type,n=Object(ze.getPropertyValue)(this.proposal_info,t)||{},r=Object(ze.getPropertyValue)(n,"obj_contract_basis")||{};if(this.proposal_info=ms({},this.proposal_info,ys({},t,function(e,t,n){var r=t.proposal||{},g=r.payout-r.ask_price||0,c=100*g/(r.ask_price||1),a=r.display_value,i=e.basis_list.find(function(t){return t.value!==e.basis}),o="Stake"===i.text?a:r[i.value],I=o>n.value;n.value&&o!==n.value||(I=null);var l={text:i.text||"",value:o||""};return{id:r.id||"",has_error:!!t.error,has_error_details:!!bs(t),has_increased:I,message:r.longcode||t.error.message,obj_contract_basis:l,payout:r.payout,profit:g.toFixed(Object(Ie.getDecimalPlaces)(e.currency)),returns:"".concat(c.toFixed(2),"%"),stake:a}}(this,e,r))),!this.smart_chart.is_contract_mode){var g={color:this.root_store.ui.is_dark_mode_on?cg:gg};!function(e,t,n,r){var g=t.echo_req,c=g.barrier,a=g.barrier2,i=g.contract_type;e.createBarriers(i,c,a,n,r)}(this.smart_chart,e,this.onChartBarrierChange,g)}if(e.error){var c=bs(e);c&&this.setValidationErrorMessages(c,[e.error.message])}else this.validateAllProperties();this.is_purchase_enabled=!0}}},{key:"onChartBarrierChange",value:function(e,t){this.processNewValuesAsync({barrier_1:e,barrier_2:t},!0)}},{key:"onAllowEqualsChange",value:function(){this.processNewValuesAsync({contract_type:parseInt(this.is_equal)?"rise_fall_equal":"rise_fall"},!0)}},{key:"updateSymbol",value:function(e){e&&this.onChange({target:{name:"symbol",value:e}})}},{key:"changeDurationValidationRules",value:function(){if("endtime"!==this.expiry_type){var e=this.validation_rules.duration.rules.findIndex(function(e){return"number"===e[0]}),t=this.duration_min_max[this.contract_expiry_type]||!1;if(t){var n={min:Object(HI.b)(+t.min,this.duration_unit),max:Object(HI.b)(+t.max,this.duration_unit)};e>-1?this.validation_rules.duration.rules[e][1]=n:this.validation_rules.duration.rules.push(["number",n]),this.validateProperty("duration",this.duration)}}else this.validation_errors.duration=[]}},{key:"accountSwitcherListener",value:function(){var e=this;return this.resetErrorServices(),new Promise(function(){var t=Gs(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.processNewValuesAsync({currency:e.root_store.client.currency},!0,{currency:e.currency},!1);case 2:e.refresh(),n(e.debouncedProposal());case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"resetErrorServices",value:function(){this.root_store.ui.toggleServicesErrorModal(!1)}},{key:"onMount",value:function(){var e=this;this.onSwitchAccount(this.accountSwitcherListener),Object(_e.runInAction)(Gs(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.is_trade_component_mounted=!0,e.refresh(),t.next=4,e.prepareTradeStore();case 4:e.debouncedProposal();case 5:case"end":return t.stop()}},t)})))}},{key:"restoreTradeChart",value:function(){var e=this.root_store.modules.smart_chart;e.trade_chart_symbol&&e.trade_chart_symbol!==this.symbol&&(this.symbol=e.trade_chart_symbol),e.trade_chart_granularity&&e.trade_chart_granularity!==e.granularity?e.granularity=e.trade_chart_granularity:e.granularity=0,e.trade_chart_type!==e.chart_type?e.chart_type=e.trade_chart_type:e.chart_type="mountain"}},{key:"initAccountCurrency",value:(c=Gs(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.processNewValuesAsync({currency:t},!0,{currency:this.currency},!1);case 2:this.refresh(),this.debouncedProposal();case 4:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"onUnmount",value:function(){this.disposeSwitchAccount(),this.is_trade_component_mounted=!1,this.refresh(),this.resetErrorServices(),this.restoreTradeChart(),window.history.pushState(null,null,window.location.pathname)}},{key:"is_symbol_in_active_symbols",get:function(){var e=this;return this.active_symbols.some(function(t){return t.symbol===e.symbol&&1===t.exchange_is_open})}}])&&hs(n.prototype,r),g&&hs(n,g),t}()).prototype,"is_trade_component_mounted",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vl=fs(Vl.prototype,"is_purchase_enabled",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wl=fs(Vl.prototype,"is_trade_enabled",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ul=fs(Vl.prototype,"is_equal",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Nl=fs(Vl.prototype,"symbol",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_l=fs(Vl.prototype,"is_market_closed",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Hl=fs(Vl.prototype,"previous_symbol",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),xl=fs(Vl.prototype,"active_symbols",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Rl=fs(Vl.prototype,"contract_expiry_type",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Yl=fs(Vl.prototype,"contract_start_type",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ol=fs(Vl.prototype,"contract_type",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Tl=fs(Vl.prototype,"contract_types_list",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Sl=fs(Vl.prototype,"form_components",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Jl=fs(Vl.prototype,"trade_types",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),El=fs(Vl.prototype,"amount",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),Dl=fs(Vl.prototype,"basis",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),wl=fs(Vl.prototype,"basis_list",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),kl=fs(Vl.prototype,"currency",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),zl=fs(Vl.prototype,"duration",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),jl=fs(Vl.prototype,"duration_unit",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ll=fs(Vl.prototype,"duration_units_list",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Pl=fs(Vl.prototype,"duration_min_max",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Kl=fs(Vl.prototype,"expiry_date",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ml=fs(Vl.prototype,"expiry_time",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ql=fs(Vl.prototype,"expiry_type",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"duration"}}),$l=fs(Vl.prototype,"barrier_1",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),es=fs(Vl.prototype,"barrier_2",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ts=fs(Vl.prototype,"barrier_count",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ns=fs(Vl.prototype,"start_date",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Number(0)}}),rs=fs(Vl.prototype,"start_dates_list",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gs=fs(Vl.prototype,"start_time",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cs=fs(Vl.prototype,"sessions",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),as=fs(Vl.prototype,"market_open_times",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),is=fs(Vl.prototype,"market_close_times",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),os=fs(Vl.prototype,"last_digit",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),Is=fs(Vl.prototype,"proposal_info",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ls=fs(Vl.prototype,"purchase_info",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ss=fs(Vl.prototype,"init",[$I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Gs(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,we.a.wait("authorize","website_status");case 2:Object(_e.action)(Gs(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe.b.activeSymbols().active_symbols;case 2:e.active_symbols=t.sent;case 3:case"end":return t.stop()}},t)})));case 3:case"end":return t.stop()}},t)}))}}),fs(Vl.prototype,"is_symbol_in_active_symbols",[_e.computed],Object.getOwnPropertyDescriptor(Vl.prototype,"is_symbol_in_active_symbols"),Vl.prototype),Cs=fs(Vl.prototype,"refresh",[el],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.proposal_info={},e.purchase_info={},e.proposal_requests={},Oe.b.forgetAll("proposal")}}}),us=fs(Vl.prototype,"clearContract",[tl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.root_store.modules.smart_chart.is_contract_mode&&e.root_store.modules.contract_trade.onCloseContract()}}}),fs(Vl.prototype,"setDefaultSymbol",[nl],Object.getOwnPropertyDescriptor(Vl.prototype,"setDefaultSymbol"),Vl.prototype),fs(Vl.prototype,"setActiveSymbols",[rl],Object.getOwnPropertyDescriptor(Vl.prototype,"setActiveSymbols"),Vl.prototype),fs(Vl.prototype,"setContractTypes",[gl],Object.getOwnPropertyDescriptor(Vl.prototype,"setContractTypes"),Vl.prototype),fs(Vl.prototype,"prepareTradeStore",[cl],Object.getOwnPropertyDescriptor(Vl.prototype,"prepareTradeStore"),Vl.prototype),fs(Vl.prototype,"onChangeMultiple",[al],Object.getOwnPropertyDescriptor(Vl.prototype,"onChangeMultiple"),Vl.prototype),fs(Vl.prototype,"onChange",[il],Object.getOwnPropertyDescriptor(Vl.prototype,"onChange"),Vl.prototype),fs(Vl.prototype,"setPreviousSymbol",[ol],Object.getOwnPropertyDescriptor(Vl.prototype,"setPreviousSymbol"),Vl.prototype),fs(Vl.prototype,"resetPreviousSymbol",[Il],Object.getOwnPropertyDescriptor(Vl.prototype,"resetPreviousSymbol"),Vl.prototype),fs(Vl.prototype,"onHoverPurchase",[ll],Object.getOwnPropertyDescriptor(Vl.prototype,"onHoverPurchase"),Vl.prototype),fs(Vl.prototype,"onPurchase",[sl],Object.getOwnPropertyDescriptor(Vl.prototype,"onPurchase"),Vl.prototype),fs(Vl.prototype,"updateStore",[Cl],Object.getOwnPropertyDescriptor(Vl.prototype,"updateStore"),Vl.prototype),fs(Vl.prototype,"clearPurchaseInfo",[ul],Object.getOwnPropertyDescriptor(Vl.prototype,"clearPurchaseInfo"),Vl.prototype),fs(Vl.prototype,"requestProposal",[Al],Object.getOwnPropertyDescriptor(Vl.prototype,"requestProposal"),Vl.prototype),fs(Vl.prototype,"setMarketStatus",[bl],Object.getOwnPropertyDescriptor(Vl.prototype,"setMarketStatus"),Vl.prototype),fs(Vl.prototype,"onProposalResponse",[dl],Object.getOwnPropertyDescriptor(Vl.prototype,"onProposalResponse"),Vl.prototype),fs(Vl.prototype,"onChartBarrierChange",[Bl],Object.getOwnPropertyDescriptor(Vl.prototype,"onChartBarrierChange"),Vl.prototype),fs(Vl.prototype,"onAllowEqualsChange",[pl],Object.getOwnPropertyDescriptor(Vl.prototype,"onAllowEqualsChange"),Vl.prototype),fs(Vl.prototype,"updateSymbol",[ml],Object.getOwnPropertyDescriptor(Vl.prototype,"updateSymbol"),Vl.prototype),fs(Vl.prototype,"changeDurationValidationRules",[yl],Object.getOwnPropertyDescriptor(Vl.prototype,"changeDurationValidationRules"),Vl.prototype),fs(Vl.prototype,"accountSwitcherListener",[Ql],Object.getOwnPropertyDescriptor(Vl.prototype,"accountSwitcherListener"),Vl.prototype),fs(Vl.prototype,"resetErrorServices",[Gl],Object.getOwnPropertyDescriptor(Vl.prototype,"resetErrorServices"),Vl.prototype),fs(Vl.prototype,"onMount",[Zl],Object.getOwnPropertyDescriptor(Vl.prototype,"onMount"),Vl.prototype),fs(Vl.prototype,"restoreTradeChart",[hl],Object.getOwnPropertyDescriptor(Vl.prototype,"restoreTradeChart"),Vl.prototype),fs(Vl.prototype,"initAccountCurrency",[Fl],Object.getOwnPropertyDescriptor(Vl.prototype,"initAccountCurrency"),Vl.prototype),fs(Vl.prototype,"onUnmount",[Xl],Object.getOwnPropertyDescriptor(Vl.prototype,"onUnmount"),Vl.prototype),Vl);var Us,Ns,_s,Hs,xs,Rs,Ys,Os,Ts,Ss,Js,Es,Ds,ws,ks,zs,js,Ls,Ps,Ks,Ms,qs,$s,eC,tC,nC,rC,gC,cC,aC,iC,oC,IC,lC,sC,CC,uC,AC,bC,dC,BC,pC,mC,yC,QC,GC,ZC,hC,FC,XC,VC,fC,vC,WC,UC,NC,_C,HC,xC,RC,YC,OC,TC,SC,JC,EC,DC=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cashier=new tg({root_store:t}),this.contract_replay=new Uc({root_store:t}),this.contract_trade=new ga({root_store:t}),this.portfolio=new Va({root_store:t}),this.profit_table=new fi({root_store:t}),this.smart_chart=new sI({root_store:t}),this.statement=new hI({root_store:t}),this.trade=new Ws({root_store:t})},wC=n(118),kC=n(242);function zC(e){return(zC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jC(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function LC(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function PC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KC(e){return(KC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qC(e,t){return(qC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $C(e,t,n,r,g){var c={};return Object.keys(r).forEach(function(e){c[e]=r[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},c),g&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(g):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null),c}var eu="ui_store",tu=(Us=_e.action.bound,Ns=_e.action.bound,_s=_e.action.bound,Hs=_e.action.bound,xs=_e.action.bound,Rs=_e.action.bound,Ys=_e.action.bound,Os=_e.action.bound,Ts=_e.action.bound,Ss=_e.action.bound,Js=_e.action.bound,Es=_e.action.bound,Ds=_e.action.bound,ws=_e.action.bound,ks=_e.action.bound,zs=_e.action.bound,js=_e.action.bound,Ls=_e.action.bound,Ps=_e.action.bound,Ks=_e.action.bound,Ms=_e.action.bound,qs=_e.action.bound,$s=_e.action.bound,eC=_e.action.bound,tC=_e.action.bound,nC=_e.action.bound,rC=_e.action.bound,gC=_e.action.bound,cC=_e.action.bound,aC=_e.action.bound,iC=_e.action.bound,oC=_e.action.bound,IC=_e.action.bound,sC=$C((lC=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n,r;return n=this,r=KC(t).call(this,{local_storage_properties:["advanced_duration_unit","is_advanced_duration","advanced_expiry_type","simple_duration_unit","duration_t","duration_s","duration_m","duration_h","duration_d","is_chart_asset_info_visible","is_chart_countdown_visible","is_chart_layout_default","is_dark_mode_on","is_positions_drawer_on","is_reports_visible"],store_name:eu}),LC(e=!r||"object"!==zC(r)&&"function"!=typeof r?MC(n):r,"is_main_drawer_on",sC,MC(e)),LC(e,"is_notifications_drawer_on",CC,MC(e)),LC(e,"is_positions_drawer_on",uC,MC(e)),LC(e,"is_reports_visible",AC,MC(e)),LC(e,"is_cashier_modal_on",bC,MC(e)),LC(e,"is_dark_mode_on",dC,MC(e)),LC(e,"is_settings_modal_on",BC,MC(e)),LC(e,"is_accounts_switcher_on",pC,MC(e)),LC(e,"has_only_forward_starting_contracts",mC,MC(e)),LC(e,"is_services_error_visible",yC,MC(e)),LC(e,"is_unsupported_contract_modal_visible",QC,MC(e)),LC(e,"is_account_signup_modal_visible",GC,MC(e)),LC(e,"is_chart_countdown_visible",ZC,MC(e)),LC(e,"is_chart_layout_default",hC,MC(e)),LC(e,"pwa_prompt_event",FC,MC(e)),LC(e,"screen_width",XC,MC(e)),LC(e,"notification_messages",VC,MC(e)),LC(e,"push_notifications",fC,MC(e)),LC(e,"is_advanced_duration",vC,MC(e)),LC(e,"advanced_duration_unit",WC,MC(e)),LC(e,"advanced_expiry_type",UC,MC(e)),LC(e,"simple_duration_unit",NC,MC(e)),LC(e,"duration_t",_C,MC(e)),LC(e,"duration_s",HC,MC(e)),LC(e,"duration_m",xC,MC(e)),LC(e,"duration_h",RC,MC(e)),LC(e,"duration_d",YC,MC(e)),LC(e,"purchase_states",OC,MC(e)),LC(e,"is_app_disabled",TC,MC(e)),LC(e,"is_route_modal_on",SC,MC(e)),LC(e,"show_positions_toggle",JC,MC(e)),LC(e,"active_cashier_tab",EC,MC(e)),e.getDurationFromUnit=function(t){return e["duration_".concat(t)]},window.addEventListener("resize",e.handleResize),Object(_e.autorun)(function(){e.is_dark_mode_on?(document.body.classList.remove("theme--light"),document.body.classList.add("theme--dark")):(document.body.classList.remove("theme--dark"),document.body.classList.add("theme--light"))}),e}var n,r,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qC(e,t)}(t,Gt),n=t,(r=[{key:"onChangeUiStore",value:function(e){var t=e.name,n=e.value;if(!(t in this))throw new Error("Invalid Argument: ".concat(t));this[t]=n}},{key:"handleResize",value:function(){this.screen_width=window.innerWidth,this.is_mobile&&(this.is_positions_drawer_on=!1)}},{key:"setRouteModal",value:function(){this.is_route_modal_on=!0}},{key:"disableRouteModal",value:function(){this.is_route_modal_on=!1}},{key:"disableApp",value:function(){this.is_app_disabled=!0}},{key:"enableApp",value:function(){this.is_app_disabled=!1}},{key:"toggleAccountsDialog",value:function(){this.is_accounts_switcher_on=!this.is_accounts_switcher_on}},{key:"setPurchaseState",value:function(e){this.purchase_states[e]=!0;var t=document.getElementsByClassName("btn-purchase");t[e]&&t[e].classList.add("btn-purchase--swoosh"),setTimeout(function(){[].forEach.bind(t,function(e){e.classList.add("btn-purchase--disabled")})()},250)}},{key:"resetPurchaseStates",value:function(){this.purchase_states=[!1,!1]}},{key:"toggleChartLayout",value:function(){this.is_chart_layout_default=!this.is_chart_layout_default}},{key:"toggleChartCountdown",value:function(){this.is_chart_countdown_visible=!this.is_chart_countdown_visible}},{key:"toggleDarkMode",value:function(){return this.is_dark_mode_on=!this.is_dark_mode_on,this.is_dark_mode_on}},{key:"showPositionsFooterToggle",value:function(){this.show_positions_toggle=!0}},{key:"hidePositionsFooterToggle",value:function(){this.show_positions_toggle=!1}},{key:"toggleCashierModal",value:function(e){/^(deposit|withdraw)$/.test(e)&&this.setCashierActiveTab(e),this.is_cashier_modal_on=!this.is_cashier_modal_on}},{key:"setCashierActiveTab",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"deposit";this.active_cashier_tab!==e&&(this.active_cashier_tab=e)}},{key:"toggleSettingsModal",value:function(){this.is_settings_modal_on=!this.is_settings_modal_on}},{key:"openPositionsDrawer",value:function(){this.is_positions_drawer_on=!0}},{key:"togglePositionsDrawer",value:function(){this.is_positions_drawer_on=!this.is_positions_drawer_on}},{key:"toggleReports",value:function(e){this.is_reports_visible=e}},{key:"toggleServicesErrorModal",value:function(e){this.is_services_error_visible=e}},{key:"showMainDrawer",value:function(){this.is_main_drawer_on=!0}},{key:"showNotificationsDrawer",value:function(){this.is_notifications_drawer_on=!0}},{key:"hideDrawers",value:function(){this.is_main_drawer_on=!1,this.is_notifications_drawer_on=!1}},{key:"removePWAPromptEvent",value:function(){this.pwa_prompt_event=null}},{key:"setPWAPromptEvent",value:function(e){this.pwa_prompt_event=e}},{key:"addNotification",value:function(e){this.notification_messages=[].concat(jC(this.notification_messages),[e]).sort(kC.c)}},{key:"removeNotification",value:function(e){var t=this.notification_messages.indexOf(e);t>-1&&this.notification_messages.splice(t,1)}},{key:"removeAllNotifications",value:function(){this.notification_messages=[]}},{key:"setHasOnlyForwardingContracts",value:function(e){this.has_only_forward_starting_contracts=e}},{key:"addNotificationBar",value:function(e){this.push_notifications.push(e),this.push_notifications=Object(ze.unique)(this.push_notifications,"msg_type")}},{key:"toggleUnsupportedContractModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.is_unsupported_contract_modal_visible;this.is_unsupported_contract_modal_visible=e}},{key:"toggleAccountSignupModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.is_unsupported_contract_modal_visible;this.is_account_signup_modal_visible=e}},{key:"is_mobile",get:function(){return this.screen_width<=wC.a}},{key:"is_tablet",get:function(){return this.screen_width<=wC.b}}])&&PC(n.prototype,r),g&&PC(n,g),t}()).prototype,"is_main_drawer_on",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),CC=$C(lC.prototype,"is_notifications_drawer_on",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),uC=$C(lC.prototype,"is_positions_drawer_on",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),AC=$C(lC.prototype,"is_reports_visible",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),bC=$C(lC.prototype,"is_cashier_modal_on",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),dC=$C(lC.prototype,"is_dark_mode_on",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),BC=$C(lC.prototype,"is_settings_modal_on",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pC=$C(lC.prototype,"is_accounts_switcher_on",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mC=$C(lC.prototype,"has_only_forward_starting_contracts",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yC=$C(lC.prototype,"is_services_error_visible",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),QC=$C(lC.prototype,"is_unsupported_contract_modal_visible",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),GC=$C(lC.prototype,"is_account_signup_modal_visible",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ZC=$C(lC.prototype,"is_chart_countdown_visible",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hC=$C(lC.prototype,"is_chart_layout_default",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),FC=$C(lC.prototype,"pwa_prompt_event",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),XC=$C(lC.prototype,"screen_width",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.innerWidth}}),VC=$C(lC.prototype,"notification_messages",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fC=$C(lC.prototype,"push_notifications",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),vC=$C(lC.prototype,"is_advanced_duration",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),WC=$C(lC.prototype,"advanced_duration_unit",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"t"}}),UC=$C(lC.prototype,"advanced_expiry_type",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"duration"}}),NC=$C(lC.prototype,"simple_duration_unit",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"t"}}),_C=$C(lC.prototype,"duration_t",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),HC=$C(lC.prototype,"duration_s",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),xC=$C(lC.prototype,"duration_m",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),RC=$C(lC.prototype,"duration_h",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),YC=$C(lC.prototype,"duration_d",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),OC=$C(lC.prototype,"purchase_states",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[!1,!1]}}),TC=$C(lC.prototype,"is_app_disabled",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),SC=$C(lC.prototype,"is_route_modal_on",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),JC=$C(lC.prototype,"show_positions_toggle",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),EC=$C(lC.prototype,"active_cashier_tab",[_e.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"deposit"}}),$C(lC.prototype,"onChangeUiStore",[Us],Object.getOwnPropertyDescriptor(lC.prototype,"onChangeUiStore"),lC.prototype),$C(lC.prototype,"handleResize",[Ns],Object.getOwnPropertyDescriptor(lC.prototype,"handleResize"),lC.prototype),$C(lC.prototype,"is_mobile",[_e.computed],Object.getOwnPropertyDescriptor(lC.prototype,"is_mobile"),lC.prototype),$C(lC.prototype,"is_tablet",[_e.computed],Object.getOwnPropertyDescriptor(lC.prototype,"is_tablet"),lC.prototype),$C(lC.prototype,"setRouteModal",[_s],Object.getOwnPropertyDescriptor(lC.prototype,"setRouteModal"),lC.prototype),$C(lC.prototype,"disableRouteModal",[Hs],Object.getOwnPropertyDescriptor(lC.prototype,"disableRouteModal"),lC.prototype),$C(lC.prototype,"disableApp",[xs],Object.getOwnPropertyDescriptor(lC.prototype,"disableApp"),lC.prototype),$C(lC.prototype,"enableApp",[Rs],Object.getOwnPropertyDescriptor(lC.prototype,"enableApp"),lC.prototype),$C(lC.prototype,"toggleAccountsDialog",[Ys],Object.getOwnPropertyDescriptor(lC.prototype,"toggleAccountsDialog"),lC.prototype),$C(lC.prototype,"setPurchaseState",[Os],Object.getOwnPropertyDescriptor(lC.prototype,"setPurchaseState"),lC.prototype),$C(lC.prototype,"resetPurchaseStates",[Ts],Object.getOwnPropertyDescriptor(lC.prototype,"resetPurchaseStates"),lC.prototype),$C(lC.prototype,"toggleChartLayout",[Ss],Object.getOwnPropertyDescriptor(lC.prototype,"toggleChartLayout"),lC.prototype),$C(lC.prototype,"toggleChartCountdown",[Js],Object.getOwnPropertyDescriptor(lC.prototype,"toggleChartCountdown"),lC.prototype),$C(lC.prototype,"toggleDarkMode",[Es],Object.getOwnPropertyDescriptor(lC.prototype,"toggleDarkMode"),lC.prototype),$C(lC.prototype,"showPositionsFooterToggle",[Ds],Object.getOwnPropertyDescriptor(lC.prototype,"showPositionsFooterToggle"),lC.prototype),$C(lC.prototype,"hidePositionsFooterToggle",[ws],Object.getOwnPropertyDescriptor(lC.prototype,"hidePositionsFooterToggle"),lC.prototype),$C(lC.prototype,"toggleCashierModal",[ks],Object.getOwnPropertyDescriptor(lC.prototype,"toggleCashierModal"),lC.prototype),$C(lC.prototype,"setCashierActiveTab",[zs],Object.getOwnPropertyDescriptor(lC.prototype,"setCashierActiveTab"),lC.prototype),$C(lC.prototype,"toggleSettingsModal",[js],Object.getOwnPropertyDescriptor(lC.prototype,"toggleSettingsModal"),lC.prototype),$C(lC.prototype,"openPositionsDrawer",[Ls],Object.getOwnPropertyDescriptor(lC.prototype,"openPositionsDrawer"),lC.prototype),$C(lC.prototype,"togglePositionsDrawer",[Ps],Object.getOwnPropertyDescriptor(lC.prototype,"togglePositionsDrawer"),lC.prototype),$C(lC.prototype,"toggleReports",[Ks],Object.getOwnPropertyDescriptor(lC.prototype,"toggleReports"),lC.prototype),$C(lC.prototype,"toggleServicesErrorModal",[Ms],Object.getOwnPropertyDescriptor(lC.prototype,"toggleServicesErrorModal"),lC.prototype),$C(lC.prototype,"showMainDrawer",[qs],Object.getOwnPropertyDescriptor(lC.prototype,"showMainDrawer"),lC.prototype),$C(lC.prototype,"showNotificationsDrawer",[$s],Object.getOwnPropertyDescriptor(lC.prototype,"showNotificationsDrawer"),lC.prototype),$C(lC.prototype,"hideDrawers",[eC],Object.getOwnPropertyDescriptor(lC.prototype,"hideDrawers"),lC.prototype),$C(lC.prototype,"removePWAPromptEvent",[tC],Object.getOwnPropertyDescriptor(lC.prototype,"removePWAPromptEvent"),lC.prototype),$C(lC.prototype,"setPWAPromptEvent",[nC],Object.getOwnPropertyDescriptor(lC.prototype,"setPWAPromptEvent"),lC.prototype),$C(lC.prototype,"addNotification",[rC],Object.getOwnPropertyDescriptor(lC.prototype,"addNotification"),lC.prototype),$C(lC.prototype,"removeNotification",[gC],Object.getOwnPropertyDescriptor(lC.prototype,"removeNotification"),lC.prototype),$C(lC.prototype,"removeAllNotifications",[cC],Object.getOwnPropertyDescriptor(lC.prototype,"removeAllNotifications"),lC.prototype),$C(lC.prototype,"setHasOnlyForwardingContracts",[aC],Object.getOwnPropertyDescriptor(lC.prototype,"setHasOnlyForwardingContracts"),lC.prototype),$C(lC.prototype,"addNotificationBar",[iC],Object.getOwnPropertyDescriptor(lC.prototype,"addNotificationBar"),lC.prototype),$C(lC.prototype,"toggleUnsupportedContractModal",[oC],Object.getOwnPropertyDescriptor(lC.prototype,"toggleUnsupportedContractModal"),lC.prototype),$C(lC.prototype,"toggleAccountSignupModal",[IC],Object.getOwnPropertyDescriptor(lC.prototype,"toggleAccountSignupModal"),lC.prototype),lC);var nu=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=new Sn(this),this.common=new gr,this.modules=new DC(this),this.ui=new tu,this.gtm=new Dr(this)};Object(_e.configure)({enforceActions:"observed"});var ru=function(){xe.a.init();var e=new nu;return function(e){window.addEventListener("storage",function(t){switch(t.key){case"active_loginid":document.hidden&&window.location.reload();break;case"verification_code":document.hidden&&e.ui.is_cashier_modal_on&&"withdraw"===e.ui.active_cashier_tab&&(e.modules.cashier.clearVerification(),e.ui.toggleCashierModal())}})}(e),Te.init(e),Se.init(e),e.client.init(),e.modules.trade.init(),e},gu=(n(517),"ontouchstart"in document.documentElement),cu=function(e){var t=e.root_store,r=window.location,g=r.pathname.split("/")[1];return a.a.createElement(I.a,{basename:/^\/br_|bot/.test(r.pathname)?"/".concat(g):null},a.a.createElement(l.a,{store:t},t.ui.is_mobile||t.ui.is_tablet&&gu?a.a.createElement(M.a,{ctor:function(){return n.e("work-in-progress").then(n.bind(null,658))},should_load:t.ui.is_mobile||t.ui.is_tablet&&gu,has_progress:!0}):a.a.createElement(a.a.Fragment,null,a.a.createElement(Xe,null),a.a.createElement(B,null,a.a.createElement(Z,null,a.a.createElement(Ne,null),a.a.createElement(M.a,{ctor:function(){return n.e("push-notification").then(n.bind(null,657))},should_load:!t.ui.is_loading,has_progress:!1}))),a.a.createElement(ge,null),a.a.createElement(M.a,{ctor:function(){return n.e("modals").then(n.bind(null,645))},should_load:!0,has_progress:!1}))))};cu.propTypes={root_store:g.a.object};var au=ru(),iu=document.getElementById("deriv_app");iu&&o.a.render(a.a.createElement(cu,{root_store:au}),iu),"serviceWorker"in navigator&&window.addEventListener("load",function(){var e=window.location.pathname;e=/index\.html/g.test(e)?window.location.pathname.replace("index.html",""):"";var t="".concat(e,"service-worker.js");navigator.serviceWorker.register(t).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})})},52:function(e,t,n){"use strict";var r=n(5),g=n.n(r),c=n(1),a=n.n(c),i=n(0),o=n.n(i),I=function(e){var t=e.children,n=e.className,r=e.header,c=e.is_center,a=e.onMouseEnter,i=e.onMouseLeave,I=g()("trade-container__fieldset-header",c?"center-text":""),l=g()("trade-container__fieldset-info",!c&&"trade-container__fieldset-info--left");return o.a.createElement("fieldset",{className:n,onMouseEnter:a,onMouseLeave:i},!!r&&o.a.createElement("div",{className:I},o.a.createElement("span",{className:l},r)),t)};I.propTypes={children:a.a.oneOfType([a.a.array,a.a.object]),className:a.a.string,header:a.a.string,onMouseEnter:a.a.func,onMouseLeave:a.a.func},t.a=I},53:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var r=n(33),g=n.n(r),c=n(4),a=function(e,t){var n=[];return(e.forward_starting_options||[]).length&&e.forward_starting_options.forEach(function(e){var t=n.find(function(t){return t.value===parseInt(e.date)}),r={open:Object(c.w)(e.open),close:Object(c.w)(e.close)};t?t.sessions.push(r):n.push({text:Object(c.w)(e.date).format("ddd - DD MMM, YYYY"),value:parseInt(e.date),sessions:[r]})}),n.length?n:t},i=function(e,t,n){var r=Object(c.w)(t);return n&&r.minute(0).second(0),e.isBefore(r)&&r.unix()!==e.unix()},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(c.w)(g.a.get()),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(c.w)(g.a.get()),r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!(i(t,g.a.get(),r)||i(t,n,r)||e.length&&!e.find(function(e){return t.isBetween(e.open,e.close,r?"hour":null,"[]")}))}},62:function(e,t,n){var r,g,c=n(120).website_name,a=n(26),i=n(107).getElementById,o=n(41).get,I=n(514).isMobile,l=n(21).isStorageSupported,s=n(21).LocalStore,C=n(32).urlForCurrentDomain,u=n(70).domain_app_ids,A=n(70).getAppId,b=(r=function(){var e=localStorage.getItem("config.server_url"),t=o(),n=s.get("signup_device")||(I()?"mobile":"desktop"),r=s.get("date_first_contact"),g="&signup_device=".concat(n).concat(r?"&date_first_contact=".concat(r):""),a="https://oauth.deriv.app/oauth2/authorize?app_id=".concat(A(),"&l=").concat(t).concat(g,"&brand=").concat(c.toLowerCase());return e&&/qa/.test(e)?"https://".concat(e,"/oauth2/authorize?app_id=").concat(A(),"&l=").concat(t).concat(g,"&brand=").concat(c.toLowerCase()):A===u["deriv.app"]?a:C(a)},{redirectToLogin:function(){a.isLoggedIn()||g()||!l(sessionStorage)||(sessionStorage.setItem("redirect_url",window.location.href),window.location.href=r())},isLoginPages:g=function(){return/logged_inws|redirect/i.test(window.location.pathname)},initOneAll:function(){["google","facebook"].forEach(function(e){var t=i("#button_".concat(e));t.removeEventListener("click"),t.addEventListener("click",function(t){var n;t.preventDefault(),window.location.href=(n=e,"".concat(r(),"&social_signup=").concat(n))})})}});e.exports=b},63:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i});var r=n(20);function g(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(e){return/digit/i.test(e)},i=function(e,t){var n=t.tick_stream,a=Object(r.g)(n),i=a.tick_display_value,I=a.epoch;return i&&I?function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};g(n,!0).forEach(function(t){c(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):g(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({},I in e?{}:o(i,I)):{}},o=function(e,t){return c({},+t,{digit:+"".concat(e).slice(-1),spot:e})}},65:function(e,t,n){},7:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=n(94);n(501);var c,a=function(e){var t=!0;return e&&e instanceof Object&&Object.keys(e).forEach(function(n){Object.prototype.hasOwnProperty.call(e,n)&&(t=!1)}),t},i=function(e){return a(e)?e:g(!0,Array.isArray(e)?[]:{},e)},o=function(e,t){return r(e)===r(t)&&(Array.isArray(e)?I(e,t):e&&t&&"object"===r(e)?l(e,t):e===t)},I=function(e,t){return e===t||e.length===t.length&&e.every(function(e,n){return o(e,t[n])})},l=function(e,t){return e===t||Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(function(n){return o(e[n],t[n])})};e.exports={template:function(e,t){var n=t;return t&&!Array.isArray(t)&&(n=[t]),e.replace(/\[_(\d+)]/g,function(e,t){return n[+t-1]})},isEmptyObject:a,cloneObject:i,isDeepEqual:o,unique:function(e,t){return e.filter(function(n,r){return e.findIndex(function(e,g){return e[t]?e[t]===n[t]:g===r})===r})},getPropertyValue:function e(t,n){var r=n;return Array.isArray(r)||(r=[r]),!a(t)&&r[0]in t&&r&&r.length>1?e(t[r[0]],r.slice(1)):t?i(t[r[0]]):void 0},createElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement(e);return Object.keys(t).forEach(function(e){var r=t[e];"text"===e?n.textContent=r:"html"===e?n.html(r):n.setAttribute(e,r)}),n},getStaticHash:function(){return c=c||(document.querySelector('script[src*="main"]').getAttribute("src")||"").split(".")[1]},PromiseClass:function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promise=new Promise(function(e,n){t.reject=n,t.resolve=e})}}},70:function(e,t){var n={"deriv.app":16929},r=function(){return!/^staging\./.test(window.location.hostname)&&Object.keys(n).find(function(e){return new RegExp(".".concat(e,"$"),"i").test(window.location.hostname)})},g=function(){var e=Object.keys(n).map(function(e){return"www\\.".concat(e.replace(".","\\."))});return new RegExp("^(".concat(e.join("|"),")$"),"i").test(window.location.hostname)};e.exports={domain_app_ids:n,getCurrentProductionDomain:r,isProduction:g,getAppId:function(){var e=null,t=window.localStorage.getItem("config.app_id");if(t)e=t;else if(/desktop-app/i.test(window.location.href)||window.localStorage.getItem("config.is_desktop_app"))window.localStorage.removeItem("config.default_app_id"),window.localStorage.setItem("config.is_desktop_app",1),e=14473;else if("".length)window.localStorage.setItem("config.default_app_id",""),e="";else if(/staging\.deriv\.app/i.test(window.location.hostname))window.localStorage.removeItem("config.default_app_id"),e=16303;else if(/localhost/i.test(window.location.hostname))e=17044;else{window.localStorage.removeItem("config.default_app_id");var g=r();e=n[g]||16929}return e},getSocketURL:function(){var e=window.localStorage.getItem("config.server_url");if(!e){var t=window.localStorage.getItem("active_loginid"),n=t&&!/^VRT/.test(t),r=g()&&n?"green":"blue";e="".concat(r,".binaryws.com")}return"wss://".concat(e,"/websockets/v3")}}},71:function(module,exports,__webpack_require__){var I;window,I=function(__WEBPACK_EXTERNAL_MODULE__0__,__WEBPACK_EXTERNAL_MODULE__6__){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var g=t[r]={i:r,l:!1,exports:{}};return e[r].call(g.exports,g,g.exports,n),g.l=!0,g.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var g in e)n.d(r,g,function(t){return e[t]}.bind(null,g));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}({0:function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__0__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vZXh0ZXJuYWwge1wicm9vdFwiOlwiUmVhY3RcIixcImNvbW1vbmpzXCI6XCJyZWFjdFwiLFwiY29tbW9uanMyXCI6XCJyZWFjdFwifT82MWRlIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fOyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")},1:function(module,exports,__webpack_require__){eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (false) { var throwOnDirectAccess, ReactIs; } else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = __webpack_require__(4)();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qcz9kN2JjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdmFyIFJlYWN0SXMgPSByZXF1aXJlKCdyZWFjdC1pcycpO1xuXG4gIC8vIEJ5IGV4cGxpY2l0bHkgdXNpbmcgYHByb3AtdHlwZXNgIHlvdSBhcmUgb3B0aW5nIGludG8gbmV3IGRldmVsb3BtZW50IGJlaGF2aW9yLlxuICAvLyBodHRwOi8vZmIubWUvcHJvcC10eXBlcy1pbi1wcm9kXG4gIHZhciB0aHJvd09uRGlyZWN0QWNjZXNzID0gdHJ1ZTtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2ZhY3RvcnlXaXRoVHlwZUNoZWNrZXJzJykoUmVhY3RJcy5pc0VsZW1lbnQsIHRocm93T25EaXJlY3RBY2Nlc3MpO1xufSBlbHNlIHtcbiAgLy8gQnkgZXhwbGljaXRseSB1c2luZyBgcHJvcC10eXBlc2AgeW91IGFyZSBvcHRpbmcgaW50byBuZXcgcHJvZHVjdGlvbiBiZWhhdmlvci5cbiAgLy8gaHR0cDovL2ZiLm1lL3Byb3AtdHlwZXMtaW4tcHJvZFxuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vZmFjdG9yeVdpdGhUaHJvd2luZ1NoaW1zJykoKTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n")},2:function(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif ( true && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (true) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n\t\t\treturn classNames;\n\t\t}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else {}\n}());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcz80ZDI2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTcgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykgJiYgYXJnLmxlbmd0aCkge1xuXHRcdFx0XHR2YXIgaW5uZXIgPSBjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZyk7XG5cdFx0XHRcdGlmIChpbm5lcikge1xuXHRcdFx0XHRcdGNsYXNzZXMucHVzaChpbm5lcik7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdGNsYXNzTmFtZXMuZGVmYXVsdCA9IGNsYXNzTmFtZXM7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQSxVQUVBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n")},29:function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n    if(false) { var cssReload; }\n  //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvcG9wb3Zlci9wb3BvdmVyLnNjc3M/ZWVkNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbiAgICBpZihtb2R1bGUuaG90KSB7XG4gICAgICAvLyAxNTY3NTA5NzczOTM1XG4gICAgICB2YXIgY3NzUmVsb2FkID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWhvdC1sb2FkZXIvaG90TW9kdWxlUmVwbGFjZW1lbnQuanNcIikobW9kdWxlLmlkLCB7XCJmaWxlTWFwXCI6XCJ7ZmlsZU5hbWV9XCJ9KTtcbiAgICAgIG1vZHVsZS5ob3QuZGlzcG9zZShjc3NSZWxvYWQpO1xuICAgICAgbW9kdWxlLmhvdC5hY2NlcHQodW5kZWZpbmVkLCBjc3NSZWxvYWQpOztcbiAgICB9XG4gICJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxnQ0FLQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///29\n")},4:function(module,exports,__webpack_require__){"use strict";eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = __webpack_require__(5);\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9mYWN0b3J5V2l0aFRocm93aW5nU2hpbXMuanM/ZDdhMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gcmVxdWlyZSgnLi9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQnKTtcblxuZnVuY3Rpb24gZW1wdHlGdW5jdGlvbigpIHt9XG5mdW5jdGlvbiBlbXB0eUZ1bmN0aW9uV2l0aFJlc2V0KCkge31cbmVtcHR5RnVuY3Rpb25XaXRoUmVzZXQucmVzZXRXYXJuaW5nQ2FjaGUgPSBlbXB0eUZ1bmN0aW9uO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBzaGltKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwgc2VjcmV0KSB7XG4gICAgaWYgKHNlY3JldCA9PT0gUmVhY3RQcm9wVHlwZXNTZWNyZXQpIHtcbiAgICAgIC8vIEl0IGlzIHN0aWxsIHNhZmUgd2hlbiBjYWxsZWQgZnJvbSBSZWFjdC5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcihcbiAgICAgICdDYWxsaW5nIFByb3BUeXBlcyB2YWxpZGF0b3JzIGRpcmVjdGx5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGBwcm9wLXR5cGVzYCBwYWNrYWdlLiAnICtcbiAgICAgICdVc2UgUHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzKCkgdG8gY2FsbCB0aGVtLiAnICtcbiAgICAgICdSZWFkIG1vcmUgYXQgaHR0cDovL2ZiLm1lL3VzZS1jaGVjay1wcm9wLXR5cGVzJ1xuICAgICk7XG4gICAgZXJyLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7XG4gICAgdGhyb3cgZXJyO1xuICB9O1xuICBzaGltLmlzUmVxdWlyZWQgPSBzaGltO1xuICBmdW5jdGlvbiBnZXRTaGltKCkge1xuICAgIHJldHVybiBzaGltO1xuICB9O1xuICAvLyBJbXBvcnRhbnQhXG4gIC8vIEtlZXAgdGhpcyBsaXN0IGluIHN5bmMgd2l0aCBwcm9kdWN0aW9uIHZlcnNpb24gaW4gYC4vZmFjdG9yeVdpdGhUeXBlQ2hlY2tlcnMuanNgLlxuICB2YXIgUmVhY3RQcm9wVHlwZXMgPSB7XG4gICAgYXJyYXk6IHNoaW0sXG4gICAgYm9vbDogc2hpbSxcbiAgICBmdW5jOiBzaGltLFxuICAgIG51bWJlcjogc2hpbSxcbiAgICBvYmplY3Q6IHNoaW0sXG4gICAgc3RyaW5nOiBzaGltLFxuICAgIHN5bWJvbDogc2hpbSxcblxuICAgIGFueTogc2hpbSxcbiAgICBhcnJheU9mOiBnZXRTaGltLFxuICAgIGVsZW1lbnQ6IHNoaW0sXG4gICAgZWxlbWVudFR5cGU6IHNoaW0sXG4gICAgaW5zdGFuY2VPZjogZ2V0U2hpbSxcbiAgICBub2RlOiBzaGltLFxuICAgIG9iamVjdE9mOiBnZXRTaGltLFxuICAgIG9uZU9mOiBnZXRTaGltLFxuICAgIG9uZU9mVHlwZTogZ2V0U2hpbSxcbiAgICBzaGFwZTogZ2V0U2hpbSxcbiAgICBleGFjdDogZ2V0U2hpbSxcblxuICAgIGNoZWNrUHJvcFR5cGVzOiBlbXB0eUZ1bmN0aW9uV2l0aFJlc2V0LFxuICAgIHJlc2V0V2FybmluZ0NhY2hlOiBlbXB0eUZ1bmN0aW9uXG4gIH07XG5cbiAgUmVhY3RQcm9wVHlwZXMuUHJvcFR5cGVzID0gUmVhY3RQcm9wVHlwZXM7XG5cbiAgcmV0dXJuIFJlYWN0UHJvcFR5cGVzO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n")},5:function(module,exports,__webpack_require__){"use strict";eval("/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQuanM/NTliMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJztcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFByb3BUeXBlc1NlY3JldDtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n")},6:function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__6__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcInJlYWN0LWRvbVwiLFwiY29tbW9uanMyXCI6XCJyZWFjdC1kb21cIixcInJvb3RcIjpcIlJlYWN0RE9NXCJ9PzJjYTEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX182X187Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6\n")},8:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./src/components/popover/popover.scss\nvar popover = __webpack_require__(29);\n\n// EXTERNAL MODULE: ./node_modules/classnames/index.js\nvar classnames = __webpack_require__(2);\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// EXTERNAL MODULE: ./node_modules/prop-types/index.js\nvar prop_types = __webpack_require__(1);\nvar prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);\n\n// EXTERNAL MODULE: external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\"}\nvar external_root_React_commonjs_react_commonjs2_react_ = __webpack_require__(0);\nvar external_root_React_commonjs_react_commonjs2_react_default = /*#__PURE__*/__webpack_require__.n(external_root_React_commonjs_react_commonjs2_react_);\n\n// EXTERNAL MODULE: external {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"root\":\"ReactDOM\"}\nvar external_commonjs_react_dom_commonjs2_react_dom_root_ReactDOM_ = __webpack_require__(6);\nvar external_commonjs_react_dom_commonjs2_react_dom_root_ReactDOM_default = /*#__PURE__*/__webpack_require__.n(external_commonjs_react_dom_commonjs2_react_dom_root_ReactDOM_);\n\n// CONCATENATED MODULE: ./node_modules/tslib/tslib.es6.js\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nfunction __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nfunction __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nfunction __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nfunction __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nfunction __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nfunction __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nfunction __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\n// CONCATENATED MODULE: ./node_modules/style-value-types/dist/style-value-types.es.js\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar style_value_types_es_assign = function() {\r\n    style_value_types_es_assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return style_value_types_es_assign.apply(this, arguments);\r\n};\n\nvar style_value_types_es_clamp = function (min, max) { return function (v) {\r\n    return Math.max(Math.min(v, max), min);\r\n}; };\r\nvar sanitize = function (v) { return (v % 1 ? Number(v.toFixed(5)) : v); };\r\nvar floatRegex = /(-)?(\\d[\\d\\.]*)/g;\r\nvar colorRegex = /(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))/gi;\r\nvar singleColorRegex = /^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))$/i;\n\nvar number = {\r\n    test: function (v) { return typeof v === 'number'; },\r\n    parse: parseFloat,\r\n    transform: function (v) { return v; }\r\n};\r\nvar alpha = style_value_types_es_assign({}, number, { transform: style_value_types_es_clamp(0, 1) });\r\nvar style_value_types_es_scale = style_value_types_es_assign({}, number, { default: 1 });\n\nvar createUnitType = function (unit) { return ({\r\n    test: function (v) {\r\n        return typeof v === 'string' && v.endsWith(unit) && v.split(' ').length === 1;\r\n    },\r\n    parse: parseFloat,\r\n    transform: function (v) { return \"\" + v + unit; }\r\n}); };\r\nvar degrees = createUnitType('deg');\r\nvar percent = createUnitType('%');\r\nvar px = createUnitType('px');\r\nvar vh = createUnitType('vh');\r\nvar vw = createUnitType('vw');\r\nvar progressPercentage = style_value_types_es_assign({}, percent, { parse: function (v) { return percent.parse(v) / 100; }, transform: function (v) { return percent.transform(v * 100); } });\n\nvar getValueFromFunctionString = function (value) {\r\n    return value.substring(value.indexOf('(') + 1, value.lastIndexOf(')'));\r\n};\r\nvar clampRgbUnit = style_value_types_es_clamp(0, 255);\r\nvar isRgba = function (v) { return v.red !== undefined; };\r\nvar isHsla = function (v) { return v.hue !== undefined; };\r\nvar splitColorValues = function (terms) {\r\n    return function (v) {\r\n        if (typeof v !== 'string')\r\n            return v;\r\n        var values = {};\r\n        var valuesArray = getValueFromFunctionString(v).split(/,\\s*/);\r\n        for (var i = 0; i < 4; i++) {\r\n            values[terms[i]] =\r\n                valuesArray[i] !== undefined ? parseFloat(valuesArray[i]) : 1;\r\n        }\r\n        return values;\r\n    };\r\n};\r\nvar rgbaTemplate = function (_a) {\r\n    var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n    return \"rgba(\" + red + \", \" + green + \", \" + blue + \", \" + alpha$$1 + \")\";\r\n};\r\nvar hslaTemplate = function (_a) {\r\n    var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n    return \"hsla(\" + hue + \", \" + saturation + \", \" + lightness + \", \" + alpha$$1 + \")\";\r\n};\r\nvar rgbUnit = style_value_types_es_assign({}, number, { transform: function (v) { return Math.round(clampRgbUnit(v)); } });\r\nfunction isColorString(color, colorType) {\r\n    return color.startsWith(colorType) && singleColorRegex.test(color);\r\n}\r\nvar rgba = {\r\n    test: function (v) { return (typeof v === 'string' ? isColorString(v, 'rgb') : isRgba(v)); },\r\n    parse: splitColorValues(['red', 'green', 'blue', 'alpha']),\r\n    transform: function (_a) {\r\n        var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n        return rgbaTemplate({\r\n            red: rgbUnit.transform(red),\r\n            green: rgbUnit.transform(green),\r\n            blue: rgbUnit.transform(blue),\r\n            alpha: sanitize(alpha.transform(alpha$$1))\r\n        });\r\n    }\r\n};\r\nvar hsla = {\r\n    test: function (v) { return (typeof v === 'string' ? isColorString(v, 'hsl') : isHsla(v)); },\r\n    parse: splitColorValues(['hue', 'saturation', 'lightness', 'alpha']),\r\n    transform: function (_a) {\r\n        var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n        return hslaTemplate({\r\n            hue: Math.round(hue),\r\n            saturation: percent.transform(sanitize(saturation)),\r\n            lightness: percent.transform(sanitize(lightness)),\r\n            alpha: sanitize(alpha.transform(alpha$$1))\r\n        });\r\n    }\r\n};\r\nvar hex = style_value_types_es_assign({}, rgba, { test: function (v) { return typeof v === 'string' && isColorString(v, '#'); }, parse: function (v) {\r\n        var r = '';\r\n        var g = '';\r\n        var b = '';\r\n        if (v.length > 4) {\r\n            r = v.substr(1, 2);\r\n            g = v.substr(3, 2);\r\n            b = v.substr(5, 2);\r\n        }\r\n        else {\r\n            r = v.substr(1, 1);\r\n            g = v.substr(2, 1);\r\n            b = v.substr(3, 1);\r\n            r += r;\r\n            g += g;\r\n            b += b;\r\n        }\r\n        return {\r\n            red: parseInt(r, 16),\r\n            green: parseInt(g, 16),\r\n            blue: parseInt(b, 16),\r\n            alpha: 1\r\n        };\r\n    } });\r\nvar color = {\r\n    test: function (v) {\r\n        return (typeof v === 'string' && singleColorRegex.test(v)) ||\r\n            isRgba(v) ||\r\n            isHsla(v);\r\n    },\r\n    parse: function (v) {\r\n        if (rgba.test(v)) {\r\n            return rgba.parse(v);\r\n        }\r\n        else if (hsla.test(v)) {\r\n            return hsla.parse(v);\r\n        }\r\n        else if (hex.test(v)) {\r\n            return hex.parse(v);\r\n        }\r\n        return v;\r\n    },\r\n    transform: function (v) {\r\n        if (isRgba(v)) {\r\n            return rgba.transform(v);\r\n        }\r\n        else if (isHsla(v)) {\r\n            return hsla.transform(v);\r\n        }\r\n        return v;\r\n    }\r\n};\n\nvar COLOR_TOKEN = '${c}';\r\nvar NUMBER_TOKEN = '${n}';\r\nvar convertNumbersToZero = function (v) {\r\n    return typeof v === 'number' ? 0 : v;\r\n};\r\nvar complex = {\r\n    test: function (v) {\r\n        if (typeof v !== 'string' || !isNaN(v))\r\n            return false;\r\n        var numValues = 0;\r\n        var foundNumbers = v.match(floatRegex);\r\n        var foundColors = v.match(colorRegex);\r\n        if (foundNumbers)\r\n            numValues += foundNumbers.length;\r\n        if (foundColors)\r\n            numValues += foundColors.length;\r\n        return numValues > 0;\r\n    },\r\n    parse: function (v) {\r\n        var input = v;\r\n        var parsed = [];\r\n        var foundColors = input.match(colorRegex);\r\n        if (foundColors) {\r\n            input = input.replace(colorRegex, COLOR_TOKEN);\r\n            parsed.push.apply(parsed, foundColors.map(color.parse));\r\n        }\r\n        var foundNumbers = input.match(floatRegex);\r\n        if (foundNumbers) {\r\n            parsed.push.apply(parsed, foundNumbers.map(number.parse));\r\n        }\r\n        return parsed;\r\n    },\r\n    createTransformer: function (prop) {\r\n        var template = prop;\r\n        var token = 0;\r\n        var foundColors = prop.match(colorRegex);\r\n        var numColors = foundColors ? foundColors.length : 0;\r\n        if (foundColors) {\r\n            for (var i = 0; i < numColors; i++) {\r\n                template = template.replace(foundColors[i], COLOR_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        var foundNumbers = template.match(floatRegex);\r\n        var numNumbers = foundNumbers ? foundNumbers.length : 0;\r\n        if (foundNumbers) {\r\n            for (var i = 0; i < numNumbers; i++) {\r\n                template = template.replace(foundNumbers[i], NUMBER_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        return function (v) {\r\n            var output = template;\r\n            for (var i = 0; i < token; i++) {\r\n                output = output.replace(i < numColors ? COLOR_TOKEN : NUMBER_TOKEN, i < numColors ? color.transform(v[i]) : sanitize(v[i]));\r\n            }\r\n            return output;\r\n        };\r\n    },\r\n    getAnimatableNone: function (target) {\r\n        var parsedTarget = complex.parse(target);\r\n        var targetTransformer = complex.createTransformer(target);\r\n        return targetTransformer(parsedTarget.map(convertNumbersToZero));\r\n    }\r\n};\n\n\n\n// CONCATENATED MODULE: ./node_modules/hey-listen/dist/hey-listen.es.js\nvar warning = function () { };\r\nvar invariant = function () { };\r\nif (false) {}\n\n\n\n// CONCATENATED MODULE: ./node_modules/framesync/dist/framesync.es.js\n\n\nvar prevTime = 0;\r\nvar onNextFrame = typeof window !== 'undefined' && window.requestAnimationFrame !== undefined\r\n    ? function (callback) { return window.requestAnimationFrame(callback); }\r\n    : function (callback) {\r\n        var timestamp = Date.now();\r\n        var timeToCall = Math.max(0, 16.7 - (timestamp - prevTime));\r\n        prevTime = timestamp + timeToCall;\r\n        setTimeout(function () { return callback(prevTime); }, timeToCall);\r\n    };\n\nvar createStep = (function (setRunNextFrame) {\r\n    var processToRun = [];\r\n    var processToRunNextFrame = [];\r\n    var numThisFrame = 0;\r\n    var isProcessing = false;\r\n    var i = 0;\r\n    var cancelled = new WeakSet();\r\n    var toKeepAlive = new WeakSet();\r\n    var renderStep = {\r\n        cancel: function (process) {\r\n            var indexOfCallback = processToRunNextFrame.indexOf(process);\r\n            cancelled.add(process);\r\n            if (indexOfCallback !== -1) {\r\n                processToRunNextFrame.splice(indexOfCallback, 1);\r\n            }\r\n        },\r\n        process: function (frame) {\r\n            var _a;\r\n            isProcessing = true;\r\n            _a = [\r\n                processToRunNextFrame,\r\n                processToRun\r\n            ], processToRun = _a[0], processToRunNextFrame = _a[1];\r\n            processToRunNextFrame.length = 0;\r\n            numThisFrame = processToRun.length;\r\n            if (numThisFrame) {\r\n                var process_1;\r\n                for (i = 0; i < numThisFrame; i++) {\r\n                    process_1 = processToRun[i];\r\n                    process_1(frame);\r\n                    if (toKeepAlive.has(process_1) === true && !cancelled.has(process_1)) {\r\n                        renderStep.schedule(process_1);\r\n                        setRunNextFrame(true);\r\n                    }\r\n                }\r\n            }\r\n            isProcessing = false;\r\n        },\r\n        schedule: function (process, keepAlive, immediate) {\r\n            if (keepAlive === void 0) { keepAlive = false; }\r\n            if (immediate === void 0) { immediate = false; }\r\n            invariant(typeof process === 'function', 'Argument must be a function');\r\n            var addToCurrentBuffer = immediate && isProcessing;\r\n            var buffer = addToCurrentBuffer ? processToRun : processToRunNextFrame;\r\n            cancelled.delete(process);\r\n            if (keepAlive)\r\n                toKeepAlive.add(process);\r\n            if (buffer.indexOf(process) === -1) {\r\n                buffer.push(process);\r\n                if (addToCurrentBuffer)\r\n                    numThisFrame = processToRun.length;\r\n            }\r\n        }\r\n    };\r\n    return renderStep;\r\n});\n\nvar StepId;\r\n(function (StepId) {\r\n    StepId[\"Read\"] = \"read\";\r\n    StepId[\"Update\"] = \"update\";\r\n    StepId[\"Render\"] = \"render\";\r\n    StepId[\"PostRender\"] = \"postRender\";\r\n    StepId[\"FixedUpdate\"] = \"fixedUpdate\";\r\n})(StepId || (StepId = {}));\n\nvar maxElapsed = 40;\r\nvar defaultElapsed = (1 / 60) * 1000;\r\nvar useDefaultElapsed = true;\r\nvar willRunNextFrame = false;\r\nvar framesync_es_isProcessing = false;\r\nvar framesync_es_frame = {\r\n    delta: 0,\r\n    timestamp: 0\r\n};\r\nvar stepsOrder = [\r\n    StepId.Read,\r\n    StepId.Update,\r\n    StepId.Render,\r\n    StepId.PostRender\r\n];\r\nvar setWillRunNextFrame = function (willRun) { return (willRunNextFrame = willRun); };\r\nvar framesync_es_a = stepsOrder.reduce(function (acc, key) {\r\n    var step = createStep(setWillRunNextFrame);\r\n    acc.sync[key] = function (process, keepAlive, immediate) {\r\n        if (keepAlive === void 0) { keepAlive = false; }\r\n        if (immediate === void 0) { immediate = false; }\r\n        if (!willRunNextFrame)\r\n            startLoop();\r\n        step.schedule(process, keepAlive, immediate);\r\n        return process;\r\n    };\r\n    acc.cancelSync[key] = function (process) { return step.cancel(process); };\r\n    acc.steps[key] = step;\r\n    return acc;\r\n}, {\r\n    steps: {},\r\n    sync: {},\r\n    cancelSync: {}\r\n}), steps = framesync_es_a.steps, sync = framesync_es_a.sync, cancelSync = framesync_es_a.cancelSync;\r\nvar processStep = function (stepId) { return steps[stepId].process(framesync_es_frame); };\r\nvar processFrame = function (timestamp) {\r\n    willRunNextFrame = false;\r\n    framesync_es_frame.delta = useDefaultElapsed\r\n        ? defaultElapsed\r\n        : Math.max(Math.min(timestamp - framesync_es_frame.timestamp, maxElapsed), 1);\r\n    if (!useDefaultElapsed)\r\n        defaultElapsed = framesync_es_frame.delta;\r\n    framesync_es_frame.timestamp = timestamp;\r\n    framesync_es_isProcessing = true;\r\n    stepsOrder.forEach(processStep);\r\n    framesync_es_isProcessing = false;\r\n    if (willRunNextFrame) {\r\n        useDefaultElapsed = false;\r\n        onNextFrame(processFrame);\r\n    }\r\n};\r\nvar startLoop = function () {\r\n    willRunNextFrame = true;\r\n    useDefaultElapsed = true;\r\n    if (!framesync_es_isProcessing)\r\n        onNextFrame(processFrame);\r\n};\r\nvar getFrameData = function () { return framesync_es_frame; };\n\n/* harmony default export */ var framesync_es = (sync);\n\n\n// CONCATENATED MODULE: ./node_modules/@popmotion/easing/dist/easing.es.js\nvar DEFAULT_OVERSHOOT_STRENGTH = 1.525;\nvar reversed = function (easing) {\n    return function (p) {\n        return 1 - easing(1 - p);\n    };\n};\nvar mirrored = function (easing) {\n    return function (p) {\n        return p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\n    };\n};\nvar createReversedEasing = reversed;\nvar createMirroredEasing = mirrored;\nvar createExpoIn = function (power) {\n    return function (p) {\n        return Math.pow(p, power);\n    };\n};\nvar createBackIn = function (power) {\n    return function (p) {\n        return p * p * ((power + 1) * p - power);\n    };\n};\nvar createAnticipateEasing = function (power) {\n    var backEasing = createBackIn(power);\n    return function (p) {\n        return (p *= 2) < 1 ? 0.5 * backEasing(p) : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\n    };\n};\nvar linear = function (p) {\n    return p;\n};\nvar easeIn = /*#__PURE__*/createExpoIn(2);\nvar easeOut = /*#__PURE__*/reversed(easeIn);\nvar easeInOut = /*#__PURE__*/mirrored(easeIn);\nvar circIn = function (p) {\n    return 1 - Math.sin(Math.acos(p));\n};\nvar circOut = /*#__PURE__*/reversed(circIn);\nvar circInOut = /*#__PURE__*/mirrored(circOut);\nvar backIn = /*#__PURE__*/createBackIn(DEFAULT_OVERSHOOT_STRENGTH);\nvar backOut = /*#__PURE__*/reversed(backIn);\nvar backInOut = /*#__PURE__*/mirrored(backIn);\nvar anticipate = /*#__PURE__*/createAnticipateEasing(DEFAULT_OVERSHOOT_STRENGTH);\nvar BOUNCE_FIRST_THRESHOLD = 4.0 / 11.0;\nvar BOUNCE_SECOND_THRESHOLD = 8.0 / 11.0;\nvar BOUNCE_THIRD_THRESHOLD = 9.0 / 10.0;\nvar ca = 4356.0 / 361.0;\nvar cb = 35442.0 / 1805.0;\nvar cc = 16061.0 / 1805.0;\nvar bounceOut = function (p) {\n    var p2 = p * p;\n    return p < BOUNCE_FIRST_THRESHOLD ? 7.5625 * p2 : p < BOUNCE_SECOND_THRESHOLD ? 9.075 * p2 - 9.9 * p + 3.4 : p < BOUNCE_THIRD_THRESHOLD ? ca * p2 - cb * p + cc : 10.8 * p * p - 20.52 * p + 10.72;\n};\nvar bounceIn = function (p) {\n    return 1.0 - bounceOut(1.0 - p);\n};\nvar bounceInOut = function (p) {\n    return p < 0.5 ? 0.5 * (1.0 - bounceOut(1.0 - p * 2.0)) : 0.5 * bounceOut(p * 2.0 - 1.0) + 0.5;\n};\nvar NEWTON_ITERATIONS = 8;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\nvar K_SPLINE_TABLE_SIZE = 11;\nvar K_SAMPLE_STEP_SIZE = 1.0 / (K_SPLINE_TABLE_SIZE - 1.0);\nvar FLOAT_32_SUPPORTED = typeof Float32Array !== 'undefined';\nvar easing_es_a = function (a1, a2) {\n    return 1.0 - 3.0 * a2 + 3.0 * a1;\n};\nvar easing_es_b = function (a1, a2) {\n    return 3.0 * a2 - 6.0 * a1;\n};\nvar c = function (a1) {\n    return 3.0 * a1;\n};\nvar getSlope = function (t, a1, a2) {\n    return 3.0 * easing_es_a(a1, a2) * t * t + 2.0 * easing_es_b(a1, a2) * t + c(a1);\n};\nvar calcBezier = function (t, a1, a2) {\n    return ((easing_es_a(a1, a2) * t + easing_es_b(a1, a2)) * t + c(a1)) * t;\n};\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\n    var sampleValues = FLOAT_32_SUPPORTED ? new Float32Array(K_SPLINE_TABLE_SIZE) : new Array(K_SPLINE_TABLE_SIZE);\n    var binarySubdivide = function (aX, aA, aB) {\n        var i = 0;\n        var currentX;\n        var currentT;\n        do {\n            currentT = aA + (aB - aA) / 2.0;\n            currentX = calcBezier(currentT, mX1, mX2) - aX;\n            if (currentX > 0.0) {\n                aB = currentT;\n            } else {\n                aA = currentT;\n            }\n        } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n        return currentT;\n    };\n    var newtonRaphsonIterate = function (aX, aGuessT) {\n        var i = 0;\n        var currentSlope = 0;\n        var currentX;\n        for (; i < NEWTON_ITERATIONS; ++i) {\n            currentSlope = getSlope(aGuessT, mX1, mX2);\n            if (currentSlope === 0.0) {\n                return aGuessT;\n            }\n            currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n            aGuessT -= currentX / currentSlope;\n        }\n        return aGuessT;\n    };\n    var calcSampleValues = function () {\n        for (var i = 0; i < K_SPLINE_TABLE_SIZE; ++i) {\n            sampleValues[i] = calcBezier(i * K_SAMPLE_STEP_SIZE, mX1, mX2);\n        }\n    };\n    var getTForX = function (aX) {\n        var intervalStart = 0.0;\n        var currentSample = 1;\n        var lastSample = K_SPLINE_TABLE_SIZE - 1;\n        var dist = 0.0;\n        var guessForT = 0.0;\n        var initialSlope = 0.0;\n        for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n            intervalStart += K_SAMPLE_STEP_SIZE;\n        }\n        --currentSample;\n        dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n        guessForT = intervalStart + dist * K_SAMPLE_STEP_SIZE;\n        initialSlope = getSlope(guessForT, mX1, mX2);\n        if (initialSlope >= NEWTON_MIN_SLOPE) {\n            return newtonRaphsonIterate(aX, guessForT);\n        } else if (initialSlope === 0.0) {\n            return guessForT;\n        } else {\n            return binarySubdivide(aX, intervalStart, intervalStart + K_SAMPLE_STEP_SIZE);\n        }\n    };\n    calcSampleValues();\n    var resolver = function (aX) {\n        var returnValue;\n        if (mX1 === mY1 && mX2 === mY2) {\n            returnValue = aX;\n        } else if (aX === 0) {\n            returnValue = 0;\n        } else if (aX === 1) {\n            returnValue = 1;\n        } else {\n            returnValue = calcBezier(getTForX(aX), mY1, mY2);\n        }\n        return returnValue;\n    };\n    return resolver;\n}\n\n\n\n// CONCATENATED MODULE: ./node_modules/@popmotion/popcorn/dist/popcorn.es.js\n\n\n\n\n\n\nvar zeroPoint = {\r\n    x: 0,\r\n    y: 0,\r\n    z: 0\r\n};\r\nvar isNum = function (v) { return typeof v === 'number'; };\n\nvar radiansToDegrees = (function (radians) { return (radians * 180) / Math.PI; });\n\nvar angle = (function (a, b) {\r\n    if (b === void 0) { b = zeroPoint; }\r\n    return radiansToDegrees(Math.atan2(b.y - a.y, b.x - a.x));\r\n});\n\nvar applyOffset = (function (from, to) {\r\n    var hasReceivedFrom = true;\r\n    if (to === undefined) {\r\n        to = from;\r\n        hasReceivedFrom = false;\r\n    }\r\n    return function (v) {\r\n        if (hasReceivedFrom) {\r\n            return v - from + to;\r\n        }\r\n        else {\r\n            from = v;\r\n            hasReceivedFrom = true;\r\n            return to;\r\n        }\r\n    };\r\n});\n\nvar curryRange = (function (func) { return function (min, max, v) { return (v !== undefined ? func(min, max, v) : function (cv) { return func(min, max, cv); }); }; });\n\nvar popcorn_es_clamp = function (min, max, v) {\r\n    return Math.min(Math.max(v, min), max);\r\n};\r\nvar clamp$1 = curryRange(popcorn_es_clamp);\n\nvar conditional = (function (check, apply) { return function (v) {\r\n    return check(v) ? apply(v) : v;\r\n}; });\n\nvar degreesToRadians = (function (degrees) { return (degrees * Math.PI) / 180; });\n\nvar isPoint = (function (point) {\r\n    return point.hasOwnProperty('x') && point.hasOwnProperty('y');\r\n});\n\nvar isPoint3D = (function (point) {\r\n    return isPoint(point) && point.hasOwnProperty('z');\r\n});\n\nvar distance1D = function (a, b) { return Math.abs(a - b); };\r\nvar distance = (function (a, b) {\r\n    if (b === void 0) { b = zeroPoint; }\r\n    if (isNum(a) && isNum(b)) {\r\n        return distance1D(a, b);\r\n    }\r\n    else if (isPoint(a) && isPoint(b)) {\r\n        var xDelta = distance1D(a.x, b.x);\r\n        var yDelta = distance1D(a.y, b.y);\r\n        var zDelta = isPoint3D(a) && isPoint3D(b) ? distance1D(a.z, b.z) : 0;\r\n        return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2) + Math.pow(zDelta, 2));\r\n    }\r\n    return 0;\r\n});\n\nvar progress = (function (from, to, value) {\r\n    var toFromDifference = to - from;\r\n    return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\r\n});\n\nvar mix = (function (from, to, progress) {\r\n    return -progress * from + progress * to + from;\r\n});\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar popcorn_es_assign = function() {\r\n    popcorn_es_assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return popcorn_es_assign.apply(this, arguments);\r\n};\n\nvar mixLinearColor = function (from, to, v) {\r\n    var fromExpo = from * from;\r\n    var toExpo = to * to;\r\n    return Math.sqrt(Math.max(0, v * (toExpo - fromExpo) + fromExpo));\r\n};\r\nvar colorTypes = [hex, rgba, hsla];\r\nvar getColorType = function (v) {\r\n    return colorTypes.find(function (type) { return type.test(v); });\r\n};\r\nvar notAnimatable = function (color$$1) {\r\n    return \"'\" + color$$1 + \"' is not an animatable color. Use the equivalent color code instead.\";\r\n};\r\nvar mixColor = (function (from, to) {\r\n    var fromColorType = getColorType(from);\r\n    var toColorType = getColorType(to);\r\n    invariant(!!fromColorType, notAnimatable(from));\r\n    invariant(!!toColorType, notAnimatable(to));\r\n    invariant(fromColorType.transform === toColorType.transform, 'Both colors must be hex/RGBA, OR both must be HSLA.');\r\n    var fromColor = fromColorType.parse(from);\r\n    var toColor = toColorType.parse(to);\r\n    var blended = popcorn_es_assign({}, fromColor);\r\n    var mixFunc = fromColorType === hsla ? mix : mixLinearColor;\r\n    return function (v) {\r\n        for (var key in blended) {\r\n            if (key !== 'alpha') {\r\n                blended[key] = mixFunc(fromColor[key], toColor[key], v);\r\n            }\r\n        }\r\n        blended.alpha = mix(fromColor.alpha, toColor.alpha, v);\r\n        return fromColorType.transform(blended);\r\n    };\r\n});\n\nvar combineFunctions = function (a, b) { return function (v) { return b(a(v)); }; };\r\nvar pipe = (function () {\r\n    var transformers = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        transformers[_i] = arguments[_i];\r\n    }\r\n    return transformers.reduce(combineFunctions);\r\n});\n\nfunction getMixer(origin, target) {\r\n    if (isNum(origin)) {\r\n        return function (v) { return mix(origin, target, v); };\r\n    }\r\n    else if (color.test(origin)) {\r\n        return mixColor(origin, target);\r\n    }\r\n    else {\r\n        return mixComplex(origin, target);\r\n    }\r\n}\r\nvar mixArray = function (from, to) {\r\n    var output = from.slice();\r\n    var numValues = output.length;\r\n    var blendValue = from.map(function (fromThis, i) { return getMixer(fromThis, to[i]); });\r\n    return function (v) {\r\n        for (var i = 0; i < numValues; i++) {\r\n            output[i] = blendValue[i](v);\r\n        }\r\n        return output;\r\n    };\r\n};\r\nvar mixObject = function (origin, target) {\r\n    var output = popcorn_es_assign({}, origin, target);\r\n    var blendValue = {};\r\n    for (var key in output) {\r\n        if (origin[key] !== undefined && target[key] !== undefined) {\r\n            blendValue[key] = getMixer(origin[key], target[key]);\r\n        }\r\n    }\r\n    return function (v) {\r\n        for (var key in blendValue) {\r\n            output[key] = blendValue[key](v);\r\n        }\r\n        return output;\r\n    };\r\n};\r\nfunction analyse(value) {\r\n    var parsed = complex.parse(value);\r\n    var numValues = parsed.length;\r\n    var numNumbers = 0;\r\n    var numRGB = 0;\r\n    var numHSL = 0;\r\n    for (var i = 0; i < numValues; i++) {\r\n        if (numNumbers || typeof parsed[i] === 'number') {\r\n            numNumbers++;\r\n        }\r\n        else {\r\n            if (parsed[i].hue !== undefined) {\r\n                numHSL++;\r\n            }\r\n            else {\r\n                numRGB++;\r\n            }\r\n        }\r\n    }\r\n    return { parsed: parsed, numNumbers: numNumbers, numRGB: numRGB, numHSL: numHSL };\r\n}\r\nvar mixComplex = function (origin, target) {\r\n    var template = complex.createTransformer(target);\r\n    var originStats = analyse(origin);\r\n    var targetStats = analyse(target);\r\n    invariant(originStats.numHSL === targetStats.numHSL &&\r\n        originStats.numRGB === targetStats.numRGB &&\r\n        originStats.numNumbers >= targetStats.numNumbers, \"Complex values '\" + origin + \"' and '\" + target + \"' too different to mix. Ensure all colors are of the same type.\");\r\n    return pipe(mixArray(originStats.parsed, targetStats.parsed), template);\r\n};\n\nvar mixNumber = function (from, to) { return function (p) { return mix(from, to, p); }; };\r\nfunction detectMixerFactory(v) {\r\n    if (typeof v === 'number') {\r\n        return mixNumber;\r\n    }\r\n    else if (typeof v === 'string') {\r\n        if (color.test(v)) {\r\n            return mixColor;\r\n        }\r\n        else {\r\n            return mixComplex;\r\n        }\r\n    }\r\n    else if (Array.isArray(v)) {\r\n        return mixArray;\r\n    }\r\n    else if (typeof v === 'object') {\r\n        return mixObject;\r\n    }\r\n}\r\nfunction createMixers(output, ease, customMixer) {\r\n    var mixers = [];\r\n    var mixerFactory = customMixer || detectMixerFactory(output[0]);\r\n    var numMixers = output.length - 1;\r\n    for (var i = 0; i < numMixers; i++) {\r\n        var mixer = mixerFactory(output[i], output[i + 1]);\r\n        if (ease) {\r\n            var easingFunction = Array.isArray(ease) ? ease[i] : ease;\r\n            mixer = pipe(easingFunction, mixer);\r\n        }\r\n        mixers.push(mixer);\r\n    }\r\n    return mixers;\r\n}\r\nfunction fastInterpolate(_a, _b) {\r\n    var from = _a[0], to = _a[1];\r\n    var mixer = _b[0];\r\n    return function (v) { return mixer(progress(from, to, v)); };\r\n}\r\nfunction slowInterpolate(input, mixers) {\r\n    var inputLength = input.length;\r\n    var lastInputIndex = inputLength - 1;\r\n    return function (v) {\r\n        var mixerIndex = 0;\r\n        var foundMixerIndex = false;\r\n        if (v <= input[0]) {\r\n            foundMixerIndex = true;\r\n        }\r\n        else if (v >= input[lastInputIndex]) {\r\n            mixerIndex = lastInputIndex - 1;\r\n            foundMixerIndex = true;\r\n        }\r\n        if (!foundMixerIndex) {\r\n            var i = 1;\r\n            for (; i < inputLength; i++) {\r\n                if (input[i] > v || i === lastInputIndex) {\r\n                    break;\r\n                }\r\n            }\r\n            mixerIndex = i - 1;\r\n        }\r\n        var progressInRange = progress(input[mixerIndex], input[mixerIndex + 1], v);\r\n        return mixers[mixerIndex](progressInRange);\r\n    };\r\n}\r\nfunction interpolate(input, output, _a) {\r\n    var _b = _a === void 0 ? {} : _a, _c = _b.clamp, clamp = _c === void 0 ? true : _c, ease = _b.ease, mixer = _b.mixer;\r\n    var inputLength = input.length;\r\n    invariant(inputLength === output.length, 'Both input and output ranges must be the same length');\r\n    invariant(!ease || !Array.isArray(ease) || ease.length === inputLength - 1, 'Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values.');\r\n    if (input[0] > input[inputLength - 1]) {\r\n        input = [].concat(input);\r\n        output = [].concat(output);\r\n        input.reverse();\r\n        output.reverse();\r\n    }\r\n    var mixers = createMixers(output, ease, mixer);\r\n    var interpolator = inputLength === 2\r\n        ? fastInterpolate(input, mixers)\r\n        : slowInterpolate(input, mixers);\r\n    return clamp\r\n        ? pipe(clamp$1(input[0], input[inputLength - 1]), interpolator)\r\n        : interpolator;\r\n}\n\nvar pointFromVector = (function (origin, angle, distance) {\r\n    angle = degreesToRadians(angle);\r\n    return {\r\n        x: distance * Math.cos(angle) + origin.x,\r\n        y: distance * Math.sin(angle) + origin.y\r\n    };\r\n});\n\nvar toDecimal = (function (num, precision) {\r\n    if (precision === void 0) { precision = 2; }\r\n    precision = Math.pow(10, precision);\r\n    return Math.round(num * precision) / precision;\r\n});\n\nvar smoothFrame = (function (prevValue, nextValue, duration, smoothing) {\r\n    if (smoothing === void 0) { smoothing = 0; }\r\n    return toDecimal(prevValue +\r\n        (duration * (nextValue - prevValue)) / Math.max(smoothing, duration));\r\n});\n\nvar smooth = (function (strength) {\r\n    if (strength === void 0) { strength = 50; }\r\n    var previousValue = 0;\r\n    var lastUpdated = 0;\r\n    return function (v) {\r\n        var currentFramestamp = getFrameData().timestamp;\r\n        var timeDelta = currentFramestamp !== lastUpdated ? currentFramestamp - lastUpdated : 0;\r\n        var newValue = timeDelta\r\n            ? smoothFrame(previousValue, v, timeDelta, strength)\r\n            : previousValue;\r\n        lastUpdated = currentFramestamp;\r\n        previousValue = newValue;\r\n        return newValue;\r\n    };\r\n});\n\nvar snap = (function (points) {\r\n    if (typeof points === 'number') {\r\n        return function (v) { return Math.round(v / points) * points; };\r\n    }\r\n    else {\r\n        var i_1 = 0;\r\n        var numPoints_1 = points.length;\r\n        return function (v) {\r\n            var lastDistance = Math.abs(points[0] - v);\r\n            for (i_1 = 1; i_1 < numPoints_1; i_1++) {\r\n                var point = points[i_1];\r\n                var distance = Math.abs(point - v);\r\n                if (distance === 0)\r\n                    return point;\r\n                if (distance > lastDistance)\r\n                    return points[i_1 - 1];\r\n                if (i_1 === numPoints_1 - 1)\r\n                    return point;\r\n                lastDistance = distance;\r\n            }\r\n        };\r\n    }\r\n});\n\nvar identity = function (v) { return v; };\r\nvar springForce = function (alterDisplacement) {\r\n    if (alterDisplacement === void 0) { alterDisplacement = identity; }\r\n    return curryRange(function (constant, origin, v) {\r\n        var displacement = origin - v;\r\n        var springModifiedDisplacement = -(0 - constant + 1) * (0 - alterDisplacement(Math.abs(displacement)));\r\n        return displacement <= 0\r\n            ? origin + springModifiedDisplacement\r\n            : origin - springModifiedDisplacement;\r\n    });\r\n};\r\nvar springForceLinear = springForce();\r\nvar springForceExpo = springForce(Math.sqrt);\n\nvar velocityPerFrame = (function (xps, frameDuration) {\r\n    return isNum(xps) ? xps / (1000 / frameDuration) : 0;\r\n});\n\nvar velocityPerSecond = (function (velocity, frameDuration) {\r\n    return frameDuration ? velocity * (1000 / frameDuration) : 0;\r\n});\n\nvar wrap = function (min, max, v) {\r\n    var rangeSize = max - min;\r\n    return ((((v - min) % rangeSize) + rangeSize) % rangeSize) + min;\r\n};\r\nvar wrap$1 = curryRange(wrap);\n\nvar clampProgress = clamp$1(0, 1);\r\nvar popcorn_es_steps = (function (steps, direction) {\r\n    if (direction === void 0) { direction = 'end'; }\r\n    return function (progress) {\r\n        progress =\r\n            direction === 'end' ? Math.min(progress, 0.999) : Math.max(progress, 0.001);\r\n        var expanded = progress * steps;\r\n        var rounded = direction === 'end' ? Math.floor(expanded) : Math.ceil(expanded);\r\n        return clampProgress(rounded / steps);\r\n    };\r\n});\n\n\n\n// CONCATENATED MODULE: ./node_modules/stylefire/dist/stylefire.es.js\n\n\n\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nvar stylefire_es_assign = function () {\n    stylefire_es_assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return stylefire_es_assign.apply(this, arguments);\n};\n\nfunction stylefire_es_rest(s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    return t;\n}\n\nvar createStyler = function (_a) {\n    var onRead = _a.onRead,\n        onRender = _a.onRender,\n        _b = _a.uncachedValues,\n        uncachedValues = _b === void 0 ? new Set() : _b,\n        _c = _a.useCache,\n        useCache = _c === void 0 ? true : _c;\n    return function (_a) {\n        if (_a === void 0) {\n            _a = {};\n        }\n        var props = stylefire_es_rest(_a, []);\n        var state = {};\n        var changedValues = [];\n        var hasChanged = false;\n        function setValue(key, value) {\n            if (key.startsWith('--')) {\n                props.hasCSSVariable = true;\n            }\n            var currentValue = state[key];\n            state[key] = value;\n            if (state[key] === currentValue) return;\n            if (changedValues.indexOf(key) === -1) {\n                changedValues.push(key);\n            }\n            if (!hasChanged) {\n                hasChanged = true;\n                framesync_es.render(styler.render);\n            }\n        }\n        var styler = {\n            get: function (key, forceRead) {\n                if (forceRead === void 0) {\n                    forceRead = false;\n                }\n                var useCached = !forceRead && useCache && !uncachedValues.has(key) && state[key] !== undefined;\n                return useCached ? state[key] : onRead(key, props);\n            },\n            set: function (values, value) {\n                if (typeof values === 'string') {\n                    setValue(values, value);\n                } else {\n                    for (var key in values) {\n                        setValue(key, values[key]);\n                    }\n                }\n                return this;\n            },\n            render: function (forceRender) {\n                if (forceRender === void 0) {\n                    forceRender = false;\n                }\n                if (hasChanged || forceRender === true) {\n                    onRender(state, props, changedValues);\n                    hasChanged = false;\n                    changedValues.length = 0;\n                }\n                return this;\n            }\n        };\n        return styler;\n    };\n};\n\nvar CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = '$1-$2';\nvar camelToDash = function (str) {\n    return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\nvar setDomAttrs = function (element, attrs) {\n    for (var key in attrs) {\n        if (attrs.hasOwnProperty(key)) {\n            element.setAttribute(key, attrs[key]);\n        }\n    }\n};\n\nvar camelCache = /*#__PURE__*/new Map();\nvar dashCache = /*#__PURE__*/new Map();\nvar prefixes = ['Webkit', 'Moz', 'O', 'ms', ''];\nvar numPrefixes = prefixes.length;\nvar isBrowser = typeof document !== 'undefined';\nvar testElement;\nvar setDashPrefix = function (key, prefixed) {\n    return dashCache.set(key, camelToDash(prefixed));\n};\nvar testPrefix = function (key) {\n    testElement = testElement || document.createElement('div');\n    for (var i = 0; i < numPrefixes; i++) {\n        var prefix = prefixes[i];\n        var noPrefix = prefix === '';\n        var prefixedPropertyName = noPrefix ? key : prefix + key.charAt(0).toUpperCase() + key.slice(1);\n        if (prefixedPropertyName in testElement.style || noPrefix) {\n            camelCache.set(key, prefixedPropertyName);\n            setDashPrefix(key, \"\" + (noPrefix ? '' : '-') + camelToDash(prefixedPropertyName));\n        }\n    }\n};\nvar setServerProperty = function (key) {\n    return setDashPrefix(key, key);\n};\nvar prefixer = function (key, asDashCase) {\n    if (asDashCase === void 0) {\n        asDashCase = false;\n    }\n    var cache = asDashCase ? dashCache : camelCache;\n    if (!cache.has(key)) isBrowser ? testPrefix(key) : setServerProperty(key);\n    return cache.get(key) || key;\n};\n\nvar axes = ['', 'X', 'Y', 'Z'];\nvar order = ['scale', 'rotate', 'skew', 'transformPerspective'];\nvar transformProps = /*#__PURE__*/order.reduce(function (acc, key) {\n    return axes.reduce(function (axesAcc, axesKey) {\n        axesAcc.push(key + axesKey);\n        return axesAcc;\n    }, acc);\n}, ['x', 'y', 'z']);\nvar transformPropDictionary = /*#__PURE__*/transformProps.reduce(function (dict, key) {\n    dict[key] = true;\n    return dict;\n}, {});\nfunction isTransformProp(key) {\n    return transformPropDictionary[key] === true;\n}\nfunction sortTransformProps(a, b) {\n    return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\nvar transformOriginProps = /*#__PURE__*/new Set(['originX', 'originY', 'originZ']);\nfunction isTransformOriginProp(key) {\n    return transformOriginProps.has(key);\n}\n\nvar rounded = /*#__PURE__*/stylefire_es_assign({}, number, { transform: Math.round });\nvar valueTypes = {\n    color: color,\n    backgroundColor: color,\n    outlineColor: color,\n    fill: color,\n    stroke: color,\n    borderColor: color,\n    borderTopColor: color,\n    borderRightColor: color,\n    borderBottomColor: color,\n    borderLeftColor: color,\n    borderWidth: px,\n    borderTopWidth: px,\n    borderRightWidth: px,\n    borderBottomWidth: px,\n    borderLeftWidth: px,\n    borderRadius: px,\n    radius: px,\n    borderTopLeftRadius: px,\n    borderTopRightRadius: px,\n    borderBottomRightRadius: px,\n    borderBottomLeftRadius: px,\n    width: px,\n    maxWidth: px,\n    height: px,\n    maxHeight: px,\n    size: px,\n    top: px,\n    right: px,\n    bottom: px,\n    left: px,\n    padding: px,\n    paddingTop: px,\n    paddingRight: px,\n    paddingBottom: px,\n    paddingLeft: px,\n    margin: px,\n    marginTop: px,\n    marginRight: px,\n    marginBottom: px,\n    marginLeft: px,\n    rotate: degrees,\n    rotateX: degrees,\n    rotateY: degrees,\n    rotateZ: degrees,\n    scale: style_value_types_es_scale,\n    scaleX: style_value_types_es_scale,\n    scaleY: style_value_types_es_scale,\n    scaleZ: style_value_types_es_scale,\n    skew: degrees,\n    skewX: degrees,\n    skewY: degrees,\n    distance: px,\n    x: px,\n    y: px,\n    z: px,\n    perspective: px,\n    opacity: alpha,\n    originX: progressPercentage,\n    originY: progressPercentage,\n    originZ: px,\n    zIndex: rounded\n};\nvar getValueType = function (key) {\n    return valueTypes[key];\n};\nvar getValueAsType = function (value, type) {\n    return type && typeof value === 'number' ? type.transform(value) : value;\n};\n\nvar SCROLL_LEFT = 'scrollLeft';\nvar SCROLL_TOP = 'scrollTop';\nvar scrollKeys = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP]);\n\nvar blacklist = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP, 'transform']);\nvar translateAlias = {\n    x: 'translateX',\n    y: 'translateY',\n    z: 'translateZ'\n};\nfunction isCustomTemplate(v) {\n    return typeof v === 'function';\n}\nfunction buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration) {\n    var transformString = '';\n    var transformHasZ = false;\n    transformKeys.sort(sortTransformProps);\n    var numTransformKeys = transformKeys.length;\n    for (var i = 0; i < numTransformKeys; i++) {\n        var key = transformKeys[i];\n        transformString += (translateAlias[key] || key) + \"(\" + transform[key] + \") \";\n        transformHasZ = key === 'z' ? true : transformHasZ;\n    }\n    if (!transformHasZ && enableHardwareAcceleration) {\n        transformString += 'translateZ(0)';\n    } else {\n        transformString = transformString.trim();\n    }\n    if (isCustomTemplate(state.transform)) {\n        transformString = state.transform(transform, transformString);\n    } else if (transformIsDefault) {\n        transformString = 'none';\n    }\n    return transformString;\n}\nfunction buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, isDashCase) {\n    if (enableHardwareAcceleration === void 0) {\n        enableHardwareAcceleration = true;\n    }\n    if (styles === void 0) {\n        styles = {};\n    }\n    if (transform === void 0) {\n        transform = {};\n    }\n    if (transformOrigin === void 0) {\n        transformOrigin = {};\n    }\n    if (transformKeys === void 0) {\n        transformKeys = [];\n    }\n    if (isDashCase === void 0) {\n        isDashCase = false;\n    }\n    var transformIsDefault = true;\n    var hasTransform = false;\n    var hasTransformOrigin = false;\n    for (var key in state) {\n        var value = state[key];\n        var valueType = getValueType(key);\n        var valueAsType = getValueAsType(value, valueType);\n        if (isTransformProp(key)) {\n            hasTransform = true;\n            transform[key] = valueAsType;\n            transformKeys.push(key);\n            if (transformIsDefault) {\n                if (valueType.default && value !== valueType.default || !valueType.default && value !== 0) {\n                    transformIsDefault = false;\n                }\n            }\n        } else if (isTransformOriginProp(key)) {\n            transformOrigin[key] = valueAsType;\n            hasTransformOrigin = true;\n        } else if (!blacklist.has(key) || !isCustomTemplate(valueAsType)) {\n            styles[prefixer(key, isDashCase)] = valueAsType;\n        }\n    }\n    if (hasTransform || typeof state.transform === 'function') {\n        styles.transform = buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration);\n    }\n    if (hasTransformOrigin) {\n        styles.transformOrigin = (transformOrigin.originX || 0) + \" \" + (transformOrigin.originY || 0) + \" \" + (transformOrigin.originZ || 0);\n    }\n    return styles;\n}\nfunction createStyleBuilder(enableHardwareAcceleration) {\n    if (enableHardwareAcceleration === void 0) {\n        enableHardwareAcceleration = true;\n    }\n    var styles = {};\n    var transform = {};\n    var transformOrigin = {};\n    var transformKeys = [];\n    return function (state) {\n        transformKeys.length = 0;\n        buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, true);\n        return styles;\n    };\n}\n\nfunction stylefire_es_onRead(key, options) {\n    var element = options.element,\n        preparseOutput = options.preparseOutput;\n    var defaultValueType = getValueType(key);\n    if (isTransformProp(key)) {\n        return defaultValueType ? defaultValueType.default || 0 : 0;\n    } else if (scrollKeys.has(key)) {\n        return element[key];\n    } else {\n        var domValue = window.getComputedStyle(element, null).getPropertyValue(prefixer(key, true)) || 0;\n        return preparseOutput && defaultValueType && defaultValueType.test(domValue) && defaultValueType.parse ? defaultValueType.parse(domValue) : domValue;\n    }\n}\nfunction stylefire_es_onRender(state, _a, changedValues) {\n    var element = _a.element,\n        buildStyles = _a.buildStyles,\n        hasCSSVariable = _a.hasCSSVariable;\n    Object.assign(element.style, buildStyles(state));\n    if (hasCSSVariable) {\n        var numChangedValues = changedValues.length;\n        for (var i = 0; i < numChangedValues; i++) {\n            var key = changedValues[i];\n            if (key.startsWith('--')) {\n                element.style.setProperty(key, state[key]);\n            }\n        }\n    }\n    if (changedValues.indexOf(SCROLL_LEFT) !== -1) {\n        element[SCROLL_LEFT] = state[SCROLL_LEFT];\n    }\n    if (changedValues.indexOf(SCROLL_TOP) !== -1) {\n        element[SCROLL_TOP] = state[SCROLL_TOP];\n    }\n}\nvar cssStyler = /*#__PURE__*/createStyler({\n    onRead: stylefire_es_onRead,\n    onRender: stylefire_es_onRender,\n    uncachedValues: scrollKeys\n});\nfunction createCssStyler(element, _a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var enableHardwareAcceleration = _a.enableHardwareAcceleration,\n        props = stylefire_es_rest(_a, [\"enableHardwareAcceleration\"]);\n    return cssStyler(stylefire_es_assign({ element: element, buildStyles: createStyleBuilder(enableHardwareAcceleration), preparseOutput: true }, props));\n}\n\nvar camelCaseAttributes = /*#__PURE__*/new Set(['baseFrequency', 'diffuseConstant', 'kernelMatrix', 'kernelUnitLength', 'keySplines', 'keyTimes', 'limitingConeAngle', 'markerHeight', 'markerWidth', 'numOctaves', 'targetX', 'targetY', 'surfaceScale', 'specularConstant', 'specularExponent', 'stdDeviation', 'tableValues']);\n\nvar ZERO_NOT_ZERO = 0.0000001;\nvar progressToPixels = function (progress, length) {\n    return progress * length + 'px';\n};\nvar build = function (state, dimensions, isPath, pathLength) {\n    var hasTransform = false;\n    var hasDashArray = false;\n    var props = {};\n    var dashArrayStyles = isPath ? {\n        pathLength: '0',\n        pathSpacing: \"\" + pathLength\n    } : undefined;\n    var scale$$1 = state.scale !== undefined ? state.scale || ZERO_NOT_ZERO : state.scaleX || 1;\n    var scaleY = state.scaleY !== undefined ? state.scaleY || ZERO_NOT_ZERO : scale$$1 || 1;\n    var transformOriginX = dimensions.width * (state.originX || 50) + dimensions.x;\n    var transformOriginY = dimensions.height * (state.originY || 50) + dimensions.y;\n    var scaleTransformX = -transformOriginX * (scale$$1 * 1);\n    var scaleTransformY = -transformOriginY * (scaleY * 1);\n    var scaleReplaceX = transformOriginX / scale$$1;\n    var scaleReplaceY = transformOriginY / scaleY;\n    var transform = {\n        translate: \"translate(\" + state.x + \", \" + state.y + \") \",\n        scale: \"translate(\" + scaleTransformX + \", \" + scaleTransformY + \") scale(\" + scale$$1 + \", \" + scaleY + \") translate(\" + scaleReplaceX + \", \" + scaleReplaceY + \") \",\n        rotate: \"rotate(\" + state.rotate + \", \" + transformOriginX + \", \" + transformOriginY + \") \",\n        skewX: \"skewX(\" + state.skewX + \") \",\n        skewY: \"skewY(\" + state.skewY + \") \"\n    };\n    for (var key in state) {\n        if (state.hasOwnProperty(key)) {\n            var value = state[key];\n            if (isTransformProp(key)) {\n                hasTransform = true;\n            } else if (isPath && (key === 'pathLength' || key === 'pathSpacing') && typeof value === 'number') {\n                hasDashArray = true;\n                dashArrayStyles[key] = progressToPixels(value, pathLength);\n            } else if (isPath && key === 'pathOffset') {\n                props['stroke-dashoffset'] = progressToPixels(-value, pathLength);\n            } else {\n                var attrKey = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n                props[attrKey] = value;\n            }\n        }\n    }\n    if (hasDashArray) {\n        props['stroke-dasharray'] = dashArrayStyles.pathLength + ' ' + dashArrayStyles.pathSpacing;\n    }\n    if (hasTransform) {\n        props.transform = '';\n        for (var key in transform) {\n            if (transform.hasOwnProperty(key)) {\n                var defaultValue = key === 'scale' ? '1' : '0';\n                props.transform += transform[key].replace(/undefined/g, defaultValue);\n            }\n        }\n    }\n    return props;\n};\n\nvar stylefire_es_int = /*#__PURE__*/stylefire_es_assign({}, number, { transform: Math.round });\nvar valueTypes$1 = {\n    fill: color,\n    stroke: color,\n    scale: style_value_types_es_scale,\n    scaleX: style_value_types_es_scale,\n    scaleY: style_value_types_es_scale,\n    opacity: alpha,\n    fillOpacity: alpha,\n    strokeOpacity: alpha,\n    numOctaves: stylefire_es_int\n};\nvar getValueType$1 = function (key) {\n    return valueTypes$1[key];\n};\n\nvar getDimensions = function (element) {\n    return typeof element.getBBox === 'function' ? element.getBBox() : element.getBoundingClientRect();\n};\nvar getSVGElementDimensions = function (element) {\n    try {\n        return getDimensions(element);\n    } catch (e) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n};\n\nvar svgStyler = /*#__PURE__*/createStyler({\n    onRead: function (key, _a) {\n        var element = _a.element;\n        if (!isTransformProp(key)) {\n            return element.getAttribute(key);\n        } else {\n            var valueType = getValueType$1(key);\n            return valueType ? valueType.default : 0;\n        }\n    },\n    onRender: function (state, _a) {\n        var dimensions = _a.dimensions,\n            element = _a.element,\n            isPath = _a.isPath,\n            pathLength = _a.pathLength;\n        setDomAttrs(element, build(state, dimensions, isPath, pathLength));\n    }\n});\nvar svg = function (element) {\n    var dimensions = getSVGElementDimensions(element);\n    var props = {\n        element: element,\n        dimensions: dimensions,\n        isPath: false\n    };\n    if (element.tagName === 'path') {\n        props.isPath = true;\n        props.pathLength = element.getTotalLength();\n    }\n    return svgStyler(props);\n};\n\nvar viewport = /*#__PURE__*/createStyler({\n    useCache: false,\n    onRead: function (key) {\n        return key === 'scrollTop' ? window.pageYOffset : window.pageXOffset;\n    },\n    onRender: function (_a) {\n        var _b = _a.scrollTop,\n            scrollTop = _b === void 0 ? 0 : _b,\n            _c = _a.scrollLeft,\n            scrollLeft = _c === void 0 ? 0 : _c;\n        return window.scrollTo(scrollLeft, scrollTop);\n    }\n});\n\nvar cache = /*#__PURE__*/new WeakMap();\nvar createDOMStyler = function (node, props) {\n    var styler;\n    if (node instanceof HTMLElement) {\n        styler = createCssStyler(node, props);\n    } else if (node instanceof SVGElement) {\n        styler = svg(node);\n    } else if (node === window) {\n        styler = viewport(node);\n    }\n    invariant(styler !== undefined, 'No valid node provided. Node must be HTMLElement, SVGElement or window.');\n    cache.set(node, styler);\n    return styler;\n};\nvar getStyler = function (node, props) {\n    return cache.has(node) ? cache.get(node) : createDOMStyler(node, props);\n};\nfunction index(nodeOrSelector, props) {\n    var node = typeof nodeOrSelector === 'string' ? document.querySelector(nodeOrSelector) : nodeOrSelector;\n    return getStyler(node, props);\n}\n\n/* harmony default export */ var stylefire_es = (index);\n\n\n// CONCATENATED MODULE: ./node_modules/popmotion/dist/popmotion.es.js\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar popmotion_es_Chainable = /*#__PURE__*/function () {\n    function Chainable(props) {\n        if (props === void 0) {\n            props = {};\n        }\n        this.props = props;\n    }\n    Chainable.prototype.applyMiddleware = function (middleware) {\n        return this.create(__assign({}, this.props, { middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware] }));\n    };\n    Chainable.prototype.pipe = function () {\n        var funcs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            funcs[_i] = arguments[_i];\n        }\n        var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return update(pipedUpdate(v));\n            };\n        });\n    };\n    Chainable.prototype.while = function (predicate) {\n        return this.applyMiddleware(function (update, complete) {\n            return function (v) {\n                return predicate(v) ? update(v) : complete();\n            };\n        });\n    };\n    Chainable.prototype.filter = function (predicate) {\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return predicate(v) && update(v);\n            };\n        });\n    };\n    return Chainable;\n}();\n\nvar Observer = /*#__PURE__*/function () {\n    function Observer(_a, observer) {\n        var middleware = _a.middleware,\n            onComplete = _a.onComplete;\n        var _this = this;\n        this.isActive = true;\n        this.update = function (v) {\n            if (_this.observer.update) _this.updateObserver(v);\n        };\n        this.complete = function () {\n            if (_this.observer.complete && _this.isActive) _this.observer.complete();\n            if (_this.onComplete) _this.onComplete();\n            _this.isActive = false;\n        };\n        this.error = function (err) {\n            if (_this.observer.error && _this.isActive) _this.observer.error(err);\n            _this.isActive = false;\n        };\n        this.observer = observer;\n        this.updateObserver = function (v) {\n            return observer.update(v);\n        };\n        this.onComplete = onComplete;\n        if (observer.update && middleware && middleware.length) {\n            middleware.forEach(function (m) {\n                return _this.updateObserver = m(_this.updateObserver, _this.complete);\n            });\n        }\n    }\n    return Observer;\n}();\nvar createObserver = function (observerCandidate, _a, onComplete) {\n    var middleware = _a.middleware;\n    if (typeof observerCandidate === 'function') {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, { update: observerCandidate });\n    } else {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, observerCandidate);\n    }\n};\n\nvar popmotion_es_Action = /*#__PURE__*/function (_super) {\n    __extends(Action, _super);\n    function Action() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Action.prototype.create = function (props) {\n        return new Action(props);\n    };\n    Action.prototype.start = function (observerCandidate) {\n        if (observerCandidate === void 0) {\n            observerCandidate = {};\n        }\n        var isComplete = false;\n        var subscription = {\n            stop: function () {\n                return undefined;\n            }\n        };\n        var _a = this.props,\n            init = _a.init,\n            observerProps = __rest(_a, [\"init\"]);\n        var observer = createObserver(observerCandidate, observerProps, function () {\n            isComplete = true;\n            subscription.stop();\n        });\n        var api = init(observer);\n        subscription = api ? __assign({}, subscription, api) : subscription;\n        if (observerCandidate.registerParent) {\n            observerCandidate.registerParent(subscription);\n        }\n        if (isComplete) subscription.stop();\n        return subscription;\n    };\n    return Action;\n}(popmotion_es_Chainable);\nvar popmotion_es_action = function (init) {\n    return new popmotion_es_Action({ init: init });\n};\n\nvar popmotion_es_BaseMulticast = /*#__PURE__*/function (_super) {\n    __extends(BaseMulticast, _super);\n    function BaseMulticast() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.subscribers = [];\n        return _this;\n    }\n    BaseMulticast.prototype.complete = function () {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.complete();\n        });\n    };\n    BaseMulticast.prototype.error = function (err) {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.error(err);\n        });\n    };\n    BaseMulticast.prototype.update = function (v) {\n        for (var i = 0; i < this.subscribers.length; i++) {\n            this.subscribers[i].update(v);\n        }\n    };\n    BaseMulticast.prototype.subscribe = function (observerCandidate) {\n        var _this = this;\n        var observer = createObserver(observerCandidate, this.props);\n        this.subscribers.push(observer);\n        var subscription = {\n            unsubscribe: function () {\n                var index = _this.subscribers.indexOf(observer);\n                if (index !== -1) _this.subscribers.splice(index, 1);\n            }\n        };\n        return subscription;\n    };\n    BaseMulticast.prototype.stop = function () {\n        if (this.parent) this.parent.stop();\n    };\n    BaseMulticast.prototype.registerParent = function (subscription) {\n        this.stop();\n        this.parent = subscription;\n    };\n    return BaseMulticast;\n}(popmotion_es_Chainable);\n\nvar popmotion_es_Multicast = /*#__PURE__*/function (_super) {\n    __extends(Multicast, _super);\n    function Multicast() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Multicast.prototype.create = function (props) {\n        return new Multicast(props);\n    };\n    return Multicast;\n}(popmotion_es_BaseMulticast);\nvar multicast = function () {\n    return new popmotion_es_Multicast();\n};\n\nvar stepProgress = function (steps, progress$$1) {\n    var segment = 1 / (steps - 1);\n    var subsegment = 1 / (2 * (steps - 1));\n    var percentProgressOfTarget = Math.min(progress$$1, 1);\n    var subsegmentProgressOfTarget = percentProgressOfTarget / subsegment;\n    var segmentProgressOfTarget = Math.floor((subsegmentProgressOfTarget + 1) / 2);\n    return segmentProgressOfTarget * segment;\n};\n\nvar calc = /*#__PURE__*/Object.freeze({\n    angle: angle,\n    degreesToRadians: degreesToRadians,\n    distance: distance,\n    isPoint3D: isPoint3D,\n    isPoint: isPoint,\n    dilate: mix,\n    getValueFromProgress: mix,\n    pointFromAngleAndDistance: pointFromVector,\n    getProgressFromValue: progress,\n    radiansToDegrees: radiansToDegrees,\n    smooth: smoothFrame,\n    speedPerFrame: velocityPerFrame,\n    speedPerSecond: velocityPerSecond,\n    stepProgress: stepProgress\n});\n\nvar isValueList = function (v) {\n    return Array.isArray(v);\n};\nvar isSingleValue = function (v) {\n    var typeOfV = typeof v;\n    return typeOfV === 'string' || typeOfV === 'number';\n};\nvar popmotion_es_ValueReaction = /*#__PURE__*/function (_super) {\n    __extends(ValueReaction, _super);\n    function ValueReaction(props) {\n        var _this = _super.call(this, props) || this;\n        _this.scheduleVelocityCheck = function () {\n            return framesync_es.postRender(_this.velocityCheck);\n        };\n        _this.velocityCheck = function (_a) {\n            var timestamp = _a.timestamp;\n            if (timestamp !== _this.lastUpdated) {\n                _this.prev = _this.current;\n            }\n        };\n        _this.prev = _this.current = props.value || 0;\n        if (isSingleValue(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = v;\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getSingleVelocity(_this.current, _this.prev);\n            };\n        } else if (isValueList(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = v.slice();\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getListVelocity();\n            };\n        } else {\n            _this.updateCurrent = function (v) {\n                _this.current = {};\n                for (var key in v) {\n                    if (v.hasOwnProperty(key)) {\n                        _this.current[key] = v[key];\n                    }\n                }\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getMapVelocity();\n            };\n        }\n        if (props.initialSubscription) _this.subscribe(props.initialSubscription);\n        return _this;\n    }\n    ValueReaction.prototype.create = function (props) {\n        return new ValueReaction(props);\n    };\n    ValueReaction.prototype.get = function () {\n        return this.current;\n    };\n    ValueReaction.prototype.getVelocity = function () {\n        return this.getVelocityOfCurrent();\n    };\n    ValueReaction.prototype.update = function (v) {\n        _super.prototype.update.call(this, v);\n        this.prev = this.current;\n        this.updateCurrent(v);\n        var _a = getFrameData(),\n            delta = _a.delta,\n            timestamp = _a.timestamp;\n        this.timeDelta = delta;\n        this.lastUpdated = timestamp;\n        framesync_es.postRender(this.scheduleVelocityCheck);\n    };\n    ValueReaction.prototype.subscribe = function (observerCandidate) {\n        var sub = _super.prototype.subscribe.call(this, observerCandidate);\n        this.subscribers[this.subscribers.length - 1].update(this.current);\n        return sub;\n    };\n    ValueReaction.prototype.getSingleVelocity = function (current, prev) {\n        return typeof current === 'number' && typeof prev === 'number' ? velocityPerSecond(current - prev, this.timeDelta) : velocityPerSecond(parseFloat(current) - parseFloat(prev), this.timeDelta) || 0;\n    };\n    ValueReaction.prototype.getListVelocity = function () {\n        var _this = this;\n        return this.current.map(function (c, i) {\n            return _this.getSingleVelocity(c, _this.prev[i]);\n        });\n    };\n    ValueReaction.prototype.getMapVelocity = function () {\n        var velocity = {};\n        for (var key in this.current) {\n            if (this.current.hasOwnProperty(key)) {\n                velocity[key] = this.getSingleVelocity(this.current[key], this.prev[key]);\n            }\n        }\n        return velocity;\n    };\n    return ValueReaction;\n}(popmotion_es_BaseMulticast);\nvar popmotion_es_value = function (value, initialSubscription) {\n    return new popmotion_es_ValueReaction({ value: value, initialSubscription: initialSubscription });\n};\n\nvar multi = function (_a) {\n    var getCount = _a.getCount,\n        getFirst = _a.getFirst,\n        getOutput = _a.getOutput,\n        mapApi = _a.mapApi,\n        setProp = _a.setProp,\n        startActions = _a.startActions;\n    return function (actions) {\n        return popmotion_es_action(function (_a) {\n            var update = _a.update,\n                complete = _a.complete,\n                error = _a.error;\n            var numActions = getCount(actions);\n            var output = getOutput();\n            var updateOutput = function () {\n                return update(output);\n            };\n            var numCompletedActions = 0;\n            var subs = startActions(actions, function (a, name) {\n                var hasCompleted = false;\n                return a.start({\n                    complete: function () {\n                        if (!hasCompleted) {\n                            hasCompleted = true;\n                            numCompletedActions++;\n                            if (numCompletedActions === numActions) framesync_es.update(complete);\n                        }\n                    },\n                    error: error,\n                    update: function (v) {\n                        setProp(output, name, v);\n                        framesync_es.update(updateOutput, false, true);\n                    }\n                });\n            });\n            return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n                api[methodName] = mapApi(subs, methodName);\n                return api;\n            }, {});\n        });\n    };\n};\n\nvar composite = /*#__PURE__*/multi({\n    getOutput: function () {\n        return {};\n    },\n    getCount: function (subs) {\n        return Object.keys(subs).length;\n    },\n    getFirst: function (subs) {\n        return subs[Object.keys(subs)[0]];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return Object.keys(subs).reduce(function (output, propKey) {\n                var _a;\n                if (subs[propKey][methodName]) {\n                    args[0] && args[0][propKey] !== undefined ? output[propKey] = subs[propKey][methodName](args[0][propKey]) : output[propKey] = (_a = subs[propKey])[methodName].apply(_a, args);\n                }\n                return output;\n            }, {});\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return Object.keys(actions).reduce(function (subs, key) {\n            subs[key] = starter(actions[key], key);\n            return subs;\n        }, {});\n    }\n});\n\nvar parallel = /*#__PURE__*/multi({\n    getOutput: function () {\n        return [];\n    },\n    getCount: function (subs) {\n        return subs.length;\n    },\n    getFirst: function (subs) {\n        return subs[0];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return subs.map(function (sub, i) {\n                if (sub[methodName]) {\n                    return Array.isArray(args[0]) ? sub[methodName](args[0][i]) : sub[methodName].apply(sub, args);\n                }\n            });\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return actions.map(function (action, i) {\n            return starter(action, i);\n        });\n    }\n});\nvar parallel$1 = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return parallel(actions);\n};\n\nvar createVectorTests = function (typeTests) {\n    var testNames = Object.keys(typeTests);\n    var isVectorProp = function (prop, key) {\n        return prop !== undefined && !typeTests[key](prop);\n    };\n    var getVectorKeys = function (props) {\n        return testNames.reduce(function (vectorKeys, key) {\n            if (isVectorProp(props[key], key)) vectorKeys.push(key);\n            return vectorKeys;\n        }, []);\n    };\n    var testVectorProps = function (props) {\n        return props && testNames.some(function (key) {\n            return isVectorProp(props[key], key);\n        });\n    };\n    return { getVectorKeys: getVectorKeys, testVectorProps: testVectorProps };\n};\nvar unitTypes = [px, percent, degrees, vh, vw];\nvar findUnitType = function (prop) {\n    return unitTypes.find(function (type) {\n        return type.test(prop);\n    });\n};\nvar isUnitProp = function (prop) {\n    return Boolean(findUnitType(prop));\n};\nvar createAction = function (action, props) {\n    return action(props);\n};\nvar reduceArrayValue = function (i) {\n    return function (props, key) {\n        props[key] = props[key][i];\n        return props;\n    };\n};\nvar createArrayAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionList = props[firstVectorKey].map(function (v, i) {\n        var childActionProps = vectorKeys.reduce(reduceArrayValue(i), __assign({}, props));\n        return getActionCreator(v)(action, childActionProps);\n    });\n    return parallel$1.apply(void 0, actionList);\n};\nvar reduceObjectValue = function (key) {\n    return function (props, propKey) {\n        props[propKey] = props[propKey][key];\n        return props;\n    };\n};\nvar createObjectAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionMap = Object.keys(props[firstVectorKey]).reduce(function (map, key) {\n        var childActionProps = vectorKeys.reduce(reduceObjectValue(key), __assign({}, props));\n        map[key] = getActionCreator(props[firstVectorKey][key])(action, childActionProps);\n        return map;\n    }, {});\n    return composite(actionMap);\n};\nvar createUnitAction = function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n    var unitType = findUnitType(from) || findUnitType(to);\n    var transform = unitType.transform,\n        parse = unitType.parse;\n    return action(__assign({}, props, { from: typeof from === 'string' ? parse(from) : from, to: typeof to === 'string' ? parse(to) : to })).pipe(transform);\n};\nvar createMixerAction = function (mixer) {\n    return function (action, _a) {\n        var from = _a.from,\n            to = _a.to,\n            props = __rest(_a, [\"from\", \"to\"]);\n        return action(__assign({}, props, { from: 0, to: 1 })).pipe(mixer(from, to));\n    };\n};\nvar createColorAction = /*#__PURE__*/createMixerAction(mixColor);\nvar createComplexAction = /*#__PURE__*/createMixerAction(mixComplex);\nvar createVectorAction = function (action, typeTests) {\n    var _a = createVectorTests(typeTests),\n        testVectorProps = _a.testVectorProps,\n        getVectorKeys = _a.getVectorKeys;\n    var vectorAction = function (props) {\n        var isVector = testVectorProps(props);\n        if (!isVector) return action(props);\n        var vectorKeys = getVectorKeys(props);\n        var testKey = vectorKeys[0];\n        var testProp = props[testKey];\n        return getActionCreator(testProp)(action, props, vectorKeys);\n    };\n    return vectorAction;\n};\nvar getActionCreator = function (prop) {\n    if (typeof prop === 'number') {\n        return createAction;\n    } else if (Array.isArray(prop)) {\n        return createArrayAction;\n    } else if (isUnitProp(prop)) {\n        return createUnitAction;\n    } else if (color.test(prop)) {\n        return createColorAction;\n    } else if (complex.test(prop)) {\n        return createComplexAction;\n    } else if (typeof prop === 'object') {\n        return createObjectAction;\n    } else {\n        return createAction;\n    }\n};\n\nvar decay = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return popmotion_es_action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0 : _b,\n            _c = props.from,\n            from = _c === void 0 ? 0 : _c,\n            _d = props.power,\n            power = _d === void 0 ? 0.8 : _d,\n            _e = props.timeConstant,\n            timeConstant = _e === void 0 ? 350 : _e,\n            _f = props.restDelta,\n            restDelta = _f === void 0 ? 0.5 : _f,\n            modifyTarget = props.modifyTarget;\n        var elapsed = 0;\n        var amplitude = power * velocity;\n        var idealTarget = Math.round(from + amplitude);\n        var target = typeof modifyTarget === 'undefined' ? idealTarget : modifyTarget(idealTarget);\n        var process = framesync_es.update(function (_a) {\n            var frameDelta = _a.delta;\n            elapsed += frameDelta;\n            var delta = -amplitude * Math.exp(-elapsed / timeConstant);\n            var isMoving = delta > restDelta || delta < -restDelta;\n            var current = isMoving ? target + delta : target;\n            update(current);\n            if (!isMoving) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorDecay = /*#__PURE__*/createVectorAction(decay, {\n    from: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    },\n    velocity: number.test\n});\n\nvar spring = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return popmotion_es_action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0.0 : _b;\n        var _c = props.from,\n            from = _c === void 0 ? 0.0 : _c,\n            _d = props.to,\n            to = _d === void 0 ? 0.0 : _d,\n            _e = props.stiffness,\n            stiffness = _e === void 0 ? 100 : _e,\n            _f = props.damping,\n            damping = _f === void 0 ? 10 : _f,\n            _g = props.mass,\n            mass = _g === void 0 ? 1.0 : _g,\n            _h = props.restSpeed,\n            restSpeed = _h === void 0 ? 0.01 : _h,\n            _j = props.restDelta,\n            restDelta = _j === void 0 ? 0.01 : _j;\n        var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n        var t = 0;\n        var delta = to - from;\n        var position = from;\n        var prevPosition = position;\n        var process = framesync_es.update(function (_a) {\n            var timeDelta = _a.delta;\n            t += timeDelta;\n            var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n            var angularFreq = Math.sqrt(stiffness / mass) / 1000;\n            prevPosition = position;\n            if (dampingRatio < 1) {\n                var envelope = Math.exp(-dampingRatio * angularFreq * t);\n                var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n                position = to - envelope * ((initialVelocity + dampingRatio * angularFreq * delta) / expoDecay * Math.sin(expoDecay * t) + delta * Math.cos(expoDecay * t));\n            } else {\n                var envelope = Math.exp(-angularFreq * t);\n                position = to - envelope * (delta + (initialVelocity + angularFreq * delta) * t);\n            }\n            velocity = velocityPerSecond(position - prevPosition, timeDelta);\n            var isBelowVelocityThreshold = Math.abs(velocity) <= restSpeed;\n            var isBelowDisplacementThreshold = Math.abs(to - position) <= restDelta;\n            if (isBelowVelocityThreshold && isBelowDisplacementThreshold) {\n                position = to;\n                update(position);\n                cancelSync.update(process);\n                complete();\n            } else {\n                update(position);\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorSpring = /*#__PURE__*/createVectorAction(spring, {\n    from: number.test,\n    to: number.test,\n    stiffness: number.test,\n    damping: number.test,\n    mass: number.test,\n    velocity: number.test\n});\n\nvar inertia = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.velocity,\n        velocity = _c === void 0 ? 0 : _c,\n        min = _a.min,\n        max = _a.max,\n        _d = _a.power,\n        power = _d === void 0 ? 0.8 : _d,\n        _e = _a.timeConstant,\n        timeConstant = _e === void 0 ? 700 : _e,\n        _f = _a.bounceStiffness,\n        bounceStiffness = _f === void 0 ? 500 : _f,\n        _g = _a.bounceDamping,\n        bounceDamping = _g === void 0 ? 10 : _g,\n        _h = _a.restDelta,\n        restDelta = _h === void 0 ? 1 : _h,\n        modifyTarget = _a.modifyTarget;\n    return popmotion_es_action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var current = popmotion_es_value(from);\n        var activeAnimation;\n        var isSpring = false;\n        var isLessThanMin = function (v) {\n            return min !== undefined && v <= min;\n        };\n        var isMoreThanMax = function (v) {\n            return max !== undefined && v >= max;\n        };\n        var isOutOfBounds = function (v) {\n            return isLessThanMin(v) || isMoreThanMax(v);\n        };\n        var isTravellingAwayFromBounds = function (v, currentVelocity) {\n            return isLessThanMin(v) && currentVelocity < 0 || isMoreThanMax(v) && currentVelocity > 0;\n        };\n        var startAnimation = function (animation, next) {\n            activeAnimation && activeAnimation.stop();\n            activeAnimation = animation.start({\n                update: function (v) {\n                    return current.update(v);\n                },\n                complete: function () {\n                    if (next) {\n                        next();\n                        return;\n                    }\n                    complete();\n                }\n            });\n        };\n        var startSpring = function (props) {\n            isSpring = true;\n            startAnimation(vectorSpring(__assign({}, props, { to: isLessThanMin(props.from) ? min : max, stiffness: bounceStiffness, damping: bounceDamping, restDelta: restDelta })));\n        };\n        current.subscribe(function (v) {\n            update(v);\n            var currentVelocity = current.getVelocity();\n            if (activeAnimation && !isSpring && isTravellingAwayFromBounds(v, currentVelocity)) {\n                startSpring({ from: v, velocity: currentVelocity });\n            }\n        });\n        if (isOutOfBounds(from)) {\n            startSpring({ from: from, velocity: velocity });\n        } else if (velocity !== 0) {\n            var animation = vectorDecay({\n                from: from,\n                velocity: velocity,\n                timeConstant: timeConstant,\n                power: power,\n                restDelta: isOutOfBounds(from) ? 20 : restDelta,\n                modifyTarget: modifyTarget\n            });\n            startAnimation(animation, function () {\n                var v = current.get();\n                if (isOutOfBounds(v)) {\n                    startSpring({ from: v, velocity: current.getVelocity() });\n                } else {\n                    complete();\n                }\n            });\n        } else {\n            complete();\n        }\n        return {\n            stop: function () {\n                return activeAnimation && activeAnimation.stop();\n            }\n        };\n    });\n};\nvar popmotion_es_index = /*#__PURE__*/createVectorAction(inertia, {\n    from: number.test,\n    velocity: number.test,\n    min: number.test,\n    max: number.test,\n    damping: number.test,\n    stiffness: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    }\n});\n\nvar popmotion_es_frame = function () {\n    return popmotion_es_action(function (_a) {\n        var update = _a.update;\n        var initialTime = 0;\n        var process = framesync_es.update(function (_a) {\n            var timestamp = _a.timestamp;\n            if (!initialTime) initialTime = timestamp;\n            update(timestamp - initialTime);\n        }, true, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\n\nvar scrubber = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.to,\n        to = _c === void 0 ? 1 : _c,\n        _d = _a.ease,\n        ease = _d === void 0 ? linear : _d,\n        _e = _a.reverseEase,\n        reverseEase = _e === void 0 ? false : _e;\n    if (reverseEase) {\n        ease = createReversedEasing(ease);\n    }\n    return popmotion_es_action(function (_a) {\n        var update = _a.update;\n        return {\n            seek: function (progress$$1) {\n                return update(progress$$1);\n            }\n        };\n    }).pipe(ease, function (v) {\n        return mix(from, to, v);\n    });\n};\nvar vectorScrubber = /*#__PURE__*/createVectorAction(scrubber, {\n    ease: function (func) {\n        return typeof func === 'function';\n    },\n    from: number.test,\n    to: number.test\n});\n\nvar popmotion_es_clampProgress = /*#__PURE__*/clamp$1(0, 1);\nvar tween = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return popmotion_es_action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.duration,\n            duration = _b === void 0 ? 300 : _b,\n            _c = props.ease,\n            ease = _c === void 0 ? easeOut : _c,\n            _d = props.flip,\n            flip = _d === void 0 ? 0 : _d,\n            _e = props.loop,\n            loop = _e === void 0 ? 0 : _e,\n            _f = props.yoyo,\n            yoyo = _f === void 0 ? 0 : _f,\n            _g = props.repeatDelay,\n            repeatDelay = _g === void 0 ? 0 : _g;\n        var _h = props.from,\n            from = _h === void 0 ? 0 : _h,\n            _j = props.to,\n            to = _j === void 0 ? 1 : _j,\n            _k = props.elapsed,\n            elapsed = _k === void 0 ? 0 : _k,\n            _l = props.flipCount,\n            flipCount = _l === void 0 ? 0 : _l,\n            _m = props.yoyoCount,\n            yoyoCount = _m === void 0 ? 0 : _m,\n            _o = props.loopCount,\n            loopCount = _o === void 0 ? 0 : _o;\n        var playhead = vectorScrubber({ from: from, to: to, ease: ease }).start(update);\n        var currentProgress = 0;\n        var process;\n        var isActive = false;\n        var reverseAnimation = function (reverseEase) {\n            if (reverseEase === void 0) {\n                reverseEase = false;\n            }\n            var _a;\n            _a = [to, from], from = _a[0], to = _a[1];\n            playhead = vectorScrubber({ from: from, to: to, ease: ease, reverseEase: reverseEase }).start(update);\n        };\n        var isTweenComplete = function () {\n            var isComplete = isActive && elapsed > duration + repeatDelay;\n            if (!isComplete) return false;\n            if (isComplete && !loop && !flip && !yoyo) return true;\n            elapsed = duration - (elapsed - repeatDelay);\n            if (loop && loopCount < loop) {\n                loopCount++;\n                return false;\n            } else if (flip && flipCount < flip) {\n                flipCount++;\n                reverseAnimation();\n                return false;\n            } else if (yoyo && yoyoCount < yoyo) {\n                yoyoCount++;\n                reverseAnimation(yoyoCount % 2 !== 0);\n                return false;\n            }\n            return true;\n        };\n        var updateTween = function () {\n            currentProgress = popmotion_es_clampProgress(progress(0, duration, elapsed));\n            playhead.seek(currentProgress);\n        };\n        var startTimer = function () {\n            isActive = true;\n            process = framesync_es.update(function (_a) {\n                var delta = _a.delta;\n                elapsed += delta;\n                updateTween();\n                if (isTweenComplete()) {\n                    cancelSync.update(process);\n                    complete && framesync_es.update(complete, false, true);\n                }\n            }, true);\n        };\n        var stopTimer = function () {\n            isActive = false;\n            if (process) cancelSync.update(process);\n        };\n        startTimer();\n        return {\n            isActive: function () {\n                return isActive;\n            },\n            getElapsed: function () {\n                return clamp$1(0, duration, elapsed);\n            },\n            getProgress: function () {\n                return currentProgress;\n            },\n            stop: function () {\n                stopTimer();\n            },\n            pause: function () {\n                stopTimer();\n                return this;\n            },\n            resume: function () {\n                if (!isActive) startTimer();\n                return this;\n            },\n            seek: function (newProgress) {\n                elapsed = mix(0, duration, newProgress);\n                framesync_es.update(updateTween, false, true);\n                return this;\n            },\n            reverse: function () {\n                reverseAnimation();\n                return this;\n            }\n        };\n    });\n};\n\nvar clampProgress$1 = /*#__PURE__*/clamp$1(0, 1);\nvar defaultEasings = function (values, easing$$1) {\n    return values.map(function () {\n        return easing$$1 || easeOut;\n    }).splice(0, values.length - 1);\n};\nvar defaultTimings = function (values) {\n    var numValues = values.length;\n    return values.map(function (value, i) {\n        return i !== 0 ? i / (numValues - 1) : 0;\n    });\n};\nvar interpolateScrubbers = function (input, scrubbers, update) {\n    var rangeLength = input.length;\n    var finalInputIndex = rangeLength - 1;\n    var finalScrubberIndex = finalInputIndex - 1;\n    var subs = scrubbers.map(function (scrub) {\n        return scrub.start(update);\n    });\n    return function (v) {\n        if (v <= input[0]) {\n            subs[0].seek(0);\n        }\n        if (v >= input[finalInputIndex]) {\n            subs[finalScrubberIndex].seek(1);\n        }\n        var i = 1;\n        for (; i < rangeLength; i++) {\n            if (input[i] > v || i === finalInputIndex) break;\n        }\n        var progressInRange = progress(input[i - 1], input[i], v);\n        subs[i - 1].seek(clampProgress$1(progressInRange));\n    };\n};\nvar keyframes = function (_a) {\n    var easings = _a.easings,\n        _b = _a.ease,\n        ease = _b === void 0 ? linear : _b,\n        times = _a.times,\n        values = _a.values,\n        tweenProps = __rest(_a, [\"easings\", \"ease\", \"times\", \"values\"]);\n    easings = Array.isArray(easings) ? easings : defaultEasings(values, easings);\n    times = times || defaultTimings(values);\n    var scrubbers = easings.map(function (easing$$1, i) {\n        return vectorScrubber({\n            from: values[i],\n            to: values[i + 1],\n            ease: easing$$1\n        });\n    });\n    return tween(__assign({}, tweenProps, { ease: ease })).applyMiddleware(function (update) {\n        return interpolateScrubbers(times, scrubbers, update);\n    });\n};\n\nvar physics = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return popmotion_es_action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.acceleration,\n            acceleration = _b === void 0 ? 0 : _b,\n            _c = props.friction,\n            friction = _c === void 0 ? 0 : _c,\n            _d = props.velocity,\n            velocity = _d === void 0 ? 0 : _d,\n            springStrength = props.springStrength,\n            to = props.to;\n        var _e = props.restSpeed,\n            restSpeed = _e === void 0 ? 0.001 : _e,\n            _f = props.from,\n            from = _f === void 0 ? 0 : _f;\n        var current = from;\n        var process = framesync_es.update(function (_a) {\n            var delta = _a.delta;\n            var elapsed = Math.max(delta, 16);\n            if (acceleration) velocity += velocityPerFrame(acceleration, elapsed);\n            if (friction) velocity *= Math.pow(1 - friction, elapsed / 100);\n            if (springStrength !== undefined && to !== undefined) {\n                var distanceToTarget = to - current;\n                velocity += distanceToTarget * velocityPerFrame(springStrength, elapsed);\n            }\n            current += velocityPerFrame(velocity, elapsed);\n            update(current);\n            var isComplete = restSpeed !== false && (!velocity || Math.abs(velocity) <= restSpeed);\n            if (isComplete) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            set: function (v) {\n                current = v;\n                return this;\n            },\n            setAcceleration: function (v) {\n                acceleration = v;\n                return this;\n            },\n            setFriction: function (v) {\n                friction = v;\n                return this;\n            },\n            setSpringStrength: function (v) {\n                springStrength = v;\n                return this;\n            },\n            setSpringTarget: function (v) {\n                to = v;\n                return this;\n            },\n            setVelocity: function (v) {\n                velocity = v;\n                return this;\n            },\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorPhysics = /*#__PURE__*/createVectorAction(physics, {\n    acceleration: number.test,\n    friction: number.test,\n    velocity: number.test,\n    from: number.test,\n    to: number.test,\n    springStrength: number.test\n});\n\nvar DEFAULT_DURATION = 300;\nvar flattenTimings = function (instructions) {\n    var flatInstructions = [];\n    var lastArg = instructions[instructions.length - 1];\n    var isStaggered = typeof lastArg === 'number';\n    var staggerDelay = isStaggered ? lastArg : 0;\n    var segments = isStaggered ? instructions.slice(0, -1) : instructions;\n    var numSegments = segments.length;\n    var offset = 0;\n    segments.forEach(function (item, i) {\n        flatInstructions.push(item);\n        if (i !== numSegments - 1) {\n            var duration = item.duration || DEFAULT_DURATION;\n            offset += staggerDelay;\n            flatInstructions.push(\"-\" + (duration - offset));\n        }\n    });\n    return flatInstructions;\n};\nvar flattenArrayInstructions = function (instructions, instruction) {\n    Array.isArray(instruction) ? instructions.push.apply(instructions, flattenTimings(instruction)) : instructions.push(instruction);\n    return instructions;\n};\nvar convertDefToProps = function (props, def, i) {\n    var duration = props.duration,\n        easings = props.easings,\n        times = props.times,\n        values = props.values;\n    var numValues = values.length;\n    var prevTimeTo = times[numValues - 1];\n    var timeFrom = def.at === 0 ? 0 : def.at / duration;\n    var timeTo = (def.at + def.duration) / duration;\n    if (i === 0) {\n        values.push(def.from);\n        times.push(timeFrom);\n    } else {\n        if (prevTimeTo !== timeFrom) {\n            if (def.from !== undefined) {\n                values.push(values[numValues - 1]);\n                times.push(timeFrom);\n                easings.push(linear);\n            }\n            var from = def.from !== undefined ? def.from : values[numValues - 1];\n            values.push(from);\n            times.push(timeFrom);\n            easings.push(linear);\n        } else if (def.from !== undefined) {\n            values.push(def.from);\n            times.push(timeFrom);\n            easings.push(linear);\n        }\n    }\n    values.push(def.to);\n    times.push(timeTo);\n    easings.push(def.ease || easeInOut);\n    return props;\n};\nvar timeline = function (instructions, _a) {\n    var _b = _a === void 0 ? {} : _a,\n        duration = _b.duration,\n        elapsed = _b.elapsed,\n        ease = _b.ease,\n        loop = _b.loop,\n        flip = _b.flip,\n        yoyo = _b.yoyo;\n    var playhead = 0;\n    var calculatedDuration = 0;\n    var flatInstructions = instructions.reduce(flattenArrayInstructions, []);\n    var animationDefs = [];\n    flatInstructions.forEach(function (instruction) {\n        if (typeof instruction === 'string') {\n            playhead += parseFloat(instruction);\n        } else if (typeof instruction === 'number') {\n            playhead = instruction;\n        } else {\n            var def = __assign({}, instruction, { at: playhead });\n            def.duration = def.duration === undefined ? DEFAULT_DURATION : def.duration;\n            animationDefs.push(def);\n            playhead += def.duration;\n            calculatedDuration = Math.max(calculatedDuration, def.at + def.duration);\n        }\n    });\n    var tracks = {};\n    var numDefs = animationDefs.length;\n    for (var i = 0; i < numDefs; i++) {\n        var def = animationDefs[i];\n        var track = def.track;\n        if (track === undefined) {\n            throw new Error('No track defined');\n        }\n        if (!tracks.hasOwnProperty(track)) tracks[track] = [];\n        tracks[track].push(def);\n    }\n    var trackKeyframes = {};\n    for (var key in tracks) {\n        if (tracks.hasOwnProperty(key)) {\n            var keyframeProps = tracks[key].reduce(convertDefToProps, {\n                duration: calculatedDuration,\n                easings: [],\n                times: [],\n                values: []\n            });\n            trackKeyframes[key] = keyframes(__assign({}, keyframeProps, { duration: duration || calculatedDuration, ease: ease,\n                elapsed: elapsed,\n                loop: loop,\n                yoyo: yoyo,\n                flip: flip }));\n        }\n    }\n    return composite(trackKeyframes);\n};\n\nvar listen = function (element, events, options) {\n    return popmotion_es_action(function (_a) {\n        var update = _a.update;\n        var eventNames = events.split(' ').map(function (eventName) {\n            element.addEventListener(eventName, update, options);\n            return eventName;\n        });\n        return {\n            stop: function () {\n                return eventNames.forEach(function (eventName) {\n                    return element.removeEventListener(eventName, update, options);\n                });\n            }\n        };\n    });\n};\n\nvar defaultPointerPos = function () {\n    return {\n        clientX: 0,\n        clientY: 0,\n        pageX: 0,\n        pageY: 0,\n        x: 0,\n        y: 0\n    };\n};\nvar eventToPoint = function (e, point) {\n    if (point === void 0) {\n        point = defaultPointerPos();\n    }\n    point.clientX = point.x = e.clientX;\n    point.clientY = point.y = e.clientY;\n    point.pageX = e.pageX;\n    point.pageY = e.pageY;\n    return point;\n};\n\nvar points = [/*#__PURE__*/defaultPointerPos()];\nvar isTouchDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointsLocation = function (_a) {\n        var touches = _a.touches;\n        isTouchDevice = true;\n        var numTouches = touches.length;\n        points.length = 0;\n        for (var i = 0; i < numTouches; i++) {\n            var thisTouch = touches[i];\n            points.push(eventToPoint(thisTouch));\n        }\n    };\n    listen(document, 'touchstart touchmove', {\n        passive: true,\n        capture: true\n    }).start(updatePointsLocation);\n}\nvar multitouch = function (_a) {\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.preventDefault,\n        preventDefault = _c === void 0 ? true : _c,\n        _d = _b.scale,\n        scale = _d === void 0 ? 1.0 : _d,\n        _e = _b.rotate,\n        rotate = _e === void 0 ? 0.0 : _e;\n    return popmotion_es_action(function (_a) {\n        var update = _a.update;\n        var output = {\n            touches: points,\n            scale: scale,\n            rotate: rotate\n        };\n        var initialDistance = 0.0;\n        var initialRotation = 0.0;\n        var isGesture = points.length > 1;\n        if (isGesture) {\n            var firstTouch = points[0],\n                secondTouch = points[1];\n            initialDistance = distance(firstTouch, secondTouch);\n            initialRotation = angle(firstTouch, secondTouch);\n        }\n        var updatePoint = function () {\n            if (isGesture) {\n                var firstTouch = points[0],\n                    secondTouch = points[1];\n                var newDistance = distance(firstTouch, secondTouch);\n                var newRotation = angle(firstTouch, secondTouch);\n                output.scale = scale * (newDistance / initialDistance);\n                output.rotate = rotate + (newRotation - initialRotation);\n            }\n            update(output);\n        };\n        var onMove = function (e) {\n            if (preventDefault || e.touches.length > 1) e.preventDefault();\n            framesync_es.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'touchmove', {\n            passive: !preventDefault\n        }).start(onMove);\n        if (isTouchDevice) framesync_es.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\nvar getIsTouchDevice = function () {\n    return isTouchDevice;\n};\n\nvar point = /*#__PURE__*/defaultPointerPos();\nvar isMouseDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointLocation = function (e) {\n        isMouseDevice = true;\n        eventToPoint(e, point);\n    };\n    listen(document, 'mousedown mousemove', true).start(updatePointLocation);\n}\nvar mouse = function (_a) {\n    var _b = (_a === void 0 ? {} : _a).preventDefault,\n        preventDefault = _b === void 0 ? true : _b;\n    return popmotion_es_action(function (_a) {\n        var update = _a.update;\n        var updatePoint = function () {\n            return update(point);\n        };\n        var onMove = function (e) {\n            if (preventDefault) e.preventDefault();\n            framesync_es.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'mousemove').start(onMove);\n        if (isMouseDevice) framesync_es.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\n\nvar getFirstTouch = function (_a) {\n    var firstTouch = _a[0];\n    return firstTouch;\n};\nvar pointer = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return getIsTouchDevice() ? multitouch(props).pipe(function (_a) {\n        var touches = _a.touches;\n        return touches;\n    }, getFirstTouch) : mouse(props);\n};\nvar index$1 = function (_a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var x = _a.x,\n        y = _a.y,\n        props = __rest(_a, [\"x\", \"y\"]);\n    if (x !== undefined || y !== undefined) {\n        var applyXOffset_1 = applyOffset(x || 0);\n        var applyYOffset_1 = applyOffset(y || 0);\n        var delta_1 = { x: 0, y: 0 };\n        return pointer(props).pipe(function (point) {\n            delta_1.x = applyXOffset_1(point.x);\n            delta_1.y = applyYOffset_1(point.y);\n            return delta_1;\n        });\n    } else {\n        return pointer(props);\n    }\n};\n\nvar chain = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return popmotion_es_action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var i = 0;\n        var current;\n        var playCurrent = function () {\n            current = actions[i].start({\n                complete: function () {\n                    i++;\n                    i >= actions.length ? complete() : playCurrent();\n                },\n                update: update\n            });\n        };\n        playCurrent();\n        return {\n            stop: function () {\n                return current && current.stop();\n            }\n        };\n    });\n};\n\nvar crossfade = function (a, b) {\n    return popmotion_es_action(function (observer) {\n        var balance = 0;\n        var fadable = parallel$1(a, b).start(__assign({}, observer, { update: function (_a) {\n                var va = _a[0],\n                    vb = _a[1];\n                observer.update(mix(va, vb, balance));\n            } }));\n        return {\n            setBalance: function (v) {\n                return balance = v;\n            },\n            stop: function () {\n                return fadable.stop();\n            }\n        };\n    });\n};\n\nvar popmotion_es_delay = function (timeToDelay) {\n    return popmotion_es_action(function (_a) {\n        var complete = _a.complete;\n        var timeout = setTimeout(complete, timeToDelay);\n        return {\n            stop: function () {\n                return clearTimeout(timeout);\n            }\n        };\n    });\n};\n\nvar merge = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return popmotion_es_action(function (observer) {\n        var subs = actions.map(function (thisAction) {\n            return thisAction.start(observer);\n        });\n        return {\n            stop: function () {\n                return subs.forEach(function (sub) {\n                    return sub.stop();\n                });\n            }\n        };\n    });\n};\n\nvar schedule = function (scheduler, schedulee) {\n    return popmotion_es_action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var latest;\n        var schedulerSub = scheduler.start({\n            update: function () {\n                return latest !== undefined && update(latest);\n            },\n            complete: complete\n        });\n        var scheduleeSub = schedulee.start({\n            update: function (v) {\n                return latest = v;\n            },\n            complete: complete\n        });\n        return {\n            stop: function () {\n                schedulerSub.stop();\n                scheduleeSub.stop();\n            }\n        };\n    });\n};\n\nvar stagger = function (actions, interval) {\n    var intervalIsNumber = typeof interval === 'number';\n    var actionsWithDelay = actions.map(function (a, i) {\n        var timeToDelay = intervalIsNumber ? interval * i : interval(i);\n        return chain(popmotion_es_delay(timeToDelay), a);\n    });\n    return parallel$1.apply(void 0, actionsWithDelay);\n};\n\nvar appendUnit = function (unit) {\n    return function (v) {\n        return \"\" + v + unit;\n    };\n};\nvar popmotion_es_steps = function (st, min, max) {\n    if (min === void 0) {\n        min = 0;\n    }\n    if (max === void 0) {\n        max = 1;\n    }\n    return function (v) {\n        var current = progress(min, max, v);\n        return mix(min, max, stepProgress(st, current));\n    };\n};\nvar transformMap = function (childTransformers) {\n    return function (v) {\n        var output = __assign({}, v);\n        for (var key in childTransformers) {\n            if (childTransformers.hasOwnProperty(key)) {\n                var childTransformer = childTransformers[key];\n                output[key] = childTransformer(v[key]);\n            }\n        }\n        return output;\n    };\n};\n\nvar transformers = /*#__PURE__*/Object.freeze({\n    applyOffset: applyOffset,\n    clamp: clamp$1,\n    conditional: conditional,\n    interpolate: interpolate,\n    blendArray: mixArray,\n    blendColor: mixColor,\n    pipe: pipe,\n    smooth: smooth,\n    snap: snap,\n    generateStaticSpring: springForce,\n    nonlinearSpring: springForceExpo,\n    linearSpring: springForceLinear,\n    wrap: wrap$1,\n    appendUnit: appendUnit,\n    steps: popmotion_es_steps,\n    transformMap: transformMap\n});\n\nvar css = function (element, props) {\n    warning(false, 'css() is deprecated, use styler instead');\n    return stylefire_es(element, props);\n};\nvar popmotion_es_svg = function (element, props) {\n    warning(false, 'svg() is deprecated, use styler instead');\n    return stylefire_es(element, props);\n};\n\n\n\n// CONCATENATED MODULE: ./node_modules/pose-core/dist/pose-core.es.js\n\n\n\nvar getPoseValues = function (_a) {\n    var transition = _a.transition,\n        flip = _a.flip,\n        delay = _a.delay,\n        delayChildren = _a.delayChildren,\n        staggerChildren = _a.staggerChildren,\n        staggerDirection = _a.staggerDirection,\n        afterChildren = _a.afterChildren,\n        beforeChildren = _a.beforeChildren,\n        preTransition = _a.preTransition,\n        applyAtStart = _a.applyAtStart,\n        applyAtEnd = _a.applyAtEnd,\n        props = __rest(_a, [\"transition\", \"flip\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"afterChildren\", \"beforeChildren\", \"preTransition\", \"applyAtStart\", \"applyAtEnd\"]);\n    return props;\n};\nvar selectPoses = function (_a) {\n    var label = _a.label,\n        props = _a.props,\n        values = _a.values,\n        parentValues = _a.parentValues,\n        ancestorValues = _a.ancestorValues,\n        onChange = _a.onChange,\n        passive = _a.passive,\n        initialPose = _a.initialPose,\n        poses = __rest(_a, [\"label\", \"props\", \"values\", \"parentValues\", \"ancestorValues\", \"onChange\", \"passive\", \"initialPose\"]);\n    return poses;\n};\nvar selectAllValues = function (values, selectValue) {\n    var allValues = {};\n    values.forEach(function (value, key) {\n        return allValues[key] = selectValue(value);\n    });\n    return allValues;\n};\n\nvar resolveProp = function (target, props) {\n    return typeof target === 'function' ? target(props) : target;\n};\nvar poseDefault = function (pose, prop, defaultValue, resolveProps) {\n    return pose && pose[prop] !== undefined ? resolveProp(pose[prop], resolveProps) : defaultValue;\n};\nvar startChildAnimations = function (children, next, pose, props) {\n    var animations = [];\n    var delay = poseDefault(pose, 'delayChildren', 0, props);\n    var stagger = poseDefault(pose, 'staggerChildren', 0, props);\n    var staggerDirection = poseDefault(pose, 'staggerDirection', 1, props);\n    var maxStaggerDuration = (children.size - 1) * stagger;\n    var generateStaggerDuration = staggerDirection === 1 ? function (i) {\n        return i * stagger;\n    } : function (i) {\n        return maxStaggerDuration - i * stagger;\n    };\n    Array.from(children).forEach(function (child, i) {\n        animations.push(child.set(next, {\n            delay: delay + generateStaggerDuration(i)\n        }));\n    });\n    return animations;\n};\nvar resolveTransition = function (transition, key, value, props, convertTransitionDefinition, getInstantTransition) {\n    var resolvedTransition;\n    if (typeof transition === 'function') {\n        var resolvedTransitionMap = transition(props);\n        resolvedTransition = resolveTransition(resolvedTransitionMap, key, value, props, convertTransitionDefinition, getInstantTransition);\n    } else if (transition[key] || transition.default) {\n        var keyTransition = transition[key] || transition.default;\n        if (typeof keyTransition === 'function') {\n            resolvedTransition = keyTransition(props);\n        } else {\n            resolvedTransition = keyTransition;\n        }\n    } else {\n        resolvedTransition = transition;\n    }\n    return resolvedTransition === false ? getInstantTransition(value, props) : convertTransitionDefinition(value, resolvedTransition, props);\n};\nvar findInsertionIndex = function (poseList, priorityList, priorityIndex) {\n    var insertionIndex = 0;\n    for (var i = priorityIndex - 1; i >= 0; i--) {\n        var nextHighestPriorityIndex = poseList.indexOf(priorityList[i]);\n        if (nextHighestPriorityIndex !== -1) {\n            insertionIndex = nextHighestPriorityIndex + 1;\n            break;\n        }\n    }\n    return insertionIndex;\n};\nvar applyValues = function (toApply, values, props, setValue, setValueNative) {\n    invariant(typeof toApply === 'object', 'applyAtStart and applyAtEnd must be of type object');\n    return Object.keys(toApply).forEach(function (key) {\n        var valueToSet = resolveProp(toApply[key], props);\n        values.has(key) ? setValue(values.get(key), valueToSet) : setValueNative(key, valueToSet, props);\n    });\n};\nvar createPoseSetter = function (setterProps) {\n    var state = setterProps.state,\n        poses = setterProps.poses,\n        startAction = setterProps.startAction,\n        stopAction = setterProps.stopAction,\n        getInstantTransition = setterProps.getInstantTransition,\n        addActionDelay = setterProps.addActionDelay,\n        getTransitionProps = setterProps.getTransitionProps,\n        resolveTarget = setterProps.resolveTarget,\n        transformPose = setterProps.transformPose,\n        posePriority = setterProps.posePriority,\n        convertTransitionDefinition = setterProps.convertTransitionDefinition,\n        setValue = setterProps.setValue,\n        setValueNative = setterProps.setValueNative,\n        forceRender = setterProps.forceRender;\n    return function (next, nextProps, propagate) {\n        if (nextProps === void 0) {\n            nextProps = {};\n        }\n        if (propagate === void 0) {\n            propagate = true;\n        }\n        var children = state.children,\n            values = state.values,\n            props = state.props,\n            activeActions = state.activeActions,\n            activePoses = state.activePoses;\n        var _a = nextProps.delay,\n            delay = _a === void 0 ? 0 : _a;\n        var hasChildren = children.size;\n        var baseTransitionProps = __assign({}, props, nextProps);\n        var nextPose = poses[next];\n        var getChildAnimations = function () {\n            return hasChildren && propagate ? startChildAnimations(children, next, nextPose, baseTransitionProps) : [];\n        };\n        var getParentAnimations = function () {\n            if (!nextPose) return [];\n            var applyAtStart = nextPose.applyAtStart;\n            if (applyAtStart) {\n                applyValues(applyAtStart, values, baseTransitionProps, setValue, setValueNative);\n                if (forceRender) forceRender(baseTransitionProps);\n            }\n            if (transformPose) nextPose = transformPose(nextPose, next, state);\n            var preTransition = nextPose.preTransition,\n                getTransition = nextPose.transition,\n                applyAtEnd = nextPose.applyAtEnd;\n            if (preTransition) preTransition(baseTransitionProps);\n            var animations = Object.keys(getPoseValues(nextPose)).map(function (key) {\n                var valuePoses = activePoses.has(key) ? activePoses.get(key) : (activePoses.set(key, []), activePoses.get(key));\n                var existingIndex = valuePoses.indexOf(next);\n                if (existingIndex !== -1) valuePoses.splice(existingIndex, 1);\n                var priority = posePriority ? posePriority.indexOf(next) : 0;\n                var insertionIndex = priority <= 0 ? 0 : findInsertionIndex(valuePoses, posePriority, priority);\n                valuePoses.splice(insertionIndex, 0, next);\n                return insertionIndex === 0 ? new Promise(function (complete) {\n                    var value = values.get(key);\n                    var transitionProps = __assign({}, baseTransitionProps, { key: key,\n                        value: value });\n                    var target = resolveTarget(value, resolveProp(nextPose[key], transitionProps));\n                    if (activeActions.has(key)) stopAction(activeActions.get(key));\n                    var resolveTransitionProps = __assign({ to: target }, transitionProps, getTransitionProps(value, target, transitionProps));\n                    var transition = resolveTransition(getTransition, key, value, resolveTransitionProps, convertTransitionDefinition, getInstantTransition);\n                    var poseDelay = delay || resolveProp(nextPose.delay, transitionProps);\n                    if (poseDelay) {\n                        transition = addActionDelay(poseDelay, transition);\n                    }\n                    activeActions.set(key, startAction(value, transition, complete));\n                }) : Promise.resolve();\n            });\n            return applyAtEnd ? [Promise.all(animations).then(function () {\n                applyValues(applyAtEnd, values, baseTransitionProps, setValue, setValueNative);\n            })] : animations;\n        };\n        if (nextPose && hasChildren) {\n            if (resolveProp(nextPose.beforeChildren, baseTransitionProps)) {\n                return Promise.all(getParentAnimations()).then(function () {\n                    return Promise.all(getChildAnimations());\n                });\n            } else if (resolveProp(nextPose.afterChildren, baseTransitionProps)) {\n                return Promise.all(getChildAnimations()).then(function () {\n                    return Promise.all(getParentAnimations());\n                });\n            }\n        }\n        return Promise.all(getParentAnimations().concat(getChildAnimations()));\n    };\n};\n\nvar DEFAULT_INITIAL_POSE = 'init';\nvar isScale = function (key) {\n    return key.includes('scale');\n};\nvar defaultReadValueFromSource = function (key) {\n    return isScale(key) ? 1 : 0;\n};\nvar readValueFromPose = function (pose, key, props) {\n    var valueToResolve = pose.applyAtEnd && pose.applyAtEnd[key] !== undefined ? pose.applyAtEnd[key] : pose[key] !== undefined ? pose[key] : pose.applyAtStart && pose.applyAtStart[key] !== undefined ? pose.applyAtStart[key] : 0;\n    return resolveProp(valueToResolve, props);\n};\nvar getPosesToSearch = function (pose) {\n    var posesToSearch = Array.isArray(pose) ? pose : [pose];\n    posesToSearch.push(DEFAULT_INITIAL_POSE);\n    return posesToSearch;\n};\nvar getInitialValue = function (poses, key, initialPose, props, readValueFromSource, activePoses) {\n    if (readValueFromSource === void 0) {\n        readValueFromSource = defaultReadValueFromSource;\n    }\n    var posesToSearch = getPosesToSearch(initialPose);\n    var pose = posesToSearch.filter(Boolean).find(function (name) {\n        var thisPose = poses[name];\n        return thisPose && (thisPose[key] !== undefined || thisPose.applyAtStart && thisPose.applyAtStart[key] !== undefined || thisPose.applyAtEnd && thisPose.applyAtEnd[key] !== undefined);\n    });\n    activePoses.set(key, [pose || DEFAULT_INITIAL_POSE]);\n    return pose ? readValueFromPose(poses[pose], key, props) : readValueFromSource(key, props);\n};\nvar createValues = function (values, _a) {\n    var userSetValues = _a.userSetValues,\n        createValue = _a.createValue,\n        convertValue = _a.convertValue,\n        readValueFromSource = _a.readValueFromSource,\n        initialPose = _a.initialPose,\n        poses = _a.poses,\n        activePoses = _a.activePoses,\n        props = _a.props;\n    return function (key) {\n        if (values.has(key)) return;\n        var value;\n        if (userSetValues && userSetValues[key] !== undefined) {\n            value = convertValue(userSetValues[key], key, props);\n        } else {\n            var initValue = getInitialValue(poses, key, initialPose, props, readValueFromSource, activePoses);\n            value = createValue(initValue, key, props);\n        }\n        values.set(key, value);\n    };\n};\nvar scrapeValuesFromPose = function (values, props) {\n    return function (key) {\n        var pose = props.poses[key];\n        Object.keys(getPoseValues(pose)).forEach(createValues(values, props));\n    };\n};\nvar getAncestorValue = function (key, fromParent, ancestors) {\n    if (fromParent === true) {\n        return ancestors[0] && ancestors[0].values.get(key);\n    } else {\n        var foundAncestor = ancestors.find(function (_a) {\n            var label = _a.label;\n            return label === fromParent;\n        });\n        return foundAncestor && foundAncestor.values.get(key);\n    }\n};\nvar bindPassiveValues = function (values, _a) {\n    var passive = _a.passive,\n        ancestorValues = _a.ancestorValues,\n        createValue = _a.createValue,\n        readValue = _a.readValue,\n        props = _a.props;\n    return function (key) {\n        var _a = passive[key],\n            valueKey = _a[0],\n            passiveProps = _a[1],\n            fromParent = _a[2];\n        var valueToBind = fromParent && ancestorValues.length ? getAncestorValue(valueKey, fromParent, ancestorValues) : values.has(valueKey) ? values.get(valueKey) : false;\n        if (!valueToBind) return;\n        var newValue = createValue(readValue(valueToBind), key, props, {\n            passiveParentKey: valueKey,\n            passiveParent: valueToBind,\n            passiveProps: passiveProps\n        });\n        values.set(key, newValue);\n    };\n};\nvar setNativeValues = function (_a) {\n    var setValueNative = _a.setValueNative,\n        initialPose = _a.initialPose,\n        props = _a.props,\n        poses = _a.poses;\n    var valuesHaveSet = new Set();\n    var setValues = function (pose, propKey) {\n        if (pose[propKey]) {\n            for (var key in pose[propKey]) {\n                if (!valuesHaveSet.has(key)) {\n                    valuesHaveSet.add(key);\n                    setValueNative(key, resolveProp(pose[propKey][key], props), props);\n                }\n            }\n        }\n    };\n    getPosesToSearch(initialPose).forEach(function (poseKey) {\n        var pose = poses[poseKey];\n        if (pose) {\n            setValues(pose, 'applyAtEnd');\n            setValues(pose, 'applyAtStart');\n        }\n    });\n};\nvar createValueMap = function (props) {\n    var poses = props.poses,\n        passive = props.passive;\n    var values = new Map();\n    Object.keys(poses).forEach(scrapeValuesFromPose(values, props));\n    setNativeValues(props);\n    if (passive) Object.keys(passive).forEach(bindPassiveValues(values, props));\n    return values;\n};\n\nvar applyDefaultTransition = function (pose, key, defaultTransitions) {\n    return __assign({}, pose, { transition: defaultTransitions.has(key) ? defaultTransitions.get(key) : defaultTransitions.get('default') });\n};\nvar generateTransitions = function (poses, defaultTransitions) {\n    Object.keys(poses).forEach(function (key) {\n        var pose = poses[key];\n        invariant(typeof pose === 'object', \"Pose '\" + key + \"' is of invalid type. All poses should be objects.\");\n        poses[key] = pose.transition !== undefined ? pose : applyDefaultTransition(pose, key, defaultTransitions);\n    });\n    return poses;\n};\n\nvar sortByReversePriority = function (priorityOrder) {\n    return function (a, b) {\n        var aP = priorityOrder.indexOf(a);\n        var bP = priorityOrder.indexOf(b);\n        if (aP === -1 && bP !== -1) return -1;\n        if (aP !== -1 && bP === -1) return 1;\n        return aP - bP;\n    };\n};\n\nvar poseFactory = function (_a) {\n    var getDefaultProps = _a.getDefaultProps,\n        defaultTransitions = _a.defaultTransitions,\n        bindOnChange = _a.bindOnChange,\n        startAction = _a.startAction,\n        stopAction = _a.stopAction,\n        readValue = _a.readValue,\n        readValueFromSource = _a.readValueFromSource,\n        resolveTarget = _a.resolveTarget,\n        setValue = _a.setValue,\n        setValueNative = _a.setValueNative,\n        createValue = _a.createValue,\n        convertValue = _a.convertValue,\n        getInstantTransition = _a.getInstantTransition,\n        getTransitionProps = _a.getTransitionProps,\n        addActionDelay = _a.addActionDelay,\n        selectValueToRead = _a.selectValueToRead,\n        convertTransitionDefinition = _a.convertTransitionDefinition,\n        transformPose = _a.transformPose,\n        posePriority = _a.posePriority,\n        forceRender = _a.forceRender,\n        extendAPI = _a.extendAPI;\n    return function (config) {\n        var parentValues = config.parentValues,\n            _a = config.ancestorValues,\n            ancestorValues = _a === void 0 ? [] : _a;\n        if (parentValues) ancestorValues.unshift({ values: parentValues });\n        var activeActions = new Map();\n        var activePoses = new Map();\n        var children = new Set();\n        var poses = generateTransitions(selectPoses(config), defaultTransitions);\n        var _b = config.props,\n            props = _b === void 0 ? {} : _b;\n        if (getDefaultProps) props = __assign({}, getDefaultProps(config), props);\n        var passive = config.passive,\n            userSetValues = config.values,\n            _c = config.initialPose,\n            initialPose = _c === void 0 ? DEFAULT_INITIAL_POSE : _c;\n        var values = createValueMap({\n            poses: poses,\n            passive: passive,\n            ancestorValues: ancestorValues,\n            readValue: readValue,\n            setValueNative: setValueNative,\n            createValue: createValue,\n            convertValue: convertValue,\n            readValueFromSource: readValueFromSource,\n            userSetValues: userSetValues,\n            initialPose: initialPose,\n            activePoses: activePoses,\n            props: props\n        });\n        var state = {\n            activeActions: activeActions,\n            activePoses: activePoses,\n            children: children,\n            props: props,\n            values: values\n        };\n        var onChange = config.onChange;\n        if (onChange) Object.keys(onChange).forEach(bindOnChange(values, onChange));\n        var set = createPoseSetter({\n            state: state,\n            poses: poses,\n            getInstantTransition: getInstantTransition,\n            getTransitionProps: getTransitionProps,\n            convertTransitionDefinition: convertTransitionDefinition,\n            setValue: setValue,\n            setValueNative: setValueNative,\n            startAction: startAction,\n            stopAction: stopAction,\n            resolveTarget: resolveTarget,\n            addActionDelay: addActionDelay,\n            transformPose: transformPose,\n            posePriority: posePriority,\n            forceRender: forceRender\n        });\n        var has = function (poseName) {\n            return !!poses[poseName];\n        };\n        var api = {\n            set: set,\n            unset: function (poseName, poseProps) {\n                var posesToSet = [];\n                activePoses.forEach(function (valuePoses) {\n                    var poseIndex = valuePoses.indexOf(poseName);\n                    if (poseIndex === -1) return;\n                    var currentPose = valuePoses[0];\n                    valuePoses.splice(poseIndex, 1);\n                    var nextPose = valuePoses[0];\n                    if (nextPose === currentPose) return;\n                    if (posesToSet.indexOf(nextPose) === -1) {\n                        posesToSet.push(nextPose);\n                    }\n                });\n                var animationsToResolve = posesToSet.sort(sortByReversePriority(posePriority)).map(function (poseToSet) {\n                    return set(poseToSet, poseProps, false);\n                });\n                children.forEach(function (child) {\n                    return animationsToResolve.push(child.unset(poseName));\n                });\n                return Promise.all(animationsToResolve);\n            },\n            get: function (valueName) {\n                return valueName ? selectValueToRead(values.get(valueName)) : selectAllValues(values, selectValueToRead);\n            },\n            has: has,\n            setProps: function (newProps) {\n                return state.props = __assign({}, state.props, newProps);\n            },\n            _addChild: function (childConfig, factory) {\n                var child = factory(__assign({ initialPose: initialPose }, childConfig, { ancestorValues: [{ label: config.label, values: values }].concat(ancestorValues) }));\n                children.add(child);\n                return child;\n            },\n            removeChild: function (child) {\n                return children.delete(child);\n            },\n            clearChildren: function () {\n                children.forEach(function (child) {\n                    return child.destroy();\n                });\n                children.clear();\n            },\n            destroy: function () {\n                activeActions.forEach(stopAction);\n                children.forEach(function (child) {\n                    return child.destroy();\n                });\n            }\n        };\n        return extendAPI(api, state, config);\n    };\n};\n\n/* harmony default export */ var pose_core_es = (poseFactory);\n\n// CONCATENATED MODULE: ./node_modules/popmotion-pose/dist/popmotion-pose.es.js\n\n\n\n\n\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nvar popmotion_pose_es_assign = function () {\n    popmotion_pose_es_assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return popmotion_pose_es_assign.apply(this, arguments);\n};\n\nfunction popmotion_pose_es_rest(s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    return t;\n}\n\nvar BoundingBoxDimension;\n(function (BoundingBoxDimension) {\n    BoundingBoxDimension[\"width\"] = \"width\";\n    BoundingBoxDimension[\"height\"] = \"height\";\n    BoundingBoxDimension[\"left\"] = \"left\";\n    BoundingBoxDimension[\"right\"] = \"right\";\n    BoundingBoxDimension[\"top\"] = \"top\";\n    BoundingBoxDimension[\"bottom\"] = \"bottom\";\n})(BoundingBoxDimension || (BoundingBoxDimension = {}));\n\nvar measureWithoutTransform = function (element) {\n    var transform$$1 = element.style.transform;\n    element.style.transform = '';\n    var bbox = element.getBoundingClientRect();\n    element.style.transform = transform$$1;\n    return bbox;\n};\nvar popmotion_pose_es_resolveProp = function (target, props) {\n    return typeof target === 'function' ? target(props) : target;\n};\n\nvar popmotion_pose_es_interpolate = transformers.interpolate;\nvar singleAxisPointer = function (axis) {\n    return function (from) {\n        var _a;\n        return index$1((_a = {}, _a[axis] = typeof from === 'string' ? parseFloat(from) : from, _a)).pipe(function (v) {\n            return v[axis];\n        });\n    };\n};\nvar pointerX = /*#__PURE__*/singleAxisPointer('x');\nvar pointerY = /*#__PURE__*/singleAxisPointer('y');\nvar createPointer = function (axisPointerCreator, min, max, measurement) {\n    return function (transitionProps) {\n        var from = transitionProps.from,\n            type = transitionProps.type,\n            dimensions = transitionProps.dimensions,\n            dragBounds = transitionProps.dragBounds;\n        var axisPointer = axisPointerCreator(dimensions.measurementAsPixels(measurement, from, type));\n        var transformQueue = [];\n        if (dragBounds) {\n            var resolvedDragBounds_1 = popmotion_pose_es_resolveProp(dragBounds, transitionProps);\n            if (resolvedDragBounds_1[min] !== undefined) {\n                transformQueue.push(function (v) {\n                    return Math.max(v, dimensions.measurementAsPixels(measurement, resolvedDragBounds_1[min], type));\n                });\n            }\n            if (resolvedDragBounds_1[max] !== undefined) {\n                transformQueue.push(function (v) {\n                    return Math.min(v, dimensions.measurementAsPixels(measurement, resolvedDragBounds_1[max], type));\n                });\n            }\n        }\n        if (type === percent) {\n            transformQueue.push(popmotion_pose_es_interpolate([0, dimensions.get(measurement)], [0, 100], { clamp: false }), function (v) {\n                return v + '%';\n            });\n        }\n        return transformQueue.length ? axisPointer.pipe.apply(axisPointer, transformQueue) : axisPointer;\n    };\n};\nvar just = function (from) {\n    return popmotion_es_action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        update(from);\n        complete();\n    });\n};\nvar underDampedSpring = function (_a) {\n    var from = _a.from,\n        velocity = _a.velocity,\n        to = _a.to;\n    return vectorSpring({\n        from: from,\n        to: to,\n        velocity: velocity,\n        stiffness: 500,\n        damping: 25,\n        restDelta: 0.5,\n        restSpeed: 10\n    });\n};\nvar overDampedSpring = function (_a) {\n    var from = _a.from,\n        velocity = _a.velocity,\n        to = _a.to;\n    return vectorSpring({ from: from, to: to, velocity: velocity, stiffness: 700, damping: to === 0 ? 100 : 35 });\n};\nvar linearTween = function (_a) {\n    var from = _a.from,\n        to = _a.to;\n    return tween({ from: from, to: to, ease: linear });\n};\nvar intelligentTransition = {\n    x: underDampedSpring,\n    y: underDampedSpring,\n    z: underDampedSpring,\n    rotate: underDampedSpring,\n    rotateX: underDampedSpring,\n    rotateY: underDampedSpring,\n    rotateZ: underDampedSpring,\n    scaleX: overDampedSpring,\n    scaleY: overDampedSpring,\n    scale: overDampedSpring,\n    opacity: linearTween,\n    default: tween\n};\nvar dragAction = /*#__PURE__*/popmotion_pose_es_assign({}, intelligentTransition, { x: /*#__PURE__*/createPointer(pointerX, 'left', 'right', BoundingBoxDimension.width), y: /*#__PURE__*/createPointer(pointerY, 'top', 'bottom', BoundingBoxDimension.height) });\nvar justAxis = function (_a) {\n    var from = _a.from;\n    return just(from);\n};\nvar intelligentDragEnd = /*#__PURE__*/popmotion_pose_es_assign({}, intelligentTransition, { x: justAxis, y: justAxis });\nvar popmotion_pose_es_defaultTransitions = /*#__PURE__*/new Map([['default', intelligentTransition], ['drag', dragAction], ['dragEnd', intelligentDragEnd]]);\n\nvar animationLookup = {\n    tween: tween,\n    spring: vectorSpring,\n    decay: vectorDecay,\n    keyframes: keyframes,\n    physics: vectorPhysics\n};\nvar easingLookup = {\n    linear: linear,\n    easeIn: easeIn,\n    easeOut: easeOut,\n    easeInOut: easeInOut,\n    circIn: circIn,\n    circOut: circOut,\n    circInOut: circInOut,\n    backIn: backIn,\n    backOut: backOut,\n    backInOut: backInOut,\n    anticipate: anticipate\n};\n\nvar auto = {\n    test: function (v) {\n        return v === 'auto';\n    },\n    parse: function (v) {\n        return v;\n    }\n};\nvar valueTypeTests = [number, degrees, percent, px, vw, vh, auto];\nvar testValueType = function (v) {\n    return function (type) {\n        return type.test(v);\n    };\n};\nvar popmotion_pose_es_getValueType = function (v) {\n    return valueTypeTests.find(testValueType(v));\n};\n\nvar createPassiveValue = function (init, parent, transform$$1) {\n    var raw = popmotion_es_value(transform$$1(init));\n    parent.raw.subscribe(function (v) {\n        return raw.update(transform$$1(v));\n    });\n    return { raw: raw };\n};\nvar popmotion_pose_es_createValue = function (init) {\n    var type = popmotion_pose_es_getValueType(init);\n    var raw = popmotion_es_value(init);\n    return { raw: raw, type: type };\n};\nvar popmotion_pose_es_addActionDelay = function (delay$$1, transition) {\n    if (delay$$1 === void 0) {\n        delay$$1 = 0;\n    }\n    return chain(popmotion_es_delay(delay$$1), transition);\n};\nvar isCubicBezierArgs = function (args) {\n    return typeof args[0] === 'number';\n};\nvar getAction = function (v, _a, _b) {\n    var from = _b.from,\n        to = _b.to,\n        velocity = _b.velocity;\n    var _c = _a.type,\n        type = _c === void 0 ? 'tween' : _c,\n        definedEase = _a.ease,\n        def = popmotion_pose_es_rest(_a, [\"type\", \"ease\"]);\n    invariant(animationLookup[type] !== undefined, \"Invalid transition type '\" + type + \"'. Valid transition types are: tween, spring, decay, physics and keyframes.\");\n    var ease;\n    if (type === 'tween') {\n        if (typeof definedEase !== 'function') {\n            if (typeof definedEase === 'string') {\n                invariant(easingLookup[definedEase] !== undefined, \"Invalid easing type '\" + definedEase + \"'. popmotion.io/pose/api/config\");\n                ease = easingLookup[definedEase];\n            } else if (Array.isArray(definedEase) && isCubicBezierArgs(definedEase)) {\n                invariant(definedEase.length === 4, \"Cubic bezier arrays must contain four numerical values.\");\n                var x1 = definedEase[0],\n                    y1 = definedEase[1],\n                    x2 = definedEase[2],\n                    y2 = definedEase[3];\n                ease = cubicBezier(x1, y1, x2, y2);\n            }\n        }\n    }\n    ease = ease || definedEase;\n    var baseProps = type !== 'keyframes' ? {\n        from: from,\n        to: to,\n        velocity: velocity,\n        ease: ease\n    } : { ease: ease };\n    return animationLookup[type](popmotion_pose_es_assign({}, baseProps, def));\n};\nvar isAction = function (action$$1) {\n    return typeof action$$1.start !== 'undefined';\n};\nvar popmotion_pose_es_pose = function (_a) {\n    var transformPose = _a.transformPose,\n        addListenerToValue = _a.addListenerToValue,\n        extendAPI = _a.extendAPI,\n        readValueFromSource = _a.readValueFromSource,\n        posePriority = _a.posePriority,\n        setValueNative = _a.setValueNative;\n    return pose_core_es({\n        bindOnChange: function (values, onChange) {\n            return function (key) {\n                if (!values.has(key)) return;\n                var raw = values.get(key).raw;\n                raw.subscribe(onChange[key]);\n            };\n        },\n        readValue: function (_a) {\n            var raw = _a.raw;\n            return raw.get();\n        },\n        setValue: function (_a, to) {\n            var raw = _a.raw;\n            return raw.update(to);\n        },\n        createValue: function (init, key, _a, _b) {\n            var elementStyler = _a.elementStyler;\n            var _c = _b === void 0 ? {} : _b,\n                passiveParent = _c.passiveParent,\n                passiveProps = _c.passiveProps;\n            var val = passiveParent ? createPassiveValue(init, passiveParent, passiveProps) : popmotion_pose_es_createValue(init);\n            val.raw.subscribe(addListenerToValue(key, elementStyler));\n            return val;\n        },\n        convertValue: function (raw, key, _a) {\n            var elementStyler = _a.elementStyler;\n            raw.subscribe(addListenerToValue(key, elementStyler));\n            return {\n                raw: raw,\n                type: popmotion_pose_es_getValueType(raw.get())\n            };\n        },\n        getTransitionProps: function (_a, to) {\n            var raw = _a.raw,\n                type = _a.type;\n            return {\n                from: raw.get(),\n                velocity: raw.getVelocity(),\n                to: to,\n                type: type\n            };\n        },\n        resolveTarget: function (_, to) {\n            return to;\n        },\n        selectValueToRead: function (_a) {\n            var raw = _a.raw;\n            return raw;\n        },\n        startAction: function (_a, action$$1, complete) {\n            var raw = _a.raw;\n            var reaction = {\n                update: function (v) {\n                    return raw.update(v);\n                },\n                complete: complete\n            };\n            return action$$1.start(reaction);\n        },\n        stopAction: function (action$$1) {\n            return action$$1.stop();\n        },\n        getInstantTransition: function (_, _a) {\n            var to = _a.to;\n            return just(to);\n        },\n        convertTransitionDefinition: function (val, def, props) {\n            if (isAction(def)) return def;\n            var delay$$1 = def.delay,\n                min = def.min,\n                max = def.max,\n                round = def.round,\n                remainingDef = popmotion_pose_es_rest(def, [\"delay\", \"min\", \"max\", \"round\"]);\n            var action$$1 = getAction(val, remainingDef, props);\n            var outputPipe = [];\n            if (delay$$1) action$$1 = popmotion_pose_es_addActionDelay(delay$$1, action$$1);\n            if (min !== undefined) outputPipe.push(function (v) {\n                return Math.max(v, min);\n            });\n            if (max !== undefined) outputPipe.push(function (v) {\n                return Math.min(v, max);\n            });\n            if (round) outputPipe.push(Math.round);\n            return outputPipe.length ? action$$1.pipe.apply(action$$1, outputPipe) : action$$1;\n        },\n        setValueNative: setValueNative,\n        addActionDelay: popmotion_pose_es_addActionDelay,\n        defaultTransitions: popmotion_pose_es_defaultTransitions,\n        transformPose: transformPose,\n        readValueFromSource: readValueFromSource,\n        posePriority: posePriority,\n        extendAPI: extendAPI\n    });\n};\n\nvar createDimensions = function (element) {\n    var hasMeasured = false;\n    var current = {\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0,\n        bottom: 0,\n        right: 0\n    };\n    return {\n        get: function (measurement) {\n            return measurement ? current[measurement] : current;\n        },\n        measure: function () {\n            current = element.getBoundingClientRect();\n            hasMeasured = true;\n            return current;\n        },\n        measurementAsPixels: function (measurement, value$$1, type) {\n            return type === percent ? (typeof value$$1 === 'string' ? parseFloat(value$$1) : value$$1) / 100 * current[measurement] : value$$1;\n        },\n        has: function () {\n            return hasMeasured;\n        }\n    };\n};\n\nvar makeUIEventApplicator = function (_a) {\n    var startEvents = _a.startEvents,\n        endEvents = _a.endEvents,\n        startPose = _a.startPose,\n        endPose = _a.endPose,\n        startCallback = _a.startCallback,\n        endCallback = _a.endCallback,\n        useDocumentToEnd = _a.useDocumentToEnd,\n        preventScroll = _a.preventScroll;\n    return function (element, activeActions, poser, config) {\n        var startListener = startPose + 'Start';\n        var endListener = startPose + 'End';\n        var moveListener = startPose + 'Move';\n        if (preventScroll) {\n            var touchMoveListener = listen(element, 'touchmove', {\n                passive: false\n            }).start(function (e) {\n                e.preventDefault();\n            });\n            activeActions.set(moveListener, touchMoveListener);\n        }\n        var eventStartListener = listen(element, startEvents).start(function (startEvent) {\n            poser.unset(endPose);\n            poser.set(startPose);\n            if (startCallback && config[startCallback]) config[startCallback](startEvent);\n            var eventEndListener = listen(useDocumentToEnd ? document.documentElement : element, endEvents + (useDocumentToEnd ? ' mouseenter' : '')).start(function (endEvent) {\n                if (useDocumentToEnd && endEvent.type === 'mouseenter' && endEvent.buttons === 1) {\n                    return;\n                }\n                activeActions.get(endListener).stop();\n                poser.unset(startPose);\n                poser.set(endPose);\n                if (endCallback && config[endCallback]) config[endCallback](endEvent);\n            });\n            activeActions.set(endListener, eventEndListener);\n        });\n        activeActions.set(startListener, eventStartListener);\n    };\n};\nvar events = {\n    draggable: /*#__PURE__*/makeUIEventApplicator({\n        startEvents: 'mousedown touchstart',\n        endEvents: 'mouseup touchend',\n        startPose: 'drag',\n        endPose: 'dragEnd',\n        startCallback: 'onDragStart',\n        endCallback: 'onDragEnd',\n        useDocumentToEnd: true,\n        preventScroll: true\n    }),\n    hoverable: /*#__PURE__*/makeUIEventApplicator({\n        startEvents: 'mouseenter',\n        endEvents: 'mouseleave',\n        startPose: 'hover',\n        endPose: 'hoverEnd'\n    }),\n    focusable: /*#__PURE__*/makeUIEventApplicator({\n        startEvents: 'focus',\n        endEvents: 'blur',\n        startPose: 'focus',\n        endPose: 'blur'\n    }),\n    pressable: /*#__PURE__*/makeUIEventApplicator({\n        startEvents: 'mousedown touchstart',\n        endEvents: 'mouseup touchend',\n        startPose: 'press',\n        endPose: 'pressEnd',\n        startCallback: 'onPressStart',\n        endCallback: 'onPressEnd',\n        useDocumentToEnd: true\n    })\n};\nvar eventKeys = /*#__PURE__*/Object.keys(events);\nvar appendEventListeners = function (element, activeActions, poser, _a) {\n    var props = _a.props;\n    return eventKeys.forEach(function (key) {\n        if (props[key]) events[key](element, activeActions, poser, props);\n    });\n};\n\nvar ORIGIN_START = 0;\nvar ORIGIN_CENTER = '50%';\nvar ORIGIN_END = '100%';\nvar findCenter = function (_a) {\n    var top = _a.top,\n        right = _a.right,\n        bottom = _a.bottom,\n        left = _a.left;\n    return {\n        x: (left + right) / 2,\n        y: (top + bottom) / 2\n    };\n};\nvar positionalProps = ['width', 'height', 'top', 'left', 'bottom', 'right'];\nvar positionalPropsDict = /*#__PURE__*/new Set(positionalProps);\nvar checkPositionalProp = function (key) {\n    return positionalPropsDict.has(key);\n};\nvar hasPositionalProps = function (pose) {\n    return Object.keys(pose).some(checkPositionalProp);\n};\nvar isFlipPose = function (flip, key, state) {\n    return state.props.element instanceof HTMLElement && (flip === true || key === 'flip');\n};\nvar popmotion_pose_es_setValue = function (_a, key, to) {\n    var values = _a.values,\n        props = _a.props;\n    if (values.has(key)) {\n        var raw = values.get(key).raw;\n        raw.update(to);\n        raw.update(to);\n    } else {\n        values.set(key, {\n            raw: popmotion_es_value(to, function (v) {\n                return props.elementStyler.set(key, v);\n            })\n        });\n    }\n};\nvar explicitlyFlipPose = function (state, nextPose) {\n    var _a = state.props,\n        dimensions = _a.dimensions,\n        elementStyler = _a.elementStyler;\n    dimensions.measure();\n    var width = nextPose.width,\n        height = nextPose.height,\n        top = nextPose.top,\n        left = nextPose.left,\n        bottom = nextPose.bottom,\n        right = nextPose.right,\n        position = nextPose.position,\n        remainingPose = popmotion_pose_es_rest(nextPose, [\"width\", \"height\", \"top\", \"left\", \"bottom\", \"right\", \"position\"]);\n    var propsToSet = positionalProps.concat('position').reduce(function (acc, key) {\n        if (nextPose[key] !== undefined) {\n            acc[key] = popmotion_pose_es_resolveProp(nextPose[key], state.props);\n        }\n        return acc;\n    }, {});\n    elementStyler.set(propsToSet).render();\n    return implicitlyFlipPose(state, remainingPose);\n};\nvar implicitlyFlipPose = function (state, nextPose) {\n    var _a = state.props,\n        dimensions = _a.dimensions,\n        element = _a.element,\n        elementStyler = _a.elementStyler;\n    if (!dimensions.has()) return {};\n    var prev = dimensions.get();\n    var next = measureWithoutTransform(element);\n    var originX = prev.left === next.left ? ORIGIN_START : prev.right === next.right ? ORIGIN_END : ORIGIN_CENTER;\n    var originY = prev.top === next.top ? ORIGIN_START : prev.bottom === next.bottom ? ORIGIN_END : ORIGIN_CENTER;\n    elementStyler.set({ originX: originX, originY: originY });\n    if (prev.width !== next.width) {\n        popmotion_pose_es_setValue(state, 'scaleX', prev.width / next.width);\n        nextPose.scaleX = 1;\n    }\n    if (prev.height !== next.height) {\n        popmotion_pose_es_setValue(state, 'scaleY', prev.height / next.height);\n        nextPose.scaleY = 1;\n    }\n    var prevCenter = findCenter(prev);\n    var nextCenter = findCenter(next);\n    if (originX === ORIGIN_CENTER) {\n        popmotion_pose_es_setValue(state, 'x', prevCenter.x - nextCenter.x);\n        nextPose.x = 0;\n    }\n    if (originY === ORIGIN_CENTER) {\n        popmotion_pose_es_setValue(state, 'y', prevCenter.y - nextCenter.y);\n        nextPose.y = 0;\n    }\n    elementStyler.render();\n    return nextPose;\n};\nvar flipPose = function (props, nextPose) {\n    return hasPositionalProps(nextPose) ? explicitlyFlipPose(props, nextPose) : implicitlyFlipPose(props, nextPose);\n};\n\nvar getPosFromMatrix = function (matrix, pos) {\n    return parseFloat(matrix.split(', ')[pos]);\n};\nvar getTranslateFromMatrix = function (pos2, pos3) {\n    return function (element, bbox, _a) {\n        var transform$$1 = _a.transform;\n        if (transform$$1 === 'none') return 0;\n        var matrix3d = transform$$1.match(/^matrix3d\\((.+)\\)$/);\n        if (matrix3d) return getPosFromMatrix(matrix3d[1], pos3);\n        return getPosFromMatrix(transform$$1.match(/^matrix\\((.+)\\)$/)[1], pos2);\n    };\n};\nvar positionalValues = {\n    width: function (element, _a) {\n        var width = _a.width;\n        return width;\n    },\n    height: function (element, _a) {\n        var height = _a.height;\n        return height;\n    },\n    top: function (element, bbox, _a) {\n        var top = _a.top;\n        return parseFloat(top);\n    },\n    left: function (element, bbox, _a) {\n        var left = _a.left;\n        return parseFloat(left);\n    },\n    bottom: function (element, _a, _b) {\n        var height = _a.height;\n        var top = _b.top;\n        return parseFloat(top) + height;\n    },\n    right: function (element, _a, _b) {\n        var width = _a.width;\n        var left = _b.left;\n        return parseFloat(left) + width;\n    },\n    x: /*#__PURE__*/getTranslateFromMatrix(4, 13),\n    y: /*#__PURE__*/getTranslateFromMatrix(5, 14)\n};\nvar isPositionalKey = function (v) {\n    return positionalValues[v] !== undefined;\n};\nvar isPositional = function (pose) {\n    return Object.keys(pose).some(isPositionalKey);\n};\nvar convertPositionalUnits = function (state, nextPose) {\n    var values = state.values,\n        props = state.props;\n    var element = props.element,\n        elementStyler = props.elementStyler;\n    var positionalPoseKeys = Object.keys(nextPose).filter(isPositionalKey);\n    var changedPositionalKeys = [];\n    var elementComputedStyle = getComputedStyle(element);\n    var applyAtEndHasBeenCopied = false;\n    positionalPoseKeys.forEach(function (key) {\n        var value$$1 = values.get(key);\n        var fromValueType = popmotion_pose_es_getValueType(value$$1.raw.get());\n        var to = popmotion_pose_es_resolveProp(nextPose[key], props);\n        var toValueType = popmotion_pose_es_getValueType(to);\n        if (fromValueType !== toValueType) {\n            changedPositionalKeys.push(key);\n            if (!applyAtEndHasBeenCopied) {\n                applyAtEndHasBeenCopied = true;\n                nextPose.applyAtEnd = nextPose.applyAtEnd ? popmotion_pose_es_assign({}, nextPose.applyAtEnd) : {};\n            }\n            nextPose.applyAtEnd[key] = nextPose.applyAtEnd[key] || nextPose[key];\n            popmotion_pose_es_setValue(state, key, to);\n        }\n    });\n    if (!changedPositionalKeys.length) return nextPose;\n    var originBbox = element.getBoundingClientRect();\n    var top = elementComputedStyle.top,\n        left = elementComputedStyle.left,\n        bottom = elementComputedStyle.bottom,\n        right = elementComputedStyle.right,\n        transform$$1 = elementComputedStyle.transform;\n    var originComputedStyle = { top: top, left: left, bottom: bottom, right: right, transform: transform$$1 };\n    elementStyler.render();\n    var targetBbox = element.getBoundingClientRect();\n    changedPositionalKeys.forEach(function (key) {\n        popmotion_pose_es_setValue(state, key, positionalValues[key](element, originBbox, originComputedStyle));\n        nextPose[key] = positionalValues[key](element, targetBbox, elementComputedStyle);\n    });\n    elementStyler.render();\n    return nextPose;\n};\n\nvar getCurrent = function (prop) {\n    return function (_a) {\n        var elementStyler = _a.elementStyler;\n        return elementStyler.get(prop);\n    };\n};\nvar dragPoses = function (draggable) {\n    var drag = {\n        preTransition: function (_a) {\n            var dimensions = _a.dimensions;\n            return dimensions.measure();\n        }\n    };\n    var dragEnd = {};\n    if (draggable === true || draggable === 'x') {\n        drag.x = dragEnd.x = getCurrent('x');\n    }\n    if (draggable === true || draggable === 'y') {\n        drag.y = dragEnd.y = getCurrent('y');\n    }\n    return { drag: drag, dragEnd: dragEnd };\n};\nvar createPoseConfig = function (element, _a) {\n    var onDragStart = _a.onDragStart,\n        onDragEnd = _a.onDragEnd,\n        onPressStart = _a.onPressStart,\n        onPressEnd = _a.onPressEnd,\n        draggable = _a.draggable,\n        hoverable = _a.hoverable,\n        focusable = _a.focusable,\n        pressable = _a.pressable,\n        dragBounds = _a.dragBounds,\n        config = popmotion_pose_es_rest(_a, [\"onDragStart\", \"onDragEnd\", \"onPressStart\", \"onPressEnd\", \"draggable\", \"hoverable\", \"focusable\", \"pressable\", \"dragBounds\"]);\n    var poseConfig = popmotion_pose_es_assign({ flip: {} }, config, { props: popmotion_pose_es_assign({}, config.props, { onDragStart: onDragStart,\n            onDragEnd: onDragEnd,\n            onPressStart: onPressStart,\n            onPressEnd: onPressEnd,\n            dragBounds: dragBounds,\n            draggable: draggable,\n            hoverable: hoverable,\n            focusable: focusable,\n            pressable: pressable,\n            element: element, elementStyler: stylefire_es(element, { preparseOutput: false }), dimensions: createDimensions(element) }) });\n    if (draggable) {\n        var _b = dragPoses(draggable),\n            drag = _b.drag,\n            dragEnd = _b.dragEnd;\n        poseConfig.drag = popmotion_pose_es_assign({}, drag, poseConfig.drag);\n        poseConfig.dragEnd = popmotion_pose_es_assign({}, dragEnd, poseConfig.dragEnd);\n    }\n    return poseConfig;\n};\nvar domPose = /*#__PURE__*/popmotion_pose_es_pose({\n    posePriority: ['drag', 'press', 'focus', 'hover'],\n    transformPose: function (_a, name, state) {\n        var flip = _a.flip,\n            pose$$1 = popmotion_pose_es_rest(_a, [\"flip\"]);\n        if (isFlipPose(flip, name, state)) {\n            return flipPose(state, pose$$1);\n        } else if (isPositional(pose$$1)) {\n            return convertPositionalUnits(state, pose$$1);\n        }\n        return pose$$1;\n    },\n    forceRender: function (_a) {\n        var elementStyler = _a.elementStyler;\n        elementStyler.render();\n    },\n    addListenerToValue: function (key, elementStyler) {\n        return function (v) {\n            return elementStyler.set(key, v);\n        };\n    },\n    readValueFromSource: function (key, _a) {\n        var elementStyler = _a.elementStyler,\n            dragBounds = _a.dragBounds;\n        var value$$1 = elementStyler.get(key);\n        if (dragBounds && (key === 'x' || key === 'y')) {\n            var bound = key === 'x' ? dragBounds.left || dragBounds.right : dragBounds.top || dragBounds.bottom;\n            if (bound) {\n                var boundType = popmotion_pose_es_getValueType(bound);\n                value$$1 = boundType.transform(value$$1);\n            }\n        }\n        return isNaN(value$$1) ? value$$1 : parseFloat(value$$1);\n    },\n    setValueNative: function (key, to, _a) {\n        var elementStyler = _a.elementStyler;\n        return elementStyler.set(key, to);\n    },\n    extendAPI: function (api, _a, config) {\n        var props = _a.props,\n            activeActions = _a.activeActions;\n        var measure = props.dimensions.measure;\n        var poserApi = popmotion_pose_es_assign({}, api, { addChild: function (element, childConfig) {\n                return api._addChild(createPoseConfig(element, childConfig), domPose);\n            }, measure: measure, flip: function (op) {\n                if (op) {\n                    measure();\n                    op();\n                }\n                return api.set('flip');\n            } });\n        props.elementStyler.render();\n        appendEventListeners(props.element, activeActions, poserApi, config);\n        return poserApi;\n    }\n});\nvar domPose$1 = function (element, config) {\n    return domPose(createPoseConfig(element, config));\n};\n\n/* harmony default export */ var popmotion_pose_es = (domPose$1);\n\n// CONCATENATED MODULE: ./node_modules/react-pose/node_modules/@emotion/memoize/dist/memoize.browser.esm.js\nfunction memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\n/* harmony default export */ var memoize_browser_esm = (memoize);\n\n// CONCATENATED MODULE: ./node_modules/react-pose/node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js\n\n\nvar reactPropsRegex = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/; // https://esbench.com/bench/5bfee68a4cd7e6009ef61d23\n\nvar is_prop_valid_browser_esm_index = memoize_browser_esm(function (prop) {\n  return reactPropsRegex.test(prop) || prop.charCodeAt(0) === 111\n  /* o */\n  && prop.charCodeAt(1) === 110\n  /* n */\n  && prop.charCodeAt(2) < 91;\n}\n/* Z+1 */\n);\n\n/* harmony default export */ var is_prop_valid_browser_esm = (is_prop_valid_browser_esm_index);\n\n// CONCATENATED MODULE: ./node_modules/react-pose/dist/react-pose.es.js\n\n\n\n\n\n\nvar react_pose_es_hasChanged = function (prev, next) {\r\n    if (prev === next)\r\n        return false;\r\n    var prevIsArray = Array.isArray(prev);\r\n    var nextIsArray = Array.isArray(next);\r\n    if (prevIsArray !== nextIsArray || (!prevIsArray && !nextIsArray)) {\r\n        return true;\r\n    }\r\n    else if (prevIsArray && nextIsArray) {\r\n        var numPrev = prev.length;\r\n        var numNext = next.length;\r\n        if (numPrev !== numNext)\r\n            return true;\r\n        for (var i = 0; i < numPrev; i++) {\r\n            if (prev[i] !== next[i])\r\n                return true;\r\n        }\r\n    }\r\n    return false;\r\n};\n\nvar pickAssign = function (shouldPick, sources) {\r\n    return sources.reduce(function (picked, source) {\r\n        for (var key in source) {\r\n            if (shouldPick(key)) {\r\n                picked[key] = source[key];\r\n            }\r\n        }\r\n        return picked;\r\n    }, {});\r\n};\n\nvar react_pose_es_a = Object(external_root_React_commonjs_react_commonjs2_react_[\"createContext\"])({}), PoseParentConsumer = react_pose_es_a.Consumer, PoseParentProvider = react_pose_es_a.Provider;\r\nvar calcPopFromFlowStyle = function (el) {\r\n    var offsetTop = el.offsetTop, offsetLeft = el.offsetLeft, offsetWidth = el.offsetWidth, offsetHeight = el.offsetHeight;\r\n    return {\r\n        position: 'absolute',\r\n        top: offsetTop,\r\n        left: offsetLeft,\r\n        width: offsetWidth,\r\n        height: offsetHeight\r\n    };\r\n};\r\nvar hasPose = function (pose, key) {\r\n    return Array.isArray(pose) ? pose.indexOf(key) !== -1 : pose === key;\r\n};\r\nvar objectToMap = function (obj) {\r\n    return Object.keys(obj).reduce(function (map, key) {\r\n        map.set(key, { raw: obj[key] });\r\n        return map;\r\n    }, new Map());\r\n};\r\nvar testAlwaysTrue = function () { return true; };\r\nvar filterProps = function (_a) {\r\n    var elementType = _a.elementType, poseConfig = _a.poseConfig, onValueChange = _a.onValueChange, innerRef = _a.innerRef, _pose = _a._pose, pose = _a.pose, initialPose = _a.initialPose, poseKey = _a.poseKey, onPoseComplete = _a.onPoseComplete, getParentPoseConfig = _a.getParentPoseConfig, registerChild = _a.registerChild, onUnmount = _a.onUnmount, getInitialPoseFromParent = _a.getInitialPoseFromParent, popFromFlow = _a.popFromFlow, values = _a.values, parentValues = _a.parentValues, onDragStart = _a.onDragStart, onDragEnd = _a.onDragEnd, onPressStart = _a.onPressStart, onPressEnd = _a.onPressEnd, props = __rest(_a, [\"elementType\", \"poseConfig\", \"onValueChange\", \"innerRef\", \"_pose\", \"pose\", \"initialPose\", \"poseKey\", \"onPoseComplete\", \"getParentPoseConfig\", \"registerChild\", \"onUnmount\", \"getInitialPoseFromParent\", \"popFromFlow\", \"values\", \"parentValues\", \"onDragStart\", \"onDragEnd\", \"onPressStart\", \"onPressEnd\"]);\r\n    return props;\r\n};\r\nvar react_pose_es_PoseElement = (function (_super) {\r\n    __extends(PoseElement, _super);\r\n    function PoseElement(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.children = new Set();\r\n        _this.childrenHandlers = {\r\n            registerChild: function (props) {\r\n                _this.children.add(props);\r\n                if (_this.poser)\r\n                    _this.flushChildren();\r\n            },\r\n            onUnmount: function (child) { return _this.poser.removeChild(child); },\r\n            getParentPoseConfig: function () { return _this.poseConfig; },\r\n            getInitialPoseFromParent: function () { return _this.getInitialPose(); }\r\n        };\r\n        _this.setRef = function (ref) {\r\n            warning(ref === null || (ref instanceof Element && _this.ref === undefined), 'ref must be provided to the same DOM component for the entire lifecycle of a posed component.');\r\n            _this.ref = ref;\r\n            var innerRef = _this.props.innerRef;\r\n            if (!innerRef)\r\n                return;\r\n            if (typeof innerRef === 'function') {\r\n                innerRef(ref);\r\n            }\r\n            else {\r\n                innerRef.current = ref;\r\n            }\r\n        };\r\n        _this.shouldForwardProp =\r\n            typeof _this.props.elementType === 'string' ? is_prop_valid_browser_esm : testAlwaysTrue;\r\n        var poseConfig = _this.props.poseConfig;\r\n        _this.poseConfig =\r\n            typeof poseConfig === 'function'\r\n                ? poseConfig(filterProps(props))\r\n                : poseConfig;\r\n        return _this;\r\n    }\r\n    PoseElement.prototype.getInitialPose = function () {\r\n        var _a = this.props, getInitialPoseFromParent = _a.getInitialPoseFromParent, pose = _a.pose, _pose = _a._pose, initialPose = _a.initialPose;\r\n        if (initialPose) {\r\n            return initialPose;\r\n        }\r\n        else {\r\n            var parentPose = getInitialPoseFromParent && getInitialPoseFromParent();\r\n            var initialPoses = (Array.isArray(parentPose)\r\n                ? parentPose\r\n                : [parentPose])\r\n                .concat(pose, _pose)\r\n                .filter(Boolean);\r\n            return initialPoses.length > 0 ? initialPoses : undefined;\r\n        }\r\n    };\r\n    PoseElement.prototype.getFirstPose = function () {\r\n        var _a = this.props, initialPose = _a.initialPose, pose = _a.pose, _pose = _a._pose;\r\n        if (!initialPose)\r\n            return;\r\n        var firstPose = (Array.isArray(pose) ? pose : [pose])\r\n            .concat(_pose)\r\n            .filter(Boolean);\r\n        return firstPose.length === 1 ? firstPose[0] : firstPose;\r\n    };\r\n    PoseElement.prototype.getSetProps = function () {\r\n        var props = filterProps(this.props);\r\n        if (this.props.popFromFlow && this.ref && this.ref instanceof HTMLElement) {\r\n            if (!this.popStyle) {\r\n                props.style = __assign({}, props.style, calcPopFromFlowStyle(this.ref));\r\n                this.popStyle = props.style;\r\n            }\r\n            else {\r\n                props.style = this.popStyle;\r\n            }\r\n        }\r\n        else {\r\n            this.popStyle = null;\r\n        }\r\n        return props;\r\n    };\r\n    PoseElement.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        invariant(this.ref instanceof Element, \"No valid DOM ref found. If you're converting an existing component via posed(Component), you must ensure you're passing the ref to the host DOM node via the React.forwardRef function.\");\r\n        var _a = this.props, onValueChange = _a.onValueChange, registerChild = _a.registerChild, values = _a.values, parentValues = _a.parentValues, onDragStart = _a.onDragStart, onDragEnd = _a.onDragEnd, onPressStart = _a.onPressStart, onPressEnd = _a.onPressEnd;\r\n        var config = __assign({}, this.poseConfig, { initialPose: this.getInitialPose(), values: values || this.poseConfig.values, parentValues: parentValues ? objectToMap(parentValues) : undefined, props: this.getSetProps(), onDragStart: onDragStart,\r\n            onDragEnd: onDragEnd,\r\n            onPressStart: onPressStart,\r\n            onPressEnd: onPressEnd, onChange: onValueChange });\r\n        if (!registerChild) {\r\n            this.initPoser(popmotion_pose_es(this.ref, config));\r\n        }\r\n        else {\r\n            registerChild({\r\n                element: this.ref,\r\n                poseConfig: config,\r\n                onRegistered: function (poser) { return _this.initPoser(poser); }\r\n            });\r\n        }\r\n    };\r\n    PoseElement.prototype.getSnapshotBeforeUpdate = function () {\r\n        var _a = this.props, pose = _a.pose, _pose = _a._pose;\r\n        if (hasPose(pose, 'flip') || hasPose(_pose, 'flip'))\r\n            this.poser.measure();\r\n        return null;\r\n    };\r\n    PoseElement.prototype.componentDidUpdate = function (prevProps) {\r\n        var _a = this.props, pose = _a.pose, _pose = _a._pose, poseKey = _a.poseKey;\r\n        this.poser.setProps(this.getSetProps());\r\n        if (poseKey !== prevProps.poseKey ||\r\n            react_pose_es_hasChanged(prevProps.pose, pose) ||\r\n            pose === 'flip') {\r\n            this.setPose(pose);\r\n        }\r\n        if (_pose !== prevProps._pose || _pose === 'flip')\r\n            this.setPose(_pose);\r\n    };\r\n    PoseElement.prototype.componentWillUnmount = function () {\r\n        if (!this.poser)\r\n            return;\r\n        var onUnmount = this.props.onUnmount;\r\n        if (onUnmount)\r\n            onUnmount(this.poser);\r\n        this.poser.destroy();\r\n    };\r\n    PoseElement.prototype.initPoser = function (poser) {\r\n        this.poser = poser;\r\n        this.flushChildren();\r\n        var firstPose = this.getFirstPose();\r\n        if (firstPose)\r\n            this.setPose(firstPose);\r\n    };\r\n    PoseElement.prototype.setPose = function (pose) {\r\n        var _this = this;\r\n        var onPoseComplete = this.props.onPoseComplete;\r\n        var poseList = Array.isArray(pose) ? pose : [pose];\r\n        Promise.all(poseList.map(function (key) { return key && _this.poser.set(key); })).then(function () { return onPoseComplete && onPoseComplete(pose); });\r\n    };\r\n    PoseElement.prototype.flushChildren = function () {\r\n        var _this = this;\r\n        this.children.forEach(function (_a) {\r\n            var element = _a.element, poseConfig = _a.poseConfig, onRegistered = _a.onRegistered;\r\n            return onRegistered(_this.poser.addChild(element, poseConfig));\r\n        });\r\n        this.children.clear();\r\n    };\r\n    PoseElement.prototype.render = function () {\r\n        var elementType = this.props.elementType;\r\n        return (external_root_React_commonjs_react_commonjs2_react_default.a.createElement(PoseParentProvider, { value: this.childrenHandlers }, Object(external_root_React_commonjs_react_commonjs2_react_[\"createElement\"])(elementType, pickAssign(this.shouldForwardProp, [\r\n            this.getSetProps(),\r\n            { ref: this.setRef }\r\n        ]))));\r\n    };\r\n    return PoseElement;\r\n}(external_root_React_commonjs_react_commonjs2_react_[\"PureComponent\"]));\n\nvar supportedElements = [\r\n    'a',\r\n    'article',\r\n    'aside',\r\n    'audio',\r\n    'b',\r\n    'blockquote',\r\n    'body',\r\n    'br',\r\n    'button',\r\n    'canvas',\r\n    'caption',\r\n    'cite',\r\n    'code',\r\n    'col',\r\n    'colgroup',\r\n    'data',\r\n    'datalist',\r\n    'dialog',\r\n    'div',\r\n    'em',\r\n    'embed',\r\n    'fieldset',\r\n    'figcaption',\r\n    'figure',\r\n    'footer',\r\n    'form',\r\n    'h1',\r\n    'h2',\r\n    'h3',\r\n    'h4',\r\n    'h5',\r\n    'h6',\r\n    'head',\r\n    'header',\r\n    'hgroup',\r\n    'hr',\r\n    'i',\r\n    'iframe',\r\n    'img',\r\n    'input',\r\n    'label',\r\n    'legend',\r\n    'li',\r\n    'nav',\r\n    'object',\r\n    'ol',\r\n    'option',\r\n    'p',\r\n    'param',\r\n    'picture',\r\n    'pre',\r\n    'progress',\r\n    'q',\r\n    'section',\r\n    'select',\r\n    'span',\r\n    'strong',\r\n    'table',\r\n    'tbody',\r\n    'td',\r\n    'textarea',\r\n    'tfoot',\r\n    'th',\r\n    'thead',\r\n    'time',\r\n    'title',\r\n    'tr',\r\n    'ul',\r\n    'video',\r\n    'circle',\r\n    'clipPath',\r\n    'defs',\r\n    'ellipse',\r\n    'g',\r\n    'image',\r\n    'line',\r\n    'linearGradient',\r\n    'mask',\r\n    'path',\r\n    'pattern',\r\n    'polygon',\r\n    'polyline',\r\n    'radialGradient',\r\n    'rect',\r\n    'stop',\r\n    'svg',\r\n    'text',\r\n    'tspan'\r\n];\n\nvar componentCache = new Map();\r\nvar createComponentFactory = function (key) {\r\n    var componentFactory = function (poseConfig) {\r\n        if (poseConfig === void 0) { poseConfig = {}; }\r\n        return Object(external_root_React_commonjs_react_commonjs2_react_[\"forwardRef\"])(function (_a, ref) {\r\n            var _b = _a.withParent, withParent = _b === void 0 ? true : _b, props = __rest(_a, [\"withParent\"]);\r\n            warning(props.innerRef === undefined, 'innerRef is deprecated. Please use ref instead.');\r\n            return !withParent || props.parentValues ? (external_root_React_commonjs_react_commonjs2_react_default.a.createElement(react_pose_es_PoseElement, __assign({ poseConfig: poseConfig, innerRef: ref, elementType: key }, props))) : (external_root_React_commonjs_react_commonjs2_react_default.a.createElement(PoseParentConsumer, null, function (parentCtx) { return (external_root_React_commonjs_react_commonjs2_react_default.a.createElement(react_pose_es_PoseElement, __assign({ poseConfig: poseConfig, elementType: key, innerRef: ref }, props, parentCtx))); }));\r\n        });\r\n    };\r\n    componentCache.set(key, componentFactory);\r\n    return componentFactory;\r\n};\r\nvar getComponentFactory = function (key) {\r\n    return componentCache.has(key)\r\n        ? componentCache.get(key)\r\n        : createComponentFactory(key);\r\n};\r\nvar posed = (function (component) {\r\n    return getComponentFactory(component);\r\n});\r\nsupportedElements.reduce(function (acc, key) {\r\n    acc[key] = createComponentFactory(key);\r\n    return acc;\r\n}, posed);\n\nvar getKey = function (child) {\r\n    invariant(child && child.key !== null, 'Every child of Transition must be given a unique key');\r\n    var childKey = typeof child.key === 'number' ? child.key.toString() : child.key;\r\n    return childKey.replace('.$', '');\r\n};\r\nvar prependProps = function (element, props) {\r\n    return Object(external_root_React_commonjs_react_commonjs2_react_[\"createElement\"])(element.type, __assign({ key: element.key, ref: element.ref }, props, element.props));\r\n};\r\nvar handleTransition = function (_a, _b) {\r\n    var displayedChildren = _b.displayedChildren, finishedLeaving = _b.finishedLeaving, hasInitialized = _b.hasInitialized, indexedChildren = _b.indexedChildren, scheduleChildRemoval = _b.scheduleChildRemoval;\r\n    var incomingChildren = _a.children, preEnterPose = _a.preEnterPose, enterPose = _a.enterPose, exitPose = _a.exitPose, animateOnMount = _a.animateOnMount, enterAfterExit = _a.enterAfterExit, flipMove = _a.flipMove, onRest = _a.onRest, propsForChildren = __rest(_a, [\"children\", \"preEnterPose\", \"enterPose\", \"exitPose\", \"animateOnMount\", \"enterAfterExit\", \"flipMove\", \"onRest\"]);\r\n    var targetChildren = makeChildList(incomingChildren);\r\n    var nextState = {\r\n        displayedChildren: []\r\n    };\r\n    if (false) {}\r\n    var prevKeys = displayedChildren.map(getKey);\r\n    var nextKeys = targetChildren.map(getKey);\r\n    var hasPropsForChildren = Object.keys(propsForChildren).length !== 0;\r\n    var entering = new Set(nextKeys.filter(function (key) { return finishedLeaving.hasOwnProperty(key) || prevKeys.indexOf(key) === -1; }));\r\n    entering.forEach(function (key) { return delete finishedLeaving[key]; });\r\n    var leaving = [];\r\n    var newlyLeaving = {};\r\n    prevKeys.forEach(function (key) {\r\n        if (entering.has(key)) {\r\n            return;\r\n        }\r\n        var isLeaving = finishedLeaving.hasOwnProperty(key);\r\n        if (!isLeaving && nextKeys.indexOf(key) !== -1) {\r\n            return;\r\n        }\r\n        leaving.push(key);\r\n        if (!isLeaving) {\r\n            finishedLeaving[key] = false;\r\n            newlyLeaving[key] = true;\r\n        }\r\n    });\r\n    var moving = new Set(prevKeys.filter(function (key, i) {\r\n        return !entering.has(key) || leaving.indexOf(key) === -1;\r\n    }));\r\n    targetChildren.forEach(function (child) {\r\n        var newChildProps = {};\r\n        if (entering.has(child.key)) {\r\n            if (hasInitialized || animateOnMount) {\r\n                newChildProps.initialPose = preEnterPose;\r\n            }\r\n            newChildProps._pose = enterPose;\r\n        }\r\n        else if (moving.has(child.key) && flipMove) {\r\n            newChildProps._pose = [enterPose, 'flip'];\r\n        }\r\n        else {\r\n            newChildProps._pose = enterPose;\r\n        }\r\n        var newChild = Object(external_root_React_commonjs_react_commonjs2_react_[\"cloneElement\"])(child, newChildProps);\r\n        indexedChildren[child.key] = newChild;\r\n        nextState.displayedChildren.push(hasPropsForChildren ? prependProps(newChild, propsForChildren) : newChild);\r\n    });\r\n    leaving.forEach(function (key) {\r\n        var child = indexedChildren[key];\r\n        var newChild = newlyLeaving[key]\r\n            ? Object(external_root_React_commonjs_react_commonjs2_react_[\"cloneElement\"])(child, {\r\n                _pose: exitPose,\r\n                onPoseComplete: function (pose) {\r\n                    if (pose === exitPose)\r\n                        scheduleChildRemoval(key);\r\n                    var onPoseComplete = child.props.onPoseComplete;\r\n                    if (onPoseComplete)\r\n                        onPoseComplete(pose);\r\n                },\r\n                popFromFlow: flipMove\r\n            })\r\n            : child;\r\n        var insertionIndex = prevKeys.indexOf(key);\r\n        indexedChildren[child.key] = newChild;\r\n        nextState.displayedChildren.splice(insertionIndex, 0, hasPropsForChildren ? prependProps(newChild, propsForChildren) : newChild);\r\n    });\r\n    return nextState;\r\n};\r\nvar handleChildrenTransitions = (function (props, state) {\r\n    var newState = handleTransition(props, state);\r\n    newState.hasInitialized = true;\r\n    return newState;\r\n});\r\nvar makeChildList = function (children) {\r\n    var list = [];\r\n    external_root_React_commonjs_react_commonjs2_react_[\"Children\"].forEach(children, function (child) { return child && list.push(child); });\r\n    return list;\r\n};\n\nvar react_pose_es_Transition = (function (_super) {\r\n    __extends(Transition, _super);\r\n    function Transition() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            displayedChildren: [],\r\n            finishedLeaving: {},\r\n            hasInitialized: false,\r\n            indexedChildren: {},\r\n            scheduleChildRemoval: function (key) { return _this.removeChild(key); }\r\n        };\r\n        return _this;\r\n    }\r\n    Transition.prototype.removeChild = function (key) {\r\n        var _a = this.state, displayedChildren = _a.displayedChildren, finishedLeaving = _a.finishedLeaving;\r\n        var _b = this.props, enterAfterExit = _b.enterAfterExit, onRest = _b.onRest;\r\n        if (!finishedLeaving.hasOwnProperty(key))\r\n            return;\r\n        finishedLeaving[key] = true;\r\n        if (!Object.keys(finishedLeaving).every(function (leavingKey) { return finishedLeaving[leavingKey]; })) {\r\n            return;\r\n        }\r\n        var targetChildren = displayedChildren.filter(function (child) { return !finishedLeaving.hasOwnProperty(child.key); });\r\n        var newState = enterAfterExit\r\n            ? __assign({ finishedLeaving: {} }, handleChildrenTransitions(__assign({}, this.props, { enterAfterExit: false }), __assign({}, this.state, { displayedChildren: targetChildren }))) : {\r\n            finishedLeaving: {},\r\n            displayedChildren: targetChildren\r\n        };\r\n        this.setState(newState, onRest);\r\n    };\r\n    Transition.prototype.shouldComponentUpdate = function (nextProps, nextState) {\r\n        return this.state !== nextState;\r\n    };\r\n    Transition.prototype.render = function () {\r\n        return this.state.displayedChildren;\r\n    };\r\n    Transition.defaultProps = {\r\n        flipMove: false,\r\n        enterAfterExit: false,\r\n        preEnterPose: 'exit',\r\n        enterPose: 'enter',\r\n        exitPose: 'exit'\r\n    };\r\n    Transition.getDerivedStateFromProps = handleChildrenTransitions;\r\n    return Transition;\r\n}(external_root_React_commonjs_react_commonjs2_react_[\"Component\"]));\n\nvar react_pose_es_PoseGroup = (function (_super) {\r\n    __extends(PoseGroup, _super);\r\n    function PoseGroup() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    PoseGroup.prototype.render = function () {\r\n        return Object(external_root_React_commonjs_react_commonjs2_react_[\"createElement\"])(react_pose_es_Transition, __assign({}, this.props));\r\n    };\r\n    PoseGroup.defaultProps = {\r\n        flipMove: true\r\n    };\r\n    return PoseGroup;\r\n}(external_root_React_commonjs_react_commonjs2_react_[\"Component\"]));\n\n/* harmony default export */ var react_pose_es = (posed);\n\n\n// CONCATENATED MODULE: ./src/components/icon-info-blue.jsx\n\n // TODO remove this file entirely when icon component is ready.\n\nvar icon_info_blue_IconInfoBlue = function IconInfoBlue(_ref) {\n  var className = _ref.className;\n  return external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"svg\", {\n    className: className,\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 16 16\"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"g\", {\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"circle\", {\n    cx: \"8\",\n    cy: \"8\",\n    r: \"8\",\n    fill: \"#2196F3\"\n  }), external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"g\", {\n    fill: \"#FFF\",\n    transform: \"translate(6.5 4)\"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"circle\", {\n    cx: \"1.5\",\n    cy: \"1\",\n    r: \"1\"\n  }), external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"rect\", {\n    width: \"2\",\n    height: \"5\",\n    x: \".5\",\n    y: \"3\",\n    rx: \"1\"\n  }))));\n};\n\nicon_info_blue_IconInfoBlue.propTypes = {\n  className: prop_types_default.a.string\n};\n/* harmony default export */ var icon_info_blue = (icon_info_blue_IconInfoBlue);\n// CONCATENATED MODULE: ./src/components/popover/popover-bubble.jsx\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\nvar FadeIn = react_pose_es.span({\n  enter: {\n    opacity: 1,\n    transition: {\n      duration: 150\n    }\n  },\n  exit: {\n    opacity: 0,\n    transition: {\n      duration: 150\n    }\n  }\n});\n\nvar popover_bubble_PopoverBubble =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(PopoverBubble, _React$PureComponent);\n\n  function PopoverBubble() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PopoverBubble);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PopoverBubble)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.calculatePosition = function () {\n      var _this$props = _this.props,\n          alignment = _this$props.alignment,\n          target_rectangle = _this$props.target_rectangle,\n          _this$props$margin = _this$props.margin,\n          margin = _this$props$margin === void 0 ? 0 : _this$props$margin;\n\n      switch (alignment) {\n        case 'top':\n          return {\n            left: target_rectangle.width / 2 + target_rectangle.left,\n            bottom: window.innerHeight - target_rectangle.top + margin,\n            transform: 'translateX(-50%)'\n          };\n\n        case 'bottom':\n          return {\n            left: target_rectangle.width / 2 + target_rectangle.left,\n            top: target_rectangle.bottom + margin,\n            transform: 'translateX(-50%)'\n          };\n\n        case 'left':\n          return {\n            right: window.innerWidth - target_rectangle.left + margin,\n            top: target_rectangle.height / 2 + target_rectangle.top,\n            transform: 'translateY(-50%)'\n          };\n\n        case 'right':\n          return {\n            left: target_rectangle.right + margin,\n            top: target_rectangle.height / 2 + target_rectangle.top,\n            transform: 'translateY(-50%)'\n          };\n\n        default:\n          return {\n            left: target_rectangle.left,\n            top: target_rectangle.top\n          };\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(PopoverBubble, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          alignment = _this$props2.alignment,\n          className = _this$props2.className,\n          has_error = _this$props2.has_error,\n          icon = _this$props2.icon,\n          id = _this$props2.id,\n          is_open = _this$props2.is_open,\n          message = _this$props2.message,\n          target_rectangle = _this$props2.target_rectangle,\n          portal_container = _this$props2.portal_container;\n      if (!target_rectangle) return null;\n      var popover_bubble = external_root_React_commonjs_react_commonjs2_react_default.a.createElement(react_pose_es_PoseGroup, null, is_open && external_root_React_commonjs_react_commonjs2_react_default.a.createElement(FadeIn, {\n        key: \"fade_in\",\n        initialPose: \"exit\",\n        style: {\n          position: 'fixed',\n          zIndex: 999\n        }\n      }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"span\", {\n        style: target_rectangle ? this.calculatePosition() : {},\n        \"data-popover-pos\": alignment,\n        className: classnames_default()(className, 'dc-popover__bubble', {\n          'dc-popover__bubble--error': has_error\n        }),\n        id: id\n      }, icon === 'info' && external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"i\", {\n        className: \"dc-popover__bubble__icon\"\n      }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(icon_info_blue, null)), external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"span\", {\n        className: \"dc-popover__bubble__text\"\n      }, message), external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"span\", {\n        className: \"dc-popover__bubble__arrow\"\n      }))));\n      return external_commonjs_react_dom_commonjs2_react_dom_root_ReactDOM_default.a.createPortal(popover_bubble, document.getElementById(portal_container));\n    }\n  }]);\n\n  return PopoverBubble;\n}(external_root_React_commonjs_react_commonjs2_react_default.a.PureComponent);\n\npopover_bubble_PopoverBubble.propTypes = {\n  alignment: prop_types_default.a.string,\n  children: prop_types_default.a.node,\n  className: prop_types_default.a.string,\n  has_error: prop_types_default.a.bool,\n  icon: prop_types_default.a.string,\n  id: prop_types_default.a.string,\n  is_open: prop_types_default.a.bool,\n  margin: prop_types_default.a.number,\n  message: prop_types_default.a.string.isRequired,\n  target_rectangle: prop_types_default.a.object\n};\n/* harmony default export */ var popover_popover_bubble = (popover_bubble_PopoverBubble);\n// CONCATENATED MODULE: ./src/components/icon-info-outline.jsx\n\n\n // TODO remove this file entirely when icon component is ready.\n\nvar icon_info_outline_IconInfoOutline = function IconInfoOutline(_ref) {\n  var className = _ref.className,\n      onMouseEnter = _ref.onMouseEnter,\n      onMouseLeave = _ref.onMouseLeave;\n  return external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"svg\", {\n    className: classnames_default()('inline-icon', className),\n    height: \"16\",\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave,\n    viewBox: \"0 0 16 16\",\n    width: \"16\"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"path\", {\n    className: \"color1-fill\",\n    fill: \"rgba(0, 0, 0, 0.16)\",\n    fillRule: \"evenodd\",\n    d: \"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16zM8 6a.75.75 0 1 0 0-1.5A.75.75 0 0 0 8 6zm0 1a.5.5 0 0 0-.5.5v4a.5.5 0 1 0 1 0v-4A.5.5 0 0 0 8 7z\"\n  }));\n};\n\nicon_info_outline_IconInfoOutline.propTypes = {\n  className: prop_types_default.a.string\n};\n/* harmony default export */ var icon_info_outline = (icon_info_outline_IconInfoOutline);\n// CONCATENATED MODULE: ./src/components/icon-question.jsx\n\n // TODO remove this file entirely when icon component is ready.\n\nvar icon_question_IconQuestion = function IconQuestion(_ref) {\n  var className = _ref.className;\n  return external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"svg\", {\n    className: className,\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 16 16\"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"g\", {\n    fill: \"#FFF\",\n    fillRule: \"evenodd\"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"path\", {\n    d: \"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zm0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14z\",\n    fillRule: \"nonzero\"\n  }), external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"path\", {\n    d: \"M7.39 9.518c.007-.373.052-.668.134-.885.082-.216.25-.456.503-.72l.646-.636c.276-.298.415-.618.415-.96 0-.33-.09-.588-.272-.774-.18-.187-.444-.28-.789-.28-.335 0-.605.084-.809.254a.842.842 0 0 0-.306.682H6c.007-.508.196-.918.57-1.23.373-.313.859-.469 1.457-.469.622 0 1.106.16 1.453.478.347.318.52.755.52 1.31 0 .55-.266 1.091-.799 1.625l-.538.508c-.24.255-.36.62-.36 1.097h-.912zm-.039 1.492a.5.5 0 0 1 .136-.355c.09-.096.224-.144.402-.144.178 0 .312.048.404.144a.493.493 0 0 1 .139.355.477.477 0 0 1-.139.351c-.092.093-.226.139-.404.139-.178 0-.312-.046-.402-.139a.481.481 0 0 1-.136-.35z\"\n  })));\n};\n\nicon_question_IconQuestion.propTypes = {\n  className: prop_types_default.a.string\n};\n/* harmony default export */ var icon_question = (icon_question_IconQuestion);\n// CONCATENATED MODULE: ./src/components/icon-red-dot.jsx\n\n // TODO remove this file entirely when icon component is ready.\n\nvar icon_red_dot_IconRedDot = function IconRedDot(_ref) {\n  var className = _ref.className;\n  return external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"svg\", {\n    className: className,\n    width: \"4\",\n    height: \"4\"\n  }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"circle\", {\n    cx: \"1163\",\n    cy: \"626\",\n    r: \"2\",\n    transform: \"translate(-1161 -624)\",\n    fill: \"#E31C4B\",\n    fillRule: \"nonzero\"\n  }));\n};\n\nicon_red_dot_IconRedDot.propTypes = {\n  className: prop_types_default.a.string\n};\n/* harmony default export */ var icon_red_dot = (icon_red_dot_IconRedDot);\n// CONCATENATED MODULE: ./src/components/popover/popover.jsx\nfunction popover_typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { popover_typeof = function _typeof(obj) { return typeof obj; }; } else { popover_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return popover_typeof(obj); }\n\nfunction popover_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction popover_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction popover_createClass(Constructor, protoProps, staticProps) { if (protoProps) popover_defineProperties(Constructor.prototype, protoProps); if (staticProps) popover_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction popover_possibleConstructorReturn(self, call) { if (call && (popover_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return popover_assertThisInitialized(self); }\n\nfunction popover_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction popover_getPrototypeOf(o) { popover_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return popover_getPrototypeOf(o); }\n\nfunction popover_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) popover_setPrototypeOf(subClass, superClass); }\n\nfunction popover_setPrototypeOf(o, p) { popover_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return popover_setPrototypeOf(o, p); }\n\n\n\n\n\n\n\n\n\nvar popover_Popover =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  popover_inherits(Popover, _React$PureComponent);\n\n  function Popover(props) {\n    var _this;\n\n    popover_classCallCheck(this, Popover);\n\n    _this = popover_possibleConstructorReturn(this, popover_getPrototypeOf(Popover).call(this, props));\n\n    _this.toggleOpen = function () {\n      _this.setState({\n        is_open: Boolean(_this.props.message),\n        target_rectangle: _this.target_reference.current.getBoundingClientRect()\n      });\n    };\n\n    _this.toggleClose = function () {\n      return _this.setState({\n        is_open: false\n      });\n    };\n\n    _this.state = {\n      is_open: false,\n      target_rectangle: null\n    };\n    _this.target_reference = external_root_React_commonjs_react_commonjs2_react_default.a.createRef();\n    return _this;\n  }\n\n  popover_createClass(Popover, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        is_open: this.props.has_error,\n        target_rectangle: this.target_reference.current.getBoundingClientRect()\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          alignment = _this$props.alignment,\n          children = _this$props.children,\n          classNameBubble = _this$props.classNameBubble,\n          classNameTarget = _this$props.classNameTarget,\n          classNameTargetIcon = _this$props.classNameTargetIcon,\n          disable_target_icon = _this$props.disable_target_icon,\n          has_error = _this$props.has_error,\n          icon = _this$props.icon,\n          id = _this$props.id,\n          margin = _this$props.margin,\n          message = _this$props.message;\n      var icon_class_name = classnames_default()(classNameTargetIcon, icon);\n      return external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"div\", {\n        className: \"dc-popover\",\n        id: id,\n        onMouseEnter: this.toggleOpen,\n        onMouseLeave: this.toggleClose\n      }, external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"div\", {\n        className: classnames_default()(classNameTarget, 'dc-popover__target'),\n        ref: this.target_reference\n      }, !disable_target_icon && external_root_React_commonjs_react_commonjs2_react_default.a.createElement(\"i\", {\n        className: message ? 'dc-popover__target__icon' : 'dc-popover__target__icon--disabled'\n      }, icon === 'info' && external_root_React_commonjs_react_commonjs2_react_default.a.createElement(icon_info_outline, {\n        className: icon_class_name\n      }), icon === 'question' && external_root_React_commonjs_react_commonjs2_react_default.a.createElement(icon_question, {\n        className: icon_class_name\n      }), icon === 'dot' && external_root_React_commonjs_react_commonjs2_react_default.a.createElement(icon_red_dot, {\n        className: icon_class_name\n      })), children), external_root_React_commonjs_react_commonjs2_react_default.a.createElement(popover_popover_bubble, {\n        alignment: alignment,\n        className: classNameBubble,\n        has_error: has_error,\n        icon: icon,\n        id: \"\".concat(id, \"_bubble\"),\n        is_open: this.state.is_open,\n        target_rectangle: this.state.target_rectangle,\n        margin: margin,\n        message: message,\n        portal_container: this.props.portal_container\n      }));\n    }\n  }]);\n\n  return Popover;\n}(external_root_React_commonjs_react_commonjs2_react_default.a.PureComponent);\n\npopover_Popover.defaultProps = {\n  portal_container: 'deriv_app'\n};\npopover_Popover.propTypes = {\n  alignment: prop_types_default.a.string,\n  children: prop_types_default.a.node,\n  classNameBubble: prop_types_default.a.string,\n  classNameTarget: prop_types_default.a.string,\n  classNameTargetIcon: prop_types_default.a.string,\n  disable_target_icon: prop_types_default.a.bool,\n  has_error: prop_types_default.a.bool,\n  icon: prop_types_default.a.string,\n  id: prop_types_default.a.string,\n  margin: prop_types_default.a.number,\n  message: prop_types_default.a.string,\n  portal_container: prop_types_default.a.string\n};\n/* harmony default export */ var popover_popover = (popover_Popover);\n// CONCATENATED MODULE: ./src/components/popover/index.js\n/* concated harmony reexport default */__webpack_require__.d(__webpack_exports__, \"default\", function() { return popover_popover; });\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzPzlhYjQiLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL25vZGVfbW9kdWxlcy9zdHlsZS12YWx1ZS10eXBlcy9kaXN0L3N0eWxlLXZhbHVlLXR5cGVzLmVzLmpzPzIxYjciLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL25vZGVfbW9kdWxlcy9oZXktbGlzdGVuL2Rpc3QvaGV5LWxpc3Rlbi5lcy5qcz9mMzY4Iiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvZnJhbWVzeW5jL2Rpc3QvZnJhbWVzeW5jLmVzLmpzPzc5NGIiLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL25vZGVfbW9kdWxlcy9AcG9wbW90aW9uL2Vhc2luZy9kaXN0L2Vhc2luZy5lcy5qcz85NzIxIiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvQHBvcG1vdGlvbi9wb3Bjb3JuL2Rpc3QvcG9wY29ybi5lcy5qcz9iNGE0Iiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvc3R5bGVmaXJlL2Rpc3Qvc3R5bGVmaXJlLmVzLmpzP2Q4MzciLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL25vZGVfbW9kdWxlcy9wb3Btb3Rpb24vZGlzdC9wb3Btb3Rpb24uZXMuanM/MzVlYiIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3Bvc2UtY29yZS9kaXN0L3Bvc2UtY29yZS5lcy5qcz9lODhmIiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcG9wbW90aW9uLXBvc2UvZGlzdC9wb3Btb3Rpb24tcG9zZS5lcy5qcz9hYzJmIiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9ub2RlX21vZHVsZXMvcmVhY3QtcG9zZS9ub2RlX21vZHVsZXMvQGVtb3Rpb24vbWVtb2l6ZS9kaXN0L21lbW9pemUuYnJvd3Nlci5lc20uanM/NzM0OCIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vbm9kZV9tb2R1bGVzL3JlYWN0LXBvc2Uvbm9kZV9tb2R1bGVzL0BlbW90aW9uL2lzLXByb3AtdmFsaWQvZGlzdC9pcy1wcm9wLXZhbGlkLmJyb3dzZXIuZXNtLmpzPzkxMTgiLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL25vZGVfbW9kdWxlcy9yZWFjdC1wb3NlL2Rpc3QvcmVhY3QtcG9zZS5lcy5qcz8xMWZjIiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9pY29uLWluZm8tYmx1ZS5qc3g/ZjAxNSIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvcG9wb3Zlci9wb3BvdmVyLWJ1YmJsZS5qc3g/MDdkNSIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvaWNvbi1pbmZvLW91dGxpbmUuanN4P2E5MjkiLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL3NyYy9jb21wb25lbnRzL2ljb24tcXVlc3Rpb24uanN4PzYzNGYiLCJ3ZWJwYWNrOi8vZGVyaXYtY29tcG9uZW50LltuYW1lXS8uL3NyYy9jb21wb25lbnRzL2ljb24tcmVkLWRvdC5qc3g/MjQ5YyIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvcG9wb3Zlci9wb3BvdmVyLmpzeD8zNTkxIiwid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9wb3BvdmVyL2luZGV4LmpzP2I2NjciXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuXHJcbnZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XG5cbnZhciBjbGFtcCA9IGZ1bmN0aW9uIChtaW4sIG1heCkgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHtcclxuICAgIHJldHVybiBNYXRoLm1heChNYXRoLm1pbih2LCBtYXgpLCBtaW4pO1xyXG59OyB9O1xyXG52YXIgc2FuaXRpemUgPSBmdW5jdGlvbiAodikgeyByZXR1cm4gKHYgJSAxID8gTnVtYmVyKHYudG9GaXhlZCg1KSkgOiB2KTsgfTtcclxudmFyIGZsb2F0UmVnZXggPSAvKC0pPyhcXGRbXFxkXFwuXSopL2c7XHJcbnZhciBjb2xvclJlZ2V4ID0gLygjWzAtOWEtZl17Nn18I1swLTlhLWZdezN9fCMoPzpbMC05YS1mXXsyfSl7Miw0fXwocmdifGhzbClhP1xcKCgtP1xcZCslP1ssXFxzXSspezIsM31cXHMqW1xcZFxcLl0rJT9cXCkpL2dpO1xyXG52YXIgc2luZ2xlQ29sb3JSZWdleCA9IC9eKCNbMC05YS1mXXszfXwjKD86WzAtOWEtZl17Mn0pezIsNH18KHJnYnxoc2wpYT9cXCgoLT9cXGQrJT9bLFxcc10rKXsyLDN9XFxzKltcXGRcXC5dKyU/XFwpKSQvaTtcblxudmFyIG51bWJlciA9IHtcclxuICAgIHRlc3Q6IGZ1bmN0aW9uICh2KSB7IHJldHVybiB0eXBlb2YgdiA9PT0gJ251bWJlcic7IH0sXHJcbiAgICBwYXJzZTogcGFyc2VGbG9hdCxcclxuICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHY7IH1cclxufTtcclxudmFyIGFscGhhID0gX19hc3NpZ24oe30sIG51bWJlciwgeyB0cmFuc2Zvcm06IGNsYW1wKDAsIDEpIH0pO1xyXG52YXIgc2NhbGUgPSBfX2Fzc2lnbih7fSwgbnVtYmVyLCB7IGRlZmF1bHQ6IDEgfSk7XG5cbnZhciBjcmVhdGVVbml0VHlwZSA9IGZ1bmN0aW9uICh1bml0KSB7IHJldHVybiAoe1xyXG4gICAgdGVzdDogZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHYgPT09ICdzdHJpbmcnICYmIHYuZW5kc1dpdGgodW5pdCkgJiYgdi5zcGxpdCgnICcpLmxlbmd0aCA9PT0gMTtcclxuICAgIH0sXHJcbiAgICBwYXJzZTogcGFyc2VGbG9hdCxcclxuICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gKHYpIHsgcmV0dXJuIFwiXCIgKyB2ICsgdW5pdDsgfVxyXG59KTsgfTtcclxudmFyIGRlZ3JlZXMgPSBjcmVhdGVVbml0VHlwZSgnZGVnJyk7XHJcbnZhciBwZXJjZW50ID0gY3JlYXRlVW5pdFR5cGUoJyUnKTtcclxudmFyIHB4ID0gY3JlYXRlVW5pdFR5cGUoJ3B4Jyk7XHJcbnZhciB2aCA9IGNyZWF0ZVVuaXRUeXBlKCd2aCcpO1xyXG52YXIgdncgPSBjcmVhdGVVbml0VHlwZSgndncnKTtcclxudmFyIHByb2dyZXNzUGVyY2VudGFnZSA9IF9fYXNzaWduKHt9LCBwZXJjZW50LCB7IHBhcnNlOiBmdW5jdGlvbiAodikgeyByZXR1cm4gcGVyY2VudC5wYXJzZSh2KSAvIDEwMDsgfSwgdHJhbnNmb3JtOiBmdW5jdGlvbiAodikgeyByZXR1cm4gcGVyY2VudC50cmFuc2Zvcm0odiAqIDEwMCk7IH0gfSk7XG5cbnZhciBnZXRWYWx1ZUZyb21GdW5jdGlvblN0cmluZyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlLnN1YnN0cmluZyh2YWx1ZS5pbmRleE9mKCcoJykgKyAxLCB2YWx1ZS5sYXN0SW5kZXhPZignKScpKTtcclxufTtcclxudmFyIGNsYW1wUmdiVW5pdCA9IGNsYW1wKDAsIDI1NSk7XHJcbnZhciBpc1JnYmEgPSBmdW5jdGlvbiAodikgeyByZXR1cm4gdi5yZWQgIT09IHVuZGVmaW5lZDsgfTtcclxudmFyIGlzSHNsYSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiB2Lmh1ZSAhPT0gdW5kZWZpbmVkOyB9O1xyXG52YXIgc3BsaXRDb2xvclZhbHVlcyA9IGZ1bmN0aW9uICh0ZXJtcykge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJylcclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgdmFyIHZhbHVlcyA9IHt9O1xyXG4gICAgICAgIHZhciB2YWx1ZXNBcnJheSA9IGdldFZhbHVlRnJvbUZ1bmN0aW9uU3RyaW5nKHYpLnNwbGl0KC8sXFxzKi8pO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhbHVlc1t0ZXJtc1tpXV0gPVxyXG4gICAgICAgICAgICAgICAgdmFsdWVzQXJyYXlbaV0gIT09IHVuZGVmaW5lZCA/IHBhcnNlRmxvYXQodmFsdWVzQXJyYXlbaV0pIDogMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlcztcclxuICAgIH07XHJcbn07XHJcbnZhciByZ2JhVGVtcGxhdGUgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciByZWQgPSBfYS5yZWQsIGdyZWVuID0gX2EuZ3JlZW4sIGJsdWUgPSBfYS5ibHVlLCBfYiA9IF9hLmFscGhhLCBhbHBoYSQkMSA9IF9iID09PSB2b2lkIDAgPyAxIDogX2I7XHJcbiAgICByZXR1cm4gXCJyZ2JhKFwiICsgcmVkICsgXCIsIFwiICsgZ3JlZW4gKyBcIiwgXCIgKyBibHVlICsgXCIsIFwiICsgYWxwaGEkJDEgKyBcIilcIjtcclxufTtcclxudmFyIGhzbGFUZW1wbGF0ZSA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgdmFyIGh1ZSA9IF9hLmh1ZSwgc2F0dXJhdGlvbiA9IF9hLnNhdHVyYXRpb24sIGxpZ2h0bmVzcyA9IF9hLmxpZ2h0bmVzcywgX2IgPSBfYS5hbHBoYSwgYWxwaGEkJDEgPSBfYiA9PT0gdm9pZCAwID8gMSA6IF9iO1xyXG4gICAgcmV0dXJuIFwiaHNsYShcIiArIGh1ZSArIFwiLCBcIiArIHNhdHVyYXRpb24gKyBcIiwgXCIgKyBsaWdodG5lc3MgKyBcIiwgXCIgKyBhbHBoYSQkMSArIFwiKVwiO1xyXG59O1xyXG52YXIgcmdiVW5pdCA9IF9fYXNzaWduKHt9LCBudW1iZXIsIHsgdHJhbnNmb3JtOiBmdW5jdGlvbiAodikgeyByZXR1cm4gTWF0aC5yb3VuZChjbGFtcFJnYlVuaXQodikpOyB9IH0pO1xyXG5mdW5jdGlvbiBpc0NvbG9yU3RyaW5nKGNvbG9yLCBjb2xvclR5cGUpIHtcclxuICAgIHJldHVybiBjb2xvci5zdGFydHNXaXRoKGNvbG9yVHlwZSkgJiYgc2luZ2xlQ29sb3JSZWdleC50ZXN0KGNvbG9yKTtcclxufVxyXG52YXIgcmdiYSA9IHtcclxuICAgIHRlc3Q6IGZ1bmN0aW9uICh2KSB7IHJldHVybiAodHlwZW9mIHYgPT09ICdzdHJpbmcnID8gaXNDb2xvclN0cmluZyh2LCAncmdiJykgOiBpc1JnYmEodikpOyB9LFxyXG4gICAgcGFyc2U6IHNwbGl0Q29sb3JWYWx1ZXMoWydyZWQnLCAnZ3JlZW4nLCAnYmx1ZScsICdhbHBoYSddKSxcclxuICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgdmFyIHJlZCA9IF9hLnJlZCwgZ3JlZW4gPSBfYS5ncmVlbiwgYmx1ZSA9IF9hLmJsdWUsIF9iID0gX2EuYWxwaGEsIGFscGhhJCQxID0gX2IgPT09IHZvaWQgMCA/IDEgOiBfYjtcclxuICAgICAgICByZXR1cm4gcmdiYVRlbXBsYXRlKHtcclxuICAgICAgICAgICAgcmVkOiByZ2JVbml0LnRyYW5zZm9ybShyZWQpLFxyXG4gICAgICAgICAgICBncmVlbjogcmdiVW5pdC50cmFuc2Zvcm0oZ3JlZW4pLFxyXG4gICAgICAgICAgICBibHVlOiByZ2JVbml0LnRyYW5zZm9ybShibHVlKSxcclxuICAgICAgICAgICAgYWxwaGE6IHNhbml0aXplKGFscGhhLnRyYW5zZm9ybShhbHBoYSQkMSkpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcbnZhciBoc2xhID0ge1xyXG4gICAgdGVzdDogZnVuY3Rpb24gKHYpIHsgcmV0dXJuICh0eXBlb2YgdiA9PT0gJ3N0cmluZycgPyBpc0NvbG9yU3RyaW5nKHYsICdoc2wnKSA6IGlzSHNsYSh2KSk7IH0sXHJcbiAgICBwYXJzZTogc3BsaXRDb2xvclZhbHVlcyhbJ2h1ZScsICdzYXR1cmF0aW9uJywgJ2xpZ2h0bmVzcycsICdhbHBoYSddKSxcclxuICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgdmFyIGh1ZSA9IF9hLmh1ZSwgc2F0dXJhdGlvbiA9IF9hLnNhdHVyYXRpb24sIGxpZ2h0bmVzcyA9IF9hLmxpZ2h0bmVzcywgX2IgPSBfYS5hbHBoYSwgYWxwaGEkJDEgPSBfYiA9PT0gdm9pZCAwID8gMSA6IF9iO1xyXG4gICAgICAgIHJldHVybiBoc2xhVGVtcGxhdGUoe1xyXG4gICAgICAgICAgICBodWU6IE1hdGgucm91bmQoaHVlKSxcclxuICAgICAgICAgICAgc2F0dXJhdGlvbjogcGVyY2VudC50cmFuc2Zvcm0oc2FuaXRpemUoc2F0dXJhdGlvbikpLFxyXG4gICAgICAgICAgICBsaWdodG5lc3M6IHBlcmNlbnQudHJhbnNmb3JtKHNhbml0aXplKGxpZ2h0bmVzcykpLFxyXG4gICAgICAgICAgICBhbHBoYTogc2FuaXRpemUoYWxwaGEudHJhbnNmb3JtKGFscGhhJCQxKSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxudmFyIGhleCA9IF9fYXNzaWduKHt9LCByZ2JhLCB7IHRlc3Q6IGZ1bmN0aW9uICh2KSB7IHJldHVybiB0eXBlb2YgdiA9PT0gJ3N0cmluZycgJiYgaXNDb2xvclN0cmluZyh2LCAnIycpOyB9LCBwYXJzZTogZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICB2YXIgciA9ICcnO1xyXG4gICAgICAgIHZhciBnID0gJyc7XHJcbiAgICAgICAgdmFyIGIgPSAnJztcclxuICAgICAgICBpZiAodi5sZW5ndGggPiA0KSB7XHJcbiAgICAgICAgICAgIHIgPSB2LnN1YnN0cigxLCAyKTtcclxuICAgICAgICAgICAgZyA9IHYuc3Vic3RyKDMsIDIpO1xyXG4gICAgICAgICAgICBiID0gdi5zdWJzdHIoNSwgMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByID0gdi5zdWJzdHIoMSwgMSk7XHJcbiAgICAgICAgICAgIGcgPSB2LnN1YnN0cigyLCAxKTtcclxuICAgICAgICAgICAgYiA9IHYuc3Vic3RyKDMsIDEpO1xyXG4gICAgICAgICAgICByICs9IHI7XHJcbiAgICAgICAgICAgIGcgKz0gZztcclxuICAgICAgICAgICAgYiArPSBiO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZWQ6IHBhcnNlSW50KHIsIDE2KSxcclxuICAgICAgICAgICAgZ3JlZW46IHBhcnNlSW50KGcsIDE2KSxcclxuICAgICAgICAgICAgYmx1ZTogcGFyc2VJbnQoYiwgMTYpLFxyXG4gICAgICAgICAgICBhbHBoYTogMVxyXG4gICAgICAgIH07XHJcbiAgICB9IH0pO1xyXG52YXIgY29sb3IgPSB7XHJcbiAgICB0ZXN0OiBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIHJldHVybiAodHlwZW9mIHYgPT09ICdzdHJpbmcnICYmIHNpbmdsZUNvbG9yUmVnZXgudGVzdCh2KSkgfHxcclxuICAgICAgICAgICAgaXNSZ2JhKHYpIHx8XHJcbiAgICAgICAgICAgIGlzSHNsYSh2KTtcclxuICAgIH0sXHJcbiAgICBwYXJzZTogZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICBpZiAocmdiYS50ZXN0KHYpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZ2JhLnBhcnNlKHYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChoc2xhLnRlc3QodikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhzbGEucGFyc2Uodik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGhleC50ZXN0KHYpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoZXgucGFyc2Uodik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2O1xyXG4gICAgfSxcclxuICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICBpZiAoaXNSZ2JhKHYpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZ2JhLnRyYW5zZm9ybSh2KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaXNIc2xhKHYpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoc2xhLnRyYW5zZm9ybSh2KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHY7XHJcbiAgICB9XHJcbn07XG5cbnZhciBDT0xPUl9UT0tFTiA9ICcke2N9JztcclxudmFyIE5VTUJFUl9UT0tFTiA9ICcke259JztcclxudmFyIGNvbnZlcnROdW1iZXJzVG9aZXJvID0gZnVuY3Rpb24gKHYpIHtcclxuICAgIHJldHVybiB0eXBlb2YgdiA9PT0gJ251bWJlcicgPyAwIDogdjtcclxufTtcclxudmFyIGNvbXBsZXggPSB7XHJcbiAgICB0ZXN0OiBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycgfHwgIWlzTmFOKHYpKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgdmFyIG51bVZhbHVlcyA9IDA7XHJcbiAgICAgICAgdmFyIGZvdW5kTnVtYmVycyA9IHYubWF0Y2goZmxvYXRSZWdleCk7XHJcbiAgICAgICAgdmFyIGZvdW5kQ29sb3JzID0gdi5tYXRjaChjb2xvclJlZ2V4KTtcclxuICAgICAgICBpZiAoZm91bmROdW1iZXJzKVxyXG4gICAgICAgICAgICBudW1WYWx1ZXMgKz0gZm91bmROdW1iZXJzLmxlbmd0aDtcclxuICAgICAgICBpZiAoZm91bmRDb2xvcnMpXHJcbiAgICAgICAgICAgIG51bVZhbHVlcyArPSBmb3VuZENvbG9ycy5sZW5ndGg7XHJcbiAgICAgICAgcmV0dXJuIG51bVZhbHVlcyA+IDA7XHJcbiAgICB9LFxyXG4gICAgcGFyc2U6IGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gdjtcclxuICAgICAgICB2YXIgcGFyc2VkID0gW107XHJcbiAgICAgICAgdmFyIGZvdW5kQ29sb3JzID0gaW5wdXQubWF0Y2goY29sb3JSZWdleCk7XHJcbiAgICAgICAgaWYgKGZvdW5kQ29sb3JzKSB7XHJcbiAgICAgICAgICAgIGlucHV0ID0gaW5wdXQucmVwbGFjZShjb2xvclJlZ2V4LCBDT0xPUl9UT0tFTik7XHJcbiAgICAgICAgICAgIHBhcnNlZC5wdXNoLmFwcGx5KHBhcnNlZCwgZm91bmRDb2xvcnMubWFwKGNvbG9yLnBhcnNlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmb3VuZE51bWJlcnMgPSBpbnB1dC5tYXRjaChmbG9hdFJlZ2V4KTtcclxuICAgICAgICBpZiAoZm91bmROdW1iZXJzKSB7XHJcbiAgICAgICAgICAgIHBhcnNlZC5wdXNoLmFwcGx5KHBhcnNlZCwgZm91bmROdW1iZXJzLm1hcChudW1iZXIucGFyc2UpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZDtcclxuICAgIH0sXHJcbiAgICBjcmVhdGVUcmFuc2Zvcm1lcjogZnVuY3Rpb24gKHByb3ApIHtcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSBwcm9wO1xyXG4gICAgICAgIHZhciB0b2tlbiA9IDA7XHJcbiAgICAgICAgdmFyIGZvdW5kQ29sb3JzID0gcHJvcC5tYXRjaChjb2xvclJlZ2V4KTtcclxuICAgICAgICB2YXIgbnVtQ29sb3JzID0gZm91bmRDb2xvcnMgPyBmb3VuZENvbG9ycy5sZW5ndGggOiAwO1xyXG4gICAgICAgIGlmIChmb3VuZENvbG9ycykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUNvbG9yczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UoZm91bmRDb2xvcnNbaV0sIENPTE9SX1RPS0VOKTtcclxuICAgICAgICAgICAgICAgIHRva2VuKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZvdW5kTnVtYmVycyA9IHRlbXBsYXRlLm1hdGNoKGZsb2F0UmVnZXgpO1xyXG4gICAgICAgIHZhciBudW1OdW1iZXJzID0gZm91bmROdW1iZXJzID8gZm91bmROdW1iZXJzLmxlbmd0aCA6IDA7XHJcbiAgICAgICAgaWYgKGZvdW5kTnVtYmVycykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bU51bWJlcnM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKGZvdW5kTnVtYmVyc1tpXSwgTlVNQkVSX1RPS0VOKTtcclxuICAgICAgICAgICAgICAgIHRva2VuKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSB0ZW1wbGF0ZTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQucmVwbGFjZShpIDwgbnVtQ29sb3JzID8gQ09MT1JfVE9LRU4gOiBOVU1CRVJfVE9LRU4sIGkgPCBudW1Db2xvcnMgPyBjb2xvci50cmFuc2Zvcm0odltpXSkgOiBzYW5pdGl6ZSh2W2ldKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuICAgIGdldEFuaW1hdGFibGVOb25lOiBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIHBhcnNlZFRhcmdldCA9IGNvbXBsZXgucGFyc2UodGFyZ2V0KTtcclxuICAgICAgICB2YXIgdGFyZ2V0VHJhbnNmb3JtZXIgPSBjb21wbGV4LmNyZWF0ZVRyYW5zZm9ybWVyKHRhcmdldCk7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldFRyYW5zZm9ybWVyKHBhcnNlZFRhcmdldC5tYXAoY29udmVydE51bWJlcnNUb1plcm8pKTtcclxuICAgIH1cclxufTtcblxuZXhwb3J0IHsgbnVtYmVyLCBzY2FsZSwgYWxwaGEsIGRlZ3JlZXMsIHBlcmNlbnQsIHByb2dyZXNzUGVyY2VudGFnZSwgcHgsIHZ3LCB2aCwgcmdiYSwgcmdiVW5pdCwgaHNsYSwgaGV4LCBjb2xvciwgY29tcGxleCB9O1xuIiwidmFyIHdhcm5pbmcgPSBmdW5jdGlvbiAoKSB7IH07XHJcbnZhciBpbnZhcmlhbnQgPSBmdW5jdGlvbiAoKSB7IH07XHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICB3YXJuaW5nID0gZnVuY3Rpb24gKGNoZWNrLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgaWYgKCFjaGVjayAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBpbnZhcmlhbnQgPSBmdW5jdGlvbiAoY2hlY2ssIG1lc3NhZ2UpIHtcclxuICAgICAgICBpZiAoIWNoZWNrKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XG5cbmV4cG9ydCB7IGludmFyaWFudCwgd2FybmluZyB9O1xuIiwiaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnaGV5LWxpc3Rlbic7XG5cbnZhciBwcmV2VGltZSA9IDA7XHJcbnZhciBvbk5leHRGcmFtZSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgIT09IHVuZGVmaW5lZFxyXG4gICAgPyBmdW5jdGlvbiAoY2FsbGJhY2spIHsgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spOyB9XHJcbiAgICA6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHZhciB0aW1lVG9DYWxsID0gTWF0aC5tYXgoMCwgMTYuNyAtICh0aW1lc3RhbXAgLSBwcmV2VGltZSkpO1xyXG4gICAgICAgIHByZXZUaW1lID0gdGltZXN0YW1wICsgdGltZVRvQ2FsbDtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNhbGxiYWNrKHByZXZUaW1lKTsgfSwgdGltZVRvQ2FsbCk7XHJcbiAgICB9O1xuXG52YXIgY3JlYXRlU3RlcCA9IChmdW5jdGlvbiAoc2V0UnVuTmV4dEZyYW1lKSB7XHJcbiAgICB2YXIgcHJvY2Vzc1RvUnVuID0gW107XHJcbiAgICB2YXIgcHJvY2Vzc1RvUnVuTmV4dEZyYW1lID0gW107XHJcbiAgICB2YXIgbnVtVGhpc0ZyYW1lID0gMDtcclxuICAgIHZhciBpc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgIHZhciBpID0gMDtcclxuICAgIHZhciBjYW5jZWxsZWQgPSBuZXcgV2Vha1NldCgpO1xyXG4gICAgdmFyIHRvS2VlcEFsaXZlID0gbmV3IFdlYWtTZXQoKTtcclxuICAgIHZhciByZW5kZXJTdGVwID0ge1xyXG4gICAgICAgIGNhbmNlbDogZnVuY3Rpb24gKHByb2Nlc3MpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4T2ZDYWxsYmFjayA9IHByb2Nlc3NUb1J1bk5leHRGcmFtZS5pbmRleE9mKHByb2Nlc3MpO1xyXG4gICAgICAgICAgICBjYW5jZWxsZWQuYWRkKHByb2Nlc3MpO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXhPZkNhbGxiYWNrICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc1RvUnVuTmV4dEZyYW1lLnNwbGljZShpbmRleE9mQ2FsbGJhY2ssIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcm9jZXNzOiBmdW5jdGlvbiAoZnJhbWUpIHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBpc1Byb2Nlc3NpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICBfYSA9IFtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NUb1J1bk5leHRGcmFtZSxcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NUb1J1blxyXG4gICAgICAgICAgICBdLCBwcm9jZXNzVG9SdW4gPSBfYVswXSwgcHJvY2Vzc1RvUnVuTmV4dEZyYW1lID0gX2FbMV07XHJcbiAgICAgICAgICAgIHByb2Nlc3NUb1J1bk5leHRGcmFtZS5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICBudW1UaGlzRnJhbWUgPSBwcm9jZXNzVG9SdW4ubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAobnVtVGhpc0ZyYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvY2Vzc18xO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG51bVRoaXNGcmFtZTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc18xID0gcHJvY2Vzc1RvUnVuW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NfMShmcmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvS2VlcEFsaXZlLmhhcyhwcm9jZXNzXzEpID09PSB0cnVlICYmICFjYW5jZWxsZWQuaGFzKHByb2Nlc3NfMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyU3RlcC5zY2hlZHVsZShwcm9jZXNzXzEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSdW5OZXh0RnJhbWUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlzUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2NoZWR1bGU6IGZ1bmN0aW9uIChwcm9jZXNzLCBrZWVwQWxpdmUsIGltbWVkaWF0ZSkge1xyXG4gICAgICAgICAgICBpZiAoa2VlcEFsaXZlID09PSB2b2lkIDApIHsga2VlcEFsaXZlID0gZmFsc2U7IH1cclxuICAgICAgICAgICAgaWYgKGltbWVkaWF0ZSA9PT0gdm9pZCAwKSB7IGltbWVkaWF0ZSA9IGZhbHNlOyB9XHJcbiAgICAgICAgICAgIGludmFyaWFudCh0eXBlb2YgcHJvY2VzcyA9PT0gJ2Z1bmN0aW9uJywgJ0FyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICAgICAgICB2YXIgYWRkVG9DdXJyZW50QnVmZmVyID0gaW1tZWRpYXRlICYmIGlzUHJvY2Vzc2luZztcclxuICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGFkZFRvQ3VycmVudEJ1ZmZlciA/IHByb2Nlc3NUb1J1biA6IHByb2Nlc3NUb1J1bk5leHRGcmFtZTtcclxuICAgICAgICAgICAgY2FuY2VsbGVkLmRlbGV0ZShwcm9jZXNzKTtcclxuICAgICAgICAgICAgaWYgKGtlZXBBbGl2ZSlcclxuICAgICAgICAgICAgICAgIHRvS2VlcEFsaXZlLmFkZChwcm9jZXNzKTtcclxuICAgICAgICAgICAgaWYgKGJ1ZmZlci5pbmRleE9mKHByb2Nlc3MpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyLnB1c2gocHJvY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWRkVG9DdXJyZW50QnVmZmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIG51bVRoaXNGcmFtZSA9IHByb2Nlc3NUb1J1bi5sZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHJlbmRlclN0ZXA7XHJcbn0pO1xuXG52YXIgU3RlcElkO1xyXG4oZnVuY3Rpb24gKFN0ZXBJZCkge1xyXG4gICAgU3RlcElkW1wiUmVhZFwiXSA9IFwicmVhZFwiO1xyXG4gICAgU3RlcElkW1wiVXBkYXRlXCJdID0gXCJ1cGRhdGVcIjtcclxuICAgIFN0ZXBJZFtcIlJlbmRlclwiXSA9IFwicmVuZGVyXCI7XHJcbiAgICBTdGVwSWRbXCJQb3N0UmVuZGVyXCJdID0gXCJwb3N0UmVuZGVyXCI7XHJcbiAgICBTdGVwSWRbXCJGaXhlZFVwZGF0ZVwiXSA9IFwiZml4ZWRVcGRhdGVcIjtcclxufSkoU3RlcElkIHx8IChTdGVwSWQgPSB7fSkpO1xuXG52YXIgbWF4RWxhcHNlZCA9IDQwO1xyXG52YXIgZGVmYXVsdEVsYXBzZWQgPSAoMSAvIDYwKSAqIDEwMDA7XHJcbnZhciB1c2VEZWZhdWx0RWxhcHNlZCA9IHRydWU7XHJcbnZhciB3aWxsUnVuTmV4dEZyYW1lID0gZmFsc2U7XHJcbnZhciBpc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxudmFyIGZyYW1lID0ge1xyXG4gICAgZGVsdGE6IDAsXHJcbiAgICB0aW1lc3RhbXA6IDBcclxufTtcclxudmFyIHN0ZXBzT3JkZXIgPSBbXHJcbiAgICBTdGVwSWQuUmVhZCxcclxuICAgIFN0ZXBJZC5VcGRhdGUsXHJcbiAgICBTdGVwSWQuUmVuZGVyLFxyXG4gICAgU3RlcElkLlBvc3RSZW5kZXJcclxuXTtcclxudmFyIHNldFdpbGxSdW5OZXh0RnJhbWUgPSBmdW5jdGlvbiAod2lsbFJ1bikgeyByZXR1cm4gKHdpbGxSdW5OZXh0RnJhbWUgPSB3aWxsUnVuKTsgfTtcclxudmFyIF9hID0gc3RlcHNPcmRlci5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7XHJcbiAgICB2YXIgc3RlcCA9IGNyZWF0ZVN0ZXAoc2V0V2lsbFJ1bk5leHRGcmFtZSk7XHJcbiAgICBhY2Muc3luY1trZXldID0gZnVuY3Rpb24gKHByb2Nlc3MsIGtlZXBBbGl2ZSwgaW1tZWRpYXRlKSB7XHJcbiAgICAgICAgaWYgKGtlZXBBbGl2ZSA9PT0gdm9pZCAwKSB7IGtlZXBBbGl2ZSA9IGZhbHNlOyB9XHJcbiAgICAgICAgaWYgKGltbWVkaWF0ZSA9PT0gdm9pZCAwKSB7IGltbWVkaWF0ZSA9IGZhbHNlOyB9XHJcbiAgICAgICAgaWYgKCF3aWxsUnVuTmV4dEZyYW1lKVxyXG4gICAgICAgICAgICBzdGFydExvb3AoKTtcclxuICAgICAgICBzdGVwLnNjaGVkdWxlKHByb2Nlc3MsIGtlZXBBbGl2ZSwgaW1tZWRpYXRlKTtcclxuICAgICAgICByZXR1cm4gcHJvY2VzcztcclxuICAgIH07XHJcbiAgICBhY2MuY2FuY2VsU3luY1trZXldID0gZnVuY3Rpb24gKHByb2Nlc3MpIHsgcmV0dXJuIHN0ZXAuY2FuY2VsKHByb2Nlc3MpOyB9O1xyXG4gICAgYWNjLnN0ZXBzW2tleV0gPSBzdGVwO1xyXG4gICAgcmV0dXJuIGFjYztcclxufSwge1xyXG4gICAgc3RlcHM6IHt9LFxyXG4gICAgc3luYzoge30sXHJcbiAgICBjYW5jZWxTeW5jOiB7fVxyXG59KSwgc3RlcHMgPSBfYS5zdGVwcywgc3luYyA9IF9hLnN5bmMsIGNhbmNlbFN5bmMgPSBfYS5jYW5jZWxTeW5jO1xyXG52YXIgcHJvY2Vzc1N0ZXAgPSBmdW5jdGlvbiAoc3RlcElkKSB7IHJldHVybiBzdGVwc1tzdGVwSWRdLnByb2Nlc3MoZnJhbWUpOyB9O1xyXG52YXIgcHJvY2Vzc0ZyYW1lID0gZnVuY3Rpb24gKHRpbWVzdGFtcCkge1xyXG4gICAgd2lsbFJ1bk5leHRGcmFtZSA9IGZhbHNlO1xyXG4gICAgZnJhbWUuZGVsdGEgPSB1c2VEZWZhdWx0RWxhcHNlZFxyXG4gICAgICAgID8gZGVmYXVsdEVsYXBzZWRcclxuICAgICAgICA6IE1hdGgubWF4KE1hdGgubWluKHRpbWVzdGFtcCAtIGZyYW1lLnRpbWVzdGFtcCwgbWF4RWxhcHNlZCksIDEpO1xyXG4gICAgaWYgKCF1c2VEZWZhdWx0RWxhcHNlZClcclxuICAgICAgICBkZWZhdWx0RWxhcHNlZCA9IGZyYW1lLmRlbHRhO1xyXG4gICAgZnJhbWUudGltZXN0YW1wID0gdGltZXN0YW1wO1xyXG4gICAgaXNQcm9jZXNzaW5nID0gdHJ1ZTtcclxuICAgIHN0ZXBzT3JkZXIuZm9yRWFjaChwcm9jZXNzU3RlcCk7XHJcbiAgICBpc1Byb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgIGlmICh3aWxsUnVuTmV4dEZyYW1lKSB7XHJcbiAgICAgICAgdXNlRGVmYXVsdEVsYXBzZWQgPSBmYWxzZTtcclxuICAgICAgICBvbk5leHRGcmFtZShwcm9jZXNzRnJhbWUpO1xyXG4gICAgfVxyXG59O1xyXG52YXIgc3RhcnRMb29wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgd2lsbFJ1bk5leHRGcmFtZSA9IHRydWU7XHJcbiAgICB1c2VEZWZhdWx0RWxhcHNlZCA9IHRydWU7XHJcbiAgICBpZiAoIWlzUHJvY2Vzc2luZylcclxuICAgICAgICBvbk5leHRGcmFtZShwcm9jZXNzRnJhbWUpO1xyXG59O1xyXG52YXIgZ2V0RnJhbWVEYXRhID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZnJhbWU7IH07XG5cbmV4cG9ydCBkZWZhdWx0IHN5bmM7XG5leHBvcnQgeyBjYW5jZWxTeW5jLCBnZXRGcmFtZURhdGEgfTtcbiIsInZhciBERUZBVUxUX09WRVJTSE9PVF9TVFJFTkdUSCA9IDEuNTI1O1xudmFyIHJldmVyc2VkID0gZnVuY3Rpb24gKGVhc2luZykge1xuICAgIHJldHVybiBmdW5jdGlvbiAocCkge1xuICAgICAgICByZXR1cm4gMSAtIGVhc2luZygxIC0gcCk7XG4gICAgfTtcbn07XG52YXIgbWlycm9yZWQgPSBmdW5jdGlvbiAoZWFzaW5nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwKSB7XG4gICAgICAgIHJldHVybiBwIDw9IDAuNSA/IGVhc2luZygyICogcCkgLyAyIDogKDIgLSBlYXNpbmcoMiAqICgxIC0gcCkpKSAvIDI7XG4gICAgfTtcbn07XG52YXIgY3JlYXRlUmV2ZXJzZWRFYXNpbmcgPSByZXZlcnNlZDtcbnZhciBjcmVhdGVNaXJyb3JlZEVhc2luZyA9IG1pcnJvcmVkO1xudmFyIGNyZWF0ZUV4cG9JbiA9IGZ1bmN0aW9uIChwb3dlcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocCkge1xuICAgICAgICByZXR1cm4gTWF0aC5wb3cocCwgcG93ZXIpO1xuICAgIH07XG59O1xudmFyIGNyZWF0ZUJhY2tJbiA9IGZ1bmN0aW9uIChwb3dlcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAocCkge1xuICAgICAgICByZXR1cm4gcCAqIHAgKiAoKHBvd2VyICsgMSkgKiBwIC0gcG93ZXIpO1xuICAgIH07XG59O1xudmFyIGNyZWF0ZUFudGljaXBhdGVFYXNpbmcgPSBmdW5jdGlvbiAocG93ZXIpIHtcbiAgICB2YXIgYmFja0Vhc2luZyA9IGNyZWF0ZUJhY2tJbihwb3dlcik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwKSB7XG4gICAgICAgIHJldHVybiAocCAqPSAyKSA8IDEgPyAwLjUgKiBiYWNrRWFzaW5nKHApIDogMC41ICogKDIgLSBNYXRoLnBvdygyLCAtMTAgKiAocCAtIDEpKSk7XG4gICAgfTtcbn07XG52YXIgbGluZWFyID0gZnVuY3Rpb24gKHApIHtcbiAgICByZXR1cm4gcDtcbn07XG52YXIgZWFzZUluID0gLyojX19QVVJFX18qL2NyZWF0ZUV4cG9JbigyKTtcbnZhciBlYXNlT3V0ID0gLyojX19QVVJFX18qL3JldmVyc2VkKGVhc2VJbik7XG52YXIgZWFzZUluT3V0ID0gLyojX19QVVJFX18qL21pcnJvcmVkKGVhc2VJbik7XG52YXIgY2lyY0luID0gZnVuY3Rpb24gKHApIHtcbiAgICByZXR1cm4gMSAtIE1hdGguc2luKE1hdGguYWNvcyhwKSk7XG59O1xudmFyIGNpcmNPdXQgPSAvKiNfX1BVUkVfXyovcmV2ZXJzZWQoY2lyY0luKTtcbnZhciBjaXJjSW5PdXQgPSAvKiNfX1BVUkVfXyovbWlycm9yZWQoY2lyY091dCk7XG52YXIgYmFja0luID0gLyojX19QVVJFX18qL2NyZWF0ZUJhY2tJbihERUZBVUxUX09WRVJTSE9PVF9TVFJFTkdUSCk7XG52YXIgYmFja091dCA9IC8qI19fUFVSRV9fKi9yZXZlcnNlZChiYWNrSW4pO1xudmFyIGJhY2tJbk91dCA9IC8qI19fUFVSRV9fKi9taXJyb3JlZChiYWNrSW4pO1xudmFyIGFudGljaXBhdGUgPSAvKiNfX1BVUkVfXyovY3JlYXRlQW50aWNpcGF0ZUVhc2luZyhERUZBVUxUX09WRVJTSE9PVF9TVFJFTkdUSCk7XG52YXIgQk9VTkNFX0ZJUlNUX1RIUkVTSE9MRCA9IDQuMCAvIDExLjA7XG52YXIgQk9VTkNFX1NFQ09ORF9USFJFU0hPTEQgPSA4LjAgLyAxMS4wO1xudmFyIEJPVU5DRV9USElSRF9USFJFU0hPTEQgPSA5LjAgLyAxMC4wO1xudmFyIGNhID0gNDM1Ni4wIC8gMzYxLjA7XG52YXIgY2IgPSAzNTQ0Mi4wIC8gMTgwNS4wO1xudmFyIGNjID0gMTYwNjEuMCAvIDE4MDUuMDtcbnZhciBib3VuY2VPdXQgPSBmdW5jdGlvbiAocCkge1xuICAgIHZhciBwMiA9IHAgKiBwO1xuICAgIHJldHVybiBwIDwgQk9VTkNFX0ZJUlNUX1RIUkVTSE9MRCA/IDcuNTYyNSAqIHAyIDogcCA8IEJPVU5DRV9TRUNPTkRfVEhSRVNIT0xEID8gOS4wNzUgKiBwMiAtIDkuOSAqIHAgKyAzLjQgOiBwIDwgQk9VTkNFX1RISVJEX1RIUkVTSE9MRCA/IGNhICogcDIgLSBjYiAqIHAgKyBjYyA6IDEwLjggKiBwICogcCAtIDIwLjUyICogcCArIDEwLjcyO1xufTtcbnZhciBib3VuY2VJbiA9IGZ1bmN0aW9uIChwKSB7XG4gICAgcmV0dXJuIDEuMCAtIGJvdW5jZU91dCgxLjAgLSBwKTtcbn07XG52YXIgYm91bmNlSW5PdXQgPSBmdW5jdGlvbiAocCkge1xuICAgIHJldHVybiBwIDwgMC41ID8gMC41ICogKDEuMCAtIGJvdW5jZU91dCgxLjAgLSBwICogMi4wKSkgOiAwLjUgKiBib3VuY2VPdXQocCAqIDIuMCAtIDEuMCkgKyAwLjU7XG59O1xudmFyIE5FV1RPTl9JVEVSQVRJT05TID0gODtcbnZhciBORVdUT05fTUlOX1NMT1BFID0gMC4wMDE7XG52YXIgU1VCRElWSVNJT05fUFJFQ0lTSU9OID0gMC4wMDAwMDAxO1xudmFyIFNVQkRJVklTSU9OX01BWF9JVEVSQVRJT05TID0gMTA7XG52YXIgS19TUExJTkVfVEFCTEVfU0laRSA9IDExO1xudmFyIEtfU0FNUExFX1NURVBfU0laRSA9IDEuMCAvIChLX1NQTElORV9UQUJMRV9TSVpFIC0gMS4wKTtcbnZhciBGTE9BVF8zMl9TVVBQT1JURUQgPSB0eXBlb2YgRmxvYXQzMkFycmF5ICE9PSAndW5kZWZpbmVkJztcbnZhciBhID0gZnVuY3Rpb24gKGExLCBhMikge1xuICAgIHJldHVybiAxLjAgLSAzLjAgKiBhMiArIDMuMCAqIGExO1xufTtcbnZhciBiID0gZnVuY3Rpb24gKGExLCBhMikge1xuICAgIHJldHVybiAzLjAgKiBhMiAtIDYuMCAqIGExO1xufTtcbnZhciBjID0gZnVuY3Rpb24gKGExKSB7XG4gICAgcmV0dXJuIDMuMCAqIGExO1xufTtcbnZhciBnZXRTbG9wZSA9IGZ1bmN0aW9uICh0LCBhMSwgYTIpIHtcbiAgICByZXR1cm4gMy4wICogYShhMSwgYTIpICogdCAqIHQgKyAyLjAgKiBiKGExLCBhMikgKiB0ICsgYyhhMSk7XG59O1xudmFyIGNhbGNCZXppZXIgPSBmdW5jdGlvbiAodCwgYTEsIGEyKSB7XG4gICAgcmV0dXJuICgoYShhMSwgYTIpICogdCArIGIoYTEsIGEyKSkgKiB0ICsgYyhhMSkpICogdDtcbn07XG5mdW5jdGlvbiBjdWJpY0JlemllcihtWDEsIG1ZMSwgbVgyLCBtWTIpIHtcbiAgICB2YXIgc2FtcGxlVmFsdWVzID0gRkxPQVRfMzJfU1VQUE9SVEVEID8gbmV3IEZsb2F0MzJBcnJheShLX1NQTElORV9UQUJMRV9TSVpFKSA6IG5ldyBBcnJheShLX1NQTElORV9UQUJMRV9TSVpFKTtcbiAgICB2YXIgYmluYXJ5U3ViZGl2aWRlID0gZnVuY3Rpb24gKGFYLCBhQSwgYUIpIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB2YXIgY3VycmVudFg7XG4gICAgICAgIHZhciBjdXJyZW50VDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgY3VycmVudFQgPSBhQSArIChhQiAtIGFBKSAvIDIuMDtcbiAgICAgICAgICAgIGN1cnJlbnRYID0gY2FsY0JlemllcihjdXJyZW50VCwgbVgxLCBtWDIpIC0gYVg7XG4gICAgICAgICAgICBpZiAoY3VycmVudFggPiAwLjApIHtcbiAgICAgICAgICAgICAgICBhQiA9IGN1cnJlbnRUO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhQSA9IGN1cnJlbnRUO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChNYXRoLmFicyhjdXJyZW50WCkgPiBTVUJESVZJU0lPTl9QUkVDSVNJT04gJiYgKytpIDwgU1VCRElWSVNJT05fTUFYX0lURVJBVElPTlMpO1xuICAgICAgICByZXR1cm4gY3VycmVudFQ7XG4gICAgfTtcbiAgICB2YXIgbmV3dG9uUmFwaHNvbkl0ZXJhdGUgPSBmdW5jdGlvbiAoYVgsIGFHdWVzc1QpIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB2YXIgY3VycmVudFNsb3BlID0gMDtcbiAgICAgICAgdmFyIGN1cnJlbnRYO1xuICAgICAgICBmb3IgKDsgaSA8IE5FV1RPTl9JVEVSQVRJT05TOyArK2kpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTbG9wZSA9IGdldFNsb3BlKGFHdWVzc1QsIG1YMSwgbVgyKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50U2xvcGUgPT09IDAuMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhR3Vlc3NUO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudFggPSBjYWxjQmV6aWVyKGFHdWVzc1QsIG1YMSwgbVgyKSAtIGFYO1xuICAgICAgICAgICAgYUd1ZXNzVCAtPSBjdXJyZW50WCAvIGN1cnJlbnRTbG9wZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYUd1ZXNzVDtcbiAgICB9O1xuICAgIHZhciBjYWxjU2FtcGxlVmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEtfU1BMSU5FX1RBQkxFX1NJWkU7ICsraSkge1xuICAgICAgICAgICAgc2FtcGxlVmFsdWVzW2ldID0gY2FsY0JlemllcihpICogS19TQU1QTEVfU1RFUF9TSVpFLCBtWDEsIG1YMik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciBnZXRURm9yWCA9IGZ1bmN0aW9uIChhWCkge1xuICAgICAgICB2YXIgaW50ZXJ2YWxTdGFydCA9IDAuMDtcbiAgICAgICAgdmFyIGN1cnJlbnRTYW1wbGUgPSAxO1xuICAgICAgICB2YXIgbGFzdFNhbXBsZSA9IEtfU1BMSU5FX1RBQkxFX1NJWkUgLSAxO1xuICAgICAgICB2YXIgZGlzdCA9IDAuMDtcbiAgICAgICAgdmFyIGd1ZXNzRm9yVCA9IDAuMDtcbiAgICAgICAgdmFyIGluaXRpYWxTbG9wZSA9IDAuMDtcbiAgICAgICAgZm9yICg7IGN1cnJlbnRTYW1wbGUgIT09IGxhc3RTYW1wbGUgJiYgc2FtcGxlVmFsdWVzW2N1cnJlbnRTYW1wbGVdIDw9IGFYOyArK2N1cnJlbnRTYW1wbGUpIHtcbiAgICAgICAgICAgIGludGVydmFsU3RhcnQgKz0gS19TQU1QTEVfU1RFUF9TSVpFO1xuICAgICAgICB9XG4gICAgICAgIC0tY3VycmVudFNhbXBsZTtcbiAgICAgICAgZGlzdCA9IChhWCAtIHNhbXBsZVZhbHVlc1tjdXJyZW50U2FtcGxlXSkgLyAoc2FtcGxlVmFsdWVzW2N1cnJlbnRTYW1wbGUgKyAxXSAtIHNhbXBsZVZhbHVlc1tjdXJyZW50U2FtcGxlXSk7XG4gICAgICAgIGd1ZXNzRm9yVCA9IGludGVydmFsU3RhcnQgKyBkaXN0ICogS19TQU1QTEVfU1RFUF9TSVpFO1xuICAgICAgICBpbml0aWFsU2xvcGUgPSBnZXRTbG9wZShndWVzc0ZvclQsIG1YMSwgbVgyKTtcbiAgICAgICAgaWYgKGluaXRpYWxTbG9wZSA+PSBORVdUT05fTUlOX1NMT1BFKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3dG9uUmFwaHNvbkl0ZXJhdGUoYVgsIGd1ZXNzRm9yVCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5pdGlhbFNsb3BlID09PSAwLjApIHtcbiAgICAgICAgICAgIHJldHVybiBndWVzc0ZvclQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYmluYXJ5U3ViZGl2aWRlKGFYLCBpbnRlcnZhbFN0YXJ0LCBpbnRlcnZhbFN0YXJ0ICsgS19TQU1QTEVfU1RFUF9TSVpFKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY2FsY1NhbXBsZVZhbHVlcygpO1xuICAgIHZhciByZXNvbHZlciA9IGZ1bmN0aW9uIChhWCkge1xuICAgICAgICB2YXIgcmV0dXJuVmFsdWU7XG4gICAgICAgIGlmIChtWDEgPT09IG1ZMSAmJiBtWDIgPT09IG1ZMikge1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBhWDtcbiAgICAgICAgfSBlbHNlIGlmIChhWCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGFYID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IGNhbGNCZXppZXIoZ2V0VEZvclgoYVgpLCBtWTEsIG1ZMik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgIH07XG4gICAgcmV0dXJuIHJlc29sdmVyO1xufVxuXG5leHBvcnQgeyByZXZlcnNlZCwgbWlycm9yZWQsIGNyZWF0ZVJldmVyc2VkRWFzaW5nLCBjcmVhdGVNaXJyb3JlZEVhc2luZywgY3JlYXRlRXhwb0luLCBjcmVhdGVCYWNrSW4sIGNyZWF0ZUFudGljaXBhdGVFYXNpbmcsIGxpbmVhciwgZWFzZUluLCBlYXNlT3V0LCBlYXNlSW5PdXQsIGNpcmNJbiwgY2lyY091dCwgY2lyY0luT3V0LCBiYWNrSW4sIGJhY2tPdXQsIGJhY2tJbk91dCwgYW50aWNpcGF0ZSwgYm91bmNlT3V0LCBib3VuY2VJbiwgYm91bmNlSW5PdXQsIGN1YmljQmV6aWVyIH07XG4iLCJpbXBvcnQgeyBoc2xhLCByZ2JhLCBoZXgsIGNvbG9yLCBjb21wbGV4IH0gZnJvbSAnc3R5bGUtdmFsdWUtdHlwZXMnO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnaGV5LWxpc3Rlbic7XG5pbXBvcnQgeyBnZXRGcmFtZURhdGEgfSBmcm9tICdmcmFtZXN5bmMnO1xuaW1wb3J0IHsgY3JlYXRlQW50aWNpcGF0ZUVhc2luZywgY3JlYXRlQmFja0luLCBjcmVhdGVFeHBvSW4sIGN1YmljQmV6aWVyLCBsaW5lYXIsIGVhc2VJbiwgZWFzZU91dCwgZWFzZUluT3V0LCBjaXJjSW4sIGNpcmNPdXQsIGNpcmNJbk91dCwgYmFja0luLCBiYWNrT3V0LCBiYWNrSW5PdXQsIGFudGljaXBhdGUsIHJldmVyc2VkLCBtaXJyb3JlZCB9IGZyb20gJ0Bwb3Btb3Rpb24vZWFzaW5nJztcbmV4cG9ydCB7IGNyZWF0ZUFudGljaXBhdGVFYXNpbmcsIGNyZWF0ZUJhY2tJbiwgY3JlYXRlRXhwb0luLCBjdWJpY0JlemllciwgbGluZWFyLCBlYXNlSW4sIGVhc2VPdXQsIGVhc2VJbk91dCwgY2lyY0luLCBjaXJjT3V0LCBjaXJjSW5PdXQsIGJhY2tJbiwgYmFja091dCwgYmFja0luT3V0LCBhbnRpY2lwYXRlLCByZXZlcnNlZCwgbWlycm9yZWQgfSBmcm9tICdAcG9wbW90aW9uL2Vhc2luZyc7XG5cbnZhciB6ZXJvUG9pbnQgPSB7XHJcbiAgICB4OiAwLFxyXG4gICAgeTogMCxcclxuICAgIHo6IDBcclxufTtcclxudmFyIGlzTnVtID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHR5cGVvZiB2ID09PSAnbnVtYmVyJzsgfTtcblxudmFyIHJhZGlhbnNUb0RlZ3JlZXMgPSAoZnVuY3Rpb24gKHJhZGlhbnMpIHsgcmV0dXJuIChyYWRpYW5zICogMTgwKSAvIE1hdGguUEk7IH0pO1xuXG52YXIgYW5nbGUgPSAoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgIGlmIChiID09PSB2b2lkIDApIHsgYiA9IHplcm9Qb2ludDsgfVxyXG4gICAgcmV0dXJuIHJhZGlhbnNUb0RlZ3JlZXMoTWF0aC5hdGFuMihiLnkgLSBhLnksIGIueCAtIGEueCkpO1xyXG59KTtcblxudmFyIGFwcGx5T2Zmc2V0ID0gKGZ1bmN0aW9uIChmcm9tLCB0bykge1xyXG4gICAgdmFyIGhhc1JlY2VpdmVkRnJvbSA9IHRydWU7XHJcbiAgICBpZiAodG8gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRvID0gZnJvbTtcclxuICAgICAgICBoYXNSZWNlaXZlZEZyb20gPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIGlmIChoYXNSZWNlaXZlZEZyb20pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHYgLSBmcm9tICsgdG87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmcm9tID0gdjtcclxuICAgICAgICAgICAgaGFzUmVjZWl2ZWRGcm9tID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRvO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pO1xuXG52YXIgY3VycnlSYW5nZSA9IChmdW5jdGlvbiAoZnVuYykgeyByZXR1cm4gZnVuY3Rpb24gKG1pbiwgbWF4LCB2KSB7IHJldHVybiAodiAhPT0gdW5kZWZpbmVkID8gZnVuYyhtaW4sIG1heCwgdikgOiBmdW5jdGlvbiAoY3YpIHsgcmV0dXJuIGZ1bmMobWluLCBtYXgsIGN2KTsgfSk7IH07IH0pO1xuXG52YXIgY2xhbXAgPSBmdW5jdGlvbiAobWluLCBtYXgsIHYpIHtcclxuICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh2LCBtaW4pLCBtYXgpO1xyXG59O1xyXG52YXIgY2xhbXAkMSA9IGN1cnJ5UmFuZ2UoY2xhbXApO1xuXG52YXIgY29uZGl0aW9uYWwgPSAoZnVuY3Rpb24gKGNoZWNrLCBhcHBseSkgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHtcclxuICAgIHJldHVybiBjaGVjayh2KSA/IGFwcGx5KHYpIDogdjtcclxufTsgfSk7XG5cbnZhciBkZWdyZWVzVG9SYWRpYW5zID0gKGZ1bmN0aW9uIChkZWdyZWVzKSB7IHJldHVybiAoZGVncmVlcyAqIE1hdGguUEkpIC8gMTgwOyB9KTtcblxudmFyIGlzUG9pbnQgPSAoZnVuY3Rpb24gKHBvaW50KSB7XHJcbiAgICByZXR1cm4gcG9pbnQuaGFzT3duUHJvcGVydHkoJ3gnKSAmJiBwb2ludC5oYXNPd25Qcm9wZXJ0eSgneScpO1xyXG59KTtcblxudmFyIGlzUG9pbnQzRCA9IChmdW5jdGlvbiAocG9pbnQpIHtcclxuICAgIHJldHVybiBpc1BvaW50KHBvaW50KSAmJiBwb2ludC5oYXNPd25Qcm9wZXJ0eSgneicpO1xyXG59KTtcblxudmFyIGRpc3RhbmNlMUQgPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gTWF0aC5hYnMoYSAtIGIpOyB9O1xyXG52YXIgZGlzdGFuY2UgPSAoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgIGlmIChiID09PSB2b2lkIDApIHsgYiA9IHplcm9Qb2ludDsgfVxyXG4gICAgaWYgKGlzTnVtKGEpICYmIGlzTnVtKGIpKSB7XHJcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlMUQoYSwgYik7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc1BvaW50KGEpICYmIGlzUG9pbnQoYikpIHtcclxuICAgICAgICB2YXIgeERlbHRhID0gZGlzdGFuY2UxRChhLngsIGIueCk7XHJcbiAgICAgICAgdmFyIHlEZWx0YSA9IGRpc3RhbmNlMUQoYS55LCBiLnkpO1xyXG4gICAgICAgIHZhciB6RGVsdGEgPSBpc1BvaW50M0QoYSkgJiYgaXNQb2ludDNEKGIpID8gZGlzdGFuY2UxRChhLnosIGIueikgOiAwO1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coeERlbHRhLCAyKSArIE1hdGgucG93KHlEZWx0YSwgMikgKyBNYXRoLnBvdyh6RGVsdGEsIDIpKTtcclxuICAgIH1cclxuICAgIHJldHVybiAwO1xyXG59KTtcblxudmFyIHByb2dyZXNzID0gKGZ1bmN0aW9uIChmcm9tLCB0bywgdmFsdWUpIHtcclxuICAgIHZhciB0b0Zyb21EaWZmZXJlbmNlID0gdG8gLSBmcm9tO1xyXG4gICAgcmV0dXJuIHRvRnJvbURpZmZlcmVuY2UgPT09IDAgPyAxIDogKHZhbHVlIC0gZnJvbSkgLyB0b0Zyb21EaWZmZXJlbmNlO1xyXG59KTtcblxudmFyIG1peCA9IChmdW5jdGlvbiAoZnJvbSwgdG8sIHByb2dyZXNzKSB7XHJcbiAgICByZXR1cm4gLXByb2dyZXNzICogZnJvbSArIHByb2dyZXNzICogdG8gKyBmcm9tO1xyXG59KTtcblxuLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuXHJcbnZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XG5cbnZhciBtaXhMaW5lYXJDb2xvciA9IGZ1bmN0aW9uIChmcm9tLCB0bywgdikge1xyXG4gICAgdmFyIGZyb21FeHBvID0gZnJvbSAqIGZyb207XHJcbiAgICB2YXIgdG9FeHBvID0gdG8gKiB0bztcclxuICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5tYXgoMCwgdiAqICh0b0V4cG8gLSBmcm9tRXhwbykgKyBmcm9tRXhwbykpO1xyXG59O1xyXG52YXIgY29sb3JUeXBlcyA9IFtoZXgsIHJnYmEsIGhzbGFdO1xyXG52YXIgZ2V0Q29sb3JUeXBlID0gZnVuY3Rpb24gKHYpIHtcclxuICAgIHJldHVybiBjb2xvclR5cGVzLmZpbmQoZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIHR5cGUudGVzdCh2KTsgfSk7XHJcbn07XHJcbnZhciBub3RBbmltYXRhYmxlID0gZnVuY3Rpb24gKGNvbG9yJCQxKSB7XHJcbiAgICByZXR1cm4gXCInXCIgKyBjb2xvciQkMSArIFwiJyBpcyBub3QgYW4gYW5pbWF0YWJsZSBjb2xvci4gVXNlIHRoZSBlcXVpdmFsZW50IGNvbG9yIGNvZGUgaW5zdGVhZC5cIjtcclxufTtcclxudmFyIG1peENvbG9yID0gKGZ1bmN0aW9uIChmcm9tLCB0bykge1xyXG4gICAgdmFyIGZyb21Db2xvclR5cGUgPSBnZXRDb2xvclR5cGUoZnJvbSk7XHJcbiAgICB2YXIgdG9Db2xvclR5cGUgPSBnZXRDb2xvclR5cGUodG8pO1xyXG4gICAgaW52YXJpYW50KCEhZnJvbUNvbG9yVHlwZSwgbm90QW5pbWF0YWJsZShmcm9tKSk7XHJcbiAgICBpbnZhcmlhbnQoISF0b0NvbG9yVHlwZSwgbm90QW5pbWF0YWJsZSh0bykpO1xyXG4gICAgaW52YXJpYW50KGZyb21Db2xvclR5cGUudHJhbnNmb3JtID09PSB0b0NvbG9yVHlwZS50cmFuc2Zvcm0sICdCb3RoIGNvbG9ycyBtdXN0IGJlIGhleC9SR0JBLCBPUiBib3RoIG11c3QgYmUgSFNMQS4nKTtcclxuICAgIHZhciBmcm9tQ29sb3IgPSBmcm9tQ29sb3JUeXBlLnBhcnNlKGZyb20pO1xyXG4gICAgdmFyIHRvQ29sb3IgPSB0b0NvbG9yVHlwZS5wYXJzZSh0byk7XHJcbiAgICB2YXIgYmxlbmRlZCA9IF9fYXNzaWduKHt9LCBmcm9tQ29sb3IpO1xyXG4gICAgdmFyIG1peEZ1bmMgPSBmcm9tQ29sb3JUeXBlID09PSBoc2xhID8gbWl4IDogbWl4TGluZWFyQ29sb3I7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gYmxlbmRlZCkge1xyXG4gICAgICAgICAgICBpZiAoa2V5ICE9PSAnYWxwaGEnKSB7XHJcbiAgICAgICAgICAgICAgICBibGVuZGVkW2tleV0gPSBtaXhGdW5jKGZyb21Db2xvcltrZXldLCB0b0NvbG9yW2tleV0sIHYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJsZW5kZWQuYWxwaGEgPSBtaXgoZnJvbUNvbG9yLmFscGhhLCB0b0NvbG9yLmFscGhhLCB2KTtcclxuICAgICAgICByZXR1cm4gZnJvbUNvbG9yVHlwZS50cmFuc2Zvcm0oYmxlbmRlZCk7XHJcbiAgICB9O1xyXG59KTtcblxudmFyIGNvbWJpbmVGdW5jdGlvbnMgPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIGIoYSh2KSk7IH07IH07XHJcbnZhciBwaXBlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB0cmFuc2Zvcm1lcnMgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdHJhbnNmb3JtZXJzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJhbnNmb3JtZXJzLnJlZHVjZShjb21iaW5lRnVuY3Rpb25zKTtcclxufSk7XG5cbmZ1bmN0aW9uIGdldE1peGVyKG9yaWdpbiwgdGFyZ2V0KSB7XHJcbiAgICBpZiAoaXNOdW0ob3JpZ2luKSkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gbWl4KG9yaWdpbiwgdGFyZ2V0LCB2KTsgfTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGNvbG9yLnRlc3Qob3JpZ2luKSkge1xyXG4gICAgICAgIHJldHVybiBtaXhDb2xvcihvcmlnaW4sIHRhcmdldCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbWl4Q29tcGxleChvcmlnaW4sIHRhcmdldCk7XHJcbiAgICB9XHJcbn1cclxudmFyIG1peEFycmF5ID0gZnVuY3Rpb24gKGZyb20sIHRvKSB7XHJcbiAgICB2YXIgb3V0cHV0ID0gZnJvbS5zbGljZSgpO1xyXG4gICAgdmFyIG51bVZhbHVlcyA9IG91dHB1dC5sZW5ndGg7XHJcbiAgICB2YXIgYmxlbmRWYWx1ZSA9IGZyb20ubWFwKGZ1bmN0aW9uIChmcm9tVGhpcywgaSkgeyByZXR1cm4gZ2V0TWl4ZXIoZnJvbVRoaXMsIHRvW2ldKTsgfSk7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bVZhbHVlczsgaSsrKSB7XHJcbiAgICAgICAgICAgIG91dHB1dFtpXSA9IGJsZW5kVmFsdWVbaV0odik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG59O1xyXG52YXIgbWl4T2JqZWN0ID0gZnVuY3Rpb24gKG9yaWdpbiwgdGFyZ2V0KSB7XHJcbiAgICB2YXIgb3V0cHV0ID0gX19hc3NpZ24oe30sIG9yaWdpbiwgdGFyZ2V0KTtcclxuICAgIHZhciBibGVuZFZhbHVlID0ge307XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb3V0cHV0KSB7XHJcbiAgICAgICAgaWYgKG9yaWdpbltrZXldICE9PSB1bmRlZmluZWQgJiYgdGFyZ2V0W2tleV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBibGVuZFZhbHVlW2tleV0gPSBnZXRNaXhlcihvcmlnaW5ba2V5XSwgdGFyZ2V0W2tleV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBibGVuZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIG91dHB1dFtrZXldID0gYmxlbmRWYWx1ZVtrZXldKHYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxufTtcclxuZnVuY3Rpb24gYW5hbHlzZSh2YWx1ZSkge1xyXG4gICAgdmFyIHBhcnNlZCA9IGNvbXBsZXgucGFyc2UodmFsdWUpO1xyXG4gICAgdmFyIG51bVZhbHVlcyA9IHBhcnNlZC5sZW5ndGg7XHJcbiAgICB2YXIgbnVtTnVtYmVycyA9IDA7XHJcbiAgICB2YXIgbnVtUkdCID0gMDtcclxuICAgIHZhciBudW1IU0wgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1WYWx1ZXM7IGkrKykge1xyXG4gICAgICAgIGlmIChudW1OdW1iZXJzIHx8IHR5cGVvZiBwYXJzZWRbaV0gPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgIG51bU51bWJlcnMrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChwYXJzZWRbaV0uaHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG51bUhTTCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbnVtUkdCKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4geyBwYXJzZWQ6IHBhcnNlZCwgbnVtTnVtYmVyczogbnVtTnVtYmVycywgbnVtUkdCOiBudW1SR0IsIG51bUhTTDogbnVtSFNMIH07XHJcbn1cclxudmFyIG1peENvbXBsZXggPSBmdW5jdGlvbiAob3JpZ2luLCB0YXJnZXQpIHtcclxuICAgIHZhciB0ZW1wbGF0ZSA9IGNvbXBsZXguY3JlYXRlVHJhbnNmb3JtZXIodGFyZ2V0KTtcclxuICAgIHZhciBvcmlnaW5TdGF0cyA9IGFuYWx5c2Uob3JpZ2luKTtcclxuICAgIHZhciB0YXJnZXRTdGF0cyA9IGFuYWx5c2UodGFyZ2V0KTtcclxuICAgIGludmFyaWFudChvcmlnaW5TdGF0cy5udW1IU0wgPT09IHRhcmdldFN0YXRzLm51bUhTTCAmJlxyXG4gICAgICAgIG9yaWdpblN0YXRzLm51bVJHQiA9PT0gdGFyZ2V0U3RhdHMubnVtUkdCICYmXHJcbiAgICAgICAgb3JpZ2luU3RhdHMubnVtTnVtYmVycyA+PSB0YXJnZXRTdGF0cy5udW1OdW1iZXJzLCBcIkNvbXBsZXggdmFsdWVzICdcIiArIG9yaWdpbiArIFwiJyBhbmQgJ1wiICsgdGFyZ2V0ICsgXCInIHRvbyBkaWZmZXJlbnQgdG8gbWl4LiBFbnN1cmUgYWxsIGNvbG9ycyBhcmUgb2YgdGhlIHNhbWUgdHlwZS5cIik7XHJcbiAgICByZXR1cm4gcGlwZShtaXhBcnJheShvcmlnaW5TdGF0cy5wYXJzZWQsIHRhcmdldFN0YXRzLnBhcnNlZCksIHRlbXBsYXRlKTtcclxufTtcblxudmFyIG1peE51bWJlciA9IGZ1bmN0aW9uIChmcm9tLCB0bykgeyByZXR1cm4gZnVuY3Rpb24gKHApIHsgcmV0dXJuIG1peChmcm9tLCB0bywgcCk7IH07IH07XHJcbmZ1bmN0aW9uIGRldGVjdE1peGVyRmFjdG9yeSh2KSB7XHJcbiAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgcmV0dXJuIG1peE51bWJlcjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiB2ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGlmIChjb2xvci50ZXN0KHYpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtaXhDb2xvcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtaXhDb21wbGV4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodikpIHtcclxuICAgICAgICByZXR1cm4gbWl4QXJyYXk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgdiA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICByZXR1cm4gbWl4T2JqZWN0O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZU1peGVycyhvdXRwdXQsIGVhc2UsIGN1c3RvbU1peGVyKSB7XHJcbiAgICB2YXIgbWl4ZXJzID0gW107XHJcbiAgICB2YXIgbWl4ZXJGYWN0b3J5ID0gY3VzdG9tTWl4ZXIgfHwgZGV0ZWN0TWl4ZXJGYWN0b3J5KG91dHB1dFswXSk7XHJcbiAgICB2YXIgbnVtTWl4ZXJzID0gb3V0cHV0Lmxlbmd0aCAtIDE7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bU1peGVyczsgaSsrKSB7XHJcbiAgICAgICAgdmFyIG1peGVyID0gbWl4ZXJGYWN0b3J5KG91dHB1dFtpXSwgb3V0cHV0W2kgKyAxXSk7XHJcbiAgICAgICAgaWYgKGVhc2UpIHtcclxuICAgICAgICAgICAgdmFyIGVhc2luZ0Z1bmN0aW9uID0gQXJyYXkuaXNBcnJheShlYXNlKSA/IGVhc2VbaV0gOiBlYXNlO1xyXG4gICAgICAgICAgICBtaXhlciA9IHBpcGUoZWFzaW5nRnVuY3Rpb24sIG1peGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWl4ZXJzLnB1c2gobWl4ZXIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1peGVycztcclxufVxyXG5mdW5jdGlvbiBmYXN0SW50ZXJwb2xhdGUoX2EsIF9iKSB7XHJcbiAgICB2YXIgZnJvbSA9IF9hWzBdLCB0byA9IF9hWzFdO1xyXG4gICAgdmFyIG1peGVyID0gX2JbMF07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG1peGVyKHByb2dyZXNzKGZyb20sIHRvLCB2KSk7IH07XHJcbn1cclxuZnVuY3Rpb24gc2xvd0ludGVycG9sYXRlKGlucHV0LCBtaXhlcnMpIHtcclxuICAgIHZhciBpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aDtcclxuICAgIHZhciBsYXN0SW5wdXRJbmRleCA9IGlucHV0TGVuZ3RoIC0gMTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIHZhciBtaXhlckluZGV4ID0gMDtcclxuICAgICAgICB2YXIgZm91bmRNaXhlckluZGV4ID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHYgPD0gaW5wdXRbMF0pIHtcclxuICAgICAgICAgICAgZm91bmRNaXhlckluZGV4ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodiA+PSBpbnB1dFtsYXN0SW5wdXRJbmRleF0pIHtcclxuICAgICAgICAgICAgbWl4ZXJJbmRleCA9IGxhc3RJbnB1dEluZGV4IC0gMTtcclxuICAgICAgICAgICAgZm91bmRNaXhlckluZGV4ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFmb3VuZE1peGVySW5kZXgpIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAxO1xyXG4gICAgICAgICAgICBmb3IgKDsgaSA8IGlucHV0TGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbnB1dFtpXSA+IHYgfHwgaSA9PT0gbGFzdElucHV0SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtaXhlckluZGV4ID0gaSAtIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwcm9ncmVzc0luUmFuZ2UgPSBwcm9ncmVzcyhpbnB1dFttaXhlckluZGV4XSwgaW5wdXRbbWl4ZXJJbmRleCArIDFdLCB2KTtcclxuICAgICAgICByZXR1cm4gbWl4ZXJzW21peGVySW5kZXhdKHByb2dyZXNzSW5SYW5nZSk7XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGludGVycG9sYXRlKGlucHV0LCBvdXRwdXQsIF9hKSB7XHJcbiAgICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSwgX2MgPSBfYi5jbGFtcCwgY2xhbXAgPSBfYyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9jLCBlYXNlID0gX2IuZWFzZSwgbWl4ZXIgPSBfYi5taXhlcjtcclxuICAgIHZhciBpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aDtcclxuICAgIGludmFyaWFudChpbnB1dExlbmd0aCA9PT0gb3V0cHV0Lmxlbmd0aCwgJ0JvdGggaW5wdXQgYW5kIG91dHB1dCByYW5nZXMgbXVzdCBiZSB0aGUgc2FtZSBsZW5ndGgnKTtcclxuICAgIGludmFyaWFudCghZWFzZSB8fCAhQXJyYXkuaXNBcnJheShlYXNlKSB8fCBlYXNlLmxlbmd0aCA9PT0gaW5wdXRMZW5ndGggLSAxLCAnQXJyYXkgb2YgZWFzaW5nIGZ1bmN0aW9ucyBtdXN0IGJlIG9mIGxlbmd0aCBgaW5wdXQubGVuZ3RoIC0gMWAsIGFzIGl0IGFwcGxpZXMgdG8gdGhlIHRyYW5zaXRpb25zICoqYmV0d2VlbioqIHRoZSBkZWZpbmVkIHZhbHVlcy4nKTtcclxuICAgIGlmIChpbnB1dFswXSA+IGlucHV0W2lucHV0TGVuZ3RoIC0gMV0pIHtcclxuICAgICAgICBpbnB1dCA9IFtdLmNvbmNhdChpbnB1dCk7XHJcbiAgICAgICAgb3V0cHV0ID0gW10uY29uY2F0KG91dHB1dCk7XHJcbiAgICAgICAgaW5wdXQucmV2ZXJzZSgpO1xyXG4gICAgICAgIG91dHB1dC5yZXZlcnNlKCk7XHJcbiAgICB9XHJcbiAgICB2YXIgbWl4ZXJzID0gY3JlYXRlTWl4ZXJzKG91dHB1dCwgZWFzZSwgbWl4ZXIpO1xyXG4gICAgdmFyIGludGVycG9sYXRvciA9IGlucHV0TGVuZ3RoID09PSAyXHJcbiAgICAgICAgPyBmYXN0SW50ZXJwb2xhdGUoaW5wdXQsIG1peGVycylcclxuICAgICAgICA6IHNsb3dJbnRlcnBvbGF0ZShpbnB1dCwgbWl4ZXJzKTtcclxuICAgIHJldHVybiBjbGFtcFxyXG4gICAgICAgID8gcGlwZShjbGFtcCQxKGlucHV0WzBdLCBpbnB1dFtpbnB1dExlbmd0aCAtIDFdKSwgaW50ZXJwb2xhdG9yKVxyXG4gICAgICAgIDogaW50ZXJwb2xhdG9yO1xyXG59XG5cbnZhciBwb2ludEZyb21WZWN0b3IgPSAoZnVuY3Rpb24gKG9yaWdpbiwgYW5nbGUsIGRpc3RhbmNlKSB7XHJcbiAgICBhbmdsZSA9IGRlZ3JlZXNUb1JhZGlhbnMoYW5nbGUpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB4OiBkaXN0YW5jZSAqIE1hdGguY29zKGFuZ2xlKSArIG9yaWdpbi54LFxyXG4gICAgICAgIHk6IGRpc3RhbmNlICogTWF0aC5zaW4oYW5nbGUpICsgb3JpZ2luLnlcclxuICAgIH07XHJcbn0pO1xuXG52YXIgdG9EZWNpbWFsID0gKGZ1bmN0aW9uIChudW0sIHByZWNpc2lvbikge1xyXG4gICAgaWYgKHByZWNpc2lvbiA9PT0gdm9pZCAwKSB7IHByZWNpc2lvbiA9IDI7IH1cclxuICAgIHByZWNpc2lvbiA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24pO1xyXG4gICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogcHJlY2lzaW9uKSAvIHByZWNpc2lvbjtcclxufSk7XG5cbnZhciBzbW9vdGhGcmFtZSA9IChmdW5jdGlvbiAocHJldlZhbHVlLCBuZXh0VmFsdWUsIGR1cmF0aW9uLCBzbW9vdGhpbmcpIHtcclxuICAgIGlmIChzbW9vdGhpbmcgPT09IHZvaWQgMCkgeyBzbW9vdGhpbmcgPSAwOyB9XHJcbiAgICByZXR1cm4gdG9EZWNpbWFsKHByZXZWYWx1ZSArXHJcbiAgICAgICAgKGR1cmF0aW9uICogKG5leHRWYWx1ZSAtIHByZXZWYWx1ZSkpIC8gTWF0aC5tYXgoc21vb3RoaW5nLCBkdXJhdGlvbikpO1xyXG59KTtcblxudmFyIHNtb290aCA9IChmdW5jdGlvbiAoc3RyZW5ndGgpIHtcclxuICAgIGlmIChzdHJlbmd0aCA9PT0gdm9pZCAwKSB7IHN0cmVuZ3RoID0gNTA7IH1cclxuICAgIHZhciBwcmV2aW91c1ZhbHVlID0gMDtcclxuICAgIHZhciBsYXN0VXBkYXRlZCA9IDA7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICB2YXIgY3VycmVudEZyYW1lc3RhbXAgPSBnZXRGcmFtZURhdGEoKS50aW1lc3RhbXA7XHJcbiAgICAgICAgdmFyIHRpbWVEZWx0YSA9IGN1cnJlbnRGcmFtZXN0YW1wICE9PSBsYXN0VXBkYXRlZCA/IGN1cnJlbnRGcmFtZXN0YW1wIC0gbGFzdFVwZGF0ZWQgOiAwO1xyXG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IHRpbWVEZWx0YVxyXG4gICAgICAgICAgICA/IHNtb290aEZyYW1lKHByZXZpb3VzVmFsdWUsIHYsIHRpbWVEZWx0YSwgc3RyZW5ndGgpXHJcbiAgICAgICAgICAgIDogcHJldmlvdXNWYWx1ZTtcclxuICAgICAgICBsYXN0VXBkYXRlZCA9IGN1cnJlbnRGcmFtZXN0YW1wO1xyXG4gICAgICAgIHByZXZpb3VzVmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICByZXR1cm4gbmV3VmFsdWU7XHJcbiAgICB9O1xyXG59KTtcblxudmFyIHNuYXAgPSAoZnVuY3Rpb24gKHBvaW50cykge1xyXG4gICAgaWYgKHR5cGVvZiBwb2ludHMgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBNYXRoLnJvdW5kKHYgLyBwb2ludHMpICogcG9pbnRzOyB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdmFyIGlfMSA9IDA7XHJcbiAgICAgICAgdmFyIG51bVBvaW50c18xID0gcG9pbnRzLmxlbmd0aDtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICAgICAgdmFyIGxhc3REaXN0YW5jZSA9IE1hdGguYWJzKHBvaW50c1swXSAtIHYpO1xyXG4gICAgICAgICAgICBmb3IgKGlfMSA9IDE7IGlfMSA8IG51bVBvaW50c18xOyBpXzErKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gcG9pbnRzW2lfMV07XHJcbiAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLmFicyhwb2ludCAtIHYpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlID09PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb2ludDtcclxuICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA+IGxhc3REaXN0YW5jZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9pbnRzW2lfMSAtIDFdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlfMSA9PT0gbnVtUG9pbnRzXzEgLSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb2ludDtcclxuICAgICAgICAgICAgICAgIGxhc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSk7XG5cbnZhciBpZGVudGl0eSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiB2OyB9O1xyXG52YXIgc3ByaW5nRm9yY2UgPSBmdW5jdGlvbiAoYWx0ZXJEaXNwbGFjZW1lbnQpIHtcclxuICAgIGlmIChhbHRlckRpc3BsYWNlbWVudCA9PT0gdm9pZCAwKSB7IGFsdGVyRGlzcGxhY2VtZW50ID0gaWRlbnRpdHk7IH1cclxuICAgIHJldHVybiBjdXJyeVJhbmdlKGZ1bmN0aW9uIChjb25zdGFudCwgb3JpZ2luLCB2KSB7XHJcbiAgICAgICAgdmFyIGRpc3BsYWNlbWVudCA9IG9yaWdpbiAtIHY7XHJcbiAgICAgICAgdmFyIHNwcmluZ01vZGlmaWVkRGlzcGxhY2VtZW50ID0gLSgwIC0gY29uc3RhbnQgKyAxKSAqICgwIC0gYWx0ZXJEaXNwbGFjZW1lbnQoTWF0aC5hYnMoZGlzcGxhY2VtZW50KSkpO1xyXG4gICAgICAgIHJldHVybiBkaXNwbGFjZW1lbnQgPD0gMFxyXG4gICAgICAgICAgICA/IG9yaWdpbiArIHNwcmluZ01vZGlmaWVkRGlzcGxhY2VtZW50XHJcbiAgICAgICAgICAgIDogb3JpZ2luIC0gc3ByaW5nTW9kaWZpZWREaXNwbGFjZW1lbnQ7XHJcbiAgICB9KTtcclxufTtcclxudmFyIHNwcmluZ0ZvcmNlTGluZWFyID0gc3ByaW5nRm9yY2UoKTtcclxudmFyIHNwcmluZ0ZvcmNlRXhwbyA9IHNwcmluZ0ZvcmNlKE1hdGguc3FydCk7XG5cbnZhciB2ZWxvY2l0eVBlckZyYW1lID0gKGZ1bmN0aW9uICh4cHMsIGZyYW1lRHVyYXRpb24pIHtcclxuICAgIHJldHVybiBpc051bSh4cHMpID8geHBzIC8gKDEwMDAgLyBmcmFtZUR1cmF0aW9uKSA6IDA7XHJcbn0pO1xuXG52YXIgdmVsb2NpdHlQZXJTZWNvbmQgPSAoZnVuY3Rpb24gKHZlbG9jaXR5LCBmcmFtZUR1cmF0aW9uKSB7XHJcbiAgICByZXR1cm4gZnJhbWVEdXJhdGlvbiA/IHZlbG9jaXR5ICogKDEwMDAgLyBmcmFtZUR1cmF0aW9uKSA6IDA7XHJcbn0pO1xuXG52YXIgd3JhcCA9IGZ1bmN0aW9uIChtaW4sIG1heCwgdikge1xyXG4gICAgdmFyIHJhbmdlU2l6ZSA9IG1heCAtIG1pbjtcclxuICAgIHJldHVybiAoKCgodiAtIG1pbikgJSByYW5nZVNpemUpICsgcmFuZ2VTaXplKSAlIHJhbmdlU2l6ZSkgKyBtaW47XHJcbn07XHJcbnZhciB3cmFwJDEgPSBjdXJyeVJhbmdlKHdyYXApO1xuXG52YXIgY2xhbXBQcm9ncmVzcyA9IGNsYW1wJDEoMCwgMSk7XHJcbnZhciBzdGVwcyA9IChmdW5jdGlvbiAoc3RlcHMsIGRpcmVjdGlvbikge1xyXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gdm9pZCAwKSB7IGRpcmVjdGlvbiA9ICdlbmQnOyB9XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHByb2dyZXNzKSB7XHJcbiAgICAgICAgcHJvZ3Jlc3MgPVxyXG4gICAgICAgICAgICBkaXJlY3Rpb24gPT09ICdlbmQnID8gTWF0aC5taW4ocHJvZ3Jlc3MsIDAuOTk5KSA6IE1hdGgubWF4KHByb2dyZXNzLCAwLjAwMSk7XHJcbiAgICAgICAgdmFyIGV4cGFuZGVkID0gcHJvZ3Jlc3MgKiBzdGVwcztcclxuICAgICAgICB2YXIgcm91bmRlZCA9IGRpcmVjdGlvbiA9PT0gJ2VuZCcgPyBNYXRoLmZsb29yKGV4cGFuZGVkKSA6IE1hdGguY2VpbChleHBhbmRlZCk7XHJcbiAgICAgICAgcmV0dXJuIGNsYW1wUHJvZ3Jlc3Mocm91bmRlZCAvIHN0ZXBzKTtcclxuICAgIH07XHJcbn0pO1xuXG5leHBvcnQgeyBhbmdsZSwgYXBwbHlPZmZzZXQsIGNsYW1wJDEgYXMgY2xhbXAsIGNvbmRpdGlvbmFsLCBkZWdyZWVzVG9SYWRpYW5zLCBkaXN0YW5jZSwgaW50ZXJwb2xhdGUsIGlzUG9pbnQsIGlzUG9pbnQzRCwgbWl4LCBtaXhBcnJheSwgbWl4Q29sb3IsIG1peENvbXBsZXgsIG1peE9iamVjdCwgcGlwZSwgcG9pbnRGcm9tVmVjdG9yLCBwcm9ncmVzcywgcmFkaWFuc1RvRGVncmVlcywgc21vb3RoLCBzbW9vdGhGcmFtZSwgc25hcCwgc3ByaW5nRm9yY2UsIHNwcmluZ0ZvcmNlRXhwbywgc3ByaW5nRm9yY2VMaW5lYXIsIHN0ZXBzLCB0b0RlY2ltYWwsIHZlbG9jaXR5UGVyRnJhbWUsIHZlbG9jaXR5UGVyU2Vjb25kLCB3cmFwJDEgYXMgd3JhcCB9O1xuIiwiaW1wb3J0IHN5bmMgZnJvbSAnZnJhbWVzeW5jJztcbmltcG9ydCB7IGFscGhhLCBjb2xvciwgZGVncmVlcywgc2NhbGUsIHB4LCBwcm9ncmVzc1BlcmNlbnRhZ2UsIG51bWJlciB9IGZyb20gJ3N0eWxlLXZhbHVlLXR5cGVzJztcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gJ2hleS1saXN0ZW4nO1xuXG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG52YXIgX19hc3NpZ24gPSBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcblxuZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKSB0W3BdID0gc1twXTtcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKSB0W3BbaV1dID0gc1twW2ldXTtcbiAgICByZXR1cm4gdDtcbn1cblxudmFyIGNyZWF0ZVN0eWxlciA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBvblJlYWQgPSBfYS5vblJlYWQsXG4gICAgICAgIG9uUmVuZGVyID0gX2Eub25SZW5kZXIsXG4gICAgICAgIF9iID0gX2EudW5jYWNoZWRWYWx1ZXMsXG4gICAgICAgIHVuY2FjaGVkVmFsdWVzID0gX2IgPT09IHZvaWQgMCA/IG5ldyBTZXQoKSA6IF9iLFxuICAgICAgICBfYyA9IF9hLnVzZUNhY2hlLFxuICAgICAgICB1c2VDYWNoZSA9IF9jID09PSB2b2lkIDAgPyB0cnVlIDogX2M7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICBpZiAoX2EgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgX2EgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJvcHMgPSBfX3Jlc3QoX2EsIFtdKTtcbiAgICAgICAgdmFyIHN0YXRlID0ge307XG4gICAgICAgIHZhciBjaGFuZ2VkVmFsdWVzID0gW107XG4gICAgICAgIHZhciBoYXNDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgIGZ1bmN0aW9uIHNldFZhbHVlKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnLS0nKSkge1xuICAgICAgICAgICAgICAgIHByb3BzLmhhc0NTU1ZhcmlhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSBzdGF0ZVtrZXldO1xuICAgICAgICAgICAgc3RhdGVba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKHN0YXRlW2tleV0gPT09IGN1cnJlbnRWYWx1ZSkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGNoYW5nZWRWYWx1ZXMuaW5kZXhPZihrZXkpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGNoYW5nZWRWYWx1ZXMucHVzaChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFoYXNDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc3luYy5yZW5kZXIoc3R5bGVyLnJlbmRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0eWxlciA9IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKGtleSwgZm9yY2VSZWFkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvcmNlUmVhZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmNlUmVhZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdXNlQ2FjaGVkID0gIWZvcmNlUmVhZCAmJiB1c2VDYWNoZSAmJiAhdW5jYWNoZWRWYWx1ZXMuaGFzKGtleSkgJiYgc3RhdGVba2V5XSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VDYWNoZWQgPyBzdGF0ZVtrZXldIDogb25SZWFkKGtleSwgcHJvcHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlcywgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWUodmFsdWVzLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWUoa2V5LCB2YWx1ZXNba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoZm9yY2VSZW5kZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm9yY2VSZW5kZXIgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JjZVJlbmRlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaGFzQ2hhbmdlZCB8fCBmb3JjZVJlbmRlciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBvblJlbmRlcihzdGF0ZSwgcHJvcHMsIGNoYW5nZWRWYWx1ZXMpO1xuICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWRWYWx1ZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBzdHlsZXI7XG4gICAgfTtcbn07XG5cbnZhciBDQU1FTF9DQVNFX1BBVFRFUk4gPSAvKFthLXpdKShbQS1aXSkvZztcbnZhciBSRVBMQUNFX1RFTVBMQVRFID0gJyQxLSQyJztcbnZhciBjYW1lbFRvRGFzaCA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoQ0FNRUxfQ0FTRV9QQVRURVJOLCBSRVBMQUNFX1RFTVBMQVRFKS50b0xvd2VyQ2FzZSgpO1xufTtcbnZhciBzZXREb21BdHRycyA9IGZ1bmN0aW9uIChlbGVtZW50LCBhdHRycykge1xuICAgIGZvciAodmFyIGtleSBpbiBhdHRycykge1xuICAgICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyc1trZXldKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbnZhciBjYW1lbENhY2hlID0gLyojX19QVVJFX18qL25ldyBNYXAoKTtcbnZhciBkYXNoQ2FjaGUgPSAvKiNfX1BVUkVfXyovbmV3IE1hcCgpO1xudmFyIHByZWZpeGVzID0gWydXZWJraXQnLCAnTW96JywgJ08nLCAnbXMnLCAnJ107XG52YXIgbnVtUHJlZml4ZXMgPSBwcmVmaXhlcy5sZW5ndGg7XG52YXIgaXNCcm93c2VyID0gdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJztcbnZhciB0ZXN0RWxlbWVudDtcbnZhciBzZXREYXNoUHJlZml4ID0gZnVuY3Rpb24gKGtleSwgcHJlZml4ZWQpIHtcbiAgICByZXR1cm4gZGFzaENhY2hlLnNldChrZXksIGNhbWVsVG9EYXNoKHByZWZpeGVkKSk7XG59O1xudmFyIHRlc3RQcmVmaXggPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgdGVzdEVsZW1lbnQgPSB0ZXN0RWxlbWVudCB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bVByZWZpeGVzOyBpKyspIHtcbiAgICAgICAgdmFyIHByZWZpeCA9IHByZWZpeGVzW2ldO1xuICAgICAgICB2YXIgbm9QcmVmaXggPSBwcmVmaXggPT09ICcnO1xuICAgICAgICB2YXIgcHJlZml4ZWRQcm9wZXJ0eU5hbWUgPSBub1ByZWZpeCA/IGtleSA6IHByZWZpeCArIGtleS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGtleS5zbGljZSgxKTtcbiAgICAgICAgaWYgKHByZWZpeGVkUHJvcGVydHlOYW1lIGluIHRlc3RFbGVtZW50LnN0eWxlIHx8IG5vUHJlZml4KSB7XG4gICAgICAgICAgICBjYW1lbENhY2hlLnNldChrZXksIHByZWZpeGVkUHJvcGVydHlOYW1lKTtcbiAgICAgICAgICAgIHNldERhc2hQcmVmaXgoa2V5LCBcIlwiICsgKG5vUHJlZml4ID8gJycgOiAnLScpICsgY2FtZWxUb0Rhc2gocHJlZml4ZWRQcm9wZXJ0eU5hbWUpKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG52YXIgc2V0U2VydmVyUHJvcGVydHkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHNldERhc2hQcmVmaXgoa2V5LCBrZXkpO1xufTtcbnZhciBwcmVmaXhlciA9IGZ1bmN0aW9uIChrZXksIGFzRGFzaENhc2UpIHtcbiAgICBpZiAoYXNEYXNoQ2FzZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGFzRGFzaENhc2UgPSBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGNhY2hlID0gYXNEYXNoQ2FzZSA/IGRhc2hDYWNoZSA6IGNhbWVsQ2FjaGU7XG4gICAgaWYgKCFjYWNoZS5oYXMoa2V5KSkgaXNCcm93c2VyID8gdGVzdFByZWZpeChrZXkpIDogc2V0U2VydmVyUHJvcGVydHkoa2V5KTtcbiAgICByZXR1cm4gY2FjaGUuZ2V0KGtleSkgfHwga2V5O1xufTtcblxudmFyIGF4ZXMgPSBbJycsICdYJywgJ1knLCAnWiddO1xudmFyIG9yZGVyID0gWydzY2FsZScsICdyb3RhdGUnLCAnc2tldycsICd0cmFuc2Zvcm1QZXJzcGVjdGl2ZSddO1xudmFyIHRyYW5zZm9ybVByb3BzID0gLyojX19QVVJFX18qL29yZGVyLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBrZXkpIHtcbiAgICByZXR1cm4gYXhlcy5yZWR1Y2UoZnVuY3Rpb24gKGF4ZXNBY2MsIGF4ZXNLZXkpIHtcbiAgICAgICAgYXhlc0FjYy5wdXNoKGtleSArIGF4ZXNLZXkpO1xuICAgICAgICByZXR1cm4gYXhlc0FjYztcbiAgICB9LCBhY2MpO1xufSwgWyd4JywgJ3knLCAneiddKTtcbnZhciB0cmFuc2Zvcm1Qcm9wRGljdGlvbmFyeSA9IC8qI19fUFVSRV9fKi90cmFuc2Zvcm1Qcm9wcy5yZWR1Y2UoZnVuY3Rpb24gKGRpY3QsIGtleSkge1xuICAgIGRpY3Rba2V5XSA9IHRydWU7XG4gICAgcmV0dXJuIGRpY3Q7XG59LCB7fSk7XG5mdW5jdGlvbiBpc1RyYW5zZm9ybVByb3Aoa2V5KSB7XG4gICAgcmV0dXJuIHRyYW5zZm9ybVByb3BEaWN0aW9uYXJ5W2tleV0gPT09IHRydWU7XG59XG5mdW5jdGlvbiBzb3J0VHJhbnNmb3JtUHJvcHMoYSwgYikge1xuICAgIHJldHVybiB0cmFuc2Zvcm1Qcm9wcy5pbmRleE9mKGEpIC0gdHJhbnNmb3JtUHJvcHMuaW5kZXhPZihiKTtcbn1cbnZhciB0cmFuc2Zvcm1PcmlnaW5Qcm9wcyA9IC8qI19fUFVSRV9fKi9uZXcgU2V0KFsnb3JpZ2luWCcsICdvcmlnaW5ZJywgJ29yaWdpblonXSk7XG5mdW5jdGlvbiBpc1RyYW5zZm9ybU9yaWdpblByb3Aoa2V5KSB7XG4gICAgcmV0dXJuIHRyYW5zZm9ybU9yaWdpblByb3BzLmhhcyhrZXkpO1xufVxuXG52YXIgcm91bmRlZCA9IC8qI19fUFVSRV9fKi9fX2Fzc2lnbih7fSwgbnVtYmVyLCB7IHRyYW5zZm9ybTogTWF0aC5yb3VuZCB9KTtcbnZhciB2YWx1ZVR5cGVzID0ge1xuICAgIGNvbG9yOiBjb2xvcixcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yLFxuICAgIG91dGxpbmVDb2xvcjogY29sb3IsXG4gICAgZmlsbDogY29sb3IsXG4gICAgc3Ryb2tlOiBjb2xvcixcbiAgICBib3JkZXJDb2xvcjogY29sb3IsXG4gICAgYm9yZGVyVG9wQ29sb3I6IGNvbG9yLFxuICAgIGJvcmRlclJpZ2h0Q29sb3I6IGNvbG9yLFxuICAgIGJvcmRlckJvdHRvbUNvbG9yOiBjb2xvcixcbiAgICBib3JkZXJMZWZ0Q29sb3I6IGNvbG9yLFxuICAgIGJvcmRlcldpZHRoOiBweCxcbiAgICBib3JkZXJUb3BXaWR0aDogcHgsXG4gICAgYm9yZGVyUmlnaHRXaWR0aDogcHgsXG4gICAgYm9yZGVyQm90dG9tV2lkdGg6IHB4LFxuICAgIGJvcmRlckxlZnRXaWR0aDogcHgsXG4gICAgYm9yZGVyUmFkaXVzOiBweCxcbiAgICByYWRpdXM6IHB4LFxuICAgIGJvcmRlclRvcExlZnRSYWRpdXM6IHB4LFxuICAgIGJvcmRlclRvcFJpZ2h0UmFkaXVzOiBweCxcbiAgICBib3JkZXJCb3R0b21SaWdodFJhZGl1czogcHgsXG4gICAgYm9yZGVyQm90dG9tTGVmdFJhZGl1czogcHgsXG4gICAgd2lkdGg6IHB4LFxuICAgIG1heFdpZHRoOiBweCxcbiAgICBoZWlnaHQ6IHB4LFxuICAgIG1heEhlaWdodDogcHgsXG4gICAgc2l6ZTogcHgsXG4gICAgdG9wOiBweCxcbiAgICByaWdodDogcHgsXG4gICAgYm90dG9tOiBweCxcbiAgICBsZWZ0OiBweCxcbiAgICBwYWRkaW5nOiBweCxcbiAgICBwYWRkaW5nVG9wOiBweCxcbiAgICBwYWRkaW5nUmlnaHQ6IHB4LFxuICAgIHBhZGRpbmdCb3R0b206IHB4LFxuICAgIHBhZGRpbmdMZWZ0OiBweCxcbiAgICBtYXJnaW46IHB4LFxuICAgIG1hcmdpblRvcDogcHgsXG4gICAgbWFyZ2luUmlnaHQ6IHB4LFxuICAgIG1hcmdpbkJvdHRvbTogcHgsXG4gICAgbWFyZ2luTGVmdDogcHgsXG4gICAgcm90YXRlOiBkZWdyZWVzLFxuICAgIHJvdGF0ZVg6IGRlZ3JlZXMsXG4gICAgcm90YXRlWTogZGVncmVlcyxcbiAgICByb3RhdGVaOiBkZWdyZWVzLFxuICAgIHNjYWxlOiBzY2FsZSxcbiAgICBzY2FsZVg6IHNjYWxlLFxuICAgIHNjYWxlWTogc2NhbGUsXG4gICAgc2NhbGVaOiBzY2FsZSxcbiAgICBza2V3OiBkZWdyZWVzLFxuICAgIHNrZXdYOiBkZWdyZWVzLFxuICAgIHNrZXdZOiBkZWdyZWVzLFxuICAgIGRpc3RhbmNlOiBweCxcbiAgICB4OiBweCxcbiAgICB5OiBweCxcbiAgICB6OiBweCxcbiAgICBwZXJzcGVjdGl2ZTogcHgsXG4gICAgb3BhY2l0eTogYWxwaGEsXG4gICAgb3JpZ2luWDogcHJvZ3Jlc3NQZXJjZW50YWdlLFxuICAgIG9yaWdpblk6IHByb2dyZXNzUGVyY2VudGFnZSxcbiAgICBvcmlnaW5aOiBweCxcbiAgICB6SW5kZXg6IHJvdW5kZWRcbn07XG52YXIgZ2V0VmFsdWVUeXBlID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiB2YWx1ZVR5cGVzW2tleV07XG59O1xudmFyIGdldFZhbHVlQXNUeXBlID0gZnVuY3Rpb24gKHZhbHVlLCB0eXBlKSB7XG4gICAgcmV0dXJuIHR5cGUgJiYgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyA/IHR5cGUudHJhbnNmb3JtKHZhbHVlKSA6IHZhbHVlO1xufTtcblxudmFyIFNDUk9MTF9MRUZUID0gJ3Njcm9sbExlZnQnO1xudmFyIFNDUk9MTF9UT1AgPSAnc2Nyb2xsVG9wJztcbnZhciBzY3JvbGxLZXlzID0gLyojX19QVVJFX18qL25ldyBTZXQoW1NDUk9MTF9MRUZULCBTQ1JPTExfVE9QXSk7XG5cbnZhciBibGFja2xpc3QgPSAvKiNfX1BVUkVfXyovbmV3IFNldChbU0NST0xMX0xFRlQsIFNDUk9MTF9UT1AsICd0cmFuc2Zvcm0nXSk7XG52YXIgdHJhbnNsYXRlQWxpYXMgPSB7XG4gICAgeDogJ3RyYW5zbGF0ZVgnLFxuICAgIHk6ICd0cmFuc2xhdGVZJyxcbiAgICB6OiAndHJhbnNsYXRlWidcbn07XG5mdW5jdGlvbiBpc0N1c3RvbVRlbXBsYXRlKHYpIHtcbiAgICByZXR1cm4gdHlwZW9mIHYgPT09ICdmdW5jdGlvbic7XG59XG5mdW5jdGlvbiBidWlsZFRyYW5zZm9ybShzdGF0ZSwgdHJhbnNmb3JtLCB0cmFuc2Zvcm1LZXlzLCB0cmFuc2Zvcm1Jc0RlZmF1bHQsIGVuYWJsZUhhcmR3YXJlQWNjZWxlcmF0aW9uKSB7XG4gICAgdmFyIHRyYW5zZm9ybVN0cmluZyA9ICcnO1xuICAgIHZhciB0cmFuc2Zvcm1IYXNaID0gZmFsc2U7XG4gICAgdHJhbnNmb3JtS2V5cy5zb3J0KHNvcnRUcmFuc2Zvcm1Qcm9wcyk7XG4gICAgdmFyIG51bVRyYW5zZm9ybUtleXMgPSB0cmFuc2Zvcm1LZXlzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bVRyYW5zZm9ybUtleXM7IGkrKykge1xuICAgICAgICB2YXIga2V5ID0gdHJhbnNmb3JtS2V5c1tpXTtcbiAgICAgICAgdHJhbnNmb3JtU3RyaW5nICs9ICh0cmFuc2xhdGVBbGlhc1trZXldIHx8IGtleSkgKyBcIihcIiArIHRyYW5zZm9ybVtrZXldICsgXCIpIFwiO1xuICAgICAgICB0cmFuc2Zvcm1IYXNaID0ga2V5ID09PSAneicgPyB0cnVlIDogdHJhbnNmb3JtSGFzWjtcbiAgICB9XG4gICAgaWYgKCF0cmFuc2Zvcm1IYXNaICYmIGVuYWJsZUhhcmR3YXJlQWNjZWxlcmF0aW9uKSB7XG4gICAgICAgIHRyYW5zZm9ybVN0cmluZyArPSAndHJhbnNsYXRlWigwKSc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdHJhbnNmb3JtU3RyaW5nID0gdHJhbnNmb3JtU3RyaW5nLnRyaW0oKTtcbiAgICB9XG4gICAgaWYgKGlzQ3VzdG9tVGVtcGxhdGUoc3RhdGUudHJhbnNmb3JtKSkge1xuICAgICAgICB0cmFuc2Zvcm1TdHJpbmcgPSBzdGF0ZS50cmFuc2Zvcm0odHJhbnNmb3JtLCB0cmFuc2Zvcm1TdHJpbmcpO1xuICAgIH0gZWxzZSBpZiAodHJhbnNmb3JtSXNEZWZhdWx0KSB7XG4gICAgICAgIHRyYW5zZm9ybVN0cmluZyA9ICdub25lJztcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybVN0cmluZztcbn1cbmZ1bmN0aW9uIGJ1aWxkU3R5bGVQcm9wZXJ0eShzdGF0ZSwgZW5hYmxlSGFyZHdhcmVBY2NlbGVyYXRpb24sIHN0eWxlcywgdHJhbnNmb3JtLCB0cmFuc2Zvcm1PcmlnaW4sIHRyYW5zZm9ybUtleXMsIGlzRGFzaENhc2UpIHtcbiAgICBpZiAoZW5hYmxlSGFyZHdhcmVBY2NlbGVyYXRpb24gPT09IHZvaWQgMCkge1xuICAgICAgICBlbmFibGVIYXJkd2FyZUFjY2VsZXJhdGlvbiA9IHRydWU7XG4gICAgfVxuICAgIGlmIChzdHlsZXMgPT09IHZvaWQgMCkge1xuICAgICAgICBzdHlsZXMgPSB7fTtcbiAgICB9XG4gICAgaWYgKHRyYW5zZm9ybSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRyYW5zZm9ybSA9IHt9O1xuICAgIH1cbiAgICBpZiAodHJhbnNmb3JtT3JpZ2luID09PSB2b2lkIDApIHtcbiAgICAgICAgdHJhbnNmb3JtT3JpZ2luID0ge307XG4gICAgfVxuICAgIGlmICh0cmFuc2Zvcm1LZXlzID09PSB2b2lkIDApIHtcbiAgICAgICAgdHJhbnNmb3JtS2V5cyA9IFtdO1xuICAgIH1cbiAgICBpZiAoaXNEYXNoQ2FzZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGlzRGFzaENhc2UgPSBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHRyYW5zZm9ybUlzRGVmYXVsdCA9IHRydWU7XG4gICAgdmFyIGhhc1RyYW5zZm9ybSA9IGZhbHNlO1xuICAgIHZhciBoYXNUcmFuc2Zvcm1PcmlnaW4gPSBmYWxzZTtcbiAgICBmb3IgKHZhciBrZXkgaW4gc3RhdGUpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gc3RhdGVba2V5XTtcbiAgICAgICAgdmFyIHZhbHVlVHlwZSA9IGdldFZhbHVlVHlwZShrZXkpO1xuICAgICAgICB2YXIgdmFsdWVBc1R5cGUgPSBnZXRWYWx1ZUFzVHlwZSh2YWx1ZSwgdmFsdWVUeXBlKTtcbiAgICAgICAgaWYgKGlzVHJhbnNmb3JtUHJvcChrZXkpKSB7XG4gICAgICAgICAgICBoYXNUcmFuc2Zvcm0gPSB0cnVlO1xuICAgICAgICAgICAgdHJhbnNmb3JtW2tleV0gPSB2YWx1ZUFzVHlwZTtcbiAgICAgICAgICAgIHRyYW5zZm9ybUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgaWYgKHRyYW5zZm9ybUlzRGVmYXVsdCkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZVR5cGUuZGVmYXVsdCAmJiB2YWx1ZSAhPT0gdmFsdWVUeXBlLmRlZmF1bHQgfHwgIXZhbHVlVHlwZS5kZWZhdWx0ICYmIHZhbHVlICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybUlzRGVmYXVsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpc1RyYW5zZm9ybU9yaWdpblByb3Aoa2V5KSkge1xuICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luW2tleV0gPSB2YWx1ZUFzVHlwZTtcbiAgICAgICAgICAgIGhhc1RyYW5zZm9ybU9yaWdpbiA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoIWJsYWNrbGlzdC5oYXMoa2V5KSB8fCAhaXNDdXN0b21UZW1wbGF0ZSh2YWx1ZUFzVHlwZSkpIHtcbiAgICAgICAgICAgIHN0eWxlc1twcmVmaXhlcihrZXksIGlzRGFzaENhc2UpXSA9IHZhbHVlQXNUeXBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChoYXNUcmFuc2Zvcm0gfHwgdHlwZW9mIHN0YXRlLnRyYW5zZm9ybSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBzdHlsZXMudHJhbnNmb3JtID0gYnVpbGRUcmFuc2Zvcm0oc3RhdGUsIHRyYW5zZm9ybSwgdHJhbnNmb3JtS2V5cywgdHJhbnNmb3JtSXNEZWZhdWx0LCBlbmFibGVIYXJkd2FyZUFjY2VsZXJhdGlvbik7XG4gICAgfVxuICAgIGlmIChoYXNUcmFuc2Zvcm1PcmlnaW4pIHtcbiAgICAgICAgc3R5bGVzLnRyYW5zZm9ybU9yaWdpbiA9ICh0cmFuc2Zvcm1PcmlnaW4ub3JpZ2luWCB8fCAwKSArIFwiIFwiICsgKHRyYW5zZm9ybU9yaWdpbi5vcmlnaW5ZIHx8IDApICsgXCIgXCIgKyAodHJhbnNmb3JtT3JpZ2luLm9yaWdpblogfHwgMCk7XG4gICAgfVxuICAgIHJldHVybiBzdHlsZXM7XG59XG5mdW5jdGlvbiBjcmVhdGVTdHlsZUJ1aWxkZXIoZW5hYmxlSGFyZHdhcmVBY2NlbGVyYXRpb24pIHtcbiAgICBpZiAoZW5hYmxlSGFyZHdhcmVBY2NlbGVyYXRpb24gPT09IHZvaWQgMCkge1xuICAgICAgICBlbmFibGVIYXJkd2FyZUFjY2VsZXJhdGlvbiA9IHRydWU7XG4gICAgfVxuICAgIHZhciBzdHlsZXMgPSB7fTtcbiAgICB2YXIgdHJhbnNmb3JtID0ge307XG4gICAgdmFyIHRyYW5zZm9ybU9yaWdpbiA9IHt9O1xuICAgIHZhciB0cmFuc2Zvcm1LZXlzID0gW107XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB0cmFuc2Zvcm1LZXlzLmxlbmd0aCA9IDA7XG4gICAgICAgIGJ1aWxkU3R5bGVQcm9wZXJ0eShzdGF0ZSwgZW5hYmxlSGFyZHdhcmVBY2NlbGVyYXRpb24sIHN0eWxlcywgdHJhbnNmb3JtLCB0cmFuc2Zvcm1PcmlnaW4sIHRyYW5zZm9ybUtleXMsIHRydWUpO1xuICAgICAgICByZXR1cm4gc3R5bGVzO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIG9uUmVhZChrZXksIG9wdGlvbnMpIHtcbiAgICB2YXIgZWxlbWVudCA9IG9wdGlvbnMuZWxlbWVudCxcbiAgICAgICAgcHJlcGFyc2VPdXRwdXQgPSBvcHRpb25zLnByZXBhcnNlT3V0cHV0O1xuICAgIHZhciBkZWZhdWx0VmFsdWVUeXBlID0gZ2V0VmFsdWVUeXBlKGtleSk7XG4gICAgaWYgKGlzVHJhbnNmb3JtUHJvcChrZXkpKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWVUeXBlID8gZGVmYXVsdFZhbHVlVHlwZS5kZWZhdWx0IHx8IDAgOiAwO1xuICAgIH0gZWxzZSBpZiAoc2Nyb2xsS2V5cy5oYXMoa2V5KSkge1xuICAgICAgICByZXR1cm4gZWxlbWVudFtrZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBkb21WYWx1ZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQsIG51bGwpLmdldFByb3BlcnR5VmFsdWUocHJlZml4ZXIoa2V5LCB0cnVlKSkgfHwgMDtcbiAgICAgICAgcmV0dXJuIHByZXBhcnNlT3V0cHV0ICYmIGRlZmF1bHRWYWx1ZVR5cGUgJiYgZGVmYXVsdFZhbHVlVHlwZS50ZXN0KGRvbVZhbHVlKSAmJiBkZWZhdWx0VmFsdWVUeXBlLnBhcnNlID8gZGVmYXVsdFZhbHVlVHlwZS5wYXJzZShkb21WYWx1ZSkgOiBkb21WYWx1ZTtcbiAgICB9XG59XG5mdW5jdGlvbiBvblJlbmRlcihzdGF0ZSwgX2EsIGNoYW5nZWRWYWx1ZXMpIHtcbiAgICB2YXIgZWxlbWVudCA9IF9hLmVsZW1lbnQsXG4gICAgICAgIGJ1aWxkU3R5bGVzID0gX2EuYnVpbGRTdHlsZXMsXG4gICAgICAgIGhhc0NTU1ZhcmlhYmxlID0gX2EuaGFzQ1NTVmFyaWFibGU7XG4gICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBidWlsZFN0eWxlcyhzdGF0ZSkpO1xuICAgIGlmIChoYXNDU1NWYXJpYWJsZSkge1xuICAgICAgICB2YXIgbnVtQ2hhbmdlZFZhbHVlcyA9IGNoYW5nZWRWYWx1ZXMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUNoYW5nZWRWYWx1ZXM7IGkrKykge1xuICAgICAgICAgICAgdmFyIGtleSA9IGNoYW5nZWRWYWx1ZXNbaV07XG4gICAgICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJy0tJykpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGtleSwgc3RhdGVba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoYW5nZWRWYWx1ZXMuaW5kZXhPZihTQ1JPTExfTEVGVCkgIT09IC0xKSB7XG4gICAgICAgIGVsZW1lbnRbU0NST0xMX0xFRlRdID0gc3RhdGVbU0NST0xMX0xFRlRdO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlZFZhbHVlcy5pbmRleE9mKFNDUk9MTF9UT1ApICE9PSAtMSkge1xuICAgICAgICBlbGVtZW50W1NDUk9MTF9UT1BdID0gc3RhdGVbU0NST0xMX1RPUF07XG4gICAgfVxufVxudmFyIGNzc1N0eWxlciA9IC8qI19fUFVSRV9fKi9jcmVhdGVTdHlsZXIoe1xuICAgIG9uUmVhZDogb25SZWFkLFxuICAgIG9uUmVuZGVyOiBvblJlbmRlcixcbiAgICB1bmNhY2hlZFZhbHVlczogc2Nyb2xsS2V5c1xufSk7XG5mdW5jdGlvbiBjcmVhdGVDc3NTdHlsZXIoZWxlbWVudCwgX2EpIHtcbiAgICBpZiAoX2EgPT09IHZvaWQgMCkge1xuICAgICAgICBfYSA9IHt9O1xuICAgIH1cbiAgICB2YXIgZW5hYmxlSGFyZHdhcmVBY2NlbGVyYXRpb24gPSBfYS5lbmFibGVIYXJkd2FyZUFjY2VsZXJhdGlvbixcbiAgICAgICAgcHJvcHMgPSBfX3Jlc3QoX2EsIFtcImVuYWJsZUhhcmR3YXJlQWNjZWxlcmF0aW9uXCJdKTtcbiAgICByZXR1cm4gY3NzU3R5bGVyKF9fYXNzaWduKHsgZWxlbWVudDogZWxlbWVudCwgYnVpbGRTdHlsZXM6IGNyZWF0ZVN0eWxlQnVpbGRlcihlbmFibGVIYXJkd2FyZUFjY2VsZXJhdGlvbiksIHByZXBhcnNlT3V0cHV0OiB0cnVlIH0sIHByb3BzKSk7XG59XG5cbnZhciBjYW1lbENhc2VBdHRyaWJ1dGVzID0gLyojX19QVVJFX18qL25ldyBTZXQoWydiYXNlRnJlcXVlbmN5JywgJ2RpZmZ1c2VDb25zdGFudCcsICdrZXJuZWxNYXRyaXgnLCAna2VybmVsVW5pdExlbmd0aCcsICdrZXlTcGxpbmVzJywgJ2tleVRpbWVzJywgJ2xpbWl0aW5nQ29uZUFuZ2xlJywgJ21hcmtlckhlaWdodCcsICdtYXJrZXJXaWR0aCcsICdudW1PY3RhdmVzJywgJ3RhcmdldFgnLCAndGFyZ2V0WScsICdzdXJmYWNlU2NhbGUnLCAnc3BlY3VsYXJDb25zdGFudCcsICdzcGVjdWxhckV4cG9uZW50JywgJ3N0ZERldmlhdGlvbicsICd0YWJsZVZhbHVlcyddKTtcblxudmFyIFpFUk9fTk9UX1pFUk8gPSAwLjAwMDAwMDE7XG52YXIgcHJvZ3Jlc3NUb1BpeGVscyA9IGZ1bmN0aW9uIChwcm9ncmVzcywgbGVuZ3RoKSB7XG4gICAgcmV0dXJuIHByb2dyZXNzICogbGVuZ3RoICsgJ3B4Jztcbn07XG52YXIgYnVpbGQgPSBmdW5jdGlvbiAoc3RhdGUsIGRpbWVuc2lvbnMsIGlzUGF0aCwgcGF0aExlbmd0aCkge1xuICAgIHZhciBoYXNUcmFuc2Zvcm0gPSBmYWxzZTtcbiAgICB2YXIgaGFzRGFzaEFycmF5ID0gZmFsc2U7XG4gICAgdmFyIHByb3BzID0ge307XG4gICAgdmFyIGRhc2hBcnJheVN0eWxlcyA9IGlzUGF0aCA/IHtcbiAgICAgICAgcGF0aExlbmd0aDogJzAnLFxuICAgICAgICBwYXRoU3BhY2luZzogXCJcIiArIHBhdGhMZW5ndGhcbiAgICB9IDogdW5kZWZpbmVkO1xuICAgIHZhciBzY2FsZSQkMSA9IHN0YXRlLnNjYWxlICE9PSB1bmRlZmluZWQgPyBzdGF0ZS5zY2FsZSB8fCBaRVJPX05PVF9aRVJPIDogc3RhdGUuc2NhbGVYIHx8IDE7XG4gICAgdmFyIHNjYWxlWSA9IHN0YXRlLnNjYWxlWSAhPT0gdW5kZWZpbmVkID8gc3RhdGUuc2NhbGVZIHx8IFpFUk9fTk9UX1pFUk8gOiBzY2FsZSQkMSB8fCAxO1xuICAgIHZhciB0cmFuc2Zvcm1PcmlnaW5YID0gZGltZW5zaW9ucy53aWR0aCAqIChzdGF0ZS5vcmlnaW5YIHx8IDUwKSArIGRpbWVuc2lvbnMueDtcbiAgICB2YXIgdHJhbnNmb3JtT3JpZ2luWSA9IGRpbWVuc2lvbnMuaGVpZ2h0ICogKHN0YXRlLm9yaWdpblkgfHwgNTApICsgZGltZW5zaW9ucy55O1xuICAgIHZhciBzY2FsZVRyYW5zZm9ybVggPSAtdHJhbnNmb3JtT3JpZ2luWCAqIChzY2FsZSQkMSAqIDEpO1xuICAgIHZhciBzY2FsZVRyYW5zZm9ybVkgPSAtdHJhbnNmb3JtT3JpZ2luWSAqIChzY2FsZVkgKiAxKTtcbiAgICB2YXIgc2NhbGVSZXBsYWNlWCA9IHRyYW5zZm9ybU9yaWdpblggLyBzY2FsZSQkMTtcbiAgICB2YXIgc2NhbGVSZXBsYWNlWSA9IHRyYW5zZm9ybU9yaWdpblkgLyBzY2FsZVk7XG4gICAgdmFyIHRyYW5zZm9ybSA9IHtcbiAgICAgICAgdHJhbnNsYXRlOiBcInRyYW5zbGF0ZShcIiArIHN0YXRlLnggKyBcIiwgXCIgKyBzdGF0ZS55ICsgXCIpIFwiLFxuICAgICAgICBzY2FsZTogXCJ0cmFuc2xhdGUoXCIgKyBzY2FsZVRyYW5zZm9ybVggKyBcIiwgXCIgKyBzY2FsZVRyYW5zZm9ybVkgKyBcIikgc2NhbGUoXCIgKyBzY2FsZSQkMSArIFwiLCBcIiArIHNjYWxlWSArIFwiKSB0cmFuc2xhdGUoXCIgKyBzY2FsZVJlcGxhY2VYICsgXCIsIFwiICsgc2NhbGVSZXBsYWNlWSArIFwiKSBcIixcbiAgICAgICAgcm90YXRlOiBcInJvdGF0ZShcIiArIHN0YXRlLnJvdGF0ZSArIFwiLCBcIiArIHRyYW5zZm9ybU9yaWdpblggKyBcIiwgXCIgKyB0cmFuc2Zvcm1PcmlnaW5ZICsgXCIpIFwiLFxuICAgICAgICBza2V3WDogXCJza2V3WChcIiArIHN0YXRlLnNrZXdYICsgXCIpIFwiLFxuICAgICAgICBza2V3WTogXCJza2V3WShcIiArIHN0YXRlLnNrZXdZICsgXCIpIFwiXG4gICAgfTtcbiAgICBmb3IgKHZhciBrZXkgaW4gc3RhdGUpIHtcbiAgICAgICAgaWYgKHN0YXRlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHN0YXRlW2tleV07XG4gICAgICAgICAgICBpZiAoaXNUcmFuc2Zvcm1Qcm9wKGtleSkpIHtcbiAgICAgICAgICAgICAgICBoYXNUcmFuc2Zvcm0gPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1BhdGggJiYgKGtleSA9PT0gJ3BhdGhMZW5ndGgnIHx8IGtleSA9PT0gJ3BhdGhTcGFjaW5nJykgJiYgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIGhhc0Rhc2hBcnJheSA9IHRydWU7XG4gICAgICAgICAgICAgICAgZGFzaEFycmF5U3R5bGVzW2tleV0gPSBwcm9ncmVzc1RvUGl4ZWxzKHZhbHVlLCBwYXRoTGVuZ3RoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNQYXRoICYmIGtleSA9PT0gJ3BhdGhPZmZzZXQnKSB7XG4gICAgICAgICAgICAgICAgcHJvcHNbJ3N0cm9rZS1kYXNob2Zmc2V0J10gPSBwcm9ncmVzc1RvUGl4ZWxzKC12YWx1ZSwgcGF0aExlbmd0aCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBhdHRyS2V5ID0gIWNhbWVsQ2FzZUF0dHJpYnV0ZXMuaGFzKGtleSkgPyBjYW1lbFRvRGFzaChrZXkpIDoga2V5O1xuICAgICAgICAgICAgICAgIHByb3BzW2F0dHJLZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGhhc0Rhc2hBcnJheSkge1xuICAgICAgICBwcm9wc1snc3Ryb2tlLWRhc2hhcnJheSddID0gZGFzaEFycmF5U3R5bGVzLnBhdGhMZW5ndGggKyAnICcgKyBkYXNoQXJyYXlTdHlsZXMucGF0aFNwYWNpbmc7XG4gICAgfVxuICAgIGlmIChoYXNUcmFuc2Zvcm0pIHtcbiAgICAgICAgcHJvcHMudHJhbnNmb3JtID0gJyc7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiB0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0VmFsdWUgPSBrZXkgPT09ICdzY2FsZScgPyAnMScgOiAnMCc7XG4gICAgICAgICAgICAgICAgcHJvcHMudHJhbnNmb3JtICs9IHRyYW5zZm9ybVtrZXldLnJlcGxhY2UoL3VuZGVmaW5lZC9nLCBkZWZhdWx0VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcm9wcztcbn07XG5cbnZhciBpbnQgPSAvKiNfX1BVUkVfXyovX19hc3NpZ24oe30sIG51bWJlciwgeyB0cmFuc2Zvcm06IE1hdGgucm91bmQgfSk7XG52YXIgdmFsdWVUeXBlcyQxID0ge1xuICAgIGZpbGw6IGNvbG9yLFxuICAgIHN0cm9rZTogY29sb3IsXG4gICAgc2NhbGU6IHNjYWxlLFxuICAgIHNjYWxlWDogc2NhbGUsXG4gICAgc2NhbGVZOiBzY2FsZSxcbiAgICBvcGFjaXR5OiBhbHBoYSxcbiAgICBmaWxsT3BhY2l0eTogYWxwaGEsXG4gICAgc3Ryb2tlT3BhY2l0eTogYWxwaGEsXG4gICAgbnVtT2N0YXZlczogaW50XG59O1xudmFyIGdldFZhbHVlVHlwZSQxID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiB2YWx1ZVR5cGVzJDFba2V5XTtcbn07XG5cbnZhciBnZXREaW1lbnNpb25zID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gdHlwZW9mIGVsZW1lbnQuZ2V0QkJveCA9PT0gJ2Z1bmN0aW9uJyA/IGVsZW1lbnQuZ2V0QkJveCgpIDogZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbn07XG52YXIgZ2V0U1ZHRWxlbWVudERpbWVuc2lvbnMgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBnZXREaW1lbnNpb25zKGVsZW1lbnQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHsgeDogMCwgeTogMCwgd2lkdGg6IDAsIGhlaWdodDogMCB9O1xuICAgIH1cbn07XG5cbnZhciBzdmdTdHlsZXIgPSAvKiNfX1BVUkVfXyovY3JlYXRlU3R5bGVyKHtcbiAgICBvblJlYWQ6IGZ1bmN0aW9uIChrZXksIF9hKSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gX2EuZWxlbWVudDtcbiAgICAgICAgaWYgKCFpc1RyYW5zZm9ybVByb3Aoa2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKGtleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVUeXBlID0gZ2V0VmFsdWVUeXBlJDEoa2V5KTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZVR5cGUgPyB2YWx1ZVR5cGUuZGVmYXVsdCA6IDA7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uUmVuZGVyOiBmdW5jdGlvbiAoc3RhdGUsIF9hKSB7XG4gICAgICAgIHZhciBkaW1lbnNpb25zID0gX2EuZGltZW5zaW9ucyxcbiAgICAgICAgICAgIGVsZW1lbnQgPSBfYS5lbGVtZW50LFxuICAgICAgICAgICAgaXNQYXRoID0gX2EuaXNQYXRoLFxuICAgICAgICAgICAgcGF0aExlbmd0aCA9IF9hLnBhdGhMZW5ndGg7XG4gICAgICAgIHNldERvbUF0dHJzKGVsZW1lbnQsIGJ1aWxkKHN0YXRlLCBkaW1lbnNpb25zLCBpc1BhdGgsIHBhdGhMZW5ndGgpKTtcbiAgICB9XG59KTtcbnZhciBzdmcgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHZhciBkaW1lbnNpb25zID0gZ2V0U1ZHRWxlbWVudERpbWVuc2lvbnMoZWxlbWVudCk7XG4gICAgdmFyIHByb3BzID0ge1xuICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICBkaW1lbnNpb25zOiBkaW1lbnNpb25zLFxuICAgICAgICBpc1BhdGg6IGZhbHNlXG4gICAgfTtcbiAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAncGF0aCcpIHtcbiAgICAgICAgcHJvcHMuaXNQYXRoID0gdHJ1ZTtcbiAgICAgICAgcHJvcHMucGF0aExlbmd0aCA9IGVsZW1lbnQuZ2V0VG90YWxMZW5ndGgoKTtcbiAgICB9XG4gICAgcmV0dXJuIHN2Z1N0eWxlcihwcm9wcyk7XG59O1xuXG52YXIgdmlld3BvcnQgPSAvKiNfX1BVUkVfXyovY3JlYXRlU3R5bGVyKHtcbiAgICB1c2VDYWNoZTogZmFsc2UsXG4gICAgb25SZWFkOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBrZXkgPT09ICdzY3JvbGxUb3AnID8gd2luZG93LnBhZ2VZT2Zmc2V0IDogd2luZG93LnBhZ2VYT2Zmc2V0O1xuICAgIH0sXG4gICAgb25SZW5kZXI6IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgX2IgPSBfYS5zY3JvbGxUb3AsXG4gICAgICAgICAgICBzY3JvbGxUb3AgPSBfYiA9PT0gdm9pZCAwID8gMCA6IF9iLFxuICAgICAgICAgICAgX2MgPSBfYS5zY3JvbGxMZWZ0LFxuICAgICAgICAgICAgc2Nyb2xsTGVmdCA9IF9jID09PSB2b2lkIDAgPyAwIDogX2M7XG4gICAgICAgIHJldHVybiB3aW5kb3cuc2Nyb2xsVG8oc2Nyb2xsTGVmdCwgc2Nyb2xsVG9wKTtcbiAgICB9XG59KTtcblxudmFyIGNhY2hlID0gLyojX19QVVJFX18qL25ldyBXZWFrTWFwKCk7XG52YXIgY3JlYXRlRE9NU3R5bGVyID0gZnVuY3Rpb24gKG5vZGUsIHByb3BzKSB7XG4gICAgdmFyIHN0eWxlcjtcbiAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHN0eWxlciA9IGNyZWF0ZUNzc1N0eWxlcihub2RlLCBwcm9wcyk7XG4gICAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgU1ZHRWxlbWVudCkge1xuICAgICAgICBzdHlsZXIgPSBzdmcobm9kZSk7XG4gICAgfSBlbHNlIGlmIChub2RlID09PSB3aW5kb3cpIHtcbiAgICAgICAgc3R5bGVyID0gdmlld3BvcnQobm9kZSk7XG4gICAgfVxuICAgIGludmFyaWFudChzdHlsZXIgIT09IHVuZGVmaW5lZCwgJ05vIHZhbGlkIG5vZGUgcHJvdmlkZWQuIE5vZGUgbXVzdCBiZSBIVE1MRWxlbWVudCwgU1ZHRWxlbWVudCBvciB3aW5kb3cuJyk7XG4gICAgY2FjaGUuc2V0KG5vZGUsIHN0eWxlcik7XG4gICAgcmV0dXJuIHN0eWxlcjtcbn07XG52YXIgZ2V0U3R5bGVyID0gZnVuY3Rpb24gKG5vZGUsIHByb3BzKSB7XG4gICAgcmV0dXJuIGNhY2hlLmhhcyhub2RlKSA/IGNhY2hlLmdldChub2RlKSA6IGNyZWF0ZURPTVN0eWxlcihub2RlLCBwcm9wcyk7XG59O1xuZnVuY3Rpb24gaW5kZXgobm9kZU9yU2VsZWN0b3IsIHByb3BzKSB7XG4gICAgdmFyIG5vZGUgPSB0eXBlb2Ygbm9kZU9yU2VsZWN0b3IgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihub2RlT3JTZWxlY3RvcikgOiBub2RlT3JTZWxlY3RvcjtcbiAgICByZXR1cm4gZ2V0U3R5bGVyKG5vZGUsIHByb3BzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgaW5kZXg7XG5leHBvcnQgeyBjcmVhdGVTdHlsZXIgYXMgY3JlYXRlU3R5bGVyRmFjdG9yeSwgYnVpbGRTdHlsZVByb3BlcnR5LCBpc1RyYW5zZm9ybVByb3AgfTtcbiIsImltcG9ydCB7IF9fcmVzdCwgX19leHRlbmRzLCBfX2Fzc2lnbiB9IGZyb20gJ3RzbGliJztcbmltcG9ydCB7IHBpcGUsIGFuZ2xlLCBkZWdyZWVzVG9SYWRpYW5zLCBkaXN0YW5jZSwgaXNQb2ludDNELCBpc1BvaW50LCBtaXgsIHBvaW50RnJvbVZlY3RvciwgcHJvZ3Jlc3MsIHJhZGlhbnNUb0RlZ3JlZXMsIHNtb290aEZyYW1lLCB2ZWxvY2l0eVBlckZyYW1lLCB2ZWxvY2l0eVBlclNlY29uZCwgbWl4Q29sb3IsIG1peENvbXBsZXgsIGNsYW1wLCBhcHBseU9mZnNldCwgY29uZGl0aW9uYWwsIGludGVycG9sYXRlLCBtaXhBcnJheSwgc21vb3RoLCBzbmFwLCBzcHJpbmdGb3JjZSwgc3ByaW5nRm9yY2VFeHBvLCBzcHJpbmdGb3JjZUxpbmVhciwgd3JhcCB9IGZyb20gJ0Bwb3Btb3Rpb24vcG9wY29ybic7XG5pbXBvcnQgc3luYywgeyBnZXRGcmFtZURhdGEsIGNhbmNlbFN5bmMgfSBmcm9tICdmcmFtZXN5bmMnO1xuaW1wb3J0ICogYXMgc3R5bGVWYWx1ZVR5cGVzIGZyb20gJ3N0eWxlLXZhbHVlLXR5cGVzJztcbmltcG9ydCB7IGNvbG9yLCBjb21wbGV4LCBwZXJjZW50LCBkZWdyZWVzLCB2aCwgdncsIHB4LCBudW1iZXIgfSBmcm9tICdzdHlsZS12YWx1ZS10eXBlcyc7XG5leHBvcnQgeyBzdHlsZVZhbHVlVHlwZXMgYXMgdmFsdWVUeXBlcyB9O1xuaW1wb3J0ICogYXMgZWFzaW5nIGZyb20gJ0Bwb3Btb3Rpb24vZWFzaW5nJztcbmltcG9ydCB7IGxpbmVhciwgY3JlYXRlUmV2ZXJzZWRFYXNpbmcsIGVhc2VPdXQsIGVhc2VJbk91dCB9IGZyb20gJ0Bwb3Btb3Rpb24vZWFzaW5nJztcbmV4cG9ydCB7IGVhc2luZyB9O1xuaW1wb3J0IHN0eWxlciBmcm9tICdzdHlsZWZpcmUnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBzdHlsZXIgfSBmcm9tICdzdHlsZWZpcmUnO1xuaW1wb3J0IHsgd2FybmluZyB9IGZyb20gJ2hleS1saXN0ZW4nO1xuXG52YXIgQ2hhaW5hYmxlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDaGFpbmFibGUocHJvcHMpIHtcbiAgICAgICAgaWYgKHByb3BzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHByb3BzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgIH1cbiAgICBDaGFpbmFibGUucHJvdG90eXBlLmFwcGx5TWlkZGxld2FyZSA9IGZ1bmN0aW9uIChtaWRkbGV3YXJlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZShfX2Fzc2lnbih7fSwgdGhpcy5wcm9wcywgeyBtaWRkbGV3YXJlOiB0aGlzLnByb3BzLm1pZGRsZXdhcmUgPyBbbWlkZGxld2FyZV0uY29uY2F0KHRoaXMucHJvcHMubWlkZGxld2FyZSkgOiBbbWlkZGxld2FyZV0gfSkpO1xuICAgIH07XG4gICAgQ2hhaW5hYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZnVuY3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGZ1bmNzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBpcGVkVXBkYXRlID0gZnVuY3MubGVuZ3RoID09PSAxID8gZnVuY3NbMF0gOiBwaXBlLmFwcGx5KHZvaWQgMCwgZnVuY3MpO1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBseU1pZGRsZXdhcmUoZnVuY3Rpb24gKHVwZGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZShwaXBlZFVwZGF0ZSh2KSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENoYWluYWJsZS5wcm90b3R5cGUud2hpbGUgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5TWlkZGxld2FyZShmdW5jdGlvbiAodXBkYXRlLCBjb21wbGV0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZWRpY2F0ZSh2KSA/IHVwZGF0ZSh2KSA6IGNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENoYWluYWJsZS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBseU1pZGRsZXdhcmUoZnVuY3Rpb24gKHVwZGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZWRpY2F0ZSh2KSAmJiB1cGRhdGUodik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDaGFpbmFibGU7XG59KCk7XG5cbnZhciBPYnNlcnZlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JzZXJ2ZXIoX2EsIG9ic2VydmVyKSB7XG4gICAgICAgIHZhciBtaWRkbGV3YXJlID0gX2EubWlkZGxld2FyZSxcbiAgICAgICAgICAgIG9uQ29tcGxldGUgPSBfYS5vbkNvbXBsZXRlO1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgaWYgKF90aGlzLm9ic2VydmVyLnVwZGF0ZSkgX3RoaXMudXBkYXRlT2JzZXJ2ZXIodik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMub2JzZXJ2ZXIuY29tcGxldGUgJiYgX3RoaXMuaXNBY3RpdmUpIF90aGlzLm9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICBpZiAoX3RoaXMub25Db21wbGV0ZSkgX3RoaXMub25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgX3RoaXMuaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5vYnNlcnZlci5lcnJvciAmJiBfdGhpcy5pc0FjdGl2ZSkgX3RoaXMub2JzZXJ2ZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIF90aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICAgICAgdGhpcy51cGRhdGVPYnNlcnZlciA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIudXBkYXRlKHYpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uQ29tcGxldGUgPSBvbkNvbXBsZXRlO1xuICAgICAgICBpZiAob2JzZXJ2ZXIudXBkYXRlICYmIG1pZGRsZXdhcmUgJiYgbWlkZGxld2FyZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIG1pZGRsZXdhcmUuZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy51cGRhdGVPYnNlcnZlciA9IG0oX3RoaXMudXBkYXRlT2JzZXJ2ZXIsIF90aGlzLmNvbXBsZXRlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBPYnNlcnZlcjtcbn0oKTtcbnZhciBjcmVhdGVPYnNlcnZlciA9IGZ1bmN0aW9uIChvYnNlcnZlckNhbmRpZGF0ZSwgX2EsIG9uQ29tcGxldGUpIHtcbiAgICB2YXIgbWlkZGxld2FyZSA9IF9hLm1pZGRsZXdhcmU7XG4gICAgaWYgKHR5cGVvZiBvYnNlcnZlckNhbmRpZGF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmVyKHsgbWlkZGxld2FyZTogbWlkZGxld2FyZSwgb25Db21wbGV0ZTogb25Db21wbGV0ZSB9LCB7IHVwZGF0ZTogb2JzZXJ2ZXJDYW5kaWRhdGUgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZlcih7IG1pZGRsZXdhcmU6IG1pZGRsZXdhcmUsIG9uQ29tcGxldGU6IG9uQ29tcGxldGUgfSwgb2JzZXJ2ZXJDYW5kaWRhdGUpO1xuICAgIH1cbn07XG5cbnZhciBBY3Rpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBY3Rpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIEFjdGlvbi5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWN0aW9uKHByb3BzKTtcbiAgICB9O1xuICAgIEFjdGlvbi5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAob2JzZXJ2ZXJDYW5kaWRhdGUpIHtcbiAgICAgICAgaWYgKG9ic2VydmVyQ2FuZGlkYXRlID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIG9ic2VydmVyQ2FuZGlkYXRlID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlzQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHtcbiAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgaW5pdCA9IF9hLmluaXQsXG4gICAgICAgICAgICBvYnNlcnZlclByb3BzID0gX19yZXN0KF9hLCBbXCJpbml0XCJdKTtcbiAgICAgICAgdmFyIG9ic2VydmVyID0gY3JlYXRlT2JzZXJ2ZXIob2JzZXJ2ZXJDYW5kaWRhdGUsIG9ic2VydmVyUHJvcHMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlzQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnN0b3AoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBhcGkgPSBpbml0KG9ic2VydmVyKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uID0gYXBpID8gX19hc3NpZ24oe30sIHN1YnNjcmlwdGlvbiwgYXBpKSA6IHN1YnNjcmlwdGlvbjtcbiAgICAgICAgaWYgKG9ic2VydmVyQ2FuZGlkYXRlLnJlZ2lzdGVyUGFyZW50KSB7XG4gICAgICAgICAgICBvYnNlcnZlckNhbmRpZGF0ZS5yZWdpc3RlclBhcmVudChzdWJzY3JpcHRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0NvbXBsZXRlKSBzdWJzY3JpcHRpb24uc3RvcCgpO1xuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgIH07XG4gICAgcmV0dXJuIEFjdGlvbjtcbn0oQ2hhaW5hYmxlKTtcbnZhciBhY3Rpb24gPSBmdW5jdGlvbiAoaW5pdCkge1xuICAgIHJldHVybiBuZXcgQWN0aW9uKHsgaW5pdDogaW5pdCB9KTtcbn07XG5cbnZhciBCYXNlTXVsdGljYXN0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQmFzZU11bHRpY2FzdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCYXNlTXVsdGljYXN0KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc3Vic2NyaWJlcnMgPSBbXTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBCYXNlTXVsdGljYXN0LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEJhc2VNdWx0aWNhc3QucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpYmVyLmVycm9yKGVycik7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQmFzZU11bHRpY2FzdC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnNjcmliZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliZXJzW2ldLnVwZGF0ZSh2KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQmFzZU11bHRpY2FzdC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG9ic2VydmVyQ2FuZGlkYXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvYnNlcnZlciA9IGNyZWF0ZU9ic2VydmVyKG9ic2VydmVyQ2FuZGlkYXRlLCB0aGlzLnByb3BzKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVycy5wdXNoKG9ic2VydmVyKTtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gX3RoaXMuc3Vic2NyaWJlcnMuaW5kZXhPZihvYnNlcnZlcik7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkgX3RoaXMuc3Vic2NyaWJlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICB9O1xuICAgIEJhc2VNdWx0aWNhc3QucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudCkgdGhpcy5wYXJlbnQuc3RvcCgpO1xuICAgIH07XG4gICAgQmFzZU11bHRpY2FzdC5wcm90b3R5cGUucmVnaXN0ZXJQYXJlbnQgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHN1YnNjcmlwdGlvbjtcbiAgICB9O1xuICAgIHJldHVybiBCYXNlTXVsdGljYXN0O1xufShDaGFpbmFibGUpO1xuXG52YXIgTXVsdGljYXN0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTXVsdGljYXN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE11bHRpY2FzdCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBNdWx0aWNhc3QucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgICAgICByZXR1cm4gbmV3IE11bHRpY2FzdChwcm9wcyk7XG4gICAgfTtcbiAgICByZXR1cm4gTXVsdGljYXN0O1xufShCYXNlTXVsdGljYXN0KTtcbnZhciBtdWx0aWNhc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBNdWx0aWNhc3QoKTtcbn07XG5cbnZhciBzdGVwUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoc3RlcHMsIHByb2dyZXNzJCQxKSB7XG4gICAgdmFyIHNlZ21lbnQgPSAxIC8gKHN0ZXBzIC0gMSk7XG4gICAgdmFyIHN1YnNlZ21lbnQgPSAxIC8gKDIgKiAoc3RlcHMgLSAxKSk7XG4gICAgdmFyIHBlcmNlbnRQcm9ncmVzc09mVGFyZ2V0ID0gTWF0aC5taW4ocHJvZ3Jlc3MkJDEsIDEpO1xuICAgIHZhciBzdWJzZWdtZW50UHJvZ3Jlc3NPZlRhcmdldCA9IHBlcmNlbnRQcm9ncmVzc09mVGFyZ2V0IC8gc3Vic2VnbWVudDtcbiAgICB2YXIgc2VnbWVudFByb2dyZXNzT2ZUYXJnZXQgPSBNYXRoLmZsb29yKChzdWJzZWdtZW50UHJvZ3Jlc3NPZlRhcmdldCArIDEpIC8gMik7XG4gICAgcmV0dXJuIHNlZ21lbnRQcm9ncmVzc09mVGFyZ2V0ICogc2VnbWVudDtcbn07XG5cbnZhciBjYWxjID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICAgIGFuZ2xlOiBhbmdsZSxcbiAgICBkZWdyZWVzVG9SYWRpYW5zOiBkZWdyZWVzVG9SYWRpYW5zLFxuICAgIGRpc3RhbmNlOiBkaXN0YW5jZSxcbiAgICBpc1BvaW50M0Q6IGlzUG9pbnQzRCxcbiAgICBpc1BvaW50OiBpc1BvaW50LFxuICAgIGRpbGF0ZTogbWl4LFxuICAgIGdldFZhbHVlRnJvbVByb2dyZXNzOiBtaXgsXG4gICAgcG9pbnRGcm9tQW5nbGVBbmREaXN0YW5jZTogcG9pbnRGcm9tVmVjdG9yLFxuICAgIGdldFByb2dyZXNzRnJvbVZhbHVlOiBwcm9ncmVzcyxcbiAgICByYWRpYW5zVG9EZWdyZWVzOiByYWRpYW5zVG9EZWdyZWVzLFxuICAgIHNtb290aDogc21vb3RoRnJhbWUsXG4gICAgc3BlZWRQZXJGcmFtZTogdmVsb2NpdHlQZXJGcmFtZSxcbiAgICBzcGVlZFBlclNlY29uZDogdmVsb2NpdHlQZXJTZWNvbmQsXG4gICAgc3RlcFByb2dyZXNzOiBzdGVwUHJvZ3Jlc3Ncbn0pO1xuXG52YXIgaXNWYWx1ZUxpc3QgPSBmdW5jdGlvbiAodikge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHYpO1xufTtcbnZhciBpc1NpbmdsZVZhbHVlID0gZnVuY3Rpb24gKHYpIHtcbiAgICB2YXIgdHlwZU9mViA9IHR5cGVvZiB2O1xuICAgIHJldHVybiB0eXBlT2ZWID09PSAnc3RyaW5nJyB8fCB0eXBlT2ZWID09PSAnbnVtYmVyJztcbn07XG52YXIgVmFsdWVSZWFjdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFZhbHVlUmVhY3Rpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVmFsdWVSZWFjdGlvbihwcm9wcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc2NoZWR1bGVWZWxvY2l0eUNoZWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHN5bmMucG9zdFJlbmRlcihfdGhpcy52ZWxvY2l0eUNoZWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMudmVsb2NpdHlDaGVjayA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IF9hLnRpbWVzdGFtcDtcbiAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgIT09IF90aGlzLmxhc3RVcGRhdGVkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJldiA9IF90aGlzLmN1cnJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLnByZXYgPSBfdGhpcy5jdXJyZW50ID0gcHJvcHMudmFsdWUgfHwgMDtcbiAgICAgICAgaWYgKGlzU2luZ2xlVmFsdWUoX3RoaXMuY3VycmVudCkpIHtcbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZUN1cnJlbnQgPSBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jdXJyZW50ID0gdjtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5nZXRWZWxvY2l0eU9mQ3VycmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0U2luZ2xlVmVsb2NpdHkoX3RoaXMuY3VycmVudCwgX3RoaXMucHJldik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKGlzVmFsdWVMaXN0KF90aGlzLmN1cnJlbnQpKSB7XG4gICAgICAgICAgICBfdGhpcy51cGRhdGVDdXJyZW50ID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY3VycmVudCA9IHYuc2xpY2UoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5nZXRWZWxvY2l0eU9mQ3VycmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0TGlzdFZlbG9jaXR5KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMudXBkYXRlQ3VycmVudCA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY3VycmVudCA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB2KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmN1cnJlbnRba2V5XSA9IHZba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5nZXRWZWxvY2l0eU9mQ3VycmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0TWFwVmVsb2NpdHkoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BzLmluaXRpYWxTdWJzY3JpcHRpb24pIF90aGlzLnN1YnNjcmliZShwcm9wcy5pbml0aWFsU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBWYWx1ZVJlYWN0aW9uLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZVJlYWN0aW9uKHByb3BzKTtcbiAgICB9O1xuICAgIFZhbHVlUmVhY3Rpb24ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudDtcbiAgICB9O1xuICAgIFZhbHVlUmVhY3Rpb24ucHJvdG90eXBlLmdldFZlbG9jaXR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRWZWxvY2l0eU9mQ3VycmVudCgpO1xuICAgIH07XG4gICAgVmFsdWVSZWFjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzLCB2KTtcbiAgICAgICAgdGhpcy5wcmV2ID0gdGhpcy5jdXJyZW50O1xuICAgICAgICB0aGlzLnVwZGF0ZUN1cnJlbnQodik7XG4gICAgICAgIHZhciBfYSA9IGdldEZyYW1lRGF0YSgpLFxuICAgICAgICAgICAgZGVsdGEgPSBfYS5kZWx0YSxcbiAgICAgICAgICAgIHRpbWVzdGFtcCA9IF9hLnRpbWVzdGFtcDtcbiAgICAgICAgdGhpcy50aW1lRGVsdGEgPSBkZWx0YTtcbiAgICAgICAgdGhpcy5sYXN0VXBkYXRlZCA9IHRpbWVzdGFtcDtcbiAgICAgICAgc3luYy5wb3N0UmVuZGVyKHRoaXMuc2NoZWR1bGVWZWxvY2l0eUNoZWNrKTtcbiAgICB9O1xuICAgIFZhbHVlUmVhY3Rpb24ucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChvYnNlcnZlckNhbmRpZGF0ZSkge1xuICAgICAgICB2YXIgc3ViID0gX3N1cGVyLnByb3RvdHlwZS5zdWJzY3JpYmUuY2FsbCh0aGlzLCBvYnNlcnZlckNhbmRpZGF0ZSk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcnNbdGhpcy5zdWJzY3JpYmVycy5sZW5ndGggLSAxXS51cGRhdGUodGhpcy5jdXJyZW50KTtcbiAgICAgICAgcmV0dXJuIHN1YjtcbiAgICB9O1xuICAgIFZhbHVlUmVhY3Rpb24ucHJvdG90eXBlLmdldFNpbmdsZVZlbG9jaXR5ID0gZnVuY3Rpb24gKGN1cnJlbnQsIHByZXYpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBjdXJyZW50ID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgcHJldiA9PT0gJ251bWJlcicgPyB2ZWxvY2l0eVBlclNlY29uZChjdXJyZW50IC0gcHJldiwgdGhpcy50aW1lRGVsdGEpIDogdmVsb2NpdHlQZXJTZWNvbmQocGFyc2VGbG9hdChjdXJyZW50KSAtIHBhcnNlRmxvYXQocHJldiksIHRoaXMudGltZURlbHRhKSB8fCAwO1xuICAgIH07XG4gICAgVmFsdWVSZWFjdGlvbi5wcm90b3R5cGUuZ2V0TGlzdFZlbG9jaXR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50Lm1hcChmdW5jdGlvbiAoYywgaSkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldFNpbmdsZVZlbG9jaXR5KGMsIF90aGlzLnByZXZbaV0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFZhbHVlUmVhY3Rpb24ucHJvdG90eXBlLmdldE1hcFZlbG9jaXR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmVsb2NpdHkgPSB7fTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuY3VycmVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgdmVsb2NpdHlba2V5XSA9IHRoaXMuZ2V0U2luZ2xlVmVsb2NpdHkodGhpcy5jdXJyZW50W2tleV0sIHRoaXMucHJldltrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmVsb2NpdHk7XG4gICAgfTtcbiAgICByZXR1cm4gVmFsdWVSZWFjdGlvbjtcbn0oQmFzZU11bHRpY2FzdCk7XG52YXIgdmFsdWUgPSBmdW5jdGlvbiAodmFsdWUsIGluaXRpYWxTdWJzY3JpcHRpb24pIHtcbiAgICByZXR1cm4gbmV3IFZhbHVlUmVhY3Rpb24oeyB2YWx1ZTogdmFsdWUsIGluaXRpYWxTdWJzY3JpcHRpb246IGluaXRpYWxTdWJzY3JpcHRpb24gfSk7XG59O1xuXG52YXIgbXVsdGkgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgZ2V0Q291bnQgPSBfYS5nZXRDb3VudCxcbiAgICAgICAgZ2V0Rmlyc3QgPSBfYS5nZXRGaXJzdCxcbiAgICAgICAgZ2V0T3V0cHV0ID0gX2EuZ2V0T3V0cHV0LFxuICAgICAgICBtYXBBcGkgPSBfYS5tYXBBcGksXG4gICAgICAgIHNldFByb3AgPSBfYS5zZXRQcm9wLFxuICAgICAgICBzdGFydEFjdGlvbnMgPSBfYS5zdGFydEFjdGlvbnM7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb25zKSB7XG4gICAgICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgdXBkYXRlID0gX2EudXBkYXRlLFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlID0gX2EuY29tcGxldGUsXG4gICAgICAgICAgICAgICAgZXJyb3IgPSBfYS5lcnJvcjtcbiAgICAgICAgICAgIHZhciBudW1BY3Rpb25zID0gZ2V0Q291bnQoYWN0aW9ucyk7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gZ2V0T3V0cHV0KCk7XG4gICAgICAgICAgICB2YXIgdXBkYXRlT3V0cHV0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGUob3V0cHV0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgbnVtQ29tcGxldGVkQWN0aW9ucyA9IDA7XG4gICAgICAgICAgICB2YXIgc3VicyA9IHN0YXJ0QWN0aW9ucyhhY3Rpb25zLCBmdW5jdGlvbiAoYSwgbmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciBoYXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5zdGFydCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtQ29tcGxldGVkQWN0aW9ucysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW1Db21wbGV0ZWRBY3Rpb25zID09PSBudW1BY3Rpb25zKSBzeW5jLnVwZGF0ZShjb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvcChvdXRwdXQsIG5hbWUsIHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3luYy51cGRhdGUodXBkYXRlT3V0cHV0LCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGdldEZpcnN0KHN1YnMpKS5yZWR1Y2UoZnVuY3Rpb24gKGFwaSwgbWV0aG9kTmFtZSkge1xuICAgICAgICAgICAgICAgIGFwaVttZXRob2ROYW1lXSA9IG1hcEFwaShzdWJzLCBtZXRob2ROYW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBpO1xuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICB9KTtcbiAgICB9O1xufTtcblxudmFyIGNvbXBvc2l0ZSA9IC8qI19fUFVSRV9fKi9tdWx0aSh7XG4gICAgZ2V0T3V0cHV0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9LFxuICAgIGdldENvdW50OiBmdW5jdGlvbiAoc3Vicykge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoc3VicykubGVuZ3RoO1xuICAgIH0sXG4gICAgZ2V0Rmlyc3Q6IGZ1bmN0aW9uIChzdWJzKSB7XG4gICAgICAgIHJldHVybiBzdWJzW09iamVjdC5rZXlzKHN1YnMpWzBdXTtcbiAgICB9LFxuICAgIG1hcEFwaTogZnVuY3Rpb24gKHN1YnMsIG1ldGhvZE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhzdWJzKS5yZWR1Y2UoZnVuY3Rpb24gKG91dHB1dCwgcHJvcEtleSkge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICBpZiAoc3Vic1twcm9wS2V5XVttZXRob2ROYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICBhcmdzWzBdICYmIGFyZ3NbMF1bcHJvcEtleV0gIT09IHVuZGVmaW5lZCA/IG91dHB1dFtwcm9wS2V5XSA9IHN1YnNbcHJvcEtleV1bbWV0aG9kTmFtZV0oYXJnc1swXVtwcm9wS2V5XSkgOiBvdXRwdXRbcHJvcEtleV0gPSAoX2EgPSBzdWJzW3Byb3BLZXldKVttZXRob2ROYW1lXS5hcHBseShfYSwgYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgIH07XG4gICAgfSxcbiAgICBzZXRQcm9wOiBmdW5jdGlvbiAob3V0cHV0LCBuYW1lLCB2KSB7XG4gICAgICAgIHJldHVybiBvdXRwdXRbbmFtZV0gPSB2O1xuICAgIH0sXG4gICAgc3RhcnRBY3Rpb25zOiBmdW5jdGlvbiAoYWN0aW9ucywgc3RhcnRlcikge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoYWN0aW9ucykucmVkdWNlKGZ1bmN0aW9uIChzdWJzLCBrZXkpIHtcbiAgICAgICAgICAgIHN1YnNba2V5XSA9IHN0YXJ0ZXIoYWN0aW9uc1trZXldLCBrZXkpO1xuICAgICAgICAgICAgcmV0dXJuIHN1YnM7XG4gICAgICAgIH0sIHt9KTtcbiAgICB9XG59KTtcblxudmFyIHBhcmFsbGVsID0gLyojX19QVVJFX18qL211bHRpKHtcbiAgICBnZXRPdXRwdXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH0sXG4gICAgZ2V0Q291bnQ6IGZ1bmN0aW9uIChzdWJzKSB7XG4gICAgICAgIHJldHVybiBzdWJzLmxlbmd0aDtcbiAgICB9LFxuICAgIGdldEZpcnN0OiBmdW5jdGlvbiAoc3Vicykge1xuICAgICAgICByZXR1cm4gc3Vic1swXTtcbiAgICB9LFxuICAgIG1hcEFwaTogZnVuY3Rpb24gKHN1YnMsIG1ldGhvZE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdWJzLm1hcChmdW5jdGlvbiAoc3ViLCBpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1YlttZXRob2ROYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcmdzWzBdKSA/IHN1YlttZXRob2ROYW1lXShhcmdzWzBdW2ldKSA6IHN1YlttZXRob2ROYW1lXS5hcHBseShzdWIsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgc2V0UHJvcDogZnVuY3Rpb24gKG91dHB1dCwgbmFtZSwgdikge1xuICAgICAgICByZXR1cm4gb3V0cHV0W25hbWVdID0gdjtcbiAgICB9LFxuICAgIHN0YXJ0QWN0aW9uczogZnVuY3Rpb24gKGFjdGlvbnMsIHN0YXJ0ZXIpIHtcbiAgICAgICAgcmV0dXJuIGFjdGlvbnMubWFwKGZ1bmN0aW9uIChhY3Rpb24sIGkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGFydGVyKGFjdGlvbiwgaSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xudmFyIHBhcmFsbGVsJDEgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFjdGlvbnMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhY3Rpb25zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBwYXJhbGxlbChhY3Rpb25zKTtcbn07XG5cbnZhciBjcmVhdGVWZWN0b3JUZXN0cyA9IGZ1bmN0aW9uICh0eXBlVGVzdHMpIHtcbiAgICB2YXIgdGVzdE5hbWVzID0gT2JqZWN0LmtleXModHlwZVRlc3RzKTtcbiAgICB2YXIgaXNWZWN0b3JQcm9wID0gZnVuY3Rpb24gKHByb3AsIGtleSkge1xuICAgICAgICByZXR1cm4gcHJvcCAhPT0gdW5kZWZpbmVkICYmICF0eXBlVGVzdHNba2V5XShwcm9wKTtcbiAgICB9O1xuICAgIHZhciBnZXRWZWN0b3JLZXlzID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgICAgIHJldHVybiB0ZXN0TmFtZXMucmVkdWNlKGZ1bmN0aW9uICh2ZWN0b3JLZXlzLCBrZXkpIHtcbiAgICAgICAgICAgIGlmIChpc1ZlY3RvclByb3AocHJvcHNba2V5XSwga2V5KSkgdmVjdG9yS2V5cy5wdXNoKGtleSk7XG4gICAgICAgICAgICByZXR1cm4gdmVjdG9yS2V5cztcbiAgICAgICAgfSwgW10pO1xuICAgIH07XG4gICAgdmFyIHRlc3RWZWN0b3JQcm9wcyA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgICAgICByZXR1cm4gcHJvcHMgJiYgdGVzdE5hbWVzLnNvbWUoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGlzVmVjdG9yUHJvcChwcm9wc1trZXldLCBrZXkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiB7IGdldFZlY3RvcktleXM6IGdldFZlY3RvcktleXMsIHRlc3RWZWN0b3JQcm9wczogdGVzdFZlY3RvclByb3BzIH07XG59O1xudmFyIHVuaXRUeXBlcyA9IFtweCwgcGVyY2VudCwgZGVncmVlcywgdmgsIHZ3XTtcbnZhciBmaW5kVW5pdFR5cGUgPSBmdW5jdGlvbiAocHJvcCkge1xuICAgIHJldHVybiB1bml0VHlwZXMuZmluZChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICByZXR1cm4gdHlwZS50ZXN0KHByb3ApO1xuICAgIH0pO1xufTtcbnZhciBpc1VuaXRQcm9wID0gZnVuY3Rpb24gKHByb3ApIHtcbiAgICByZXR1cm4gQm9vbGVhbihmaW5kVW5pdFR5cGUocHJvcCkpO1xufTtcbnZhciBjcmVhdGVBY3Rpb24gPSBmdW5jdGlvbiAoYWN0aW9uLCBwcm9wcykge1xuICAgIHJldHVybiBhY3Rpb24ocHJvcHMpO1xufTtcbnZhciByZWR1Y2VBcnJheVZhbHVlID0gZnVuY3Rpb24gKGkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHByb3BzLCBrZXkpIHtcbiAgICAgICAgcHJvcHNba2V5XSA9IHByb3BzW2tleV1baV07XG4gICAgICAgIHJldHVybiBwcm9wcztcbiAgICB9O1xufTtcbnZhciBjcmVhdGVBcnJheUFjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24sIHByb3BzLCB2ZWN0b3JLZXlzKSB7XG4gICAgdmFyIGZpcnN0VmVjdG9yS2V5ID0gdmVjdG9yS2V5c1swXTtcbiAgICB2YXIgYWN0aW9uTGlzdCA9IHByb3BzW2ZpcnN0VmVjdG9yS2V5XS5tYXAoZnVuY3Rpb24gKHYsIGkpIHtcbiAgICAgICAgdmFyIGNoaWxkQWN0aW9uUHJvcHMgPSB2ZWN0b3JLZXlzLnJlZHVjZShyZWR1Y2VBcnJheVZhbHVlKGkpLCBfX2Fzc2lnbih7fSwgcHJvcHMpKTtcbiAgICAgICAgcmV0dXJuIGdldEFjdGlvbkNyZWF0b3IodikoYWN0aW9uLCBjaGlsZEFjdGlvblByb3BzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcGFyYWxsZWwkMS5hcHBseSh2b2lkIDAsIGFjdGlvbkxpc3QpO1xufTtcbnZhciByZWR1Y2VPYmplY3RWYWx1ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHByb3BzLCBwcm9wS2V5KSB7XG4gICAgICAgIHByb3BzW3Byb3BLZXldID0gcHJvcHNbcHJvcEtleV1ba2V5XTtcbiAgICAgICAgcmV0dXJuIHByb3BzO1xuICAgIH07XG59O1xudmFyIGNyZWF0ZU9iamVjdEFjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24sIHByb3BzLCB2ZWN0b3JLZXlzKSB7XG4gICAgdmFyIGZpcnN0VmVjdG9yS2V5ID0gdmVjdG9yS2V5c1swXTtcbiAgICB2YXIgYWN0aW9uTWFwID0gT2JqZWN0LmtleXMocHJvcHNbZmlyc3RWZWN0b3JLZXldKS5yZWR1Y2UoZnVuY3Rpb24gKG1hcCwga2V5KSB7XG4gICAgICAgIHZhciBjaGlsZEFjdGlvblByb3BzID0gdmVjdG9yS2V5cy5yZWR1Y2UocmVkdWNlT2JqZWN0VmFsdWUoa2V5KSwgX19hc3NpZ24oe30sIHByb3BzKSk7XG4gICAgICAgIG1hcFtrZXldID0gZ2V0QWN0aW9uQ3JlYXRvcihwcm9wc1tmaXJzdFZlY3RvcktleV1ba2V5XSkoYWN0aW9uLCBjaGlsZEFjdGlvblByb3BzKTtcbiAgICAgICAgcmV0dXJuIG1hcDtcbiAgICB9LCB7fSk7XG4gICAgcmV0dXJuIGNvbXBvc2l0ZShhY3Rpb25NYXApO1xufTtcbnZhciBjcmVhdGVVbml0QWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbiwgX2EpIHtcbiAgICB2YXIgZnJvbSA9IF9hLmZyb20sXG4gICAgICAgIHRvID0gX2EudG8sXG4gICAgICAgIHByb3BzID0gX19yZXN0KF9hLCBbXCJmcm9tXCIsIFwidG9cIl0pO1xuICAgIHZhciB1bml0VHlwZSA9IGZpbmRVbml0VHlwZShmcm9tKSB8fCBmaW5kVW5pdFR5cGUodG8pO1xuICAgIHZhciB0cmFuc2Zvcm0gPSB1bml0VHlwZS50cmFuc2Zvcm0sXG4gICAgICAgIHBhcnNlID0gdW5pdFR5cGUucGFyc2U7XG4gICAgcmV0dXJuIGFjdGlvbihfX2Fzc2lnbih7fSwgcHJvcHMsIHsgZnJvbTogdHlwZW9mIGZyb20gPT09ICdzdHJpbmcnID8gcGFyc2UoZnJvbSkgOiBmcm9tLCB0bzogdHlwZW9mIHRvID09PSAnc3RyaW5nJyA/IHBhcnNlKHRvKSA6IHRvIH0pKS5waXBlKHRyYW5zZm9ybSk7XG59O1xudmFyIGNyZWF0ZU1peGVyQWN0aW9uID0gZnVuY3Rpb24gKG1peGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24sIF9hKSB7XG4gICAgICAgIHZhciBmcm9tID0gX2EuZnJvbSxcbiAgICAgICAgICAgIHRvID0gX2EudG8sXG4gICAgICAgICAgICBwcm9wcyA9IF9fcmVzdChfYSwgW1wiZnJvbVwiLCBcInRvXCJdKTtcbiAgICAgICAgcmV0dXJuIGFjdGlvbihfX2Fzc2lnbih7fSwgcHJvcHMsIHsgZnJvbTogMCwgdG86IDEgfSkpLnBpcGUobWl4ZXIoZnJvbSwgdG8pKTtcbiAgICB9O1xufTtcbnZhciBjcmVhdGVDb2xvckFjdGlvbiA9IC8qI19fUFVSRV9fKi9jcmVhdGVNaXhlckFjdGlvbihtaXhDb2xvcik7XG52YXIgY3JlYXRlQ29tcGxleEFjdGlvbiA9IC8qI19fUFVSRV9fKi9jcmVhdGVNaXhlckFjdGlvbihtaXhDb21wbGV4KTtcbnZhciBjcmVhdGVWZWN0b3JBY3Rpb24gPSBmdW5jdGlvbiAoYWN0aW9uLCB0eXBlVGVzdHMpIHtcbiAgICB2YXIgX2EgPSBjcmVhdGVWZWN0b3JUZXN0cyh0eXBlVGVzdHMpLFxuICAgICAgICB0ZXN0VmVjdG9yUHJvcHMgPSBfYS50ZXN0VmVjdG9yUHJvcHMsXG4gICAgICAgIGdldFZlY3RvcktleXMgPSBfYS5nZXRWZWN0b3JLZXlzO1xuICAgIHZhciB2ZWN0b3JBY3Rpb24gPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICAgICAgdmFyIGlzVmVjdG9yID0gdGVzdFZlY3RvclByb3BzKHByb3BzKTtcbiAgICAgICAgaWYgKCFpc1ZlY3RvcikgcmV0dXJuIGFjdGlvbihwcm9wcyk7XG4gICAgICAgIHZhciB2ZWN0b3JLZXlzID0gZ2V0VmVjdG9yS2V5cyhwcm9wcyk7XG4gICAgICAgIHZhciB0ZXN0S2V5ID0gdmVjdG9yS2V5c1swXTtcbiAgICAgICAgdmFyIHRlc3RQcm9wID0gcHJvcHNbdGVzdEtleV07XG4gICAgICAgIHJldHVybiBnZXRBY3Rpb25DcmVhdG9yKHRlc3RQcm9wKShhY3Rpb24sIHByb3BzLCB2ZWN0b3JLZXlzKTtcbiAgICB9O1xuICAgIHJldHVybiB2ZWN0b3JBY3Rpb247XG59O1xudmFyIGdldEFjdGlvbkNyZWF0b3IgPSBmdW5jdGlvbiAocHJvcCkge1xuICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUFjdGlvbjtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocHJvcCkpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUFycmF5QWN0aW9uO1xuICAgIH0gZWxzZSBpZiAoaXNVbml0UHJvcChwcm9wKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlVW5pdEFjdGlvbjtcbiAgICB9IGVsc2UgaWYgKGNvbG9yLnRlc3QocHJvcCkpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUNvbG9yQWN0aW9uO1xuICAgIH0gZWxzZSBpZiAoY29tcGxleC50ZXN0KHByb3ApKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVDb21wbGV4QWN0aW9uO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHByb3AgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVPYmplY3RBY3Rpb247XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUFjdGlvbjtcbiAgICB9XG59O1xuXG52YXIgZGVjYXkgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkge1xuICAgICAgICBwcm9wcyA9IHt9O1xuICAgIH1cbiAgICByZXR1cm4gYWN0aW9uKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgY29tcGxldGUgPSBfYS5jb21wbGV0ZSxcbiAgICAgICAgICAgIHVwZGF0ZSA9IF9hLnVwZGF0ZTtcbiAgICAgICAgdmFyIF9iID0gcHJvcHMudmVsb2NpdHksXG4gICAgICAgICAgICB2ZWxvY2l0eSA9IF9iID09PSB2b2lkIDAgPyAwIDogX2IsXG4gICAgICAgICAgICBfYyA9IHByb3BzLmZyb20sXG4gICAgICAgICAgICBmcm9tID0gX2MgPT09IHZvaWQgMCA/IDAgOiBfYyxcbiAgICAgICAgICAgIF9kID0gcHJvcHMucG93ZXIsXG4gICAgICAgICAgICBwb3dlciA9IF9kID09PSB2b2lkIDAgPyAwLjggOiBfZCxcbiAgICAgICAgICAgIF9lID0gcHJvcHMudGltZUNvbnN0YW50LFxuICAgICAgICAgICAgdGltZUNvbnN0YW50ID0gX2UgPT09IHZvaWQgMCA/IDM1MCA6IF9lLFxuICAgICAgICAgICAgX2YgPSBwcm9wcy5yZXN0RGVsdGEsXG4gICAgICAgICAgICByZXN0RGVsdGEgPSBfZiA9PT0gdm9pZCAwID8gMC41IDogX2YsXG4gICAgICAgICAgICBtb2RpZnlUYXJnZXQgPSBwcm9wcy5tb2RpZnlUYXJnZXQ7XG4gICAgICAgIHZhciBlbGFwc2VkID0gMDtcbiAgICAgICAgdmFyIGFtcGxpdHVkZSA9IHBvd2VyICogdmVsb2NpdHk7XG4gICAgICAgIHZhciBpZGVhbFRhcmdldCA9IE1hdGgucm91bmQoZnJvbSArIGFtcGxpdHVkZSk7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0eXBlb2YgbW9kaWZ5VGFyZ2V0ID09PSAndW5kZWZpbmVkJyA/IGlkZWFsVGFyZ2V0IDogbW9kaWZ5VGFyZ2V0KGlkZWFsVGFyZ2V0KTtcbiAgICAgICAgdmFyIHByb2Nlc3MgPSBzeW5jLnVwZGF0ZShmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBmcmFtZURlbHRhID0gX2EuZGVsdGE7XG4gICAgICAgICAgICBlbGFwc2VkICs9IGZyYW1lRGVsdGE7XG4gICAgICAgICAgICB2YXIgZGVsdGEgPSAtYW1wbGl0dWRlICogTWF0aC5leHAoLWVsYXBzZWQgLyB0aW1lQ29uc3RhbnQpO1xuICAgICAgICAgICAgdmFyIGlzTW92aW5nID0gZGVsdGEgPiByZXN0RGVsdGEgfHwgZGVsdGEgPCAtcmVzdERlbHRhO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBpc01vdmluZyA/IHRhcmdldCArIGRlbHRhIDogdGFyZ2V0O1xuICAgICAgICAgICAgdXBkYXRlKGN1cnJlbnQpO1xuICAgICAgICAgICAgaWYgKCFpc01vdmluZykge1xuICAgICAgICAgICAgICAgIGNhbmNlbFN5bmMudXBkYXRlKHByb2Nlc3MpO1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRydWUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYW5jZWxTeW5jLnVwZGF0ZShwcm9jZXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbn07XG52YXIgdmVjdG9yRGVjYXkgPSAvKiNfX1BVUkVfXyovY3JlYXRlVmVjdG9yQWN0aW9uKGRlY2F5LCB7XG4gICAgZnJvbTogbnVtYmVyLnRlc3QsXG4gICAgbW9kaWZ5VGFyZ2V0OiBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGZ1bmMgPT09ICdmdW5jdGlvbic7XG4gICAgfSxcbiAgICB2ZWxvY2l0eTogbnVtYmVyLnRlc3Rcbn0pO1xuXG52YXIgc3ByaW5nID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgaWYgKHByb3BzID09PSB2b2lkIDApIHtcbiAgICAgICAgcHJvcHMgPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIGFjdGlvbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHVwZGF0ZSA9IF9hLnVwZGF0ZSxcbiAgICAgICAgICAgIGNvbXBsZXRlID0gX2EuY29tcGxldGU7XG4gICAgICAgIHZhciBfYiA9IHByb3BzLnZlbG9jaXR5LFxuICAgICAgICAgICAgdmVsb2NpdHkgPSBfYiA9PT0gdm9pZCAwID8gMC4wIDogX2I7XG4gICAgICAgIHZhciBfYyA9IHByb3BzLmZyb20sXG4gICAgICAgICAgICBmcm9tID0gX2MgPT09IHZvaWQgMCA/IDAuMCA6IF9jLFxuICAgICAgICAgICAgX2QgPSBwcm9wcy50byxcbiAgICAgICAgICAgIHRvID0gX2QgPT09IHZvaWQgMCA/IDAuMCA6IF9kLFxuICAgICAgICAgICAgX2UgPSBwcm9wcy5zdGlmZm5lc3MsXG4gICAgICAgICAgICBzdGlmZm5lc3MgPSBfZSA9PT0gdm9pZCAwID8gMTAwIDogX2UsXG4gICAgICAgICAgICBfZiA9IHByb3BzLmRhbXBpbmcsXG4gICAgICAgICAgICBkYW1waW5nID0gX2YgPT09IHZvaWQgMCA/IDEwIDogX2YsXG4gICAgICAgICAgICBfZyA9IHByb3BzLm1hc3MsXG4gICAgICAgICAgICBtYXNzID0gX2cgPT09IHZvaWQgMCA/IDEuMCA6IF9nLFxuICAgICAgICAgICAgX2ggPSBwcm9wcy5yZXN0U3BlZWQsXG4gICAgICAgICAgICByZXN0U3BlZWQgPSBfaCA9PT0gdm9pZCAwID8gMC4wMSA6IF9oLFxuICAgICAgICAgICAgX2ogPSBwcm9wcy5yZXN0RGVsdGEsXG4gICAgICAgICAgICByZXN0RGVsdGEgPSBfaiA9PT0gdm9pZCAwID8gMC4wMSA6IF9qO1xuICAgICAgICB2YXIgaW5pdGlhbFZlbG9jaXR5ID0gdmVsb2NpdHkgPyAtKHZlbG9jaXR5IC8gMTAwMCkgOiAwLjA7XG4gICAgICAgIHZhciB0ID0gMDtcbiAgICAgICAgdmFyIGRlbHRhID0gdG8gLSBmcm9tO1xuICAgICAgICB2YXIgcG9zaXRpb24gPSBmcm9tO1xuICAgICAgICB2YXIgcHJldlBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIHZhciBwcm9jZXNzID0gc3luYy51cGRhdGUoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgdGltZURlbHRhID0gX2EuZGVsdGE7XG4gICAgICAgICAgICB0ICs9IHRpbWVEZWx0YTtcbiAgICAgICAgICAgIHZhciBkYW1waW5nUmF0aW8gPSBkYW1waW5nIC8gKDIgKiBNYXRoLnNxcnQoc3RpZmZuZXNzICogbWFzcykpO1xuICAgICAgICAgICAgdmFyIGFuZ3VsYXJGcmVxID0gTWF0aC5zcXJ0KHN0aWZmbmVzcyAvIG1hc3MpIC8gMTAwMDtcbiAgICAgICAgICAgIHByZXZQb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICAgICAgaWYgKGRhbXBpbmdSYXRpbyA8IDEpIHtcbiAgICAgICAgICAgICAgICB2YXIgZW52ZWxvcGUgPSBNYXRoLmV4cCgtZGFtcGluZ1JhdGlvICogYW5ndWxhckZyZXEgKiB0KTtcbiAgICAgICAgICAgICAgICB2YXIgZXhwb0RlY2F5ID0gYW5ndWxhckZyZXEgKiBNYXRoLnNxcnQoMS4wIC0gZGFtcGluZ1JhdGlvICogZGFtcGluZ1JhdGlvKTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHRvIC0gZW52ZWxvcGUgKiAoKGluaXRpYWxWZWxvY2l0eSArIGRhbXBpbmdSYXRpbyAqIGFuZ3VsYXJGcmVxICogZGVsdGEpIC8gZXhwb0RlY2F5ICogTWF0aC5zaW4oZXhwb0RlY2F5ICogdCkgKyBkZWx0YSAqIE1hdGguY29zKGV4cG9EZWNheSAqIHQpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGVudmVsb3BlID0gTWF0aC5leHAoLWFuZ3VsYXJGcmVxICogdCk7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSB0byAtIGVudmVsb3BlICogKGRlbHRhICsgKGluaXRpYWxWZWxvY2l0eSArIGFuZ3VsYXJGcmVxICogZGVsdGEpICogdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2ZWxvY2l0eSA9IHZlbG9jaXR5UGVyU2Vjb25kKHBvc2l0aW9uIC0gcHJldlBvc2l0aW9uLCB0aW1lRGVsdGEpO1xuICAgICAgICAgICAgdmFyIGlzQmVsb3dWZWxvY2l0eVRocmVzaG9sZCA9IE1hdGguYWJzKHZlbG9jaXR5KSA8PSByZXN0U3BlZWQ7XG4gICAgICAgICAgICB2YXIgaXNCZWxvd0Rpc3BsYWNlbWVudFRocmVzaG9sZCA9IE1hdGguYWJzKHRvIC0gcG9zaXRpb24pIDw9IHJlc3REZWx0YTtcbiAgICAgICAgICAgIGlmIChpc0JlbG93VmVsb2NpdHlUaHJlc2hvbGQgJiYgaXNCZWxvd0Rpc3BsYWNlbWVudFRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gdG87XG4gICAgICAgICAgICAgICAgdXBkYXRlKHBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICBjYW5jZWxTeW5jLnVwZGF0ZShwcm9jZXNzKTtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1cGRhdGUocG9zaXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FuY2VsU3luYy51cGRhdGUocHJvY2Vzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59O1xudmFyIHZlY3RvclNwcmluZyA9IC8qI19fUFVSRV9fKi9jcmVhdGVWZWN0b3JBY3Rpb24oc3ByaW5nLCB7XG4gICAgZnJvbTogbnVtYmVyLnRlc3QsXG4gICAgdG86IG51bWJlci50ZXN0LFxuICAgIHN0aWZmbmVzczogbnVtYmVyLnRlc3QsXG4gICAgZGFtcGluZzogbnVtYmVyLnRlc3QsXG4gICAgbWFzczogbnVtYmVyLnRlc3QsXG4gICAgdmVsb2NpdHk6IG51bWJlci50ZXN0XG59KTtcblxudmFyIGluZXJ0aWEgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgX2IgPSBfYS5mcm9tLFxuICAgICAgICBmcm9tID0gX2IgPT09IHZvaWQgMCA/IDAgOiBfYixcbiAgICAgICAgX2MgPSBfYS52ZWxvY2l0eSxcbiAgICAgICAgdmVsb2NpdHkgPSBfYyA9PT0gdm9pZCAwID8gMCA6IF9jLFxuICAgICAgICBtaW4gPSBfYS5taW4sXG4gICAgICAgIG1heCA9IF9hLm1heCxcbiAgICAgICAgX2QgPSBfYS5wb3dlcixcbiAgICAgICAgcG93ZXIgPSBfZCA9PT0gdm9pZCAwID8gMC44IDogX2QsXG4gICAgICAgIF9lID0gX2EudGltZUNvbnN0YW50LFxuICAgICAgICB0aW1lQ29uc3RhbnQgPSBfZSA9PT0gdm9pZCAwID8gNzAwIDogX2UsXG4gICAgICAgIF9mID0gX2EuYm91bmNlU3RpZmZuZXNzLFxuICAgICAgICBib3VuY2VTdGlmZm5lc3MgPSBfZiA9PT0gdm9pZCAwID8gNTAwIDogX2YsXG4gICAgICAgIF9nID0gX2EuYm91bmNlRGFtcGluZyxcbiAgICAgICAgYm91bmNlRGFtcGluZyA9IF9nID09PSB2b2lkIDAgPyAxMCA6IF9nLFxuICAgICAgICBfaCA9IF9hLnJlc3REZWx0YSxcbiAgICAgICAgcmVzdERlbHRhID0gX2ggPT09IHZvaWQgMCA/IDEgOiBfaCxcbiAgICAgICAgbW9kaWZ5VGFyZ2V0ID0gX2EubW9kaWZ5VGFyZ2V0O1xuICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB1cGRhdGUgPSBfYS51cGRhdGUsXG4gICAgICAgICAgICBjb21wbGV0ZSA9IF9hLmNvbXBsZXRlO1xuICAgICAgICB2YXIgY3VycmVudCA9IHZhbHVlKGZyb20pO1xuICAgICAgICB2YXIgYWN0aXZlQW5pbWF0aW9uO1xuICAgICAgICB2YXIgaXNTcHJpbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIGlzTGVzc1RoYW5NaW4gPSBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgcmV0dXJuIG1pbiAhPT0gdW5kZWZpbmVkICYmIHYgPD0gbWluO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgaXNNb3JlVGhhbk1heCA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICByZXR1cm4gbWF4ICE9PSB1bmRlZmluZWQgJiYgdiA+PSBtYXg7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBpc091dE9mQm91bmRzID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0xlc3NUaGFuTWluKHYpIHx8IGlzTW9yZVRoYW5NYXgodik7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBpc1RyYXZlbGxpbmdBd2F5RnJvbUJvdW5kcyA9IGZ1bmN0aW9uICh2LCBjdXJyZW50VmVsb2NpdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0xlc3NUaGFuTWluKHYpICYmIGN1cnJlbnRWZWxvY2l0eSA8IDAgfHwgaXNNb3JlVGhhbk1heCh2KSAmJiBjdXJyZW50VmVsb2NpdHkgPiAwO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgc3RhcnRBbmltYXRpb24gPSBmdW5jdGlvbiAoYW5pbWF0aW9uLCBuZXh0KSB7XG4gICAgICAgICAgICBhY3RpdmVBbmltYXRpb24gJiYgYWN0aXZlQW5pbWF0aW9uLnN0b3AoKTtcbiAgICAgICAgICAgIGFjdGl2ZUFuaW1hdGlvbiA9IGFuaW1hdGlvbi5zdGFydCh7XG4gICAgICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudC51cGRhdGUodik7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBzdGFydFNwcmluZyA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgICAgICAgICAgaXNTcHJpbmcgPSB0cnVlO1xuICAgICAgICAgICAgc3RhcnRBbmltYXRpb24odmVjdG9yU3ByaW5nKF9fYXNzaWduKHt9LCBwcm9wcywgeyB0bzogaXNMZXNzVGhhbk1pbihwcm9wcy5mcm9tKSA/IG1pbiA6IG1heCwgc3RpZmZuZXNzOiBib3VuY2VTdGlmZm5lc3MsIGRhbXBpbmc6IGJvdW5jZURhbXBpbmcsIHJlc3REZWx0YTogcmVzdERlbHRhIH0pKSk7XG4gICAgICAgIH07XG4gICAgICAgIGN1cnJlbnQuc3Vic2NyaWJlKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICB1cGRhdGUodik7XG4gICAgICAgICAgICB2YXIgY3VycmVudFZlbG9jaXR5ID0gY3VycmVudC5nZXRWZWxvY2l0eSgpO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZUFuaW1hdGlvbiAmJiAhaXNTcHJpbmcgJiYgaXNUcmF2ZWxsaW5nQXdheUZyb21Cb3VuZHModiwgY3VycmVudFZlbG9jaXR5KSkge1xuICAgICAgICAgICAgICAgIHN0YXJ0U3ByaW5nKHsgZnJvbTogdiwgdmVsb2NpdHk6IGN1cnJlbnRWZWxvY2l0eSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpc091dE9mQm91bmRzKGZyb20pKSB7XG4gICAgICAgICAgICBzdGFydFNwcmluZyh7IGZyb206IGZyb20sIHZlbG9jaXR5OiB2ZWxvY2l0eSB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh2ZWxvY2l0eSAhPT0gMCkge1xuICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IHZlY3RvckRlY2F5KHtcbiAgICAgICAgICAgICAgICBmcm9tOiBmcm9tLFxuICAgICAgICAgICAgICAgIHZlbG9jaXR5OiB2ZWxvY2l0eSxcbiAgICAgICAgICAgICAgICB0aW1lQ29uc3RhbnQ6IHRpbWVDb25zdGFudCxcbiAgICAgICAgICAgICAgICBwb3dlcjogcG93ZXIsXG4gICAgICAgICAgICAgICAgcmVzdERlbHRhOiBpc091dE9mQm91bmRzKGZyb20pID8gMjAgOiByZXN0RGVsdGEsXG4gICAgICAgICAgICAgICAgbW9kaWZ5VGFyZ2V0OiBtb2RpZnlUYXJnZXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhcnRBbmltYXRpb24oYW5pbWF0aW9uLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHYgPSBjdXJyZW50LmdldCgpO1xuICAgICAgICAgICAgICAgIGlmIChpc091dE9mQm91bmRzKHYpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0U3ByaW5nKHsgZnJvbTogdiwgdmVsb2NpdHk6IGN1cnJlbnQuZ2V0VmVsb2NpdHkoKSB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhY3RpdmVBbmltYXRpb24gJiYgYWN0aXZlQW5pbWF0aW9uLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbn07XG52YXIgaW5kZXggPSAvKiNfX1BVUkVfXyovY3JlYXRlVmVjdG9yQWN0aW9uKGluZXJ0aWEsIHtcbiAgICBmcm9tOiBudW1iZXIudGVzdCxcbiAgICB2ZWxvY2l0eTogbnVtYmVyLnRlc3QsXG4gICAgbWluOiBudW1iZXIudGVzdCxcbiAgICBtYXg6IG51bWJlci50ZXN0LFxuICAgIGRhbXBpbmc6IG51bWJlci50ZXN0LFxuICAgIHN0aWZmbmVzczogbnVtYmVyLnRlc3QsXG4gICAgbW9kaWZ5VGFyZ2V0OiBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGZ1bmMgPT09ICdmdW5jdGlvbic7XG4gICAgfVxufSk7XG5cbnZhciBmcmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYWN0aW9uKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgdXBkYXRlID0gX2EudXBkYXRlO1xuICAgICAgICB2YXIgaW5pdGlhbFRpbWUgPSAwO1xuICAgICAgICB2YXIgcHJvY2VzcyA9IHN5bmMudXBkYXRlKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IF9hLnRpbWVzdGFtcDtcbiAgICAgICAgICAgIGlmICghaW5pdGlhbFRpbWUpIGluaXRpYWxUaW1lID0gdGltZXN0YW1wO1xuICAgICAgICAgICAgdXBkYXRlKHRpbWVzdGFtcCAtIGluaXRpYWxUaW1lKTtcbiAgICAgICAgfSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbmNlbFN5bmMudXBkYXRlKHByb2Nlc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xufTtcblxudmFyIHNjcnViYmVyID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIF9iID0gX2EuZnJvbSxcbiAgICAgICAgZnJvbSA9IF9iID09PSB2b2lkIDAgPyAwIDogX2IsXG4gICAgICAgIF9jID0gX2EudG8sXG4gICAgICAgIHRvID0gX2MgPT09IHZvaWQgMCA/IDEgOiBfYyxcbiAgICAgICAgX2QgPSBfYS5lYXNlLFxuICAgICAgICBlYXNlID0gX2QgPT09IHZvaWQgMCA/IGxpbmVhciA6IF9kLFxuICAgICAgICBfZSA9IF9hLnJldmVyc2VFYXNlLFxuICAgICAgICByZXZlcnNlRWFzZSA9IF9lID09PSB2b2lkIDAgPyBmYWxzZSA6IF9lO1xuICAgIGlmIChyZXZlcnNlRWFzZSkge1xuICAgICAgICBlYXNlID0gY3JlYXRlUmV2ZXJzZWRFYXNpbmcoZWFzZSk7XG4gICAgfVxuICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB1cGRhdGUgPSBfYS51cGRhdGU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWVrOiBmdW5jdGlvbiAocHJvZ3Jlc3MkJDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlKHByb2dyZXNzJCQxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KS5waXBlKGVhc2UsIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiBtaXgoZnJvbSwgdG8sIHYpO1xuICAgIH0pO1xufTtcbnZhciB2ZWN0b3JTY3J1YmJlciA9IC8qI19fUFVSRV9fKi9jcmVhdGVWZWN0b3JBY3Rpb24oc2NydWJiZXIsIHtcbiAgICBlYXNlOiBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGZ1bmMgPT09ICdmdW5jdGlvbic7XG4gICAgfSxcbiAgICBmcm9tOiBudW1iZXIudGVzdCxcbiAgICB0bzogbnVtYmVyLnRlc3Rcbn0pO1xuXG52YXIgY2xhbXBQcm9ncmVzcyA9IC8qI19fUFVSRV9fKi9jbGFtcCgwLCAxKTtcbnZhciB0d2VlbiA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgIGlmIChwcm9wcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHByb3BzID0ge307XG4gICAgfVxuICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB1cGRhdGUgPSBfYS51cGRhdGUsXG4gICAgICAgICAgICBjb21wbGV0ZSA9IF9hLmNvbXBsZXRlO1xuICAgICAgICB2YXIgX2IgPSBwcm9wcy5kdXJhdGlvbixcbiAgICAgICAgICAgIGR1cmF0aW9uID0gX2IgPT09IHZvaWQgMCA/IDMwMCA6IF9iLFxuICAgICAgICAgICAgX2MgPSBwcm9wcy5lYXNlLFxuICAgICAgICAgICAgZWFzZSA9IF9jID09PSB2b2lkIDAgPyBlYXNlT3V0IDogX2MsXG4gICAgICAgICAgICBfZCA9IHByb3BzLmZsaXAsXG4gICAgICAgICAgICBmbGlwID0gX2QgPT09IHZvaWQgMCA/IDAgOiBfZCxcbiAgICAgICAgICAgIF9lID0gcHJvcHMubG9vcCxcbiAgICAgICAgICAgIGxvb3AgPSBfZSA9PT0gdm9pZCAwID8gMCA6IF9lLFxuICAgICAgICAgICAgX2YgPSBwcm9wcy55b3lvLFxuICAgICAgICAgICAgeW95byA9IF9mID09PSB2b2lkIDAgPyAwIDogX2YsXG4gICAgICAgICAgICBfZyA9IHByb3BzLnJlcGVhdERlbGF5LFxuICAgICAgICAgICAgcmVwZWF0RGVsYXkgPSBfZyA9PT0gdm9pZCAwID8gMCA6IF9nO1xuICAgICAgICB2YXIgX2ggPSBwcm9wcy5mcm9tLFxuICAgICAgICAgICAgZnJvbSA9IF9oID09PSB2b2lkIDAgPyAwIDogX2gsXG4gICAgICAgICAgICBfaiA9IHByb3BzLnRvLFxuICAgICAgICAgICAgdG8gPSBfaiA9PT0gdm9pZCAwID8gMSA6IF9qLFxuICAgICAgICAgICAgX2sgPSBwcm9wcy5lbGFwc2VkLFxuICAgICAgICAgICAgZWxhcHNlZCA9IF9rID09PSB2b2lkIDAgPyAwIDogX2ssXG4gICAgICAgICAgICBfbCA9IHByb3BzLmZsaXBDb3VudCxcbiAgICAgICAgICAgIGZsaXBDb3VudCA9IF9sID09PSB2b2lkIDAgPyAwIDogX2wsXG4gICAgICAgICAgICBfbSA9IHByb3BzLnlveW9Db3VudCxcbiAgICAgICAgICAgIHlveW9Db3VudCA9IF9tID09PSB2b2lkIDAgPyAwIDogX20sXG4gICAgICAgICAgICBfbyA9IHByb3BzLmxvb3BDb3VudCxcbiAgICAgICAgICAgIGxvb3BDb3VudCA9IF9vID09PSB2b2lkIDAgPyAwIDogX287XG4gICAgICAgIHZhciBwbGF5aGVhZCA9IHZlY3RvclNjcnViYmVyKHsgZnJvbTogZnJvbSwgdG86IHRvLCBlYXNlOiBlYXNlIH0pLnN0YXJ0KHVwZGF0ZSk7XG4gICAgICAgIHZhciBjdXJyZW50UHJvZ3Jlc3MgPSAwO1xuICAgICAgICB2YXIgcHJvY2VzcztcbiAgICAgICAgdmFyIGlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHZhciByZXZlcnNlQW5pbWF0aW9uID0gZnVuY3Rpb24gKHJldmVyc2VFYXNlKSB7XG4gICAgICAgICAgICBpZiAocmV2ZXJzZUVhc2UgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHJldmVyc2VFYXNlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBfYSA9IFt0bywgZnJvbV0sIGZyb20gPSBfYVswXSwgdG8gPSBfYVsxXTtcbiAgICAgICAgICAgIHBsYXloZWFkID0gdmVjdG9yU2NydWJiZXIoeyBmcm9tOiBmcm9tLCB0bzogdG8sIGVhc2U6IGVhc2UsIHJldmVyc2VFYXNlOiByZXZlcnNlRWFzZSB9KS5zdGFydCh1cGRhdGUpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgaXNUd2VlbkNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlzQ29tcGxldGUgPSBpc0FjdGl2ZSAmJiBlbGFwc2VkID4gZHVyYXRpb24gKyByZXBlYXREZWxheTtcbiAgICAgICAgICAgIGlmICghaXNDb21wbGV0ZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYgKGlzQ29tcGxldGUgJiYgIWxvb3AgJiYgIWZsaXAgJiYgIXlveW8pIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgZWxhcHNlZCA9IGR1cmF0aW9uIC0gKGVsYXBzZWQgLSByZXBlYXREZWxheSk7XG4gICAgICAgICAgICBpZiAobG9vcCAmJiBsb29wQ291bnQgPCBsb29wKSB7XG4gICAgICAgICAgICAgICAgbG9vcENvdW50Kys7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChmbGlwICYmIGZsaXBDb3VudCA8IGZsaXApIHtcbiAgICAgICAgICAgICAgICBmbGlwQ291bnQrKztcbiAgICAgICAgICAgICAgICByZXZlcnNlQW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh5b3lvICYmIHlveW9Db3VudCA8IHlveW8pIHtcbiAgICAgICAgICAgICAgICB5b3lvQ291bnQrKztcbiAgICAgICAgICAgICAgICByZXZlcnNlQW5pbWF0aW9uKHlveW9Db3VudCAlIDIgIT09IDApO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgdXBkYXRlVHdlZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjdXJyZW50UHJvZ3Jlc3MgPSBjbGFtcFByb2dyZXNzKHByb2dyZXNzKDAsIGR1cmF0aW9uLCBlbGFwc2VkKSk7XG4gICAgICAgICAgICBwbGF5aGVhZC5zZWVrKGN1cnJlbnRQcm9ncmVzcyk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBzdGFydFRpbWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgcHJvY2VzcyA9IHN5bmMudXBkYXRlKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IF9hLmRlbHRhO1xuICAgICAgICAgICAgICAgIGVsYXBzZWQgKz0gZGVsdGE7XG4gICAgICAgICAgICAgICAgdXBkYXRlVHdlZW4oKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNUd2VlbkNvbXBsZXRlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsU3luYy51cGRhdGUocHJvY2Vzcyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlICYmIHN5bmMudXBkYXRlKGNvbXBsZXRlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBzdG9wVGltZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHByb2Nlc3MpIGNhbmNlbFN5bmMudXBkYXRlKHByb2Nlc3MpO1xuICAgICAgICB9O1xuICAgICAgICBzdGFydFRpbWVyKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc0FjdGl2ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc0FjdGl2ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRFbGFwc2VkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wKDAsIGR1cmF0aW9uLCBlbGFwc2VkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRQcm9ncmVzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50UHJvZ3Jlc3M7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHN0b3BUaW1lcigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdXNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc3RvcFRpbWVyKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVzdW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FjdGl2ZSkgc3RhcnRUaW1lcigpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlZWs6IGZ1bmN0aW9uIChuZXdQcm9ncmVzcykge1xuICAgICAgICAgICAgICAgIGVsYXBzZWQgPSBtaXgoMCwgZHVyYXRpb24sIG5ld1Byb2dyZXNzKTtcbiAgICAgICAgICAgICAgICBzeW5jLnVwZGF0ZSh1cGRhdGVUd2VlbiwgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJldmVyc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXZlcnNlQW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59O1xuXG52YXIgY2xhbXBQcm9ncmVzcyQxID0gLyojX19QVVJFX18qL2NsYW1wKDAsIDEpO1xudmFyIGRlZmF1bHRFYXNpbmdzID0gZnVuY3Rpb24gKHZhbHVlcywgZWFzaW5nJCQxKSB7XG4gICAgcmV0dXJuIHZhbHVlcy5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZWFzaW5nJCQxIHx8IGVhc2VPdXQ7XG4gICAgfSkuc3BsaWNlKDAsIHZhbHVlcy5sZW5ndGggLSAxKTtcbn07XG52YXIgZGVmYXVsdFRpbWluZ3MgPSBmdW5jdGlvbiAodmFsdWVzKSB7XG4gICAgdmFyIG51bVZhbHVlcyA9IHZhbHVlcy5sZW5ndGg7XG4gICAgcmV0dXJuIHZhbHVlcy5tYXAoZnVuY3Rpb24gKHZhbHVlLCBpKSB7XG4gICAgICAgIHJldHVybiBpICE9PSAwID8gaSAvIChudW1WYWx1ZXMgLSAxKSA6IDA7XG4gICAgfSk7XG59O1xudmFyIGludGVycG9sYXRlU2NydWJiZXJzID0gZnVuY3Rpb24gKGlucHV0LCBzY3J1YmJlcnMsIHVwZGF0ZSkge1xuICAgIHZhciByYW5nZUxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICB2YXIgZmluYWxJbnB1dEluZGV4ID0gcmFuZ2VMZW5ndGggLSAxO1xuICAgIHZhciBmaW5hbFNjcnViYmVySW5kZXggPSBmaW5hbElucHV0SW5kZXggLSAxO1xuICAgIHZhciBzdWJzID0gc2NydWJiZXJzLm1hcChmdW5jdGlvbiAoc2NydWIpIHtcbiAgICAgICAgcmV0dXJuIHNjcnViLnN0YXJ0KHVwZGF0ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIGlmICh2IDw9IGlucHV0WzBdKSB7XG4gICAgICAgICAgICBzdWJzWzBdLnNlZWsoMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHYgPj0gaW5wdXRbZmluYWxJbnB1dEluZGV4XSkge1xuICAgICAgICAgICAgc3Vic1tmaW5hbFNjcnViYmVySW5kZXhdLnNlZWsoMSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGkgPSAxO1xuICAgICAgICBmb3IgKDsgaSA8IHJhbmdlTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpbnB1dFtpXSA+IHYgfHwgaSA9PT0gZmluYWxJbnB1dEluZGV4KSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJvZ3Jlc3NJblJhbmdlID0gcHJvZ3Jlc3MoaW5wdXRbaSAtIDFdLCBpbnB1dFtpXSwgdik7XG4gICAgICAgIHN1YnNbaSAtIDFdLnNlZWsoY2xhbXBQcm9ncmVzcyQxKHByb2dyZXNzSW5SYW5nZSkpO1xuICAgIH07XG59O1xudmFyIGtleWZyYW1lcyA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBlYXNpbmdzID0gX2EuZWFzaW5ncyxcbiAgICAgICAgX2IgPSBfYS5lYXNlLFxuICAgICAgICBlYXNlID0gX2IgPT09IHZvaWQgMCA/IGxpbmVhciA6IF9iLFxuICAgICAgICB0aW1lcyA9IF9hLnRpbWVzLFxuICAgICAgICB2YWx1ZXMgPSBfYS52YWx1ZXMsXG4gICAgICAgIHR3ZWVuUHJvcHMgPSBfX3Jlc3QoX2EsIFtcImVhc2luZ3NcIiwgXCJlYXNlXCIsIFwidGltZXNcIiwgXCJ2YWx1ZXNcIl0pO1xuICAgIGVhc2luZ3MgPSBBcnJheS5pc0FycmF5KGVhc2luZ3MpID8gZWFzaW5ncyA6IGRlZmF1bHRFYXNpbmdzKHZhbHVlcywgZWFzaW5ncyk7XG4gICAgdGltZXMgPSB0aW1lcyB8fCBkZWZhdWx0VGltaW5ncyh2YWx1ZXMpO1xuICAgIHZhciBzY3J1YmJlcnMgPSBlYXNpbmdzLm1hcChmdW5jdGlvbiAoZWFzaW5nJCQxLCBpKSB7XG4gICAgICAgIHJldHVybiB2ZWN0b3JTY3J1YmJlcih7XG4gICAgICAgICAgICBmcm9tOiB2YWx1ZXNbaV0sXG4gICAgICAgICAgICB0bzogdmFsdWVzW2kgKyAxXSxcbiAgICAgICAgICAgIGVhc2U6IGVhc2luZyQkMVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gdHdlZW4oX19hc3NpZ24oe30sIHR3ZWVuUHJvcHMsIHsgZWFzZTogZWFzZSB9KSkuYXBwbHlNaWRkbGV3YXJlKGZ1bmN0aW9uICh1cGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGludGVycG9sYXRlU2NydWJiZXJzKHRpbWVzLCBzY3J1YmJlcnMsIHVwZGF0ZSk7XG4gICAgfSk7XG59O1xuXG52YXIgcGh5c2ljcyA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgIGlmIChwcm9wcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHByb3BzID0ge307XG4gICAgfVxuICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBjb21wbGV0ZSA9IF9hLmNvbXBsZXRlLFxuICAgICAgICAgICAgdXBkYXRlID0gX2EudXBkYXRlO1xuICAgICAgICB2YXIgX2IgPSBwcm9wcy5hY2NlbGVyYXRpb24sXG4gICAgICAgICAgICBhY2NlbGVyYXRpb24gPSBfYiA9PT0gdm9pZCAwID8gMCA6IF9iLFxuICAgICAgICAgICAgX2MgPSBwcm9wcy5mcmljdGlvbixcbiAgICAgICAgICAgIGZyaWN0aW9uID0gX2MgPT09IHZvaWQgMCA/IDAgOiBfYyxcbiAgICAgICAgICAgIF9kID0gcHJvcHMudmVsb2NpdHksXG4gICAgICAgICAgICB2ZWxvY2l0eSA9IF9kID09PSB2b2lkIDAgPyAwIDogX2QsXG4gICAgICAgICAgICBzcHJpbmdTdHJlbmd0aCA9IHByb3BzLnNwcmluZ1N0cmVuZ3RoLFxuICAgICAgICAgICAgdG8gPSBwcm9wcy50bztcbiAgICAgICAgdmFyIF9lID0gcHJvcHMucmVzdFNwZWVkLFxuICAgICAgICAgICAgcmVzdFNwZWVkID0gX2UgPT09IHZvaWQgMCA/IDAuMDAxIDogX2UsXG4gICAgICAgICAgICBfZiA9IHByb3BzLmZyb20sXG4gICAgICAgICAgICBmcm9tID0gX2YgPT09IHZvaWQgMCA/IDAgOiBfZjtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSBmcm9tO1xuICAgICAgICB2YXIgcHJvY2VzcyA9IHN5bmMudXBkYXRlKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIGRlbHRhID0gX2EuZGVsdGE7XG4gICAgICAgICAgICB2YXIgZWxhcHNlZCA9IE1hdGgubWF4KGRlbHRhLCAxNik7XG4gICAgICAgICAgICBpZiAoYWNjZWxlcmF0aW9uKSB2ZWxvY2l0eSArPSB2ZWxvY2l0eVBlckZyYW1lKGFjY2VsZXJhdGlvbiwgZWxhcHNlZCk7XG4gICAgICAgICAgICBpZiAoZnJpY3Rpb24pIHZlbG9jaXR5ICo9IE1hdGgucG93KDEgLSBmcmljdGlvbiwgZWxhcHNlZCAvIDEwMCk7XG4gICAgICAgICAgICBpZiAoc3ByaW5nU3RyZW5ndGggIT09IHVuZGVmaW5lZCAmJiB0byAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9UYXJnZXQgPSB0byAtIGN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgdmVsb2NpdHkgKz0gZGlzdGFuY2VUb1RhcmdldCAqIHZlbG9jaXR5UGVyRnJhbWUoc3ByaW5nU3RyZW5ndGgsIGVsYXBzZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudCArPSB2ZWxvY2l0eVBlckZyYW1lKHZlbG9jaXR5LCBlbGFwc2VkKTtcbiAgICAgICAgICAgIHVwZGF0ZShjdXJyZW50KTtcbiAgICAgICAgICAgIHZhciBpc0NvbXBsZXRlID0gcmVzdFNwZWVkICE9PSBmYWxzZSAmJiAoIXZlbG9jaXR5IHx8IE1hdGguYWJzKHZlbG9jaXR5KSA8PSByZXN0U3BlZWQpO1xuICAgICAgICAgICAgaWYgKGlzQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICBjYW5jZWxTeW5jLnVwZGF0ZShwcm9jZXNzKTtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gdjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRBY2NlbGVyYXRpb246IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgYWNjZWxlcmF0aW9uID0gdjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRGcmljdGlvbjogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICBmcmljdGlvbiA9IHY7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0U3ByaW5nU3RyZW5ndGg6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgc3ByaW5nU3RyZW5ndGggPSB2O1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldFNwcmluZ1RhcmdldDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICB0byA9IHY7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0VmVsb2NpdHk6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgdmVsb2NpdHkgPSB2O1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FuY2VsU3luYy51cGRhdGUocHJvY2Vzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59O1xudmFyIHZlY3RvclBoeXNpY3MgPSAvKiNfX1BVUkVfXyovY3JlYXRlVmVjdG9yQWN0aW9uKHBoeXNpY3MsIHtcbiAgICBhY2NlbGVyYXRpb246IG51bWJlci50ZXN0LFxuICAgIGZyaWN0aW9uOiBudW1iZXIudGVzdCxcbiAgICB2ZWxvY2l0eTogbnVtYmVyLnRlc3QsXG4gICAgZnJvbTogbnVtYmVyLnRlc3QsXG4gICAgdG86IG51bWJlci50ZXN0LFxuICAgIHNwcmluZ1N0cmVuZ3RoOiBudW1iZXIudGVzdFxufSk7XG5cbnZhciBERUZBVUxUX0RVUkFUSU9OID0gMzAwO1xudmFyIGZsYXR0ZW5UaW1pbmdzID0gZnVuY3Rpb24gKGluc3RydWN0aW9ucykge1xuICAgIHZhciBmbGF0SW5zdHJ1Y3Rpb25zID0gW107XG4gICAgdmFyIGxhc3RBcmcgPSBpbnN0cnVjdGlvbnNbaW5zdHJ1Y3Rpb25zLmxlbmd0aCAtIDFdO1xuICAgIHZhciBpc1N0YWdnZXJlZCA9IHR5cGVvZiBsYXN0QXJnID09PSAnbnVtYmVyJztcbiAgICB2YXIgc3RhZ2dlckRlbGF5ID0gaXNTdGFnZ2VyZWQgPyBsYXN0QXJnIDogMDtcbiAgICB2YXIgc2VnbWVudHMgPSBpc1N0YWdnZXJlZCA/IGluc3RydWN0aW9ucy5zbGljZSgwLCAtMSkgOiBpbnN0cnVjdGlvbnM7XG4gICAgdmFyIG51bVNlZ21lbnRzID0gc2VnbWVudHMubGVuZ3RoO1xuICAgIHZhciBvZmZzZXQgPSAwO1xuICAgIHNlZ21lbnRzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHtcbiAgICAgICAgZmxhdEluc3RydWN0aW9ucy5wdXNoKGl0ZW0pO1xuICAgICAgICBpZiAoaSAhPT0gbnVtU2VnbWVudHMgLSAxKSB7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBpdGVtLmR1cmF0aW9uIHx8IERFRkFVTFRfRFVSQVRJT047XG4gICAgICAgICAgICBvZmZzZXQgKz0gc3RhZ2dlckRlbGF5O1xuICAgICAgICAgICAgZmxhdEluc3RydWN0aW9ucy5wdXNoKFwiLVwiICsgKGR1cmF0aW9uIC0gb2Zmc2V0KSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZmxhdEluc3RydWN0aW9ucztcbn07XG52YXIgZmxhdHRlbkFycmF5SW5zdHJ1Y3Rpb25zID0gZnVuY3Rpb24gKGluc3RydWN0aW9ucywgaW5zdHJ1Y3Rpb24pIHtcbiAgICBBcnJheS5pc0FycmF5KGluc3RydWN0aW9uKSA/IGluc3RydWN0aW9ucy5wdXNoLmFwcGx5KGluc3RydWN0aW9ucywgZmxhdHRlblRpbWluZ3MoaW5zdHJ1Y3Rpb24pKSA6IGluc3RydWN0aW9ucy5wdXNoKGluc3RydWN0aW9uKTtcbiAgICByZXR1cm4gaW5zdHJ1Y3Rpb25zO1xufTtcbnZhciBjb252ZXJ0RGVmVG9Qcm9wcyA9IGZ1bmN0aW9uIChwcm9wcywgZGVmLCBpKSB7XG4gICAgdmFyIGR1cmF0aW9uID0gcHJvcHMuZHVyYXRpb24sXG4gICAgICAgIGVhc2luZ3MgPSBwcm9wcy5lYXNpbmdzLFxuICAgICAgICB0aW1lcyA9IHByb3BzLnRpbWVzLFxuICAgICAgICB2YWx1ZXMgPSBwcm9wcy52YWx1ZXM7XG4gICAgdmFyIG51bVZhbHVlcyA9IHZhbHVlcy5sZW5ndGg7XG4gICAgdmFyIHByZXZUaW1lVG8gPSB0aW1lc1tudW1WYWx1ZXMgLSAxXTtcbiAgICB2YXIgdGltZUZyb20gPSBkZWYuYXQgPT09IDAgPyAwIDogZGVmLmF0IC8gZHVyYXRpb247XG4gICAgdmFyIHRpbWVUbyA9IChkZWYuYXQgKyBkZWYuZHVyYXRpb24pIC8gZHVyYXRpb247XG4gICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgdmFsdWVzLnB1c2goZGVmLmZyb20pO1xuICAgICAgICB0aW1lcy5wdXNoKHRpbWVGcm9tKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJldlRpbWVUbyAhPT0gdGltZUZyb20pIHtcbiAgICAgICAgICAgIGlmIChkZWYuZnJvbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzLnB1c2godmFsdWVzW251bVZhbHVlcyAtIDFdKTtcbiAgICAgICAgICAgICAgICB0aW1lcy5wdXNoKHRpbWVGcm9tKTtcbiAgICAgICAgICAgICAgICBlYXNpbmdzLnB1c2gobGluZWFyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmcm9tID0gZGVmLmZyb20gIT09IHVuZGVmaW5lZCA/IGRlZi5mcm9tIDogdmFsdWVzW251bVZhbHVlcyAtIDFdO1xuICAgICAgICAgICAgdmFsdWVzLnB1c2goZnJvbSk7XG4gICAgICAgICAgICB0aW1lcy5wdXNoKHRpbWVGcm9tKTtcbiAgICAgICAgICAgIGVhc2luZ3MucHVzaChsaW5lYXIpO1xuICAgICAgICB9IGVsc2UgaWYgKGRlZi5mcm9tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGRlZi5mcm9tKTtcbiAgICAgICAgICAgIHRpbWVzLnB1c2godGltZUZyb20pO1xuICAgICAgICAgICAgZWFzaW5ncy5wdXNoKGxpbmVhcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFsdWVzLnB1c2goZGVmLnRvKTtcbiAgICB0aW1lcy5wdXNoKHRpbWVUbyk7XG4gICAgZWFzaW5ncy5wdXNoKGRlZi5lYXNlIHx8IGVhc2VJbk91dCk7XG4gICAgcmV0dXJuIHByb3BzO1xufTtcbnZhciB0aW1lbGluZSA9IGZ1bmN0aW9uIChpbnN0cnVjdGlvbnMsIF9hKSB7XG4gICAgdmFyIF9iID0gX2EgPT09IHZvaWQgMCA/IHt9IDogX2EsXG4gICAgICAgIGR1cmF0aW9uID0gX2IuZHVyYXRpb24sXG4gICAgICAgIGVsYXBzZWQgPSBfYi5lbGFwc2VkLFxuICAgICAgICBlYXNlID0gX2IuZWFzZSxcbiAgICAgICAgbG9vcCA9IF9iLmxvb3AsXG4gICAgICAgIGZsaXAgPSBfYi5mbGlwLFxuICAgICAgICB5b3lvID0gX2IueW95bztcbiAgICB2YXIgcGxheWhlYWQgPSAwO1xuICAgIHZhciBjYWxjdWxhdGVkRHVyYXRpb24gPSAwO1xuICAgIHZhciBmbGF0SW5zdHJ1Y3Rpb25zID0gaW5zdHJ1Y3Rpb25zLnJlZHVjZShmbGF0dGVuQXJyYXlJbnN0cnVjdGlvbnMsIFtdKTtcbiAgICB2YXIgYW5pbWF0aW9uRGVmcyA9IFtdO1xuICAgIGZsYXRJbnN0cnVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnN0cnVjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHBsYXloZWFkICs9IHBhcnNlRmxvYXQoaW5zdHJ1Y3Rpb24pO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpbnN0cnVjdGlvbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHBsYXloZWFkID0gaW5zdHJ1Y3Rpb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZGVmID0gX19hc3NpZ24oe30sIGluc3RydWN0aW9uLCB7IGF0OiBwbGF5aGVhZCB9KTtcbiAgICAgICAgICAgIGRlZi5kdXJhdGlvbiA9IGRlZi5kdXJhdGlvbiA9PT0gdW5kZWZpbmVkID8gREVGQVVMVF9EVVJBVElPTiA6IGRlZi5kdXJhdGlvbjtcbiAgICAgICAgICAgIGFuaW1hdGlvbkRlZnMucHVzaChkZWYpO1xuICAgICAgICAgICAgcGxheWhlYWQgKz0gZGVmLmR1cmF0aW9uO1xuICAgICAgICAgICAgY2FsY3VsYXRlZER1cmF0aW9uID0gTWF0aC5tYXgoY2FsY3VsYXRlZER1cmF0aW9uLCBkZWYuYXQgKyBkZWYuZHVyYXRpb24pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgdmFyIHRyYWNrcyA9IHt9O1xuICAgIHZhciBudW1EZWZzID0gYW5pbWF0aW9uRGVmcy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EZWZzOyBpKyspIHtcbiAgICAgICAgdmFyIGRlZiA9IGFuaW1hdGlvbkRlZnNbaV07XG4gICAgICAgIHZhciB0cmFjayA9IGRlZi50cmFjaztcbiAgICAgICAgaWYgKHRyYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdHJhY2sgZGVmaW5lZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdHJhY2tzLmhhc093blByb3BlcnR5KHRyYWNrKSkgdHJhY2tzW3RyYWNrXSA9IFtdO1xuICAgICAgICB0cmFja3NbdHJhY2tdLnB1c2goZGVmKTtcbiAgICB9XG4gICAgdmFyIHRyYWNrS2V5ZnJhbWVzID0ge307XG4gICAgZm9yICh2YXIga2V5IGluIHRyYWNrcykge1xuICAgICAgICBpZiAodHJhY2tzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHZhciBrZXlmcmFtZVByb3BzID0gdHJhY2tzW2tleV0ucmVkdWNlKGNvbnZlcnREZWZUb1Byb3BzLCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IGNhbGN1bGF0ZWREdXJhdGlvbixcbiAgICAgICAgICAgICAgICBlYXNpbmdzOiBbXSxcbiAgICAgICAgICAgICAgICB0aW1lczogW10sXG4gICAgICAgICAgICAgICAgdmFsdWVzOiBbXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0cmFja0tleWZyYW1lc1trZXldID0ga2V5ZnJhbWVzKF9fYXNzaWduKHt9LCBrZXlmcmFtZVByb3BzLCB7IGR1cmF0aW9uOiBkdXJhdGlvbiB8fCBjYWxjdWxhdGVkRHVyYXRpb24sIGVhc2U6IGVhc2UsXG4gICAgICAgICAgICAgICAgZWxhcHNlZDogZWxhcHNlZCxcbiAgICAgICAgICAgICAgICBsb29wOiBsb29wLFxuICAgICAgICAgICAgICAgIHlveW86IHlveW8sXG4gICAgICAgICAgICAgICAgZmxpcDogZmxpcCB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbXBvc2l0ZSh0cmFja0tleWZyYW1lcyk7XG59O1xuXG52YXIgbGlzdGVuID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50cywgb3B0aW9ucykge1xuICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB1cGRhdGUgPSBfYS51cGRhdGU7XG4gICAgICAgIHZhciBldmVudE5hbWVzID0gZXZlbnRzLnNwbGl0KCcgJykubWFwKGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHVwZGF0ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gZXZlbnROYW1lO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnROYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHVwZGF0ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59O1xuXG52YXIgZGVmYXVsdFBvaW50ZXJQb3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2xpZW50WDogMCxcbiAgICAgICAgY2xpZW50WTogMCxcbiAgICAgICAgcGFnZVg6IDAsXG4gICAgICAgIHBhZ2VZOiAwLFxuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwXG4gICAgfTtcbn07XG52YXIgZXZlbnRUb1BvaW50ID0gZnVuY3Rpb24gKGUsIHBvaW50KSB7XG4gICAgaWYgKHBvaW50ID09PSB2b2lkIDApIHtcbiAgICAgICAgcG9pbnQgPSBkZWZhdWx0UG9pbnRlclBvcygpO1xuICAgIH1cbiAgICBwb2ludC5jbGllbnRYID0gcG9pbnQueCA9IGUuY2xpZW50WDtcbiAgICBwb2ludC5jbGllbnRZID0gcG9pbnQueSA9IGUuY2xpZW50WTtcbiAgICBwb2ludC5wYWdlWCA9IGUucGFnZVg7XG4gICAgcG9pbnQucGFnZVkgPSBlLnBhZ2VZO1xuICAgIHJldHVybiBwb2ludDtcbn07XG5cbnZhciBwb2ludHMgPSBbLyojX19QVVJFX18qL2RlZmF1bHRQb2ludGVyUG9zKCldO1xudmFyIGlzVG91Y2hEZXZpY2UgPSBmYWxzZTtcbmlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHVwZGF0ZVBvaW50c0xvY2F0aW9uID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB0b3VjaGVzID0gX2EudG91Y2hlcztcbiAgICAgICAgaXNUb3VjaERldmljZSA9IHRydWU7XG4gICAgICAgIHZhciBudW1Ub3VjaGVzID0gdG91Y2hlcy5sZW5ndGg7XG4gICAgICAgIHBvaW50cy5sZW5ndGggPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bVRvdWNoZXM7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRoaXNUb3VjaCA9IHRvdWNoZXNbaV07XG4gICAgICAgICAgICBwb2ludHMucHVzaChldmVudFRvUG9pbnQodGhpc1RvdWNoKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGxpc3Rlbihkb2N1bWVudCwgJ3RvdWNoc3RhcnQgdG91Y2htb3ZlJywge1xuICAgICAgICBwYXNzaXZlOiB0cnVlLFxuICAgICAgICBjYXB0dXJlOiB0cnVlXG4gICAgfSkuc3RhcnQodXBkYXRlUG9pbnRzTG9jYXRpb24pO1xufVxudmFyIG11bHRpdG91Y2ggPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSxcbiAgICAgICAgX2MgPSBfYi5wcmV2ZW50RGVmYXVsdCxcbiAgICAgICAgcHJldmVudERlZmF1bHQgPSBfYyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9jLFxuICAgICAgICBfZCA9IF9iLnNjYWxlLFxuICAgICAgICBzY2FsZSA9IF9kID09PSB2b2lkIDAgPyAxLjAgOiBfZCxcbiAgICAgICAgX2UgPSBfYi5yb3RhdGUsXG4gICAgICAgIHJvdGF0ZSA9IF9lID09PSB2b2lkIDAgPyAwLjAgOiBfZTtcbiAgICByZXR1cm4gYWN0aW9uKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgdXBkYXRlID0gX2EudXBkYXRlO1xuICAgICAgICB2YXIgb3V0cHV0ID0ge1xuICAgICAgICAgICAgdG91Y2hlczogcG9pbnRzLFxuICAgICAgICAgICAgc2NhbGU6IHNjYWxlLFxuICAgICAgICAgICAgcm90YXRlOiByb3RhdGVcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGluaXRpYWxEaXN0YW5jZSA9IDAuMDtcbiAgICAgICAgdmFyIGluaXRpYWxSb3RhdGlvbiA9IDAuMDtcbiAgICAgICAgdmFyIGlzR2VzdHVyZSA9IHBvaW50cy5sZW5ndGggPiAxO1xuICAgICAgICBpZiAoaXNHZXN0dXJlKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3RUb3VjaCA9IHBvaW50c1swXSxcbiAgICAgICAgICAgICAgICBzZWNvbmRUb3VjaCA9IHBvaW50c1sxXTtcbiAgICAgICAgICAgIGluaXRpYWxEaXN0YW5jZSA9IGRpc3RhbmNlKGZpcnN0VG91Y2gsIHNlY29uZFRvdWNoKTtcbiAgICAgICAgICAgIGluaXRpYWxSb3RhdGlvbiA9IGFuZ2xlKGZpcnN0VG91Y2gsIHNlY29uZFRvdWNoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXBkYXRlUG9pbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoaXNHZXN0dXJlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpcnN0VG91Y2ggPSBwb2ludHNbMF0sXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZFRvdWNoID0gcG9pbnRzWzFdO1xuICAgICAgICAgICAgICAgIHZhciBuZXdEaXN0YW5jZSA9IGRpc3RhbmNlKGZpcnN0VG91Y2gsIHNlY29uZFRvdWNoKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3Um90YXRpb24gPSBhbmdsZShmaXJzdFRvdWNoLCBzZWNvbmRUb3VjaCk7XG4gICAgICAgICAgICAgICAgb3V0cHV0LnNjYWxlID0gc2NhbGUgKiAobmV3RGlzdGFuY2UgLyBpbml0aWFsRGlzdGFuY2UpO1xuICAgICAgICAgICAgICAgIG91dHB1dC5yb3RhdGUgPSByb3RhdGUgKyAobmV3Um90YXRpb24gLSBpbml0aWFsUm90YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlKG91dHB1dCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBvbk1vdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHByZXZlbnREZWZhdWx0IHx8IGUudG91Y2hlcy5sZW5ndGggPiAxKSBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzeW5jLnVwZGF0ZSh1cGRhdGVQb2ludCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciB1cGRhdGVPbk1vdmUgPSBsaXN0ZW4oZG9jdW1lbnQsICd0b3VjaG1vdmUnLCB7XG4gICAgICAgICAgICBwYXNzaXZlOiAhcHJldmVudERlZmF1bHRcbiAgICAgICAgfSkuc3RhcnQob25Nb3ZlKTtcbiAgICAgICAgaWYgKGlzVG91Y2hEZXZpY2UpIHN5bmMudXBkYXRlKHVwZGF0ZVBvaW50KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjYW5jZWxTeW5jLnVwZGF0ZSh1cGRhdGVQb2ludCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlT25Nb3ZlLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbn07XG52YXIgZ2V0SXNUb3VjaERldmljZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gaXNUb3VjaERldmljZTtcbn07XG5cbnZhciBwb2ludCA9IC8qI19fUFVSRV9fKi9kZWZhdWx0UG9pbnRlclBvcygpO1xudmFyIGlzTW91c2VEZXZpY2UgPSBmYWxzZTtcbmlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHVwZGF0ZVBvaW50TG9jYXRpb24gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpc01vdXNlRGV2aWNlID0gdHJ1ZTtcbiAgICAgICAgZXZlbnRUb1BvaW50KGUsIHBvaW50KTtcbiAgICB9O1xuICAgIGxpc3Rlbihkb2N1bWVudCwgJ21vdXNlZG93biBtb3VzZW1vdmUnLCB0cnVlKS5zdGFydCh1cGRhdGVQb2ludExvY2F0aW9uKTtcbn1cbnZhciBtb3VzZSA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBfYiA9IChfYSA9PT0gdm9pZCAwID8ge30gOiBfYSkucHJldmVudERlZmF1bHQsXG4gICAgICAgIHByZXZlbnREZWZhdWx0ID0gX2IgPT09IHZvaWQgMCA/IHRydWUgOiBfYjtcbiAgICByZXR1cm4gYWN0aW9uKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgdXBkYXRlID0gX2EudXBkYXRlO1xuICAgICAgICB2YXIgdXBkYXRlUG9pbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlKHBvaW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG9uTW92ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAocHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHN5bmMudXBkYXRlKHVwZGF0ZVBvaW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHVwZGF0ZU9uTW92ZSA9IGxpc3Rlbihkb2N1bWVudCwgJ21vdXNlbW92ZScpLnN0YXJ0KG9uTW92ZSk7XG4gICAgICAgIGlmIChpc01vdXNlRGV2aWNlKSBzeW5jLnVwZGF0ZSh1cGRhdGVQb2ludCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsU3luYy51cGRhdGUodXBkYXRlUG9pbnQpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZU9uTW92ZS5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59O1xuXG52YXIgZ2V0Rmlyc3RUb3VjaCA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBmaXJzdFRvdWNoID0gX2FbMF07XG4gICAgcmV0dXJuIGZpcnN0VG91Y2g7XG59O1xudmFyIHBvaW50ZXIgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkge1xuICAgICAgICBwcm9wcyA9IHt9O1xuICAgIH1cbiAgICByZXR1cm4gZ2V0SXNUb3VjaERldmljZSgpID8gbXVsdGl0b3VjaChwcm9wcykucGlwZShmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHRvdWNoZXMgPSBfYS50b3VjaGVzO1xuICAgICAgICByZXR1cm4gdG91Y2hlcztcbiAgICB9LCBnZXRGaXJzdFRvdWNoKSA6IG1vdXNlKHByb3BzKTtcbn07XG52YXIgaW5kZXgkMSA9IGZ1bmN0aW9uIChfYSkge1xuICAgIGlmIChfYSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIF9hID0ge307XG4gICAgfVxuICAgIHZhciB4ID0gX2EueCxcbiAgICAgICAgeSA9IF9hLnksXG4gICAgICAgIHByb3BzID0gX19yZXN0KF9hLCBbXCJ4XCIsIFwieVwiXSk7XG4gICAgaWYgKHggIT09IHVuZGVmaW5lZCB8fCB5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIGFwcGx5WE9mZnNldF8xID0gYXBwbHlPZmZzZXQoeCB8fCAwKTtcbiAgICAgICAgdmFyIGFwcGx5WU9mZnNldF8xID0gYXBwbHlPZmZzZXQoeSB8fCAwKTtcbiAgICAgICAgdmFyIGRlbHRhXzEgPSB7IHg6IDAsIHk6IDAgfTtcbiAgICAgICAgcmV0dXJuIHBvaW50ZXIocHJvcHMpLnBpcGUoZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICAgICAgICBkZWx0YV8xLnggPSBhcHBseVhPZmZzZXRfMShwb2ludC54KTtcbiAgICAgICAgICAgIGRlbHRhXzEueSA9IGFwcGx5WU9mZnNldF8xKHBvaW50LnkpO1xuICAgICAgICAgICAgcmV0dXJuIGRlbHRhXzE7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwb2ludGVyKHByb3BzKTtcbiAgICB9XG59O1xuXG52YXIgY2hhaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFjdGlvbnMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhY3Rpb25zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB1cGRhdGUgPSBfYS51cGRhdGUsXG4gICAgICAgICAgICBjb21wbGV0ZSA9IF9hLmNvbXBsZXRlO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHZhciBjdXJyZW50O1xuICAgICAgICB2YXIgcGxheUN1cnJlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjdXJyZW50ID0gYWN0aW9uc1tpXS5zdGFydCh7XG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgICAgICBpID49IGFjdGlvbnMubGVuZ3RoID8gY29tcGxldGUoKSA6IHBsYXlDdXJyZW50KCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1cGRhdGU6IHVwZGF0ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHBsYXlDdXJyZW50KCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQgJiYgY3VycmVudC5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59O1xuXG52YXIgY3Jvc3NmYWRlID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYWN0aW9uKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICB2YXIgYmFsYW5jZSA9IDA7XG4gICAgICAgIHZhciBmYWRhYmxlID0gcGFyYWxsZWwkMShhLCBiKS5zdGFydChfX2Fzc2lnbih7fSwgb2JzZXJ2ZXIsIHsgdXBkYXRlOiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmEgPSBfYVswXSxcbiAgICAgICAgICAgICAgICAgICAgdmIgPSBfYVsxXTtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci51cGRhdGUobWl4KHZhLCB2YiwgYmFsYW5jZSkpO1xuICAgICAgICAgICAgfSB9KSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZXRCYWxhbmNlOiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgIHJldHVybiBiYWxhbmNlID0gdjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhZGFibGUuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xufTtcblxudmFyIGRlbGF5ID0gZnVuY3Rpb24gKHRpbWVUb0RlbGF5KSB7XG4gICAgcmV0dXJuIGFjdGlvbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGNvbXBsZXRlID0gX2EuY29tcGxldGU7XG4gICAgICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChjb21wbGV0ZSwgdGltZVRvRGVsYXkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59O1xuXG52YXIgbWVyZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFjdGlvbnMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhY3Rpb25zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBhY3Rpb24oZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIHZhciBzdWJzID0gYWN0aW9ucy5tYXAoZnVuY3Rpb24gKHRoaXNBY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzQWN0aW9uLnN0YXJ0KG9ic2VydmVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1YnMuZm9yRWFjaChmdW5jdGlvbiAoc3ViKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWIuc3RvcCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xufTtcblxudmFyIHNjaGVkdWxlID0gZnVuY3Rpb24gKHNjaGVkdWxlciwgc2NoZWR1bGVlKSB7XG4gICAgcmV0dXJuIGFjdGlvbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHVwZGF0ZSA9IF9hLnVwZGF0ZSxcbiAgICAgICAgICAgIGNvbXBsZXRlID0gX2EuY29tcGxldGU7XG4gICAgICAgIHZhciBsYXRlc3Q7XG4gICAgICAgIHZhciBzY2hlZHVsZXJTdWIgPSBzY2hlZHVsZXIuc3RhcnQoe1xuICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhdGVzdCAhPT0gdW5kZWZpbmVkICYmIHVwZGF0ZShsYXRlc3QpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBjb21wbGV0ZVxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHNjaGVkdWxlZVN1YiA9IHNjaGVkdWxlZS5zdGFydCh7XG4gICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhdGVzdCA9IHY7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29tcGxldGU6IGNvbXBsZXRlXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNjaGVkdWxlclN1Yi5zdG9wKCk7XG4gICAgICAgICAgICAgICAgc2NoZWR1bGVlU3ViLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbn07XG5cbnZhciBzdGFnZ2VyID0gZnVuY3Rpb24gKGFjdGlvbnMsIGludGVydmFsKSB7XG4gICAgdmFyIGludGVydmFsSXNOdW1iZXIgPSB0eXBlb2YgaW50ZXJ2YWwgPT09ICdudW1iZXInO1xuICAgIHZhciBhY3Rpb25zV2l0aERlbGF5ID0gYWN0aW9ucy5tYXAoZnVuY3Rpb24gKGEsIGkpIHtcbiAgICAgICAgdmFyIHRpbWVUb0RlbGF5ID0gaW50ZXJ2YWxJc051bWJlciA/IGludGVydmFsICogaSA6IGludGVydmFsKGkpO1xuICAgICAgICByZXR1cm4gY2hhaW4oZGVsYXkodGltZVRvRGVsYXkpLCBhKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcGFyYWxsZWwkMS5hcHBseSh2b2lkIDAsIGFjdGlvbnNXaXRoRGVsYXkpO1xufTtcblxudmFyIGFwcGVuZFVuaXQgPSBmdW5jdGlvbiAodW5pdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gXCJcIiArIHYgKyB1bml0O1xuICAgIH07XG59O1xudmFyIHN0ZXBzID0gZnVuY3Rpb24gKHN0LCBtaW4sIG1heCkge1xuICAgIGlmIChtaW4gPT09IHZvaWQgMCkge1xuICAgICAgICBtaW4gPSAwO1xuICAgIH1cbiAgICBpZiAobWF4ID09PSB2b2lkIDApIHtcbiAgICAgICAgbWF4ID0gMTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHZhciBjdXJyZW50ID0gcHJvZ3Jlc3MobWluLCBtYXgsIHYpO1xuICAgICAgICByZXR1cm4gbWl4KG1pbiwgbWF4LCBzdGVwUHJvZ3Jlc3Moc3QsIGN1cnJlbnQpKTtcbiAgICB9O1xufTtcbnZhciB0cmFuc2Zvcm1NYXAgPSBmdW5jdGlvbiAoY2hpbGRUcmFuc2Zvcm1lcnMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgdmFyIG91dHB1dCA9IF9fYXNzaWduKHt9LCB2KTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGNoaWxkVHJhbnNmb3JtZXJzKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGRUcmFuc2Zvcm1lcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZFRyYW5zZm9ybWVyID0gY2hpbGRUcmFuc2Zvcm1lcnNba2V5XTtcbiAgICAgICAgICAgICAgICBvdXRwdXRba2V5XSA9IGNoaWxkVHJhbnNmb3JtZXIodltrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH07XG59O1xuXG52YXIgdHJhbnNmb3JtZXJzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICAgIGFwcGx5T2Zmc2V0OiBhcHBseU9mZnNldCxcbiAgICBjbGFtcDogY2xhbXAsXG4gICAgY29uZGl0aW9uYWw6IGNvbmRpdGlvbmFsLFxuICAgIGludGVycG9sYXRlOiBpbnRlcnBvbGF0ZSxcbiAgICBibGVuZEFycmF5OiBtaXhBcnJheSxcbiAgICBibGVuZENvbG9yOiBtaXhDb2xvcixcbiAgICBwaXBlOiBwaXBlLFxuICAgIHNtb290aDogc21vb3RoLFxuICAgIHNuYXA6IHNuYXAsXG4gICAgZ2VuZXJhdGVTdGF0aWNTcHJpbmc6IHNwcmluZ0ZvcmNlLFxuICAgIG5vbmxpbmVhclNwcmluZzogc3ByaW5nRm9yY2VFeHBvLFxuICAgIGxpbmVhclNwcmluZzogc3ByaW5nRm9yY2VMaW5lYXIsXG4gICAgd3JhcDogd3JhcCxcbiAgICBhcHBlbmRVbml0OiBhcHBlbmRVbml0LFxuICAgIHN0ZXBzOiBzdGVwcyxcbiAgICB0cmFuc2Zvcm1NYXA6IHRyYW5zZm9ybU1hcFxufSk7XG5cbnZhciBjc3MgPSBmdW5jdGlvbiAoZWxlbWVudCwgcHJvcHMpIHtcbiAgICB3YXJuaW5nKGZhbHNlLCAnY3NzKCkgaXMgZGVwcmVjYXRlZCwgdXNlIHN0eWxlciBpbnN0ZWFkJyk7XG4gICAgcmV0dXJuIHN0eWxlcihlbGVtZW50LCBwcm9wcyk7XG59O1xudmFyIHN2ZyA9IGZ1bmN0aW9uIChlbGVtZW50LCBwcm9wcykge1xuICAgIHdhcm5pbmcoZmFsc2UsICdzdmcoKSBpcyBkZXByZWNhdGVkLCB1c2Ugc3R5bGVyIGluc3RlYWQnKTtcbiAgICByZXR1cm4gc3R5bGVyKGVsZW1lbnQsIHByb3BzKTtcbn07XG5cbmV4cG9ydCB7IGFjdGlvbiwgbXVsdGljYXN0LCB2YWx1ZSwgdmVjdG9yRGVjYXkgYXMgZGVjYXksIGluZGV4IGFzIGluZXJ0aWEsIGtleWZyYW1lcywgZnJhbWUgYXMgZXZlcnlGcmFtZSwgdmVjdG9yUGh5c2ljcyBhcyBwaHlzaWNzLCB2ZWN0b3JTcHJpbmcgYXMgc3ByaW5nLCB0aW1lbGluZSwgdHdlZW4sIGxpc3RlbiwgaW5kZXgkMSBhcyBwb2ludGVyLCBtb3VzZSwgbXVsdGl0b3VjaCwgY2hhaW4sIGNvbXBvc2l0ZSwgY3Jvc3NmYWRlLCBkZWxheSwgbWVyZ2UsIHBhcmFsbGVsJDEgYXMgcGFyYWxsZWwsIHNjaGVkdWxlLCBzdGFnZ2VyLCBjYWxjLCB0cmFuc2Zvcm1lcnMgYXMgdHJhbnNmb3JtLCBjc3MsIHN2ZywgQWN0aW9uLCBWYWx1ZVJlYWN0aW9uIH07XG4iLCJpbXBvcnQgeyBfX3Jlc3QsIF9fYXNzaWduIH0gZnJvbSAndHNsaWInO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnaGV5LWxpc3Rlbic7XG5cbnZhciBnZXRQb3NlVmFsdWVzID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIHRyYW5zaXRpb24gPSBfYS50cmFuc2l0aW9uLFxuICAgICAgICBmbGlwID0gX2EuZmxpcCxcbiAgICAgICAgZGVsYXkgPSBfYS5kZWxheSxcbiAgICAgICAgZGVsYXlDaGlsZHJlbiA9IF9hLmRlbGF5Q2hpbGRyZW4sXG4gICAgICAgIHN0YWdnZXJDaGlsZHJlbiA9IF9hLnN0YWdnZXJDaGlsZHJlbixcbiAgICAgICAgc3RhZ2dlckRpcmVjdGlvbiA9IF9hLnN0YWdnZXJEaXJlY3Rpb24sXG4gICAgICAgIGFmdGVyQ2hpbGRyZW4gPSBfYS5hZnRlckNoaWxkcmVuLFxuICAgICAgICBiZWZvcmVDaGlsZHJlbiA9IF9hLmJlZm9yZUNoaWxkcmVuLFxuICAgICAgICBwcmVUcmFuc2l0aW9uID0gX2EucHJlVHJhbnNpdGlvbixcbiAgICAgICAgYXBwbHlBdFN0YXJ0ID0gX2EuYXBwbHlBdFN0YXJ0LFxuICAgICAgICBhcHBseUF0RW5kID0gX2EuYXBwbHlBdEVuZCxcbiAgICAgICAgcHJvcHMgPSBfX3Jlc3QoX2EsIFtcInRyYW5zaXRpb25cIiwgXCJmbGlwXCIsIFwiZGVsYXlcIiwgXCJkZWxheUNoaWxkcmVuXCIsIFwic3RhZ2dlckNoaWxkcmVuXCIsIFwic3RhZ2dlckRpcmVjdGlvblwiLCBcImFmdGVyQ2hpbGRyZW5cIiwgXCJiZWZvcmVDaGlsZHJlblwiLCBcInByZVRyYW5zaXRpb25cIiwgXCJhcHBseUF0U3RhcnRcIiwgXCJhcHBseUF0RW5kXCJdKTtcbiAgICByZXR1cm4gcHJvcHM7XG59O1xudmFyIHNlbGVjdFBvc2VzID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIGxhYmVsID0gX2EubGFiZWwsXG4gICAgICAgIHByb3BzID0gX2EucHJvcHMsXG4gICAgICAgIHZhbHVlcyA9IF9hLnZhbHVlcyxcbiAgICAgICAgcGFyZW50VmFsdWVzID0gX2EucGFyZW50VmFsdWVzLFxuICAgICAgICBhbmNlc3RvclZhbHVlcyA9IF9hLmFuY2VzdG9yVmFsdWVzLFxuICAgICAgICBvbkNoYW5nZSA9IF9hLm9uQ2hhbmdlLFxuICAgICAgICBwYXNzaXZlID0gX2EucGFzc2l2ZSxcbiAgICAgICAgaW5pdGlhbFBvc2UgPSBfYS5pbml0aWFsUG9zZSxcbiAgICAgICAgcG9zZXMgPSBfX3Jlc3QoX2EsIFtcImxhYmVsXCIsIFwicHJvcHNcIiwgXCJ2YWx1ZXNcIiwgXCJwYXJlbnRWYWx1ZXNcIiwgXCJhbmNlc3RvclZhbHVlc1wiLCBcIm9uQ2hhbmdlXCIsIFwicGFzc2l2ZVwiLCBcImluaXRpYWxQb3NlXCJdKTtcbiAgICByZXR1cm4gcG9zZXM7XG59O1xudmFyIHNlbGVjdEFsbFZhbHVlcyA9IGZ1bmN0aW9uICh2YWx1ZXMsIHNlbGVjdFZhbHVlKSB7XG4gICAgdmFyIGFsbFZhbHVlcyA9IHt9O1xuICAgIHZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgIHJldHVybiBhbGxWYWx1ZXNba2V5XSA9IHNlbGVjdFZhbHVlKHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYWxsVmFsdWVzO1xufTtcblxudmFyIHJlc29sdmVQcm9wID0gZnVuY3Rpb24gKHRhcmdldCwgcHJvcHMpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJyA/IHRhcmdldChwcm9wcykgOiB0YXJnZXQ7XG59O1xudmFyIHBvc2VEZWZhdWx0ID0gZnVuY3Rpb24gKHBvc2UsIHByb3AsIGRlZmF1bHRWYWx1ZSwgcmVzb2x2ZVByb3BzKSB7XG4gICAgcmV0dXJuIHBvc2UgJiYgcG9zZVtwcm9wXSAhPT0gdW5kZWZpbmVkID8gcmVzb2x2ZVByb3AocG9zZVtwcm9wXSwgcmVzb2x2ZVByb3BzKSA6IGRlZmF1bHRWYWx1ZTtcbn07XG52YXIgc3RhcnRDaGlsZEFuaW1hdGlvbnMgPSBmdW5jdGlvbiAoY2hpbGRyZW4sIG5leHQsIHBvc2UsIHByb3BzKSB7XG4gICAgdmFyIGFuaW1hdGlvbnMgPSBbXTtcbiAgICB2YXIgZGVsYXkgPSBwb3NlRGVmYXVsdChwb3NlLCAnZGVsYXlDaGlsZHJlbicsIDAsIHByb3BzKTtcbiAgICB2YXIgc3RhZ2dlciA9IHBvc2VEZWZhdWx0KHBvc2UsICdzdGFnZ2VyQ2hpbGRyZW4nLCAwLCBwcm9wcyk7XG4gICAgdmFyIHN0YWdnZXJEaXJlY3Rpb24gPSBwb3NlRGVmYXVsdChwb3NlLCAnc3RhZ2dlckRpcmVjdGlvbicsIDEsIHByb3BzKTtcbiAgICB2YXIgbWF4U3RhZ2dlckR1cmF0aW9uID0gKGNoaWxkcmVuLnNpemUgLSAxKSAqIHN0YWdnZXI7XG4gICAgdmFyIGdlbmVyYXRlU3RhZ2dlckR1cmF0aW9uID0gc3RhZ2dlckRpcmVjdGlvbiA9PT0gMSA/IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIHJldHVybiBpICogc3RhZ2dlcjtcbiAgICB9IDogZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgcmV0dXJuIG1heFN0YWdnZXJEdXJhdGlvbiAtIGkgKiBzdGFnZ2VyO1xuICAgIH07XG4gICAgQXJyYXkuZnJvbShjaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIGkpIHtcbiAgICAgICAgYW5pbWF0aW9ucy5wdXNoKGNoaWxkLnNldChuZXh0LCB7XG4gICAgICAgICAgICBkZWxheTogZGVsYXkgKyBnZW5lcmF0ZVN0YWdnZXJEdXJhdGlvbihpKVxuICAgICAgICB9KSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFuaW1hdGlvbnM7XG59O1xudmFyIHJlc29sdmVUcmFuc2l0aW9uID0gZnVuY3Rpb24gKHRyYW5zaXRpb24sIGtleSwgdmFsdWUsIHByb3BzLCBjb252ZXJ0VHJhbnNpdGlvbkRlZmluaXRpb24sIGdldEluc3RhbnRUcmFuc2l0aW9uKSB7XG4gICAgdmFyIHJlc29sdmVkVHJhbnNpdGlvbjtcbiAgICBpZiAodHlwZW9mIHRyYW5zaXRpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIHJlc29sdmVkVHJhbnNpdGlvbk1hcCA9IHRyYW5zaXRpb24ocHJvcHMpO1xuICAgICAgICByZXNvbHZlZFRyYW5zaXRpb24gPSByZXNvbHZlVHJhbnNpdGlvbihyZXNvbHZlZFRyYW5zaXRpb25NYXAsIGtleSwgdmFsdWUsIHByb3BzLCBjb252ZXJ0VHJhbnNpdGlvbkRlZmluaXRpb24sIGdldEluc3RhbnRUcmFuc2l0aW9uKTtcbiAgICB9IGVsc2UgaWYgKHRyYW5zaXRpb25ba2V5XSB8fCB0cmFuc2l0aW9uLmRlZmF1bHQpIHtcbiAgICAgICAgdmFyIGtleVRyYW5zaXRpb24gPSB0cmFuc2l0aW9uW2tleV0gfHwgdHJhbnNpdGlvbi5kZWZhdWx0O1xuICAgICAgICBpZiAodHlwZW9mIGtleVRyYW5zaXRpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJlc29sdmVkVHJhbnNpdGlvbiA9IGtleVRyYW5zaXRpb24ocHJvcHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZWRUcmFuc2l0aW9uID0ga2V5VHJhbnNpdGlvbjtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmVkVHJhbnNpdGlvbiA9IHRyYW5zaXRpb247XG4gICAgfVxuICAgIHJldHVybiByZXNvbHZlZFRyYW5zaXRpb24gPT09IGZhbHNlID8gZ2V0SW5zdGFudFRyYW5zaXRpb24odmFsdWUsIHByb3BzKSA6IGNvbnZlcnRUcmFuc2l0aW9uRGVmaW5pdGlvbih2YWx1ZSwgcmVzb2x2ZWRUcmFuc2l0aW9uLCBwcm9wcyk7XG59O1xudmFyIGZpbmRJbnNlcnRpb25JbmRleCA9IGZ1bmN0aW9uIChwb3NlTGlzdCwgcHJpb3JpdHlMaXN0LCBwcmlvcml0eUluZGV4KSB7XG4gICAgdmFyIGluc2VydGlvbkluZGV4ID0gMDtcbiAgICBmb3IgKHZhciBpID0gcHJpb3JpdHlJbmRleCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIHZhciBuZXh0SGlnaGVzdFByaW9yaXR5SW5kZXggPSBwb3NlTGlzdC5pbmRleE9mKHByaW9yaXR5TGlzdFtpXSk7XG4gICAgICAgIGlmIChuZXh0SGlnaGVzdFByaW9yaXR5SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBpbnNlcnRpb25JbmRleCA9IG5leHRIaWdoZXN0UHJpb3JpdHlJbmRleCArIDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaW5zZXJ0aW9uSW5kZXg7XG59O1xudmFyIGFwcGx5VmFsdWVzID0gZnVuY3Rpb24gKHRvQXBwbHksIHZhbHVlcywgcHJvcHMsIHNldFZhbHVlLCBzZXRWYWx1ZU5hdGl2ZSkge1xuICAgIGludmFyaWFudCh0eXBlb2YgdG9BcHBseSA9PT0gJ29iamVjdCcsICdhcHBseUF0U3RhcnQgYW5kIGFwcGx5QXRFbmQgbXVzdCBiZSBvZiB0eXBlIG9iamVjdCcpO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0b0FwcGx5KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIHZhbHVlVG9TZXQgPSByZXNvbHZlUHJvcCh0b0FwcGx5W2tleV0sIHByb3BzKTtcbiAgICAgICAgdmFsdWVzLmhhcyhrZXkpID8gc2V0VmFsdWUodmFsdWVzLmdldChrZXkpLCB2YWx1ZVRvU2V0KSA6IHNldFZhbHVlTmF0aXZlKGtleSwgdmFsdWVUb1NldCwgcHJvcHMpO1xuICAgIH0pO1xufTtcbnZhciBjcmVhdGVQb3NlU2V0dGVyID0gZnVuY3Rpb24gKHNldHRlclByb3BzKSB7XG4gICAgdmFyIHN0YXRlID0gc2V0dGVyUHJvcHMuc3RhdGUsXG4gICAgICAgIHBvc2VzID0gc2V0dGVyUHJvcHMucG9zZXMsXG4gICAgICAgIHN0YXJ0QWN0aW9uID0gc2V0dGVyUHJvcHMuc3RhcnRBY3Rpb24sXG4gICAgICAgIHN0b3BBY3Rpb24gPSBzZXR0ZXJQcm9wcy5zdG9wQWN0aW9uLFxuICAgICAgICBnZXRJbnN0YW50VHJhbnNpdGlvbiA9IHNldHRlclByb3BzLmdldEluc3RhbnRUcmFuc2l0aW9uLFxuICAgICAgICBhZGRBY3Rpb25EZWxheSA9IHNldHRlclByb3BzLmFkZEFjdGlvbkRlbGF5LFxuICAgICAgICBnZXRUcmFuc2l0aW9uUHJvcHMgPSBzZXR0ZXJQcm9wcy5nZXRUcmFuc2l0aW9uUHJvcHMsXG4gICAgICAgIHJlc29sdmVUYXJnZXQgPSBzZXR0ZXJQcm9wcy5yZXNvbHZlVGFyZ2V0LFxuICAgICAgICB0cmFuc2Zvcm1Qb3NlID0gc2V0dGVyUHJvcHMudHJhbnNmb3JtUG9zZSxcbiAgICAgICAgcG9zZVByaW9yaXR5ID0gc2V0dGVyUHJvcHMucG9zZVByaW9yaXR5LFxuICAgICAgICBjb252ZXJ0VHJhbnNpdGlvbkRlZmluaXRpb24gPSBzZXR0ZXJQcm9wcy5jb252ZXJ0VHJhbnNpdGlvbkRlZmluaXRpb24sXG4gICAgICAgIHNldFZhbHVlID0gc2V0dGVyUHJvcHMuc2V0VmFsdWUsXG4gICAgICAgIHNldFZhbHVlTmF0aXZlID0gc2V0dGVyUHJvcHMuc2V0VmFsdWVOYXRpdmUsXG4gICAgICAgIGZvcmNlUmVuZGVyID0gc2V0dGVyUHJvcHMuZm9yY2VSZW5kZXI7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuZXh0LCBuZXh0UHJvcHMsIHByb3BhZ2F0ZSkge1xuICAgICAgICBpZiAobmV4dFByb3BzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIG5leHRQcm9wcyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wYWdhdGUgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcHJvcGFnYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2hpbGRyZW4gPSBzdGF0ZS5jaGlsZHJlbixcbiAgICAgICAgICAgIHZhbHVlcyA9IHN0YXRlLnZhbHVlcyxcbiAgICAgICAgICAgIHByb3BzID0gc3RhdGUucHJvcHMsXG4gICAgICAgICAgICBhY3RpdmVBY3Rpb25zID0gc3RhdGUuYWN0aXZlQWN0aW9ucyxcbiAgICAgICAgICAgIGFjdGl2ZVBvc2VzID0gc3RhdGUuYWN0aXZlUG9zZXM7XG4gICAgICAgIHZhciBfYSA9IG5leHRQcm9wcy5kZWxheSxcbiAgICAgICAgICAgIGRlbGF5ID0gX2EgPT09IHZvaWQgMCA/IDAgOiBfYTtcbiAgICAgICAgdmFyIGhhc0NoaWxkcmVuID0gY2hpbGRyZW4uc2l6ZTtcbiAgICAgICAgdmFyIGJhc2VUcmFuc2l0aW9uUHJvcHMgPSBfX2Fzc2lnbih7fSwgcHJvcHMsIG5leHRQcm9wcyk7XG4gICAgICAgIHZhciBuZXh0UG9zZSA9IHBvc2VzW25leHRdO1xuICAgICAgICB2YXIgZ2V0Q2hpbGRBbmltYXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhhc0NoaWxkcmVuICYmIHByb3BhZ2F0ZSA/IHN0YXJ0Q2hpbGRBbmltYXRpb25zKGNoaWxkcmVuLCBuZXh0LCBuZXh0UG9zZSwgYmFzZVRyYW5zaXRpb25Qcm9wcykgOiBbXTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGdldFBhcmVudEFuaW1hdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIW5leHRQb3NlKSByZXR1cm4gW107XG4gICAgICAgICAgICB2YXIgYXBwbHlBdFN0YXJ0ID0gbmV4dFBvc2UuYXBwbHlBdFN0YXJ0O1xuICAgICAgICAgICAgaWYgKGFwcGx5QXRTdGFydCkge1xuICAgICAgICAgICAgICAgIGFwcGx5VmFsdWVzKGFwcGx5QXRTdGFydCwgdmFsdWVzLCBiYXNlVHJhbnNpdGlvblByb3BzLCBzZXRWYWx1ZSwgc2V0VmFsdWVOYXRpdmUpO1xuICAgICAgICAgICAgICAgIGlmIChmb3JjZVJlbmRlcikgZm9yY2VSZW5kZXIoYmFzZVRyYW5zaXRpb25Qcm9wcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJhbnNmb3JtUG9zZSkgbmV4dFBvc2UgPSB0cmFuc2Zvcm1Qb3NlKG5leHRQb3NlLCBuZXh0LCBzdGF0ZSk7XG4gICAgICAgICAgICB2YXIgcHJlVHJhbnNpdGlvbiA9IG5leHRQb3NlLnByZVRyYW5zaXRpb24sXG4gICAgICAgICAgICAgICAgZ2V0VHJhbnNpdGlvbiA9IG5leHRQb3NlLnRyYW5zaXRpb24sXG4gICAgICAgICAgICAgICAgYXBwbHlBdEVuZCA9IG5leHRQb3NlLmFwcGx5QXRFbmQ7XG4gICAgICAgICAgICBpZiAocHJlVHJhbnNpdGlvbikgcHJlVHJhbnNpdGlvbihiYXNlVHJhbnNpdGlvblByb3BzKTtcbiAgICAgICAgICAgIHZhciBhbmltYXRpb25zID0gT2JqZWN0LmtleXMoZ2V0UG9zZVZhbHVlcyhuZXh0UG9zZSkpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlUG9zZXMgPSBhY3RpdmVQb3Nlcy5oYXMoa2V5KSA/IGFjdGl2ZVBvc2VzLmdldChrZXkpIDogKGFjdGl2ZVBvc2VzLnNldChrZXksIFtdKSwgYWN0aXZlUG9zZXMuZ2V0KGtleSkpO1xuICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ0luZGV4ID0gdmFsdWVQb3Nlcy5pbmRleE9mKG5leHQpO1xuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0luZGV4ICE9PSAtMSkgdmFsdWVQb3Nlcy5zcGxpY2UoZXhpc3RpbmdJbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgdmFyIHByaW9yaXR5ID0gcG9zZVByaW9yaXR5ID8gcG9zZVByaW9yaXR5LmluZGV4T2YobmV4dCkgOiAwO1xuICAgICAgICAgICAgICAgIHZhciBpbnNlcnRpb25JbmRleCA9IHByaW9yaXR5IDw9IDAgPyAwIDogZmluZEluc2VydGlvbkluZGV4KHZhbHVlUG9zZXMsIHBvc2VQcmlvcml0eSwgcHJpb3JpdHkpO1xuICAgICAgICAgICAgICAgIHZhbHVlUG9zZXMuc3BsaWNlKGluc2VydGlvbkluZGV4LCAwLCBuZXh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5zZXJ0aW9uSW5kZXggPT09IDAgPyBuZXcgUHJvbWlzZShmdW5jdGlvbiAoY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdmFsdWVzLmdldChrZXkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNpdGlvblByb3BzID0gX19hc3NpZ24oe30sIGJhc2VUcmFuc2l0aW9uUHJvcHMsIHsga2V5OiBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSByZXNvbHZlVGFyZ2V0KHZhbHVlLCByZXNvbHZlUHJvcChuZXh0UG9zZVtrZXldLCB0cmFuc2l0aW9uUHJvcHMpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUFjdGlvbnMuaGFzKGtleSkpIHN0b3BBY3Rpb24oYWN0aXZlQWN0aW9ucy5nZXQoa2V5KSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNvbHZlVHJhbnNpdGlvblByb3BzID0gX19hc3NpZ24oeyB0bzogdGFyZ2V0IH0sIHRyYW5zaXRpb25Qcm9wcywgZ2V0VHJhbnNpdGlvblByb3BzKHZhbHVlLCB0YXJnZXQsIHRyYW5zaXRpb25Qcm9wcykpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNpdGlvbiA9IHJlc29sdmVUcmFuc2l0aW9uKGdldFRyYW5zaXRpb24sIGtleSwgdmFsdWUsIHJlc29sdmVUcmFuc2l0aW9uUHJvcHMsIGNvbnZlcnRUcmFuc2l0aW9uRGVmaW5pdGlvbiwgZ2V0SW5zdGFudFRyYW5zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zZURlbGF5ID0gZGVsYXkgfHwgcmVzb2x2ZVByb3AobmV4dFBvc2UuZGVsYXksIHRyYW5zaXRpb25Qcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3NlRGVsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24gPSBhZGRBY3Rpb25EZWxheShwb3NlRGVsYXksIHRyYW5zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUFjdGlvbnMuc2V0KGtleSwgc3RhcnRBY3Rpb24odmFsdWUsIHRyYW5zaXRpb24sIGNvbXBsZXRlKSk7XG4gICAgICAgICAgICAgICAgfSkgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGFwcGx5QXRFbmQgPyBbUHJvbWlzZS5hbGwoYW5pbWF0aW9ucykudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYXBwbHlWYWx1ZXMoYXBwbHlBdEVuZCwgdmFsdWVzLCBiYXNlVHJhbnNpdGlvblByb3BzLCBzZXRWYWx1ZSwgc2V0VmFsdWVOYXRpdmUpO1xuICAgICAgICAgICAgfSldIDogYW5pbWF0aW9ucztcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG5leHRQb3NlICYmIGhhc0NoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAocmVzb2x2ZVByb3AobmV4dFBvc2UuYmVmb3JlQ2hpbGRyZW4sIGJhc2VUcmFuc2l0aW9uUHJvcHMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGdldFBhcmVudEFuaW1hdGlvbnMoKSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChnZXRDaGlsZEFuaW1hdGlvbnMoKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc29sdmVQcm9wKG5leHRQb3NlLmFmdGVyQ2hpbGRyZW4sIGJhc2VUcmFuc2l0aW9uUHJvcHMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGdldENoaWxkQW5pbWF0aW9ucygpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGdldFBhcmVudEFuaW1hdGlvbnMoKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGdldFBhcmVudEFuaW1hdGlvbnMoKS5jb25jYXQoZ2V0Q2hpbGRBbmltYXRpb25zKCkpKTtcbiAgICB9O1xufTtcblxudmFyIERFRkFVTFRfSU5JVElBTF9QT1NFID0gJ2luaXQnO1xudmFyIGlzU2NhbGUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIGtleS5pbmNsdWRlcygnc2NhbGUnKTtcbn07XG52YXIgZGVmYXVsdFJlYWRWYWx1ZUZyb21Tb3VyY2UgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIGlzU2NhbGUoa2V5KSA/IDEgOiAwO1xufTtcbnZhciByZWFkVmFsdWVGcm9tUG9zZSA9IGZ1bmN0aW9uIChwb3NlLCBrZXksIHByb3BzKSB7XG4gICAgdmFyIHZhbHVlVG9SZXNvbHZlID0gcG9zZS5hcHBseUF0RW5kICYmIHBvc2UuYXBwbHlBdEVuZFtrZXldICE9PSB1bmRlZmluZWQgPyBwb3NlLmFwcGx5QXRFbmRba2V5XSA6IHBvc2Vba2V5XSAhPT0gdW5kZWZpbmVkID8gcG9zZVtrZXldIDogcG9zZS5hcHBseUF0U3RhcnQgJiYgcG9zZS5hcHBseUF0U3RhcnRba2V5XSAhPT0gdW5kZWZpbmVkID8gcG9zZS5hcHBseUF0U3RhcnRba2V5XSA6IDA7XG4gICAgcmV0dXJuIHJlc29sdmVQcm9wKHZhbHVlVG9SZXNvbHZlLCBwcm9wcyk7XG59O1xudmFyIGdldFBvc2VzVG9TZWFyY2ggPSBmdW5jdGlvbiAocG9zZSkge1xuICAgIHZhciBwb3Nlc1RvU2VhcmNoID0gQXJyYXkuaXNBcnJheShwb3NlKSA/IHBvc2UgOiBbcG9zZV07XG4gICAgcG9zZXNUb1NlYXJjaC5wdXNoKERFRkFVTFRfSU5JVElBTF9QT1NFKTtcbiAgICByZXR1cm4gcG9zZXNUb1NlYXJjaDtcbn07XG52YXIgZ2V0SW5pdGlhbFZhbHVlID0gZnVuY3Rpb24gKHBvc2VzLCBrZXksIGluaXRpYWxQb3NlLCBwcm9wcywgcmVhZFZhbHVlRnJvbVNvdXJjZSwgYWN0aXZlUG9zZXMpIHtcbiAgICBpZiAocmVhZFZhbHVlRnJvbVNvdXJjZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHJlYWRWYWx1ZUZyb21Tb3VyY2UgPSBkZWZhdWx0UmVhZFZhbHVlRnJvbVNvdXJjZTtcbiAgICB9XG4gICAgdmFyIHBvc2VzVG9TZWFyY2ggPSBnZXRQb3Nlc1RvU2VhcmNoKGluaXRpYWxQb3NlKTtcbiAgICB2YXIgcG9zZSA9IHBvc2VzVG9TZWFyY2guZmlsdGVyKEJvb2xlYW4pLmZpbmQoZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIHRoaXNQb3NlID0gcG9zZXNbbmFtZV07XG4gICAgICAgIHJldHVybiB0aGlzUG9zZSAmJiAodGhpc1Bvc2Vba2V5XSAhPT0gdW5kZWZpbmVkIHx8IHRoaXNQb3NlLmFwcGx5QXRTdGFydCAmJiB0aGlzUG9zZS5hcHBseUF0U3RhcnRba2V5XSAhPT0gdW5kZWZpbmVkIHx8IHRoaXNQb3NlLmFwcGx5QXRFbmQgJiYgdGhpc1Bvc2UuYXBwbHlBdEVuZFtrZXldICE9PSB1bmRlZmluZWQpO1xuICAgIH0pO1xuICAgIGFjdGl2ZVBvc2VzLnNldChrZXksIFtwb3NlIHx8IERFRkFVTFRfSU5JVElBTF9QT1NFXSk7XG4gICAgcmV0dXJuIHBvc2UgPyByZWFkVmFsdWVGcm9tUG9zZShwb3Nlc1twb3NlXSwga2V5LCBwcm9wcykgOiByZWFkVmFsdWVGcm9tU291cmNlKGtleSwgcHJvcHMpO1xufTtcbnZhciBjcmVhdGVWYWx1ZXMgPSBmdW5jdGlvbiAodmFsdWVzLCBfYSkge1xuICAgIHZhciB1c2VyU2V0VmFsdWVzID0gX2EudXNlclNldFZhbHVlcyxcbiAgICAgICAgY3JlYXRlVmFsdWUgPSBfYS5jcmVhdGVWYWx1ZSxcbiAgICAgICAgY29udmVydFZhbHVlID0gX2EuY29udmVydFZhbHVlLFxuICAgICAgICByZWFkVmFsdWVGcm9tU291cmNlID0gX2EucmVhZFZhbHVlRnJvbVNvdXJjZSxcbiAgICAgICAgaW5pdGlhbFBvc2UgPSBfYS5pbml0aWFsUG9zZSxcbiAgICAgICAgcG9zZXMgPSBfYS5wb3NlcyxcbiAgICAgICAgYWN0aXZlUG9zZXMgPSBfYS5hY3RpdmVQb3NlcyxcbiAgICAgICAgcHJvcHMgPSBfYS5wcm9wcztcbiAgICByZXR1cm4gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAodmFsdWVzLmhhcyhrZXkpKSByZXR1cm47XG4gICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgaWYgKHVzZXJTZXRWYWx1ZXMgJiYgdXNlclNldFZhbHVlc1trZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhbHVlID0gY29udmVydFZhbHVlKHVzZXJTZXRWYWx1ZXNba2V5XSwga2V5LCBwcm9wcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgaW5pdFZhbHVlID0gZ2V0SW5pdGlhbFZhbHVlKHBvc2VzLCBrZXksIGluaXRpYWxQb3NlLCBwcm9wcywgcmVhZFZhbHVlRnJvbVNvdXJjZSwgYWN0aXZlUG9zZXMpO1xuICAgICAgICAgICAgdmFsdWUgPSBjcmVhdGVWYWx1ZShpbml0VmFsdWUsIGtleSwgcHJvcHMpO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlcy5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfTtcbn07XG52YXIgc2NyYXBlVmFsdWVzRnJvbVBvc2UgPSBmdW5jdGlvbiAodmFsdWVzLCBwcm9wcykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBwb3NlID0gcHJvcHMucG9zZXNba2V5XTtcbiAgICAgICAgT2JqZWN0LmtleXMoZ2V0UG9zZVZhbHVlcyhwb3NlKSkuZm9yRWFjaChjcmVhdGVWYWx1ZXModmFsdWVzLCBwcm9wcykpO1xuICAgIH07XG59O1xudmFyIGdldEFuY2VzdG9yVmFsdWUgPSBmdW5jdGlvbiAoa2V5LCBmcm9tUGFyZW50LCBhbmNlc3RvcnMpIHtcbiAgICBpZiAoZnJvbVBhcmVudCA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gYW5jZXN0b3JzWzBdICYmIGFuY2VzdG9yc1swXS52YWx1ZXMuZ2V0KGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGZvdW5kQW5jZXN0b3IgPSBhbmNlc3RvcnMuZmluZChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9IF9hLmxhYmVsO1xuICAgICAgICAgICAgcmV0dXJuIGxhYmVsID09PSBmcm9tUGFyZW50O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZvdW5kQW5jZXN0b3IgJiYgZm91bmRBbmNlc3Rvci52YWx1ZXMuZ2V0KGtleSk7XG4gICAgfVxufTtcbnZhciBiaW5kUGFzc2l2ZVZhbHVlcyA9IGZ1bmN0aW9uICh2YWx1ZXMsIF9hKSB7XG4gICAgdmFyIHBhc3NpdmUgPSBfYS5wYXNzaXZlLFxuICAgICAgICBhbmNlc3RvclZhbHVlcyA9IF9hLmFuY2VzdG9yVmFsdWVzLFxuICAgICAgICBjcmVhdGVWYWx1ZSA9IF9hLmNyZWF0ZVZhbHVlLFxuICAgICAgICByZWFkVmFsdWUgPSBfYS5yZWFkVmFsdWUsXG4gICAgICAgIHByb3BzID0gX2EucHJvcHM7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIF9hID0gcGFzc2l2ZVtrZXldLFxuICAgICAgICAgICAgdmFsdWVLZXkgPSBfYVswXSxcbiAgICAgICAgICAgIHBhc3NpdmVQcm9wcyA9IF9hWzFdLFxuICAgICAgICAgICAgZnJvbVBhcmVudCA9IF9hWzJdO1xuICAgICAgICB2YXIgdmFsdWVUb0JpbmQgPSBmcm9tUGFyZW50ICYmIGFuY2VzdG9yVmFsdWVzLmxlbmd0aCA/IGdldEFuY2VzdG9yVmFsdWUodmFsdWVLZXksIGZyb21QYXJlbnQsIGFuY2VzdG9yVmFsdWVzKSA6IHZhbHVlcy5oYXModmFsdWVLZXkpID8gdmFsdWVzLmdldCh2YWx1ZUtleSkgOiBmYWxzZTtcbiAgICAgICAgaWYgKCF2YWx1ZVRvQmluZCkgcmV0dXJuO1xuICAgICAgICB2YXIgbmV3VmFsdWUgPSBjcmVhdGVWYWx1ZShyZWFkVmFsdWUodmFsdWVUb0JpbmQpLCBrZXksIHByb3BzLCB7XG4gICAgICAgICAgICBwYXNzaXZlUGFyZW50S2V5OiB2YWx1ZUtleSxcbiAgICAgICAgICAgIHBhc3NpdmVQYXJlbnQ6IHZhbHVlVG9CaW5kLFxuICAgICAgICAgICAgcGFzc2l2ZVByb3BzOiBwYXNzaXZlUHJvcHNcbiAgICAgICAgfSk7XG4gICAgICAgIHZhbHVlcy5zZXQoa2V5LCBuZXdWYWx1ZSk7XG4gICAgfTtcbn07XG52YXIgc2V0TmF0aXZlVmFsdWVzID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIHNldFZhbHVlTmF0aXZlID0gX2Euc2V0VmFsdWVOYXRpdmUsXG4gICAgICAgIGluaXRpYWxQb3NlID0gX2EuaW5pdGlhbFBvc2UsXG4gICAgICAgIHByb3BzID0gX2EucHJvcHMsXG4gICAgICAgIHBvc2VzID0gX2EucG9zZXM7XG4gICAgdmFyIHZhbHVlc0hhdmVTZXQgPSBuZXcgU2V0KCk7XG4gICAgdmFyIHNldFZhbHVlcyA9IGZ1bmN0aW9uIChwb3NlLCBwcm9wS2V5KSB7XG4gICAgICAgIGlmIChwb3NlW3Byb3BLZXldKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcG9zZVtwcm9wS2V5XSkge1xuICAgICAgICAgICAgICAgIGlmICghdmFsdWVzSGF2ZVNldC5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNIYXZlU2V0LmFkZChrZXkpO1xuICAgICAgICAgICAgICAgICAgICBzZXRWYWx1ZU5hdGl2ZShrZXksIHJlc29sdmVQcm9wKHBvc2VbcHJvcEtleV1ba2V5XSwgcHJvcHMpLCBwcm9wcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBnZXRQb3Nlc1RvU2VhcmNoKGluaXRpYWxQb3NlKS5mb3JFYWNoKGZ1bmN0aW9uIChwb3NlS2V5KSB7XG4gICAgICAgIHZhciBwb3NlID0gcG9zZXNbcG9zZUtleV07XG4gICAgICAgIGlmIChwb3NlKSB7XG4gICAgICAgICAgICBzZXRWYWx1ZXMocG9zZSwgJ2FwcGx5QXRFbmQnKTtcbiAgICAgICAgICAgIHNldFZhbHVlcyhwb3NlLCAnYXBwbHlBdFN0YXJ0Jyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG52YXIgY3JlYXRlVmFsdWVNYXAgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICB2YXIgcG9zZXMgPSBwcm9wcy5wb3NlcyxcbiAgICAgICAgcGFzc2l2ZSA9IHByb3BzLnBhc3NpdmU7XG4gICAgdmFyIHZhbHVlcyA9IG5ldyBNYXAoKTtcbiAgICBPYmplY3Qua2V5cyhwb3NlcykuZm9yRWFjaChzY3JhcGVWYWx1ZXNGcm9tUG9zZSh2YWx1ZXMsIHByb3BzKSk7XG4gICAgc2V0TmF0aXZlVmFsdWVzKHByb3BzKTtcbiAgICBpZiAocGFzc2l2ZSkgT2JqZWN0LmtleXMocGFzc2l2ZSkuZm9yRWFjaChiaW5kUGFzc2l2ZVZhbHVlcyh2YWx1ZXMsIHByb3BzKSk7XG4gICAgcmV0dXJuIHZhbHVlcztcbn07XG5cbnZhciBhcHBseURlZmF1bHRUcmFuc2l0aW9uID0gZnVuY3Rpb24gKHBvc2UsIGtleSwgZGVmYXVsdFRyYW5zaXRpb25zKSB7XG4gICAgcmV0dXJuIF9fYXNzaWduKHt9LCBwb3NlLCB7IHRyYW5zaXRpb246IGRlZmF1bHRUcmFuc2l0aW9ucy5oYXMoa2V5KSA/IGRlZmF1bHRUcmFuc2l0aW9ucy5nZXQoa2V5KSA6IGRlZmF1bHRUcmFuc2l0aW9ucy5nZXQoJ2RlZmF1bHQnKSB9KTtcbn07XG52YXIgZ2VuZXJhdGVUcmFuc2l0aW9ucyA9IGZ1bmN0aW9uIChwb3NlcywgZGVmYXVsdFRyYW5zaXRpb25zKSB7XG4gICAgT2JqZWN0LmtleXMocG9zZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgcG9zZSA9IHBvc2VzW2tleV07XG4gICAgICAgIGludmFyaWFudCh0eXBlb2YgcG9zZSA9PT0gJ29iamVjdCcsIFwiUG9zZSAnXCIgKyBrZXkgKyBcIicgaXMgb2YgaW52YWxpZCB0eXBlLiBBbGwgcG9zZXMgc2hvdWxkIGJlIG9iamVjdHMuXCIpO1xuICAgICAgICBwb3Nlc1trZXldID0gcG9zZS50cmFuc2l0aW9uICE9PSB1bmRlZmluZWQgPyBwb3NlIDogYXBwbHlEZWZhdWx0VHJhbnNpdGlvbihwb3NlLCBrZXksIGRlZmF1bHRUcmFuc2l0aW9ucyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHBvc2VzO1xufTtcblxudmFyIHNvcnRCeVJldmVyc2VQcmlvcml0eSA9IGZ1bmN0aW9uIChwcmlvcml0eU9yZGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHZhciBhUCA9IHByaW9yaXR5T3JkZXIuaW5kZXhPZihhKTtcbiAgICAgICAgdmFyIGJQID0gcHJpb3JpdHlPcmRlci5pbmRleE9mKGIpO1xuICAgICAgICBpZiAoYVAgPT09IC0xICYmIGJQICE9PSAtMSkgcmV0dXJuIC0xO1xuICAgICAgICBpZiAoYVAgIT09IC0xICYmIGJQID09PSAtMSkgcmV0dXJuIDE7XG4gICAgICAgIHJldHVybiBhUCAtIGJQO1xuICAgIH07XG59O1xuXG52YXIgcG9zZUZhY3RvcnkgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgZ2V0RGVmYXVsdFByb3BzID0gX2EuZ2V0RGVmYXVsdFByb3BzLFxuICAgICAgICBkZWZhdWx0VHJhbnNpdGlvbnMgPSBfYS5kZWZhdWx0VHJhbnNpdGlvbnMsXG4gICAgICAgIGJpbmRPbkNoYW5nZSA9IF9hLmJpbmRPbkNoYW5nZSxcbiAgICAgICAgc3RhcnRBY3Rpb24gPSBfYS5zdGFydEFjdGlvbixcbiAgICAgICAgc3RvcEFjdGlvbiA9IF9hLnN0b3BBY3Rpb24sXG4gICAgICAgIHJlYWRWYWx1ZSA9IF9hLnJlYWRWYWx1ZSxcbiAgICAgICAgcmVhZFZhbHVlRnJvbVNvdXJjZSA9IF9hLnJlYWRWYWx1ZUZyb21Tb3VyY2UsXG4gICAgICAgIHJlc29sdmVUYXJnZXQgPSBfYS5yZXNvbHZlVGFyZ2V0LFxuICAgICAgICBzZXRWYWx1ZSA9IF9hLnNldFZhbHVlLFxuICAgICAgICBzZXRWYWx1ZU5hdGl2ZSA9IF9hLnNldFZhbHVlTmF0aXZlLFxuICAgICAgICBjcmVhdGVWYWx1ZSA9IF9hLmNyZWF0ZVZhbHVlLFxuICAgICAgICBjb252ZXJ0VmFsdWUgPSBfYS5jb252ZXJ0VmFsdWUsXG4gICAgICAgIGdldEluc3RhbnRUcmFuc2l0aW9uID0gX2EuZ2V0SW5zdGFudFRyYW5zaXRpb24sXG4gICAgICAgIGdldFRyYW5zaXRpb25Qcm9wcyA9IF9hLmdldFRyYW5zaXRpb25Qcm9wcyxcbiAgICAgICAgYWRkQWN0aW9uRGVsYXkgPSBfYS5hZGRBY3Rpb25EZWxheSxcbiAgICAgICAgc2VsZWN0VmFsdWVUb1JlYWQgPSBfYS5zZWxlY3RWYWx1ZVRvUmVhZCxcbiAgICAgICAgY29udmVydFRyYW5zaXRpb25EZWZpbml0aW9uID0gX2EuY29udmVydFRyYW5zaXRpb25EZWZpbml0aW9uLFxuICAgICAgICB0cmFuc2Zvcm1Qb3NlID0gX2EudHJhbnNmb3JtUG9zZSxcbiAgICAgICAgcG9zZVByaW9yaXR5ID0gX2EucG9zZVByaW9yaXR5LFxuICAgICAgICBmb3JjZVJlbmRlciA9IF9hLmZvcmNlUmVuZGVyLFxuICAgICAgICBleHRlbmRBUEkgPSBfYS5leHRlbmRBUEk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgdmFyIHBhcmVudFZhbHVlcyA9IGNvbmZpZy5wYXJlbnRWYWx1ZXMsXG4gICAgICAgICAgICBfYSA9IGNvbmZpZy5hbmNlc3RvclZhbHVlcyxcbiAgICAgICAgICAgIGFuY2VzdG9yVmFsdWVzID0gX2EgPT09IHZvaWQgMCA/IFtdIDogX2E7XG4gICAgICAgIGlmIChwYXJlbnRWYWx1ZXMpIGFuY2VzdG9yVmFsdWVzLnVuc2hpZnQoeyB2YWx1ZXM6IHBhcmVudFZhbHVlcyB9KTtcbiAgICAgICAgdmFyIGFjdGl2ZUFjdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHZhciBhY3RpdmVQb3NlcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gbmV3IFNldCgpO1xuICAgICAgICB2YXIgcG9zZXMgPSBnZW5lcmF0ZVRyYW5zaXRpb25zKHNlbGVjdFBvc2VzKGNvbmZpZyksIGRlZmF1bHRUcmFuc2l0aW9ucyk7XG4gICAgICAgIHZhciBfYiA9IGNvbmZpZy5wcm9wcyxcbiAgICAgICAgICAgIHByb3BzID0gX2IgPT09IHZvaWQgMCA/IHt9IDogX2I7XG4gICAgICAgIGlmIChnZXREZWZhdWx0UHJvcHMpIHByb3BzID0gX19hc3NpZ24oe30sIGdldERlZmF1bHRQcm9wcyhjb25maWcpLCBwcm9wcyk7XG4gICAgICAgIHZhciBwYXNzaXZlID0gY29uZmlnLnBhc3NpdmUsXG4gICAgICAgICAgICB1c2VyU2V0VmFsdWVzID0gY29uZmlnLnZhbHVlcyxcbiAgICAgICAgICAgIF9jID0gY29uZmlnLmluaXRpYWxQb3NlLFxuICAgICAgICAgICAgaW5pdGlhbFBvc2UgPSBfYyA9PT0gdm9pZCAwID8gREVGQVVMVF9JTklUSUFMX1BPU0UgOiBfYztcbiAgICAgICAgdmFyIHZhbHVlcyA9IGNyZWF0ZVZhbHVlTWFwKHtcbiAgICAgICAgICAgIHBvc2VzOiBwb3NlcyxcbiAgICAgICAgICAgIHBhc3NpdmU6IHBhc3NpdmUsXG4gICAgICAgICAgICBhbmNlc3RvclZhbHVlczogYW5jZXN0b3JWYWx1ZXMsXG4gICAgICAgICAgICByZWFkVmFsdWU6IHJlYWRWYWx1ZSxcbiAgICAgICAgICAgIHNldFZhbHVlTmF0aXZlOiBzZXRWYWx1ZU5hdGl2ZSxcbiAgICAgICAgICAgIGNyZWF0ZVZhbHVlOiBjcmVhdGVWYWx1ZSxcbiAgICAgICAgICAgIGNvbnZlcnRWYWx1ZTogY29udmVydFZhbHVlLFxuICAgICAgICAgICAgcmVhZFZhbHVlRnJvbVNvdXJjZTogcmVhZFZhbHVlRnJvbVNvdXJjZSxcbiAgICAgICAgICAgIHVzZXJTZXRWYWx1ZXM6IHVzZXJTZXRWYWx1ZXMsXG4gICAgICAgICAgICBpbml0aWFsUG9zZTogaW5pdGlhbFBvc2UsXG4gICAgICAgICAgICBhY3RpdmVQb3NlczogYWN0aXZlUG9zZXMsXG4gICAgICAgICAgICBwcm9wczogcHJvcHNcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgICAgIGFjdGl2ZUFjdGlvbnM6IGFjdGl2ZUFjdGlvbnMsXG4gICAgICAgICAgICBhY3RpdmVQb3NlczogYWN0aXZlUG9zZXMsXG4gICAgICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW4sXG4gICAgICAgICAgICBwcm9wczogcHJvcHMsXG4gICAgICAgICAgICB2YWx1ZXM6IHZhbHVlc1xuICAgICAgICB9O1xuICAgICAgICB2YXIgb25DaGFuZ2UgPSBjb25maWcub25DaGFuZ2U7XG4gICAgICAgIGlmIChvbkNoYW5nZSkgT2JqZWN0LmtleXMob25DaGFuZ2UpLmZvckVhY2goYmluZE9uQ2hhbmdlKHZhbHVlcywgb25DaGFuZ2UpKTtcbiAgICAgICAgdmFyIHNldCA9IGNyZWF0ZVBvc2VTZXR0ZXIoe1xuICAgICAgICAgICAgc3RhdGU6IHN0YXRlLFxuICAgICAgICAgICAgcG9zZXM6IHBvc2VzLFxuICAgICAgICAgICAgZ2V0SW5zdGFudFRyYW5zaXRpb246IGdldEluc3RhbnRUcmFuc2l0aW9uLFxuICAgICAgICAgICAgZ2V0VHJhbnNpdGlvblByb3BzOiBnZXRUcmFuc2l0aW9uUHJvcHMsXG4gICAgICAgICAgICBjb252ZXJ0VHJhbnNpdGlvbkRlZmluaXRpb246IGNvbnZlcnRUcmFuc2l0aW9uRGVmaW5pdGlvbixcbiAgICAgICAgICAgIHNldFZhbHVlOiBzZXRWYWx1ZSxcbiAgICAgICAgICAgIHNldFZhbHVlTmF0aXZlOiBzZXRWYWx1ZU5hdGl2ZSxcbiAgICAgICAgICAgIHN0YXJ0QWN0aW9uOiBzdGFydEFjdGlvbixcbiAgICAgICAgICAgIHN0b3BBY3Rpb246IHN0b3BBY3Rpb24sXG4gICAgICAgICAgICByZXNvbHZlVGFyZ2V0OiByZXNvbHZlVGFyZ2V0LFxuICAgICAgICAgICAgYWRkQWN0aW9uRGVsYXk6IGFkZEFjdGlvbkRlbGF5LFxuICAgICAgICAgICAgdHJhbnNmb3JtUG9zZTogdHJhbnNmb3JtUG9zZSxcbiAgICAgICAgICAgIHBvc2VQcmlvcml0eTogcG9zZVByaW9yaXR5LFxuICAgICAgICAgICAgZm9yY2VSZW5kZXI6IGZvcmNlUmVuZGVyXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgaGFzID0gZnVuY3Rpb24gKHBvc2VOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gISFwb3Nlc1twb3NlTmFtZV07XG4gICAgICAgIH07XG4gICAgICAgIHZhciBhcGkgPSB7XG4gICAgICAgICAgICBzZXQ6IHNldCxcbiAgICAgICAgICAgIHVuc2V0OiBmdW5jdGlvbiAocG9zZU5hbWUsIHBvc2VQcm9wcykge1xuICAgICAgICAgICAgICAgIHZhciBwb3Nlc1RvU2V0ID0gW107XG4gICAgICAgICAgICAgICAgYWN0aXZlUG9zZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWVQb3Nlcykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zZUluZGV4ID0gdmFsdWVQb3Nlcy5pbmRleE9mKHBvc2VOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc2VJbmRleCA9PT0gLTEpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRQb3NlID0gdmFsdWVQb3Nlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVQb3Nlcy5zcGxpY2UocG9zZUluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRQb3NlID0gdmFsdWVQb3Nlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRQb3NlID09PSBjdXJyZW50UG9zZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zZXNUb1NldC5pbmRleE9mKG5leHRQb3NlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2VzVG9TZXQucHVzaChuZXh0UG9zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uc1RvUmVzb2x2ZSA9IHBvc2VzVG9TZXQuc29ydChzb3J0QnlSZXZlcnNlUHJpb3JpdHkocG9zZVByaW9yaXR5KSkubWFwKGZ1bmN0aW9uIChwb3NlVG9TZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldChwb3NlVG9TZXQsIHBvc2VQcm9wcywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhbmltYXRpb25zVG9SZXNvbHZlLnB1c2goY2hpbGQudW5zZXQocG9zZU5hbWUpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoYW5pbWF0aW9uc1RvUmVzb2x2ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAodmFsdWVOYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlTmFtZSA/IHNlbGVjdFZhbHVlVG9SZWFkKHZhbHVlcy5nZXQodmFsdWVOYW1lKSkgOiBzZWxlY3RBbGxWYWx1ZXModmFsdWVzLCBzZWxlY3RWYWx1ZVRvUmVhZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGFzOiBoYXMsXG4gICAgICAgICAgICBzZXRQcm9wczogZnVuY3Rpb24gKG5ld1Byb3BzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnByb3BzID0gX19hc3NpZ24oe30sIHN0YXRlLnByb3BzLCBuZXdQcm9wcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZENoaWxkOiBmdW5jdGlvbiAoY2hpbGRDb25maWcsIGZhY3RvcnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBmYWN0b3J5KF9fYXNzaWduKHsgaW5pdGlhbFBvc2U6IGluaXRpYWxQb3NlIH0sIGNoaWxkQ29uZmlnLCB7IGFuY2VzdG9yVmFsdWVzOiBbeyBsYWJlbDogY29uZmlnLmxhYmVsLCB2YWx1ZXM6IHZhbHVlcyB9XS5jb25jYXQoYW5jZXN0b3JWYWx1ZXMpIH0pKTtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5hZGQoY2hpbGQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1vdmVDaGlsZDogZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkcmVuLmRlbGV0ZShjaGlsZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xlYXJDaGlsZHJlbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4uY2xlYXIoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlQWN0aW9ucy5mb3JFYWNoKHN0b3BBY3Rpb24pO1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBleHRlbmRBUEkoYXBpLCBzdGF0ZSwgY29uZmlnKTtcbiAgICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgcG9zZUZhY3Rvcnk7XG4iLCJpbXBvcnQgeyBzcHJpbmcsIHR3ZWVuLCBhY3Rpb24sIHBvaW50ZXIsIHRyYW5zZm9ybSwgZGVjYXksIGtleWZyYW1lcywgcGh5c2ljcywgdmFsdWUsIGNoYWluLCBkZWxheSwgbGlzdGVuLCBzdHlsZXIgfSBmcm9tICdwb3Btb3Rpb24nO1xuaW1wb3J0IHsgbGluZWFyLCBlYXNlSW4sIGVhc2VPdXQsIGVhc2VJbk91dCwgY2lyY0luLCBjaXJjT3V0LCBjaXJjSW5PdXQsIGJhY2tJbiwgYmFja091dCwgYmFja0luT3V0LCBhbnRpY2lwYXRlLCBjdWJpY0JlemllciB9IGZyb20gJ0Bwb3Btb3Rpb24vZWFzaW5nJztcbmltcG9ydCB7IHBlcmNlbnQsIG51bWJlciwgZGVncmVlcywgcHgsIHZ3LCB2aCB9IGZyb20gJ3N0eWxlLXZhbHVlLXR5cGVzJztcbmltcG9ydCBwb3NlRmFjdG9yeSBmcm9tICdwb3NlLWNvcmUnO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnaGV5LWxpc3Rlbic7XG5cbi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cbnZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuXG5mdW5jdGlvbiBfX3Jlc3QocywgZSkge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApIHRbcF0gPSBzW3BdO1xuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIikgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApIHRbcFtpXV0gPSBzW3BbaV1dO1xuICAgIHJldHVybiB0O1xufVxuXG52YXIgQm91bmRpbmdCb3hEaW1lbnNpb247XG4oZnVuY3Rpb24gKEJvdW5kaW5nQm94RGltZW5zaW9uKSB7XG4gICAgQm91bmRpbmdCb3hEaW1lbnNpb25bXCJ3aWR0aFwiXSA9IFwid2lkdGhcIjtcbiAgICBCb3VuZGluZ0JveERpbWVuc2lvbltcImhlaWdodFwiXSA9IFwiaGVpZ2h0XCI7XG4gICAgQm91bmRpbmdCb3hEaW1lbnNpb25bXCJsZWZ0XCJdID0gXCJsZWZ0XCI7XG4gICAgQm91bmRpbmdCb3hEaW1lbnNpb25bXCJyaWdodFwiXSA9IFwicmlnaHRcIjtcbiAgICBCb3VuZGluZ0JveERpbWVuc2lvbltcInRvcFwiXSA9IFwidG9wXCI7XG4gICAgQm91bmRpbmdCb3hEaW1lbnNpb25bXCJib3R0b21cIl0gPSBcImJvdHRvbVwiO1xufSkoQm91bmRpbmdCb3hEaW1lbnNpb24gfHwgKEJvdW5kaW5nQm94RGltZW5zaW9uID0ge30pKTtcblxudmFyIG1lYXN1cmVXaXRob3V0VHJhbnNmb3JtID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICB2YXIgdHJhbnNmb3JtJCQxID0gZWxlbWVudC5zdHlsZS50cmFuc2Zvcm07XG4gICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbiAgICB2YXIgYmJveCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm0kJDE7XG4gICAgcmV0dXJuIGJib3g7XG59O1xudmFyIHJlc29sdmVQcm9wID0gZnVuY3Rpb24gKHRhcmdldCwgcHJvcHMpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJyA/IHRhcmdldChwcm9wcykgOiB0YXJnZXQ7XG59O1xuXG52YXIgaW50ZXJwb2xhdGUgPSB0cmFuc2Zvcm0uaW50ZXJwb2xhdGU7XG52YXIgc2luZ2xlQXhpc1BvaW50ZXIgPSBmdW5jdGlvbiAoYXhpcykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZnJvbSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBwb2ludGVyKChfYSA9IHt9LCBfYVtheGlzXSA9IHR5cGVvZiBmcm9tID09PSAnc3RyaW5nJyA/IHBhcnNlRmxvYXQoZnJvbSkgOiBmcm9tLCBfYSkpLnBpcGUoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIHJldHVybiB2W2F4aXNdO1xuICAgICAgICB9KTtcbiAgICB9O1xufTtcbnZhciBwb2ludGVyWCA9IC8qI19fUFVSRV9fKi9zaW5nbGVBeGlzUG9pbnRlcigneCcpO1xudmFyIHBvaW50ZXJZID0gLyojX19QVVJFX18qL3NpbmdsZUF4aXNQb2ludGVyKCd5Jyk7XG52YXIgY3JlYXRlUG9pbnRlciA9IGZ1bmN0aW9uIChheGlzUG9pbnRlckNyZWF0b3IsIG1pbiwgbWF4LCBtZWFzdXJlbWVudCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodHJhbnNpdGlvblByb3BzKSB7XG4gICAgICAgIHZhciBmcm9tID0gdHJhbnNpdGlvblByb3BzLmZyb20sXG4gICAgICAgICAgICB0eXBlID0gdHJhbnNpdGlvblByb3BzLnR5cGUsXG4gICAgICAgICAgICBkaW1lbnNpb25zID0gdHJhbnNpdGlvblByb3BzLmRpbWVuc2lvbnMsXG4gICAgICAgICAgICBkcmFnQm91bmRzID0gdHJhbnNpdGlvblByb3BzLmRyYWdCb3VuZHM7XG4gICAgICAgIHZhciBheGlzUG9pbnRlciA9IGF4aXNQb2ludGVyQ3JlYXRvcihkaW1lbnNpb25zLm1lYXN1cmVtZW50QXNQaXhlbHMobWVhc3VyZW1lbnQsIGZyb20sIHR5cGUpKTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybVF1ZXVlID0gW107XG4gICAgICAgIGlmIChkcmFnQm91bmRzKSB7XG4gICAgICAgICAgICB2YXIgcmVzb2x2ZWREcmFnQm91bmRzXzEgPSByZXNvbHZlUHJvcChkcmFnQm91bmRzLCB0cmFuc2l0aW9uUHJvcHMpO1xuICAgICAgICAgICAgaWYgKHJlc29sdmVkRHJhZ0JvdW5kc18xW21pbl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybVF1ZXVlLnB1c2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KHYsIGRpbWVuc2lvbnMubWVhc3VyZW1lbnRBc1BpeGVscyhtZWFzdXJlbWVudCwgcmVzb2x2ZWREcmFnQm91bmRzXzFbbWluXSwgdHlwZSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc29sdmVkRHJhZ0JvdW5kc18xW21heF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybVF1ZXVlLnB1c2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKHYsIGRpbWVuc2lvbnMubWVhc3VyZW1lbnRBc1BpeGVscyhtZWFzdXJlbWVudCwgcmVzb2x2ZWREcmFnQm91bmRzXzFbbWF4XSwgdHlwZSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSBwZXJjZW50KSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm1RdWV1ZS5wdXNoKGludGVycG9sYXRlKFswLCBkaW1lbnNpb25zLmdldChtZWFzdXJlbWVudCldLCBbMCwgMTAwXSwgeyBjbGFtcDogZmFsc2UgfSksIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHYgKyAnJSc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtUXVldWUubGVuZ3RoID8gYXhpc1BvaW50ZXIucGlwZS5hcHBseShheGlzUG9pbnRlciwgdHJhbnNmb3JtUXVldWUpIDogYXhpc1BvaW50ZXI7XG4gICAgfTtcbn07XG52YXIganVzdCA9IGZ1bmN0aW9uIChmcm9tKSB7XG4gICAgcmV0dXJuIGFjdGlvbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHVwZGF0ZSA9IF9hLnVwZGF0ZSxcbiAgICAgICAgICAgIGNvbXBsZXRlID0gX2EuY29tcGxldGU7XG4gICAgICAgIHVwZGF0ZShmcm9tKTtcbiAgICAgICAgY29tcGxldGUoKTtcbiAgICB9KTtcbn07XG52YXIgdW5kZXJEYW1wZWRTcHJpbmcgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgZnJvbSA9IF9hLmZyb20sXG4gICAgICAgIHZlbG9jaXR5ID0gX2EudmVsb2NpdHksXG4gICAgICAgIHRvID0gX2EudG87XG4gICAgcmV0dXJuIHNwcmluZyh7XG4gICAgICAgIGZyb206IGZyb20sXG4gICAgICAgIHRvOiB0byxcbiAgICAgICAgdmVsb2NpdHk6IHZlbG9jaXR5LFxuICAgICAgICBzdGlmZm5lc3M6IDUwMCxcbiAgICAgICAgZGFtcGluZzogMjUsXG4gICAgICAgIHJlc3REZWx0YTogMC41LFxuICAgICAgICByZXN0U3BlZWQ6IDEwXG4gICAgfSk7XG59O1xudmFyIG92ZXJEYW1wZWRTcHJpbmcgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgZnJvbSA9IF9hLmZyb20sXG4gICAgICAgIHZlbG9jaXR5ID0gX2EudmVsb2NpdHksXG4gICAgICAgIHRvID0gX2EudG87XG4gICAgcmV0dXJuIHNwcmluZyh7IGZyb206IGZyb20sIHRvOiB0bywgdmVsb2NpdHk6IHZlbG9jaXR5LCBzdGlmZm5lc3M6IDcwMCwgZGFtcGluZzogdG8gPT09IDAgPyAxMDAgOiAzNSB9KTtcbn07XG52YXIgbGluZWFyVHdlZW4gPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgZnJvbSA9IF9hLmZyb20sXG4gICAgICAgIHRvID0gX2EudG87XG4gICAgcmV0dXJuIHR3ZWVuKHsgZnJvbTogZnJvbSwgdG86IHRvLCBlYXNlOiBsaW5lYXIgfSk7XG59O1xudmFyIGludGVsbGlnZW50VHJhbnNpdGlvbiA9IHtcbiAgICB4OiB1bmRlckRhbXBlZFNwcmluZyxcbiAgICB5OiB1bmRlckRhbXBlZFNwcmluZyxcbiAgICB6OiB1bmRlckRhbXBlZFNwcmluZyxcbiAgICByb3RhdGU6IHVuZGVyRGFtcGVkU3ByaW5nLFxuICAgIHJvdGF0ZVg6IHVuZGVyRGFtcGVkU3ByaW5nLFxuICAgIHJvdGF0ZVk6IHVuZGVyRGFtcGVkU3ByaW5nLFxuICAgIHJvdGF0ZVo6IHVuZGVyRGFtcGVkU3ByaW5nLFxuICAgIHNjYWxlWDogb3ZlckRhbXBlZFNwcmluZyxcbiAgICBzY2FsZVk6IG92ZXJEYW1wZWRTcHJpbmcsXG4gICAgc2NhbGU6IG92ZXJEYW1wZWRTcHJpbmcsXG4gICAgb3BhY2l0eTogbGluZWFyVHdlZW4sXG4gICAgZGVmYXVsdDogdHdlZW5cbn07XG52YXIgZHJhZ0FjdGlvbiA9IC8qI19fUFVSRV9fKi9fX2Fzc2lnbih7fSwgaW50ZWxsaWdlbnRUcmFuc2l0aW9uLCB7IHg6IC8qI19fUFVSRV9fKi9jcmVhdGVQb2ludGVyKHBvaW50ZXJYLCAnbGVmdCcsICdyaWdodCcsIEJvdW5kaW5nQm94RGltZW5zaW9uLndpZHRoKSwgeTogLyojX19QVVJFX18qL2NyZWF0ZVBvaW50ZXIocG9pbnRlclksICd0b3AnLCAnYm90dG9tJywgQm91bmRpbmdCb3hEaW1lbnNpb24uaGVpZ2h0KSB9KTtcbnZhciBqdXN0QXhpcyA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBmcm9tID0gX2EuZnJvbTtcbiAgICByZXR1cm4ganVzdChmcm9tKTtcbn07XG52YXIgaW50ZWxsaWdlbnREcmFnRW5kID0gLyojX19QVVJFX18qL19fYXNzaWduKHt9LCBpbnRlbGxpZ2VudFRyYW5zaXRpb24sIHsgeDoganVzdEF4aXMsIHk6IGp1c3RBeGlzIH0pO1xudmFyIGRlZmF1bHRUcmFuc2l0aW9ucyA9IC8qI19fUFVSRV9fKi9uZXcgTWFwKFtbJ2RlZmF1bHQnLCBpbnRlbGxpZ2VudFRyYW5zaXRpb25dLCBbJ2RyYWcnLCBkcmFnQWN0aW9uXSwgWydkcmFnRW5kJywgaW50ZWxsaWdlbnREcmFnRW5kXV0pO1xuXG52YXIgYW5pbWF0aW9uTG9va3VwID0ge1xuICAgIHR3ZWVuOiB0d2VlbixcbiAgICBzcHJpbmc6IHNwcmluZyxcbiAgICBkZWNheTogZGVjYXksXG4gICAga2V5ZnJhbWVzOiBrZXlmcmFtZXMsXG4gICAgcGh5c2ljczogcGh5c2ljc1xufTtcbnZhciBlYXNpbmdMb29rdXAgPSB7XG4gICAgbGluZWFyOiBsaW5lYXIsXG4gICAgZWFzZUluOiBlYXNlSW4sXG4gICAgZWFzZU91dDogZWFzZU91dCxcbiAgICBlYXNlSW5PdXQ6IGVhc2VJbk91dCxcbiAgICBjaXJjSW46IGNpcmNJbixcbiAgICBjaXJjT3V0OiBjaXJjT3V0LFxuICAgIGNpcmNJbk91dDogY2lyY0luT3V0LFxuICAgIGJhY2tJbjogYmFja0luLFxuICAgIGJhY2tPdXQ6IGJhY2tPdXQsXG4gICAgYmFja0luT3V0OiBiYWNrSW5PdXQsXG4gICAgYW50aWNpcGF0ZTogYW50aWNpcGF0ZVxufTtcblxudmFyIGF1dG8gPSB7XG4gICAgdGVzdDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIHYgPT09ICdhdXRvJztcbiAgICB9LFxuICAgIHBhcnNlOiBmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gdjtcbiAgICB9XG59O1xudmFyIHZhbHVlVHlwZVRlc3RzID0gW251bWJlciwgZGVncmVlcywgcGVyY2VudCwgcHgsIHZ3LCB2aCwgYXV0b107XG52YXIgdGVzdFZhbHVlVHlwZSA9IGZ1bmN0aW9uICh2KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgIHJldHVybiB0eXBlLnRlc3Qodik7XG4gICAgfTtcbn07XG52YXIgZ2V0VmFsdWVUeXBlID0gZnVuY3Rpb24gKHYpIHtcbiAgICByZXR1cm4gdmFsdWVUeXBlVGVzdHMuZmluZCh0ZXN0VmFsdWVUeXBlKHYpKTtcbn07XG5cbnZhciBjcmVhdGVQYXNzaXZlVmFsdWUgPSBmdW5jdGlvbiAoaW5pdCwgcGFyZW50LCB0cmFuc2Zvcm0kJDEpIHtcbiAgICB2YXIgcmF3ID0gdmFsdWUodHJhbnNmb3JtJCQxKGluaXQpKTtcbiAgICBwYXJlbnQucmF3LnN1YnNjcmliZShmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gcmF3LnVwZGF0ZSh0cmFuc2Zvcm0kJDEodikpO1xuICAgIH0pO1xuICAgIHJldHVybiB7IHJhdzogcmF3IH07XG59O1xudmFyIGNyZWF0ZVZhbHVlID0gZnVuY3Rpb24gKGluaXQpIHtcbiAgICB2YXIgdHlwZSA9IGdldFZhbHVlVHlwZShpbml0KTtcbiAgICB2YXIgcmF3ID0gdmFsdWUoaW5pdCk7XG4gICAgcmV0dXJuIHsgcmF3OiByYXcsIHR5cGU6IHR5cGUgfTtcbn07XG52YXIgYWRkQWN0aW9uRGVsYXkgPSBmdW5jdGlvbiAoZGVsYXkkJDEsIHRyYW5zaXRpb24pIHtcbiAgICBpZiAoZGVsYXkkJDEgPT09IHZvaWQgMCkge1xuICAgICAgICBkZWxheSQkMSA9IDA7XG4gICAgfVxuICAgIHJldHVybiBjaGFpbihkZWxheShkZWxheSQkMSksIHRyYW5zaXRpb24pO1xufTtcbnZhciBpc0N1YmljQmV6aWVyQXJncyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBhcmdzWzBdID09PSAnbnVtYmVyJztcbn07XG52YXIgZ2V0QWN0aW9uID0gZnVuY3Rpb24gKHYsIF9hLCBfYikge1xuICAgIHZhciBmcm9tID0gX2IuZnJvbSxcbiAgICAgICAgdG8gPSBfYi50byxcbiAgICAgICAgdmVsb2NpdHkgPSBfYi52ZWxvY2l0eTtcbiAgICB2YXIgX2MgPSBfYS50eXBlLFxuICAgICAgICB0eXBlID0gX2MgPT09IHZvaWQgMCA/ICd0d2VlbicgOiBfYyxcbiAgICAgICAgZGVmaW5lZEVhc2UgPSBfYS5lYXNlLFxuICAgICAgICBkZWYgPSBfX3Jlc3QoX2EsIFtcInR5cGVcIiwgXCJlYXNlXCJdKTtcbiAgICBpbnZhcmlhbnQoYW5pbWF0aW9uTG9va3VwW3R5cGVdICE9PSB1bmRlZmluZWQsIFwiSW52YWxpZCB0cmFuc2l0aW9uIHR5cGUgJ1wiICsgdHlwZSArIFwiJy4gVmFsaWQgdHJhbnNpdGlvbiB0eXBlcyBhcmU6IHR3ZWVuLCBzcHJpbmcsIGRlY2F5LCBwaHlzaWNzIGFuZCBrZXlmcmFtZXMuXCIpO1xuICAgIHZhciBlYXNlO1xuICAgIGlmICh0eXBlID09PSAndHdlZW4nKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZGVmaW5lZEVhc2UgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGVmaW5lZEVhc2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgaW52YXJpYW50KGVhc2luZ0xvb2t1cFtkZWZpbmVkRWFzZV0gIT09IHVuZGVmaW5lZCwgXCJJbnZhbGlkIGVhc2luZyB0eXBlICdcIiArIGRlZmluZWRFYXNlICsgXCInLiBwb3Btb3Rpb24uaW8vcG9zZS9hcGkvY29uZmlnXCIpO1xuICAgICAgICAgICAgICAgIGVhc2UgPSBlYXNpbmdMb29rdXBbZGVmaW5lZEVhc2VdO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGRlZmluZWRFYXNlKSAmJiBpc0N1YmljQmV6aWVyQXJncyhkZWZpbmVkRWFzZSkpIHtcbiAgICAgICAgICAgICAgICBpbnZhcmlhbnQoZGVmaW5lZEVhc2UubGVuZ3RoID09PSA0LCBcIkN1YmljIGJlemllciBhcnJheXMgbXVzdCBjb250YWluIGZvdXIgbnVtZXJpY2FsIHZhbHVlcy5cIik7XG4gICAgICAgICAgICAgICAgdmFyIHgxID0gZGVmaW5lZEVhc2VbMF0sXG4gICAgICAgICAgICAgICAgICAgIHkxID0gZGVmaW5lZEVhc2VbMV0sXG4gICAgICAgICAgICAgICAgICAgIHgyID0gZGVmaW5lZEVhc2VbMl0sXG4gICAgICAgICAgICAgICAgICAgIHkyID0gZGVmaW5lZEVhc2VbM107XG4gICAgICAgICAgICAgICAgZWFzZSA9IGN1YmljQmV6aWVyKHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlYXNlID0gZWFzZSB8fCBkZWZpbmVkRWFzZTtcbiAgICB2YXIgYmFzZVByb3BzID0gdHlwZSAhPT0gJ2tleWZyYW1lcycgPyB7XG4gICAgICAgIGZyb206IGZyb20sXG4gICAgICAgIHRvOiB0byxcbiAgICAgICAgdmVsb2NpdHk6IHZlbG9jaXR5LFxuICAgICAgICBlYXNlOiBlYXNlXG4gICAgfSA6IHsgZWFzZTogZWFzZSB9O1xuICAgIHJldHVybiBhbmltYXRpb25Mb29rdXBbdHlwZV0oX19hc3NpZ24oe30sIGJhc2VQcm9wcywgZGVmKSk7XG59O1xudmFyIGlzQWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbiQkMSkge1xuICAgIHJldHVybiB0eXBlb2YgYWN0aW9uJCQxLnN0YXJ0ICE9PSAndW5kZWZpbmVkJztcbn07XG52YXIgcG9zZSA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciB0cmFuc2Zvcm1Qb3NlID0gX2EudHJhbnNmb3JtUG9zZSxcbiAgICAgICAgYWRkTGlzdGVuZXJUb1ZhbHVlID0gX2EuYWRkTGlzdGVuZXJUb1ZhbHVlLFxuICAgICAgICBleHRlbmRBUEkgPSBfYS5leHRlbmRBUEksXG4gICAgICAgIHJlYWRWYWx1ZUZyb21Tb3VyY2UgPSBfYS5yZWFkVmFsdWVGcm9tU291cmNlLFxuICAgICAgICBwb3NlUHJpb3JpdHkgPSBfYS5wb3NlUHJpb3JpdHksXG4gICAgICAgIHNldFZhbHVlTmF0aXZlID0gX2Euc2V0VmFsdWVOYXRpdmU7XG4gICAgcmV0dXJuIHBvc2VGYWN0b3J5KHtcbiAgICAgICAgYmluZE9uQ2hhbmdlOiBmdW5jdGlvbiAodmFsdWVzLCBvbkNoYW5nZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlcy5oYXMoa2V5KSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHZhciByYXcgPSB2YWx1ZXMuZ2V0KGtleSkucmF3O1xuICAgICAgICAgICAgICAgIHJhdy5zdWJzY3JpYmUob25DaGFuZ2Vba2V5XSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICByZWFkVmFsdWU6IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHJhdyA9IF9hLnJhdztcbiAgICAgICAgICAgIHJldHVybiByYXcuZ2V0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFZhbHVlOiBmdW5jdGlvbiAoX2EsIHRvKSB7XG4gICAgICAgICAgICB2YXIgcmF3ID0gX2EucmF3O1xuICAgICAgICAgICAgcmV0dXJuIHJhdy51cGRhdGUodG8pO1xuICAgICAgICB9LFxuICAgICAgICBjcmVhdGVWYWx1ZTogZnVuY3Rpb24gKGluaXQsIGtleSwgX2EsIF9iKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudFN0eWxlciA9IF9hLmVsZW1lbnRTdHlsZXI7XG4gICAgICAgICAgICB2YXIgX2MgPSBfYiA9PT0gdm9pZCAwID8ge30gOiBfYixcbiAgICAgICAgICAgICAgICBwYXNzaXZlUGFyZW50ID0gX2MucGFzc2l2ZVBhcmVudCxcbiAgICAgICAgICAgICAgICBwYXNzaXZlUHJvcHMgPSBfYy5wYXNzaXZlUHJvcHM7XG4gICAgICAgICAgICB2YXIgdmFsID0gcGFzc2l2ZVBhcmVudCA/IGNyZWF0ZVBhc3NpdmVWYWx1ZShpbml0LCBwYXNzaXZlUGFyZW50LCBwYXNzaXZlUHJvcHMpIDogY3JlYXRlVmFsdWUoaW5pdCk7XG4gICAgICAgICAgICB2YWwucmF3LnN1YnNjcmliZShhZGRMaXN0ZW5lclRvVmFsdWUoa2V5LCBlbGVtZW50U3R5bGVyKSk7XG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9LFxuICAgICAgICBjb252ZXJ0VmFsdWU6IGZ1bmN0aW9uIChyYXcsIGtleSwgX2EpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50U3R5bGVyID0gX2EuZWxlbWVudFN0eWxlcjtcbiAgICAgICAgICAgIHJhdy5zdWJzY3JpYmUoYWRkTGlzdGVuZXJUb1ZhbHVlKGtleSwgZWxlbWVudFN0eWxlcikpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByYXc6IHJhdyxcbiAgICAgICAgICAgICAgICB0eXBlOiBnZXRWYWx1ZVR5cGUocmF3LmdldCgpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0VHJhbnNpdGlvblByb3BzOiBmdW5jdGlvbiAoX2EsIHRvKSB7XG4gICAgICAgICAgICB2YXIgcmF3ID0gX2EucmF3LFxuICAgICAgICAgICAgICAgIHR5cGUgPSBfYS50eXBlO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmcm9tOiByYXcuZ2V0KCksXG4gICAgICAgICAgICAgICAgdmVsb2NpdHk6IHJhdy5nZXRWZWxvY2l0eSgpLFxuICAgICAgICAgICAgICAgIHRvOiB0byxcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlVGFyZ2V0OiBmdW5jdGlvbiAoXywgdG8pIHtcbiAgICAgICAgICAgIHJldHVybiB0bztcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0VmFsdWVUb1JlYWQ6IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHJhdyA9IF9hLnJhdztcbiAgICAgICAgICAgIHJldHVybiByYXc7XG4gICAgICAgIH0sXG4gICAgICAgIHN0YXJ0QWN0aW9uOiBmdW5jdGlvbiAoX2EsIGFjdGlvbiQkMSwgY29tcGxldGUpIHtcbiAgICAgICAgICAgIHZhciByYXcgPSBfYS5yYXc7XG4gICAgICAgICAgICB2YXIgcmVhY3Rpb24gPSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmF3LnVwZGF0ZSh2KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBjb21wbGV0ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBhY3Rpb24kJDEuc3RhcnQocmVhY3Rpb24pO1xuICAgICAgICB9LFxuICAgICAgICBzdG9wQWN0aW9uOiBmdW5jdGlvbiAoYWN0aW9uJCQxKSB7XG4gICAgICAgICAgICByZXR1cm4gYWN0aW9uJCQxLnN0b3AoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0SW5zdGFudFRyYW5zaXRpb246IGZ1bmN0aW9uIChfLCBfYSkge1xuICAgICAgICAgICAgdmFyIHRvID0gX2EudG87XG4gICAgICAgICAgICByZXR1cm4ganVzdCh0byk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbnZlcnRUcmFuc2l0aW9uRGVmaW5pdGlvbjogZnVuY3Rpb24gKHZhbCwgZGVmLCBwcm9wcykge1xuICAgICAgICAgICAgaWYgKGlzQWN0aW9uKGRlZikpIHJldHVybiBkZWY7XG4gICAgICAgICAgICB2YXIgZGVsYXkkJDEgPSBkZWYuZGVsYXksXG4gICAgICAgICAgICAgICAgbWluID0gZGVmLm1pbixcbiAgICAgICAgICAgICAgICBtYXggPSBkZWYubWF4LFxuICAgICAgICAgICAgICAgIHJvdW5kID0gZGVmLnJvdW5kLFxuICAgICAgICAgICAgICAgIHJlbWFpbmluZ0RlZiA9IF9fcmVzdChkZWYsIFtcImRlbGF5XCIsIFwibWluXCIsIFwibWF4XCIsIFwicm91bmRcIl0pO1xuICAgICAgICAgICAgdmFyIGFjdGlvbiQkMSA9IGdldEFjdGlvbih2YWwsIHJlbWFpbmluZ0RlZiwgcHJvcHMpO1xuICAgICAgICAgICAgdmFyIG91dHB1dFBpcGUgPSBbXTtcbiAgICAgICAgICAgIGlmIChkZWxheSQkMSkgYWN0aW9uJCQxID0gYWRkQWN0aW9uRGVsYXkoZGVsYXkkJDEsIGFjdGlvbiQkMSk7XG4gICAgICAgICAgICBpZiAobWluICE9PSB1bmRlZmluZWQpIG91dHB1dFBpcGUucHVzaChmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCh2LCBtaW4pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAobWF4ICE9PSB1bmRlZmluZWQpIG91dHB1dFBpcGUucHVzaChmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbih2LCBtYXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocm91bmQpIG91dHB1dFBpcGUucHVzaChNYXRoLnJvdW5kKTtcbiAgICAgICAgICAgIHJldHVybiBvdXRwdXRQaXBlLmxlbmd0aCA/IGFjdGlvbiQkMS5waXBlLmFwcGx5KGFjdGlvbiQkMSwgb3V0cHV0UGlwZSkgOiBhY3Rpb24kJDE7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFZhbHVlTmF0aXZlOiBzZXRWYWx1ZU5hdGl2ZSxcbiAgICAgICAgYWRkQWN0aW9uRGVsYXk6IGFkZEFjdGlvbkRlbGF5LFxuICAgICAgICBkZWZhdWx0VHJhbnNpdGlvbnM6IGRlZmF1bHRUcmFuc2l0aW9ucyxcbiAgICAgICAgdHJhbnNmb3JtUG9zZTogdHJhbnNmb3JtUG9zZSxcbiAgICAgICAgcmVhZFZhbHVlRnJvbVNvdXJjZTogcmVhZFZhbHVlRnJvbVNvdXJjZSxcbiAgICAgICAgcG9zZVByaW9yaXR5OiBwb3NlUHJpb3JpdHksXG4gICAgICAgIGV4dGVuZEFQSTogZXh0ZW5kQVBJXG4gICAgfSk7XG59O1xuXG52YXIgY3JlYXRlRGltZW5zaW9ucyA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgdmFyIGhhc01lYXN1cmVkID0gZmFsc2U7XG4gICAgdmFyIGN1cnJlbnQgPSB7XG4gICAgICAgIHdpZHRoOiAwLFxuICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICByaWdodDogMFxuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAobWVhc3VyZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBtZWFzdXJlbWVudCA/IGN1cnJlbnRbbWVhc3VyZW1lbnRdIDogY3VycmVudDtcbiAgICAgICAgfSxcbiAgICAgICAgbWVhc3VyZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY3VycmVudCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBoYXNNZWFzdXJlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgICAgfSxcbiAgICAgICAgbWVhc3VyZW1lbnRBc1BpeGVsczogZnVuY3Rpb24gKG1lYXN1cmVtZW50LCB2YWx1ZSQkMSwgdHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGUgPT09IHBlcmNlbnQgPyAodHlwZW9mIHZhbHVlJCQxID09PSAnc3RyaW5nJyA/IHBhcnNlRmxvYXQodmFsdWUkJDEpIDogdmFsdWUkJDEpIC8gMTAwICogY3VycmVudFttZWFzdXJlbWVudF0gOiB2YWx1ZSQkMTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gaGFzTWVhc3VyZWQ7XG4gICAgICAgIH1cbiAgICB9O1xufTtcblxudmFyIG1ha2VVSUV2ZW50QXBwbGljYXRvciA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBzdGFydEV2ZW50cyA9IF9hLnN0YXJ0RXZlbnRzLFxuICAgICAgICBlbmRFdmVudHMgPSBfYS5lbmRFdmVudHMsXG4gICAgICAgIHN0YXJ0UG9zZSA9IF9hLnN0YXJ0UG9zZSxcbiAgICAgICAgZW5kUG9zZSA9IF9hLmVuZFBvc2UsXG4gICAgICAgIHN0YXJ0Q2FsbGJhY2sgPSBfYS5zdGFydENhbGxiYWNrLFxuICAgICAgICBlbmRDYWxsYmFjayA9IF9hLmVuZENhbGxiYWNrLFxuICAgICAgICB1c2VEb2N1bWVudFRvRW5kID0gX2EudXNlRG9jdW1lbnRUb0VuZCxcbiAgICAgICAgcHJldmVudFNjcm9sbCA9IF9hLnByZXZlbnRTY3JvbGw7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlbGVtZW50LCBhY3RpdmVBY3Rpb25zLCBwb3NlciwgY29uZmlnKSB7XG4gICAgICAgIHZhciBzdGFydExpc3RlbmVyID0gc3RhcnRQb3NlICsgJ1N0YXJ0JztcbiAgICAgICAgdmFyIGVuZExpc3RlbmVyID0gc3RhcnRQb3NlICsgJ0VuZCc7XG4gICAgICAgIHZhciBtb3ZlTGlzdGVuZXIgPSBzdGFydFBvc2UgKyAnTW92ZSc7XG4gICAgICAgIGlmIChwcmV2ZW50U2Nyb2xsKSB7XG4gICAgICAgICAgICB2YXIgdG91Y2hNb3ZlTGlzdGVuZXIgPSBsaXN0ZW4oZWxlbWVudCwgJ3RvdWNobW92ZScsIHtcbiAgICAgICAgICAgICAgICBwYXNzaXZlOiBmYWxzZVxuICAgICAgICAgICAgfSkuc3RhcnQoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFjdGl2ZUFjdGlvbnMuc2V0KG1vdmVMaXN0ZW5lciwgdG91Y2hNb3ZlTGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBldmVudFN0YXJ0TGlzdGVuZXIgPSBsaXN0ZW4oZWxlbWVudCwgc3RhcnRFdmVudHMpLnN0YXJ0KGZ1bmN0aW9uIChzdGFydEV2ZW50KSB7XG4gICAgICAgICAgICBwb3Nlci51bnNldChlbmRQb3NlKTtcbiAgICAgICAgICAgIHBvc2VyLnNldChzdGFydFBvc2UpO1xuICAgICAgICAgICAgaWYgKHN0YXJ0Q2FsbGJhY2sgJiYgY29uZmlnW3N0YXJ0Q2FsbGJhY2tdKSBjb25maWdbc3RhcnRDYWxsYmFja10oc3RhcnRFdmVudCk7XG4gICAgICAgICAgICB2YXIgZXZlbnRFbmRMaXN0ZW5lciA9IGxpc3Rlbih1c2VEb2N1bWVudFRvRW5kID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IDogZWxlbWVudCwgZW5kRXZlbnRzICsgKHVzZURvY3VtZW50VG9FbmQgPyAnIG1vdXNlZW50ZXInIDogJycpKS5zdGFydChmdW5jdGlvbiAoZW5kRXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAodXNlRG9jdW1lbnRUb0VuZCAmJiBlbmRFdmVudC50eXBlID09PSAnbW91c2VlbnRlcicgJiYgZW5kRXZlbnQuYnV0dG9ucyA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFjdGl2ZUFjdGlvbnMuZ2V0KGVuZExpc3RlbmVyKS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgcG9zZXIudW5zZXQoc3RhcnRQb3NlKTtcbiAgICAgICAgICAgICAgICBwb3Nlci5zZXQoZW5kUG9zZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVuZENhbGxiYWNrICYmIGNvbmZpZ1tlbmRDYWxsYmFja10pIGNvbmZpZ1tlbmRDYWxsYmFja10oZW5kRXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhY3RpdmVBY3Rpb25zLnNldChlbmRMaXN0ZW5lciwgZXZlbnRFbmRMaXN0ZW5lcik7XG4gICAgICAgIH0pO1xuICAgICAgICBhY3RpdmVBY3Rpb25zLnNldChzdGFydExpc3RlbmVyLCBldmVudFN0YXJ0TGlzdGVuZXIpO1xuICAgIH07XG59O1xudmFyIGV2ZW50cyA9IHtcbiAgICBkcmFnZ2FibGU6IC8qI19fUFVSRV9fKi9tYWtlVUlFdmVudEFwcGxpY2F0b3Ioe1xuICAgICAgICBzdGFydEV2ZW50czogJ21vdXNlZG93biB0b3VjaHN0YXJ0JyxcbiAgICAgICAgZW5kRXZlbnRzOiAnbW91c2V1cCB0b3VjaGVuZCcsXG4gICAgICAgIHN0YXJ0UG9zZTogJ2RyYWcnLFxuICAgICAgICBlbmRQb3NlOiAnZHJhZ0VuZCcsXG4gICAgICAgIHN0YXJ0Q2FsbGJhY2s6ICdvbkRyYWdTdGFydCcsXG4gICAgICAgIGVuZENhbGxiYWNrOiAnb25EcmFnRW5kJyxcbiAgICAgICAgdXNlRG9jdW1lbnRUb0VuZDogdHJ1ZSxcbiAgICAgICAgcHJldmVudFNjcm9sbDogdHJ1ZVxuICAgIH0pLFxuICAgIGhvdmVyYWJsZTogLyojX19QVVJFX18qL21ha2VVSUV2ZW50QXBwbGljYXRvcih7XG4gICAgICAgIHN0YXJ0RXZlbnRzOiAnbW91c2VlbnRlcicsXG4gICAgICAgIGVuZEV2ZW50czogJ21vdXNlbGVhdmUnLFxuICAgICAgICBzdGFydFBvc2U6ICdob3ZlcicsXG4gICAgICAgIGVuZFBvc2U6ICdob3ZlckVuZCdcbiAgICB9KSxcbiAgICBmb2N1c2FibGU6IC8qI19fUFVSRV9fKi9tYWtlVUlFdmVudEFwcGxpY2F0b3Ioe1xuICAgICAgICBzdGFydEV2ZW50czogJ2ZvY3VzJyxcbiAgICAgICAgZW5kRXZlbnRzOiAnYmx1cicsXG4gICAgICAgIHN0YXJ0UG9zZTogJ2ZvY3VzJyxcbiAgICAgICAgZW5kUG9zZTogJ2JsdXInXG4gICAgfSksXG4gICAgcHJlc3NhYmxlOiAvKiNfX1BVUkVfXyovbWFrZVVJRXZlbnRBcHBsaWNhdG9yKHtcbiAgICAgICAgc3RhcnRFdmVudHM6ICdtb3VzZWRvd24gdG91Y2hzdGFydCcsXG4gICAgICAgIGVuZEV2ZW50czogJ21vdXNldXAgdG91Y2hlbmQnLFxuICAgICAgICBzdGFydFBvc2U6ICdwcmVzcycsXG4gICAgICAgIGVuZFBvc2U6ICdwcmVzc0VuZCcsXG4gICAgICAgIHN0YXJ0Q2FsbGJhY2s6ICdvblByZXNzU3RhcnQnLFxuICAgICAgICBlbmRDYWxsYmFjazogJ29uUHJlc3NFbmQnLFxuICAgICAgICB1c2VEb2N1bWVudFRvRW5kOiB0cnVlXG4gICAgfSlcbn07XG52YXIgZXZlbnRLZXlzID0gLyojX19QVVJFX18qL09iamVjdC5rZXlzKGV2ZW50cyk7XG52YXIgYXBwZW5kRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoZWxlbWVudCwgYWN0aXZlQWN0aW9ucywgcG9zZXIsIF9hKSB7XG4gICAgdmFyIHByb3BzID0gX2EucHJvcHM7XG4gICAgcmV0dXJuIGV2ZW50S2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKHByb3BzW2tleV0pIGV2ZW50c1trZXldKGVsZW1lbnQsIGFjdGl2ZUFjdGlvbnMsIHBvc2VyLCBwcm9wcyk7XG4gICAgfSk7XG59O1xuXG52YXIgT1JJR0lOX1NUQVJUID0gMDtcbnZhciBPUklHSU5fQ0VOVEVSID0gJzUwJSc7XG52YXIgT1JJR0lOX0VORCA9ICcxMDAlJztcbnZhciBmaW5kQ2VudGVyID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIHRvcCA9IF9hLnRvcCxcbiAgICAgICAgcmlnaHQgPSBfYS5yaWdodCxcbiAgICAgICAgYm90dG9tID0gX2EuYm90dG9tLFxuICAgICAgICBsZWZ0ID0gX2EubGVmdDtcbiAgICByZXR1cm4ge1xuICAgICAgICB4OiAobGVmdCArIHJpZ2h0KSAvIDIsXG4gICAgICAgIHk6ICh0b3AgKyBib3R0b20pIC8gMlxuICAgIH07XG59O1xudmFyIHBvc2l0aW9uYWxQcm9wcyA9IFsnd2lkdGgnLCAnaGVpZ2h0JywgJ3RvcCcsICdsZWZ0JywgJ2JvdHRvbScsICdyaWdodCddO1xudmFyIHBvc2l0aW9uYWxQcm9wc0RpY3QgPSAvKiNfX1BVUkVfXyovbmV3IFNldChwb3NpdGlvbmFsUHJvcHMpO1xudmFyIGNoZWNrUG9zaXRpb25hbFByb3AgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHBvc2l0aW9uYWxQcm9wc0RpY3QuaGFzKGtleSk7XG59O1xudmFyIGhhc1Bvc2l0aW9uYWxQcm9wcyA9IGZ1bmN0aW9uIChwb3NlKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHBvc2UpLnNvbWUoY2hlY2tQb3NpdGlvbmFsUHJvcCk7XG59O1xudmFyIGlzRmxpcFBvc2UgPSBmdW5jdGlvbiAoZmxpcCwga2V5LCBzdGF0ZSkge1xuICAgIHJldHVybiBzdGF0ZS5wcm9wcy5lbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgKGZsaXAgPT09IHRydWUgfHwga2V5ID09PSAnZmxpcCcpO1xufTtcbnZhciBzZXRWYWx1ZSA9IGZ1bmN0aW9uIChfYSwga2V5LCB0bykge1xuICAgIHZhciB2YWx1ZXMgPSBfYS52YWx1ZXMsXG4gICAgICAgIHByb3BzID0gX2EucHJvcHM7XG4gICAgaWYgKHZhbHVlcy5oYXMoa2V5KSkge1xuICAgICAgICB2YXIgcmF3ID0gdmFsdWVzLmdldChrZXkpLnJhdztcbiAgICAgICAgcmF3LnVwZGF0ZSh0byk7XG4gICAgICAgIHJhdy51cGRhdGUodG8pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlcy5zZXQoa2V5LCB7XG4gICAgICAgICAgICByYXc6IHZhbHVlKHRvLCBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wcy5lbGVtZW50U3R5bGVyLnNldChrZXksIHYpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgfVxufTtcbnZhciBleHBsaWNpdGx5RmxpcFBvc2UgPSBmdW5jdGlvbiAoc3RhdGUsIG5leHRQb3NlKSB7XG4gICAgdmFyIF9hID0gc3RhdGUucHJvcHMsXG4gICAgICAgIGRpbWVuc2lvbnMgPSBfYS5kaW1lbnNpb25zLFxuICAgICAgICBlbGVtZW50U3R5bGVyID0gX2EuZWxlbWVudFN0eWxlcjtcbiAgICBkaW1lbnNpb25zLm1lYXN1cmUoKTtcbiAgICB2YXIgd2lkdGggPSBuZXh0UG9zZS53aWR0aCxcbiAgICAgICAgaGVpZ2h0ID0gbmV4dFBvc2UuaGVpZ2h0LFxuICAgICAgICB0b3AgPSBuZXh0UG9zZS50b3AsXG4gICAgICAgIGxlZnQgPSBuZXh0UG9zZS5sZWZ0LFxuICAgICAgICBib3R0b20gPSBuZXh0UG9zZS5ib3R0b20sXG4gICAgICAgIHJpZ2h0ID0gbmV4dFBvc2UucmlnaHQsXG4gICAgICAgIHBvc2l0aW9uID0gbmV4dFBvc2UucG9zaXRpb24sXG4gICAgICAgIHJlbWFpbmluZ1Bvc2UgPSBfX3Jlc3QobmV4dFBvc2UsIFtcIndpZHRoXCIsIFwiaGVpZ2h0XCIsIFwidG9wXCIsIFwibGVmdFwiLCBcImJvdHRvbVwiLCBcInJpZ2h0XCIsIFwicG9zaXRpb25cIl0pO1xuICAgIHZhciBwcm9wc1RvU2V0ID0gcG9zaXRpb25hbFByb3BzLmNvbmNhdCgncG9zaXRpb24nKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7XG4gICAgICAgIGlmIChuZXh0UG9zZVtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGFjY1trZXldID0gcmVzb2x2ZVByb3AobmV4dFBvc2Vba2V5XSwgc3RhdGUucHJvcHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuICAgIGVsZW1lbnRTdHlsZXIuc2V0KHByb3BzVG9TZXQpLnJlbmRlcigpO1xuICAgIHJldHVybiBpbXBsaWNpdGx5RmxpcFBvc2Uoc3RhdGUsIHJlbWFpbmluZ1Bvc2UpO1xufTtcbnZhciBpbXBsaWNpdGx5RmxpcFBvc2UgPSBmdW5jdGlvbiAoc3RhdGUsIG5leHRQb3NlKSB7XG4gICAgdmFyIF9hID0gc3RhdGUucHJvcHMsXG4gICAgICAgIGRpbWVuc2lvbnMgPSBfYS5kaW1lbnNpb25zLFxuICAgICAgICBlbGVtZW50ID0gX2EuZWxlbWVudCxcbiAgICAgICAgZWxlbWVudFN0eWxlciA9IF9hLmVsZW1lbnRTdHlsZXI7XG4gICAgaWYgKCFkaW1lbnNpb25zLmhhcygpKSByZXR1cm4ge307XG4gICAgdmFyIHByZXYgPSBkaW1lbnNpb25zLmdldCgpO1xuICAgIHZhciBuZXh0ID0gbWVhc3VyZVdpdGhvdXRUcmFuc2Zvcm0oZWxlbWVudCk7XG4gICAgdmFyIG9yaWdpblggPSBwcmV2LmxlZnQgPT09IG5leHQubGVmdCA/IE9SSUdJTl9TVEFSVCA6IHByZXYucmlnaHQgPT09IG5leHQucmlnaHQgPyBPUklHSU5fRU5EIDogT1JJR0lOX0NFTlRFUjtcbiAgICB2YXIgb3JpZ2luWSA9IHByZXYudG9wID09PSBuZXh0LnRvcCA/IE9SSUdJTl9TVEFSVCA6IHByZXYuYm90dG9tID09PSBuZXh0LmJvdHRvbSA/IE9SSUdJTl9FTkQgOiBPUklHSU5fQ0VOVEVSO1xuICAgIGVsZW1lbnRTdHlsZXIuc2V0KHsgb3JpZ2luWDogb3JpZ2luWCwgb3JpZ2luWTogb3JpZ2luWSB9KTtcbiAgICBpZiAocHJldi53aWR0aCAhPT0gbmV4dC53aWR0aCkge1xuICAgICAgICBzZXRWYWx1ZShzdGF0ZSwgJ3NjYWxlWCcsIHByZXYud2lkdGggLyBuZXh0LndpZHRoKTtcbiAgICAgICAgbmV4dFBvc2Uuc2NhbGVYID0gMTtcbiAgICB9XG4gICAgaWYgKHByZXYuaGVpZ2h0ICE9PSBuZXh0LmhlaWdodCkge1xuICAgICAgICBzZXRWYWx1ZShzdGF0ZSwgJ3NjYWxlWScsIHByZXYuaGVpZ2h0IC8gbmV4dC5oZWlnaHQpO1xuICAgICAgICBuZXh0UG9zZS5zY2FsZVkgPSAxO1xuICAgIH1cbiAgICB2YXIgcHJldkNlbnRlciA9IGZpbmRDZW50ZXIocHJldik7XG4gICAgdmFyIG5leHRDZW50ZXIgPSBmaW5kQ2VudGVyKG5leHQpO1xuICAgIGlmIChvcmlnaW5YID09PSBPUklHSU5fQ0VOVEVSKSB7XG4gICAgICAgIHNldFZhbHVlKHN0YXRlLCAneCcsIHByZXZDZW50ZXIueCAtIG5leHRDZW50ZXIueCk7XG4gICAgICAgIG5leHRQb3NlLnggPSAwO1xuICAgIH1cbiAgICBpZiAob3JpZ2luWSA9PT0gT1JJR0lOX0NFTlRFUikge1xuICAgICAgICBzZXRWYWx1ZShzdGF0ZSwgJ3knLCBwcmV2Q2VudGVyLnkgLSBuZXh0Q2VudGVyLnkpO1xuICAgICAgICBuZXh0UG9zZS55ID0gMDtcbiAgICB9XG4gICAgZWxlbWVudFN0eWxlci5yZW5kZXIoKTtcbiAgICByZXR1cm4gbmV4dFBvc2U7XG59O1xudmFyIGZsaXBQb3NlID0gZnVuY3Rpb24gKHByb3BzLCBuZXh0UG9zZSkge1xuICAgIHJldHVybiBoYXNQb3NpdGlvbmFsUHJvcHMobmV4dFBvc2UpID8gZXhwbGljaXRseUZsaXBQb3NlKHByb3BzLCBuZXh0UG9zZSkgOiBpbXBsaWNpdGx5RmxpcFBvc2UocHJvcHMsIG5leHRQb3NlKTtcbn07XG5cbnZhciBnZXRQb3NGcm9tTWF0cml4ID0gZnVuY3Rpb24gKG1hdHJpeCwgcG9zKSB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQobWF0cml4LnNwbGl0KCcsICcpW3Bvc10pO1xufTtcbnZhciBnZXRUcmFuc2xhdGVGcm9tTWF0cml4ID0gZnVuY3Rpb24gKHBvczIsIHBvczMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGVsZW1lbnQsIGJib3gsIF9hKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm0kJDEgPSBfYS50cmFuc2Zvcm07XG4gICAgICAgIGlmICh0cmFuc2Zvcm0kJDEgPT09ICdub25lJykgcmV0dXJuIDA7XG4gICAgICAgIHZhciBtYXRyaXgzZCA9IHRyYW5zZm9ybSQkMS5tYXRjaCgvXm1hdHJpeDNkXFwoKC4rKVxcKSQvKTtcbiAgICAgICAgaWYgKG1hdHJpeDNkKSByZXR1cm4gZ2V0UG9zRnJvbU1hdHJpeChtYXRyaXgzZFsxXSwgcG9zMyk7XG4gICAgICAgIHJldHVybiBnZXRQb3NGcm9tTWF0cml4KHRyYW5zZm9ybSQkMS5tYXRjaCgvXm1hdHJpeFxcKCguKylcXCkkLylbMV0sIHBvczIpO1xuICAgIH07XG59O1xudmFyIHBvc2l0aW9uYWxWYWx1ZXMgPSB7XG4gICAgd2lkdGg6IGZ1bmN0aW9uIChlbGVtZW50LCBfYSkge1xuICAgICAgICB2YXIgd2lkdGggPSBfYS53aWR0aDtcbiAgICAgICAgcmV0dXJuIHdpZHRoO1xuICAgIH0sXG4gICAgaGVpZ2h0OiBmdW5jdGlvbiAoZWxlbWVudCwgX2EpIHtcbiAgICAgICAgdmFyIGhlaWdodCA9IF9hLmhlaWdodDtcbiAgICAgICAgcmV0dXJuIGhlaWdodDtcbiAgICB9LFxuICAgIHRvcDogZnVuY3Rpb24gKGVsZW1lbnQsIGJib3gsIF9hKSB7XG4gICAgICAgIHZhciB0b3AgPSBfYS50b3A7XG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHRvcCk7XG4gICAgfSxcbiAgICBsZWZ0OiBmdW5jdGlvbiAoZWxlbWVudCwgYmJveCwgX2EpIHtcbiAgICAgICAgdmFyIGxlZnQgPSBfYS5sZWZ0O1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChsZWZ0KTtcbiAgICB9LFxuICAgIGJvdHRvbTogZnVuY3Rpb24gKGVsZW1lbnQsIF9hLCBfYikge1xuICAgICAgICB2YXIgaGVpZ2h0ID0gX2EuaGVpZ2h0O1xuICAgICAgICB2YXIgdG9wID0gX2IudG9wO1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh0b3ApICsgaGVpZ2h0O1xuICAgIH0sXG4gICAgcmlnaHQ6IGZ1bmN0aW9uIChlbGVtZW50LCBfYSwgX2IpIHtcbiAgICAgICAgdmFyIHdpZHRoID0gX2Eud2lkdGg7XG4gICAgICAgIHZhciBsZWZ0ID0gX2IubGVmdDtcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQobGVmdCkgKyB3aWR0aDtcbiAgICB9LFxuICAgIHg6IC8qI19fUFVSRV9fKi9nZXRUcmFuc2xhdGVGcm9tTWF0cml4KDQsIDEzKSxcbiAgICB5OiAvKiNfX1BVUkVfXyovZ2V0VHJhbnNsYXRlRnJvbU1hdHJpeCg1LCAxNClcbn07XG52YXIgaXNQb3NpdGlvbmFsS2V5ID0gZnVuY3Rpb24gKHYpIHtcbiAgICByZXR1cm4gcG9zaXRpb25hbFZhbHVlc1t2XSAhPT0gdW5kZWZpbmVkO1xufTtcbnZhciBpc1Bvc2l0aW9uYWwgPSBmdW5jdGlvbiAocG9zZSkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhwb3NlKS5zb21lKGlzUG9zaXRpb25hbEtleSk7XG59O1xudmFyIGNvbnZlcnRQb3NpdGlvbmFsVW5pdHMgPSBmdW5jdGlvbiAoc3RhdGUsIG5leHRQb3NlKSB7XG4gICAgdmFyIHZhbHVlcyA9IHN0YXRlLnZhbHVlcyxcbiAgICAgICAgcHJvcHMgPSBzdGF0ZS5wcm9wcztcbiAgICB2YXIgZWxlbWVudCA9IHByb3BzLmVsZW1lbnQsXG4gICAgICAgIGVsZW1lbnRTdHlsZXIgPSBwcm9wcy5lbGVtZW50U3R5bGVyO1xuICAgIHZhciBwb3NpdGlvbmFsUG9zZUtleXMgPSBPYmplY3Qua2V5cyhuZXh0UG9zZSkuZmlsdGVyKGlzUG9zaXRpb25hbEtleSk7XG4gICAgdmFyIGNoYW5nZWRQb3NpdGlvbmFsS2V5cyA9IFtdO1xuICAgIHZhciBlbGVtZW50Q29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgdmFyIGFwcGx5QXRFbmRIYXNCZWVuQ29waWVkID0gZmFsc2U7XG4gICAgcG9zaXRpb25hbFBvc2VLZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgdmFsdWUkJDEgPSB2YWx1ZXMuZ2V0KGtleSk7XG4gICAgICAgIHZhciBmcm9tVmFsdWVUeXBlID0gZ2V0VmFsdWVUeXBlKHZhbHVlJCQxLnJhdy5nZXQoKSk7XG4gICAgICAgIHZhciB0byA9IHJlc29sdmVQcm9wKG5leHRQb3NlW2tleV0sIHByb3BzKTtcbiAgICAgICAgdmFyIHRvVmFsdWVUeXBlID0gZ2V0VmFsdWVUeXBlKHRvKTtcbiAgICAgICAgaWYgKGZyb21WYWx1ZVR5cGUgIT09IHRvVmFsdWVUeXBlKSB7XG4gICAgICAgICAgICBjaGFuZ2VkUG9zaXRpb25hbEtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgaWYgKCFhcHBseUF0RW5kSGFzQmVlbkNvcGllZCkge1xuICAgICAgICAgICAgICAgIGFwcGx5QXRFbmRIYXNCZWVuQ29waWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBuZXh0UG9zZS5hcHBseUF0RW5kID0gbmV4dFBvc2UuYXBwbHlBdEVuZCA/IF9fYXNzaWduKHt9LCBuZXh0UG9zZS5hcHBseUF0RW5kKSA6IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV4dFBvc2UuYXBwbHlBdEVuZFtrZXldID0gbmV4dFBvc2UuYXBwbHlBdEVuZFtrZXldIHx8IG5leHRQb3NlW2tleV07XG4gICAgICAgICAgICBzZXRWYWx1ZShzdGF0ZSwga2V5LCB0byk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIWNoYW5nZWRQb3NpdGlvbmFsS2V5cy5sZW5ndGgpIHJldHVybiBuZXh0UG9zZTtcbiAgICB2YXIgb3JpZ2luQmJveCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIHRvcCA9IGVsZW1lbnRDb21wdXRlZFN0eWxlLnRvcCxcbiAgICAgICAgbGVmdCA9IGVsZW1lbnRDb21wdXRlZFN0eWxlLmxlZnQsXG4gICAgICAgIGJvdHRvbSA9IGVsZW1lbnRDb21wdXRlZFN0eWxlLmJvdHRvbSxcbiAgICAgICAgcmlnaHQgPSBlbGVtZW50Q29tcHV0ZWRTdHlsZS5yaWdodCxcbiAgICAgICAgdHJhbnNmb3JtJCQxID0gZWxlbWVudENvbXB1dGVkU3R5bGUudHJhbnNmb3JtO1xuICAgIHZhciBvcmlnaW5Db21wdXRlZFN0eWxlID0geyB0b3A6IHRvcCwgbGVmdDogbGVmdCwgYm90dG9tOiBib3R0b20sIHJpZ2h0OiByaWdodCwgdHJhbnNmb3JtOiB0cmFuc2Zvcm0kJDEgfTtcbiAgICBlbGVtZW50U3R5bGVyLnJlbmRlcigpO1xuICAgIHZhciB0YXJnZXRCYm94ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjaGFuZ2VkUG9zaXRpb25hbEtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHNldFZhbHVlKHN0YXRlLCBrZXksIHBvc2l0aW9uYWxWYWx1ZXNba2V5XShlbGVtZW50LCBvcmlnaW5CYm94LCBvcmlnaW5Db21wdXRlZFN0eWxlKSk7XG4gICAgICAgIG5leHRQb3NlW2tleV0gPSBwb3NpdGlvbmFsVmFsdWVzW2tleV0oZWxlbWVudCwgdGFyZ2V0QmJveCwgZWxlbWVudENvbXB1dGVkU3R5bGUpO1xuICAgIH0pO1xuICAgIGVsZW1lbnRTdHlsZXIucmVuZGVyKCk7XG4gICAgcmV0dXJuIG5leHRQb3NlO1xufTtcblxudmFyIGdldEN1cnJlbnQgPSBmdW5jdGlvbiAocHJvcCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRTdHlsZXIgPSBfYS5lbGVtZW50U3R5bGVyO1xuICAgICAgICByZXR1cm4gZWxlbWVudFN0eWxlci5nZXQocHJvcCk7XG4gICAgfTtcbn07XG52YXIgZHJhZ1Bvc2VzID0gZnVuY3Rpb24gKGRyYWdnYWJsZSkge1xuICAgIHZhciBkcmFnID0ge1xuICAgICAgICBwcmVUcmFuc2l0aW9uOiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBkaW1lbnNpb25zID0gX2EuZGltZW5zaW9ucztcbiAgICAgICAgICAgIHJldHVybiBkaW1lbnNpb25zLm1lYXN1cmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIGRyYWdFbmQgPSB7fTtcbiAgICBpZiAoZHJhZ2dhYmxlID09PSB0cnVlIHx8IGRyYWdnYWJsZSA9PT0gJ3gnKSB7XG4gICAgICAgIGRyYWcueCA9IGRyYWdFbmQueCA9IGdldEN1cnJlbnQoJ3gnKTtcbiAgICB9XG4gICAgaWYgKGRyYWdnYWJsZSA9PT0gdHJ1ZSB8fCBkcmFnZ2FibGUgPT09ICd5Jykge1xuICAgICAgICBkcmFnLnkgPSBkcmFnRW5kLnkgPSBnZXRDdXJyZW50KCd5Jyk7XG4gICAgfVxuICAgIHJldHVybiB7IGRyYWc6IGRyYWcsIGRyYWdFbmQ6IGRyYWdFbmQgfTtcbn07XG52YXIgY3JlYXRlUG9zZUNvbmZpZyA9IGZ1bmN0aW9uIChlbGVtZW50LCBfYSkge1xuICAgIHZhciBvbkRyYWdTdGFydCA9IF9hLm9uRHJhZ1N0YXJ0LFxuICAgICAgICBvbkRyYWdFbmQgPSBfYS5vbkRyYWdFbmQsXG4gICAgICAgIG9uUHJlc3NTdGFydCA9IF9hLm9uUHJlc3NTdGFydCxcbiAgICAgICAgb25QcmVzc0VuZCA9IF9hLm9uUHJlc3NFbmQsXG4gICAgICAgIGRyYWdnYWJsZSA9IF9hLmRyYWdnYWJsZSxcbiAgICAgICAgaG92ZXJhYmxlID0gX2EuaG92ZXJhYmxlLFxuICAgICAgICBmb2N1c2FibGUgPSBfYS5mb2N1c2FibGUsXG4gICAgICAgIHByZXNzYWJsZSA9IF9hLnByZXNzYWJsZSxcbiAgICAgICAgZHJhZ0JvdW5kcyA9IF9hLmRyYWdCb3VuZHMsXG4gICAgICAgIGNvbmZpZyA9IF9fcmVzdChfYSwgW1wib25EcmFnU3RhcnRcIiwgXCJvbkRyYWdFbmRcIiwgXCJvblByZXNzU3RhcnRcIiwgXCJvblByZXNzRW5kXCIsIFwiZHJhZ2dhYmxlXCIsIFwiaG92ZXJhYmxlXCIsIFwiZm9jdXNhYmxlXCIsIFwicHJlc3NhYmxlXCIsIFwiZHJhZ0JvdW5kc1wiXSk7XG4gICAgdmFyIHBvc2VDb25maWcgPSBfX2Fzc2lnbih7IGZsaXA6IHt9IH0sIGNvbmZpZywgeyBwcm9wczogX19hc3NpZ24oe30sIGNvbmZpZy5wcm9wcywgeyBvbkRyYWdTdGFydDogb25EcmFnU3RhcnQsXG4gICAgICAgICAgICBvbkRyYWdFbmQ6IG9uRHJhZ0VuZCxcbiAgICAgICAgICAgIG9uUHJlc3NTdGFydDogb25QcmVzc1N0YXJ0LFxuICAgICAgICAgICAgb25QcmVzc0VuZDogb25QcmVzc0VuZCxcbiAgICAgICAgICAgIGRyYWdCb3VuZHM6IGRyYWdCb3VuZHMsXG4gICAgICAgICAgICBkcmFnZ2FibGU6IGRyYWdnYWJsZSxcbiAgICAgICAgICAgIGhvdmVyYWJsZTogaG92ZXJhYmxlLFxuICAgICAgICAgICAgZm9jdXNhYmxlOiBmb2N1c2FibGUsXG4gICAgICAgICAgICBwcmVzc2FibGU6IHByZXNzYWJsZSxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsIGVsZW1lbnRTdHlsZXI6IHN0eWxlcihlbGVtZW50LCB7IHByZXBhcnNlT3V0cHV0OiBmYWxzZSB9KSwgZGltZW5zaW9uczogY3JlYXRlRGltZW5zaW9ucyhlbGVtZW50KSB9KSB9KTtcbiAgICBpZiAoZHJhZ2dhYmxlKSB7XG4gICAgICAgIHZhciBfYiA9IGRyYWdQb3NlcyhkcmFnZ2FibGUpLFxuICAgICAgICAgICAgZHJhZyA9IF9iLmRyYWcsXG4gICAgICAgICAgICBkcmFnRW5kID0gX2IuZHJhZ0VuZDtcbiAgICAgICAgcG9zZUNvbmZpZy5kcmFnID0gX19hc3NpZ24oe30sIGRyYWcsIHBvc2VDb25maWcuZHJhZyk7XG4gICAgICAgIHBvc2VDb25maWcuZHJhZ0VuZCA9IF9fYXNzaWduKHt9LCBkcmFnRW5kLCBwb3NlQ29uZmlnLmRyYWdFbmQpO1xuICAgIH1cbiAgICByZXR1cm4gcG9zZUNvbmZpZztcbn07XG52YXIgZG9tUG9zZSA9IC8qI19fUFVSRV9fKi9wb3NlKHtcbiAgICBwb3NlUHJpb3JpdHk6IFsnZHJhZycsICdwcmVzcycsICdmb2N1cycsICdob3ZlciddLFxuICAgIHRyYW5zZm9ybVBvc2U6IGZ1bmN0aW9uIChfYSwgbmFtZSwgc3RhdGUpIHtcbiAgICAgICAgdmFyIGZsaXAgPSBfYS5mbGlwLFxuICAgICAgICAgICAgcG9zZSQkMSA9IF9fcmVzdChfYSwgW1wiZmxpcFwiXSk7XG4gICAgICAgIGlmIChpc0ZsaXBQb3NlKGZsaXAsIG5hbWUsIHN0YXRlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZsaXBQb3NlKHN0YXRlLCBwb3NlJCQxKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1Bvc2l0aW9uYWwocG9zZSQkMSkpIHtcbiAgICAgICAgICAgIHJldHVybiBjb252ZXJ0UG9zaXRpb25hbFVuaXRzKHN0YXRlLCBwb3NlJCQxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zZSQkMTtcbiAgICB9LFxuICAgIGZvcmNlUmVuZGVyOiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRTdHlsZXIgPSBfYS5lbGVtZW50U3R5bGVyO1xuICAgICAgICBlbGVtZW50U3R5bGVyLnJlbmRlcigpO1xuICAgIH0sXG4gICAgYWRkTGlzdGVuZXJUb1ZhbHVlOiBmdW5jdGlvbiAoa2V5LCBlbGVtZW50U3R5bGVyKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRTdHlsZXIuc2V0KGtleSwgdik7XG4gICAgICAgIH07XG4gICAgfSxcbiAgICByZWFkVmFsdWVGcm9tU291cmNlOiBmdW5jdGlvbiAoa2V5LCBfYSkge1xuICAgICAgICB2YXIgZWxlbWVudFN0eWxlciA9IF9hLmVsZW1lbnRTdHlsZXIsXG4gICAgICAgICAgICBkcmFnQm91bmRzID0gX2EuZHJhZ0JvdW5kcztcbiAgICAgICAgdmFyIHZhbHVlJCQxID0gZWxlbWVudFN0eWxlci5nZXQoa2V5KTtcbiAgICAgICAgaWYgKGRyYWdCb3VuZHMgJiYgKGtleSA9PT0gJ3gnIHx8IGtleSA9PT0gJ3knKSkge1xuICAgICAgICAgICAgdmFyIGJvdW5kID0ga2V5ID09PSAneCcgPyBkcmFnQm91bmRzLmxlZnQgfHwgZHJhZ0JvdW5kcy5yaWdodCA6IGRyYWdCb3VuZHMudG9wIHx8IGRyYWdCb3VuZHMuYm90dG9tO1xuICAgICAgICAgICAgaWYgKGJvdW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJvdW5kVHlwZSA9IGdldFZhbHVlVHlwZShib3VuZCk7XG4gICAgICAgICAgICAgICAgdmFsdWUkJDEgPSBib3VuZFR5cGUudHJhbnNmb3JtKHZhbHVlJCQxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNOYU4odmFsdWUkJDEpID8gdmFsdWUkJDEgOiBwYXJzZUZsb2F0KHZhbHVlJCQxKTtcbiAgICB9LFxuICAgIHNldFZhbHVlTmF0aXZlOiBmdW5jdGlvbiAoa2V5LCB0bywgX2EpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRTdHlsZXIgPSBfYS5lbGVtZW50U3R5bGVyO1xuICAgICAgICByZXR1cm4gZWxlbWVudFN0eWxlci5zZXQoa2V5LCB0byk7XG4gICAgfSxcbiAgICBleHRlbmRBUEk6IGZ1bmN0aW9uIChhcGksIF9hLCBjb25maWcpIHtcbiAgICAgICAgdmFyIHByb3BzID0gX2EucHJvcHMsXG4gICAgICAgICAgICBhY3RpdmVBY3Rpb25zID0gX2EuYWN0aXZlQWN0aW9ucztcbiAgICAgICAgdmFyIG1lYXN1cmUgPSBwcm9wcy5kaW1lbnNpb25zLm1lYXN1cmU7XG4gICAgICAgIHZhciBwb3NlckFwaSA9IF9fYXNzaWduKHt9LCBhcGksIHsgYWRkQ2hpbGQ6IGZ1bmN0aW9uIChlbGVtZW50LCBjaGlsZENvbmZpZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcGkuX2FkZENoaWxkKGNyZWF0ZVBvc2VDb25maWcoZWxlbWVudCwgY2hpbGRDb25maWcpLCBkb21Qb3NlKTtcbiAgICAgICAgICAgIH0sIG1lYXN1cmU6IG1lYXN1cmUsIGZsaXA6IGZ1bmN0aW9uIChvcCkge1xuICAgICAgICAgICAgICAgIGlmIChvcCkge1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlKCk7XG4gICAgICAgICAgICAgICAgICAgIG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhcGkuc2V0KCdmbGlwJyk7XG4gICAgICAgICAgICB9IH0pO1xuICAgICAgICBwcm9wcy5lbGVtZW50U3R5bGVyLnJlbmRlcigpO1xuICAgICAgICBhcHBlbmRFdmVudExpc3RlbmVycyhwcm9wcy5lbGVtZW50LCBhY3RpdmVBY3Rpb25zLCBwb3NlckFwaSwgY29uZmlnKTtcbiAgICAgICAgcmV0dXJuIHBvc2VyQXBpO1xuICAgIH1cbn0pO1xudmFyIGRvbVBvc2UkMSA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb25maWcpIHtcbiAgICByZXR1cm4gZG9tUG9zZShjcmVhdGVQb3NlQ29uZmlnKGVsZW1lbnQsIGNvbmZpZykpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZG9tUG9zZSQxO1xuIiwiZnVuY3Rpb24gbWVtb2l6ZShmbikge1xuICB2YXIgY2FjaGUgPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhcmcpIHtcbiAgICBpZiAoY2FjaGVbYXJnXSA9PT0gdW5kZWZpbmVkKSBjYWNoZVthcmddID0gZm4oYXJnKTtcbiAgICByZXR1cm4gY2FjaGVbYXJnXTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbWVtb2l6ZTtcbiIsImltcG9ydCBtZW1vaXplIGZyb20gJ0BlbW90aW9uL21lbW9pemUnO1xuXG52YXIgcmVhY3RQcm9wc1JlZ2V4ID0gL14oKGNoaWxkcmVufGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MfGtleXxyZWZ8YXV0b0ZvY3VzfGRlZmF1bHRWYWx1ZXxkZWZhdWx0Q2hlY2tlZHxpbm5lckhUTUx8c3VwcHJlc3NDb250ZW50RWRpdGFibGVXYXJuaW5nfHN1cHByZXNzSHlkcmF0aW9uV2FybmluZ3x2YWx1ZUxpbmt8YWNjZXB0fGFjY2VwdENoYXJzZXR8YWNjZXNzS2V5fGFjdGlvbnxhbGxvd3xhbGxvd1VzZXJNZWRpYXxhbGxvd1BheW1lbnRSZXF1ZXN0fGFsbG93RnVsbFNjcmVlbnxhbGxvd1RyYW5zcGFyZW5jeXxhbHR8YXN5bmN8YXV0b0NvbXBsZXRlfGF1dG9QbGF5fGNhcHR1cmV8Y2VsbFBhZGRpbmd8Y2VsbFNwYWNpbmd8Y2hhbGxlbmdlfGNoYXJTZXR8Y2hlY2tlZHxjaXRlfGNsYXNzSUR8Y2xhc3NOYW1lfGNvbHN8Y29sU3Bhbnxjb250ZW50fGNvbnRlbnRFZGl0YWJsZXxjb250ZXh0TWVudXxjb250cm9sc3xjb250cm9sc0xpc3R8Y29vcmRzfGNyb3NzT3JpZ2lufGRhdGF8ZGF0ZVRpbWV8ZGVmYXVsdHxkZWZlcnxkaXJ8ZGlzYWJsZWR8ZG93bmxvYWR8ZHJhZ2dhYmxlfGVuY1R5cGV8Zm9ybXxmb3JtQWN0aW9ufGZvcm1FbmNUeXBlfGZvcm1NZXRob2R8Zm9ybU5vVmFsaWRhdGV8Zm9ybVRhcmdldHxmcmFtZUJvcmRlcnxoZWFkZXJzfGhlaWdodHxoaWRkZW58aGlnaHxocmVmfGhyZWZMYW5nfGh0bWxGb3J8aHR0cEVxdWl2fGlkfGlucHV0TW9kZXxpbnRlZ3JpdHl8aXN8a2V5UGFyYW1zfGtleVR5cGV8a2luZHxsYWJlbHxsYW5nfGxpc3R8bG9vcHxsb3d8bWFyZ2luSGVpZ2h0fG1hcmdpbldpZHRofG1heHxtYXhMZW5ndGh8bWVkaWF8bWVkaWFHcm91cHxtZXRob2R8bWlufG1pbkxlbmd0aHxtdWx0aXBsZXxtdXRlZHxuYW1lfG5vbmNlfG5vVmFsaWRhdGV8b3BlbnxvcHRpbXVtfHBhdHRlcm58cGxhY2Vob2xkZXJ8cGxheXNJbmxpbmV8cG9zdGVyfHByZWxvYWR8cHJvZmlsZXxyYWRpb0dyb3VwfHJlYWRPbmx5fHJlZmVycmVyUG9saWN5fHJlbHxyZXF1aXJlZHxyZXZlcnNlZHxyb2xlfHJvd3N8cm93U3BhbnxzYW5kYm94fHNjb3BlfHNjb3BlZHxzY3JvbGxpbmd8c2VhbWxlc3N8c2VsZWN0ZWR8c2hhcGV8c2l6ZXxzaXplc3xzbG90fHNwYW58c3BlbGxDaGVja3xzcmN8c3JjRG9jfHNyY0xhbmd8c3JjU2V0fHN0YXJ0fHN0ZXB8c3R5bGV8c3VtbWFyeXx0YWJJbmRleHx0YXJnZXR8dGl0bGV8dHlwZXx1c2VNYXB8dmFsdWV8d2lkdGh8d21vZGV8d3JhcHxhYm91dHxkYXRhdHlwZXxpbmxpc3R8cHJlZml4fHByb3BlcnR5fHJlc291cmNlfHR5cGVvZnx2b2NhYnxhdXRvQ2FwaXRhbGl6ZXxhdXRvQ29ycmVjdHxhdXRvU2F2ZXxjb2xvcnxpdGVtUHJvcHxpdGVtU2NvcGV8aXRlbVR5cGV8aXRlbUlEfGl0ZW1SZWZ8cmVzdWx0c3xzZWN1cml0eXx1bnNlbGVjdGFibGV8YWNjZW50SGVpZ2h0fGFjY3VtdWxhdGV8YWRkaXRpdmV8YWxpZ25tZW50QmFzZWxpbmV8YWxsb3dSZW9yZGVyfGFscGhhYmV0aWN8YW1wbGl0dWRlfGFyYWJpY0Zvcm18YXNjZW50fGF0dHJpYnV0ZU5hbWV8YXR0cmlidXRlVHlwZXxhdXRvUmV2ZXJzZXxhemltdXRofGJhc2VGcmVxdWVuY3l8YmFzZWxpbmVTaGlmdHxiYXNlUHJvZmlsZXxiYm94fGJlZ2lufGJpYXN8Ynl8Y2FsY01vZGV8Y2FwSGVpZ2h0fGNsaXB8Y2xpcFBhdGhVbml0c3xjbGlwUGF0aHxjbGlwUnVsZXxjb2xvckludGVycG9sYXRpb258Y29sb3JJbnRlcnBvbGF0aW9uRmlsdGVyc3xjb2xvclByb2ZpbGV8Y29sb3JSZW5kZXJpbmd8Y29udGVudFNjcmlwdFR5cGV8Y29udGVudFN0eWxlVHlwZXxjdXJzb3J8Y3h8Y3l8ZHxkZWNlbGVyYXRlfGRlc2NlbnR8ZGlmZnVzZUNvbnN0YW50fGRpcmVjdGlvbnxkaXNwbGF5fGRpdmlzb3J8ZG9taW5hbnRCYXNlbGluZXxkdXJ8ZHh8ZHl8ZWRnZU1vZGV8ZWxldmF0aW9ufGVuYWJsZUJhY2tncm91bmR8ZW5kfGV4cG9uZW50fGV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWR8ZmlsbHxmaWxsT3BhY2l0eXxmaWxsUnVsZXxmaWx0ZXJ8ZmlsdGVyUmVzfGZpbHRlclVuaXRzfGZsb29kQ29sb3J8Zmxvb2RPcGFjaXR5fGZvY3VzYWJsZXxmb250RmFtaWx5fGZvbnRTaXplfGZvbnRTaXplQWRqdXN0fGZvbnRTdHJldGNofGZvbnRTdHlsZXxmb250VmFyaWFudHxmb250V2VpZ2h0fGZvcm1hdHxmcm9tfGZyfGZ4fGZ5fGcxfGcyfGdseXBoTmFtZXxnbHlwaE9yaWVudGF0aW9uSG9yaXpvbnRhbHxnbHlwaE9yaWVudGF0aW9uVmVydGljYWx8Z2x5cGhSZWZ8Z3JhZGllbnRUcmFuc2Zvcm18Z3JhZGllbnRVbml0c3xoYW5naW5nfGhvcml6QWR2WHxob3Jpek9yaWdpblh8aWRlb2dyYXBoaWN8aW1hZ2VSZW5kZXJpbmd8aW58aW4yfGludGVyY2VwdHxrfGsxfGsyfGszfGs0fGtlcm5lbE1hdHJpeHxrZXJuZWxVbml0TGVuZ3RofGtlcm5pbmd8a2V5UG9pbnRzfGtleVNwbGluZXN8a2V5VGltZXN8bGVuZ3RoQWRqdXN0fGxldHRlclNwYWNpbmd8bGlnaHRpbmdDb2xvcnxsaW1pdGluZ0NvbmVBbmdsZXxsb2NhbHxtYXJrZXJFbmR8bWFya2VyTWlkfG1hcmtlclN0YXJ0fG1hcmtlckhlaWdodHxtYXJrZXJVbml0c3xtYXJrZXJXaWR0aHxtYXNrfG1hc2tDb250ZW50VW5pdHN8bWFza1VuaXRzfG1hdGhlbWF0aWNhbHxtb2RlfG51bU9jdGF2ZXN8b2Zmc2V0fG9wYWNpdHl8b3BlcmF0b3J8b3JkZXJ8b3JpZW50fG9yaWVudGF0aW9ufG9yaWdpbnxvdmVyZmxvd3xvdmVybGluZVBvc2l0aW9ufG92ZXJsaW5lVGhpY2tuZXNzfHBhbm9zZTF8cGFpbnRPcmRlcnxwYXRoTGVuZ3RofHBhdHRlcm5Db250ZW50VW5pdHN8cGF0dGVyblRyYW5zZm9ybXxwYXR0ZXJuVW5pdHN8cG9pbnRlckV2ZW50c3xwb2ludHN8cG9pbnRzQXRYfHBvaW50c0F0WXxwb2ludHNBdFp8cHJlc2VydmVBbHBoYXxwcmVzZXJ2ZUFzcGVjdFJhdGlvfHByaW1pdGl2ZVVuaXRzfHJ8cmFkaXVzfHJlZlh8cmVmWXxyZW5kZXJpbmdJbnRlbnR8cmVwZWF0Q291bnR8cmVwZWF0RHVyfHJlcXVpcmVkRXh0ZW5zaW9uc3xyZXF1aXJlZEZlYXR1cmVzfHJlc3RhcnR8cmVzdWx0fHJvdGF0ZXxyeHxyeXxzY2FsZXxzZWVkfHNoYXBlUmVuZGVyaW5nfHNsb3BlfHNwYWNpbmd8c3BlY3VsYXJDb25zdGFudHxzcGVjdWxhckV4cG9uZW50fHNwZWVkfHNwcmVhZE1ldGhvZHxzdGFydE9mZnNldHxzdGREZXZpYXRpb258c3RlbWh8c3RlbXZ8c3RpdGNoVGlsZXN8c3RvcENvbG9yfHN0b3BPcGFjaXR5fHN0cmlrZXRocm91Z2hQb3NpdGlvbnxzdHJpa2V0aHJvdWdoVGhpY2tuZXNzfHN0cmluZ3xzdHJva2V8c3Ryb2tlRGFzaGFycmF5fHN0cm9rZURhc2hvZmZzZXR8c3Ryb2tlTGluZWNhcHxzdHJva2VMaW5lam9pbnxzdHJva2VNaXRlcmxpbWl0fHN0cm9rZU9wYWNpdHl8c3Ryb2tlV2lkdGh8c3VyZmFjZVNjYWxlfHN5c3RlbUxhbmd1YWdlfHRhYmxlVmFsdWVzfHRhcmdldFh8dGFyZ2V0WXx0ZXh0QW5jaG9yfHRleHREZWNvcmF0aW9ufHRleHRSZW5kZXJpbmd8dGV4dExlbmd0aHx0b3x0cmFuc2Zvcm18dTF8dTJ8dW5kZXJsaW5lUG9zaXRpb258dW5kZXJsaW5lVGhpY2tuZXNzfHVuaWNvZGV8dW5pY29kZUJpZGl8dW5pY29kZVJhbmdlfHVuaXRzUGVyRW18dkFscGhhYmV0aWN8dkhhbmdpbmd8dklkZW9ncmFwaGljfHZNYXRoZW1hdGljYWx8dmFsdWVzfHZlY3RvckVmZmVjdHx2ZXJzaW9ufHZlcnRBZHZZfHZlcnRPcmlnaW5YfHZlcnRPcmlnaW5ZfHZpZXdCb3h8dmlld1RhcmdldHx2aXNpYmlsaXR5fHdpZHRoc3x3b3JkU3BhY2luZ3x3cml0aW5nTW9kZXx4fHhIZWlnaHR8eDF8eDJ8eENoYW5uZWxTZWxlY3Rvcnx4bGlua0FjdHVhdGV8eGxpbmtBcmNyb2xlfHhsaW5rSHJlZnx4bGlua1JvbGV8eGxpbmtTaG93fHhsaW5rVGl0bGV8eGxpbmtUeXBlfHhtbEJhc2V8eG1sbnN8eG1sbnNYbGlua3x4bWxMYW5nfHhtbFNwYWNlfHl8eTF8eTJ8eUNoYW5uZWxTZWxlY3Rvcnx6fHpvb21BbmRQYW58Zm9yfGNsYXNzfGF1dG9mb2N1cyl8KChbRGRdW0FhXVtUdF1bQWFdfFtBYV1bUnJdW0lpXVtBYV18eCktLiopKSQvOyAvLyBodHRwczovL2VzYmVuY2guY29tL2JlbmNoLzViZmVlNjhhNGNkN2U2MDA5ZWY2MWQyM1xuXG52YXIgaW5kZXggPSBtZW1vaXplKGZ1bmN0aW9uIChwcm9wKSB7XG4gIHJldHVybiByZWFjdFByb3BzUmVnZXgudGVzdChwcm9wKSB8fCBwcm9wLmNoYXJDb2RlQXQoMCkgPT09IDExMVxuICAvKiBvICovXG4gICYmIHByb3AuY2hhckNvZGVBdCgxKSA9PT0gMTEwXG4gIC8qIG4gKi9cbiAgJiYgcHJvcC5jaGFyQ29kZUF0KDIpIDwgOTE7XG59XG4vKiBaKzEgKi9cbik7XG5cbmV4cG9ydCBkZWZhdWx0IGluZGV4O1xuIiwiaW1wb3J0IHsgX19yZXN0LCBfX2Fzc2lnbiwgX19leHRlbmRzIH0gZnJvbSAndHNsaWInO1xuaW1wb3J0IFJlYWN0X19kZWZhdWx0LCB7IFB1cmVDb21wb25lbnQsIGNyZWF0ZUNvbnRleHQsIGNyZWF0ZUVsZW1lbnQsIGZvcndhcmRSZWYsIENvbXBvbmVudCwgY2xvbmVFbGVtZW50LCBDaGlsZHJlbiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBwb3NlRmFjdG9yeSBmcm9tICdwb3Btb3Rpb24tcG9zZSc7XG5pbXBvcnQgaXNWYWxpZFByb3AgZnJvbSAnQGVtb3Rpb24vaXMtcHJvcC12YWxpZCc7XG5pbXBvcnQgeyBpbnZhcmlhbnQsIHdhcm5pbmcgfSBmcm9tICdoZXktbGlzdGVuJztcblxudmFyIGhhc0NoYW5nZWQgPSBmdW5jdGlvbiAocHJldiwgbmV4dCkge1xyXG4gICAgaWYgKHByZXYgPT09IG5leHQpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgdmFyIHByZXZJc0FycmF5ID0gQXJyYXkuaXNBcnJheShwcmV2KTtcclxuICAgIHZhciBuZXh0SXNBcnJheSA9IEFycmF5LmlzQXJyYXkobmV4dCk7XHJcbiAgICBpZiAocHJldklzQXJyYXkgIT09IG5leHRJc0FycmF5IHx8ICghcHJldklzQXJyYXkgJiYgIW5leHRJc0FycmF5KSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAocHJldklzQXJyYXkgJiYgbmV4dElzQXJyYXkpIHtcclxuICAgICAgICB2YXIgbnVtUHJldiA9IHByZXYubGVuZ3RoO1xyXG4gICAgICAgIHZhciBudW1OZXh0ID0gbmV4dC5sZW5ndGg7XHJcbiAgICAgICAgaWYgKG51bVByZXYgIT09IG51bU5leHQpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtUHJldjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChwcmV2W2ldICE9PSBuZXh0W2ldKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59O1xuXG52YXIgcGlja0Fzc2lnbiA9IGZ1bmN0aW9uIChzaG91bGRQaWNrLCBzb3VyY2VzKSB7XHJcbiAgICByZXR1cm4gc291cmNlcy5yZWR1Y2UoZnVuY3Rpb24gKHBpY2tlZCwgc291cmNlKSB7XHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xyXG4gICAgICAgICAgICBpZiAoc2hvdWxkUGljayhrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBwaWNrZWRba2V5XSA9IHNvdXJjZVtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwaWNrZWQ7XHJcbiAgICB9LCB7fSk7XHJcbn07XG5cbnZhciBfYSA9IGNyZWF0ZUNvbnRleHQoe30pLCBQb3NlUGFyZW50Q29uc3VtZXIgPSBfYS5Db25zdW1lciwgUG9zZVBhcmVudFByb3ZpZGVyID0gX2EuUHJvdmlkZXI7XHJcbnZhciBjYWxjUG9wRnJvbUZsb3dTdHlsZSA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgdmFyIG9mZnNldFRvcCA9IGVsLm9mZnNldFRvcCwgb2Zmc2V0TGVmdCA9IGVsLm9mZnNldExlZnQsIG9mZnNldFdpZHRoID0gZWwub2Zmc2V0V2lkdGgsIG9mZnNldEhlaWdodCA9IGVsLm9mZnNldEhlaWdodDtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgdG9wOiBvZmZzZXRUb3AsXHJcbiAgICAgICAgbGVmdDogb2Zmc2V0TGVmdCxcclxuICAgICAgICB3aWR0aDogb2Zmc2V0V2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0OiBvZmZzZXRIZWlnaHRcclxuICAgIH07XHJcbn07XHJcbnZhciBoYXNQb3NlID0gZnVuY3Rpb24gKHBvc2UsIGtleSkge1xyXG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkocG9zZSkgPyBwb3NlLmluZGV4T2Yoa2V5KSAhPT0gLTEgOiBwb3NlID09PSBrZXk7XHJcbn07XHJcbnZhciBvYmplY3RUb01hcCA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLnJlZHVjZShmdW5jdGlvbiAobWFwLCBrZXkpIHtcclxuICAgICAgICBtYXAuc2V0KGtleSwgeyByYXc6IG9ialtrZXldIH0pO1xyXG4gICAgICAgIHJldHVybiBtYXA7XHJcbiAgICB9LCBuZXcgTWFwKCkpO1xyXG59O1xyXG52YXIgdGVzdEFsd2F5c1RydWUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9O1xyXG52YXIgZmlsdGVyUHJvcHMgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBlbGVtZW50VHlwZSA9IF9hLmVsZW1lbnRUeXBlLCBwb3NlQ29uZmlnID0gX2EucG9zZUNvbmZpZywgb25WYWx1ZUNoYW5nZSA9IF9hLm9uVmFsdWVDaGFuZ2UsIGlubmVyUmVmID0gX2EuaW5uZXJSZWYsIF9wb3NlID0gX2EuX3Bvc2UsIHBvc2UgPSBfYS5wb3NlLCBpbml0aWFsUG9zZSA9IF9hLmluaXRpYWxQb3NlLCBwb3NlS2V5ID0gX2EucG9zZUtleSwgb25Qb3NlQ29tcGxldGUgPSBfYS5vblBvc2VDb21wbGV0ZSwgZ2V0UGFyZW50UG9zZUNvbmZpZyA9IF9hLmdldFBhcmVudFBvc2VDb25maWcsIHJlZ2lzdGVyQ2hpbGQgPSBfYS5yZWdpc3RlckNoaWxkLCBvblVubW91bnQgPSBfYS5vblVubW91bnQsIGdldEluaXRpYWxQb3NlRnJvbVBhcmVudCA9IF9hLmdldEluaXRpYWxQb3NlRnJvbVBhcmVudCwgcG9wRnJvbUZsb3cgPSBfYS5wb3BGcm9tRmxvdywgdmFsdWVzID0gX2EudmFsdWVzLCBwYXJlbnRWYWx1ZXMgPSBfYS5wYXJlbnRWYWx1ZXMsIG9uRHJhZ1N0YXJ0ID0gX2Eub25EcmFnU3RhcnQsIG9uRHJhZ0VuZCA9IF9hLm9uRHJhZ0VuZCwgb25QcmVzc1N0YXJ0ID0gX2Eub25QcmVzc1N0YXJ0LCBvblByZXNzRW5kID0gX2Eub25QcmVzc0VuZCwgcHJvcHMgPSBfX3Jlc3QoX2EsIFtcImVsZW1lbnRUeXBlXCIsIFwicG9zZUNvbmZpZ1wiLCBcIm9uVmFsdWVDaGFuZ2VcIiwgXCJpbm5lclJlZlwiLCBcIl9wb3NlXCIsIFwicG9zZVwiLCBcImluaXRpYWxQb3NlXCIsIFwicG9zZUtleVwiLCBcIm9uUG9zZUNvbXBsZXRlXCIsIFwiZ2V0UGFyZW50UG9zZUNvbmZpZ1wiLCBcInJlZ2lzdGVyQ2hpbGRcIiwgXCJvblVubW91bnRcIiwgXCJnZXRJbml0aWFsUG9zZUZyb21QYXJlbnRcIiwgXCJwb3BGcm9tRmxvd1wiLCBcInZhbHVlc1wiLCBcInBhcmVudFZhbHVlc1wiLCBcIm9uRHJhZ1N0YXJ0XCIsIFwib25EcmFnRW5kXCIsIFwib25QcmVzc1N0YXJ0XCIsIFwib25QcmVzc0VuZFwiXSk7XHJcbiAgICByZXR1cm4gcHJvcHM7XHJcbn07XHJcbnZhciBQb3NlRWxlbWVudCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoUG9zZUVsZW1lbnQsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBQb3NlRWxlbWVudChwcm9wcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNoaWxkcmVuID0gbmV3IFNldCgpO1xyXG4gICAgICAgIF90aGlzLmNoaWxkcmVuSGFuZGxlcnMgPSB7XHJcbiAgICAgICAgICAgIHJlZ2lzdGVyQ2hpbGQ6IGZ1bmN0aW9uIChwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY2hpbGRyZW4uYWRkKHByb3BzKTtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wb3NlcilcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5mbHVzaENoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uVW5tb3VudDogZnVuY3Rpb24gKGNoaWxkKSB7IHJldHVybiBfdGhpcy5wb3Nlci5yZW1vdmVDaGlsZChjaGlsZCk7IH0sXHJcbiAgICAgICAgICAgIGdldFBhcmVudFBvc2VDb25maWc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnBvc2VDb25maWc7IH0sXHJcbiAgICAgICAgICAgIGdldEluaXRpYWxQb3NlRnJvbVBhcmVudDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZ2V0SW5pdGlhbFBvc2UoKTsgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgX3RoaXMuc2V0UmVmID0gZnVuY3Rpb24gKHJlZikge1xyXG4gICAgICAgICAgICB3YXJuaW5nKHJlZiA9PT0gbnVsbCB8fCAocmVmIGluc3RhbmNlb2YgRWxlbWVudCAmJiBfdGhpcy5yZWYgPT09IHVuZGVmaW5lZCksICdyZWYgbXVzdCBiZSBwcm92aWRlZCB0byB0aGUgc2FtZSBET00gY29tcG9uZW50IGZvciB0aGUgZW50aXJlIGxpZmVjeWNsZSBvZiBhIHBvc2VkIGNvbXBvbmVudC4nKTtcclxuICAgICAgICAgICAgX3RoaXMucmVmID0gcmVmO1xyXG4gICAgICAgICAgICB2YXIgaW5uZXJSZWYgPSBfdGhpcy5wcm9wcy5pbm5lclJlZjtcclxuICAgICAgICAgICAgaWYgKCFpbm5lclJlZilcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbm5lclJlZiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgaW5uZXJSZWYocmVmKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlubmVyUmVmLmN1cnJlbnQgPSByZWY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIF90aGlzLnNob3VsZEZvcndhcmRQcm9wID1cclxuICAgICAgICAgICAgdHlwZW9mIF90aGlzLnByb3BzLmVsZW1lbnRUeXBlID09PSAnc3RyaW5nJyA/IGlzVmFsaWRQcm9wIDogdGVzdEFsd2F5c1RydWU7XHJcbiAgICAgICAgdmFyIHBvc2VDb25maWcgPSBfdGhpcy5wcm9wcy5wb3NlQ29uZmlnO1xyXG4gICAgICAgIF90aGlzLnBvc2VDb25maWcgPVxyXG4gICAgICAgICAgICB0eXBlb2YgcG9zZUNvbmZpZyA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgICAgICAgICAgPyBwb3NlQ29uZmlnKGZpbHRlclByb3BzKHByb3BzKSlcclxuICAgICAgICAgICAgICAgIDogcG9zZUNvbmZpZztcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBQb3NlRWxlbWVudC5wcm90b3R5cGUuZ2V0SW5pdGlhbFBvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgZ2V0SW5pdGlhbFBvc2VGcm9tUGFyZW50ID0gX2EuZ2V0SW5pdGlhbFBvc2VGcm9tUGFyZW50LCBwb3NlID0gX2EucG9zZSwgX3Bvc2UgPSBfYS5fcG9zZSwgaW5pdGlhbFBvc2UgPSBfYS5pbml0aWFsUG9zZTtcclxuICAgICAgICBpZiAoaW5pdGlhbFBvc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGluaXRpYWxQb3NlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHBhcmVudFBvc2UgPSBnZXRJbml0aWFsUG9zZUZyb21QYXJlbnQgJiYgZ2V0SW5pdGlhbFBvc2VGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgICAgIHZhciBpbml0aWFsUG9zZXMgPSAoQXJyYXkuaXNBcnJheShwYXJlbnRQb3NlKVxyXG4gICAgICAgICAgICAgICAgPyBwYXJlbnRQb3NlXHJcbiAgICAgICAgICAgICAgICA6IFtwYXJlbnRQb3NlXSlcclxuICAgICAgICAgICAgICAgIC5jb25jYXQocG9zZSwgX3Bvc2UpXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xyXG4gICAgICAgICAgICByZXR1cm4gaW5pdGlhbFBvc2VzLmxlbmd0aCA+IDAgPyBpbml0aWFsUG9zZXMgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFBvc2VFbGVtZW50LnByb3RvdHlwZS5nZXRGaXJzdFBvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgaW5pdGlhbFBvc2UgPSBfYS5pbml0aWFsUG9zZSwgcG9zZSA9IF9hLnBvc2UsIF9wb3NlID0gX2EuX3Bvc2U7XHJcbiAgICAgICAgaWYgKCFpbml0aWFsUG9zZSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHZhciBmaXJzdFBvc2UgPSAoQXJyYXkuaXNBcnJheShwb3NlKSA/IHBvc2UgOiBbcG9zZV0pXHJcbiAgICAgICAgICAgIC5jb25jYXQoX3Bvc2UpXHJcbiAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbik7XHJcbiAgICAgICAgcmV0dXJuIGZpcnN0UG9zZS5sZW5ndGggPT09IDEgPyBmaXJzdFBvc2VbMF0gOiBmaXJzdFBvc2U7XHJcbiAgICB9O1xyXG4gICAgUG9zZUVsZW1lbnQucHJvdG90eXBlLmdldFNldFByb3BzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwcm9wcyA9IGZpbHRlclByb3BzKHRoaXMucHJvcHMpO1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnBvcEZyb21GbG93ICYmIHRoaXMucmVmICYmIHRoaXMucmVmIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnBvcFN0eWxlKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9wcy5zdHlsZSA9IF9fYXNzaWduKHt9LCBwcm9wcy5zdHlsZSwgY2FsY1BvcEZyb21GbG93U3R5bGUodGhpcy5yZWYpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9wU3R5bGUgPSBwcm9wcy5zdHlsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHByb3BzLnN0eWxlID0gdGhpcy5wb3BTdHlsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wb3BTdHlsZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm9wcztcclxuICAgIH07XHJcbiAgICBQb3NlRWxlbWVudC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpbnZhcmlhbnQodGhpcy5yZWYgaW5zdGFuY2VvZiBFbGVtZW50LCBcIk5vIHZhbGlkIERPTSByZWYgZm91bmQuIElmIHlvdSdyZSBjb252ZXJ0aW5nIGFuIGV4aXN0aW5nIGNvbXBvbmVudCB2aWEgcG9zZWQoQ29tcG9uZW50KSwgeW91IG11c3QgZW5zdXJlIHlvdSdyZSBwYXNzaW5nIHRoZSByZWYgdG8gdGhlIGhvc3QgRE9NIG5vZGUgdmlhIHRoZSBSZWFjdC5mb3J3YXJkUmVmIGZ1bmN0aW9uLlwiKTtcclxuICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBvblZhbHVlQ2hhbmdlID0gX2Eub25WYWx1ZUNoYW5nZSwgcmVnaXN0ZXJDaGlsZCA9IF9hLnJlZ2lzdGVyQ2hpbGQsIHZhbHVlcyA9IF9hLnZhbHVlcywgcGFyZW50VmFsdWVzID0gX2EucGFyZW50VmFsdWVzLCBvbkRyYWdTdGFydCA9IF9hLm9uRHJhZ1N0YXJ0LCBvbkRyYWdFbmQgPSBfYS5vbkRyYWdFbmQsIG9uUHJlc3NTdGFydCA9IF9hLm9uUHJlc3NTdGFydCwgb25QcmVzc0VuZCA9IF9hLm9uUHJlc3NFbmQ7XHJcbiAgICAgICAgdmFyIGNvbmZpZyA9IF9fYXNzaWduKHt9LCB0aGlzLnBvc2VDb25maWcsIHsgaW5pdGlhbFBvc2U6IHRoaXMuZ2V0SW5pdGlhbFBvc2UoKSwgdmFsdWVzOiB2YWx1ZXMgfHwgdGhpcy5wb3NlQ29uZmlnLnZhbHVlcywgcGFyZW50VmFsdWVzOiBwYXJlbnRWYWx1ZXMgPyBvYmplY3RUb01hcChwYXJlbnRWYWx1ZXMpIDogdW5kZWZpbmVkLCBwcm9wczogdGhpcy5nZXRTZXRQcm9wcygpLCBvbkRyYWdTdGFydDogb25EcmFnU3RhcnQsXHJcbiAgICAgICAgICAgIG9uRHJhZ0VuZDogb25EcmFnRW5kLFxyXG4gICAgICAgICAgICBvblByZXNzU3RhcnQ6IG9uUHJlc3NTdGFydCxcclxuICAgICAgICAgICAgb25QcmVzc0VuZDogb25QcmVzc0VuZCwgb25DaGFuZ2U6IG9uVmFsdWVDaGFuZ2UgfSk7XHJcbiAgICAgICAgaWYgKCFyZWdpc3RlckNoaWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdFBvc2VyKHBvc2VGYWN0b3J5KHRoaXMucmVmLCBjb25maWcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlZ2lzdGVyQ2hpbGQoe1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudDogdGhpcy5yZWYsXHJcbiAgICAgICAgICAgICAgICBwb3NlQ29uZmlnOiBjb25maWcsXHJcbiAgICAgICAgICAgICAgICBvblJlZ2lzdGVyZWQ6IGZ1bmN0aW9uIChwb3NlcikgeyByZXR1cm4gX3RoaXMuaW5pdFBvc2VyKHBvc2VyKTsgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUG9zZUVsZW1lbnQucHJvdG90eXBlLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIHBvc2UgPSBfYS5wb3NlLCBfcG9zZSA9IF9hLl9wb3NlO1xyXG4gICAgICAgIGlmIChoYXNQb3NlKHBvc2UsICdmbGlwJykgfHwgaGFzUG9zZShfcG9zZSwgJ2ZsaXAnKSlcclxuICAgICAgICAgICAgdGhpcy5wb3Nlci5tZWFzdXJlKCk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgUG9zZUVsZW1lbnQucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIChwcmV2UHJvcHMpIHtcclxuICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBwb3NlID0gX2EucG9zZSwgX3Bvc2UgPSBfYS5fcG9zZSwgcG9zZUtleSA9IF9hLnBvc2VLZXk7XHJcbiAgICAgICAgdGhpcy5wb3Nlci5zZXRQcm9wcyh0aGlzLmdldFNldFByb3BzKCkpO1xyXG4gICAgICAgIGlmIChwb3NlS2V5ICE9PSBwcmV2UHJvcHMucG9zZUtleSB8fFxyXG4gICAgICAgICAgICBoYXNDaGFuZ2VkKHByZXZQcm9wcy5wb3NlLCBwb3NlKSB8fFxyXG4gICAgICAgICAgICBwb3NlID09PSAnZmxpcCcpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRQb3NlKHBvc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX3Bvc2UgIT09IHByZXZQcm9wcy5fcG9zZSB8fCBfcG9zZSA9PT0gJ2ZsaXAnKVxyXG4gICAgICAgICAgICB0aGlzLnNldFBvc2UoX3Bvc2UpO1xyXG4gICAgfTtcclxuICAgIFBvc2VFbGVtZW50LnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMucG9zZXIpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB2YXIgb25Vbm1vdW50ID0gdGhpcy5wcm9wcy5vblVubW91bnQ7XHJcbiAgICAgICAgaWYgKG9uVW5tb3VudClcclxuICAgICAgICAgICAgb25Vbm1vdW50KHRoaXMucG9zZXIpO1xyXG4gICAgICAgIHRoaXMucG9zZXIuZGVzdHJveSgpO1xyXG4gICAgfTtcclxuICAgIFBvc2VFbGVtZW50LnByb3RvdHlwZS5pbml0UG9zZXIgPSBmdW5jdGlvbiAocG9zZXIpIHtcclxuICAgICAgICB0aGlzLnBvc2VyID0gcG9zZXI7XHJcbiAgICAgICAgdGhpcy5mbHVzaENoaWxkcmVuKCk7XHJcbiAgICAgICAgdmFyIGZpcnN0UG9zZSA9IHRoaXMuZ2V0Rmlyc3RQb3NlKCk7XHJcbiAgICAgICAgaWYgKGZpcnN0UG9zZSlcclxuICAgICAgICAgICAgdGhpcy5zZXRQb3NlKGZpcnN0UG9zZSk7XHJcbiAgICB9O1xyXG4gICAgUG9zZUVsZW1lbnQucHJvdG90eXBlLnNldFBvc2UgPSBmdW5jdGlvbiAocG9zZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIG9uUG9zZUNvbXBsZXRlID0gdGhpcy5wcm9wcy5vblBvc2VDb21wbGV0ZTtcclxuICAgICAgICB2YXIgcG9zZUxpc3QgPSBBcnJheS5pc0FycmF5KHBvc2UpID8gcG9zZSA6IFtwb3NlXTtcclxuICAgICAgICBQcm9taXNlLmFsbChwb3NlTGlzdC5tYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5ICYmIF90aGlzLnBvc2VyLnNldChrZXkpOyB9KSkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBvblBvc2VDb21wbGV0ZSAmJiBvblBvc2VDb21wbGV0ZShwb3NlKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgUG9zZUVsZW1lbnQucHJvdG90eXBlLmZsdXNoQ2hpbGRyZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gX2EuZWxlbWVudCwgcG9zZUNvbmZpZyA9IF9hLnBvc2VDb25maWcsIG9uUmVnaXN0ZXJlZCA9IF9hLm9uUmVnaXN0ZXJlZDtcclxuICAgICAgICAgICAgcmV0dXJuIG9uUmVnaXN0ZXJlZChfdGhpcy5wb3Nlci5hZGRDaGlsZChlbGVtZW50LCBwb3NlQ29uZmlnKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5jbGVhcigpO1xyXG4gICAgfTtcclxuICAgIFBvc2VFbGVtZW50LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnRUeXBlID0gdGhpcy5wcm9wcy5lbGVtZW50VHlwZTtcclxuICAgICAgICByZXR1cm4gKFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoUG9zZVBhcmVudFByb3ZpZGVyLCB7IHZhbHVlOiB0aGlzLmNoaWxkcmVuSGFuZGxlcnMgfSwgY3JlYXRlRWxlbWVudChlbGVtZW50VHlwZSwgcGlja0Fzc2lnbih0aGlzLnNob3VsZEZvcndhcmRQcm9wLCBbXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0U2V0UHJvcHMoKSxcclxuICAgICAgICAgICAgeyByZWY6IHRoaXMuc2V0UmVmIH1cclxuICAgICAgICBdKSkpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUG9zZUVsZW1lbnQ7XHJcbn0oUHVyZUNvbXBvbmVudCkpO1xuXG52YXIgc3VwcG9ydGVkRWxlbWVudHMgPSBbXHJcbiAgICAnYScsXHJcbiAgICAnYXJ0aWNsZScsXHJcbiAgICAnYXNpZGUnLFxyXG4gICAgJ2F1ZGlvJyxcclxuICAgICdiJyxcclxuICAgICdibG9ja3F1b3RlJyxcclxuICAgICdib2R5JyxcclxuICAgICdicicsXHJcbiAgICAnYnV0dG9uJyxcclxuICAgICdjYW52YXMnLFxyXG4gICAgJ2NhcHRpb24nLFxyXG4gICAgJ2NpdGUnLFxyXG4gICAgJ2NvZGUnLFxyXG4gICAgJ2NvbCcsXHJcbiAgICAnY29sZ3JvdXAnLFxyXG4gICAgJ2RhdGEnLFxyXG4gICAgJ2RhdGFsaXN0JyxcclxuICAgICdkaWFsb2cnLFxyXG4gICAgJ2RpdicsXHJcbiAgICAnZW0nLFxyXG4gICAgJ2VtYmVkJyxcclxuICAgICdmaWVsZHNldCcsXHJcbiAgICAnZmlnY2FwdGlvbicsXHJcbiAgICAnZmlndXJlJyxcclxuICAgICdmb290ZXInLFxyXG4gICAgJ2Zvcm0nLFxyXG4gICAgJ2gxJyxcclxuICAgICdoMicsXHJcbiAgICAnaDMnLFxyXG4gICAgJ2g0JyxcclxuICAgICdoNScsXHJcbiAgICAnaDYnLFxyXG4gICAgJ2hlYWQnLFxyXG4gICAgJ2hlYWRlcicsXHJcbiAgICAnaGdyb3VwJyxcclxuICAgICdocicsXHJcbiAgICAnaScsXHJcbiAgICAnaWZyYW1lJyxcclxuICAgICdpbWcnLFxyXG4gICAgJ2lucHV0JyxcclxuICAgICdsYWJlbCcsXHJcbiAgICAnbGVnZW5kJyxcclxuICAgICdsaScsXHJcbiAgICAnbmF2JyxcclxuICAgICdvYmplY3QnLFxyXG4gICAgJ29sJyxcclxuICAgICdvcHRpb24nLFxyXG4gICAgJ3AnLFxyXG4gICAgJ3BhcmFtJyxcclxuICAgICdwaWN0dXJlJyxcclxuICAgICdwcmUnLFxyXG4gICAgJ3Byb2dyZXNzJyxcclxuICAgICdxJyxcclxuICAgICdzZWN0aW9uJyxcclxuICAgICdzZWxlY3QnLFxyXG4gICAgJ3NwYW4nLFxyXG4gICAgJ3N0cm9uZycsXHJcbiAgICAndGFibGUnLFxyXG4gICAgJ3Rib2R5JyxcclxuICAgICd0ZCcsXHJcbiAgICAndGV4dGFyZWEnLFxyXG4gICAgJ3Rmb290JyxcclxuICAgICd0aCcsXHJcbiAgICAndGhlYWQnLFxyXG4gICAgJ3RpbWUnLFxyXG4gICAgJ3RpdGxlJyxcclxuICAgICd0cicsXHJcbiAgICAndWwnLFxyXG4gICAgJ3ZpZGVvJyxcclxuICAgICdjaXJjbGUnLFxyXG4gICAgJ2NsaXBQYXRoJyxcclxuICAgICdkZWZzJyxcclxuICAgICdlbGxpcHNlJyxcclxuICAgICdnJyxcclxuICAgICdpbWFnZScsXHJcbiAgICAnbGluZScsXHJcbiAgICAnbGluZWFyR3JhZGllbnQnLFxyXG4gICAgJ21hc2snLFxyXG4gICAgJ3BhdGgnLFxyXG4gICAgJ3BhdHRlcm4nLFxyXG4gICAgJ3BvbHlnb24nLFxyXG4gICAgJ3BvbHlsaW5lJyxcclxuICAgICdyYWRpYWxHcmFkaWVudCcsXHJcbiAgICAncmVjdCcsXHJcbiAgICAnc3RvcCcsXHJcbiAgICAnc3ZnJyxcclxuICAgICd0ZXh0JyxcclxuICAgICd0c3BhbidcclxuXTtcblxudmFyIGNvbXBvbmVudENhY2hlID0gbmV3IE1hcCgpO1xyXG52YXIgY3JlYXRlQ29tcG9uZW50RmFjdG9yeSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgIHZhciBjb21wb25lbnRGYWN0b3J5ID0gZnVuY3Rpb24gKHBvc2VDb25maWcpIHtcclxuICAgICAgICBpZiAocG9zZUNvbmZpZyA9PT0gdm9pZCAwKSB7IHBvc2VDb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHJldHVybiBmb3J3YXJkUmVmKGZ1bmN0aW9uIChfYSwgcmVmKSB7XHJcbiAgICAgICAgICAgIHZhciBfYiA9IF9hLndpdGhQYXJlbnQsIHdpdGhQYXJlbnQgPSBfYiA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9iLCBwcm9wcyA9IF9fcmVzdChfYSwgW1wid2l0aFBhcmVudFwiXSk7XHJcbiAgICAgICAgICAgIHdhcm5pbmcocHJvcHMuaW5uZXJSZWYgPT09IHVuZGVmaW5lZCwgJ2lubmVyUmVmIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgcmVmIGluc3RlYWQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybiAhd2l0aFBhcmVudCB8fCBwcm9wcy5wYXJlbnRWYWx1ZXMgPyAoUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChQb3NlRWxlbWVudCwgX19hc3NpZ24oeyBwb3NlQ29uZmlnOiBwb3NlQ29uZmlnLCBpbm5lclJlZjogcmVmLCBlbGVtZW50VHlwZToga2V5IH0sIHByb3BzKSkpIDogKFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoUG9zZVBhcmVudENvbnN1bWVyLCBudWxsLCBmdW5jdGlvbiAocGFyZW50Q3R4KSB7IHJldHVybiAoUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChQb3NlRWxlbWVudCwgX19hc3NpZ24oeyBwb3NlQ29uZmlnOiBwb3NlQ29uZmlnLCBlbGVtZW50VHlwZToga2V5LCBpbm5lclJlZjogcmVmIH0sIHByb3BzLCBwYXJlbnRDdHgpKSk7IH0pKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBjb21wb25lbnRDYWNoZS5zZXQoa2V5LCBjb21wb25lbnRGYWN0b3J5KTtcclxuICAgIHJldHVybiBjb21wb25lbnRGYWN0b3J5O1xyXG59O1xyXG52YXIgZ2V0Q29tcG9uZW50RmFjdG9yeSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgIHJldHVybiBjb21wb25lbnRDYWNoZS5oYXMoa2V5KVxyXG4gICAgICAgID8gY29tcG9uZW50Q2FjaGUuZ2V0KGtleSlcclxuICAgICAgICA6IGNyZWF0ZUNvbXBvbmVudEZhY3Rvcnkoa2V5KTtcclxufTtcclxudmFyIHBvc2VkID0gKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcclxuICAgIHJldHVybiBnZXRDb21wb25lbnRGYWN0b3J5KGNvbXBvbmVudCk7XHJcbn0pO1xyXG5zdXBwb3J0ZWRFbGVtZW50cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7XHJcbiAgICBhY2Nba2V5XSA9IGNyZWF0ZUNvbXBvbmVudEZhY3Rvcnkoa2V5KTtcclxuICAgIHJldHVybiBhY2M7XHJcbn0sIHBvc2VkKTtcblxudmFyIGdldEtleSA9IGZ1bmN0aW9uIChjaGlsZCkge1xyXG4gICAgaW52YXJpYW50KGNoaWxkICYmIGNoaWxkLmtleSAhPT0gbnVsbCwgJ0V2ZXJ5IGNoaWxkIG9mIFRyYW5zaXRpb24gbXVzdCBiZSBnaXZlbiBhIHVuaXF1ZSBrZXknKTtcclxuICAgIHZhciBjaGlsZEtleSA9IHR5cGVvZiBjaGlsZC5rZXkgPT09ICdudW1iZXInID8gY2hpbGQua2V5LnRvU3RyaW5nKCkgOiBjaGlsZC5rZXk7XHJcbiAgICByZXR1cm4gY2hpbGRLZXkucmVwbGFjZSgnLiQnLCAnJyk7XHJcbn07XHJcbnZhciBwcmVwZW5kUHJvcHMgPSBmdW5jdGlvbiAoZWxlbWVudCwgcHJvcHMpIHtcclxuICAgIHJldHVybiBjcmVhdGVFbGVtZW50KGVsZW1lbnQudHlwZSwgX19hc3NpZ24oeyBrZXk6IGVsZW1lbnQua2V5LCByZWY6IGVsZW1lbnQucmVmIH0sIHByb3BzLCBlbGVtZW50LnByb3BzKSk7XHJcbn07XHJcbnZhciBoYW5kbGVUcmFuc2l0aW9uID0gZnVuY3Rpb24gKF9hLCBfYikge1xyXG4gICAgdmFyIGRpc3BsYXllZENoaWxkcmVuID0gX2IuZGlzcGxheWVkQ2hpbGRyZW4sIGZpbmlzaGVkTGVhdmluZyA9IF9iLmZpbmlzaGVkTGVhdmluZywgaGFzSW5pdGlhbGl6ZWQgPSBfYi5oYXNJbml0aWFsaXplZCwgaW5kZXhlZENoaWxkcmVuID0gX2IuaW5kZXhlZENoaWxkcmVuLCBzY2hlZHVsZUNoaWxkUmVtb3ZhbCA9IF9iLnNjaGVkdWxlQ2hpbGRSZW1vdmFsO1xyXG4gICAgdmFyIGluY29taW5nQ2hpbGRyZW4gPSBfYS5jaGlsZHJlbiwgcHJlRW50ZXJQb3NlID0gX2EucHJlRW50ZXJQb3NlLCBlbnRlclBvc2UgPSBfYS5lbnRlclBvc2UsIGV4aXRQb3NlID0gX2EuZXhpdFBvc2UsIGFuaW1hdGVPbk1vdW50ID0gX2EuYW5pbWF0ZU9uTW91bnQsIGVudGVyQWZ0ZXJFeGl0ID0gX2EuZW50ZXJBZnRlckV4aXQsIGZsaXBNb3ZlID0gX2EuZmxpcE1vdmUsIG9uUmVzdCA9IF9hLm9uUmVzdCwgcHJvcHNGb3JDaGlsZHJlbiA9IF9fcmVzdChfYSwgW1wiY2hpbGRyZW5cIiwgXCJwcmVFbnRlclBvc2VcIiwgXCJlbnRlclBvc2VcIiwgXCJleGl0UG9zZVwiLCBcImFuaW1hdGVPbk1vdW50XCIsIFwiZW50ZXJBZnRlckV4aXRcIiwgXCJmbGlwTW92ZVwiLCBcIm9uUmVzdFwiXSk7XHJcbiAgICB2YXIgdGFyZ2V0Q2hpbGRyZW4gPSBtYWtlQ2hpbGRMaXN0KGluY29taW5nQ2hpbGRyZW4pO1xyXG4gICAgdmFyIG5leHRTdGF0ZSA9IHtcclxuICAgICAgICBkaXNwbGF5ZWRDaGlsZHJlbjogW11cclxuICAgIH07XHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgIHdhcm5pbmcoIXByb3BzRm9yQ2hpbGRyZW4ub25Qb3NlQ29tcGxldGUsIFwiPFRyYW5zaXRpb24vPiAob3IgPFBvc2VHcm91cC8+KSBkb2Vzbid0IGFjY2VwdCBvblBvc2VDb21wbGV0ZSBwcm9wLlwiKTtcclxuICAgIH1cclxuICAgIHZhciBwcmV2S2V5cyA9IGRpc3BsYXllZENoaWxkcmVuLm1hcChnZXRLZXkpO1xyXG4gICAgdmFyIG5leHRLZXlzID0gdGFyZ2V0Q2hpbGRyZW4ubWFwKGdldEtleSk7XHJcbiAgICB2YXIgaGFzUHJvcHNGb3JDaGlsZHJlbiA9IE9iamVjdC5rZXlzKHByb3BzRm9yQ2hpbGRyZW4pLmxlbmd0aCAhPT0gMDtcclxuICAgIHZhciBlbnRlcmluZyA9IG5ldyBTZXQobmV4dEtleXMuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGZpbmlzaGVkTGVhdmluZy5oYXNPd25Qcm9wZXJ0eShrZXkpIHx8IHByZXZLZXlzLmluZGV4T2Yoa2V5KSA9PT0gLTE7IH0pKTtcclxuICAgIGVudGVyaW5nLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gZGVsZXRlIGZpbmlzaGVkTGVhdmluZ1trZXldOyB9KTtcclxuICAgIHZhciBsZWF2aW5nID0gW107XHJcbiAgICB2YXIgbmV3bHlMZWF2aW5nID0ge307XHJcbiAgICBwcmV2S2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBpZiAoZW50ZXJpbmcuaGFzKGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaXNMZWF2aW5nID0gZmluaXNoZWRMZWF2aW5nLmhhc093blByb3BlcnR5KGtleSk7XHJcbiAgICAgICAgaWYgKCFpc0xlYXZpbmcgJiYgbmV4dEtleXMuaW5kZXhPZihrZXkpICE9PSAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxlYXZpbmcucHVzaChrZXkpO1xyXG4gICAgICAgIGlmICghaXNMZWF2aW5nKSB7XHJcbiAgICAgICAgICAgIGZpbmlzaGVkTGVhdmluZ1trZXldID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG5ld2x5TGVhdmluZ1trZXldID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHZhciBtb3ZpbmcgPSBuZXcgU2V0KHByZXZLZXlzLmZpbHRlcihmdW5jdGlvbiAoa2V5LCBpKSB7XHJcbiAgICAgICAgcmV0dXJuICFlbnRlcmluZy5oYXMoa2V5KSB8fCBsZWF2aW5nLmluZGV4T2Yoa2V5KSA9PT0gLTE7XHJcbiAgICB9KSk7XHJcbiAgICB0YXJnZXRDaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xyXG4gICAgICAgIHZhciBuZXdDaGlsZFByb3BzID0ge307XHJcbiAgICAgICAgaWYgKGVudGVyaW5nLmhhcyhjaGlsZC5rZXkpKSB7XHJcbiAgICAgICAgICAgIGlmIChoYXNJbml0aWFsaXplZCB8fCBhbmltYXRlT25Nb3VudCkge1xyXG4gICAgICAgICAgICAgICAgbmV3Q2hpbGRQcm9wcy5pbml0aWFsUG9zZSA9IHByZUVudGVyUG9zZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuZXdDaGlsZFByb3BzLl9wb3NlID0gZW50ZXJQb3NlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChtb3ZpbmcuaGFzKGNoaWxkLmtleSkgJiYgZmxpcE1vdmUpIHtcclxuICAgICAgICAgICAgbmV3Q2hpbGRQcm9wcy5fcG9zZSA9IFtlbnRlclBvc2UsICdmbGlwJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBuZXdDaGlsZFByb3BzLl9wb3NlID0gZW50ZXJQb3NlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbmV3Q2hpbGQgPSBjbG9uZUVsZW1lbnQoY2hpbGQsIG5ld0NoaWxkUHJvcHMpO1xyXG4gICAgICAgIGluZGV4ZWRDaGlsZHJlbltjaGlsZC5rZXldID0gbmV3Q2hpbGQ7XHJcbiAgICAgICAgbmV4dFN0YXRlLmRpc3BsYXllZENoaWxkcmVuLnB1c2goaGFzUHJvcHNGb3JDaGlsZHJlbiA/IHByZXBlbmRQcm9wcyhuZXdDaGlsZCwgcHJvcHNGb3JDaGlsZHJlbikgOiBuZXdDaGlsZCk7XHJcbiAgICB9KTtcclxuICAgIGxlYXZpbmcuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIGNoaWxkID0gaW5kZXhlZENoaWxkcmVuW2tleV07XHJcbiAgICAgICAgdmFyIG5ld0NoaWxkID0gbmV3bHlMZWF2aW5nW2tleV1cclxuICAgICAgICAgICAgPyBjbG9uZUVsZW1lbnQoY2hpbGQsIHtcclxuICAgICAgICAgICAgICAgIF9wb3NlOiBleGl0UG9zZSxcclxuICAgICAgICAgICAgICAgIG9uUG9zZUNvbXBsZXRlOiBmdW5jdGlvbiAocG9zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3NlID09PSBleGl0UG9zZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVDaGlsZFJlbW92YWwoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb25Qb3NlQ29tcGxldGUgPSBjaGlsZC5wcm9wcy5vblBvc2VDb21wbGV0ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob25Qb3NlQ29tcGxldGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUG9zZUNvbXBsZXRlKHBvc2UpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHBvcEZyb21GbG93OiBmbGlwTW92ZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICA6IGNoaWxkO1xyXG4gICAgICAgIHZhciBpbnNlcnRpb25JbmRleCA9IHByZXZLZXlzLmluZGV4T2Yoa2V5KTtcclxuICAgICAgICBpbmRleGVkQ2hpbGRyZW5bY2hpbGQua2V5XSA9IG5ld0NoaWxkO1xyXG4gICAgICAgIG5leHRTdGF0ZS5kaXNwbGF5ZWRDaGlsZHJlbi5zcGxpY2UoaW5zZXJ0aW9uSW5kZXgsIDAsIGhhc1Byb3BzRm9yQ2hpbGRyZW4gPyBwcmVwZW5kUHJvcHMobmV3Q2hpbGQsIHByb3BzRm9yQ2hpbGRyZW4pIDogbmV3Q2hpbGQpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbmV4dFN0YXRlO1xyXG59O1xyXG52YXIgaGFuZGxlQ2hpbGRyZW5UcmFuc2l0aW9ucyA9IChmdW5jdGlvbiAocHJvcHMsIHN0YXRlKSB7XHJcbiAgICB2YXIgbmV3U3RhdGUgPSBoYW5kbGVUcmFuc2l0aW9uKHByb3BzLCBzdGF0ZSk7XHJcbiAgICBuZXdTdGF0ZS5oYXNJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICByZXR1cm4gbmV3U3RhdGU7XHJcbn0pO1xyXG52YXIgbWFrZUNoaWxkTGlzdCA9IGZ1bmN0aW9uIChjaGlsZHJlbikge1xyXG4gICAgdmFyIGxpc3QgPSBbXTtcclxuICAgIENoaWxkcmVuLmZvckVhY2goY2hpbGRyZW4sIGZ1bmN0aW9uIChjaGlsZCkgeyByZXR1cm4gY2hpbGQgJiYgbGlzdC5wdXNoKGNoaWxkKTsgfSk7XHJcbiAgICByZXR1cm4gbGlzdDtcclxufTtcblxudmFyIFRyYW5zaXRpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFRyYW5zaXRpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBUcmFuc2l0aW9uKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBkaXNwbGF5ZWRDaGlsZHJlbjogW10sXHJcbiAgICAgICAgICAgIGZpbmlzaGVkTGVhdmluZzoge30sXHJcbiAgICAgICAgICAgIGhhc0luaXRpYWxpemVkOiBmYWxzZSxcclxuICAgICAgICAgICAgaW5kZXhlZENoaWxkcmVuOiB7fSxcclxuICAgICAgICAgICAgc2NoZWR1bGVDaGlsZFJlbW92YWw6IGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIF90aGlzLnJlbW92ZUNoaWxkKGtleSk7IH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnJlbW92ZUNoaWxkID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciBfYSA9IHRoaXMuc3RhdGUsIGRpc3BsYXllZENoaWxkcmVuID0gX2EuZGlzcGxheWVkQ2hpbGRyZW4sIGZpbmlzaGVkTGVhdmluZyA9IF9hLmZpbmlzaGVkTGVhdmluZztcclxuICAgICAgICB2YXIgX2IgPSB0aGlzLnByb3BzLCBlbnRlckFmdGVyRXhpdCA9IF9iLmVudGVyQWZ0ZXJFeGl0LCBvblJlc3QgPSBfYi5vblJlc3Q7XHJcbiAgICAgICAgaWYgKCFmaW5pc2hlZExlYXZpbmcuaGFzT3duUHJvcGVydHkoa2V5KSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGZpbmlzaGVkTGVhdmluZ1trZXldID0gdHJ1ZTtcclxuICAgICAgICBpZiAoIU9iamVjdC5rZXlzKGZpbmlzaGVkTGVhdmluZykuZXZlcnkoZnVuY3Rpb24gKGxlYXZpbmdLZXkpIHsgcmV0dXJuIGZpbmlzaGVkTGVhdmluZ1tsZWF2aW5nS2V5XTsgfSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGFyZ2V0Q2hpbGRyZW4gPSBkaXNwbGF5ZWRDaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKGNoaWxkKSB7IHJldHVybiAhZmluaXNoZWRMZWF2aW5nLmhhc093blByb3BlcnR5KGNoaWxkLmtleSk7IH0pO1xyXG4gICAgICAgIHZhciBuZXdTdGF0ZSA9IGVudGVyQWZ0ZXJFeGl0XHJcbiAgICAgICAgICAgID8gX19hc3NpZ24oeyBmaW5pc2hlZExlYXZpbmc6IHt9IH0sIGhhbmRsZUNoaWxkcmVuVHJhbnNpdGlvbnMoX19hc3NpZ24oe30sIHRoaXMucHJvcHMsIHsgZW50ZXJBZnRlckV4aXQ6IGZhbHNlIH0pLCBfX2Fzc2lnbih7fSwgdGhpcy5zdGF0ZSwgeyBkaXNwbGF5ZWRDaGlsZHJlbjogdGFyZ2V0Q2hpbGRyZW4gfSkpKSA6IHtcclxuICAgICAgICAgICAgZmluaXNoZWRMZWF2aW5nOiB7fSxcclxuICAgICAgICAgICAgZGlzcGxheWVkQ2hpbGRyZW46IHRhcmdldENoaWxkcmVuXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlLCBvblJlc3QpO1xyXG4gICAgfTtcclxuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnNob3VsZENvbXBvbmVudFVwZGF0ZSA9IGZ1bmN0aW9uIChuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlICE9PSBuZXh0U3RhdGU7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmRpc3BsYXllZENoaWxkcmVuO1xyXG4gICAgfTtcclxuICAgIFRyYW5zaXRpb24uZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIGZsaXBNb3ZlOiBmYWxzZSxcclxuICAgICAgICBlbnRlckFmdGVyRXhpdDogZmFsc2UsXHJcbiAgICAgICAgcHJlRW50ZXJQb3NlOiAnZXhpdCcsXHJcbiAgICAgICAgZW50ZXJQb3NlOiAnZW50ZXInLFxyXG4gICAgICAgIGV4aXRQb3NlOiAnZXhpdCdcclxuICAgIH07XHJcbiAgICBUcmFuc2l0aW9uLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyA9IGhhbmRsZUNoaWxkcmVuVHJhbnNpdGlvbnM7XHJcbiAgICByZXR1cm4gVHJhbnNpdGlvbjtcclxufShDb21wb25lbnQpKTtcblxudmFyIFBvc2VHcm91cCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoUG9zZUdyb3VwLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gUG9zZUdyb3VwKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIFBvc2VHcm91cC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KFRyYW5zaXRpb24sIF9fYXNzaWduKHt9LCB0aGlzLnByb3BzKSk7XHJcbiAgICB9O1xyXG4gICAgUG9zZUdyb3VwLmRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBmbGlwTW92ZTogdHJ1ZVxyXG4gICAgfTtcclxuICAgIHJldHVybiBQb3NlR3JvdXA7XHJcbn0oQ29tcG9uZW50KSk7XG5cbmV4cG9ydCBkZWZhdWx0IHBvc2VkO1xuZXhwb3J0IHsgVHJhbnNpdGlvbiwgUG9zZUdyb3VwIH07XG4iLCJpbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0ICAgICBmcm9tICdyZWFjdCc7XG5cbi8vIFRPRE8gcmVtb3ZlIHRoaXMgZmlsZSBlbnRpcmVseSB3aGVuIGljb24gY29tcG9uZW50IGlzIHJlYWR5LlxuY29uc3QgSWNvbkluZm9CbHVlID0gKHsgY2xhc3NOYW1lIH0pID0+IChcbiAgICA8c3ZnIGNsYXNzTmFtZT17Y2xhc3NOYW1lfSB3aWR0aD0nMTYnIGhlaWdodD0nMTYnIHZpZXdCb3g9JzAgMCAxNiAxNic+XG4gICAgICAgIDxnIGZpbGw9J25vbmUnIGZpbGxSdWxlPSdldmVub2RkJz5cbiAgICAgICAgICAgIDxjaXJjbGUgY3g9JzgnIGN5PSc4JyByPSc4JyBmaWxsPScjMjE5NkYzJyAvPlxuICAgICAgICAgICAgPGcgZmlsbD0nI0ZGRicgdHJhbnNmb3JtPSd0cmFuc2xhdGUoNi41IDQpJz5cbiAgICAgICAgICAgICAgICA8Y2lyY2xlIGN4PScxLjUnIGN5PScxJyByPScxJyAvPlxuICAgICAgICAgICAgICAgIDxyZWN0IHdpZHRoPScyJyBoZWlnaHQ9JzUnIHg9Jy41JyB5PSczJyByeD0nMScgLz5cbiAgICAgICAgICAgIDwvZz5cbiAgICAgICAgPC9nPlxuICAgIDwvc3ZnPlxuKTtcblxuSWNvbkluZm9CbHVlLnByb3BUeXBlcyA9IHtcbiAgICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBJY29uSW5mb0JsdWU7XG4iLCJpbXBvcnQgY2xhc3NOYW1lcyAgICAgICAgICAgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgUHJvcFR5cGVzICAgICAgICAgICAgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgICAgICAgICAgICAgICAgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NICAgICAgICAgICAgIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgcG9zZWQsIHsgUG9zZUdyb3VwIH0gZnJvbSAncmVhY3QtcG9zZSc7XG5pbXBvcnQgSWNvbkluZm9CbHVlICAgICAgICAgZnJvbSAnLi4vaWNvbi1pbmZvLWJsdWUuanN4JztcblxuY29uc3QgRmFkZUluID0gcG9zZWQuc3Bhbih7XG4gICAgZW50ZXI6IHtcbiAgICAgICAgb3BhY2l0eSAgIDogMSxcbiAgICAgICAgdHJhbnNpdGlvbjoge1xuICAgICAgICAgICAgZHVyYXRpb246IDE1MCxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGV4aXQ6IHtcbiAgICAgICAgb3BhY2l0eSAgIDogMCxcbiAgICAgICAgdHJhbnNpdGlvbjoge1xuICAgICAgICAgICAgZHVyYXRpb246IDE1MCxcbiAgICAgICAgfSxcbiAgICB9LFxufSk7XG5cbmNsYXNzIFBvcG92ZXJCdWJibGUgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBjYWxjdWxhdGVQb3NpdGlvbiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBhbGlnbm1lbnQsIHRhcmdldF9yZWN0YW5nbGUsIG1hcmdpbiA9IDAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgc3dpdGNoIChhbGlnbm1lbnQpIHtcbiAgICAgICAgICAgIGNhc2UgJ3RvcCc6IHJldHVybiB7XG4gICAgICAgICAgICAgICAgbGVmdCAgICAgOiAodGFyZ2V0X3JlY3RhbmdsZS53aWR0aCAvIDIpICsgdGFyZ2V0X3JlY3RhbmdsZS5sZWZ0LFxuICAgICAgICAgICAgICAgIGJvdHRvbSAgIDogKHdpbmRvdy5pbm5lckhlaWdodCAtIHRhcmdldF9yZWN0YW5nbGUudG9wKSArIG1hcmdpbixcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKC01MCUpJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlICdib3R0b20nOiByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxlZnQgICAgIDogKHRhcmdldF9yZWN0YW5nbGUud2lkdGggLyAyKSArIHRhcmdldF9yZWN0YW5nbGUubGVmdCxcbiAgICAgICAgICAgICAgICB0b3AgICAgICA6IHRhcmdldF9yZWN0YW5nbGUuYm90dG9tICsgbWFyZ2luLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoLTUwJSknLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgJ2xlZnQnOiByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJpZ2h0ICAgIDogKHdpbmRvdy5pbm5lcldpZHRoIC0gdGFyZ2V0X3JlY3RhbmdsZS5sZWZ0KSArIG1hcmdpbixcbiAgICAgICAgICAgICAgICB0b3AgICAgICA6ICh0YXJnZXRfcmVjdGFuZ2xlLmhlaWdodCAvIDIpICsgdGFyZ2V0X3JlY3RhbmdsZS50b3AsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgtNTAlKScsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSAncmlnaHQnOiByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxlZnQgICAgIDogdGFyZ2V0X3JlY3RhbmdsZS5yaWdodCArIG1hcmdpbixcbiAgICAgICAgICAgICAgICB0b3AgICAgICA6ICh0YXJnZXRfcmVjdGFuZ2xlLmhlaWdodCAvIDIpICsgdGFyZ2V0X3JlY3RhbmdsZS50b3AsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgtNTAlKScsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBsZWZ0OiB0YXJnZXRfcmVjdGFuZ2xlLmxlZnQsXG4gICAgICAgICAgICAgICAgdG9wIDogdGFyZ2V0X3JlY3RhbmdsZS50b3AsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYWxpZ25tZW50LFxuICAgICAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICAgICAgaGFzX2Vycm9yLFxuICAgICAgICAgICAgaWNvbixcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgaXNfb3BlbixcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICB0YXJnZXRfcmVjdGFuZ2xlLFxuICAgICAgICAgICAgcG9ydGFsX2NvbnRhaW5lcixcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgaWYgKCF0YXJnZXRfcmVjdGFuZ2xlKSByZXR1cm4gbnVsbDtcblxuICAgICAgICBjb25zdCBwb3BvdmVyX2J1YmJsZSA9IChcbiAgICAgICAgICAgIDxQb3NlR3JvdXA+XG4gICAgICAgICAgICAgICAgeyBpc19vcGVuICYmXG4gICAgICAgICAgICAgICAgPEZhZGVJbiBrZXk9J2ZhZGVfaW4nIGluaXRpYWxQb3NlPSdleGl0JyBzdHlsZT17eyBwb3NpdGlvbjogJ2ZpeGVkJywgekluZGV4OiA5OTkgfX0+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17IHRhcmdldF9yZWN0YW5nbGUgPyB0aGlzLmNhbGN1bGF0ZVBvc2l0aW9uKCkgOiB7fX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcG9wb3Zlci1wb3M9e2FsaWdubWVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RjLXBvcG92ZXJfX2J1YmJsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAnZGMtcG9wb3Zlcl9fYnViYmxlLS1lcnJvcic6IGhhc19lcnJvciB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtpZH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgeyBpY29uID09PSAnaW5mbycgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2RjLXBvcG92ZXJfX2J1YmJsZV9faWNvbic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uSW5mb0JsdWUgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nZGMtcG9wb3Zlcl9fYnViYmxlX190ZXh0Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IG1lc3NhZ2UgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdkYy1wb3BvdmVyX19idWJibGVfX2Fycm93JyAvPlxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9GYWRlSW4+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9Qb3NlR3JvdXA+XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIFJlYWN0RE9NLmNyZWF0ZVBvcnRhbChcbiAgICAgICAgICAgIHBvcG92ZXJfYnViYmxlLFxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9ydGFsX2NvbnRhaW5lcilcbiAgICAgICAgKTtcbiAgICB9XG59XG5cblBvcG92ZXJCdWJibGUucHJvcFR5cGVzID0ge1xuICAgIGFsaWdubWVudCAgICAgICA6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY2hpbGRyZW4gICAgICAgIDogUHJvcFR5cGVzLm5vZGUsXG4gICAgY2xhc3NOYW1lICAgICAgIDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBoYXNfZXJyb3IgICAgICAgOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBpY29uICAgICAgICAgICAgOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGlkICAgICAgICAgICAgICA6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgaXNfb3BlbiAgICAgICAgIDogUHJvcFR5cGVzLmJvb2wsXG4gICAgbWFyZ2luICAgICAgICAgIDogUHJvcFR5cGVzLm51bWJlcixcbiAgICBtZXNzYWdlICAgICAgICAgOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgdGFyZ2V0X3JlY3RhbmdsZTogUHJvcFR5cGVzLm9iamVjdCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFBvcG92ZXJCdWJibGU7XG4iLCJpbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBQcm9wVHlwZXMgIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0ICAgICAgZnJvbSAncmVhY3QnO1xuXG4vLyBUT0RPIHJlbW92ZSB0aGlzIGZpbGUgZW50aXJlbHkgd2hlbiBpY29uIGNvbXBvbmVudCBpcyByZWFkeS5cbmNvbnN0IEljb25JbmZvT3V0bGluZSA9ICh7IGNsYXNzTmFtZSwgb25Nb3VzZUVudGVyLCBvbk1vdXNlTGVhdmUgfSkgPT4gKFxuICAgIDxzdmdcbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdpbmxpbmUtaWNvbicsIGNsYXNzTmFtZSl9XG4gICAgICAgIGhlaWdodD0nMTYnXG4gICAgICAgIG9uTW91c2VFbnRlcj17b25Nb3VzZUVudGVyfVxuICAgICAgICBvbk1vdXNlTGVhdmU9e29uTW91c2VMZWF2ZX1cbiAgICAgICAgdmlld0JveD0nMCAwIDE2IDE2J1xuICAgICAgICB3aWR0aD0nMTYnXG5cbiAgICA+XG4gICAgICAgIDxwYXRoIGNsYXNzTmFtZT0nY29sb3IxLWZpbGwnIGZpbGw9J3JnYmEoMCwgMCwgMCwgMC4xNiknIGZpbGxSdWxlPSdldmVub2RkJyBkPSdNOCAxNUE3IDcgMCAxIDAgOCAxYTcgNyAwIDAgMCAwIDE0em0wIDFBOCA4IDAgMSAxIDggMGE4IDggMCAwIDEgMCAxNnpNOCA2YS43NS43NSAwIDEgMCAwLTEuNUEuNzUuNzUgMCAwIDAgOCA2em0wIDFhLjUuNSAwIDAgMC0uNS41djRhLjUuNSAwIDEgMCAxIDB2LTRBLjUuNSAwIDAgMCA4IDd6JyAvPlxuICAgIDwvc3ZnPlxuKTtcblxuSWNvbkluZm9PdXRsaW5lLnByb3BUeXBlcyA9IHtcbiAgICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBJY29uSW5mb091dGxpbmU7XG4iLCJpbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0ICAgICBmcm9tICdyZWFjdCc7XG5cbi8vIFRPRE8gcmVtb3ZlIHRoaXMgZmlsZSBlbnRpcmVseSB3aGVuIGljb24gY29tcG9uZW50IGlzIHJlYWR5LlxuY29uc3QgSWNvblF1ZXN0aW9uID0gKHsgY2xhc3NOYW1lIH0pID0+IChcbiAgICA8c3ZnIGNsYXNzTmFtZT17Y2xhc3NOYW1lfSB3aWR0aD0nMTYnIGhlaWdodD0nMTYnIHZpZXdCb3g9JzAgMCAxNiAxNic+XG4gICAgICAgIDxnIGZpbGw9JyNGRkYnIGZpbGxSdWxlPSdldmVub2RkJz5cbiAgICAgICAgICAgIDxwYXRoIGQ9J004IDE2QTggOCAwIDEgMSA4IDBhOCA4IDAgMCAxIDAgMTZ6bTAtMUE3IDcgMCAxIDAgOCAxYTcgNyAwIDAgMCAwIDE0eicgZmlsbFJ1bGU9J25vbnplcm8nIC8+XG4gICAgICAgICAgICA8cGF0aCBkPSdNNy4zOSA5LjUxOGMuMDA3LS4zNzMuMDUyLS42NjguMTM0LS44ODUuMDgyLS4yMTYuMjUtLjQ1Ni41MDMtLjcybC42NDYtLjYzNmMuMjc2LS4yOTguNDE1LS42MTguNDE1LS45NiAwLS4zMy0uMDktLjU4OC0uMjcyLS43NzQtLjE4LS4xODctLjQ0NC0uMjgtLjc4OS0uMjgtLjMzNSAwLS42MDUuMDg0LS44MDkuMjU0YS44NDIuODQyIDAgMCAwLS4zMDYuNjgySDZjLjAwNy0uNTA4LjE5Ni0uOTE4LjU3LTEuMjMuMzczLS4zMTMuODU5LS40NjkgMS40NTctLjQ2OS42MjIgMCAxLjEwNi4xNiAxLjQ1My40NzguMzQ3LjMxOC41Mi43NTUuNTIgMS4zMSAwIC41NS0uMjY2IDEuMDkxLS43OTkgMS42MjVsLS41MzguNTA4Yy0uMjQuMjU1LS4zNi42Mi0uMzYgMS4wOTdoLS45MTJ6bS0uMDM5IDEuNDkyYS41LjUgMCAwIDEgLjEzNi0uMzU1Yy4wOS0uMDk2LjIyNC0uMTQ0LjQwMi0uMTQ0LjE3OCAwIC4zMTIuMDQ4LjQwNC4xNDRhLjQ5My40OTMgMCAwIDEgLjEzOS4zNTUuNDc3LjQ3NyAwIDAgMS0uMTM5LjM1MWMtLjA5Mi4wOTMtLjIyNi4xMzktLjQwNC4xMzktLjE3OCAwLS4zMTItLjA0Ni0uNDAyLS4xMzlhLjQ4MS40ODEgMCAwIDEtLjEzNi0uMzV6JyAvPlxuICAgICAgICA8L2c+XG4gICAgPC9zdmc+XG4pO1xuXG5JY29uUXVlc3Rpb24ucHJvcFR5cGVzID0ge1xuICAgIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEljb25RdWVzdGlvbjtcbiIsImltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgICAgIGZyb20gJ3JlYWN0JztcblxuLy8gVE9ETyByZW1vdmUgdGhpcyBmaWxlIGVudGlyZWx5IHdoZW4gaWNvbiBjb21wb25lbnQgaXMgcmVhZHkuXG5jb25zdCBJY29uUmVkRG90ID0gKHsgY2xhc3NOYW1lIH0pID0+IChcbiAgICA8c3ZnIGNsYXNzTmFtZT17Y2xhc3NOYW1lfSB3aWR0aD0nNCcgaGVpZ2h0PSc0Jz5cbiAgICAgICAgPGNpcmNsZSBjeD0nMTE2MycgY3k9JzYyNicgcj0nMicgdHJhbnNmb3JtPSd0cmFuc2xhdGUoLTExNjEgLTYyNCknIGZpbGw9JyNFMzFDNEInIGZpbGxSdWxlPSdub256ZXJvJyAvPlxuICAgIDwvc3ZnPlxuKTtcblxuSWNvblJlZERvdC5wcm9wVHlwZXMgPSB7XG4gICAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgSWNvblJlZERvdDtcbiIsImltcG9ydCBjbGFzc05hbWVzICAgICAgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgUHJvcFR5cGVzICAgICAgIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0ICAgICAgICAgICBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUG9wb3ZlckJ1YmJsZSAgIGZyb20gJy4vcG9wb3Zlci1idWJibGUuanN4JztcbmltcG9ydCBJY29uSW5mb091dGxpbmUgZnJvbSAnLi4vaWNvbi1pbmZvLW91dGxpbmUuanN4JztcbmltcG9ydCBJY29uUXVlc3Rpb24gICAgZnJvbSAnLi4vaWNvbi1xdWVzdGlvbi5qc3gnO1xuaW1wb3J0IEljb25SZWREb3QgICAgICBmcm9tICcuLi9pY29uLXJlZC1kb3QuanN4JztcblxuY2xhc3MgUG9wb3ZlciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgICAgICAgICAgICA9IHtcbiAgICAgICAgICAgIGlzX29wZW4gICAgICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgdGFyZ2V0X3JlY3RhbmdsZTogbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50YXJnZXRfcmVmZXJlbmNlID0gUmVhY3QuY3JlYXRlUmVmKCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzX29wZW4gICAgICAgICA6IHRoaXMucHJvcHMuaGFzX2Vycm9yLFxuICAgICAgICAgICAgdGFyZ2V0X3JlY3RhbmdsZTogdGhpcy50YXJnZXRfcmVmZXJlbmNlLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRvZ2dsZU9wZW4gPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNfb3BlbiAgICAgICAgIDogQm9vbGVhbih0aGlzLnByb3BzLm1lc3NhZ2UpLFxuICAgICAgICAgICAgdGFyZ2V0X3JlY3RhbmdsZTogdGhpcy50YXJnZXRfcmVmZXJlbmNlLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0b2dnbGVDbG9zZSA9ICgpID0+IHRoaXMuc2V0U3RhdGUoeyBpc19vcGVuOiBmYWxzZSB9KTtcblxuICAgIHJlbmRlciAoKSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGFsaWdubWVudCxcbiAgICAgICAgICAgIGNoaWxkcmVuLFxuICAgICAgICAgICAgY2xhc3NOYW1lQnViYmxlLFxuICAgICAgICAgICAgY2xhc3NOYW1lVGFyZ2V0LFxuICAgICAgICAgICAgY2xhc3NOYW1lVGFyZ2V0SWNvbixcbiAgICAgICAgICAgIGRpc2FibGVfdGFyZ2V0X2ljb24sXG4gICAgICAgICAgICBoYXNfZXJyb3IsXG4gICAgICAgICAgICBpY29uLFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBtYXJnaW4sXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgICAgICBjb25zdCBpY29uX2NsYXNzX25hbWUgPSBjbGFzc05hbWVzKGNsYXNzTmFtZVRhcmdldEljb24sIGljb24pO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZGMtcG9wb3ZlcidcbiAgICAgICAgICAgICAgICBpZD17aWR9XG4gICAgICAgICAgICAgICAgb25Nb3VzZUVudGVyPXt0aGlzLnRvZ2dsZU9wZW59XG4gICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXt0aGlzLnRvZ2dsZUNsb3NlfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKGNsYXNzTmFtZVRhcmdldCwgJ2RjLXBvcG92ZXJfX3RhcmdldCcpfSByZWY9e3RoaXMudGFyZ2V0X3JlZmVyZW5jZX0+XG4gICAgICAgICAgICAgICAgICAgIHshZGlzYWJsZV90YXJnZXRfaWNvbiAmJlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9e21lc3NhZ2UgPyAnZGMtcG9wb3Zlcl9fdGFyZ2V0X19pY29uJyA6ICdkYy1wb3BvdmVyX190YXJnZXRfX2ljb24tLWRpc2FibGVkJ30+XG4gICAgICAgICAgICAgICAgICAgICAgICB7KGljb24gPT09ICdpbmZvJykgJiYgPEljb25JbmZvT3V0bGluZSBjbGFzc05hbWU9e2ljb25fY2xhc3NfbmFtZX0gLz59XG4gICAgICAgICAgICAgICAgICAgICAgICB7KGljb24gPT09ICdxdWVzdGlvbicpICYmIDxJY29uUXVlc3Rpb24gY2xhc3NOYW1lPXtpY29uX2NsYXNzX25hbWV9IC8+fVxuICAgICAgICAgICAgICAgICAgICAgICAgeyhpY29uID09PSAnZG90JykgJiYgPEljb25SZWREb3QgY2xhc3NOYW1lPXtpY29uX2NsYXNzX25hbWV9IC8+fVxuICAgICAgICAgICAgICAgICAgICA8L2k+XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8UG9wb3ZlckJ1YmJsZVxuICAgICAgICAgICAgICAgICAgICBhbGlnbm1lbnQ9e2FsaWdubWVudH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVCdWJibGV9XG4gICAgICAgICAgICAgICAgICAgIGhhc19lcnJvcj17aGFzX2Vycm9yfVxuICAgICAgICAgICAgICAgICAgICBpY29uPXtpY29ufVxuICAgICAgICAgICAgICAgICAgICBpZD17YCR7aWR9X2J1YmJsZWB9XG4gICAgICAgICAgICAgICAgICAgIGlzX29wZW49e3RoaXMuc3RhdGUuaXNfb3Blbn1cbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X3JlY3RhbmdsZT17dGhpcy5zdGF0ZS50YXJnZXRfcmVjdGFuZ2xlfVxuICAgICAgICAgICAgICAgICAgICBtYXJnaW49e21hcmdpbn1cbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT17bWVzc2FnZX1cbiAgICAgICAgICAgICAgICAgICAgcG9ydGFsX2NvbnRhaW5lcj17dGhpcy5wcm9wcy5wb3J0YWxfY29udGFpbmVyfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblBvcG92ZXIuZGVmYXVsdFByb3BzID0ge1xuICAgIHBvcnRhbF9jb250YWluZXI6ICdkZXJpdl9hcHAnLFxufTtcblxuUG9wb3Zlci5wcm9wVHlwZXMgPSB7XG4gICAgYWxpZ25tZW50ICAgICAgICAgIDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBjaGlsZHJlbiAgICAgICAgICAgOiBQcm9wVHlwZXMubm9kZSxcbiAgICBjbGFzc05hbWVCdWJibGUgICAgOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGNsYXNzTmFtZVRhcmdldCAgICA6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY2xhc3NOYW1lVGFyZ2V0SWNvbjogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBkaXNhYmxlX3RhcmdldF9pY29uOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBoYXNfZXJyb3IgICAgICAgICAgOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBpY29uICAgICAgICAgICAgICAgOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGlkICAgICAgICAgICAgICAgICA6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgbWFyZ2luICAgICAgICAgICAgIDogUHJvcFR5cGVzLm51bWJlcixcbiAgICBtZXNzYWdlICAgICAgICAgICAgOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHBvcnRhbF9jb250YWluZXIgICA6IFByb3BUeXBlcy5zdHJpbmcsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBQb3BvdmVyO1xuIiwiaW1wb3J0ICcuL3BvcG92ZXIuc2Nzcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZyb20gJy4vcG9wb3Zlci5qc3gnO1xuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbk1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3hPQTtBQUNBO0FBQ0EsYUFXQTtBQUNBO0FBQ0E7OztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDN0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcFpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDamlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcC9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzF2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3RlQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTkE7QUFDQTtBQVdBO0FBQ0E7QUFEQTtBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQVBBO0FBQ0E7QUFjQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFJQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQXJCQTtBQTBCQTtBQUNBOzs7Ozs7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBYUE7QUFFQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBUkE7QUFXQTtBQUFBO0FBS0E7QUFBQTtBQUdBO0FBQUE7QUFPQTtBQUlBOzs7O0FBakZBO0FBQ0E7QUFtRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBYUE7O0FDdkhBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBU0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVZBO0FBQ0E7QUFhQTtBQUNBO0FBREE7QUFJQTs7QUN2QkE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFKQTtBQUNBO0FBUUE7QUFDQTtBQURBO0FBSUE7O0FDakJBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQUNBO0FBS0E7QUFDQTtBQURBO0FBSUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBRkE7QUFpQkE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBdEJBO0FBdUJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUF0QkE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQU5BO0FBT0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFXQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFjQTs7OztBQTNFQTtBQUNBO0FBNkVBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFlQTs7QUN6R0E7QUFBQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8\n")}}).default},module.exports=I(__webpack_require__(111),__webpack_require__(229))},72:function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"f",function(){return i}),n.d(t,"e",function(){return o}),n.d(t,"a",function(){return I}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return s});var r=n(3);function g(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){return{FRXAUDCAD:Object(r.localize)("AUD/CAD"),FRXAUDCHF:Object(r.localize)("AUD/CHF"),FRXAUDJPY:Object(r.localize)("AUD/JPY"),FRXAUDNZD:Object(r.localize)("AUD/NZD"),FRXAUDPLN:Object(r.localize)("AUD/PLN"),FRXAUDUSD:Object(r.localize)("AUD/USD"),FRXBROUSD:Object(r.localize)("Oil/USD"),FRXEURAUD:Object(r.localize)("EUR/AUD"),FRXEURCAD:Object(r.localize)("EUR/CAD"),FRXEURCHF:Object(r.localize)("EUR/CHF"),FRXEURGBP:Object(r.localize)("EUR/GBP"),FRXEURJPY:Object(r.localize)("EUR/JPY"),FRXEURNZD:Object(r.localize)("EUR/NZD"),FRXEURUSD:Object(r.localize)("EUR/USD"),FRXGBPAUD:Object(r.localize)("GBP/AUD"),FRXGBPCAD:Object(r.localize)("GBP/CAD"),FRXGBPCHF:Object(r.localize)("GBP/CHF"),FRXGBPJPY:Object(r.localize)("GBP/JPY"),FRXGBPNOK:Object(r.localize)("GBP/NOK"),FRXGBPUSD:Object(r.localize)("GBP/USD"),FRXNZDJPY:Object(r.localize)("NZD/JPY"),FRXNZDUSD:Object(r.localize)("NZD/USD"),FRXUSDCAD:Object(r.localize)("USD/CAD"),FRXUSDCHF:Object(r.localize)("USD/CHF"),FRXUSDJPY:Object(r.localize)("USD/JPY"),FRXUSDNOK:Object(r.localize)("USD/NOK"),FRXUSDPLN:Object(r.localize)("USD/PLN"),FRXUSDSEK:Object(r.localize)("USD/SEK"),FRXXAGUSD:Object(r.localize)("Silver/USD"),FRXXAUUSD:Object(r.localize)("Gold/USD"),FRXXPDUSD:Object(r.localize)("Palladium/USD"),FRXXPTUSD:Object(r.localize)("Platinum/USD"),OTC_AEX:Object(r.localize)("Dutch Index"),OTC_AS51:Object(r.localize)("Australian Index"),OTC_DJI:Object(r.localize)("Wall Street Index"),OTC_FCHI:Object(r.localize)("French Index"),OTC_FTSE:Object(r.localize)("UK Index"),OTC_GDAXI:Object(r.localize)("German Index"),OTC_HSI:Object(r.localize)("Hong Kong Index"),OTC_IBEX35:Object(r.localize)("Spanish Index"),OTC_N225:Object(r.localize)("Japanese Index"),OTC_NDX:Object(r.localize)("US Tech Index"),OTC_SPC:Object(r.localize)("US Index"),OTC_SSMI:Object(r.localize)("Swiss Index"),OTC_SX5E:Object(r.localize)("Euro 50 Index"),R_10:Object(r.localize)("Volatility 10 Index"),R_25:Object(r.localize)("Volatility 25 Index"),R_50:Object(r.localize)("Volatility 50 Index"),R_75:Object(r.localize)("Volatility 75 Index"),R_100:Object(r.localize)("Volatility 100 Index"),RDBEAR:Object(r.localize)("Bear Market Index"),RDBULL:Object(r.localize)("Bull Market Index"),WLDAUD:Object(r.localize)("AUD Index"),WLDEUR:Object(r.localize)("EUR Index"),WLDGBP:Object(r.localize)("GBP Index"),WLDUSD:Object(r.localize)("USD Index")}},i=function(){return{EXPIRYMISS:{name:Object(r.localize)("Ends Outside"),position:"top"},EXPIRYRANGE:{name:Object(r.localize)("Ends Between"),position:"bottom"},RANGE:{name:Object(r.localize)("Stays Between"),position:"top"},UPORDOWN:{name:Object(r.localize)("Goes Outside"),position:"bottom"},RESETCALL:{name:Object(r.localize)("Reset Call"),position:"top"},RESETPUT:{name:Object(r.localize)("Reset Put"),position:"bottom"},TICKHIGH:{name:Object(r.localize)("High Tick"),position:"top"},TICKLOW:{name:Object(r.localize)("Low Tick"),position:"bottom"},ASIANU:{name:Object(r.localize)("Asian Up"),position:"top"},ASIAND:{name:Object(r.localize)("Asian Down"),position:"bottom"},LBFLOATCALL:{name:Object(r.localize)("Close-Low"),position:"top"},LBFLOATPUT:{name:Object(r.localize)("High-Close"),position:"top"},LBHIGHLOW:{name:Object(r.localize)("High-Low"),position:"top"},CALLSPREAD:{name:Object(r.localize)("Call Spread"),position:"top"},PUTSPREAD:{name:Object(r.localize)("Put Spread"),position:"bottom"},RUNHIGH:{name:Object(r.localize)("Only Ups"),position:"top"},RUNLOW:{name:Object(r.localize)("Only Downs"),position:"bottom"}}},o=function(e){return{CALL:{name:e?Object(r.localize)("Higher"):Object(r.localize)("Rise"),position:"top"},PUT:{name:e?Object(r.localize)("Lower"):Object(r.localize)("Fall"),position:"bottom"},CALLE:{name:Object(r.localize)("Rise"),position:"top"},PUTE:{name:Object(r.localize)("Fall"),position:"bottom"},DIGITMATCH:{name:Object(r.localize)("Matches"),position:"top"},DIGITDIFF:{name:Object(r.localize)("Differs"),position:"bottom"},DIGITEVEN:{name:Object(r.localize)("Even"),position:"top"},DIGITODD:{name:Object(r.localize)("Odd"),position:"bottom"},DIGITOVER:{name:Object(r.localize)("Over"),position:"top"},DIGITUNDER:{name:Object(r.localize)("Under"),position:"bottom"},ONETOUCH:{name:Object(r.localize)("Touch"),position:"top"},NOTOUCH:{name:Object(r.localize)("No Touch"),position:"bottom"}}},I=function(e){return function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};g(n,!0).forEach(function(t){c(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):g(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}({},o(e),{},i())},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return I(t)[e]?I(t)[e.toUpperCase()].name:""},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return I(t)[e]?I(t)[e.toUpperCase()].position:"top"}},75:function(e,t,n){"use strict";var r=n(5),g=n.n(r),c=n(1),a=n.n(c),i=n(0),o=n.n(i),I=n(12),l=function(e){var t=e.amount,n=e.className,r=e.currency,c=void 0===r?"USD":r,a=e.has_sign,i=e.is_formatted,l=void 0===i||i,s="";+t&&(t<0||a)&&(s=t>0?"+":"-");var C=Math.abs(t),u=l?Object(I.formatMoney)(c,C,!0):C;return o.a.createElement(o.a.Fragment,null,a&&s,o.a.createElement("span",{className:g()(n,"symbols","symbols--".concat(c.toLowerCase()))}),u)};l.propTypes={amount:a.a.oneOfType([a.a.number,a.a.string]),className:a.a.string,currency:a.a.string,has_sign:a.a.bool,is_formatted:a.a.bool},t.a=l},77:function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return a});var r=n(3),g={Jan:Object(r.localize)("Jan"),Feb:Object(r.localize)("Feb"),Mar:Object(r.localize)("Mar"),Apr:Object(r.localize)("Apr"),May:Object(r.localize)("May"),Jun:Object(r.localize)("Jun"),Jul:Object(r.localize)("Jul"),Aug:Object(r.localize)("Aug"),Sep:Object(r.localize)("Sep"),Oct:Object(r.localize)("Oct"),Nov:Object(r.localize)("Nov"),Dec:Object(r.localize)("Dec")},c=(Object(r.localize)("Monday"),Object(r.localize)("Tuesday"),Object(r.localize)("Wednesday"),Object(r.localize)("Thursday"),Object(r.localize)("Friday"),Object(r.localize)("Saturday"),Object(r.localize)("Sunday"),{Monday:Object(r.localize)("M"),Tuesday:Object(r.localize)("T"),Wednesday:Object(r.localize)("W"),Thursday:Object(r.localize)("T"),Friday:Object(r.localize)("F"),Saturday:Object(r.localize)("S"),Sunday:Object(r.localize)("S")}),a=function(e){return{Mondays:1,Tuesdays:2,Wednesdays:3,Thursdays:4,Fridays:5,Saturdays:6,Sundays:0}[e]}},8:function(e,t,n){"use strict";var r=n(0),g=n.n(r),c=n(1),a=n.n(c);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=I(this,l(t).call(this,e))).icons={IconArrowBold:g.a.lazy(function(){return n.e(4).then(n.bind(null,520))}),IconArrow:g.a.lazy(function(){return n.e(5).then(n.bind(null,521))}),IconBack:g.a.lazy(function(){return n.e(6).then(n.bind(null,522))}),IconCalendarToday:g.a.lazy(function(){return n.e(7).then(n.bind(null,523))}),IconCalendar:g.a.lazy(function(){return n.e(8).then(n.bind(null,524))}),IconChevronDoubleLeft:g.a.lazy(function(){return n.e(9).then(n.bind(null,525))}),IconChevronDoubleRight:g.a.lazy(function(){return n.e(10).then(n.bind(null,526))}),IconChevronLeft:g.a.lazy(function(){return n.e(11).then(n.bind(null,527))}),IconChevronRight:g.a.lazy(function(){return n.e(12).then(n.bind(null,528))}),IconClear:g.a.lazy(function(){return n.e(13).then(n.bind(null,529))}),IconClock:g.a.lazy(function(){return n.e(14).then(n.bind(null,530))}),IconClose:g.a.lazy(function(){return n.e(15).then(n.bind(null,531))}),IconCountryFlag:g.a.lazy(function(){return n.e(16).then(n.bind(null,532))}),IconDanger:g.a.lazy(function(){return n.e(17).then(n.bind(null,533))}),IconDeposit:g.a.lazy(function(){return n.e(19).then(n.bind(null,534))}),IconDepositSmall:g.a.lazy(function(){return n.e(18).then(n.bind(null,535))}),IconExclamation:g.a.lazy(function(){return n.e(20).then(n.bind(null,536))}),IconFlag:g.a.lazy(function(){return n.e(21).then(n.bind(null,537))}),IconInfoBlue:g.a.lazy(function(){return n.e(22).then(n.bind(null,538))}),IconInfoOutline:g.a.lazy(function(){return n.e(23).then(n.bind(null,539))}),IconInformation:g.a.lazy(function(){return n.e(24).then(n.bind(null,540))}),IconMinimize:g.a.lazy(function(){return n.e(25).then(n.bind(null,541))}),IconMinus:g.a.lazy(function(){return n.e(26).then(n.bind(null,542))}),IconPlus:g.a.lazy(function(){return n.e(27).then(n.bind(null,543))}),IconQuestion:g.a.lazy(function(){return n.e(28).then(n.bind(null,544))}),IconRedDot:g.a.lazy(function(){return n.e(29).then(n.bind(null,545))}),IconSuccess:g.a.lazy(function(){return n.e(30).then(n.bind(null,546))}),IconWarning:g.a.lazy(function(){return n.e(31).then(n.bind(null,547))}),IconWip:g.a.lazy(function(){return n.e(32).then(n.bind(null,548))}),IconWithdrawal:g.a.lazy(function(){return n.e(34).then(n.bind(null,549))}),IconWithdrawalSmall:g.a.lazy(function(){return n.e(33).then(n.bind(null,550))}),ContractIconClose:g.a.lazy(function(){return n.e(35).then(n.bind(null,551))}),IconEndTime:g.a.lazy(function(){return n.e(36).then(n.bind(null,552))}),ContractIconFlag:g.a.lazy(function(){return n.e(37).then(n.bind(null,553))}),IconStartTime:g.a.lazy(function(){return n.e(38).then(n.bind(null,554))}),IconTick:g.a.lazy(function(){return n.e(39).then(n.bind(null,555))}),IconAuthenticateWithdrawals:g.a.lazy(function(){return n.e(1).then(n.bind(null,556))}),IconCashierError:g.a.lazy(function(){return n.e(2).then(n.bind(null,557))}),IconEmailSent:g.a.lazy(function(){return n.e(3).then(n.bind(null,558))}),ModalIconClose:g.a.lazy(function(){return n.e(51).then(n.bind(null,559))}),IconMaximize:g.a.lazy(function(){return n.e(40).then(n.bind(null,560))}),IconPositions:g.a.lazy(function(){return n.e(41).then(n.bind(null,561))}),IconSettings:g.a.lazy(function(){return n.e(42).then(n.bind(null,562))}),IconAccountsCurrency:g.a.lazy(function(){return n.e(43).then(n.bind(null,563))}),IconLogout:g.a.lazy(function(){return n.e(44).then(n.bind(null,564))}),IconBell:g.a.lazy(function(){return n.e(45).then(n.bind(null,565))}),IconCashier:g.a.lazy(function(){return n.e(46).then(n.bind(null,566))}),IconDeriv:g.a.lazy(function(){return Promise.resolve().then(n.bind(null,179))}),IconHamburger:g.a.lazy(function(){return n.e(47).then(n.bind(null,567))}),IconPortfolio:g.a.lazy(function(){return n.e(48).then(n.bind(null,568))}),IconReports:g.a.lazy(function(){return n.e(49).then(n.bind(null,569))}),IconTrade:g.a.lazy(function(){return n.e(50).then(n.bind(null,570))}),IconDemo:g.a.lazy(function(){return n.e(53).then(n.bind(null,571))}),IconOpenPositions:g.a.lazy(function(){return n.e(54).then(n.bind(null,572))}),IconProfitTable:g.a.lazy(function(){return n.e(55).then(n.bind(null,573))}),IconStatement:g.a.lazy(function(){return n.e(56).then(n.bind(null,574))}),IconCalendarForwardToday:g.a.lazy(function(){return n.e(52).then(n.bind(null,575))}),IconCharts:g.a.lazy(function(){return n.e(57).then(n.bind(null,576))}),IconLanguage:g.a.lazy(function(){return n.e(58).then(n.bind(null,577))}),IconPurchase:g.a.lazy(function(){return n.e(59).then(n.bind(null,578))}),IconTheme:g.a.lazy(function(){return n.e(60).then(n.bind(null,579))}),IconBuy:g.a.lazy(function(){return n.e(61).then(n.bind(null,580))}),IconPayout:g.a.lazy(function(){return n.e(62).then(n.bind(null,581))}),IconSell:g.a.lazy(function(){return n.e(63).then(n.bind(null,582))}),IconWallet:g.a.lazy(function(){return n.e(64).then(n.bind(null,583))}),IconBarrierDown:g.a.lazy(function(){return n.e(65).then(n.bind(null,584))}),IconBarrierUp:g.a.lazy(function(){return n.e(66).then(n.bind(null,585))}),IconTradeCategory:g.a.lazy(function(){return n.e(0).then(n.bind(null,586))}),TradeCategoriesGIF:g.a.lazy(function(){return n.e(67).then(n.bind(null,590))}),TradeCategories:g.a.lazy(function(){return n.e(68).then(n.bind(null,587))}),IconTradeType:g.a.lazy(function(){return n.e(69).then(n.bind(null,519))}),IconLock:g.a.lazy(function(){return n.e(70).then(n.bind(null,588))}),IconPriceMove:g.a.lazy(function(){return n.e(71).then(n.bind(null,589))})},r}var r,c,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,g.a.PureComponent),r=t,(c=[{key:"render",value:function(){var e={category:this.props.category,className:this.props.className,classNamePath:this.props.classNamePath,classNameRect:this.props.classNameRect,is_dark_theme:this.props.is_dark_theme,is_disabled:this.props.is_disabled,onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,type:this.props.type},t=this.icons[this.props.icon];return t?g.a.createElement(g.a.Suspense,{fallback:g.a.createElement("div",null)},g.a.createElement(t,e)):g.a.createElement("div",null)}}])&&o(r.prototype,c),a&&o(r,a),t}();C.propTypes={category:a.a.string,className:a.a.string,classNamePath:a.a.string,classNameRect:a.a.string,icon:a.a.string,is_dark_theme:a.a.bool,is_disabled:a.a.oneOfType([a.a.number,a.a.bool]),onClick:a.a.func,type:a.a.string},t.a=C},81:function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"a",function(){return c});var r=n(4),g=function(e){return"".concat(Object(r.w)(e).year(),"-").concat(Object(r.w)(e).add(9,"years").year())},c=function(e){return"".concat(Object(r.w)(e).year(),"-").concat(Object(r.w)(e).add(99,"years").year())}},9:function(e,t,n){"use strict";var r=n(106);n.d(t,"c",function(){return r.a});var g=n(140);n.d(t,"a",function(){return g.a});var c=n(46);n.d(t,"b",function(){return c.a})},93:function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(31),g=n(45),c=function(e){return/^\//.test(e)?e:"/".concat(e||"")},a=function e(t,n){var g;return n.some(function(n){var c;try{c=Object(r.f)(t,n)}catch(e){if(/undefined/.test(e.message))return}return c?(g=n,!0):!!n.routes&&(g=e(t,n.routes))}),g},i=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce(function(e,n){return e.replace(":".concat(n),t[n])},e)}(g.a.contract,{contract_id:e})}}});
//# sourceMappingURL=main.3781c0978168af2f291b.js.map