(window.webpackJsonp=window.webpackJsonp||[]).push([["account-info"],{1208:function(e,t,a){"use strict";a.r(t);var n=a(4),c=a.n(n),o=a(1),r=a.n(o),i=a(0),s=a.n(i),l=a(47),u=a(11),_=a(48),p=a(44),d=a.n(p),m=(a(147),a(37)),g=a.n(m),f=(a(99),a(31)),h=a.n(f),b=(a(75),a(14)),y=a.n(b),v=a(2),w=a(69),E=a(18),k=a.n(E),O=(a(55),function(e){var t=e.children,a=e.onClick,n=e.icon;return s.a.createElement("div",{className:"acc-switcher__new-account"},s.a.createElement(k.a,{id:"upgrade-account",onClick:a,className:"acc-switcher__new-account-link",tertiary:!0,icon:n},t))});O.propTypes={icon:r.a.node,onClick:r.a.func,text:r.a.string};var N=O,j=a(7),C=a(8),x=a(9),D=a(28),A=a(146),T=a(311);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function M(e,t,a,n,c,o,r){try{var i=e[o](r),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,c)}function L(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e){var t=e.children,a=e.header,n=e.is_visible,o=e.toggleVisibility;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:c()("acc-switcher",{"acc-info--show":!n}),onClick:o},s.a.createElement("span",{className:"acc-switcher__list-title"},a),s.a.createElement(j.a,{icon:"IconArrow",className:"acc-info__select-arrow"})),n&&s.a.createElement(s.a.Fragment,null,t))},V=function(e){var t=e.account_type,a=e.balance,n=e.currency,o=e.currency_icon,r=e.display_type,i=e.has_balance,l=e.has_demo_text,_=e.is_disabled,p=e.is_virtual,m=e.loginid,f=e.onClickAccount,h=e.selected_loginid;return s.a.createElement(g.a,{alignment:"left",message:m},s.a.createElement("div",{id:"dt_".concat(m),className:c()("acc-switcher__account",{"acc-switcher__account--selected":m===h,"acc-switcher__account--disabled":_,"acc-switcher__account--demo-text":l}),onClick:_?void 0:f},s.a.createElement("span",{className:"acc-switcher__id"},s.a.createElement(j.a,{icon:"IconAccountsCurrency",className:"acc-switcher__id-icon acc-switcher__id-icon--".concat(o),type:o}),s.a.createElement("span",null,"currency"===r?s.a.createElement(F,{is_virtual:p,currency:o}):s.a.createElement(H,{is_virtual:l,account_type:t})),i&&s.a.createElement("span",{className:c()("acc-switcher__balance",{"acc-switcher__balance--virtual":p||l})},n&&s.a.createElement(d.a,{currency:n,amount:y.a.formatMoney(n,a,!0),should_format:!1}),!n&&s.a.createElement("span",{className:"no-currency"},s.a.createElement(u.a,{i18n_default_text:"No currency assigned"}))))))},F=function(e){var t=e.currency;return e.is_virtual?s.a.createElement(u.a,{i18n_default_text:"Demo"}):"REAL"===t.toUpperCase()?s.a.createElement(u.a,{i18n_default_text:"Real"}):t.toUpperCase()},H=function(e){var t=e.account_type,a=e.is_virtual;return s.a.createElement(s.a.Fragment,null,a&&s.a.createElement("div",{className:"acc-switcher__demo-text"},s.a.createElement(u.a,{i18n_default_text:"Demo"})),s.a.createElement("div",null,Object(A.b)(t)))},W=function(e){var t=e.onClick,a=e.text;return s.a.createElement(N,{onClick:t,icon:s.a.createElement(j.a,{icon:"IconAdd"})},a)},J=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=R(this,(e=U(t)).call.apply(e,[this].concat(c)))).state={is_deriv_visible:!0,is_dmt5_visible:!0},a.toggleVisibility=function(e){var t,n,c;a.setState((t={},n="is_".concat(e,"_visible"),c=!a.state["is_".concat(e,"_visible")],n in t?Object.defineProperty(t,n,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[n]=c,t))},a.setWrapperRef=function(e){a.wrapper_ref=e},a.handleClickOutside=function(e){var t=!e.target.classList.contains("acc-info");a.wrapper_ref&&!a.wrapper_ref.contains(e.target)&&a.props.is_visible&&t&&a.props.toggle()},a.handleLogout=function(){a.props.toggle(),a.props.is_positions_drawer_on&&a.props.togglePositionsDrawer(),Object(C.c)().then(a.props.cleanUp)},a.redirectToMt5=function(e){a.props.toggleAccountsDialog(),a.props.history.push("".concat(D.a.mt5,"#").concat(e))},a.redirectToMt5Real=function(){a.redirectToMt5("real")},a.redirectToMt5Demo=function(){a.redirectToMt5("demo")},a.onClickUpgrade=function(){"svg"===a.props.can_upgrade_to?a.props.openRealAccountSignup():window.open(Object(w.urlFor)("new_account/maltainvestws",void 0,void 0,!0))},a}var a,n,c,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),a=t,(n=[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside),this.props.updateMt5LoginList()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside),this.props.hideDialog()}},{key:"doSwitch",value:(o=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.toggle(),this.props.account_loginid!==t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.props.clearPositions();case 5:return e.next=7,this.props.clearContracts();case 7:return e.next=9,this.props.switchAccount(t);case 9:this.props.has_error&&this.props.clearError();case 10:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,t=arguments;return new Promise((function(a,n){var c=o.apply(e,t);function r(e){M(c,a,n,r,i,"next",e)}function i(e){M(c,a,n,r,i,"throw",e)}r(void 0)}))},function(e){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this;return!!this.props.is_logged_in&&s.a.createElement("div",{className:"acc-switcher__list",ref:this.setWrapperRef,style:{display:this.props.display}},s.a.createElement(h.a,{autoHeight:!0,autoHide:!0,autoHeightMax:462,renderTrackHorizontal:function(e){return s.a.createElement("div",P({},e,{className:"track-horizontal",style:{display:"none"}}))},renderThumbHorizontal:function(e){return s.a.createElement("div",P({},e,{className:"thumb-horizontal",style:{display:"none"}}))}},s.a.createElement("div",{className:"acc-switcher__list-wrapper"},s.a.createElement("div",null,s.a.createElement(z,{header:s.a.createElement(u.a,{i18n_default_text:"Deriv Accounts"}),is_visible:this.state.is_deriv_visible,toggleVisibility:function(){e.toggleVisibility("deriv")}},s.a.createElement("div",{className:"acc-switcher__accounts"},this.sorted_account_list.map((function(t){return s.a.createElement(V,{key:t.loginid,balance:e.props.accounts[t.loginid].balance,currency:e.props.accounts[t.loginid].currency,currency_icon:t.icon,display_type:"currency",has_balance:"balance"in e.props.accounts[t.loginid],is_disabled:t.is_disabled,is_virtual:t.is_virtual,loginid:t.loginid,onClickAccount:t.is_disabled?void 0:e.doSwitch.bind(e,t.loginid),selected_loginid:e.props.account_loginid})}))),this.has_add_button&&s.a.createElement(W,{onClick:this.can_upgrade?this.onClickUpgrade:this.props.openRealAccountSignup,text:s.a.createElement(u.a,{i18n_default_text:"Add Deriv account"})}))),this.props.is_mt5_allowed&&s.a.createElement("div",null,s.a.createElement(z,{header:s.a.createElement(u.a,{i18n_default_text:"DMT5 Accounts"}),is_visible:this.state.is_dmt5_visible,toggleVisibility:function(){e.toggleVisibility("dmt5")}},this.props.is_loading_mt5?s.a.createElement(T.a,{className:"acc-switcher__loader"}):s.a.createElement(s.a.Fragment,null,this.props.has_mt5_login?s.a.createElement("div",{className:"acc-switcher__accounts"},this.sorted_mt5_list.map((function(t){return s.a.createElement(V,{key:t.login,account_type:t.group,balance:t.balance,currency:t.currency,currency_icon:Object(A.c)(t.group).replace(/^demo/,"real"),has_balance:"balance"in t,has_demo_text:/^demo/.test(t.group),loginid:t.login,onClickAccount:/^demo/.test(t.group)?e.redirectToMt5Demo:e.redirectToMt5Real})}))):s.a.createElement(W,{onClick:this.redirectToMt5Real,text:s.a.createElement(u.a,{i18n_default_text:"Add DMT5 account"})})))))),s.a.createElement("div",{className:"acc-switcher__separator"}),s.a.createElement("div",{className:"acc-switcher__total"},s.a.createElement("span",null,s.a.createElement(u.a,{i18n_default_text:"Total assets"})),s.a.createElement(g.a,{alignment:"bottom",message:this.props.has_mt5_login?Object(v.localize)("Total assets in your Deriv and DMT5 accounts (excluding demo accounts)."):Object(v.localize)("Total assets in your Deriv accounts (excluding demo accounts).")},s.a.createElement(j.a,{icon:"IconInfoOutline",className:"acc-switcher__total-icon"})),s.a.createElement("span",{className:"acc-switcher__balance"},s.a.createElement(d.a,{currency:this.props.obj_total_balance.currency,amount:y.a.formatMoney(this.props.obj_total_balance.currency,this.total_assets,!0),should_format:!1}))),s.a.createElement("div",{className:"acc-switcher__separator"}),s.a.createElement("div",{id:"dt_logout_button",className:"acc-switcher__logout",onClick:this.handleLogout},s.a.createElement("span",{className:"acc-switcher__logout-text"},Object(v.localize)("Log out")),s.a.createElement(j.a,{icon:"IconLogout",className:"acc-switcher__logout-icon drawer__icon"})))}},{key:"can_manage_currency",get:function(){return this.props.can_change_currency||!this.props.is_virtual&&!this.props.has_fiat&&this.props.can_upgrade_to}},{key:"sorted_account_list",get:function(){var e=this;return this.props.account_list.sort((function(t,a){var n=e.props.accounts[t.loginid].currency,c=e.props.accounts[a.loginid].currency,o=y.a.isCryptocurrency(n),r=y.a.isCryptocurrency(c),i=!o,s=!r;return t.is_virtual||a.is_virtual?t.is_virtual?1:-1:o&&r||i&&s?n<c?-1:1:i&&r?-1:1}))}},{key:"sorted_mt5_list",get:function(){return this.props.mt5_login_list.sort((function(e,t){return/demo/.test(e.group)&&!/demo/.test(t.group)?1:/demo/.test(t.group)&&!/demo/.test(e.group)?-1:/vanuatu/.test(e.group)?-1:/svg/.test(e.group)?1:-1}))}},{key:"can_upgrade",get:function(){return!!(this.props.is_upgrade_enabled&&this.props.is_virtual&&this.props.can_upgrade_to)}},{key:"has_add_button",get:function(){return this.can_upgrade||this.can_manage_currency}},{key:"total_assets",get:function(){return this.props.obj_total_balance.amount_real+this.props.obj_total_balance.amount_mt5}}])&&L(a.prototype,n),c&&L(a,c),t}(s.a.Component);J.propTypes={account_list:r.a.array,account_loginid:r.a.string,accounts:r.a.object,cleanUp:r.a.func,clearContracts:r.a.func,clearError:r.a.func,clearPositions:r.a.func,display:r.a.string,has_error:r.a.bool,has_fiat:r.a.bool,has_mt5_login:r.a.bool,hideDialog:r.a.func,is_loading_mt5:r.a.bool,is_logged_in:r.a.bool,is_mt5_allowed:r.a.bool,is_positions_drawer_on:r.a.bool,is_upgrade_enabled:r.a.bool,is_virtual:r.a.bool,is_visible:r.a.bool,mt5_login_list:r.a.array,obj_total_balance:r.a.object,toggle:r.a.func,toggleAccountsDialog:r.a.func,togglePositionsDrawer:r.a.func,updateMt5LoginList:r.a.func};var B=Object(_.g)(Object(x.b)((function(e){var t=e.client,a=e.ui,n=e.modules;return{account_loginid:t.loginid,accounts:t.accounts,has_fiat:t.has_fiat,can_change_currency:t.can_change_currency,account_list:t.account_list,can_upgrade:t.can_upgrade,can_upgrade_to:t.can_upgrade_to,has_mt5_login:t.has_mt5_login,is_loading_mt5:t.is_populating_mt5_account_list,is_logged_in:t.is_logged_in,is_mt5_allowed:t.is_mt5_allowed,is_virtual:t.is_virtual,mt5_login_list:t.mt5_login_list,obj_total_balance:t.obj_total_balance,switchAccount:t.switchAccount,cleanUp:t.cleanUp,updateMt5LoginList:t.updateMt5LoginList,clearError:n.contract_trade.clearError,has_error:n.contract_trade.has_error,clearPositions:n.portfolio.clearTable,clearContracts:n.trade.clearContracts,is_positions_drawer_on:a.is_positions_drawer_on,openRealAccountSignup:a.openRealAccountSignup,toggleAccountsDialog:a.toggleAccountsDialog,togglePositionsDrawer:a.togglePositionsDrawer}}))(J));function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function K(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=K(this,(e=Q(t)).call.apply(e,[this].concat(c)))).state={display:"none"},a.showDialog=function(){a.setState({display:"block"})},a.hideDialog=function(){a.setState({display:"none"})},a}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,e),a=t,(n=[{key:"render",value:function(){var e,t,a,n=this.props,o=n.balance,r=n.currency,i=n.is_dialog_on,_=n.is_upgrade_enabled,p=n.is_virtual,d=n.toggleDialog;return s.a.createElement("div",{className:"acc-info__wrapper"},s.a.createElement("div",{className:"acc-info__separator"}),s.a.createElement("div",{className:c()("acc-info",{"acc-info--show":i,"acc-info--is-virtual":p}),onClick:d},s.a.createElement("span",{className:"acc-info__id"},s.a.createElement(j.a,{icon:"IconAccountsCurrency",className:"acc-info__id-icon acc-info__id-icon--".concat(p?"virtual":r),type:p?"virtual":(r||"real").toLowerCase()})),void 0!==o&&s.a.createElement("p",{className:"acc-info__balance"},s.a.createElement("span",{className:c()("symbols",(e={},t="symbols--".concat((r||"").toLowerCase()),a=r,t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e))}),!r&&s.a.createElement(u.a,{i18n_default_text:"No currency assigned"}),r&&o),s.a.createElement(j.a,{icon:"IconArrowBold",className:"acc-info__select-arrow"})),s.a.createElement(l.CSSTransition,{in:i,timeout:200,classNames:{enter:"acc-switcher__wrapper--enter",enterDone:"acc-switcher__wrapper--enter-done",exit:"acc-switcher__wrapper--exit"},onEntered:this.showDialog,unmountOnExit:!0},s.a.createElement("div",{className:"acc-switcher__wrapper"},s.a.createElement(B,{is_visible:i,hideDialog:this.hideDialog,display:this.state.display,toggle:d,is_upgrade_enabled:_}))))}}])&&G(a.prototype,n),o&&G(a,o),t}(s.a.Component);Y.propTypes={account_type:r.a.string,balance:r.a.string,currency:r.a.string,is_dialog_on:r.a.bool,is_upgrade_enabled:r.a.bool,is_virtual:r.a.bool,loginid:r.a.string,toggleDialog:r.a.func};t.default=Y}}]);
//# sourceMappingURL=account-info.1e251c0be77adf5ee0bc.js.map