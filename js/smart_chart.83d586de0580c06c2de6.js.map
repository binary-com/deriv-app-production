{"version":3,"sources":["webpack:///./Modules/SmartChart/Components/bottom-widgets.jsx","webpack:///./Modules/SmartChart/Components/control-widgets.jsx","webpack:///./Modules/SmartChart/Components/Markers/marker.jsx","webpack:///./Modules/SmartChart/Components/top-widgets.jsx","webpack:///./Modules/SmartChart/Helpers/symbol.js","webpack:///./Modules/SmartChart/Containers/smart-chart.jsx"],"names":["BottomWidgets","_ref","Digits","react_default","a","createElement","className","propTypes","PropTypes","node","ControlWidgets","updateChartType","updateGranularity","Fragment","smartcharts","onChange","searchInputClassName","func","ChartMarker","marker_config","marker_content_props","is_bottom_widget_visible","ContentComponent","marker_props","_objectWithoutProperties","markerRef","ref","y","margin","div","style","height","concat","zIndex","setPosition","epoch","x","price","toJS","object","TopWidgets","InfoBox","_ref$is_title_enabled","is_title_enabled","onSymbolChange","enabled","bool","symbolChange","symbol","target","name","value","setSmartChartsPublicPath","getUrlBase","Chart","chartControlsWidgets","control_widgets","_this","props","topWidgets","top_widgets","bottomWidgets","bottom_widgets","React","Component","this","onMount","onUnmount","_this2","barriers","barriers_array","should_show_bottom_widgets","is_contract_mode","chartStatusListener","getChartStatus","chartType","chart_type","endEpoch","end_epoch","id","chart_id","isMobile","is_mobile","enabledNavigationWidget","granularity","requestAPI","wsSendRequest","requestForget","wsForget","requestForgetStream","wsForgetStream","requestSubscribe","wsSubscribe","settings","showLastDigitStats","should_show_last_digit_stats","startEpoch","start_epoch","scrollToEpoch","scroll_to_epoch","isConnectionOpened","is_socket_opened","clearChart","should_clear_chart","importedLayout","should_import_layout","trade_chart_layout","onExportLayout","should_export_layout","exportLayout","isStaticChart","is_static_chart","shouldFetchTradingTimes","refreshActiveSymbols","should_refresh_active_symbols","markers_array","map","marker","idx","Markers_marker","key","content_config","array","string","number","replay_controls","connect","modules","ui","common","smart_chart"],"mappings":"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","file":"js/smart_chart.83d586de0580c06c2de6.js","sourcesContent":["import PropTypes      from 'prop-types';\nimport React          from 'react';\n\nconst BottomWidgets = ({\n    Digits,\n}) => (\n    <div className='bottom-widgets'>\n        {Digits}\n    </div>\n);\n\nBottomWidgets.propTypes = {\n    Digits: PropTypes.node,\n};\n\nexport default BottomWidgets;\n","import {\n    ChartSize,\n    ChartTypes,\n    Comparison,\n    CrosshairToggle,\n    DrawTools,\n    Share,\n    StudyLegend,\n    Timeperiod,\n    Views }           from 'smartcharts-beta';\nimport PropTypes      from 'prop-types';\nimport React          from 'react';\n\nconst ControlWidgets = ({\n    updateChartType,\n    updateGranularity,\n}) => (\n    <React.Fragment>\n        <CrosshairToggle />\n        <ChartTypes onChange={updateChartType} />\n        <StudyLegend searchInputClassName='data-hj-whitelist' />\n        <Comparison searchInputClassName='data-hj-whitelist' />\n        <DrawTools />\n        <Views searchInputClassName='data-hj-whitelist' />\n        <Share />\n        <Timeperiod onChange={updateGranularity} />\n        <ChartSize />\n    </React.Fragment>\n);\n\nControlWidgets.propTypes = {\n    updateChartType  : PropTypes.func,\n    updateGranularity: PropTypes.func,\n};\n\nexport default ControlWidgets;\n","import { toJS }       from 'mobx';\nimport PropTypes      from 'prop-types';\nimport React          from 'react';\nimport { FastMarker } from 'smartcharts-beta';\n\nconst ChartMarker = ({\n    marker_config,\n    marker_content_props,\n    is_bottom_widget_visible,\n}) => {\n    const { ContentComponent, ...marker_props } = marker_config;\n\n    // TODO:\n    //  - rename x to epoch\n    //  - rename y to price\n    const onRef = ref => {\n        if (ref) {\n            // NOTE: null price means vertical line.\n            if (!marker_props.y) {\n                const margin =\n                    (is_bottom_widget_visible ? 115 : 0) + // digit contracts have a widget at the bottom\n                    24;                                    // height of line marker icon\n\n                ref.div.style.height =  `calc(100% - ${margin}px)`;\n                ref.div.style.zIndex = '-1';\n            }\n            ref.setPosition({\n                epoch: +marker_props.x,\n                price: +marker_props.y,\n            });\n        }\n    };\n\n    return (\n        <FastMarker\n            markerRef={onRef}\n        >\n            <ContentComponent {...toJS(marker_content_props)} />\n        </FastMarker>\n    );\n};\n\nChartMarker.propTypes = {\n    marker_config       : PropTypes.object,\n    marker_content_props: PropTypes.object,\n};\n\nexport default ChartMarker;\n","import {\n    AssetInformation,\n    ChartTitle }      from 'smartcharts-beta';\nimport PropTypes      from 'prop-types';\nimport React          from 'react';\n\nconst TopWidgets = ({\n    InfoBox,\n    is_title_enabled = true,\n    onSymbolChange,\n}) => (\n    <React.Fragment>\n        {InfoBox}\n        <ChartTitle enabled={is_title_enabled} onChange={onSymbolChange} searchInputClassName='data-hj-whitelist' />\n        <AssetInformation />\n    </React.Fragment>\n);\n\nTopWidgets.propTypes = {\n    InfoBox         : PropTypes.node,\n    is_title_enabled: PropTypes.bool,\n    onSymbolChange  : PropTypes.func,\n};\n\nexport default TopWidgets;\n","export const symbolChange = (onSymbolChange) => (\n    onSymbolChange &&\n    ((symbol) => {\n        onSymbolChange({\n            target: {\n                name : 'symbol',\n                value: symbol,\n            },\n        });\n    })\n);\n","import {\n    SmartChart,\n    setSmartChartsPublicPath } from 'smartcharts-beta';\nimport PropTypes               from 'prop-types';\nimport React                   from 'react';\nimport { getUrlBase }          from '_common/url';\nimport { connect }             from 'Stores/connect';\nimport BottomWidgets           from '../Components/bottom-widgets.jsx';\nimport ControlWidgets          from '../Components/control-widgets.jsx';\nimport ChartMarker             from '../Components/Markers/marker.jsx';\nimport TopWidgets              from '../Components/top-widgets.jsx';\nimport { symbolChange }        from '../Helpers/symbol';\n\nsetSmartChartsPublicPath(getUrlBase('/js/smartcharts/'));\n\nclass Chart extends React.Component {\n    componentDidMount() { this.props.onMount(); }\n\n    componentWillUnmount() { this.props.onUnmount(); }\n\n    chartControlsWidgets = () => (\n        <ControlWidgets\n            updateChartType={this.props.updateChartType}\n            updateGranularity={this.props.updateGranularity}\n        />\n    );\n\n    topWidgets = () => (\n        <TopWidgets\n            InfoBox={this.props.InfoBox}\n            is_title_enabled={this.props.is_title_enabled}\n            onSymbolChange={symbolChange(this.props.onSymbolChange)}\n        />\n    );\n\n    bottomWidgets = () => (\n        <BottomWidgets Digits={this.props.Digits} />\n    );\n\n    render() {\n        return (\n            <SmartChart\n                barriers={this.props.barriers_array}\n                bottomWidgets={this.props.should_show_bottom_widgets ?\n                    this.bottomWidgets : null}\n                chartControlsWidgets={this.props.is_contract_mode ? null : this.chartControlsWidgets}\n                chartStatusListener={this.props.getChartStatus}\n                chartType={this.props.chart_type}\n                endEpoch={this.props.end_epoch}\n                margin={this.props.margin || null}\n                id={this.props.chart_id}\n                isMobile={this.props.is_mobile}\n                enabledNavigationWidget={this.props.is_contract_mode}\n                granularity={this.props.granularity}\n                requestAPI={this.props.wsSendRequest}\n                requestForget={this.props.wsForget}\n                requestForgetStream={this.props.wsForgetStream}\n                requestSubscribe={this.props.wsSubscribe}\n                settings={this.props.settings}\n                showLastDigitStats={this.props.should_show_last_digit_stats}\n                startEpoch={this.props.start_epoch}\n                scrollToEpoch={this.props.scroll_to_epoch}\n                symbol={this.props.symbol}\n                topWidgets={this.topWidgets}\n                isConnectionOpened={this.props.is_socket_opened}\n                clearChart={this.props.should_clear_chart}\n                importedLayout={this.props.should_import_layout ? this.props.trade_chart_layout : null}\n                onExportLayout={this.props.should_export_layout ? this.props.exportLayout : null}\n                isStaticChart={this.props.is_static_chart}\n                shouldFetchTradingTimes={!this.props.end_epoch}\n                refreshActiveSymbols={this.props.should_refresh_active_symbols}\n            >\n                { this.props.markers_array.map((marker, idx) => (\n                    <ChartMarker\n                        key={idx}\n                        marker_config={marker.marker_config}\n                        marker_content_props={marker.content_config}\n                        is_bottom_widget_visible={this.props.should_show_bottom_widgets}\n                    />\n                ))}\n            </SmartChart>\n        );\n    }\n}\n\nChart.propTypes = {\n    barriers_array               : PropTypes.array,\n    BottomWidgets                : PropTypes.node,\n    chart_id                     : PropTypes.string,\n    chart_type                   : PropTypes.string,\n    end_epoch                    : PropTypes.number,\n    exportLayout                 : PropTypes.func,\n    getChartStatus               : PropTypes.func,\n    granularity                  : PropTypes.number,\n    InfoBox                      : PropTypes.node,\n    is_contract_mode             : PropTypes.bool,\n    is_mobile                    : PropTypes.bool,\n    is_socket_opened             : PropTypes.bool,\n    is_static_chart              : PropTypes.bool,\n    is_title_enabled             : PropTypes.bool,\n    margin                       : PropTypes.number,\n    markers_array                : PropTypes.array,\n    onMount                      : PropTypes.func,\n    onSymbolChange               : PropTypes.func,\n    onUnmount                    : PropTypes.func,\n    replay_controls              : PropTypes.object,\n    scroll_to_epoch              : PropTypes.number,\n    settings                     : PropTypes.object,\n    should_clear_chart           : PropTypes.bool,\n    should_export_layout         : PropTypes.bool,\n    should_import_layout         : PropTypes.bool,\n    should_refresh_active_symbols: PropTypes.bool,\n    should_show_last_digit_stats : PropTypes.bool,\n    start_epoch                  : PropTypes.number,\n    symbol                       : PropTypes.string,\n    trade_chart_layout           : PropTypes.object,\n    updateChartType              : PropTypes.func,\n    updateGranularity            : PropTypes.func,\n    wsForget                     : PropTypes.func,\n    wsForgetStream               : PropTypes.func,\n    wsSendRequest                : PropTypes.func,\n    wsSubscribe                  : PropTypes.func,\n};\n\nexport default connect(\n    ({ modules, ui, common }) => ({\n        is_socket_opened             : common.is_socket_opened,\n        barriers_array               : modules.smart_chart.barriers_array,\n        exportLayout                 : modules.smart_chart.exportLayout,\n        getChartStatus               : modules.smart_chart.getChartStatus,\n        is_contract_mode             : modules.smart_chart.is_contract_mode,\n        is_title_enabled             : modules.smart_chart.is_title_enabled,\n        margin                       : modules.smart_chart.margin,\n        markers_array                : modules.smart_chart.markers_array,\n        onMount                      : modules.smart_chart.onMount,\n        onUnmount                    : modules.smart_chart.onUnmount,\n        settings                     : modules.smart_chart.settings,\n        should_clear_chart           : modules.smart_chart.should_clear_chart,\n        should_export_layout         : modules.smart_chart.should_export_layout,\n        should_import_layout         : modules.smart_chart.should_import_layout,\n        should_refresh_active_symbols: modules.smart_chart.should_refresh_active_symbols,\n        trade_chart_layout           : modules.smart_chart.trade_chart_layout,\n        updateChartType              : modules.smart_chart.updateChartType,\n        updateGranularity            : modules.smart_chart.updateGranularity,\n        wsForget                     : modules.smart_chart.wsForget,\n        wsForgetStream               : modules.smart_chart.wsForgetStream,\n        wsSendRequest                : modules.smart_chart.wsSendRequest,\n        wsSubscribe                  : modules.smart_chart.wsSubscribe,\n        is_mobile                    : ui.is_mobile,\n    })\n)(Chart);\n"],"sourceRoot":""}